var AH=Object.defineProperty;var EH=(t,n,r)=>n in t?AH(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var Wv=(t,n,r)=>EH(t,typeof n!="symbol"?n+"":n,r);function TH(t,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Vs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i5={exports:{}},Rg={},o5={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Symbol.for("react.element"),MH=Symbol.for("react.portal"),OH=Symbol.for("react.fragment"),RH=Symbol.for("react.strict_mode"),IH=Symbol.for("react.profiler"),DH=Symbol.for("react.provider"),LH=Symbol.for("react.context"),$H=Symbol.for("react.forward_ref"),FH=Symbol.for("react.suspense"),BH=Symbol.for("react.memo"),zH=Symbol.for("react.lazy"),i_=Symbol.iterator;function VH(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var l5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c5=Object.assign,d5={};function Cd(t,n,r){this.props=t,this.context=n,this.refs=d5,this.updater=r||l5}Cd.prototype.isReactComponent={};Cd.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Cd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u5(){}u5.prototype=Cd.prototype;function Q1(t,n,r){this.props=t,this.context=n,this.refs=d5,this.updater=r||l5}var Z1=Q1.prototype=new u5;Z1.constructor=Q1;c5(Z1,Cd.prototype);Z1.isPureReactComponent=!0;var o_=Array.isArray,f5=Object.prototype.hasOwnProperty,eN={current:null},p5={key:!0,ref:!0,__self:!0,__source:!0};function h5(t,n,r){var s,a={},i=null,l=null;if(n!=null)for(s in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(i=""+n.key),n)f5.call(n,s)&&!p5.hasOwnProperty(s)&&(a[s]=n[s]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:ip,type:t,key:i,ref:l,props:a,_owner:eN.current}}function UH(t,n){return{$$typeof:ip,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function tN(t){return typeof t=="object"&&t!==null&&t.$$typeof===ip}function HH(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return n[r]})}var l_=/\/+/g;function Kv(t,n){return typeof t=="object"&&t!==null&&t.key!=null?HH(""+t.key):n.toString(36)}function am(t,n,r,s,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ip:case MH:l=!0}}if(l)return l=t,a=a(l),t=s===""?"."+Kv(l,0):s,o_(a)?(r="",t!=null&&(r=t.replace(l_,"$&/")+"/"),am(a,n,r,"",function(u){return u})):a!=null&&(tN(a)&&(a=UH(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(l_,"$&/")+"/")+t)),n.push(a)),1;if(l=0,s=s===""?".":s+":",o_(t))for(var c=0;c<t.length;c++){i=t[c];var d=s+Kv(i,c);l+=am(i,n,r,d,a)}else if(d=VH(t),typeof d=="function")for(t=d.call(t),c=0;!(i=t.next()).done;)i=i.value,d=s+Kv(i,c++),l+=am(i,n,r,d,a);else if(i==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function Gp(t,n,r){if(t==null)return t;var s=[],a=0;return am(t,s,"","",function(i){return n.call(r,i,a++)}),s}function WH(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},im={transition:null},KH={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:im,ReactCurrentOwner:eN};function m5(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Gp,forEach:function(t,n,r){Gp(t,function(){n.apply(this,arguments)},r)},count:function(t){var n=0;return Gp(t,function(){n++}),n},toArray:function(t){return Gp(t,function(n){return n})||[]},only:function(t){if(!tN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=Cd;Ve.Fragment=OH;Ve.Profiler=IH;Ve.PureComponent=Q1;Ve.StrictMode=RH;Ve.Suspense=FH;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KH;Ve.act=m5;Ve.cloneElement=function(t,n,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=c5({},t.props),a=t.key,i=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,l=eN.current),n.key!==void 0&&(a=""+n.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in n)f5.call(n,d)&&!p5.hasOwnProperty(d)&&(s[d]=n[d]===void 0&&c!==void 0?c[d]:n[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:ip,type:t.type,key:a,ref:i,props:s,_owner:l}};Ve.createContext=function(t){return t={$$typeof:LH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DH,_context:t},t.Consumer=t};Ve.createElement=h5;Ve.createFactory=function(t){var n=h5.bind(null,t);return n.type=t,n};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:$H,render:t}};Ve.isValidElement=tN;Ve.lazy=function(t){return{$$typeof:zH,_payload:{_status:-1,_result:t},_init:WH}};Ve.memo=function(t,n){return{$$typeof:BH,type:t,compare:n===void 0?null:n}};Ve.startTransition=function(t){var n=im.transition;im.transition={};try{t()}finally{im.transition=n}};Ve.unstable_act=m5;Ve.useCallback=function(t,n){return ar.current.useCallback(t,n)};Ve.useContext=function(t){return ar.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};Ve.useEffect=function(t,n){return ar.current.useEffect(t,n)};Ve.useId=function(){return ar.current.useId()};Ve.useImperativeHandle=function(t,n,r){return ar.current.useImperativeHandle(t,n,r)};Ve.useInsertionEffect=function(t,n){return ar.current.useInsertionEffect(t,n)};Ve.useLayoutEffect=function(t,n){return ar.current.useLayoutEffect(t,n)};Ve.useMemo=function(t,n){return ar.current.useMemo(t,n)};Ve.useReducer=function(t,n,r){return ar.current.useReducer(t,n,r)};Ve.useRef=function(t){return ar.current.useRef(t)};Ve.useState=function(t){return ar.current.useState(t)};Ve.useSyncExternalStore=function(t,n,r){return ar.current.useSyncExternalStore(t,n,r)};Ve.useTransition=function(){return ar.current.useTransition()};Ve.version="18.3.1";o5.exports=Ve;var x=o5.exports;const ae=Vs(x),Ig=TH({__proto__:null,default:ae},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qH=x,GH=Symbol.for("react.element"),YH=Symbol.for("react.fragment"),XH=Object.prototype.hasOwnProperty,JH=qH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QH={key:!0,ref:!0,__self:!0,__source:!0};function x5(t,n,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(l=n.ref);for(s in n)XH.call(n,s)&&!QH.hasOwnProperty(s)&&(a[s]=n[s]);if(t&&t.defaultProps)for(s in n=t.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:GH,type:t,key:i,ref:l,props:a,_owner:JH.current}}Rg.Fragment=YH;Rg.jsx=x5;Rg.jsxs=x5;i5.exports=Rg;var o=i5.exports,Yb={},g5={exports:{}},Vr={},y5={exports:{}},v5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(D,$){var F=D.length;D.push($);e:for(;0<F;){var K=F-1>>>1,J=D[K];if(0<a(J,$))D[K]=$,D[F]=J,F=K;else break e}}function r(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var $=D[0],F=D.pop();if(F!==$){D[0]=F;e:for(var K=0,J=D.length,Y=J>>>1;K<Y;){var ee=2*(K+1)-1,Q=D[ee],ue=ee+1,G=D[ue];if(0>a(Q,F))ue<J&&0>a(G,Q)?(D[K]=G,D[ue]=F,K=ue):(D[K]=Q,D[ee]=F,K=ee);else if(ue<J&&0>a(G,F))D[K]=G,D[ue]=F,K=ue;else break e}}return $}function a(D,$){var F=D.sortIndex-$.sortIndex;return F!==0?F:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],u=[],f=1,p=null,h=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(D){for(var $=r(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=D)s(u),$.sortIndex=$.expirationTime,n(d,$);else break;$=r(u)}}function N(D){if(y=!1,j(D),!g)if(r(d)!==null)g=!0,I(S);else{var $=r(u);$!==null&&L(N,$.startTime-D)}}function S(D,$){g=!1,y&&(y=!1,b(C),C=-1),m=!0;var F=h;try{for(j($),p=r(d);p!==null&&(!(p.expirationTime>$)||D&&!M());){var K=p.callback;if(typeof K=="function"){p.callback=null,h=p.priorityLevel;var J=K(p.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?p.callback=J:p===r(d)&&s(d),j($)}else s(d);p=r(d)}if(p!==null)var Y=!0;else{var ee=r(u);ee!==null&&L(N,ee.startTime-$),Y=!1}return Y}finally{p=null,h=F,m=!1}}var _=!1,k=null,C=-1,P=5,E=-1;function M(){return!(t.unstable_now()-E<P)}function T(){if(k!==null){var D=t.unstable_now();E=D;var $=!0;try{$=k(!0,D)}finally{$?A():(_=!1,k=null)}}else _=!1}var A;if(typeof w=="function")A=function(){w(T)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,O=R.port2;R.port1.onmessage=T,A=function(){O.postMessage(null)}}else A=function(){v(T,0)};function I(D){k=D,_||(_=!0,A())}function L(D,$){C=v(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,I(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return D()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=h;h=D;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(D,$,F){var K=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?K+F:K):F=K,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,D={id:f++,callback:$,priorityLevel:D,startTime:F,expirationTime:J,sortIndex:-1},F>K?(D.sortIndex=F,n(u,D),r(d)===null&&D===r(u)&&(y?(b(C),C=-1):y=!0,L(N,F-K))):(D.sortIndex=J,n(d,D),g||m||(g=!0,I(S))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var $=h;return function(){var F=h;h=$;try{return D.apply(this,arguments)}finally{h=F}}}})(v5);y5.exports=v5;var ZH=y5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eW=x,Fr=ZH;function se(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b5=new Set,cf={};function Ul(t,n){Jc(t,n),Jc(t+"Capture",n)}function Jc(t,n){for(cf[t]=n,t=0;t<n.length;t++)b5.add(n[t])}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xb=Object.prototype.hasOwnProperty,tW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c_={},d_={};function nW(t){return Xb.call(d_,t)?!0:Xb.call(c_,t)?!1:tW.test(t)?d_[t]=!0:(c_[t]=!0,!1)}function rW(t,n,r,s){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sW(t,n,r,s){if(n===null||typeof n>"u"||rW(t,n,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ir(t,n,r,s,a,i,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=n,this.sanitizeURL=i,this.removeEmptyString=l}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pn[t]=new ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Pn[n]=new ir(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pn[t]=new ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pn[t]=new ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pn[t]=new ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pn[t]=new ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pn[t]=new ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pn[t]=new ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pn[t]=new ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var nN=/[\-:]([a-z])/g;function rN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(nN,rN);Pn[n]=new ir(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(nN,rN);Pn[n]=new ir(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(nN,rN);Pn[n]=new ir(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pn[t]=new ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pn[t]=new ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function sN(t,n,r,s){var a=Pn.hasOwnProperty(n)?Pn[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(sW(n,r,a,s)&&(r=null),s||a===null?nW(n)&&(r===null?t.removeAttribute(n):t.setAttribute(n,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(n=a.attributeName,s=a.attributeNamespace,r===null?t.removeAttribute(n):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?t.setAttributeNS(s,n,r):t.setAttribute(n,r))))}var ui=eW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yp=Symbol.for("react.element"),pc=Symbol.for("react.portal"),hc=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),Jb=Symbol.for("react.profiler"),w5=Symbol.for("react.provider"),j5=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),Qb=Symbol.for("react.suspense"),Zb=Symbol.for("react.suspense_list"),oN=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),N5=Symbol.for("react.offscreen"),u_=Symbol.iterator;function ru(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,qv;function _u(t){if(qv===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);qv=n&&n[1]||""}return`
`+qv+t}var Gv=!1;function Yv(t,n){if(!t||Gv)return"";Gv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var s=u}Reflect.construct(t,[],n)}else{try{n.call()}catch(u){s=u}t.call(n.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,c=i.length-1;1<=l&&0<=c&&a[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==i[c]){var d=`
`+a[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{Gv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?_u(t):""}function aW(t){switch(t.tag){case 5:return _u(t.type);case 16:return _u("Lazy");case 13:return _u("Suspense");case 19:return _u("SuspenseList");case 0:case 2:case 15:return t=Yv(t.type,!1),t;case 11:return t=Yv(t.type.render,!1),t;case 1:return t=Yv(t.type,!0),t;default:return""}}function ew(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hc:return"Fragment";case pc:return"Portal";case Jb:return"Profiler";case aN:return"StrictMode";case Qb:return"Suspense";case Zb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j5:return(t.displayName||"Context")+".Consumer";case w5:return(t._context.displayName||"Context")+".Provider";case iN:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oN:return n=t.displayName||null,n!==null?n:ew(t.type)||"Memo";case Ai:n=t._payload,t=t._init;try{return ew(t(n))}catch{}}return null}function iW(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ew(n);case 8:return n===aN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S5(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oW(t){var n=S5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),s=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Xp(t){t._valueTracker||(t._valueTracker=oW(t))}function k5(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return t&&(s=S5(t)?t.checked?"true":"false":t.value),t=s,t!==r?(n.setValue(t),!0):!1}function Fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tw(t,n){var r=n.checked;return _t({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function f_(t,n){var r=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;r=ao(n.value!=null?n.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function C5(t,n){n=n.checked,n!=null&&sN(t,"checked",n,!1)}function nw(t,n){C5(t,n);var r=ao(n.value),s=n.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?rw(t,n.type,r):n.hasOwnProperty("defaultValue")&&rw(t,n.type,ao(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function p_(t,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,r||n===t.value||(t.value=n),t.defaultValue=n}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rw(t,n,r){(n!=="number"||Fm(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Pu=Array.isArray;function Ic(t,n,r,s){if(t=t.options,n){n={};for(var a=0;a<r.length;a++)n["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=n.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&s&&(t[r].defaultSelected=!0)}else{for(r=""+ao(r),n=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,s&&(t[a].defaultSelected=!0);return}n!==null||t[a].disabled||(n=t[a])}n!==null&&(n.selected=!0)}}function sw(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(se(91));return _t({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function h_(t,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(se(92));if(Pu(r)){if(1<r.length)throw Error(se(93));r=r[0]}n=r}n==null&&(n=""),r=n}t._wrapperState={initialValue:ao(r)}}function _5(t,n){var r=ao(n.value),s=ao(n.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),n.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function m_(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function P5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aw(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?P5(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jp,A5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,s,a){MSApp.execUnsafeLocalFunction(function(){return t(n,r,s,a)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Jp=Jp||document.createElement("div"),Jp.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Jp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function df(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lW=["Webkit","ms","Moz","O"];Object.keys(Bu).forEach(function(t){lW.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Bu[n]=Bu[t]})});function E5(t,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Bu.hasOwnProperty(t)&&Bu[t]?(""+n).trim():n+"px"}function T5(t,n){t=t.style;for(var r in n)if(n.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=E5(r,n[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,a):t[r]=a}}var cW=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iw(t,n){if(n){if(cW[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(se(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(se(61))}if(n.style!=null&&typeof n.style!="object")throw Error(se(62))}}function ow(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lw=null;function lN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cw=null,Dc=null,Lc=null;function x_(t){if(t=cp(t)){if(typeof cw!="function")throw Error(se(280));var n=t.stateNode;n&&(n=Bg(n),cw(t.stateNode,t.type,n))}}function M5(t){Dc?Lc?Lc.push(t):Lc=[t]:Dc=t}function O5(){if(Dc){var t=Dc,n=Lc;if(Lc=Dc=null,x_(t),n)for(t=0;t<n.length;t++)x_(n[t])}}function R5(t,n){return t(n)}function I5(){}var Xv=!1;function D5(t,n,r){if(Xv)return t(n,r);Xv=!0;try{return R5(t,n,r)}finally{Xv=!1,(Dc!==null||Lc!==null)&&(I5(),O5())}}function uf(t,n){var r=t.stateNode;if(r===null)return null;var s=Bg(r);if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,n,typeof r));return r}var dw=!1;if(Ka)try{var su={};Object.defineProperty(su,"passive",{get:function(){dw=!0}}),window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{dw=!1}function dW(t,n,r,s,a,i,l,c,d){var u=Array.prototype.slice.call(arguments,3);try{n.apply(r,u)}catch(f){this.onError(f)}}var zu=!1,Bm=null,zm=!1,uw=null,uW={onError:function(t){zu=!0,Bm=t}};function fW(t,n,r,s,a,i,l,c,d){zu=!1,Bm=null,dW.apply(uW,arguments)}function pW(t,n,r,s,a,i,l,c,d){if(fW.apply(this,arguments),zu){if(zu){var u=Bm;zu=!1,Bm=null}else throw Error(se(198));zm||(zm=!0,uw=u)}}function Hl(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function L5(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g_(t){if(Hl(t)!==t)throw Error(se(188))}function hW(t){var n=t.alternate;if(!n){if(n=Hl(t),n===null)throw Error(se(188));return n!==t?null:t}for(var r=t,s=n;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return g_(a),t;if(i===s)return g_(a),n;i=i.sibling}throw Error(se(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,c=a.child;c;){if(c===r){l=!0,r=a,s=i;break}if(c===s){l=!0,s=a,r=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===r){l=!0,r=i,s=a;break}if(c===s){l=!0,s=i,r=a;break}c=c.sibling}if(!l)throw Error(se(189))}}if(r.alternate!==s)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:n}function $5(t){return t=hW(t),t!==null?F5(t):null}function F5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=F5(t);if(n!==null)return n;t=t.sibling}return null}var B5=Fr.unstable_scheduleCallback,y_=Fr.unstable_cancelCallback,mW=Fr.unstable_shouldYield,xW=Fr.unstable_requestPaint,Lt=Fr.unstable_now,gW=Fr.unstable_getCurrentPriorityLevel,cN=Fr.unstable_ImmediatePriority,z5=Fr.unstable_UserBlockingPriority,Vm=Fr.unstable_NormalPriority,yW=Fr.unstable_LowPriority,V5=Fr.unstable_IdlePriority,Dg=null,oa=null;function vW(t){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Dg,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:jW,bW=Math.log,wW=Math.LN2;function jW(t){return t>>>=0,t===0?32:31-(bW(t)/wW|0)|0}var Qp=64,Zp=4194304;function Au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Um(t,n){var r=t.pendingLanes;if(r===0)return 0;var s=0,a=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var c=l&~a;c!==0?s=Au(c):(i&=l,i!==0&&(s=Au(i)))}else l=r&~a,l!==0?s=Au(l):i!==0&&(s=Au(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=r&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=s;0<n;)r=31-As(n),a=1<<r,s|=t[r],n&=~a;return s}function NW(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SW(t,n){for(var r=t.suspendedLanes,s=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-As(i),c=1<<l,d=a[l];d===-1?(!(c&r)||c&s)&&(a[l]=NW(c,n)):d<=n&&(t.expiredLanes|=c),i&=~c}}function fw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U5(){var t=Qp;return Qp<<=1,!(Qp&4194240)&&(Qp=64),t}function Jv(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function op(t,n,r){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-As(n),t[n]=r}function kW(t,n){var r=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-As(r),i=1<<a;n[a]=0,s[a]=-1,t[a]=-1,r&=~i}}function dN(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var s=31-As(r),a=1<<s;a&n|t[s]&n&&(t[s]|=n),r&=~a}}var Ze=0;function H5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W5,uN,K5,q5,G5,pw=!1,eh=[],Wi=null,Ki=null,qi=null,ff=new Map,pf=new Map,Ii=[],CW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v_(t,n){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":ff.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":pf.delete(n.pointerId)}}function au(t,n,r,s,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=cp(n),n!==null&&uN(n)),t):(t.eventSystemFlags|=s,n=t.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),t)}function _W(t,n,r,s,a){switch(n){case"focusin":return Wi=au(Wi,t,n,r,s,a),!0;case"dragenter":return Ki=au(Ki,t,n,r,s,a),!0;case"mouseover":return qi=au(qi,t,n,r,s,a),!0;case"pointerover":var i=a.pointerId;return ff.set(i,au(ff.get(i)||null,t,n,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,pf.set(i,au(pf.get(i)||null,t,n,r,s,a)),!0}return!1}function Y5(t){var n=Go(t.target);if(n!==null){var r=Hl(n);if(r!==null){if(n=r.tag,n===13){if(n=L5(r),n!==null){t.blockedOn=n,G5(t.priority,function(){K5(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function om(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=hw(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);lw=s,r.target.dispatchEvent(s),lw=null}else return n=cp(r),n!==null&&uN(n),t.blockedOn=r,!1;n.shift()}return!0}function b_(t,n,r){om(t)&&r.delete(n)}function PW(){pw=!1,Wi!==null&&om(Wi)&&(Wi=null),Ki!==null&&om(Ki)&&(Ki=null),qi!==null&&om(qi)&&(qi=null),ff.forEach(b_),pf.forEach(b_)}function iu(t,n){t.blockedOn===n&&(t.blockedOn=null,pw||(pw=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,PW)))}function hf(t){function n(a){return iu(a,t)}if(0<eh.length){iu(eh[0],t);for(var r=1;r<eh.length;r++){var s=eh[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Wi!==null&&iu(Wi,t),Ki!==null&&iu(Ki,t),qi!==null&&iu(qi,t),ff.forEach(n),pf.forEach(n),r=0;r<Ii.length;r++)s=Ii[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ii.length&&(r=Ii[0],r.blockedOn===null);)Y5(r),r.blockedOn===null&&Ii.shift()}var $c=ui.ReactCurrentBatchConfig,Hm=!0;function AW(t,n,r,s){var a=Ze,i=$c.transition;$c.transition=null;try{Ze=1,fN(t,n,r,s)}finally{Ze=a,$c.transition=i}}function EW(t,n,r,s){var a=Ze,i=$c.transition;$c.transition=null;try{Ze=4,fN(t,n,r,s)}finally{Ze=a,$c.transition=i}}function fN(t,n,r,s){if(Hm){var a=hw(t,n,r,s);if(a===null)o0(t,n,s,Wm,r),v_(t,s);else if(_W(a,t,n,r,s))s.stopPropagation();else if(v_(t,s),n&4&&-1<CW.indexOf(t)){for(;a!==null;){var i=cp(a);if(i!==null&&W5(i),i=hw(t,n,r,s),i===null&&o0(t,n,s,Wm,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else o0(t,n,s,null,r)}}var Wm=null;function hw(t,n,r,s){if(Wm=null,t=lN(s),t=Go(t),t!==null)if(n=Hl(t),n===null)t=null;else if(r=n.tag,r===13){if(t=L5(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Wm=t,null}function X5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gW()){case cN:return 1;case z5:return 4;case Vm:case yW:return 16;case V5:return 536870912;default:return 16}default:return 16}}var Fi=null,pN=null,lm=null;function J5(){if(lm)return lm;var t,n=pN,r=n.length,s,a="value"in Fi?Fi.value:Fi.textContent,i=a.length;for(t=0;t<r&&n[t]===a[t];t++);var l=r-t;for(s=1;s<=l&&n[r-s]===a[i-s];s++);return lm=a.slice(t,1<s?1-s:void 0)}function cm(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function th(){return!0}function w_(){return!1}function Ur(t){function n(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?th:w_,this.isPropagationStopped=w_,this}return _t(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),n}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hN=Ur(_d),lp=_t({},_d,{view:0,detail:0}),TW=Ur(lp),Qv,Zv,ou,Lg=_t({},lp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ou&&(ou&&t.type==="mousemove"?(Qv=t.screenX-ou.screenX,Zv=t.screenY-ou.screenY):Zv=Qv=0,ou=t),Qv)},movementY:function(t){return"movementY"in t?t.movementY:Zv}}),j_=Ur(Lg),MW=_t({},Lg,{dataTransfer:0}),OW=Ur(MW),RW=_t({},lp,{relatedTarget:0}),e0=Ur(RW),IW=_t({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),DW=Ur(IW),LW=_t({},_d,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$W=Ur(LW),FW=_t({},_d,{data:0}),N_=Ur(FW),BW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UW(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=VW[t])?!!n[t]:!1}function mN(){return UW}var HW=_t({},lp,{key:function(t){if(t.key){var n=BW[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=cm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mN,charCode:function(t){return t.type==="keypress"?cm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WW=Ur(HW),KW=_t({},Lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S_=Ur(KW),qW=_t({},lp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mN}),GW=Ur(qW),YW=_t({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),XW=Ur(YW),JW=_t({},Lg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QW=Ur(JW),ZW=[9,13,27,32],xN=Ka&&"CompositionEvent"in window,Vu=null;Ka&&"documentMode"in document&&(Vu=document.documentMode);var e9=Ka&&"TextEvent"in window&&!Vu,Q5=Ka&&(!xN||Vu&&8<Vu&&11>=Vu),k_=" ",C_=!1;function Z5(t,n){switch(t){case"keyup":return ZW.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function t9(t,n){switch(t){case"compositionend":return eI(n);case"keypress":return n.which!==32?null:(C_=!0,k_);case"textInput":return t=n.data,t===k_&&C_?null:t;default:return null}}function n9(t,n){if(mc)return t==="compositionend"||!xN&&Z5(t,n)?(t=J5(),lm=pN=Fi=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Q5&&n.locale!=="ko"?null:n.data;default:return null}}var r9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!r9[t.type]:n==="textarea"}function tI(t,n,r,s){M5(s),n=Km(n,"onChange"),0<n.length&&(r=new hN("onChange","change",null,r,s),t.push({event:r,listeners:n}))}var Uu=null,mf=null;function s9(t){fI(t,0)}function $g(t){var n=yc(t);if(k5(n))return t}function a9(t,n){if(t==="change")return n}var nI=!1;if(Ka){var t0;if(Ka){var n0="oninput"in document;if(!n0){var P_=document.createElement("div");P_.setAttribute("oninput","return;"),n0=typeof P_.oninput=="function"}t0=n0}else t0=!1;nI=t0&&(!document.documentMode||9<document.documentMode)}function A_(){Uu&&(Uu.detachEvent("onpropertychange",rI),mf=Uu=null)}function rI(t){if(t.propertyName==="value"&&$g(mf)){var n=[];tI(n,mf,t,lN(t)),D5(s9,n)}}function i9(t,n,r){t==="focusin"?(A_(),Uu=n,mf=r,Uu.attachEvent("onpropertychange",rI)):t==="focusout"&&A_()}function o9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $g(mf)}function l9(t,n){if(t==="click")return $g(n)}function c9(t,n){if(t==="input"||t==="change")return $g(n)}function d9(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ms=typeof Object.is=="function"?Object.is:d9;function xf(t,n){if(Ms(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Xb.call(n,a)||!Ms(t[a],n[a]))return!1}return!0}function E_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T_(t,n){var r=E_(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=n&&s>=n)return{node:r,offset:n-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=E_(r)}}function sI(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?sI(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function aI(){for(var t=window,n=Fm();n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Fm(t.document)}return n}function gN(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function u9(t){var n=aI(),r=t.focusedElem,s=t.selectionRange;if(n!==r&&r&&r.ownerDocument&&sI(r.ownerDocument.documentElement,r)){if(s!==null&&gN(r)){if(n=s.start,t=s.end,t===void 0&&(t=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(t,r.value.length);else if(t=(n=r.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!t.extend&&i>s&&(a=s,s=i,i=a),a=T_(r,i);var l=T_(r,s);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),t.removeAllRanges(),i>s?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=r;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)t=n[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f9=Ka&&"documentMode"in document&&11>=document.documentMode,xc=null,mw=null,Hu=null,xw=!1;function M_(t,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xw||xc==null||xc!==Fm(s)||(s=xc,"selectionStart"in s&&gN(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Hu&&xf(Hu,s)||(Hu=s,s=Km(mw,"onSelect"),0<s.length&&(n=new hN("onSelect","select",null,n,r),t.push({event:n,listeners:s}),n.target=xc)))}function nh(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var gc={animationend:nh("Animation","AnimationEnd"),animationiteration:nh("Animation","AnimationIteration"),animationstart:nh("Animation","AnimationStart"),transitionend:nh("Transition","TransitionEnd")},r0={},iI={};Ka&&(iI=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function Fg(t){if(r0[t])return r0[t];if(!gc[t])return t;var n=gc[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in iI)return r0[t]=n[r];return t}var oI=Fg("animationend"),lI=Fg("animationiteration"),cI=Fg("animationstart"),dI=Fg("transitionend"),uI=new Map,O_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(t,n){uI.set(t,n),Ul(n,[t])}for(var s0=0;s0<O_.length;s0++){var a0=O_[s0],p9=a0.toLowerCase(),h9=a0[0].toUpperCase()+a0.slice(1);vo(p9,"on"+h9)}vo(oI,"onAnimationEnd");vo(lI,"onAnimationIteration");vo(cI,"onAnimationStart");vo("dblclick","onDoubleClick");vo("focusin","onFocus");vo("focusout","onBlur");vo(dI,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function R_(t,n,r){var s=t.type||"unknown-event";t.currentTarget=r,pW(s,n,void 0,t),t.currentTarget=null}function fI(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var l=s.length-1;0<=l;l--){var c=s[l],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==i&&a.isPropagationStopped())break e;R_(a,c,u),i=d}else for(l=0;l<s.length;l++){if(c=s[l],d=c.instance,u=c.currentTarget,c=c.listener,d!==i&&a.isPropagationStopped())break e;R_(a,c,u),i=d}}}if(zm)throw t=uw,zm=!1,uw=null,t}function ot(t,n){var r=n[ww];r===void 0&&(r=n[ww]=new Set);var s=t+"__bubble";r.has(s)||(pI(n,t,2,!1),r.add(s))}function i0(t,n,r){var s=0;n&&(s|=4),pI(r,t,s,n)}var rh="_reactListening"+Math.random().toString(36).slice(2);function gf(t){if(!t[rh]){t[rh]=!0,b5.forEach(function(r){r!=="selectionchange"&&(m9.has(r)||i0(r,!1,t),i0(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[rh]||(n[rh]=!0,i0("selectionchange",!1,n))}}function pI(t,n,r,s){switch(X5(n)){case 1:var a=AW;break;case 4:a=EW;break;default:a=fN}r=a.bind(null,n,r,t),a=void 0,!dw||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?t.addEventListener(n,r,{capture:!0,passive:a}):t.addEventListener(n,r,!0):a!==void 0?t.addEventListener(n,r,{passive:a}):t.addEventListener(n,r,!1)}function o0(t,n,r,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;c!==null;){if(l=Go(c),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}c=c.parentNode}}s=s.return}D5(function(){var u=i,f=lN(r),p=[];e:{var h=uI.get(t);if(h!==void 0){var m=hN,g=t;switch(t){case"keypress":if(cm(r)===0)break e;case"keydown":case"keyup":m=WW;break;case"focusin":g="focus",m=e0;break;case"focusout":g="blur",m=e0;break;case"beforeblur":case"afterblur":m=e0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=OW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=GW;break;case oI:case lI:case cI:m=DW;break;case dI:m=XW;break;case"scroll":m=TW;break;case"wheel":m=QW;break;case"copy":case"cut":case"paste":m=$W;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=S_}var y=(n&4)!==0,v=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,j;w!==null;){j=w;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,b!==null&&(N=uf(w,b),N!=null&&y.push(yf(w,N,j)))),v)break;w=w.return}0<y.length&&(h=new m(h,g,null,r,f),p.push({event:h,listeners:y}))}}if(!(n&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&r!==lw&&(g=r.relatedTarget||r.fromElement)&&(Go(g)||g[qa]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Go(g):null,g!==null&&(v=Hl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=j_,N="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=S_,N="onPointerLeave",b="onPointerEnter",w="pointer"),v=m==null?h:yc(m),j=g==null?h:yc(g),h=new y(N,w+"leave",m,r,f),h.target=v,h.relatedTarget=j,N=null,Go(f)===u&&(y=new y(b,w+"enter",g,r,f),y.target=j,y.relatedTarget=v,N=y),v=N,m&&g)t:{for(y=m,b=g,w=0,j=y;j;j=tc(j))w++;for(j=0,N=b;N;N=tc(N))j++;for(;0<w-j;)y=tc(y),w--;for(;0<j-w;)b=tc(b),j--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=tc(y),b=tc(b)}y=null}else y=null;m!==null&&I_(p,h,m,y,!1),g!==null&&v!==null&&I_(p,v,g,y,!0)}}e:{if(h=u?yc(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=a9;else if(__(h))if(nI)S=c9;else{S=o9;var _=i9}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=l9);if(S&&(S=S(t,u))){tI(p,S,r,f);break e}_&&_(t,h,u),t==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&rw(h,"number",h.value)}switch(_=u?yc(u):window,t){case"focusin":(__(_)||_.contentEditable==="true")&&(xc=_,mw=u,Hu=null);break;case"focusout":Hu=mw=xc=null;break;case"mousedown":xw=!0;break;case"contextmenu":case"mouseup":case"dragend":xw=!1,M_(p,r,f);break;case"selectionchange":if(f9)break;case"keydown":case"keyup":M_(p,r,f)}var k;if(xN)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else mc?Z5(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Q5&&r.locale!=="ko"&&(mc||C!=="onCompositionStart"?C==="onCompositionEnd"&&mc&&(k=J5()):(Fi=f,pN="value"in Fi?Fi.value:Fi.textContent,mc=!0)),_=Km(u,C),0<_.length&&(C=new N_(C,t,null,r,f),p.push({event:C,listeners:_}),k?C.data=k:(k=eI(r),k!==null&&(C.data=k)))),(k=e9?t9(t,r):n9(t,r))&&(u=Km(u,"onBeforeInput"),0<u.length&&(f=new N_("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:u}),f.data=k))}fI(p,n)})}function yf(t,n,r){return{instance:t,listener:n,currentTarget:r}}function Km(t,n){for(var r=n+"Capture",s=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=uf(t,r),i!=null&&s.unshift(yf(t,i,a)),i=uf(t,n),i!=null&&s.push(yf(t,i,a))),t=t.return}return s}function tc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I_(t,n,r,s,a){for(var i=n._reactName,l=[];r!==null&&r!==s;){var c=r,d=c.alternate,u=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&u!==null&&(c=u,a?(d=uf(r,i),d!=null&&l.unshift(yf(r,d,c))):a||(d=uf(r,i),d!=null&&l.push(yf(r,d,c)))),r=r.return}l.length!==0&&t.push({event:n,listeners:l})}var x9=/\r\n?/g,g9=/\u0000|\uFFFD/g;function D_(t){return(typeof t=="string"?t:""+t).replace(x9,`
`).replace(g9,"")}function sh(t,n,r){if(n=D_(n),D_(t)!==n&&r)throw Error(se(425))}function qm(){}var gw=null,yw=null;function vw(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bw=typeof setTimeout=="function"?setTimeout:void 0,y9=typeof clearTimeout=="function"?clearTimeout:void 0,L_=typeof Promise=="function"?Promise:void 0,v9=typeof queueMicrotask=="function"?queueMicrotask:typeof L_<"u"?function(t){return L_.resolve(null).then(t).catch(b9)}:bw;function b9(t){setTimeout(function(){throw t})}function l0(t,n){var r=n,s=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){t.removeChild(a),hf(n);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);hf(n)}function Gi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function $_(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}var Pd=Math.random().toString(36).slice(2),ta="__reactFiber$"+Pd,vf="__reactProps$"+Pd,qa="__reactContainer$"+Pd,ww="__reactEvents$"+Pd,w9="__reactListeners$"+Pd,j9="__reactHandles$"+Pd;function Go(t){var n=t[ta];if(n)return n;for(var r=t.parentNode;r;){if(n=r[qa]||r[ta]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=$_(t);t!==null;){if(r=t[ta])return r;t=$_(t)}return n}t=r,r=t.parentNode}return null}function cp(t){return t=t[ta]||t[qa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Bg(t){return t[vf]||null}var jw=[],vc=-1;function bo(t){return{current:t}}function ct(t){0>vc||(t.current=jw[vc],jw[vc]=null,vc--)}function st(t,n){vc++,jw[vc]=t.current,t.current=n}var io={},Hn=bo(io),mr=bo(!1),vl=io;function Qc(t,n){var r=t.type.contextTypes;if(!r)return io;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=n[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=a),a}function xr(t){return t=t.childContextTypes,t!=null}function Gm(){ct(mr),ct(Hn)}function F_(t,n,r){if(Hn.current!==io)throw Error(se(168));st(Hn,n),st(mr,r)}function hI(t,n,r){var s=t.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(se(108,iW(t)||"Unknown",a));return _t({},r,s)}function Ym(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||io,vl=Hn.current,st(Hn,t),st(mr,mr.current),!0}function B_(t,n,r){var s=t.stateNode;if(!s)throw Error(se(169));r?(t=hI(t,n,vl),s.__reactInternalMemoizedMergedChildContext=t,ct(mr),ct(Hn),st(Hn,t)):ct(mr),st(mr,r)}var Da=null,zg=!1,c0=!1;function mI(t){Da===null?Da=[t]:Da.push(t)}function N9(t){zg=!0,mI(t)}function wo(){if(!c0&&Da!==null){c0=!0;var t=0,n=Ze;try{var r=Da;for(Ze=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}Da=null,zg=!1}catch(a){throw Da!==null&&(Da=Da.slice(t+1)),B5(cN,wo),a}finally{Ze=n,c0=!1}}return null}var bc=[],wc=0,Xm=null,Jm=0,es=[],ts=0,bl=null,Fa=1,Ba="";function zo(t,n){bc[wc++]=Jm,bc[wc++]=Xm,Xm=t,Jm=n}function xI(t,n,r){es[ts++]=Fa,es[ts++]=Ba,es[ts++]=bl,bl=t;var s=Fa;t=Ba;var a=32-As(s)-1;s&=~(1<<a),r+=1;var i=32-As(n)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Fa=1<<32-As(n)+a|r<<a|s,Ba=i+t}else Fa=1<<i|r<<a|s,Ba=t}function yN(t){t.return!==null&&(zo(t,1),xI(t,1,0))}function vN(t){for(;t===Xm;)Xm=bc[--wc],bc[wc]=null,Jm=bc[--wc],bc[wc]=null;for(;t===bl;)bl=es[--ts],es[ts]=null,Ba=es[--ts],es[ts]=null,Fa=es[--ts],es[ts]=null}var Ir=null,Or=null,ut=!1,Ss=null;function gI(t,n){var r=ns(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=t,n=t.deletions,n===null?(t.deletions=[r],t.flags|=16):n.push(r)}function z_(t,n){switch(t.tag){case 5:var r=t.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Ir=t,Or=Gi(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Ir=t,Or=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=bl!==null?{id:Fa,overflow:Ba}:null,t.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=ns(18,null,null,0),r.stateNode=n,r.return=t,t.child=r,Ir=t,Or=null,!0):!1;default:return!1}}function Nw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sw(t){if(ut){var n=Or;if(n){var r=n;if(!z_(t,n)){if(Nw(t))throw Error(se(418));n=Gi(r.nextSibling);var s=Ir;n&&z_(t,n)?gI(s,r):(t.flags=t.flags&-4097|2,ut=!1,Ir=t)}}else{if(Nw(t))throw Error(se(418));t.flags=t.flags&-4097|2,ut=!1,Ir=t}}}function V_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ir=t}function ah(t){if(t!==Ir)return!1;if(!ut)return V_(t),ut=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!vw(t.type,t.memoizedProps)),n&&(n=Or)){if(Nw(t))throw yI(),Error(se(418));for(;n;)gI(t,n),n=Gi(n.nextSibling)}if(V_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(n===0){Or=Gi(t.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}t=t.nextSibling}Or=null}}else Or=Ir?Gi(t.stateNode.nextSibling):null;return!0}function yI(){for(var t=Or;t;)t=Gi(t.nextSibling)}function Zc(){Or=Ir=null,ut=!1}function bN(t){Ss===null?Ss=[t]:Ss.push(t)}var S9=ui.ReactCurrentBatchConfig;function lu(t,n,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var s=r.stateNode}if(!s)throw Error(se(147,t));var a=s,i=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(l){var c=a.refs;l===null?delete c[i]:c[i]=l},n._stringRef=i,n)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function ih(t,n){throw t=Object.prototype.toString.call(n),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function U_(t){var n=t._init;return n(t._payload)}function vI(t){function n(b,w){if(t){var j=b.deletions;j===null?(b.deletions=[w],b.flags|=16):j.push(w)}}function r(b,w){if(!t)return null;for(;w!==null;)n(b,w),w=w.sibling;return null}function s(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function a(b,w){return b=Qi(b,w),b.index=0,b.sibling=null,b}function i(b,w,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<w?(b.flags|=2,w):j):(b.flags|=2,w)):(b.flags|=1048576,w)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,j,N){return w===null||w.tag!==6?(w=x0(j,b.mode,N),w.return=b,w):(w=a(w,j),w.return=b,w)}function d(b,w,j,N){var S=j.type;return S===hc?f(b,w,j.props.children,N,j.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ai&&U_(S)===w.type)?(N=a(w,j.props),N.ref=lu(b,w,j),N.return=b,N):(N=xm(j.type,j.key,j.props,null,b.mode,N),N.ref=lu(b,w,j),N.return=b,N)}function u(b,w,j,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=g0(j,b.mode,N),w.return=b,w):(w=a(w,j.children||[]),w.return=b,w)}function f(b,w,j,N,S){return w===null||w.tag!==7?(w=al(j,b.mode,N,S),w.return=b,w):(w=a(w,j),w.return=b,w)}function p(b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=x0(""+w,b.mode,j),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yp:return j=xm(w.type,w.key,w.props,null,b.mode,j),j.ref=lu(b,null,w),j.return=b,j;case pc:return w=g0(w,b.mode,j),w.return=b,w;case Ai:var N=w._init;return p(b,N(w._payload),j)}if(Pu(w)||ru(w))return w=al(w,b.mode,j,null),w.return=b,w;ih(b,w)}return null}function h(b,w,j,N){var S=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:c(b,w,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yp:return j.key===S?d(b,w,j,N):null;case pc:return j.key===S?u(b,w,j,N):null;case Ai:return S=j._init,h(b,w,S(j._payload),N)}if(Pu(j)||ru(j))return S!==null?null:f(b,w,j,N,null);ih(b,j)}return null}function m(b,w,j,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(j)||null,c(w,b,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yp:return b=b.get(N.key===null?j:N.key)||null,d(w,b,N,S);case pc:return b=b.get(N.key===null?j:N.key)||null,u(w,b,N,S);case Ai:var _=N._init;return m(b,w,j,_(N._payload),S)}if(Pu(N)||ru(N))return b=b.get(j)||null,f(w,b,N,S,null);ih(w,N)}return null}function g(b,w,j,N){for(var S=null,_=null,k=w,C=w=0,P=null;k!==null&&C<j.length;C++){k.index>C?(P=k,k=null):P=k.sibling;var E=h(b,k,j[C],N);if(E===null){k===null&&(k=P);break}t&&k&&E.alternate===null&&n(b,k),w=i(E,w,C),_===null?S=E:_.sibling=E,_=E,k=P}if(C===j.length)return r(b,k),ut&&zo(b,C),S;if(k===null){for(;C<j.length;C++)k=p(b,j[C],N),k!==null&&(w=i(k,w,C),_===null?S=k:_.sibling=k,_=k);return ut&&zo(b,C),S}for(k=s(b,k);C<j.length;C++)P=m(k,b,C,j[C],N),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?C:P.key),w=i(P,w,C),_===null?S=P:_.sibling=P,_=P);return t&&k.forEach(function(M){return n(b,M)}),ut&&zo(b,C),S}function y(b,w,j,N){var S=ru(j);if(typeof S!="function")throw Error(se(150));if(j=S.call(j),j==null)throw Error(se(151));for(var _=S=null,k=w,C=w=0,P=null,E=j.next();k!==null&&!E.done;C++,E=j.next()){k.index>C?(P=k,k=null):P=k.sibling;var M=h(b,k,E.value,N);if(M===null){k===null&&(k=P);break}t&&k&&M.alternate===null&&n(b,k),w=i(M,w,C),_===null?S=M:_.sibling=M,_=M,k=P}if(E.done)return r(b,k),ut&&zo(b,C),S;if(k===null){for(;!E.done;C++,E=j.next())E=p(b,E.value,N),E!==null&&(w=i(E,w,C),_===null?S=E:_.sibling=E,_=E);return ut&&zo(b,C),S}for(k=s(b,k);!E.done;C++,E=j.next())E=m(k,b,C,E.value,N),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?C:E.key),w=i(E,w,C),_===null?S=E:_.sibling=E,_=E);return t&&k.forEach(function(T){return n(b,T)}),ut&&zo(b,C),S}function v(b,w,j,N){if(typeof j=="object"&&j!==null&&j.type===hc&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Yp:e:{for(var S=j.key,_=w;_!==null;){if(_.key===S){if(S=j.type,S===hc){if(_.tag===7){r(b,_.sibling),w=a(_,j.props.children),w.return=b,b=w;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ai&&U_(S)===_.type){r(b,_.sibling),w=a(_,j.props),w.ref=lu(b,_,j),w.return=b,b=w;break e}r(b,_);break}else n(b,_);_=_.sibling}j.type===hc?(w=al(j.props.children,b.mode,N,j.key),w.return=b,b=w):(N=xm(j.type,j.key,j.props,null,b.mode,N),N.ref=lu(b,w,j),N.return=b,b=N)}return l(b);case pc:e:{for(_=j.key;w!==null;){if(w.key===_)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){r(b,w.sibling),w=a(w,j.children||[]),w.return=b,b=w;break e}else{r(b,w);break}else n(b,w);w=w.sibling}w=g0(j,b.mode,N),w.return=b,b=w}return l(b);case Ai:return _=j._init,v(b,w,_(j._payload),N)}if(Pu(j))return g(b,w,j,N);if(ru(j))return y(b,w,j,N);ih(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(r(b,w.sibling),w=a(w,j),w.return=b,b=w):(r(b,w),w=x0(j,b.mode,N),w.return=b,b=w),l(b)):r(b,w)}return v}var ed=vI(!0),bI=vI(!1),Qm=bo(null),Zm=null,jc=null,wN=null;function jN(){wN=jc=Zm=null}function NN(t){var n=Qm.current;ct(Qm),t._currentValue=n}function kw(t,n,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),t===r)break;t=t.return}}function Fc(t,n){Zm=t,wN=jc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(fr=!0),t.firstContext=null)}function ls(t){var n=t._currentValue;if(wN!==t)if(t={context:t,memoizedValue:n,next:null},jc===null){if(Zm===null)throw Error(se(308));jc=t,Zm.dependencies={lanes:0,firstContext:t}}else jc=jc.next=t;return n}var Yo=null;function SN(t){Yo===null?Yo=[t]:Yo.push(t)}function wI(t,n,r,s){var a=n.interleaved;return a===null?(r.next=r,SN(n)):(r.next=a.next,a.next=r),n.interleaved=r,Ga(t,s)}function Ga(t,n){t.lanes|=n;var r=t.alternate;for(r!==null&&(r.lanes|=n),r=t,t=t.return;t!==null;)t.childLanes|=n,r=t.alternate,r!==null&&(r.childLanes|=n),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ei=!1;function kN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jI(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ua(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Yi(t,n,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ke&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,Ga(t,r)}return a=s.interleaved,a===null?(n.next=n,SN(s)):(n.next=a.next,a.next=n),s.interleaved=n,Ga(t,r)}function dm(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var s=n.lanes;s&=t.pendingLanes,r|=s,n.lanes=r,dN(t,r)}}function H_(t,n){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=n:i=i.next=n}else a=i=n;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}function ex(t,n,r,s){var a=t.updateQueue;Ei=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,l===null?i=u:l.next=u,l=d;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==l&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(i!==null){var p=a.baseState;l=0,f=u=d=null,c=i;do{var h=c.lane,m=c.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=t,y=c;switch(h=n,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){p=g.call(m,p,h);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,p,h):g,h==null)break e;p=_t({},p,h);break e;case 2:Ei=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[c]:h.push(c))}else m={eventTime:m,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=m,d=p):f=f.next=m,l|=h;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;h=c,c=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(d=p),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,n=a.shared.interleaved,n!==null){a=n;do l|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);jl|=l,t.lanes=l,t.memoizedState=p}}function W_(t,n,r){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var s=t[n],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(se(191,a));a.call(s)}}}var dp={},la=bo(dp),bf=bo(dp),wf=bo(dp);function Xo(t){if(t===dp)throw Error(se(174));return t}function CN(t,n){switch(st(wf,n),st(bf,t),st(la,dp),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:aw(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=aw(n,t)}ct(la),st(la,n)}function td(){ct(la),ct(bf),ct(wf)}function NI(t){Xo(wf.current);var n=Xo(la.current),r=aw(n,t.type);n!==r&&(st(bf,t),st(la,r))}function _N(t){bf.current===t&&(ct(la),ct(bf))}var bt=bo(0);function tx(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var d0=[];function PN(){for(var t=0;t<d0.length;t++)d0[t]._workInProgressVersionPrimary=null;d0.length=0}var um=ui.ReactCurrentDispatcher,u0=ui.ReactCurrentBatchConfig,wl=0,kt=null,Jt=null,fn=null,nx=!1,Wu=!1,jf=0,k9=0;function On(){throw Error(se(321))}function AN(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Ms(t[r],n[r]))return!1;return!0}function EN(t,n,r,s,a,i){if(wl=i,kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,um.current=t===null||t.memoizedState===null?A9:E9,t=r(s,a),Wu){i=0;do{if(Wu=!1,jf=0,25<=i)throw Error(se(301));i+=1,fn=Jt=null,n.updateQueue=null,um.current=T9,t=r(s,a)}while(Wu)}if(um.current=rx,n=Jt!==null&&Jt.next!==null,wl=0,fn=Jt=kt=null,nx=!1,n)throw Error(se(300));return t}function TN(){var t=jf!==0;return jf=0,t}function Qs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?kt.memoizedState=fn=t:fn=fn.next=t,fn}function cs(){if(Jt===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Jt.next;var n=fn===null?kt.memoizedState:fn.next;if(n!==null)fn=n,Jt=t;else{if(t===null)throw Error(se(310));Jt=t,t={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},fn===null?kt.memoizedState=fn=t:fn=fn.next=t}return fn}function Nf(t,n){return typeof n=="function"?n(t):n}function f0(t){var n=cs(),r=n.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var s=Jt,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var c=l=null,d=null,u=i;do{var f=u.lane;if((wl&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=p,l=s):d=d.next=p,kt.lanes|=f,jl|=f}u=u.next}while(u!==null&&u!==i);d===null?l=s:d.next=c,Ms(s,n.memoizedState)||(fr=!0),n.memoizedState=s,n.baseState=l,n.baseQueue=d,r.lastRenderedState=s}if(t=r.interleaved,t!==null){a=t;do i=a.lane,kt.lanes|=i,jl|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function p0(t){var n=cs(),r=n.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var s=r.dispatch,a=r.pending,i=n.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);Ms(i,n.memoizedState)||(fr=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),r.lastRenderedState=i}return[i,s]}function SI(){}function kI(t,n){var r=kt,s=cs(),a=n(),i=!Ms(s.memoizedState,a);if(i&&(s.memoizedState=a,fr=!0),s=s.queue,MN(PI.bind(null,r,s,t),[t]),s.getSnapshot!==n||i||fn!==null&&fn.memoizedState.tag&1){if(r.flags|=2048,Sf(9,_I.bind(null,r,s,a,n),void 0,null),pn===null)throw Error(se(349));wl&30||CI(r,n,a)}return a}function CI(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=kt.updateQueue,n===null?(n={lastEffect:null,stores:null},kt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function _I(t,n,r,s){n.value=r,n.getSnapshot=s,AI(n)&&EI(t)}function PI(t,n,r){return r(function(){AI(n)&&EI(t)})}function AI(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Ms(t,r)}catch{return!0}}function EI(t){var n=Ga(t,1);n!==null&&Es(n,t,1,-1)}function K_(t){var n=Qs();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nf,lastRenderedState:t},n.queue=t,t=t.dispatch=P9.bind(null,kt,t),[n.memoizedState,t]}function Sf(t,n,r,s){return t={tag:t,create:n,destroy:r,deps:s,next:null},n=kt.updateQueue,n===null?(n={lastEffect:null,stores:null},kt.updateQueue=n,n.lastEffect=t.next=t):(r=n.lastEffect,r===null?n.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,n.lastEffect=t)),t}function TI(){return cs().memoizedState}function fm(t,n,r,s){var a=Qs();kt.flags|=t,a.memoizedState=Sf(1|n,r,void 0,s===void 0?null:s)}function Vg(t,n,r,s){var a=cs();s=s===void 0?null:s;var i=void 0;if(Jt!==null){var l=Jt.memoizedState;if(i=l.destroy,s!==null&&AN(s,l.deps)){a.memoizedState=Sf(n,r,i,s);return}}kt.flags|=t,a.memoizedState=Sf(1|n,r,i,s)}function q_(t,n){return fm(8390656,8,t,n)}function MN(t,n){return Vg(2048,8,t,n)}function MI(t,n){return Vg(4,2,t,n)}function OI(t,n){return Vg(4,4,t,n)}function RI(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function II(t,n,r){return r=r!=null?r.concat([t]):null,Vg(4,4,RI.bind(null,n,t),r)}function ON(){}function DI(t,n){var r=cs();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&AN(n,s[1])?s[0]:(r.memoizedState=[t,n],t)}function LI(t,n){var r=cs();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&AN(n,s[1])?s[0]:(t=t(),r.memoizedState=[t,n],t)}function $I(t,n,r){return wl&21?(Ms(r,n)||(r=U5(),kt.lanes|=r,jl|=r,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=r)}function C9(t,n){var r=Ze;Ze=r!==0&&4>r?r:4,t(!0);var s=u0.transition;u0.transition={};try{t(!1),n()}finally{Ze=r,u0.transition=s}}function FI(){return cs().memoizedState}function _9(t,n,r){var s=Ji(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},BI(t))zI(n,r);else if(r=wI(t,n,r,s),r!==null){var a=nr();Es(r,t,s,a),VI(r,n,s)}}function P9(t,n,r){var s=Ji(t),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(BI(t))zI(n,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var l=n.lastRenderedState,c=i(l,r);if(a.hasEagerState=!0,a.eagerState=c,Ms(c,l)){var d=n.interleaved;d===null?(a.next=a,SN(n)):(a.next=d.next,d.next=a),n.interleaved=a;return}}catch{}finally{}r=wI(t,n,a,s),r!==null&&(a=nr(),Es(r,t,s,a),VI(r,n,s))}}function BI(t){var n=t.alternate;return t===kt||n!==null&&n===kt}function zI(t,n){Wu=nx=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function VI(t,n,r){if(r&4194240){var s=n.lanes;s&=t.pendingLanes,r|=s,n.lanes=r,dN(t,r)}}var rx={readContext:ls,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},A9={readContext:ls,useCallback:function(t,n){return Qs().memoizedState=[t,n===void 0?null:n],t},useContext:ls,useEffect:q_,useImperativeHandle:function(t,n,r){return r=r!=null?r.concat([t]):null,fm(4194308,4,RI.bind(null,n,t),r)},useLayoutEffect:function(t,n){return fm(4194308,4,t,n)},useInsertionEffect:function(t,n){return fm(4,2,t,n)},useMemo:function(t,n){var r=Qs();return n=n===void 0?null:n,t=t(),r.memoizedState=[t,n],t},useReducer:function(t,n,r){var s=Qs();return n=r!==void 0?r(n):n,s.memoizedState=s.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},s.queue=t,t=t.dispatch=_9.bind(null,kt,t),[s.memoizedState,t]},useRef:function(t){var n=Qs();return t={current:t},n.memoizedState=t},useState:K_,useDebugValue:ON,useDeferredValue:function(t){return Qs().memoizedState=t},useTransition:function(){var t=K_(!1),n=t[0];return t=C9.bind(null,t[1]),Qs().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,r){var s=kt,a=Qs();if(ut){if(r===void 0)throw Error(se(407));r=r()}else{if(r=n(),pn===null)throw Error(se(349));wl&30||CI(s,n,r)}a.memoizedState=r;var i={value:r,getSnapshot:n};return a.queue=i,q_(PI.bind(null,s,i,t),[t]),s.flags|=2048,Sf(9,_I.bind(null,s,i,r,n),void 0,null),r},useId:function(){var t=Qs(),n=pn.identifierPrefix;if(ut){var r=Ba,s=Fa;r=(s&~(1<<32-As(s)-1)).toString(32)+r,n=":"+n+"R"+r,r=jf++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=k9++,n=":"+n+"r"+r.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},E9={readContext:ls,useCallback:DI,useContext:ls,useEffect:MN,useImperativeHandle:II,useInsertionEffect:MI,useLayoutEffect:OI,useMemo:LI,useReducer:f0,useRef:TI,useState:function(){return f0(Nf)},useDebugValue:ON,useDeferredValue:function(t){var n=cs();return $I(n,Jt.memoizedState,t)},useTransition:function(){var t=f0(Nf)[0],n=cs().memoizedState;return[t,n]},useMutableSource:SI,useSyncExternalStore:kI,useId:FI,unstable_isNewReconciler:!1},T9={readContext:ls,useCallback:DI,useContext:ls,useEffect:MN,useImperativeHandle:II,useInsertionEffect:MI,useLayoutEffect:OI,useMemo:LI,useReducer:p0,useRef:TI,useState:function(){return p0(Nf)},useDebugValue:ON,useDeferredValue:function(t){var n=cs();return Jt===null?n.memoizedState=t:$I(n,Jt.memoizedState,t)},useTransition:function(){var t=p0(Nf)[0],n=cs().memoizedState;return[t,n]},useMutableSource:SI,useSyncExternalStore:kI,useId:FI,unstable_isNewReconciler:!1};function js(t,n){if(t&&t.defaultProps){n=_t({},n),t=t.defaultProps;for(var r in t)n[r]===void 0&&(n[r]=t[r]);return n}return n}function Cw(t,n,r,s){n=t.memoizedState,r=r(s,n),r=r==null?n:_t({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ug={isMounted:function(t){return(t=t._reactInternals)?Hl(t)===t:!1},enqueueSetState:function(t,n,r){t=t._reactInternals;var s=nr(),a=Ji(t),i=Ua(s,a);i.payload=n,r!=null&&(i.callback=r),n=Yi(t,i,a),n!==null&&(Es(n,t,a,s),dm(n,t,a))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var s=nr(),a=Ji(t),i=Ua(s,a);i.tag=1,i.payload=n,r!=null&&(i.callback=r),n=Yi(t,i,a),n!==null&&(Es(n,t,a,s),dm(n,t,a))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=nr(),s=Ji(t),a=Ua(r,s);a.tag=2,n!=null&&(a.callback=n),n=Yi(t,a,s),n!==null&&(Es(n,t,s,r),dm(n,t,s))}};function G_(t,n,r,s,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,l):n.prototype&&n.prototype.isPureReactComponent?!xf(r,s)||!xf(a,i):!0}function UI(t,n,r){var s=!1,a=io,i=n.contextType;return typeof i=="object"&&i!==null?i=ls(i):(a=xr(n)?vl:Hn.current,s=n.contextTypes,i=(s=s!=null)?Qc(t,a):io),n=new n(r,i),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ug,t.stateNode=n,n._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),n}function Y_(t,n,r,s){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==t&&Ug.enqueueReplaceState(n,n.state,null)}function _w(t,n,r,s){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},kN(t);var i=n.contextType;typeof i=="object"&&i!==null?a.context=ls(i):(i=xr(n)?vl:Hn.current,a.context=Qc(t,i)),a.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Cw(t,n,i,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&Ug.enqueueReplaceState(a,a.state,null),ex(t,r,a,s),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function nd(t,n){try{var r="",s=n;do r+=aW(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:n,stack:a,digest:null}}function h0(t,n,r){return{value:t,source:null,stack:r??null,digest:n??null}}function Pw(t,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var M9=typeof WeakMap=="function"?WeakMap:Map;function HI(t,n,r){r=Ua(-1,r),r.tag=3,r.payload={element:null};var s=n.value;return r.callback=function(){ax||(ax=!0,$w=s),Pw(t,n)},r}function WI(t,n,r){r=Ua(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;r.payload=function(){return s(a)},r.callback=function(){Pw(t,n)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Pw(t,n),typeof s!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),r}function X_(t,n,r){var s=t.pingCache;if(s===null){s=t.pingCache=new M9;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(r)||(a.add(r),t=K9.bind(null,t,n,r),n.then(t,t))}function J_(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Q_(t,n,r,s,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===n?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=Ua(-1,1),n.tag=2,Yi(r,n,1))),r.lanes|=1),t)}var O9=ui.ReactCurrentOwner,fr=!1;function Jn(t,n,r,s){n.child=t===null?bI(n,null,r,s):ed(n,t.child,r,s)}function Z_(t,n,r,s,a){r=r.render;var i=n.ref;return Fc(n,a),s=EN(t,n,r,s,i,a),r=TN(),t!==null&&!fr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a,Ya(t,n,a)):(ut&&r&&yN(n),n.flags|=1,Jn(t,n,s,a),n.child)}function eP(t,n,r,s,a){if(t===null){var i=r.type;return typeof i=="function"&&!zN(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=i,KI(t,n,i,s,a)):(t=xm(r.type,null,s,n,n.mode,a),t.ref=n.ref,t.return=n,n.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:xf,r(l,s)&&t.ref===n.ref)return Ya(t,n,a)}return n.flags|=1,t=Qi(i,s),t.ref=n.ref,t.return=n,n.child=t}function KI(t,n,r,s,a){if(t!==null){var i=t.memoizedProps;if(xf(i,s)&&t.ref===n.ref)if(fr=!1,n.pendingProps=s=i,(t.lanes&a)!==0)t.flags&131072&&(fr=!0);else return n.lanes=t.lanes,Ya(t,n,a)}return Aw(t,n,r,s,a)}function qI(t,n,r){var s=n.pendingProps,a=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Sc,_r),_r|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,st(Sc,_r),_r|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,st(Sc,_r),_r|=s}else i!==null?(s=i.baseLanes|r,n.memoizedState=null):s=r,st(Sc,_r),_r|=s;return Jn(t,n,a,r),n.child}function GI(t,n){var r=n.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function Aw(t,n,r,s,a){var i=xr(r)?vl:Hn.current;return i=Qc(n,i),Fc(n,a),r=EN(t,n,r,s,i,a),s=TN(),t!==null&&!fr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a,Ya(t,n,a)):(ut&&s&&yN(n),n.flags|=1,Jn(t,n,r,a),n.child)}function tP(t,n,r,s,a){if(xr(r)){var i=!0;Ym(n)}else i=!1;if(Fc(n,a),n.stateNode===null)pm(t,n),UI(n,r,s),_w(n,r,s,a),s=!0;else if(t===null){var l=n.stateNode,c=n.memoizedProps;l.props=c;var d=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=ls(u):(u=xr(r)?vl:Hn.current,u=Qc(n,u));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||d!==u)&&Y_(n,l,s,u),Ei=!1;var h=n.memoizedState;l.state=h,ex(n,s,l,a),d=n.memoizedState,c!==s||h!==d||mr.current||Ei?(typeof f=="function"&&(Cw(n,r,f,s),d=n.memoizedState),(c=Ei||G_(n,r,c,s,h,d,u))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=d),l.props=s,l.state=d,l.context=u,s=c):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{l=n.stateNode,jI(t,n),c=n.memoizedProps,u=n.type===n.elementType?c:js(n.type,c),l.props=u,p=n.pendingProps,h=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=ls(d):(d=xr(r)?vl:Hn.current,d=Qc(n,d));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==p||h!==d)&&Y_(n,l,s,d),Ei=!1,h=n.memoizedState,l.state=h,ex(n,s,l,a);var g=n.memoizedState;c!==p||h!==g||mr.current||Ei?(typeof m=="function"&&(Cw(n,r,m,s),g=n.memoizedState),(u=Ei||G_(n,r,u,s,h,g,d)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,g,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,g,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=g),l.props=s,l.state=g,l.context=d,s=u):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(n.flags|=1024),s=!1)}return Ew(t,n,r,s,i,a)}function Ew(t,n,r,s,a,i){GI(t,n);var l=(n.flags&128)!==0;if(!s&&!l)return a&&B_(n,r,!1),Ya(t,n,i);s=n.stateNode,O9.current=n;var c=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,t!==null&&l?(n.child=ed(n,t.child,null,i),n.child=ed(n,null,c,i)):Jn(t,n,c,i),n.memoizedState=s.state,a&&B_(n,r,!0),n.child}function YI(t){var n=t.stateNode;n.pendingContext?F_(t,n.pendingContext,n.pendingContext!==n.context):n.context&&F_(t,n.context,!1),CN(t,n.containerInfo)}function nP(t,n,r,s,a){return Zc(),bN(a),n.flags|=256,Jn(t,n,r,s),n.child}var Tw={dehydrated:null,treeContext:null,retryLane:0};function Mw(t){return{baseLanes:t,cachePool:null,transitions:null}}function XI(t,n,r){var s=n.pendingProps,a=bt.current,i=!1,l=(n.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(a&2)!==0),c?(i=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),st(bt,a&1),t===null)return Sw(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=s.children,t=s.fallback,i?(s=n.mode,i=n.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Kg(l,s,0,null),t=al(t,s,r,null),i.return=n,t.return=n,i.sibling=t,n.child=i,n.child.memoizedState=Mw(r),n.memoizedState=Tw,t):RN(n,l));if(a=t.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return R9(t,n,l,s,c,a,r);if(i){i=s.fallback,l=n.mode,a=t.child,c=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=d,n.deletions=null):(s=Qi(a,d),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Qi(c,i):(i=al(i,l,r,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,l=t.child.memoizedState,l=l===null?Mw(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,n.memoizedState=Tw,s}return i=t.child,t=i.sibling,s=Qi(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=r),s.return=n,s.sibling=null,t!==null&&(r=n.deletions,r===null?(n.deletions=[t],n.flags|=16):r.push(t)),n.child=s,n.memoizedState=null,s}function RN(t,n){return n=Kg({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function oh(t,n,r,s){return s!==null&&bN(s),ed(n,t.child,null,r),t=RN(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function R9(t,n,r,s,a,i,l){if(r)return n.flags&256?(n.flags&=-257,s=h0(Error(se(422))),oh(t,n,l,s)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=Kg({mode:"visible",children:s.children},a,0,null),i=al(i,a,l,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&ed(n,t.child,null,l),n.child.memoizedState=Mw(l),n.memoizedState=Tw,i);if(!(n.mode&1))return oh(t,n,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,i=Error(se(419)),s=h0(i,s,void 0),oh(t,n,l,s)}if(c=(l&t.childLanes)!==0,fr||c){if(s=pn,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ga(t,a),Es(s,t,a,-1))}return BN(),s=h0(Error(se(421))),oh(t,n,l,s)}return a.data==="$?"?(n.flags|=128,n.child=t.child,n=q9.bind(null,t),a._reactRetry=n,null):(t=i.treeContext,Or=Gi(a.nextSibling),Ir=n,ut=!0,Ss=null,t!==null&&(es[ts++]=Fa,es[ts++]=Ba,es[ts++]=bl,Fa=t.id,Ba=t.overflow,bl=n),n=RN(n,s.children),n.flags|=4096,n)}function rP(t,n,r){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n),kw(t.return,n,r)}function m0(t,n,r,s,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function JI(t,n,r){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(Jn(t,n,s.children,r),s=bt.current,s&2)s=s&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rP(t,r,n);else if(t.tag===19)rP(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(st(bt,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(r=n.child,a=null;r!==null;)t=r.alternate,t!==null&&tx(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=n.child,n.child=null):(a=r.sibling,r.sibling=null),m0(n,!1,a,r,i);break;case"backwards":for(r=null,a=n.child,n.child=null;a!==null;){if(t=a.alternate,t!==null&&tx(t)===null){n.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}m0(n,!0,r,null,i);break;case"together":m0(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function pm(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Ya(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),jl|=n.lanes,!(r&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(se(153));if(n.child!==null){for(t=n.child,r=Qi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Qi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function I9(t,n,r){switch(n.tag){case 3:YI(n),Zc();break;case 5:NI(n);break;case 1:xr(n.type)&&Ym(n);break;case 4:CN(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;st(Qm,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(st(bt,bt.current&1),n.flags|=128,null):r&n.child.childLanes?XI(t,n,r):(st(bt,bt.current&1),t=Ya(t,n,r),t!==null?t.sibling:null);st(bt,bt.current&1);break;case 19:if(s=(r&n.childLanes)!==0,t.flags&128){if(s)return JI(t,n,r);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),st(bt,bt.current),s)break;return null;case 22:case 23:return n.lanes=0,qI(t,n,r)}return Ya(t,n,r)}var QI,Ow,ZI,eD;QI=function(t,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ow=function(){};ZI=function(t,n,r,s){var a=t.memoizedProps;if(a!==s){t=n.stateNode,Xo(la.current);var i=null;switch(r){case"input":a=tw(t,a),s=tw(t,s),i=[];break;case"select":a=_t({},a,{value:void 0}),s=_t({},s,{value:void 0}),i=[];break;case"textarea":a=sw(t,a),s=sw(t,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=qm)}iw(r,s);var l;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var d=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cf.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&ot("scroll",t),i||c===d||(i=[])):(i=i||[]).push(u,d))}r&&(i=i||[]).push("style",r);var u=i;(n.updateQueue=u)&&(n.flags|=4)}};eD=function(t,n,r,s){r!==s&&(n.flags|=4)};function cu(t,n){if(!ut)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Rn(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(n)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=s,t.childLanes=r,n}function D9(t,n,r){var s=n.pendingProps;switch(vN(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(n),null;case 1:return xr(n.type)&&Gm(),Rn(n),null;case 3:return s=n.stateNode,td(),ct(mr),ct(Hn),PN(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ah(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Ss!==null&&(zw(Ss),Ss=null))),Ow(t,n),Rn(n),null;case 5:_N(n);var a=Xo(wf.current);if(r=n.type,t!==null&&n.stateNode!=null)ZI(t,n,r,s,a),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(se(166));return Rn(n),null}if(t=Xo(la.current),ah(n)){s=n.stateNode,r=n.type;var i=n.memoizedProps;switch(s[ta]=n,s[vf]=i,t=(n.mode&1)!==0,r){case"dialog":ot("cancel",s),ot("close",s);break;case"iframe":case"object":case"embed":ot("load",s);break;case"video":case"audio":for(a=0;a<Eu.length;a++)ot(Eu[a],s);break;case"source":ot("error",s);break;case"img":case"image":case"link":ot("error",s),ot("load",s);break;case"details":ot("toggle",s);break;case"input":f_(s,i),ot("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ot("invalid",s);break;case"textarea":h_(s,i),ot("invalid",s)}iw(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?s.textContent!==c&&(i.suppressHydrationWarning!==!0&&sh(s.textContent,c,t),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&sh(s.textContent,c,t),a=["children",""+c]):cf.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&ot("scroll",s)}switch(r){case"input":Xp(s),p_(s,i,!0);break;case"textarea":Xp(s),m_(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=qm)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(r,{is:s.is}):(t=l.createElement(r),r==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,r),t[ta]=n,t[vf]=s,QI(t,n,!1,!1),n.stateNode=t;e:{switch(l=ow(r,s),r){case"dialog":ot("cancel",t),ot("close",t),a=s;break;case"iframe":case"object":case"embed":ot("load",t),a=s;break;case"video":case"audio":for(a=0;a<Eu.length;a++)ot(Eu[a],t);a=s;break;case"source":ot("error",t),a=s;break;case"img":case"image":case"link":ot("error",t),ot("load",t),a=s;break;case"details":ot("toggle",t),a=s;break;case"input":f_(t,s),a=tw(t,s),ot("invalid",t);break;case"option":a=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},a=_t({},s,{value:void 0}),ot("invalid",t);break;case"textarea":h_(t,s),a=sw(t,s),ot("invalid",t);break;default:a=s}iw(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?T5(t,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&A5(t,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&df(t,d):typeof d=="number"&&df(t,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cf.hasOwnProperty(i)?d!=null&&i==="onScroll"&&ot("scroll",t):d!=null&&sN(t,i,d,l))}switch(r){case"input":Xp(t),p_(t,s,!1);break;case"textarea":Xp(t),m_(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ao(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Ic(t,!!s.multiple,i,!1):s.defaultValue!=null&&Ic(t,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=qm)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Rn(n),null;case 6:if(t&&n.stateNode!=null)eD(t,n,t.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(se(166));if(r=Xo(wf.current),Xo(la.current),ah(n)){if(s=n.stateNode,r=n.memoizedProps,s[ta]=n,(i=s.nodeValue!==r)&&(t=Ir,t!==null))switch(t.tag){case 3:sh(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(s.nodeValue,r,(t.mode&1)!==0)}i&&(n.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ta]=n,n.stateNode=s}return Rn(n),null;case 13:if(ct(bt),s=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Or!==null&&n.mode&1&&!(n.flags&128))yI(),Zc(),n.flags|=98560,i=!1;else if(i=ah(n),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(se(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[ta]=n}else Zc(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Rn(n),i=!1}else Ss!==null&&(zw(Ss),Ss=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(t===null||bt.current&1?nn===0&&(nn=3):BN())),n.updateQueue!==null&&(n.flags|=4),Rn(n),null);case 4:return td(),Ow(t,n),t===null&&gf(n.stateNode.containerInfo),Rn(n),null;case 10:return NN(n.type._context),Rn(n),null;case 17:return xr(n.type)&&Gm(),Rn(n),null;case 19:if(ct(bt),i=n.memoizedState,i===null)return Rn(n),null;if(s=(n.flags&128)!==0,l=i.rendering,l===null)if(s)cu(i,!1);else{if(nn!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=tx(t),l!==null){for(n.flags|=128,cu(i,!1),s=l.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=r,r=n.child;r!==null;)i=r,t=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return st(bt,bt.current&1|2),n.child}t=t.sibling}i.tail!==null&&Lt()>rd&&(n.flags|=128,s=!0,cu(i,!1),n.lanes=4194304)}else{if(!s)if(t=tx(l),t!==null){if(n.flags|=128,s=!0,r=t.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),cu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ut)return Rn(n),null}else 2*Lt()-i.renderingStartTime>rd&&r!==1073741824&&(n.flags|=128,s=!0,cu(i,!1),n.lanes=4194304);i.isBackwards?(l.sibling=n.child,n.child=l):(r=i.last,r!==null?r.sibling=l:n.child=l,i.last=l)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Lt(),n.sibling=null,r=bt.current,st(bt,s?r&1|2:r&1),n):(Rn(n),null);case 22:case 23:return FN(),s=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?_r&1073741824&&(Rn(n),n.subtreeFlags&6&&(n.flags|=8192)):Rn(n),null;case 24:return null;case 25:return null}throw Error(se(156,n.tag))}function L9(t,n){switch(vN(n),n.tag){case 1:return xr(n.type)&&Gm(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return td(),ct(mr),ct(Hn),PN(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return _N(n),null;case 13:if(ct(bt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(se(340));Zc()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ct(bt),null;case 4:return td(),null;case 10:return NN(n.type._context),null;case 22:case 23:return FN(),null;case 24:return null;default:return null}}var lh=!1,Dn=!1,$9=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Nc(t,n){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Tt(t,n,s)}else r.current=null}function Rw(t,n,r){try{r()}catch(s){Tt(t,n,s)}}var sP=!1;function F9(t,n){if(gw=Hm,t=aI(),gN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,c=-1,d=-1,u=0,f=0,p=t,h=null;t:for(;;){for(var m;p!==r||a!==0&&p.nodeType!==3||(c=l+a),p!==i||s!==0&&p.nodeType!==3||(d=l+s),p.nodeType===3&&(l+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===t)break t;if(h===r&&++u===a&&(c=l),h===i&&++f===s&&(d=l),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(yw={focusedElem:t,selectionRange:r},Hm=!1,pe=n;pe!==null;)if(n=pe,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,pe=t;else for(;pe!==null;){n=pe;try{var g=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=n.stateNode,w=b.getSnapshotBeforeUpdate(n.elementType===n.type?y:js(n.type,y),v);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=n.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(N){Tt(n,n.return,N)}if(t=n.sibling,t!==null){t.return=n.return,pe=t;break}pe=n.return}return g=sP,sP=!1,g}function Ku(t,n,r){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Rw(n,r,i)}a=a.next}while(a!==s)}}function Hg(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==n)}}function Iw(t){var n=t.ref;if(n!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof n=="function"?n(t):n.current=t}}function tD(t){var n=t.alternate;n!==null&&(t.alternate=null,tD(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[ta],delete n[vf],delete n[ww],delete n[w9],delete n[j9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nD(t){return t.tag===5||t.tag===3||t.tag===4}function aP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dw(t,n,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=qm));else if(s!==4&&(t=t.child,t!==null))for(Dw(t,n,r),t=t.sibling;t!==null;)Dw(t,n,r),t=t.sibling}function Lw(t,n,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Lw(t,n,r),t=t.sibling;t!==null;)Lw(t,n,r),t=t.sibling}var jn=null,Ns=!1;function ji(t,n,r){for(r=r.child;r!==null;)rD(t,n,r),r=r.sibling}function rD(t,n,r){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Dg,r)}catch{}switch(r.tag){case 5:Dn||Nc(r,n);case 6:var s=jn,a=Ns;jn=null,ji(t,n,r),jn=s,Ns=a,jn!==null&&(Ns?(t=jn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):jn.removeChild(r.stateNode));break;case 18:jn!==null&&(Ns?(t=jn,r=r.stateNode,t.nodeType===8?l0(t.parentNode,r):t.nodeType===1&&l0(t,r),hf(t)):l0(jn,r.stateNode));break;case 4:s=jn,a=Ns,jn=r.stateNode.containerInfo,Ns=!0,ji(t,n,r),jn=s,Ns=a;break;case 0:case 11:case 14:case 15:if(!Dn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Rw(r,n,l),a=a.next}while(a!==s)}ji(t,n,r);break;case 1:if(!Dn&&(Nc(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){Tt(r,n,c)}ji(t,n,r);break;case 21:ji(t,n,r);break;case 22:r.mode&1?(Dn=(s=Dn)||r.memoizedState!==null,ji(t,n,r),Dn=s):ji(t,n,r);break;default:ji(t,n,r)}}function iP(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $9),n.forEach(function(s){var a=G9.bind(null,t,s);r.has(s)||(r.add(s),s.then(a,a))})}}function vs(t,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=t,l=n,c=l;e:for(;c!==null;){switch(c.tag){case 5:jn=c.stateNode,Ns=!1;break e;case 3:jn=c.stateNode.containerInfo,Ns=!0;break e;case 4:jn=c.stateNode.containerInfo,Ns=!0;break e}c=c.return}if(jn===null)throw Error(se(160));rD(i,l,a),jn=null,Ns=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){Tt(a,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)sD(n,t),n=n.sibling}function sD(t,n){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vs(n,t),Ys(t),s&4){try{Ku(3,t,t.return),Hg(3,t)}catch(y){Tt(t,t.return,y)}try{Ku(5,t,t.return)}catch(y){Tt(t,t.return,y)}}break;case 1:vs(n,t),Ys(t),s&512&&r!==null&&Nc(r,r.return);break;case 5:if(vs(n,t),Ys(t),s&512&&r!==null&&Nc(r,r.return),t.flags&32){var a=t.stateNode;try{df(a,"")}catch(y){Tt(t,t.return,y)}}if(s&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&C5(a,i),ow(c,l);var u=ow(c,i);for(l=0;l<d.length;l+=2){var f=d[l],p=d[l+1];f==="style"?T5(a,p):f==="dangerouslySetInnerHTML"?A5(a,p):f==="children"?df(a,p):sN(a,f,p,u)}switch(c){case"input":nw(a,i);break;case"textarea":_5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ic(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ic(a,!!i.multiple,i.defaultValue,!0):Ic(a,!!i.multiple,i.multiple?[]:"",!1))}a[vf]=i}catch(y){Tt(t,t.return,y)}}break;case 6:if(vs(n,t),Ys(t),s&4){if(t.stateNode===null)throw Error(se(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(y){Tt(t,t.return,y)}}break;case 3:if(vs(n,t),Ys(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{hf(n.containerInfo)}catch(y){Tt(t,t.return,y)}break;case 4:vs(n,t),Ys(t);break;case 13:vs(n,t),Ys(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(LN=Lt())),s&4&&iP(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(Dn=(u=Dn)||f,vs(n,t),Dn=u):vs(n,t),Ys(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(pe=t,f=t.child;f!==null;){for(p=pe=f;pe!==null;){switch(h=pe,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ku(4,h,h.return);break;case 1:Nc(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){s=h,r=h.return;try{n=s,g.props=n.memoizedProps,g.state=n.memoizedState,g.componentWillUnmount()}catch(y){Tt(s,r,y)}}break;case 5:Nc(h,h.return);break;case 22:if(h.memoizedState!==null){lP(p);continue}}m!==null?(m.return=h,pe=m):lP(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{a=p.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,d=p.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=E5("display",l))}catch(y){Tt(t,t.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(y){Tt(t,t.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vs(n,t),Ys(t),s&4&&iP(t);break;case 21:break;default:vs(n,t),Ys(t)}}function Ys(t){var n=t.flags;if(n&2){try{e:{for(var r=t.return;r!==null;){if(nD(r)){var s=r;break e}r=r.return}throw Error(se(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(df(a,""),s.flags&=-33);var i=aP(t);Lw(t,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,c=aP(t);Dw(t,c,l);break;default:throw Error(se(161))}}catch(d){Tt(t,t.return,d)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function B9(t,n,r){pe=t,aD(t)}function aD(t,n,r){for(var s=(t.mode&1)!==0;pe!==null;){var a=pe,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||lh;if(!l){var c=a.alternate,d=c!==null&&c.memoizedState!==null||Dn;c=lh;var u=Dn;if(lh=l,(Dn=d)&&!u)for(pe=a;pe!==null;)l=pe,d=l.child,l.tag===22&&l.memoizedState!==null?cP(a):d!==null?(d.return=l,pe=d):cP(a);for(;i!==null;)pe=i,aD(i),i=i.sibling;pe=a,lh=c,Dn=u}oP(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,pe=i):oP(t)}}function oP(t){for(;pe!==null;){var n=pe;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Dn||Hg(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!Dn)if(r===null)s.componentDidMount();else{var a=n.elementType===n.type?r.memoizedProps:js(n.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&W_(n,i,s);break;case 3:var l=n.updateQueue;if(l!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}W_(n,l,r)}break;case 5:var c=n.stateNode;if(r===null&&n.flags&4){r=c;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&hf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Dn||n.flags&512&&Iw(n)}catch(h){Tt(n,n.return,h)}}if(n===t){pe=null;break}if(r=n.sibling,r!==null){r.return=n.return,pe=r;break}pe=n.return}}function lP(t){for(;pe!==null;){var n=pe;if(n===t){pe=null;break}var r=n.sibling;if(r!==null){r.return=n.return,pe=r;break}pe=n.return}}function cP(t){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Hg(4,n)}catch(d){Tt(n,r,d)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(d){Tt(n,a,d)}}var i=n.return;try{Iw(n)}catch(d){Tt(n,i,d)}break;case 5:var l=n.return;try{Iw(n)}catch(d){Tt(n,l,d)}}}catch(d){Tt(n,n.return,d)}if(n===t){pe=null;break}var c=n.sibling;if(c!==null){c.return=n.return,pe=c;break}pe=n.return}}var z9=Math.ceil,sx=ui.ReactCurrentDispatcher,IN=ui.ReactCurrentOwner,as=ui.ReactCurrentBatchConfig,Ke=0,pn=null,Ut=null,_n=0,_r=0,Sc=bo(0),nn=0,kf=null,jl=0,Wg=0,DN=0,qu=null,dr=null,LN=0,rd=1/0,Ia=null,ax=!1,$w=null,Xi=null,ch=!1,Bi=null,ix=0,Gu=0,Fw=null,hm=-1,mm=0;function nr(){return Ke&6?Lt():hm!==-1?hm:hm=Lt()}function Ji(t){return t.mode&1?Ke&2&&_n!==0?_n&-_n:S9.transition!==null?(mm===0&&(mm=U5()),mm):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:X5(t.type)),t):1}function Es(t,n,r,s){if(50<Gu)throw Gu=0,Fw=null,Error(se(185));op(t,r,s),(!(Ke&2)||t!==pn)&&(t===pn&&(!(Ke&2)&&(Wg|=r),nn===4&&Di(t,_n)),gr(t,s),r===1&&Ke===0&&!(n.mode&1)&&(rd=Lt()+500,zg&&wo()))}function gr(t,n){var r=t.callbackNode;SW(t,n);var s=Um(t,t===pn?_n:0);if(s===0)r!==null&&y_(r),t.callbackNode=null,t.callbackPriority=0;else if(n=s&-s,t.callbackPriority!==n){if(r!=null&&y_(r),n===1)t.tag===0?N9(dP.bind(null,t)):mI(dP.bind(null,t)),v9(function(){!(Ke&6)&&wo()}),r=null;else{switch(H5(s)){case 1:r=cN;break;case 4:r=z5;break;case 16:r=Vm;break;case 536870912:r=V5;break;default:r=Vm}r=pD(r,iD.bind(null,t))}t.callbackPriority=n,t.callbackNode=r}}function iD(t,n){if(hm=-1,mm=0,Ke&6)throw Error(se(327));var r=t.callbackNode;if(Bc()&&t.callbackNode!==r)return null;var s=Um(t,t===pn?_n:0);if(s===0)return null;if(s&30||s&t.expiredLanes||n)n=ox(t,s);else{n=s;var a=Ke;Ke|=2;var i=lD();(pn!==t||_n!==n)&&(Ia=null,rd=Lt()+500,sl(t,n));do try{H9();break}catch(c){oD(t,c)}while(!0);jN(),sx.current=i,Ke=a,Ut!==null?n=0:(pn=null,_n=0,n=nn)}if(n!==0){if(n===2&&(a=fw(t),a!==0&&(s=a,n=Bw(t,a))),n===1)throw r=kf,sl(t,0),Di(t,s),gr(t,Lt()),r;if(n===6)Di(t,s);else{if(a=t.current.alternate,!(s&30)&&!V9(a)&&(n=ox(t,s),n===2&&(i=fw(t),i!==0&&(s=i,n=Bw(t,i))),n===1))throw r=kf,sl(t,0),Di(t,s),gr(t,Lt()),r;switch(t.finishedWork=a,t.finishedLanes=s,n){case 0:case 1:throw Error(se(345));case 2:Vo(t,dr,Ia);break;case 3:if(Di(t,s),(s&130023424)===s&&(n=LN+500-Lt(),10<n)){if(Um(t,0)!==0)break;if(a=t.suspendedLanes,(a&s)!==s){nr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=bw(Vo.bind(null,t,dr,Ia),n);break}Vo(t,dr,Ia);break;case 4:if(Di(t,s),(s&4194240)===s)break;for(n=t.eventTimes,a=-1;0<s;){var l=31-As(s);i=1<<l,l=n[l],l>a&&(a=l),s&=~i}if(s=a,s=Lt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*z9(s/1960))-s,10<s){t.timeoutHandle=bw(Vo.bind(null,t,dr,Ia),s);break}Vo(t,dr,Ia);break;case 5:Vo(t,dr,Ia);break;default:throw Error(se(329))}}}return gr(t,Lt()),t.callbackNode===r?iD.bind(null,t):null}function Bw(t,n){var r=qu;return t.current.memoizedState.isDehydrated&&(sl(t,n).flags|=256),t=ox(t,n),t!==2&&(n=dr,dr=r,n!==null&&zw(n)),t}function zw(t){dr===null?dr=t:dr.push.apply(dr,t)}function V9(t){for(var n=t;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Ms(i(),a))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Di(t,n){for(n&=~DN,n&=~Wg,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var r=31-As(n),s=1<<r;t[r]=-1,n&=~s}}function dP(t){if(Ke&6)throw Error(se(327));Bc();var n=Um(t,0);if(!(n&1))return gr(t,Lt()),null;var r=ox(t,n);if(t.tag!==0&&r===2){var s=fw(t);s!==0&&(n=s,r=Bw(t,s))}if(r===1)throw r=kf,sl(t,0),Di(t,n),gr(t,Lt()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Vo(t,dr,Ia),gr(t,Lt()),null}function $N(t,n){var r=Ke;Ke|=1;try{return t(n)}finally{Ke=r,Ke===0&&(rd=Lt()+500,zg&&wo())}}function Nl(t){Bi!==null&&Bi.tag===0&&!(Ke&6)&&Bc();var n=Ke;Ke|=1;var r=as.transition,s=Ze;try{if(as.transition=null,Ze=1,t)return t()}finally{Ze=s,as.transition=r,Ke=n,!(Ke&6)&&wo()}}function FN(){_r=Sc.current,ct(Sc)}function sl(t,n){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,y9(r)),Ut!==null)for(r=Ut.return;r!==null;){var s=r;switch(vN(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Gm();break;case 3:td(),ct(mr),ct(Hn),PN();break;case 5:_N(s);break;case 4:td();break;case 13:ct(bt);break;case 19:ct(bt);break;case 10:NN(s.type._context);break;case 22:case 23:FN()}r=r.return}if(pn=t,Ut=t=Qi(t.current,null),_n=_r=n,nn=0,kf=null,DN=Wg=jl=0,dr=qu=null,Yo!==null){for(n=0;n<Yo.length;n++)if(r=Yo[n],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}Yo=null}return t}function oD(t,n){do{var r=Ut;try{if(jN(),um.current=rx,nx){for(var s=kt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}nx=!1}if(wl=0,fn=Jt=kt=null,Wu=!1,jf=0,IN.current=null,r===null||r.return===null){nn=1,kf=n,Ut=null;break}e:{var i=t,l=r.return,c=r,d=n;if(n=_n,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=J_(l);if(m!==null){m.flags&=-257,Q_(m,l,c,i,n),m.mode&1&&X_(i,u,n),n=m,d=u;var g=n.updateQueue;if(g===null){var y=new Set;y.add(d),n.updateQueue=y}else g.add(d);break e}else{if(!(n&1)){X_(i,u,n),BN();break e}d=Error(se(426))}}else if(ut&&c.mode&1){var v=J_(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Q_(v,l,c,i,n),bN(nd(d,c));break e}}i=d=nd(d,c),nn!==4&&(nn=2),qu===null?qu=[i]:qu.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var b=HI(i,d,n);H_(i,b);break e;case 1:c=d;var w=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Xi===null||!Xi.has(j)))){i.flags|=65536,n&=-n,i.lanes|=n;var N=WI(i,c,n);H_(i,N);break e}}i=i.return}while(i!==null)}dD(r)}catch(S){n=S,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(!0)}function lD(){var t=sx.current;return sx.current=rx,t===null?rx:t}function BN(){(nn===0||nn===3||nn===2)&&(nn=4),pn===null||!(jl&268435455)&&!(Wg&268435455)||Di(pn,_n)}function ox(t,n){var r=Ke;Ke|=2;var s=lD();(pn!==t||_n!==n)&&(Ia=null,sl(t,n));do try{U9();break}catch(a){oD(t,a)}while(!0);if(jN(),Ke=r,sx.current=s,Ut!==null)throw Error(se(261));return pn=null,_n=0,nn}function U9(){for(;Ut!==null;)cD(Ut)}function H9(){for(;Ut!==null&&!mW();)cD(Ut)}function cD(t){var n=fD(t.alternate,t,_r);t.memoizedProps=t.pendingProps,n===null?dD(t):Ut=n,IN.current=null}function dD(t){var n=t;do{var r=n.alternate;if(t=n.return,n.flags&32768){if(r=L9(r,n),r!==null){r.flags&=32767,Ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nn=6,Ut=null;return}}else if(r=D9(r,n,_r),r!==null){Ut=r;return}if(n=n.sibling,n!==null){Ut=n;return}Ut=n=t}while(n!==null);nn===0&&(nn=5)}function Vo(t,n,r){var s=Ze,a=as.transition;try{as.transition=null,Ze=1,W9(t,n,r,s)}finally{as.transition=a,Ze=s}return null}function W9(t,n,r,s){do Bc();while(Bi!==null);if(Ke&6)throw Error(se(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(kW(t,i),t===pn&&(Ut=pn=null,_n=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ch||(ch=!0,pD(Vm,function(){return Bc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=as.transition,as.transition=null;var l=Ze;Ze=1;var c=Ke;Ke|=4,IN.current=null,F9(t,r),sD(r,t),u9(yw),Hm=!!gw,yw=gw=null,t.current=r,B9(r),xW(),Ke=c,Ze=l,as.transition=i}else t.current=r;if(ch&&(ch=!1,Bi=t,ix=a),i=t.pendingLanes,i===0&&(Xi=null),vW(r.stateNode),gr(t,Lt()),n!==null)for(s=t.onRecoverableError,r=0;r<n.length;r++)a=n[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ax)throw ax=!1,t=$w,$w=null,t;return ix&1&&t.tag!==0&&Bc(),i=t.pendingLanes,i&1?t===Fw?Gu++:(Gu=0,Fw=t):Gu=0,wo(),null}function Bc(){if(Bi!==null){var t=H5(ix),n=as.transition,r=Ze;try{if(as.transition=null,Ze=16>t?16:t,Bi===null)var s=!1;else{if(t=Bi,Bi=null,ix=0,Ke&6)throw Error(se(331));var a=Ke;for(Ke|=4,pe=t.current;pe!==null;){var i=pe,l=i.child;if(pe.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(pe=u;pe!==null;){var f=pe;switch(f.tag){case 0:case 11:case 15:Ku(8,f,i)}var p=f.child;if(p!==null)p.return=f,pe=p;else for(;pe!==null;){f=pe;var h=f.sibling,m=f.return;if(tD(f),f===u){pe=null;break}if(h!==null){h.return=m,pe=h;break}pe=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}pe=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,pe=l;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ku(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,pe=b;break e}pe=i.return}}var w=t.current;for(pe=w;pe!==null;){l=pe;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,pe=j;else e:for(l=w;pe!==null;){if(c=pe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hg(9,c)}}catch(S){Tt(c,c.return,S)}if(c===l){pe=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,pe=N;break e}pe=c.return}}if(Ke=a,wo(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Dg,t)}catch{}s=!0}return s}finally{Ze=r,as.transition=n}}return!1}function uP(t,n,r){n=nd(r,n),n=HI(t,n,1),t=Yi(t,n,1),n=nr(),t!==null&&(op(t,1,n),gr(t,n))}function Tt(t,n,r){if(t.tag===3)uP(t,t,r);else for(;n!==null;){if(n.tag===3){uP(n,t,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Xi===null||!Xi.has(s))){t=nd(r,t),t=WI(n,t,1),n=Yi(n,t,1),t=nr(),n!==null&&(op(n,1,t),gr(n,t));break}}n=n.return}}function K9(t,n,r){var s=t.pingCache;s!==null&&s.delete(n),n=nr(),t.pingedLanes|=t.suspendedLanes&r,pn===t&&(_n&r)===r&&(nn===4||nn===3&&(_n&130023424)===_n&&500>Lt()-LN?sl(t,0):DN|=r),gr(t,n)}function uD(t,n){n===0&&(t.mode&1?(n=Zp,Zp<<=1,!(Zp&130023424)&&(Zp=4194304)):n=1);var r=nr();t=Ga(t,n),t!==null&&(op(t,n,r),gr(t,r))}function q9(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),uD(t,r)}function G9(t,n){var r=0;switch(t.tag){case 13:var s=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(se(314))}s!==null&&s.delete(n),uD(t,r)}var fD;fD=function(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps||mr.current)fr=!0;else{if(!(t.lanes&r)&&!(n.flags&128))return fr=!1,I9(t,n,r);fr=!!(t.flags&131072)}else fr=!1,ut&&n.flags&1048576&&xI(n,Jm,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;pm(t,n),t=n.pendingProps;var a=Qc(n,Hn.current);Fc(n,r),a=EN(null,n,s,t,a,r);var i=TN();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,xr(s)?(i=!0,Ym(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kN(n),a.updater=Ug,n.stateNode=a,a._reactInternals=n,_w(n,s,t,r),n=Ew(null,n,s,!0,i,r)):(n.tag=0,ut&&i&&yN(n),Jn(null,n,a,r),n=n.child),n;case 16:s=n.elementType;e:{switch(pm(t,n),t=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=X9(s),t=js(s,t),a){case 0:n=Aw(null,n,s,t,r);break e;case 1:n=tP(null,n,s,t,r);break e;case 11:n=Z_(null,n,s,t,r);break e;case 14:n=eP(null,n,s,js(s.type,t),r);break e}throw Error(se(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:js(s,a),Aw(t,n,s,a,r);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:js(s,a),tP(t,n,s,a,r);case 3:e:{if(YI(n),t===null)throw Error(se(387));s=n.pendingProps,i=n.memoizedState,a=i.element,jI(t,n),ex(n,s,null,r);var l=n.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=nd(Error(se(423)),n),n=nP(t,n,s,r,a);break e}else if(s!==a){a=nd(Error(se(424)),n),n=nP(t,n,s,r,a);break e}else for(Or=Gi(n.stateNode.containerInfo.firstChild),Ir=n,ut=!0,Ss=null,r=bI(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zc(),s===a){n=Ya(t,n,r);break e}Jn(t,n,s,r)}n=n.child}return n;case 5:return NI(n),t===null&&Sw(n),s=n.type,a=n.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,vw(s,a)?l=null:i!==null&&vw(s,i)&&(n.flags|=32),GI(t,n),Jn(t,n,l,r),n.child;case 6:return t===null&&Sw(n),null;case 13:return XI(t,n,r);case 4:return CN(n,n.stateNode.containerInfo),s=n.pendingProps,t===null?n.child=ed(n,null,s,r):Jn(t,n,s,r),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:js(s,a),Z_(t,n,s,a,r);case 7:return Jn(t,n,n.pendingProps,r),n.child;case 8:return Jn(t,n,n.pendingProps.children,r),n.child;case 12:return Jn(t,n,n.pendingProps.children,r),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,l=a.value,st(Qm,s._currentValue),s._currentValue=l,i!==null)if(Ms(i.value,l)){if(i.children===a.children&&!mr.current){n=Ya(t,n,r);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=Ua(-1,r&-r),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),kw(i.return,r,n),c.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===n.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(se(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),kw(l,r,n),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===n){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Jn(t,n,a.children,r),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,Fc(n,r),a=ls(a),s=s(a),n.flags|=1,Jn(t,n,s,r),n.child;case 14:return s=n.type,a=js(s,n.pendingProps),a=js(s.type,a),eP(t,n,s,a,r);case 15:return KI(t,n,n.type,n.pendingProps,r);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:js(s,a),pm(t,n),n.tag=1,xr(s)?(t=!0,Ym(n)):t=!1,Fc(n,r),UI(n,s,a),_w(n,s,a,r),Ew(null,n,s,!0,t,r);case 19:return JI(t,n,r);case 22:return qI(t,n,r)}throw Error(se(156,n.tag))};function pD(t,n){return B5(t,n)}function Y9(t,n,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,n,r,s){return new Y9(t,n,r,s)}function zN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X9(t){if(typeof t=="function")return zN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iN)return 11;if(t===oN)return 14}return 2}function Qi(t,n){var r=t.alternate;return r===null?(r=ns(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function xm(t,n,r,s,a,i){var l=2;if(s=t,typeof t=="function")zN(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case hc:return al(r.children,a,i,n);case aN:l=8,a|=8;break;case Jb:return t=ns(12,r,n,a|2),t.elementType=Jb,t.lanes=i,t;case Qb:return t=ns(13,r,n,a),t.elementType=Qb,t.lanes=i,t;case Zb:return t=ns(19,r,n,a),t.elementType=Zb,t.lanes=i,t;case N5:return Kg(r,a,i,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w5:l=10;break e;case j5:l=9;break e;case iN:l=11;break e;case oN:l=14;break e;case Ai:l=16,s=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return n=ns(l,r,n,a),n.elementType=t,n.type=s,n.lanes=i,n}function al(t,n,r,s){return t=ns(7,t,s,n),t.lanes=r,t}function Kg(t,n,r,s){return t=ns(22,t,s,n),t.elementType=N5,t.lanes=r,t.stateNode={isHidden:!1},t}function x0(t,n,r){return t=ns(6,t,null,n),t.lanes=r,t}function g0(t,n,r){return n=ns(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function J9(t,n,r,s,a){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jv(0),this.expirationTimes=Jv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jv(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function VN(t,n,r,s,a,i,l,c,d){return t=new J9(t,n,r,c,d),n===1?(n=1,i===!0&&(n|=8)):n=0,i=ns(3,null,null,n),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kN(i),t}function Q9(t,n,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:s==null?null:""+s,children:t,containerInfo:n,implementation:r}}function hD(t){if(!t)return io;t=t._reactInternals;e:{if(Hl(t)!==t||t.tag!==1)throw Error(se(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(xr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(xr(r))return hI(t,r,n)}return n}function mD(t,n,r,s,a,i,l,c,d){return t=VN(r,s,!0,t,a,i,l,c,d),t.context=hD(null),r=t.current,s=nr(),a=Ji(r),i=Ua(s,a),i.callback=n??null,Yi(r,i,a),t.current.lanes=a,op(t,a,s),gr(t,s),t}function qg(t,n,r,s){var a=n.current,i=nr(),l=Ji(a);return r=hD(r),n.context===null?n.context=r:n.pendingContext=r,n=Ua(i,l),n.payload={element:t},s=s===void 0?null:s,s!==null&&(n.callback=s),t=Yi(a,n,l),t!==null&&(Es(t,a,l,i),dm(t,a,l)),l}function lx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fP(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function UN(t,n){fP(t,n),(t=t.alternate)&&fP(t,n)}function Z9(){return null}var xD=typeof reportError=="function"?reportError:function(t){console.error(t)};function HN(t){this._internalRoot=t}Gg.prototype.render=HN.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(se(409));qg(t,n,null,null)};Gg.prototype.unmount=HN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Nl(function(){qg(null,t,null,null)}),n[qa]=null}};function Gg(t){this._internalRoot=t}Gg.prototype.unstable_scheduleHydration=function(t){if(t){var n=q5();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Ii.length&&n!==0&&n<Ii[r].priority;r++);Ii.splice(r,0,t),r===0&&Y5(t)}};function WN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pP(){}function eK(t,n,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=lx(l);i.call(u)}}var l=mD(n,s,t,0,null,!1,!1,"",pP);return t._reactRootContainer=l,t[qa]=l.current,gf(t.nodeType===8?t.parentNode:t),Nl(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=lx(d);c.call(u)}}var d=VN(t,0,!1,null,null,!1,!1,"",pP);return t._reactRootContainer=d,t[qa]=d.current,gf(t.nodeType===8?t.parentNode:t),Nl(function(){qg(n,d,r,s)}),d}function Xg(t,n,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var c=a;a=function(){var d=lx(l);c.call(d)}}qg(n,l,t,a)}else l=eK(r,n,t,a,s);return lx(l)}W5=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var r=Au(n.pendingLanes);r!==0&&(dN(n,r|1),gr(n,Lt()),!(Ke&6)&&(rd=Lt()+500,wo()))}break;case 13:Nl(function(){var s=Ga(t,1);if(s!==null){var a=nr();Es(s,t,1,a)}}),UN(t,1)}};uN=function(t){if(t.tag===13){var n=Ga(t,134217728);if(n!==null){var r=nr();Es(n,t,134217728,r)}UN(t,134217728)}};K5=function(t){if(t.tag===13){var n=Ji(t),r=Ga(t,n);if(r!==null){var s=nr();Es(r,t,n,s)}UN(t,n)}};q5=function(){return Ze};G5=function(t,n){var r=Ze;try{return Ze=t,n()}finally{Ze=r}};cw=function(t,n,r){switch(n){case"input":if(nw(t,r),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==t&&s.form===t.form){var a=Bg(s);if(!a)throw Error(se(90));k5(s),nw(s,a)}}}break;case"textarea":_5(t,r);break;case"select":n=r.value,n!=null&&Ic(t,!!r.multiple,n,!1)}};R5=$N;I5=Nl;var tK={usingClientEntryPoint:!1,Events:[cp,yc,Bg,M5,O5,$N]},du={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nK={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$5(t),t===null?null:t.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||Z9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Dg=dh.inject(nK),oa=dh}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tK;Vr.createPortal=function(t,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WN(n))throw Error(se(200));return Q9(t,n,null,r)};Vr.createRoot=function(t,n){if(!WN(t))throw Error(se(299));var r=!1,s="",a=xD;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=VN(t,1,!1,null,null,r,!1,s,a),t[qa]=n.current,gf(t.nodeType===8?t.parentNode:t),new HN(n)};Vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=$5(n),t=t===null?null:t.stateNode,t};Vr.flushSync=function(t){return Nl(t)};Vr.hydrate=function(t,n,r){if(!Yg(n))throw Error(se(200));return Xg(null,t,n,!0,r)};Vr.hydrateRoot=function(t,n,r){if(!WN(t))throw Error(se(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=xD;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),n=mD(n,null,t,1,r??null,a,!1,i,l),t[qa]=n.current,gf(t),s)for(t=0;t<s.length;t++)r=s[t],a=r._getVersion,a=a(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,a]:n.mutableSourceEagerHydrationData.push(r,a);return new Gg(n)};Vr.render=function(t,n,r){if(!Yg(n))throw Error(se(200));return Xg(null,t,n,!1,r)};Vr.unmountComponentAtNode=function(t){if(!Yg(t))throw Error(se(40));return t._reactRootContainer?(Nl(function(){Xg(null,null,t,!1,function(){t._reactRootContainer=null,t[qa]=null})}),!0):!1};Vr.unstable_batchedUpdates=$N;Vr.unstable_renderSubtreeIntoContainer=function(t,n,r,s){if(!Yg(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Xg(t,n,r,!1,s)};Vr.version="18.3.1-next-f1338f8080-20240426";function gD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gD)}catch(t){console.error(t)}}gD(),g5.exports=Vr;var jo=g5.exports;const yD=Vs(jo);var hP=jo;Yb.createRoot=hP.createRoot,Yb.hydrateRoot=hP.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Cf.apply(this,arguments)}var zi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zi||(zi={}));const mP="popstate";function rK(t){t===void 0&&(t={});function n(s,a){let{pathname:i,search:l,hash:c}=s.location;return Vw("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:cx(a)}return aK(n,r,null,t)}function Ct(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function vD(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function sK(){return Math.random().toString(36).substr(2,8)}function xP(t,n){return{usr:t.state,key:t.key,idx:n}}function Vw(t,n,r,s){return r===void 0&&(r=null),Cf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Ad(n):n,{state:r,key:n&&n.key||s||sK()})}function cx(t){let{pathname:n="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Ad(t){let n={};if(t){let r=t.indexOf("#");r>=0&&(n.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(n.search=t.substr(s),t=t.substr(0,s)),t&&(n.pathname=t)}return n}function aK(t,n,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,c=zi.Pop,d=null,u=f();u==null&&(u=0,l.replaceState(Cf({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function p(){c=zi.Pop;let v=f(),b=v==null?null:v-u;u=v,d&&d({action:c,location:y.location,delta:b})}function h(v,b){c=zi.Push;let w=Vw(y.location,v,b);u=f()+1;let j=xP(w,u),N=y.createHref(w);try{l.pushState(j,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(N)}i&&d&&d({action:c,location:y.location,delta:1})}function m(v,b){c=zi.Replace;let w=Vw(y.location,v,b);u=f();let j=xP(w,u),N=y.createHref(w);l.replaceState(j,"",N),i&&d&&d({action:c,location:y.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof v=="string"?v:cx(v);return w=w.replace(/ $/,"%20"),Ct(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return c},get location(){return t(a,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(mP,p),d=v,()=>{a.removeEventListener(mP,p),d=null}},createHref(v){return n(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(v){return l.go(v)}};return y}var gP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gP||(gP={}));function iK(t,n,r){return r===void 0&&(r="/"),oK(t,n,r)}function oK(t,n,r,s){let a=typeof n=="string"?Ad(n):n,i=sd(a.pathname||"/",r);if(i==null)return null;let l=bD(t);lK(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let u=vK(i);c=gK(l[d],u)}return c}function bD(t,n,r,s){n===void 0&&(n=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,l,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(Ct(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=Zi([s,d.relativePath]),f=r.concat(d);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bD(i.children,n,f,u)),!(i.path==null&&!i.index)&&n.push({path:u,score:mK(u,i.index),routesMeta:f})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,l);else for(let d of wD(i.path))a(i,l,d)}),n}function wD(t){let n=t.split("/");if(n.length===0)return[];let[r,...s]=n,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=wD(s.join("/")),c=[];return c.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function lK(t){t.sort((n,r)=>n.score!==r.score?r.score-n.score:xK(n.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const cK=/^:[\w-]+$/,dK=3,uK=2,fK=1,pK=10,hK=-2,yP=t=>t==="*";function mK(t,n){let r=t.split("/"),s=r.length;return r.some(yP)&&(s+=hK),n&&(s+=uK),r.filter(a=>!yP(a)).reduce((a,i)=>a+(cK.test(i)?dK:i===""?fK:pK),s)}function xK(t,n){return t.length===n.length&&t.slice(0,-1).every((s,a)=>s===n[a])?t[t.length-1]-n[n.length-1]:0}function gK(t,n,r){let{routesMeta:s}=t,a={},i="/",l=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,f=i==="/"?n:n.slice(i.length)||"/",p=Uw({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),h=d.route;if(!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:Zi([i,p.pathname]),pathnameBase:NK(Zi([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=Zi([i,p.pathnameBase]))}return l}function Uw(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=yK(t.path,t.caseSensitive,t.end),a=n.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((u,f,p)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let y=c[p]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=c[p];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:t}}function yK(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),vD(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),s]}function vK(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return vD(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function sd(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function bK(t,n){n===void 0&&(n="/");let{pathname:r,search:s="",hash:a=""}=typeof t=="string"?Ad(t):t;return{pathname:r?r.startsWith("/")?r:wK(r,n):n,search:SK(s),hash:kK(a)}}function wK(t,n){let r=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function y0(t,n,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jK(t){return t.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function KN(t,n){let r=jK(t);return n?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function qN(t,n,r,s){s===void 0&&(s=!1);let a;typeof t=="string"?a=Ad(t):(a=Cf({},t),Ct(!a.pathname||!a.pathname.includes("?"),y0("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),y0("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),y0("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,c;if(l==null)c=r;else{let p=n.length-1;if(!s&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),p-=1;a.pathname=h.join("/")}c=p>=0?n[p]:"/"}let d=bK(a,c),u=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Zi=t=>t.join("/").replace(/\/\/+/g,"/"),NK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jD=["post","put","patch","delete"];new Set(jD);const _K=["get",...jD];new Set(_K);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_f.apply(this,arguments)}const Jg=x.createContext(null),ND=x.createContext(null),fi=x.createContext(null),Qg=x.createContext(null),ja=x.createContext({outlet:null,matches:[],isDataRoute:!1}),SD=x.createContext(null);function PK(t,n){let{relative:r}=n===void 0?{}:n;Ed()||Ct(!1);let{basename:s,navigator:a}=x.useContext(fi),{hash:i,pathname:l,search:c}=Zg(t,{relative:r}),d=l;return s!=="/"&&(d=l==="/"?s:Zi([s,l])),a.createHref({pathname:d,search:c,hash:i})}function Ed(){return x.useContext(Qg)!=null}function ps(){return Ed()||Ct(!1),x.useContext(Qg).location}function kD(t){x.useContext(fi).static||x.useLayoutEffect(t)}function jr(){let{isDataRoute:t}=x.useContext(ja);return t?UK():AK()}function AK(){Ed()||Ct(!1);let t=x.useContext(Jg),{basename:n,future:r,navigator:s}=x.useContext(fi),{matches:a}=x.useContext(ja),{pathname:i}=ps(),l=JSON.stringify(KN(a,r.v7_relativeSplatPath)),c=x.useRef(!1);return kD(()=>{c.current=!0}),x.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let p=qN(u,JSON.parse(l),i,f.relative==="path");t==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:Zi([n,p.pathname])),(f.replace?s.replace:s.push)(p,f.state,f)},[n,s,l,i,t])}const EK=x.createContext(null);function TK(t){let n=x.useContext(ja).outlet;return n&&x.createElement(EK.Provider,{value:t},n)}function Wl(){let{matches:t}=x.useContext(ja),n=t[t.length-1];return n?n.params:{}}function Zg(t,n){let{relative:r}=n===void 0?{}:n,{future:s}=x.useContext(fi),{matches:a}=x.useContext(ja),{pathname:i}=ps(),l=JSON.stringify(KN(a,s.v7_relativeSplatPath));return x.useMemo(()=>qN(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function MK(t,n){return OK(t,n)}function OK(t,n,r,s){Ed()||Ct(!1);let{navigator:a}=x.useContext(fi),{matches:i}=x.useContext(ja),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let u=ps(),f;if(n){var p;let v=typeof n=="string"?Ad(n):n;d==="/"||(p=v.pathname)!=null&&p.startsWith(d)||Ct(!1),f=v}else f=u;let h=f.pathname||"/",m=h;if(d!=="/"){let v=d.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=iK(t,{pathname:m}),y=$K(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Zi([d,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Zi([d,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,s);return n&&y?x.createElement(Qg.Provider,{value:{location:_f({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zi.Pop}},y):y}function RK(){let t=VK(),n=CK(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},n),r?x.createElement("pre",{style:a},r):null,null)}const IK=x.createElement(RK,null);class DK extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?x.createElement(ja.Provider,{value:this.props.routeContext},x.createElement(SD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LK(t){let{routeContext:n,match:r,children:s}=t,a=x.useContext(Jg);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(ja.Provider,{value:n},s)}function $K(t,n,r,s){var a;if(n===void 0&&(n=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,c=(a=r)==null?void 0:a.errors;if(c!=null){let f=l.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Ct(!1),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:h,errors:m}=r,g=p.route.loader&&h[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||g){d=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,p,h)=>{let m,g=!1,y=null,v=null;r&&(m=c&&p.route.id?c[p.route.id]:void 0,y=p.route.errorElement||IK,d&&(u<0&&h===0?(HK("route-fallback"),g=!0,v=null):u===h&&(g=!0,v=p.route.hydrateFallbackElement||null)));let b=n.concat(l.slice(0,h+1)),w=()=>{let j;return m?j=y:g?j=v:p.route.Component?j=x.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=f,x.createElement(LK,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:r!=null},children:j})};return r&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?x.createElement(DK,{location:r.location,revalidation:r.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var CD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CD||{}),_D=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_D||{});function FK(t){let n=x.useContext(Jg);return n||Ct(!1),n}function BK(t){let n=x.useContext(ND);return n||Ct(!1),n}function zK(t){let n=x.useContext(ja);return n||Ct(!1),n}function PD(t){let n=zK(),r=n.matches[n.matches.length-1];return r.route.id||Ct(!1),r.route.id}function VK(){var t;let n=x.useContext(SD),r=BK(),s=PD();return n!==void 0?n:(t=r.errors)==null?void 0:t[s]}function UK(){let{router:t}=FK(CD.UseNavigateStable),n=PD(_D.UseNavigateStable),r=x.useRef(!1);return kD(()=>{r.current=!0}),x.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,_f({fromRouteId:n},i)))},[t,n])}const vP={};function HK(t,n,r){vP[t]||(vP[t]=!0)}function WK(t,n){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function AD(t){let{to:n,replace:r,state:s,relative:a}=t;Ed()||Ct(!1);let{future:i,static:l}=x.useContext(fi),{matches:c}=x.useContext(ja),{pathname:d}=ps(),u=jr(),f=qN(n,KN(c,i.v7_relativeSplatPath),d,a==="path"),p=JSON.stringify(f);return x.useEffect(()=>u(JSON.parse(p),{replace:r,state:s,relative:a}),[u,p,a,r,s]),null}function ED(t){return TK(t.context)}function be(t){Ct(!1)}function KK(t){let{basename:n="/",children:r=null,location:s,navigationType:a=zi.Pop,navigator:i,static:l=!1,future:c}=t;Ed()&&Ct(!1);let d=n.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:d,navigator:i,static:l,future:_f({v7_relativeSplatPath:!1},c)}),[d,c,i,l]);typeof s=="string"&&(s=Ad(s));let{pathname:f="/",search:p="",hash:h="",state:m=null,key:g="default"}=s,y=x.useMemo(()=>{let v=sd(f,d);return v==null?null:{location:{pathname:v,search:p,hash:h,state:m,key:g},navigationType:a}},[d,f,p,h,m,g,a]);return y==null?null:x.createElement(fi.Provider,{value:u},x.createElement(Qg.Provider,{children:r,value:y}))}function qK(t){let{children:n,location:r}=t;return MK(Hw(n),r)}new Promise(()=>{});function Hw(t,n){n===void 0&&(n=[]);let r=[];return x.Children.forEach(t,(s,a)=>{if(!x.isValidElement(s))return;let i=[...n,a];if(s.type===x.Fragment){r.push.apply(r,Hw(s.props.children,i));return}s.type!==be&&Ct(!1),!s.props.index||!s.props.children||Ct(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Hw(s.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},dx.apply(this,arguments)}function TD(t,n){if(t==null)return{};var r={},s=Object.keys(t),a,i;for(i=0;i<s.length;i++)a=s[i],!(n.indexOf(a)>=0)&&(r[a]=t[a]);return r}function GK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YK(t,n){return t.button===0&&(!n||n==="_self")&&!GK(t)}const XK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JK=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],QK="6";try{window.__reactRouterVersion=QK}catch{}const ZK=x.createContext({isTransitioning:!1}),eq="startTransition",bP=Ig[eq];function tq(t){let{basename:n,children:r,future:s,window:a}=t,i=x.useRef();i.current==null&&(i.current=rK({window:a,v5Compat:!0}));let l=i.current,[c,d]=x.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},f=x.useCallback(p=>{u&&bP?bP(()=>d(p)):d(p)},[d,u]);return x.useLayoutEffect(()=>l.listen(f),[l,f]),x.useEffect(()=>WK(s),[s]),x.createElement(KK,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:s})}const nq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=x.forwardRef(function(n,r){let{onClick:s,relative:a,reloadDocument:i,replace:l,state:c,target:d,to:u,preventScrollReset:f,viewTransition:p}=n,h=TD(n,XK),{basename:m}=x.useContext(fi),g,y=!1;if(typeof u=="string"&&rq.test(u)&&(g=u,nq))try{let j=new URL(window.location.href),N=u.startsWith("//")?new URL(j.protocol+u):new URL(u),S=sd(N.pathname,m);N.origin===j.origin&&S!=null?u=S+N.search+N.hash:y=!0}catch{}let v=PK(u,{relative:a}),b=aq(u,{replace:l,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:p});function w(j){s&&s(j),j.defaultPrevented||b(j)}return x.createElement("a",dx({},h,{href:g||v,onClick:y||i?s:w,ref:r,target:d}))}),wP=x.forwardRef(function(n,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:l=!1,style:c,to:d,viewTransition:u,children:f}=n,p=TD(n,JK),h=Zg(d,{relative:p.relative}),m=ps(),g=x.useContext(ND),{navigator:y,basename:v}=x.useContext(fi),b=g!=null&&iq(h)&&u===!0,w=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,j=m.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(j=j.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=sd(N,v)||N);const S=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let _=j===w||!l&&j.startsWith(w)&&j.charAt(S)==="/",k=N!=null&&(N===w||!l&&N.startsWith(w)&&N.charAt(w.length)==="/"),C={isActive:_,isPending:k,isTransitioning:b},P=_?s:void 0,E;typeof i=="function"?E=i(C):E=[i,_?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(C):c;return x.createElement(Os,dx({},p,{"aria-current":P,className:E,ref:r,style:M,to:d,viewTransition:u}),typeof f=="function"?f(C):f)});var Ww;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ww||(Ww={}));var jP;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jP||(jP={}));function sq(t){let n=x.useContext(Jg);return n||Ct(!1),n}function aq(t,n){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:c}=n===void 0?{}:n,d=jr(),u=ps(),f=Zg(t,{relative:l});return x.useCallback(p=>{if(YK(p,r)){p.preventDefault();let h=s!==void 0?s:cx(u)===cx(f);d(t,{replace:h,state:a,preventScrollReset:i,relative:l,viewTransition:c})}},[u,d,f,s,a,r,t,i,l,c])}function iq(t,n){n===void 0&&(n={});let r=x.useContext(ZK);r==null&&Ct(!1);let{basename:s}=sq(Ww.useViewTransitionState),a=Zg(t,{relative:n.relative});if(!r.isTransitioning)return!1;let i=sd(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=sd(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Uw(a.pathname,l)!=null||Uw(a.pathname,i)!=null}const oq={},NP=t=>{let n;const r=new Set,s=(f,p)=>{const h=typeof f=="function"?f(n):f;if(!Object.is(h,n)){const m=n;n=p??(typeof h!="object"||h===null)?h:Object.assign({},n,h),r.forEach(g=>g(n,m))}},a=()=>n,d={setState:s,getState:a,getInitialState:()=>u,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{(oq?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=n=t(s,a,d);return d},lq=t=>t?NP(t):NP;var MD={exports:{}},OD={},RD={exports:{}},ID={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad=x;function cq(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var dq=typeof Object.is=="function"?Object.is:cq,uq=ad.useState,fq=ad.useEffect,pq=ad.useLayoutEffect,hq=ad.useDebugValue;function mq(t,n){var r=n(),s=uq({inst:{value:r,getSnapshot:n}}),a=s[0].inst,i=s[1];return pq(function(){a.value=r,a.getSnapshot=n,v0(a)&&i({inst:a})},[t,r,n]),fq(function(){return v0(a)&&i({inst:a}),t(function(){v0(a)&&i({inst:a})})},[t]),hq(r),r}function v0(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!dq(t,r)}catch{return!0}}function xq(t,n){return n()}var gq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xq:mq;ID.useSyncExternalStore=ad.useSyncExternalStore!==void 0?ad.useSyncExternalStore:gq;RD.exports=ID;var yq=RD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=x,vq=yq;function bq(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var wq=typeof Object.is=="function"?Object.is:bq,jq=vq.useSyncExternalStore,Nq=ey.useRef,Sq=ey.useEffect,kq=ey.useMemo,Cq=ey.useDebugValue;OD.useSyncExternalStoreWithSelector=function(t,n,r,s,a){var i=Nq(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=kq(function(){function d(m){if(!u){if(u=!0,f=m,m=s(m),a!==void 0&&l.hasValue){var g=l.value;if(a(g,m))return p=g}return p=m}if(g=p,wq(f,m))return g;var y=s(m);return a!==void 0&&a(g,y)?(f=m,g):(f=m,p=y)}var u=!1,f,p,h=r===void 0?null:r;return[function(){return d(n())},h===null?void 0:function(){return d(h())}]},[n,r,s,a]);var c=jq(t,i[0],i[1]);return Sq(function(){l.hasValue=!0,l.value=c},[c]),Cq(c),c};MD.exports=OD;var DD=MD.exports;const _q=Vs(DD),LD={},{useDebugValue:Pq}=ae,{useSyncExternalStoreWithSelector:Aq}=_q;let SP=!1;const Eq=t=>t;function Tq(t,n=Eq,r){(LD?"production":void 0)!=="production"&&r&&!SP&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),SP=!0);const s=Aq(t.subscribe,t.getState,t.getServerState||t.getInitialState,n,r);return Pq(s),s}const kP=t=>{(LD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof t=="function"?lq(t):t,r=(s,a)=>Tq(n,s,a);return Object.assign(r,n),r},$D=t=>t?kP(t):kP;function FD(t,n){return function(){return t.apply(n,arguments)}}const{toString:Mq}=Object.prototype,{getPrototypeOf:GN}=Object,{iterator:ty,toStringTag:BD}=Symbol,ny=(t=>n=>{const r=Mq.call(n);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Us=t=>(t=t.toLowerCase(),n=>ny(n)===t),ry=t=>n=>typeof n===t,{isArray:Td}=Array,id=ry("undefined");function up(t){return t!==null&&!id(t)&&t.constructor!==null&&!id(t.constructor)&&yr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const zD=Us("ArrayBuffer");function Oq(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&zD(t.buffer),n}const Rq=ry("string"),yr=ry("function"),VD=ry("number"),fp=t=>t!==null&&typeof t=="object",Iq=t=>t===!0||t===!1,gm=t=>{if(ny(t)!=="object")return!1;const n=GN(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(BD in t)&&!(ty in t)},Dq=t=>{if(!fp(t)||up(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Lq=Us("Date"),$q=Us("File"),Fq=Us("Blob"),Bq=Us("FileList"),zq=t=>fp(t)&&yr(t.pipe),Vq=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||yr(t.append)&&((n=ny(t))==="formdata"||n==="object"&&yr(t.toString)&&t.toString()==="[object FormData]"))},Uq=Us("URLSearchParams"),[Hq,Wq,Kq,qq]=["ReadableStream","Request","Response","Headers"].map(Us),Gq=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pp(t,n,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,a;if(typeof t!="object"&&(t=[t]),Td(t))for(s=0,a=t.length;s<a;s++)n.call(null,t[s],s,t);else{if(up(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let c;for(s=0;s<l;s++)c=i[s],n.call(null,t[c],c,t)}}function UD(t,n){if(up(t))return null;n=n.toLowerCase();const r=Object.keys(t);let s=r.length,a;for(;s-- >0;)if(a=r[s],n===a.toLowerCase())return a;return null}const Jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,HD=t=>!id(t)&&t!==Jo;function Kw(){const{caseless:t,skipUndefined:n}=HD(this)&&this||{},r={},s=(a,i)=>{const l=t&&UD(r,i)||i;gm(r[l])&&gm(a)?r[l]=Kw(r[l],a):gm(a)?r[l]=Kw({},a):Td(a)?r[l]=a.slice():(!n||!id(a))&&(r[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&pp(arguments[a],s);return r}const Yq=(t,n,r,{allOwnKeys:s}={})=>(pp(n,(a,i)=>{r&&yr(a)?t[i]=FD(a,r):t[i]=a},{allOwnKeys:s}),t),Xq=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Jq=(t,n,r,s)=>{t.prototype=Object.create(n.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),r&&Object.assign(t.prototype,r)},Qq=(t,n,r,s)=>{let a,i,l;const c={};if(n=n||{},t==null)return n;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)l=a[i],(!s||s(l,t,n))&&!c[l]&&(n[l]=t[l],c[l]=!0);t=r!==!1&&GN(t)}while(t&&(!r||r(t,n))&&t!==Object.prototype);return n},Zq=(t,n,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=n.length;const s=t.indexOf(n,r);return s!==-1&&s===r},eG=t=>{if(!t)return null;if(Td(t))return t;let n=t.length;if(!VD(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=t[n];return r},tG=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&GN(Uint8Array)),nG=(t,n)=>{const s=(t&&t[ty]).call(t);let a;for(;(a=s.next())&&!a.done;){const i=a.value;n.call(t,i[0],i[1])}},rG=(t,n)=>{let r;const s=[];for(;(r=t.exec(n))!==null;)s.push(r);return s},sG=Us("HTMLFormElement"),aG=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),CP=(({hasOwnProperty:t})=>(n,r)=>t.call(n,r))(Object.prototype),iG=Us("RegExp"),WD=(t,n)=>{const r=Object.getOwnPropertyDescriptors(t),s={};pp(r,(a,i)=>{let l;(l=n(a,i,t))!==!1&&(s[i]=l||a)}),Object.defineProperties(t,s)},oG=t=>{WD(t,(n,r)=>{if(yr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(yr(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},lG=(t,n)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return Td(t)?s(t):s(String(t).split(n)),r},cG=()=>{},dG=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function uG(t){return!!(t&&yr(t.append)&&t[BD]==="FormData"&&t[ty])}const fG=t=>{const n=new Array(10),r=(s,a)=>{if(fp(s)){if(n.indexOf(s)>=0)return;if(up(s))return s;if(!("toJSON"in s)){n[a]=s;const i=Td(s)?[]:{};return pp(s,(l,c)=>{const d=r(l,a+1);!id(d)&&(i[c]=d)}),n[a]=void 0,i}}return s};return r(t,0)},pG=Us("AsyncFunction"),hG=t=>t&&(fp(t)||yr(t))&&yr(t.then)&&yr(t.catch),KD=((t,n)=>t?setImmediate:n?((r,s)=>(Jo.addEventListener("message",({source:a,data:i})=>{a===Jo&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),Jo.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",yr(Jo.postMessage)),mG=typeof queueMicrotask<"u"?queueMicrotask.bind(Jo):typeof process<"u"&&process.nextTick||KD,xG=t=>t!=null&&yr(t[ty]),q={isArray:Td,isArrayBuffer:zD,isBuffer:up,isFormData:Vq,isArrayBufferView:Oq,isString:Rq,isNumber:VD,isBoolean:Iq,isObject:fp,isPlainObject:gm,isEmptyObject:Dq,isReadableStream:Hq,isRequest:Wq,isResponse:Kq,isHeaders:qq,isUndefined:id,isDate:Lq,isFile:$q,isBlob:Fq,isRegExp:iG,isFunction:yr,isStream:zq,isURLSearchParams:Uq,isTypedArray:tG,isFileList:Bq,forEach:pp,merge:Kw,extend:Yq,trim:Gq,stripBOM:Xq,inherits:Jq,toFlatObject:Qq,kindOf:ny,kindOfTest:Us,endsWith:Zq,toArray:eG,forEachEntry:nG,matchAll:rG,isHTMLForm:sG,hasOwnProperty:CP,hasOwnProp:CP,reduceDescriptors:WD,freezeMethods:oG,toObjectSet:lG,toCamelCase:aG,noop:cG,toFiniteNumber:dG,findKey:UD,global:Jo,isContextDefined:HD,isSpecCompliantForm:uG,toJSONObject:fG,isAsyncFn:pG,isThenable:hG,setImmediate:KD,asap:mG,isIterable:xG};function Re(t,n,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}q.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const qD=Re.prototype,GD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{GD[t]={value:t}});Object.defineProperties(Re,GD);Object.defineProperty(qD,"isAxiosError",{value:!0});Re.from=(t,n,r,s,a,i)=>{const l=Object.create(qD);q.toFlatObject(t,l,function(f){return f!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",d=n==null&&t?t.code:n;return Re.call(l,c,d,r,s,a),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const gG=null;function qw(t){return q.isPlainObject(t)||q.isArray(t)}function YD(t){return q.endsWith(t,"[]")?t.slice(0,-2):t}function _P(t,n,r){return t?t.concat(n).map(function(a,i){return a=YD(a),!r&&i?"["+a+"]":a}).join(r?".":""):n}function yG(t){return q.isArray(t)&&!t.some(qw)}const vG=q.toFlatObject(q,{},null,function(n){return/^is[A-Z]/.test(n)});function sy(t,n,r){if(!q.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,r=q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!q.isUndefined(v[y])});const s=r.metaTokens,a=r.visitor||f,i=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(n);if(!q.isFunction(a))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(q.isDate(g))return g.toISOString();if(q.isBoolean(g))return g.toString();if(!d&&q.isBlob(g))throw new Re("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(g)||q.isTypedArray(g)?d&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function f(g,y,v){let b=g;if(g&&!v&&typeof g=="object"){if(q.endsWith(y,"{}"))y=s?y:y.slice(0,-2),g=JSON.stringify(g);else if(q.isArray(g)&&yG(g)||(q.isFileList(g)||q.endsWith(y,"[]"))&&(b=q.toArray(g)))return y=YD(y),b.forEach(function(j,N){!(q.isUndefined(j)||j===null)&&n.append(l===!0?_P([y],N,i):l===null?y:y+"[]",u(j))}),!1}return qw(g)?!0:(n.append(_P(v,y,i),u(g)),!1)}const p=[],h=Object.assign(vG,{defaultVisitor:f,convertValue:u,isVisitable:qw});function m(g,y){if(!q.isUndefined(g)){if(p.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(g),q.forEach(g,function(b,w){(!(q.isUndefined(b)||b===null)&&a.call(n,b,q.isString(w)?w.trim():w,y,h))===!0&&m(b,y?y.concat(w):[w])}),p.pop()}}if(!q.isObject(t))throw new TypeError("data must be an object");return m(t),n}function PP(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function YN(t,n){this._pairs=[],t&&sy(t,this,n)}const XD=YN.prototype;XD.append=function(n,r){this._pairs.push([n,r])};XD.toString=function(n){const r=n?function(s){return n.call(this,s,PP)}:PP;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function bG(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function JD(t,n,r){if(!n)return t;const s=r&&r.encode||bG;q.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(n,r):i=q.isURLSearchParams(n)?n.toString():new YN(n,r).toString(s),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class AP{constructor(){this.handlers=[]}use(n,r,s){return this.handlers.push({fulfilled:n,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){q.forEach(this.handlers,function(s){s!==null&&n(s)})}}const QD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wG=typeof URLSearchParams<"u"?URLSearchParams:YN,jG=typeof FormData<"u"?FormData:null,NG=typeof Blob<"u"?Blob:null,SG={isBrowser:!0,classes:{URLSearchParams:wG,FormData:jG,Blob:NG},protocols:["http","https","file","blob","url","data"]},XN=typeof window<"u"&&typeof document<"u",Gw=typeof navigator=="object"&&navigator||void 0,kG=XN&&(!Gw||["ReactNative","NativeScript","NS"].indexOf(Gw.product)<0),CG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_G=XN&&window.location.href||"http://localhost",PG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:XN,hasStandardBrowserEnv:kG,hasStandardBrowserWebWorkerEnv:CG,navigator:Gw,origin:_G},Symbol.toStringTag,{value:"Module"})),Ln={...PG,...SG};function AG(t,n){return sy(t,new Ln.classes.URLSearchParams,{visitor:function(r,s,a,i){return Ln.isNode&&q.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...n})}function EG(t){return q.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function TG(t){const n={},r=Object.keys(t);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],n[i]=t[i];return n}function ZD(t){function n(r,s,a,i){let l=r[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=i>=r.length;return l=!l&&q.isArray(a)?a.length:l,d?(q.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!c):((!a[l]||!q.isObject(a[l]))&&(a[l]=[]),n(r,s,a[l],i)&&q.isArray(a[l])&&(a[l]=TG(a[l])),!c)}if(q.isFormData(t)&&q.isFunction(t.entries)){const r={};return q.forEachEntry(t,(s,a)=>{n(EG(s),a,r,0)}),r}return null}function MG(t,n,r){if(q.isString(t))try{return(n||JSON.parse)(t),q.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const hp={transitional:QD,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=q.isObject(n);if(i&&q.isHTMLForm(n)&&(n=new FormData(n)),q.isFormData(n))return a?JSON.stringify(ZD(n)):n;if(q.isArrayBuffer(n)||q.isBuffer(n)||q.isStream(n)||q.isFile(n)||q.isBlob(n)||q.isReadableStream(n))return n;if(q.isArrayBufferView(n))return n.buffer;if(q.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return AG(n,this.formSerializer).toString();if((c=q.isFileList(n))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return sy(c?{"files[]":n}:n,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),MG(n)):n}],transformResponse:[function(n){const r=this.transitional||hp.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(q.isResponse(n)||q.isReadableStream(n))return n;if(n&&q.isString(n)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(n,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?Re.from(c,Re.ERR_BAD_RESPONSE,this,null,this.response):c}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],t=>{hp.headers[t]={}});const OG=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RG=t=>{const n={};let r,s,a;return t&&t.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||n[r]&&OG[r])&&(r==="set-cookie"?n[r]?n[r].push(s):n[r]=[s]:n[r]=n[r]?n[r]+", "+s:s)}),n},EP=Symbol("internals");function uu(t){return t&&String(t).trim().toLowerCase()}function ym(t){return t===!1||t==null?t:q.isArray(t)?t.map(ym):String(t)}function IG(t){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)n[s[1]]=s[2];return n}const DG=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function b0(t,n,r,s,a){if(q.isFunction(s))return s.call(this,n,r);if(a&&(n=r),!!q.isString(n)){if(q.isString(s))return n.indexOf(s)!==-1;if(q.isRegExp(s))return s.test(n)}}function LG(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,s)=>r.toUpperCase()+s)}function $G(t,n){const r=q.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(a,i,l){return this[s].call(this,n,a,i,l)},configurable:!0})})}let vr=class{constructor(n){n&&this.set(n)}set(n,r,s){const a=this;function i(c,d,u){const f=uu(d);if(!f)throw new Error("header name must be a non-empty string");const p=q.findKey(a,f);(!p||a[p]===void 0||u===!0||u===void 0&&a[p]!==!1)&&(a[p||d]=ym(c))}const l=(c,d)=>q.forEach(c,(u,f)=>i(u,f,d));if(q.isPlainObject(n)||n instanceof this.constructor)l(n,r);else if(q.isString(n)&&(n=n.trim())&&!DG(n))l(RG(n),r);else if(q.isObject(n)&&q.isIterable(n)){let c={},d,u;for(const f of n){if(!q.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[u=f[0]]=(d=c[u])?q.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(c,r)}else n!=null&&i(r,n,s);return this}get(n,r){if(n=uu(n),n){const s=q.findKey(this,n);if(s){const a=this[s];if(!r)return a;if(r===!0)return IG(a);if(q.isFunction(r))return r.call(this,a,s);if(q.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=uu(n),n){const s=q.findKey(this,n);return!!(s&&this[s]!==void 0&&(!r||b0(this,this[s],s,r)))}return!1}delete(n,r){const s=this;let a=!1;function i(l){if(l=uu(l),l){const c=q.findKey(s,l);c&&(!r||b0(s,s[c],c,r))&&(delete s[c],a=!0)}}return q.isArray(n)?n.forEach(i):i(n),a}clear(n){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!n||b0(this,this[i],i,n,!0))&&(delete this[i],a=!0)}return a}normalize(n){const r=this,s={};return q.forEach(this,(a,i)=>{const l=q.findKey(s,i);if(l){r[l]=ym(a),delete r[i];return}const c=n?LG(i):String(i).trim();c!==i&&delete r[i],r[c]=ym(a),s[c]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return q.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=n&&q.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const s=new this(n);return r.forEach(a=>s.set(a)),s}static accessor(n){const s=(this[EP]=this[EP]={accessors:{}}).accessors,a=this.prototype;function i(l){const c=uu(l);s[c]||($G(a,l),s[c]=!0)}return q.isArray(n)?n.forEach(i):i(n),this}};vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(vr.prototype,({value:t},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(s){this[r]=s}}});q.freezeMethods(vr);function w0(t,n){const r=this||hp,s=n||r,a=vr.from(s.headers);let i=s.data;return q.forEach(t,function(c){i=c.call(r,i,a.normalize(),n?n.status:void 0)}),a.normalize(),i}function e3(t){return!!(t&&t.__CANCEL__)}function Md(t,n,r){Re.call(this,t??"canceled",Re.ERR_CANCELED,n,r),this.name="CanceledError"}q.inherits(Md,Re,{__CANCEL__:!0});function t3(t,n,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):n(new Re("Request failed with status code "+r.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function FG(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function BG(t,n){t=t||10;const r=new Array(t),s=new Array(t);let a=0,i=0,l;return n=n!==void 0?n:1e3,function(d){const u=Date.now(),f=s[i];l||(l=u),r[a]=d,s[a]=u;let p=i,h=0;for(;p!==a;)h+=r[p++],p=p%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),u-l<n)return;const m=f&&u-f;return m?Math.round(h*1e3/m):void 0}}function zG(t,n){let r=0,s=1e3/n,a,i;const l=(u,f=Date.now())=>{r=f,a=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const f=Date.now(),p=f-r;p>=s?l(u,f):(a=u,i||(i=setTimeout(()=>{i=null,l(a)},s-p)))},()=>a&&l(a)]}const ux=(t,n,r=3)=>{let s=0;const a=BG(50,250);return zG(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,d=l-s,u=a(d),f=l<=c;s=l;const p={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&f?(c-l)/u:void 0,event:i,lengthComputable:c!=null,[n?"download":"upload"]:!0};t(p)},r)},TP=(t,n)=>{const r=t!=null;return[s=>n[0]({lengthComputable:r,total:t,loaded:s}),n[1]]},MP=t=>(...n)=>q.asap(()=>t(...n)),VG=Ln.hasStandardBrowserEnv?((t,n)=>r=>(r=new URL(r,Ln.origin),t.protocol===r.protocol&&t.host===r.host&&(n||t.port===r.port)))(new URL(Ln.origin),Ln.navigator&&/(msie|trident)/i.test(Ln.navigator.userAgent)):()=>!0,UG=Ln.hasStandardBrowserEnv?{write(t,n,r,s,a,i){const l=[t+"="+encodeURIComponent(n)];q.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),q.isString(s)&&l.push("path="+s),q.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function HG(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function WG(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function n3(t,n,r){let s=!HG(n);return t&&(s||r==!1)?WG(t,n):n}const OP=t=>t instanceof vr?{...t}:t;function Sl(t,n){n=n||{};const r={};function s(u,f,p,h){return q.isPlainObject(u)&&q.isPlainObject(f)?q.merge.call({caseless:h},u,f):q.isPlainObject(f)?q.merge({},f):q.isArray(f)?f.slice():f}function a(u,f,p,h){if(q.isUndefined(f)){if(!q.isUndefined(u))return s(void 0,u,p,h)}else return s(u,f,p,h)}function i(u,f){if(!q.isUndefined(f))return s(void 0,f)}function l(u,f){if(q.isUndefined(f)){if(!q.isUndefined(u))return s(void 0,u)}else return s(void 0,f)}function c(u,f,p){if(p in n)return s(u,f);if(p in t)return s(void 0,u)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(u,f,p)=>a(OP(u),OP(f),p,!0)};return q.forEach(Object.keys({...t,...n}),function(f){const p=d[f]||a,h=p(t[f],n[f],f);q.isUndefined(h)&&p!==c||(r[f]=h)}),r}const r3=t=>{const n=Sl({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:c}=n;if(n.headers=l=vr.from(l),n.url=JD(n3(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),q.isFormData(r)){if(Ln.hasStandardBrowserEnv||Ln.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(q.isFunction(r.getHeaders)){const d=r.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([f,p])=>{u.includes(f.toLowerCase())&&l.set(f,p)})}}if(Ln.hasStandardBrowserEnv&&(s&&q.isFunction(s)&&(s=s(n)),s||s!==!1&&VG(n.url))){const d=a&&i&&UG.read(i);d&&l.set(a,d)}return n},KG=typeof XMLHttpRequest<"u",qG=KG&&function(t){return new Promise(function(r,s){const a=r3(t);let i=a.data;const l=vr.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=a,f,p,h,m,g;function y(){m&&m(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function b(){if(!v)return;const j=vr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:j,config:t,request:v};t3(function(k){r(k),y()},function(k){s(k),y()},S),v=null}"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(b)},v.onabort=function(){v&&(s(new Re("Request aborted",Re.ECONNABORTED,t,v)),v=null)},v.onerror=function(N){const S=N&&N.message?N.message:"Network Error",_=new Re(S,Re.ERR_NETWORK,t,v);_.event=N||null,s(_),v=null},v.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||QD;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),s(new Re(N,S.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,t,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&q.forEach(l.toJSON(),function(N,S){v.setRequestHeader(S,N)}),q.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),c&&c!=="json"&&(v.responseType=a.responseType),u&&([h,g]=ux(u,!0),v.addEventListener("progress",h)),d&&v.upload&&([p,m]=ux(d),v.upload.addEventListener("progress",p),v.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(f=j=>{v&&(s(!j||j.type?new Md(null,t,v):j),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const w=FG(a.url);if(w&&Ln.protocols.indexOf(w)===-1){s(new Re("Unsupported protocol "+w+":",Re.ERR_BAD_REQUEST,t));return}v.send(i||null)})},GG=(t,n)=>{const{length:r}=t=t?t.filter(Boolean):[];if(n||r){let s=new AbortController,a;const i=function(u){if(!a){a=!0,c();const f=u instanceof Error?u:this.reason;s.abort(f instanceof Re?f:new Md(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,i(new Re(`timeout ${n} of ms exceeded`,Re.ETIMEDOUT))},n);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:d}=s;return d.unsubscribe=()=>q.asap(c),d}},YG=function*(t,n){let r=t.byteLength;if(r<n){yield t;return}let s=0,a;for(;s<r;)a=s+n,yield t.slice(s,a),s=a},XG=async function*(t,n){for await(const r of JG(t))yield*YG(r,n)},JG=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:r,value:s}=await n.read();if(r)break;yield s}}finally{await n.cancel()}},RP=(t,n,r,s)=>{const a=XG(t,n);let i=0,l,c=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:u,value:f}=await a.next();if(u){c(),d.close();return}let p=f.byteLength;if(r){let h=i+=p;r(h)}d.enqueue(new Uint8Array(f))}catch(u){throw c(u),u}},cancel(d){return c(d),a.return()}},{highWaterMark:2})},IP=64*1024,{isFunction:uh}=q,QG=(({Request:t,Response:n})=>({Request:t,Response:n}))(q.global),{ReadableStream:DP,TextEncoder:LP}=q.global,$P=(t,...n)=>{try{return!!t(...n)}catch{return!1}},ZG=t=>{t=q.merge.call({skipUndefined:!0},QG,t);const{fetch:n,Request:r,Response:s}=t,a=n?uh(n):typeof fetch=="function",i=uh(r),l=uh(s);if(!a)return!1;const c=a&&uh(DP),d=a&&(typeof LP=="function"?(g=>y=>g.encode(y))(new LP):async g=>new Uint8Array(await new r(g).arrayBuffer())),u=i&&c&&$P(()=>{let g=!1;const y=new r(Ln.origin,{body:new DP,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),f=l&&c&&$P(()=>q.isReadableStream(new s("").body)),p={stream:f&&(g=>g.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!p[g]&&(p[g]=(y,v)=>{let b=y&&y[g];if(b)return b.call(y);throw new Re(`Response type '${g}' is not supported`,Re.ERR_NOT_SUPPORT,v)})});const h=async g=>{if(g==null)return 0;if(q.isBlob(g))return g.size;if(q.isSpecCompliantForm(g))return(await new r(Ln.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(q.isArrayBufferView(g)||q.isArrayBuffer(g))return g.byteLength;if(q.isURLSearchParams(g)&&(g=g+""),q.isString(g))return(await d(g)).byteLength},m=async(g,y)=>{const v=q.toFiniteNumber(g.getContentLength());return v??h(y)};return async g=>{let{url:y,method:v,data:b,signal:w,cancelToken:j,timeout:N,onDownloadProgress:S,onUploadProgress:_,responseType:k,headers:C,withCredentials:P="same-origin",fetchOptions:E}=r3(g),M=n||fetch;k=k?(k+"").toLowerCase():"text";let T=GG([w,j&&j.toAbortSignal()],N),A=null;const R=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let O;try{if(_&&u&&v!=="get"&&v!=="head"&&(O=await m(C,b))!==0){let K=new r(y,{method:"POST",body:b,duplex:"half"}),J;if(q.isFormData(b)&&(J=K.headers.get("content-type"))&&C.setContentType(J),K.body){const[Y,ee]=TP(O,ux(MP(_)));b=RP(K.body,IP,Y,ee)}}q.isString(P)||(P=P?"include":"omit");const I=i&&"credentials"in r.prototype,L={...E,signal:T,method:v.toUpperCase(),headers:C.normalize().toJSON(),body:b,duplex:"half",credentials:I?P:void 0};A=i&&new r(y,L);let D=await(i?M(A,E):M(y,L));const $=f&&(k==="stream"||k==="response");if(f&&(S||$&&R)){const K={};["status","statusText","headers"].forEach(Q=>{K[Q]=D[Q]});const J=q.toFiniteNumber(D.headers.get("content-length")),[Y,ee]=S&&TP(J,ux(MP(S),!0))||[];D=new s(RP(D.body,IP,Y,()=>{ee&&ee(),R&&R()}),K)}k=k||"text";let F=await p[q.findKey(p,k)||"text"](D,g);return!$&&R&&R(),await new Promise((K,J)=>{t3(K,J,{data:F,headers:vr.from(D.headers),status:D.status,statusText:D.statusText,config:g,request:A})})}catch(I){throw R&&R(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,g,A),{cause:I.cause||I}):Re.from(I,I&&I.code,g,A)}}},eY=new Map,s3=t=>{let n=t?t.env:{};const{fetch:r,Request:s,Response:a}=n,i=[s,a,r];let l=i.length,c=l,d,u,f=eY;for(;c--;)d=i[c],u=f.get(d),u===void 0&&f.set(d,u=c?new Map:ZG(n)),f=u;return u};s3();const Yw={http:gG,xhr:qG,fetch:{get:s3}};q.forEach(Yw,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const FP=t=>`- ${t}`,tY=t=>q.isFunction(t)||t===null||t===!1,a3={getAdapter:(t,n)=>{t=q.isArray(t)?t:[t];const{length:r}=t;let s,a;const i={};for(let l=0;l<r;l++){s=t[l];let c;if(a=s,!tY(s)&&(a=Yw[(c=String(s)).toLowerCase()],a===void 0))throw new Re(`Unknown adapter '${c}'`);if(a&&(q.isFunction(a)||(a=a.get(n))))break;i[c||"#"+l]=a}if(!a){const l=Object.entries(i).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=r?l.length>1?`since :
`+l.map(FP).join(`
`):" "+FP(l[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:Yw};function j0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Md(null,t)}function BP(t){return j0(t),t.headers=vr.from(t.headers),t.data=w0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),a3.getAdapter(t.adapter||hp.adapter,t)(t).then(function(s){return j0(t),s.data=w0.call(t,t.transformResponse,s),s.headers=vr.from(s.headers),s},function(s){return e3(s)||(j0(t),s&&s.response&&(s.response.data=w0.call(t,t.transformResponse,s.response),s.response.headers=vr.from(s.response.headers))),Promise.reject(s)})}const i3="1.12.2",ay={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{ay[t]=function(s){return typeof s===t||"a"+(n<1?"n ":" ")+t}});const zP={};ay.transitional=function(n,r,s){function a(i,l){return"[Axios v"+i3+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,c)=>{if(n===!1)throw new Re(a(l," has been removed"+(r?" in "+r:"")),Re.ERR_DEPRECATED);return r&&!zP[l]&&(zP[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(i,l,c):!0}};ay.spelling=function(n){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function nY(t,n,r){if(typeof t!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let a=s.length;for(;a-- >0;){const i=s[a],l=n[i];if(l){const c=t[i],d=c===void 0||l(c,i,t);if(d!==!0)throw new Re("option "+i+" must be "+d,Re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Re("Unknown option "+i,Re.ERR_BAD_OPTION)}}const vm={assertOptions:nY,validators:ay},Xs=vm.validators;let il=class{constructor(n){this.defaults=n||{},this.interceptors={request:new AP,response:new AP}}async request(n,r){try{return await this._request(n,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=Sl(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&vm.assertOptions(s,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),a!=null&&(q.isFunction(a)?r.paramsSerializer={serialize:a}:vm.assertOptions(a,{encode:Xs.function,serialize:Xs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),vm.assertOptions(r,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&q.merge(i.common,i[r.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=vr.concat(l,i);const c=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(d=d&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let f,p=0,h;if(!d){const g=[BP.bind(this),void 0];for(g.unshift(...c),g.push(...u),h=g.length,f=Promise.resolve(r);p<h;)f=f.then(g[p++],g[p++]);return f}h=c.length;let m=r;for(;p<h;){const g=c[p++],y=c[p++];try{m=g(m)}catch(v){y.call(this,v);break}}try{f=BP.call(this,m)}catch(g){return Promise.reject(g)}for(p=0,h=u.length;p<h;)f=f.then(u[p++],u[p++]);return f}getUri(n){n=Sl(this.defaults,n);const r=n3(n.baseURL,n.url,n.allowAbsoluteUrls);return JD(r,n.params,n.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(n){il.prototype[n]=function(r,s){return this.request(Sl(s||{},{method:n,url:r,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(n){function r(s){return function(i,l,c){return this.request(Sl(c||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}il.prototype[n]=r(),il.prototype[n+"Form"]=r(!0)});let rY=class o3{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(c=>{s.subscribe(c),i=c}).then(a);return l.cancel=function(){s.unsubscribe(i)},l},n(function(i,l,c){s.reason||(s.reason=new Md(i,l,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=s=>{n.abort(s)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new o3(function(a){n=a}),cancel:n}}};function sY(t){return function(r){return t.apply(null,r)}}function aY(t){return q.isObject(t)&&t.isAxiosError===!0}const Xw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xw).forEach(([t,n])=>{Xw[n]=t});function l3(t){const n=new il(t),r=FD(il.prototype.request,n);return q.extend(r,il.prototype,n,{allOwnKeys:!0}),q.extend(r,n,null,{allOwnKeys:!0}),r.create=function(a){return l3(Sl(t,a))},r}const Ft=l3(hp);Ft.Axios=il;Ft.CanceledError=Md;Ft.CancelToken=rY;Ft.isCancel=e3;Ft.VERSION=i3;Ft.toFormData=sy;Ft.AxiosError=Re;Ft.Cancel=Ft.CanceledError;Ft.all=function(n){return Promise.all(n)};Ft.spread=sY;Ft.isAxiosError=aY;Ft.mergeConfig=Sl;Ft.AxiosHeaders=vr;Ft.formToJSON=t=>ZD(q.isHTMLForm(t)?new FormData(t):t);Ft.getAdapter=a3.getAdapter;Ft.HttpStatusCode=Xw;Ft.default=Ft;const{Axios:ERe,AxiosError:TRe,CanceledError:MRe,isCancel:ORe,CancelToken:RRe,VERSION:IRe,all:DRe,Cancel:LRe,isAxiosError:$Re,spread:FRe,toFormData:BRe,AxiosHeaders:zRe,HttpStatusCode:VRe,formToJSON:URe,getAdapter:HRe,mergeConfig:WRe}=Ft;function iY(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const oY=t=>{switch(t){case"success":return dY;case"info":return fY;case"warning":return uY;case"error":return pY;default:return null}},lY=Array(12).fill(0),cY=({visible:t,className:n})=>ae.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":t},ae.createElement("div",{className:"sonner-spinner"},lY.map((r,s)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),dY=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uY=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fY=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pY=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hY=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mY=()=>{const[t,n]=ae.useState(document.hidden);return ae.useEffect(()=>{const r=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let Jw=1;class xY{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const r=this.subscribers.indexOf(n);this.subscribers.splice(r,1)}),this.publish=n=>{this.subscribers.forEach(r=>r(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var r;const{message:s,...a}=n,i=typeof(n==null?void 0:n.id)=="number"||((r=n.id)==null?void 0:r.length)>0?n.id:Jw++,l=this.toasts.find(d=>d.id===i),c=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...n,id:i,title:s}),{...d,...n,id:i,dismissible:c,title:s}):d):this.addToast({title:s,...a,dismissible:c,id:i}),i},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:n,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(s=>s({id:r.id,dismiss:!0}))}),n),this.message=(n,r)=>this.create({...r,message:n}),this.error=(n,r)=>this.create({...r,message:n,type:"error"}),this.success=(n,r)=>this.create({...r,type:"success",message:n}),this.info=(n,r)=>this.create({...r,type:"info",message:n}),this.warning=(n,r)=>this.create({...r,type:"warning",message:n}),this.loading=(n,r)=>this.create({...r,type:"loading",message:n}),this.promise=(n,r)=>{if(!r)return;let s;r.loading!==void 0&&(s=this.create({...r,promise:n,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(n instanceof Function?n():n);let i=s!==void 0,l;const c=a.then(async u=>{if(l=["resolve",u],ae.isValidElement(u))i=!1,this.create({id:s,type:"default",message:u});else if(yY(u)&&!u.ok){i=!1;const p=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,g=typeof p=="object"&&!ae.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:h,...g})}else if(u instanceof Error){i=!1;const p=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description,g=typeof p=="object"&&!ae.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:h,...g})}else if(r.success!==void 0){i=!1;const p=typeof r.success=="function"?await r.success(u):r.success,h=typeof r.description=="function"?await r.description(u):r.description,g=typeof p=="object"&&!ae.isValidElement(p)?p:{message:p};this.create({id:s,type:"success",description:h,...g})}}).catch(async u=>{if(l=["reject",u],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,m=typeof f=="object"&&!ae.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:p,...m})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,f)=>c.then(()=>l[0]==="reject"?f(l[1]):u(l[1])).catch(f));return typeof s!="string"&&typeof s!="number"?{unwrap:d}:Object.assign(s,{unwrap:d})},this.custom=(n,r)=>{const s=(r==null?void 0:r.id)||Jw++;return this.create({jsx:n(s),id:s,...r}),s},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lr=new xY,gY=(t,n)=>{const r=(n==null?void 0:n.id)||Jw++;return lr.addToast({title:t,...n,id:r}),r},yY=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",vY=gY,bY=()=>lr.toasts,wY=()=>lr.getActiveToasts(),V=Object.assign(vY,{success:lr.success,info:lr.info,warning:lr.warning,error:lr.error,custom:lr.custom,message:lr.message,promise:lr.promise,dismiss:lr.dismiss,loading:lr.loading},{getHistory:bY,getToasts:wY});iY("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function fh(t){return t.label!==void 0}const jY=3,NY="24px",SY="16px",VP=4e3,kY=356,CY=14,_Y=45,PY=200;function Js(...t){return t.filter(Boolean).join(" ")}function AY(t){const[n,r]=t.split("-"),s=[];return n&&s.push(n),r&&s.push(r),s}const EY=t=>{var n,r,s,a,i,l,c,d,u;const{invert:f,toast:p,unstyled:h,interacting:m,setHeights:g,visibleToasts:y,heights:v,index:b,toasts:w,expanded:j,removeToast:N,defaultRichColors:S,closeButton:_,style:k,cancelButtonStyle:C,actionButtonStyle:P,className:E="",descriptionClassName:M="",duration:T,position:A,gap:R,expandByDefault:O,classNames:I,icons:L,closeButtonAriaLabel:D="Close toast"}=t,[$,F]=ae.useState(null),[K,J]=ae.useState(null),[Y,ee]=ae.useState(!1),[Q,ue]=ae.useState(!1),[G,ne]=ae.useState(!1),[z,te]=ae.useState(!1),[oe,H]=ae.useState(!1),[Fe,Te]=ae.useState(0),[X,je]=ae.useState(0),_e=ae.useRef(p.duration||T||VP),it=ae.useRef(null),tt=ae.useRef(null),bi=b===0,Do=b+1<=y,Yn=p.type,xs=p.dismissible!==!1,Up=p.className||"",Hp=p.descriptionClassName||"",Lo=ae.useMemo(()=>v.findIndex(Be=>Be.toastId===p.id)||0,[v,p.id]),Wp=ae.useMemo(()=>{var Be;return(Be=p.closeButton)!=null?Be:_},[p.closeButton,_]),nu=ae.useMemo(()=>p.duration||T||VP,[p.duration,T]),W=ae.useRef(0),ye=ae.useRef(0),We=ae.useRef(0),At=ae.useRef(null),[SH,kH]=A.split("-"),t_=ae.useMemo(()=>v.reduce((Be,dn,Mn)=>Mn>=Lo?Be:Be+dn.height,0),[v,Lo]),n_=mY(),CH=p.invert||f,Hv=Yn==="loading";ye.current=ae.useMemo(()=>Lo*R+t_,[Lo,t_]),ae.useEffect(()=>{_e.current=nu},[nu]),ae.useEffect(()=>{ee(!0)},[]),ae.useEffect(()=>{const Be=tt.current;if(Be){const dn=Be.getBoundingClientRect().height;return je(dn),g(Mn=>[{toastId:p.id,height:dn,position:p.position},...Mn]),()=>g(Mn=>Mn.filter(Sr=>Sr.toastId!==p.id))}},[g,p.id]),ae.useLayoutEffect(()=>{if(!Y)return;const Be=tt.current,dn=Be.style.height;Be.style.height="auto";const Mn=Be.getBoundingClientRect().height;Be.style.height=dn,je(Mn),g(Sr=>Sr.find(vn=>vn.toastId===p.id)?Sr.map(vn=>vn.toastId===p.id?{...vn,height:Mn}:vn):[{toastId:p.id,height:Mn,position:p.position},...Sr])},[Y,p.title,p.description,g,p.id,p.jsx,p.action,p.cancel]);const wi=ae.useCallback(()=>{ue(!0),Te(ye.current),g(Be=>Be.filter(dn=>dn.toastId!==p.id)),setTimeout(()=>{N(p)},PY)},[p,N,g,ye]);ae.useEffect(()=>{if(p.promise&&Yn==="loading"||p.duration===1/0||p.type==="loading")return;let Be;return j||m||n_?(()=>{if(We.current<W.current){const Sr=new Date().getTime()-W.current;_e.current=_e.current-Sr}We.current=new Date().getTime()})():(()=>{_e.current!==1/0&&(W.current=new Date().getTime(),Be=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),wi()},_e.current))})(),()=>clearTimeout(Be)},[j,m,p,Yn,n_,wi]),ae.useEffect(()=>{p.delete&&(wi(),p.onDismiss==null||p.onDismiss.call(p,p))},[wi,p.delete]);function _H(){var Be;if(L!=null&&L.loading){var dn;return ae.createElement("div",{className:Js(I==null?void 0:I.loader,p==null||(dn=p.classNames)==null?void 0:dn.loader,"sonner-loader"),"data-visible":Yn==="loading"},L.loading)}return ae.createElement(cY,{className:Js(I==null?void 0:I.loader,p==null||(Be=p.classNames)==null?void 0:Be.loader),visible:Yn==="loading"})}const PH=p.icon||(L==null?void 0:L[Yn])||oY(Yn);var r_,s_;return ae.createElement("li",{tabIndex:0,ref:tt,className:Js(E,Up,I==null?void 0:I.toast,p==null||(n=p.classNames)==null?void 0:n.toast,I==null?void 0:I.default,I==null?void 0:I[Yn],p==null||(r=p.classNames)==null?void 0:r[Yn]),"data-sonner-toast":"","data-rich-colors":(r_=p.richColors)!=null?r_:S,"data-styled":!(p.jsx||p.unstyled||h),"data-mounted":Y,"data-promise":!!p.promise,"data-swiped":oe,"data-removed":Q,"data-visible":Do,"data-y-position":SH,"data-x-position":kH,"data-index":b,"data-front":bi,"data-swiping":G,"data-dismissible":xs,"data-type":Yn,"data-invert":CH,"data-swipe-out":z,"data-swipe-direction":K,"data-expanded":!!(j||O&&Y),"data-testid":p.testId,style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${Q?Fe:ye.current}px`,"--initial-height":O?"auto":`${X}px`,...k,...p.style},onDragEnd:()=>{ne(!1),F(null),At.current=null},onPointerDown:Be=>{Be.button!==2&&(Hv||!xs||(it.current=new Date,Te(ye.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(ne(!0),At.current={x:Be.clientX,y:Be.clientY})))},onPointerUp:()=>{var Be,dn,Mn;if(z||!xs)return;At.current=null;const Sr=Number(((Be=tt.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Kp=Number(((dn=tt.current)==null?void 0:dn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vn=new Date().getTime()-((Mn=it.current)==null?void 0:Mn.getTime()),Kr=$==="x"?Sr:Kp,qp=Math.abs(Kr)/vn;if(Math.abs(Kr)>=_Y||qp>.11){Te(ye.current),p.onDismiss==null||p.onDismiss.call(p,p),J($==="x"?Sr>0?"right":"left":Kp>0?"down":"up"),wi(),te(!0);return}else{var gs,ys;(gs=tt.current)==null||gs.style.setProperty("--swipe-amount-x","0px"),(ys=tt.current)==null||ys.style.setProperty("--swipe-amount-y","0px")}H(!1),ne(!1),F(null)},onPointerMove:Be=>{var dn,Mn,Sr;if(!At.current||!xs||((dn=window.getSelection())==null?void 0:dn.toString().length)>0)return;const vn=Be.clientY-At.current.y,Kr=Be.clientX-At.current.x;var qp;const gs=(qp=t.swipeDirections)!=null?qp:AY(A);!$&&(Math.abs(Kr)>1||Math.abs(vn)>1)&&F(Math.abs(Kr)>Math.abs(vn)?"x":"y");let ys={x:0,y:0};const a_=$o=>1/(1.5+Math.abs($o)/20);if($==="y"){if(gs.includes("top")||gs.includes("bottom"))if(gs.includes("top")&&vn<0||gs.includes("bottom")&&vn>0)ys.y=vn;else{const $o=vn*a_(vn);ys.y=Math.abs($o)<Math.abs(vn)?$o:vn}}else if($==="x"&&(gs.includes("left")||gs.includes("right")))if(gs.includes("left")&&Kr<0||gs.includes("right")&&Kr>0)ys.x=Kr;else{const $o=Kr*a_(Kr);ys.x=Math.abs($o)<Math.abs(Kr)?$o:Kr}(Math.abs(ys.x)>0||Math.abs(ys.y)>0)&&H(!0),(Mn=tt.current)==null||Mn.style.setProperty("--swipe-amount-x",`${ys.x}px`),(Sr=tt.current)==null||Sr.style.setProperty("--swipe-amount-y",`${ys.y}px`)}},Wp&&!p.jsx&&Yn!=="loading"?ae.createElement("button",{"aria-label":D,"data-disabled":Hv,"data-close-button":!0,onClick:Hv||!xs?()=>{}:()=>{wi(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Js(I==null?void 0:I.closeButton,p==null||(s=p.classNames)==null?void 0:s.closeButton)},(s_=L==null?void 0:L.close)!=null?s_:hY):null,(Yn||p.icon||p.promise)&&p.icon!==null&&((L==null?void 0:L[Yn])!==null||p.icon)?ae.createElement("div",{"data-icon":"",className:Js(I==null?void 0:I.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||_H():null,p.type!=="loading"?PH:null):null,ae.createElement("div",{"data-content":"",className:Js(I==null?void 0:I.content,p==null||(i=p.classNames)==null?void 0:i.content)},ae.createElement("div",{"data-title":"",className:Js(I==null?void 0:I.title,p==null||(l=p.classNames)==null?void 0:l.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?ae.createElement("div",{"data-description":"",className:Js(M,Hp,I==null?void 0:I.description,p==null||(c=p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),ae.isValidElement(p.cancel)?p.cancel:p.cancel&&fh(p.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:Be=>{fh(p.cancel)&&xs&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Be),wi())},className:Js(I==null?void 0:I.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,ae.isValidElement(p.action)?p.action:p.action&&fh(p.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||P,onClick:Be=>{fh(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Be),!Be.defaultPrevented&&wi())},className:Js(I==null?void 0:I.actionButton,p==null||(u=p.classNames)==null?void 0:u.actionButton)},p.action.label):null)};function UP(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function TY(t,n){const r={};return[t,n].forEach((s,a)=>{const i=a===1,l=i?"--mobile-offset":"--offset",c=i?SY:NY;function d(u){["top","right","bottom","left"].forEach(f=>{r[`${l}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?d(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?r[`${l}-${u}`]=c:r[`${l}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):d(c)}),r}const pi=ae.forwardRef(function(n,r){const{id:s,invert:a,position:i="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:u,offset:f,mobileOffset:p,theme:h="light",richColors:m,duration:g,style:y,visibleToasts:v=jY,toastOptions:b,dir:w=UP(),gap:j=CY,icons:N,containerAriaLabel:S="Notifications"}=n,[_,k]=ae.useState([]),C=ae.useMemo(()=>s?_.filter(Y=>Y.toasterId===s):_.filter(Y=>!Y.toasterId),[_,s]),P=ae.useMemo(()=>Array.from(new Set([i].concat(C.filter(Y=>Y.position).map(Y=>Y.position)))),[C,i]),[E,M]=ae.useState([]),[T,A]=ae.useState(!1),[R,O]=ae.useState(!1),[I,L]=ae.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=ae.useRef(null),$=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=ae.useRef(null),K=ae.useRef(!1),J=ae.useCallback(Y=>{k(ee=>{var Q;return(Q=ee.find(ue=>ue.id===Y.id))!=null&&Q.delete||lr.dismiss(Y.id),ee.filter(({id:ue})=>ue!==Y.id)})},[]);return ae.useEffect(()=>lr.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{k(ee=>ee.map(Q=>Q.id===Y.id?{...Q,delete:!0}:Q))});return}setTimeout(()=>{yD.flushSync(()=>{k(ee=>{const Q=ee.findIndex(ue=>ue.id===Y.id);return Q!==-1?[...ee.slice(0,Q),{...ee[Q],...Y},...ee.slice(Q+1)]:[Y,...ee]})})})}),[_]),ae.useEffect(()=>{if(h!=="system"){L(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?L("dark"):L("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:ee})=>{L(ee?"dark":"light")})}catch{Y.addListener(({matches:Q})=>{try{L(Q?"dark":"light")}catch(ue){console.error(ue)}})}},[h]),ae.useEffect(()=>{_.length<=1&&A(!1)},[_]),ae.useEffect(()=>{const Y=ee=>{var Q;if(l.every(ne=>ee[ne]||ee.code===ne)){var G;A(!0),(G=D.current)==null||G.focus()}ee.code==="Escape"&&(document.activeElement===D.current||(Q=D.current)!=null&&Q.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[l]),ae.useEffect(()=>{if(D.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,K.current=!1)}},[D.current]),ae.createElement("section",{ref:r,"aria-label":`${S} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((Y,ee)=>{var Q;const[ue,G]=Y.split("-");return C.length?ae.createElement("ol",{key:Y,dir:w==="auto"?UP():w,tabIndex:-1,ref:D,className:u,"data-sonner-toaster":!0,"data-sonner-theme":I,"data-y-position":ue,"data-x-position":G,style:{"--front-toast-height":`${((Q=E[0])==null?void 0:Q.height)||0}px`,"--width":`${kY}px`,"--gap":`${j}px`,...y,...TY(f,p)},onBlur:ne=>{K.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(K.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||K.current||(K.current=!0,F.current=ne.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{R||A(!1)},onDragEnd:()=>A(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},C.filter(ne=>!ne.position&&ee===0||ne.position===Y).map((ne,z)=>{var te,oe;return ae.createElement(EY,{key:ne.id,icons:N,index:z,toast:ne,defaultRichColors:m,duration:(te=b==null?void 0:b.duration)!=null?te:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:a,visibleToasts:v,closeButton:(oe=b==null?void 0:b.closeButton)!=null?oe:d,interacting:R,position:Y,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,closeButtonAriaLabel:b==null?void 0:b.closeButtonAriaLabel,removeToast:J,toasts:C.filter(H=>H.position==ne.position),heights:E.filter(H=>H.position==ne.position),setHeights:M,expandByDefault:c,gap:j,expanded:T,swipeDirections:n.swipeDirections})})):null}))}),B=Ft.create({baseURL:"https://api.nutryah.com/api",withCredentials:!0});B.interceptors.request.use(t=>{const n=localStorage.getItem("access_token");return n&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${n}`),t});B.interceptors.response.use(t=>t,t=>{var r,s,a,i;const n=((s=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:s.detail)||((i=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Unexpected error";return V.error(n),Promise.reject(t)});B.interceptors.response.use(t=>t,t=>{var r;return((r=t==null?void 0:t.response)==null?void 0:r.status)===401&&(localStorage.clear(),delete B.defaults.headers.common.Authorization),Promise.reject(t)});const $t=$D(t=>({user:null,modules:{},loading:!1,registerAdmin:async n=>B.post("/auth/register-admin",n),login:async({email:n,password:r})=>{const{data:s}=await B.post("/auth/login",{email:n,password:r});return s},verifyOtp:async({email:n,otp:r})=>{const{data:s}=await B.post("/auth/verify-otp",{email:n,otp:r});return localStorage.setItem("access_token",s.access_token),localStorage.setItem("refresh_token",s.refresh_token),B.defaults.headers.common.Authorization=`Bearer ${s.access_token}`,s},fetchProfile:async()=>{try{t({loading:!0});const n=await B.get("/auth/me"),r=await B.get("/auth/me/permissions");t({user:n.data,modules:r.data.modules||{}})}finally{t({loading:!1})}},logout:()=>{localStorage.clear(),delete B.defaults.headers.common.Authorization,t({user:null,modules:{}})}}));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),HP=t=>{const n=OY(t);return n.charAt(0).toUpperCase()+n.slice(1)},c3=(...t)=>t.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),RY=t=>{for(const n in t)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=x.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...c},d)=>x.createElement("svg",{ref:d,...IY,width:n,height:n,stroke:t,strokeWidth:s?Number(r)*24/Number(n):r,className:c3("lucide",a),...!i&&!RY(c)&&{"aria-hidden":"true"},...c},[...l.map(([u,f])=>x.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,n)=>{const r=x.forwardRef(({className:s,...a},i)=>x.createElement(DY,{ref:i,iconNode:n,className:c3(`lucide-${MY(HP(t))}`,`lucide-${t}`,s),...a}));return r.displayName=HP(t),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ts=ie("activity",LY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],FY=ie("arrow-left-right",$Y);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zY=ie("arrow-left",BY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UY=ie("ban",VY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],zc=ie("bed-double",HY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],KY=ie("boxes",WY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],JN=ie("building-2",qY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],iy=ie("calendar-clock",GY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],XY=ie("calendar-days",YY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],ph=ie("calendar-range",JY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fx=ie("calendar",QY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tu=ie("chart-column",ZY);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mp=ie("check",eX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],QN=ie("chevron-down",tX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],d3=ie("chevron-left",nX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],u3=ie("chevron-right",rX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],aX=ie("chevron-up",sX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],f3=ie("circle-alert",iX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Od=ie("circle-check",oX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xp=ie("circle-x",lX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Yu=ie("clipboard-list",cX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vc=ie("clock-3",dX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fX=ie("clock",uX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],hh=ie("dot",pX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xu=ie("download",hX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],xX=ie("droplet",mX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],yX=ie("droplets",gX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bX=ie("eye-off",vX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],jX=ie("factory",wX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],p3=ie("eye",NX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],WP=ie("file-check-2",SX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],CX=ie("file-down",kX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]],PX=ie("file-plus-2",_X);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],EX=ie("file-spreadsheet",AX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],px=ie("file-text",TX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],od=ie("flask-conical",MX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Pf=ie("funnel",OX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],KP=ie("heart-pulse",RX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],DX=ie("history",IX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],qP=ie("indian-rupee",LX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GP=ie("info",$X);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],ea=ie("key-round",FX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],zX=ie("laptop-minimal",BX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],YP=ie("layout-dashboard",VX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],HX=ie("layers",UX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],KX=ie("layout-template",WX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],GX=ie("list-checks",qX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xa=ie("loader-circle",YX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JX=ie("log-out",XX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ZX=ie("lock",QX);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ZN=ie("mail",eJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],nJ=ie("map-pin",tJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M5 12h14",key:"1ays0h"}]],sJ=ie("minus",rJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],XP=ie("notebook-pen",aJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],h3=ie("package",iJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],m3=ie("paperclip",oJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Rs=ie("pencil",lJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Uc=ie("pill",cJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],uJ=ie("play",dJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mn=ie("plus",fJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],JP=ie("printer",pJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]],mJ=ie("receipt-text",hJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],x3=ie("receipt",xJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Qw=ie("refresh-ccw",gJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oy=ie("refresh-cw",yJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],eS=ie("rotate-ccw",vJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],wJ=ie("rotate-cw",bJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],g3=ie("ruler",jJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],y3=ie("scale",NJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],QP=ie("scan-line",SJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Mu=ie("scan",kJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],_J=ie("scissors",CJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],AJ=ie("scroll-text",PJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],En=ie("search",EJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MJ=ie("settings",TJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],No=ie("shield-check",OJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],tS=ie("shopping-cart",RJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],DJ=ie("stamp",IJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ur=ie("stethoscope",LJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],v3=ie("thermometer",$J);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M12 14v-4",key:"1evpnu"}],["path",{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6",key:"1ts96g"}],["path",{d:"M9 17H4v5",key:"8t5av"}]],BJ=ie("timer-reset",FJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Na=ie("trash-2",zJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ly=ie("triangle-alert",VJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],HJ=ie("truck",UJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hx=ie("upload",WJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qJ=ie("user-plus",KJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],nS=ie("user-round",GJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ci=ie("users",YJ);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Is=ie("x",XJ);function JJ(){var m;const t=ps(),[n,r]=x.useState({email:((m=t.state)==null?void 0:m.email)||"",password:""}),[s,a]=x.useState(""),[i,l]=x.useState(!1),[c,d]=x.useState(!1),u=$t(g=>g.login),f=jr(),p=x.useMemo(()=>n.email.trim()&&n.password.trim()&&!i,[n,i]),h=async g=>{var y,v;if(g.preventDefault(),!!p){a(""),l(!0);try{await u({email:n.email.trim(),password:n.password}),localStorage.setItem("pending_email",n.email.trim()),f("/auth/verify",{state:{email:n.email.trim()}})}catch(b){a(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Invalid email or password")}finally{l(!1)}}};return o.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-white",children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[o.jsx("div",{className:"absolute -left-24 -top-24 h-64 w-64 rounded-full bg-blue-100 blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute -right-24 -bottom-24 h-72 w-72 rounded-full bg-indigo-100 blur-3xl animate-pulse"})]}),o.jsx("div",{className:"relative z-10 grid min-h-screen place-items-center px-4 py-10",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-100 bg-white/80 p-6 shadow-sm backdrop-blur",children:[o.jsx("div",{className:"pointer-events-none absolute -right-12 -top-12 h-32 w-32 rotate-45 bg-gradient-to-br from-blue-50 to-indigo-50"}),o.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-blue-600 text-white ring-8 ring-blue-50",children:o.jsx("span",{className:"text-sm font-bold tracking-tight",children:"NDH"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"NUTRYAH's HIMS & EMR"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Secure sign-in with email + OTP"})]})]}),o.jsx(No,{className:"h-6 w-6 text-emerald-600"})]}),o.jsxs("form",{onSubmit:h,className:"space-y-4","aria-busy":i,children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Email"}),o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 focus-within:ring-2 focus-within:ring-blue-200",children:[o.jsx(ZN,{className:"h-4 w-4 text-gray-400"}),o.jsx("input",{className:"w-full bg-transparent outline-none placeholder:text-gray-400",placeholder:"you@hospital.org",type:"email",autoComplete:"email",value:n.email,onChange:g=>r({...n,email:g.target.value}),required:!0,disabled:i})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Password"}),o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 focus-within:ring-2 focus-within:ring-blue-200",children:[o.jsx(ZX,{className:"h-4 w-4 text-gray-400"}),o.jsx("input",{className:"w-full bg-transparent outline-none placeholder:text-gray-400",placeholder:"",type:c?"text":"password",autoComplete:"current-password",value:n.password,onChange:g=>r({...n,password:g.target.value}),required:!0,disabled:i}),o.jsx("button",{type:"button",onClick:()=>d(g=>!g),className:"rounded-lg p-1.5 text-gray-500 hover:bg-gray-50","aria-label":c?"Hide password":"Show password",tabIndex:-1,disabled:i,children:c?o.jsx(bX,{className:"h-4 w-4"}):o.jsx(p3,{className:"h-4 w-4"})})]})]}),o.jsx("button",{className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2.5 text-white shadow-sm transition active:scale-[0.99] disabled:cursor-not-allowed disabled:opacity-60",disabled:!p,type:"submit",children:i?o.jsxs(o.Fragment,{children:[o.jsx(Xa,{className:"h-5 w-5 animate-spin"}),o.jsx("span",{children:"Sending OTP"})]}):o.jsx(o.Fragment,{children:"Send OTP"})}),s&&o.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:s}),o.jsx("p",{className:"text-center text-xs text-gray-500",children:"Tip: Youll receive a 6-digit OTP in your email. Keep this tab open."})]}),i&&o.jsx("div",{className:"absolute inset-0 grid place-items-center rounded-2xl bg-white/70 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-xs rounded-xl border border-gray-100 bg-white p-4 shadow-md",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-700",children:[o.jsx(Xa,{className:"h-4 w-4 animate-spin text-blue-600"}),"Sending OTP"]}),o.jsx("div",{className:"relative h-2 overflow-hidden rounded-full bg-gray-100",children:o.jsx("div",{className:"absolute inset-y-0 left-0 w-1/3 animate-[progress_1.2s_infinite] rounded-full bg-gradient-to-r from-blue-500 to-indigo-500"})}),o.jsxs("div",{className:"mt-3 flex items-center justify-center gap-1",children:[o.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500 [animation-delay:-0.2s]"}),o.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500 [animation-delay:-0.1s]"}),o.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500"})]})]})})]}),o.jsxs("div",{className:"mx-auto mt-6 text-center text-xs text-gray-500",children:[" ",new Date().getFullYear()," NUTRYAH  Secure Access"]})]})}),o.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-120%); }
          100% { transform: translateX(300%); }
        }
      `})]})}function QJ(){const[t,n]=x.useState({name:"",email:"",password:"",confirm_password:""}),r=$t(c=>c.registerAdmin),s=jr(),[a,i]=x.useState(!1);x.useEffect(()=>{B.get("/admin/status").then(c=>i(c.data.admin_exists))},[]);const l=async c=>{c.preventDefault(),!a&&(await r(t),alert("Admin registered. Please login."),s("/auth/login"))};return a?o.jsx("div",{className:"min-h-screen grid place-items-center",children:o.jsxs("div",{className:"card max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Admin already exists"}),o.jsx("p",{children:"Registration is disabled."})]})}):o.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:o.jsxs("form",{onSubmit:l,className:"card w-full max-w-md space-y-4",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Create Admin"}),o.jsx("input",{className:"input",placeholder:"Name",value:t.name,onChange:c=>n({...t,name:c.target.value}),required:!0}),o.jsx("input",{className:"input",placeholder:"Email",type:"email",value:t.email,onChange:c=>n({...t,email:c.target.value}),required:!0}),o.jsx("input",{className:"input",placeholder:"Password",type:"password",value:t.password,onChange:c=>n({...t,password:c.target.value}),required:!0}),o.jsx("input",{className:"input",placeholder:"Confirm Password",type:"password",value:t.confirm_password,onChange:c=>n({...t,confirm_password:c.target.value}),required:!0}),o.jsx("button",{className:"btn w-full",children:"Register"})]})})}function ZJ(){var C;const t=ps(),n=jr(),r=$t(P=>P.verifyOtp),s=$t(P=>P.fetchProfile),[a]=x.useState(((C=t.state)==null?void 0:C.email)||localStorage.getItem("pending_email")||""),[i,l]=x.useState(["","","","","",""]),[c,d]=x.useState(""),[u,f]=x.useState(!1),[p,h]=x.useState(60),[m,g]=x.useState(!1),y=x.useRef([]);x.useEffect(()=>{a||n("/auth/login",{replace:!0})},[a,n]),x.useEffect(()=>{if(p<=0)return;const P=setInterval(()=>h(E=>E-1),1e3);return()=>clearInterval(P)},[p]);const v=x.useMemo(()=>i.join(""),[i]),b=v.length===6&&!i.includes("")&&!u,w=(P,E)=>{var T;const M=(E||"").replace(/\D/g,"").slice(-1);l(A=>{const R=[...A];return R[P]=M,R}),M&&P<5&&((T=y.current[P+1])==null||T.focus())},j=(P,E)=>{var M,T,A;E.key==="Backspace"?i[P]?l(R=>{const O=[...R];return O[P]="",O}):P>0&&((M=y.current[P-1])==null||M.focus(),l(R=>{const O=[...R];return O[P-1]="",O})):E.key==="ArrowLeft"&&P>0?(T=y.current[P-1])==null||T.focus():E.key==="ArrowRight"&&P<5&&((A=y.current[P+1])==null||A.focus())},N=P=>{var T;P.preventDefault();const E=(P.clipboardData.getData("text")||"").replace(/\D/g,"").slice(0,6);if(!E)return;const M=E.split("");l([M[0]||"",M[1]||"",M[2]||"",M[3]||"",M[4]||"",M[5]||""]),(T=y.current[Math.min(E.length,5)])==null||T.focus()},S=async P=>{var E,M;if(P.preventDefault(),!!b){d(""),f(!0);try{await r({email:a,otp:v}),await s(),g(!0),setTimeout(()=>{const T=$t.getState().user;T!=null&&T.is_admin?n("/admin",{replace:!0}):n("/dashboard",{replace:!0})},400)}catch(T){d(((M=(E=T==null?void 0:T.response)==null?void 0:E.data)==null?void 0:M.detail)||"Invalid or expired OTP")}finally{f(!1)}}},_=()=>{n("/auth/login",{state:{email:a},replace:!0})},k=()=>{_()};return o.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-white",children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[o.jsx("div",{className:"absolute -left-24 -top-24 h-64 w-64 rounded-full bg-blue-100 blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute -right-24 -bottom-24 h-72 w-72 rounded-full bg-indigo-100 blur-3xl animate-pulse"})]}),o.jsx("div",{className:"relative z-10 grid min-h-screen place-items-center px-4 py-8",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-100 bg-white/80 p-6 shadow-sm backdrop-blur",children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-blue-600 text-white ring-8 ring-blue-50",children:o.jsx("span",{className:"text-sm font-bold",children:"NDH"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Verify OTP"}),o.jsx("p",{className:"text-xs text-gray-500",children:"We sent a 6-digit code to your email"})]})]}),o.jsx(No,{className:"h-6 w-6 text-emerald-600"})]}),o.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2 text-sm text-gray-700",children:[o.jsx(ZN,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"truncate",children:a}),o.jsx("button",{type:"button",onClick:_,className:"ml-auto text-xs text-blue-700 underline-offset-2 hover:underline",children:"Change"})]}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-6 gap-2 sm:gap-3",onPaste:N,children:i.map((P,E)=>o.jsx("input",{ref:M=>y.current[E]=M,value:P,inputMode:"numeric",pattern:"[0-9]*",maxLength:1,autoFocus:E===0,onChange:M=>w(E,M.target.value),onKeyDown:M=>j(E,M),className:`h-12 rounded-xl border border-gray-200 text-center text-lg tracking-[0.2em] outline-none transition\r
                               focus:border-blue-400 focus:ring-2 focus:ring-blue-200 sm:h-14`,"aria-label":`OTP digit ${E+1}`},E))}),o.jsx("button",{className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2.5 text-white shadow-sm transition active:scale-[0.99] disabled:cursor-not-allowed disabled:opacity-60",disabled:!b,type:"submit",children:u?o.jsxs(o.Fragment,{children:[o.jsx(Xa,{className:"h-5 w-5 animate-spin"}),"Verifying"]}):m?o.jsxs(o.Fragment,{children:[o.jsx(Od,{className:"h-5 w-5"}),"Verified"]}):"Verify & Continue"}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("button",{type:"button",onClick:()=>n("/auth/login"),className:"inline-flex items-center gap-1 rounded-lg px-2 py-1 hover:bg-gray-50",children:[o.jsx(zY,{className:"h-3.5 w-3.5"}),"Back to login"]}),o.jsx("div",{className:"flex items-center gap-2",children:p>0?o.jsxs("span",{className:"rounded-lg bg-gray-50 px-2 py-1 tabular-nums",children:["Resend in ",p,"s"]}):o.jsx("button",{type:"button",onClick:k,className:"rounded-lg bg-gray-900 px-2 py-1 text-white hover:bg-gray-800",children:"Resend OTP"})})]}),c&&o.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",role:"alert","aria-live":"polite",children:c})]}),u&&o.jsx("div",{className:"absolute inset-0 grid place-items-center rounded-2xl bg-white/70 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-xs rounded-xl border border-gray-100 bg-white p-4 shadow-md",children:[o.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-700",children:[o.jsx(Xa,{className:"h-4 w-4 animate-spin text-blue-600"}),"Verifying"]}),o.jsx("div",{className:"relative h-2 overflow-hidden rounded-full bg-gray-100",children:o.jsx("div",{className:"absolute inset-y-0 left-0 w-1/3 animate-[progress_1.1s_infinite_linear] rounded-full bg-gradient-to-r from-blue-500 to-indigo-500"})})]})})]}),o.jsx("div",{className:"mx-auto mt-6 text-center text-xs text-gray-500",children:"Didnt receive the mail? Check Spam/Junk folder."})]})}),o.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-120%); }
          100% { transform: translateX(300%); }
        }
      `})]})}const rS=x.createContext({});function sS(t){const n=x.useRef(null);return n.current===null&&(n.current=t()),n.current}const aS=typeof window<"u",b3=aS?x.useLayoutEffect:x.useEffect,cy=x.createContext(null);function iS(t,n){t.indexOf(n)===-1&&t.push(n)}function oS(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}const Ja=(t,n,r)=>r>n?n:r<t?t:r;let lS=()=>{};const Qa={},w3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function j3(t){return typeof t=="object"&&t!==null}const N3=t=>/^0[^.\s]+$/u.test(t);function cS(t){let n;return()=>(n===void 0&&(n=t()),n)}const is=t=>t,eQ=(t,n)=>r=>n(t(r)),gp=(...t)=>t.reduce(eQ),Af=(t,n,r)=>{const s=n-t;return s===0?1:(r-t)/s};class dS{constructor(){this.subscriptions=[]}add(n){return iS(this.subscriptions,n),()=>oS(this.subscriptions,n)}notify(n,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](n,r,s);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(n,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ca=t=>t*1e3,rs=t=>t/1e3;function S3(t,n){return n?t*(1e3/n):0}const k3=(t,n,r)=>(((1-3*r+3*n)*t+(3*r-6*n))*t+3*n)*t,tQ=1e-7,nQ=12;function rQ(t,n,r,s,a){let i,l,c=0;do l=n+(r-n)/2,i=k3(l,s,a)-t,i>0?r=l:n=l;while(Math.abs(i)>tQ&&++c<nQ);return l}function yp(t,n,r,s){if(t===n&&r===s)return is;const a=i=>rQ(i,0,1,t,r);return i=>i===0||i===1?i:k3(a(i),n,s)}const C3=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,_3=t=>n=>1-t(1-n),P3=yp(.33,1.53,.69,.99),uS=_3(P3),A3=C3(uS),E3=t=>(t*=2)<1?.5*uS(t):.5*(2-Math.pow(2,-10*(t-1))),fS=t=>1-Math.sin(Math.acos(t)),T3=_3(fS),M3=C3(fS),sQ=yp(.42,0,1,1),aQ=yp(0,0,.58,1),O3=yp(.42,0,.58,1),iQ=t=>Array.isArray(t)&&typeof t[0]!="number",R3=t=>Array.isArray(t)&&typeof t[0]=="number",oQ={linear:is,easeIn:sQ,easeInOut:O3,easeOut:aQ,circIn:fS,circInOut:M3,circOut:T3,backIn:uS,backInOut:A3,backOut:P3,anticipate:E3},lQ=t=>typeof t=="string",ZP=t=>{if(R3(t)){lS(t.length===4);const[n,r,s,a]=t;return yp(n,r,s,a)}else if(lQ(t))return oQ[t];return t},mh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function cQ(t,n){let r=new Set,s=new Set,a=!1,i=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(f){l.has(f)&&(u.schedule(f),t()),f(c)}const u={schedule:(f,p=!1,h=!1)=>{const g=h&&a?r:s;return p&&l.add(f),g.has(f)||g.add(f),f},cancel:f=>{s.delete(f),l.delete(f)},process:f=>{if(c=f,a){i=!0;return}a=!0,[r,s]=[s,r],r.forEach(d),r.clear(),a=!1,i&&(i=!1,u.process(f))}};return u}const dQ=40;function I3(t,n){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,l=mh.reduce((j,N)=>(j[N]=cQ(i),j),{}),{setup:c,read:d,resolveKeyframes:u,preUpdate:f,update:p,preRender:h,render:m,postRender:g}=l,y=()=>{const j=Qa.useManualTiming?a.timestamp:performance.now();r=!1,Qa.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(j-a.timestamp,dQ),1)),a.timestamp=j,a.isProcessing=!0,c.process(a),d.process(a),u.process(a),f.process(a),p.process(a),h.process(a),m.process(a),g.process(a),a.isProcessing=!1,r&&n&&(s=!1,t(y))},v=()=>{r=!0,s=!0,a.isProcessing||t(y)};return{schedule:mh.reduce((j,N)=>{const S=l[N];return j[N]=(_,k=!1,C=!1)=>(r||v(),S.schedule(_,k,C)),j},{}),cancel:j=>{for(let N=0;N<mh.length;N++)l[mh[N]].cancel(j)},state:a,steps:l}}const{schedule:pt,cancel:oo,state:Sn,steps:N0}=I3(typeof requestAnimationFrame<"u"?requestAnimationFrame:is,!0);let bm;function uQ(){bm=void 0}const pr={now:()=>(bm===void 0&&pr.set(Sn.isProcessing||Qa.useManualTiming?Sn.timestamp:performance.now()),bm),set:t=>{bm=t,queueMicrotask(uQ)}},D3=t=>n=>typeof n=="string"&&n.startsWith(t),pS=D3("--"),fQ=D3("var(--"),hS=t=>fQ(t)?pQ.test(t.split("/*")[0].trim()):!1,pQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ef={...Rd,transform:t=>Ja(0,1,t)},xh={...Rd,default:1},Ju=t=>Math.round(t*1e5)/1e5,mS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hQ(t){return t==null}const mQ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xS=(t,n)=>r=>!!(typeof r=="string"&&mQ.test(r)&&r.startsWith(t)||n&&!hQ(r)&&Object.prototype.hasOwnProperty.call(r,n)),L3=(t,n,r)=>s=>{if(typeof s!="string")return s;const[a,i,l,c]=s.match(mS);return{[t]:parseFloat(a),[n]:parseFloat(i),[r]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},xQ=t=>Ja(0,255,t),S0={...Rd,transform:t=>Math.round(xQ(t))},Qo={test:xS("rgb","red"),parse:L3("red","green","blue"),transform:({red:t,green:n,blue:r,alpha:s=1})=>"rgba("+S0.transform(t)+", "+S0.transform(n)+", "+S0.transform(r)+", "+Ju(Ef.transform(s))+")"};function gQ(t){let n="",r="",s="",a="";return t.length>5?(n=t.substring(1,3),r=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(n=t.substring(1,2),r=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),n+=n,r+=r,s+=s,a+=a),{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Zw={test:xS("#"),parse:gQ,transform:Qo.transform},vp=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),_i=vp("deg"),da=vp("%"),Me=vp("px"),yQ=vp("vh"),vQ=vp("vw"),eA={...da,parse:t=>da.parse(t)/100,transform:t=>da.transform(t*100)},kc={test:xS("hsl","hue"),parse:L3("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:r,alpha:s=1})=>"hsla("+Math.round(t)+", "+da.transform(Ju(n))+", "+da.transform(Ju(r))+", "+Ju(Ef.transform(s))+")"},zt={test:t=>Qo.test(t)||Zw.test(t)||kc.test(t),parse:t=>Qo.test(t)?Qo.parse(t):kc.test(t)?kc.parse(t):Zw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qo.transform(t):kc.transform(t),getAnimatableNone:t=>{const n=zt.parse(t);return n.alpha=0,zt.transform(n)}},bQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wQ(t){var n,r;return isNaN(t)&&typeof t=="string"&&(((n=t.match(mS))==null?void 0:n.length)||0)+(((r=t.match(bQ))==null?void 0:r.length)||0)>0}const $3="number",F3="color",jQ="var",NQ="var(",tA="${}",SQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tf(t){const n=t.toString(),r=[],s={color:[],number:[],var:[]},a=[];let i=0;const c=n.replace(SQ,d=>(zt.test(d)?(s.color.push(i),a.push(F3),r.push(zt.parse(d))):d.startsWith(NQ)?(s.var.push(i),a.push(jQ),r.push(d)):(s.number.push(i),a.push($3),r.push(parseFloat(d))),++i,tA)).split(tA);return{values:r,split:c,indexes:s,types:a}}function B3(t){return Tf(t).values}function z3(t){const{split:n,types:r}=Tf(t),s=n.length;return a=>{let i="";for(let l=0;l<s;l++)if(i+=n[l],a[l]!==void 0){const c=r[l];c===$3?i+=Ju(a[l]):c===F3?i+=zt.transform(a[l]):i+=a[l]}return i}}const kQ=t=>typeof t=="number"?0:zt.test(t)?zt.getAnimatableNone(t):t;function CQ(t){const n=B3(t);return z3(t)(n.map(kQ))}const lo={test:wQ,parse:B3,createTransformer:z3,getAnimatableNone:CQ};function k0(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*(2/3-r)*6:t}function _Q({hue:t,saturation:n,lightness:r,alpha:s}){t/=360,n/=100,r/=100;let a=0,i=0,l=0;if(!n)a=i=l=r;else{const c=r<.5?r*(1+n):r+n-r*n,d=2*r-c;a=k0(d,c,t+1/3),i=k0(d,c,t),l=k0(d,c,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:s}}function mx(t,n){return r=>r>0?n:t}const wt=(t,n,r)=>t+(n-t)*r,C0=(t,n,r)=>{const s=t*t,a=r*(n*n-s)+s;return a<0?0:Math.sqrt(a)},PQ=[Zw,Qo,kc],AQ=t=>PQ.find(n=>n.test(t));function nA(t){const n=AQ(t);if(!n)return!1;let r=n.parse(t);return n===kc&&(r=_Q(r)),r}const rA=(t,n)=>{const r=nA(t),s=nA(n);if(!r||!s)return mx(t,n);const a={...r};return i=>(a.red=C0(r.red,s.red,i),a.green=C0(r.green,s.green,i),a.blue=C0(r.blue,s.blue,i),a.alpha=wt(r.alpha,s.alpha,i),Qo.transform(a))},ej=new Set(["none","hidden"]);function EQ(t,n){return ej.has(t)?r=>r<=0?t:n:r=>r>=1?n:t}function TQ(t,n){return r=>wt(t,n,r)}function gS(t){return typeof t=="number"?TQ:typeof t=="string"?hS(t)?mx:zt.test(t)?rA:RQ:Array.isArray(t)?V3:typeof t=="object"?zt.test(t)?rA:MQ:mx}function V3(t,n){const r=[...t],s=r.length,a=t.map((i,l)=>gS(i)(i,n[l]));return i=>{for(let l=0;l<s;l++)r[l]=a[l](i);return r}}function MQ(t,n){const r={...t,...n},s={};for(const a in r)t[a]!==void 0&&n[a]!==void 0&&(s[a]=gS(t[a])(t[a],n[a]));return a=>{for(const i in s)r[i]=s[i](a);return r}}function OQ(t,n){const r=[],s={color:0,var:0,number:0};for(let a=0;a<n.values.length;a++){const i=n.types[a],l=t.indexes[i][s[i]],c=t.values[l]??0;r[a]=c,s[i]++}return r}const RQ=(t,n)=>{const r=lo.createTransformer(n),s=Tf(t),a=Tf(n);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?ej.has(t)&&!a.values.length||ej.has(n)&&!s.values.length?EQ(t,n):gp(V3(OQ(s,a),a.values),r):mx(t,n)};function U3(t,n,r){return typeof t=="number"&&typeof n=="number"&&typeof r=="number"?wt(t,n,r):gS(t)(t,n)}const IQ=t=>{const n=({timestamp:r})=>t(r);return{start:(r=!0)=>pt.update(n,r),stop:()=>oo(n),now:()=>Sn.isProcessing?Sn.timestamp:pr.now()}},H3=(t,n,r=10)=>{let s="";const a=Math.max(Math.round(n/r),2);for(let i=0;i<a;i++)s+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},xx=2e4;function yS(t){let n=0;const r=50;let s=t.next(n);for(;!s.done&&n<xx;)n+=r,s=t.next(n);return n>=xx?1/0:n}function DQ(t,n=100,r){const s=r({...t,keyframes:[0,n]}),a=Math.min(yS(s),xx);return{type:"keyframes",ease:i=>s.next(a*i).value/n,duration:rs(a)}}const LQ=5;function W3(t,n,r){const s=Math.max(n-LQ,0);return S3(r-t(s),n-s)}const Et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_0=.001;function $Q({duration:t=Et.duration,bounce:n=Et.bounce,velocity:r=Et.velocity,mass:s=Et.mass}){let a,i,l=1-n;l=Ja(Et.minDamping,Et.maxDamping,l),t=Ja(Et.minDuration,Et.maxDuration,rs(t)),l<1?(a=u=>{const f=u*l,p=f*t,h=f-r,m=tj(u,l),g=Math.exp(-p);return _0-h/m*g},i=u=>{const p=u*l*t,h=p*r+r,m=Math.pow(l,2)*Math.pow(u,2)*t,g=Math.exp(-p),y=tj(Math.pow(u,2),l);return(-a(u)+_0>0?-1:1)*((h-m)*g)/y}):(a=u=>{const f=Math.exp(-u*t),p=(u-r)*t+1;return-_0+f*p},i=u=>{const f=Math.exp(-u*t),p=(r-u)*(t*t);return f*p});const c=5/t,d=BQ(a,i,c);if(t=ca(t),isNaN(d))return{stiffness:Et.stiffness,damping:Et.damping,duration:t};{const u=Math.pow(d,2)*s;return{stiffness:u,damping:l*2*Math.sqrt(s*u),duration:t}}}const FQ=12;function BQ(t,n,r){let s=r;for(let a=1;a<FQ;a++)s=s-t(s)/n(s);return s}function tj(t,n){return t*Math.sqrt(1-n*n)}const zQ=["duration","bounce"],VQ=["stiffness","damping","mass"];function sA(t,n){return n.some(r=>t[r]!==void 0)}function UQ(t){let n={velocity:Et.velocity,stiffness:Et.stiffness,damping:Et.damping,mass:Et.mass,isResolvedFromDuration:!1,...t};if(!sA(t,VQ)&&sA(t,zQ))if(t.visualDuration){const r=t.visualDuration,s=2*Math.PI/(r*1.2),a=s*s,i=2*Ja(.05,1,1-(t.bounce||0))*Math.sqrt(a);n={...n,mass:Et.mass,stiffness:a,damping:i}}else{const r=$Q(t);n={...n,...r,mass:Et.mass},n.isResolvedFromDuration=!0}return n}function gx(t=Et.visualDuration,n=Et.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:s,restDelta:a}=r;const i=r.keyframes[0],l=r.keyframes[r.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:u,mass:f,duration:p,velocity:h,isResolvedFromDuration:m}=UQ({...r,velocity:-rs(r.velocity||0)}),g=h||0,y=u/(2*Math.sqrt(d*f)),v=l-i,b=rs(Math.sqrt(d/f)),w=Math.abs(v)<5;s||(s=w?Et.restSpeed.granular:Et.restSpeed.default),a||(a=w?Et.restDelta.granular:Et.restDelta.default);let j;if(y<1){const S=tj(b,y);j=_=>{const k=Math.exp(-y*b*_);return l-k*((g+y*b*v)/S*Math.sin(S*_)+v*Math.cos(S*_))}}else if(y===1)j=S=>l-Math.exp(-b*S)*(v+(g+b*v)*S);else{const S=b*Math.sqrt(y*y-1);j=_=>{const k=Math.exp(-y*b*_),C=Math.min(S*_,300);return l-k*((g+y*b*v)*Math.sinh(C)+S*v*Math.cosh(C))/S}}const N={calculatedDuration:m&&p||null,next:S=>{const _=j(S);if(m)c.done=S>=p;else{let k=S===0?g:0;y<1&&(k=S===0?ca(g):W3(j,S,_));const C=Math.abs(k)<=s,P=Math.abs(l-_)<=a;c.done=C&&P}return c.value=c.done?l:_,c},toString:()=>{const S=Math.min(yS(N),xx),_=H3(k=>N.next(S*k).value,S,30);return S+"ms "+_},toTransition:()=>{}};return N}gx.applyToOptions=t=>{const n=DQ(t,100,gx);return t.ease=n.ease,t.duration=ca(n.duration),t.type="keyframes",t};function nj({keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:c,max:d,restDelta:u=.5,restSpeed:f}){const p=t[0],h={done:!1,value:p},m=C=>c!==void 0&&C<c||d!==void 0&&C>d,g=C=>c===void 0?d:d===void 0||Math.abs(c-C)<Math.abs(d-C)?c:d;let y=r*n;const v=p+y,b=l===void 0?v:l(v);b!==v&&(y=b-p);const w=C=>-y*Math.exp(-C/s),j=C=>b+w(C),N=C=>{const P=w(C),E=j(C);h.done=Math.abs(P)<=u,h.value=h.done?b:E};let S,_;const k=C=>{m(h.value)&&(S=C,_=gx({keyframes:[h.value,g(h.value)],velocity:W3(j,C,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:f}))};return k(0),{calculatedDuration:null,next:C=>{let P=!1;return!_&&S===void 0&&(P=!0,N(C),k(C)),S!==void 0&&C>=S?_.next(C-S):(!P&&N(C),h)}}}function HQ(t,n,r){const s=[],a=r||Qa.mix||U3,i=t.length-1;for(let l=0;l<i;l++){let c=a(t[l],t[l+1]);if(n){const d=Array.isArray(n)?n[l]||is:n;c=gp(d,c)}s.push(c)}return s}function WQ(t,n,{clamp:r=!0,ease:s,mixer:a}={}){const i=t.length;if(lS(i===n.length),i===1)return()=>n[0];if(i===2&&n[0]===n[1])return()=>n[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),n=[...n].reverse());const c=HQ(n,s,a),d=c.length,u=f=>{if(l&&f<t[0])return n[0];let p=0;if(d>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const h=Af(t[p],t[p+1],f);return c[p](h)};return r?f=>u(Ja(t[0],t[i-1],f)):u}function KQ(t,n){const r=t[t.length-1];for(let s=1;s<=n;s++){const a=Af(0,n,s);t.push(wt(r,1,a))}}function qQ(t){const n=[0];return KQ(n,t.length-1),n}function GQ(t,n){return t.map(r=>r*n)}function YQ(t,n){return t.map(()=>n||O3).splice(0,t.length-1)}function Qu({duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}){const a=iQ(s)?s.map(ZP):ZP(s),i={done:!1,value:n[0]},l=GQ(r&&r.length===n.length?r:qQ(n),t),c=WQ(l,n,{ease:Array.isArray(a)?a:YQ(n,a)});return{calculatedDuration:t,next:d=>(i.value=c(d),i.done=d>=t,i)}}const XQ=t=>t!==null;function vS(t,{repeat:n,repeatType:r="loop"},s,a=1){const i=t.filter(XQ),c=a<0||n&&r!=="loop"&&n%2===1?0:i.length-1;return!c||s===void 0?i[c]:s}const JQ={decay:nj,inertia:nj,tween:Qu,keyframes:Qu,spring:gx};function K3(t){typeof t.type=="string"&&(t.type=JQ[t.type])}class bS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,r){return this.finished.then(n,r)}}const QQ=t=>t/100;class wS extends bS{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,a;const{motionValue:r}=this.options;r&&r.updatedAt!==pr.now()&&this.tick(pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(s=this.options).onStop)==null||a.call(s))},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;K3(n);const{type:r=Qu,repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=n;let{keyframes:c}=n;const d=r||Qu;d!==Qu&&typeof c[0]!="number"&&(this.mixKeyframes=gp(QQ,U3(c[0],c[1])),c=[0,100]);const u=d({...n,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...n,keyframes:[...c].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=yS(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=u}updateTime(n){const r=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(n,r=!1){const{generator:s,totalDuration:a,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:f,repeat:p,repeatType:h,repeatDelay:m,type:g,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-a/this.speed,this.startTime)),r?this.currentTime=n:this.updateTime(n);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>a;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,N=s;if(p){const C=Math.min(this.currentTime,a)/c;let P=Math.floor(C),E=C%1;!E&&C>=1&&(E=1),E===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(h==="reverse"?(E=1-E,m&&(E-=m/c)):h==="mirror"&&(N=l)),j=Ja(0,1,E)*c}const S=w?{done:!1,value:f[0]}:N.next(j);i&&(S.value=i(S.value));let{done:_}=S;!w&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return k&&g!==nj&&(S.value=vS(f,this.options,v,this.speed)),y&&y(S.value),k&&this.finish(),S}then(n,r){return this.finished.then(n,r)}get duration(){return rs(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+rs(n)}get time(){return rs(this.currentTime)}set time(n){var r;n=ca(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(pr.now());const r=this.playbackSpeed!==n;this.playbackSpeed=n,r&&(this.time=rs(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:n=IQ,startTime:r}=this.options;this.driver||(this.driver=n(l=>this.tick(l))),(i=(a=this.options).onPlay)==null||i.call(a);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var n,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(n=this.options).onComplete)==null||r.call(n)}cancel(){var n,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(n=this.options).onCancel)==null||r.call(n)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),n.observe(this)}}function ZQ(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const Zo=t=>t*180/Math.PI,rj=t=>{const n=Zo(Math.atan2(t[1],t[0]));return sj(n)},eZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:rj,rotateZ:rj,skewX:t=>Zo(Math.atan(t[1])),skewY:t=>Zo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},sj=t=>(t=t%360,t<0&&(t+=360),t),aA=rj,iA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),oA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iA,scaleY:oA,scale:t=>(iA(t)+oA(t))/2,rotateX:t=>sj(Zo(Math.atan2(t[6],t[5]))),rotateY:t=>sj(Zo(Math.atan2(-t[2],t[0]))),rotateZ:aA,rotate:aA,skewX:t=>Zo(Math.atan(t[4])),skewY:t=>Zo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function aj(t){return t.includes("scale")?1:0}function ij(t,n){if(!t||t==="none")return aj(n);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(r)s=tZ,a=r;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=eZ,a=c}if(!a)return aj(n);const i=s[n],l=a[1].split(",").map(rZ);return typeof i=="function"?i(l):l[i]}const nZ=(t,n)=>{const{transform:r="none"}=getComputedStyle(t);return ij(r,n)};function rZ(t){return parseFloat(t.trim())}const Id=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dd=new Set(Id),lA=t=>t===Rd||t===Me,sZ=new Set(["x","y","z"]),aZ=Id.filter(t=>!sZ.has(t));function iZ(t){const n=[];return aZ.forEach(r=>{const s=t.getValue(r);s!==void 0&&(n.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),n}const ol={width:({x:t},{paddingLeft:n="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(n)-parseFloat(r),height:({y:t},{paddingTop:n="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(n)-parseFloat(r),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>ij(n,"x"),y:(t,{transform:n})=>ij(n,"y")};ol.translateX=ol.x;ol.translateY=ol.y;const ll=new Set;let oj=!1,lj=!1,cj=!1;function q3(){if(lj){const t=Array.from(ll).filter(s=>s.needsMeasurement),n=new Set(t.map(s=>s.element)),r=new Map;n.forEach(s=>{const a=iZ(s);a.length&&(r.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),n.forEach(s=>{s.render();const a=r.get(s);a&&a.forEach(([i,l])=>{var c;(c=s.getValue(i))==null||c.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}lj=!1,oj=!1,ll.forEach(t=>t.complete(cj)),ll.clear()}function G3(){ll.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lj=!0)})}function oZ(){cj=!0,G3(),q3(),cj=!1}class jS{constructor(n,r,s,a,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=r,this.name=s,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ll.add(this),oj||(oj=!0,pt.read(G3),pt.resolveKeyframes(q3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:r,element:s,motionValue:a}=this;if(n[0]===null){const i=a==null?void 0:a.get(),l=n[n.length-1];if(i!==void 0)n[0]=i;else if(s&&r){const c=s.readValue(r,l);c!=null&&(n[0]=c)}n[0]===void 0&&(n[0]=l),a&&i===void 0&&a.set(n[0])}ZQ(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),ll.delete(this)}cancel(){this.state==="scheduled"&&(ll.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lZ=t=>t.startsWith("--");function cZ(t,n,r){lZ(n)?t.style.setProperty(n,r):t.style[n]=r}const dZ=cS(()=>window.ScrollTimeline!==void 0),uZ={};function fZ(t,n){const r=cS(t);return()=>uZ[n]??r()}const Y3=fZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ou=([t,n,r,s])=>`cubic-bezier(${t}, ${n}, ${r}, ${s})`,cA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ou([0,.65,.55,1]),circOut:Ou([.55,0,1,.45]),backIn:Ou([.31,.01,.66,-.59]),backOut:Ou([.33,1.53,.69,.99])};function X3(t,n){if(t)return typeof t=="function"?Y3()?H3(t,n):"ease-out":R3(t)?Ou(t):Array.isArray(t)?t.map(r=>X3(r,n)||cA.easeOut):cA[t]}function pZ(t,n,r,{delay:s=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:c="easeOut",times:d}={},u=void 0){const f={[n]:r};d&&(f.offset=d);const p=X3(c,a);Array.isArray(p)&&(f.easing=p);const h={delay:s,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(f,h)}function J3(t){return typeof t=="function"&&"applyToOptions"in t}function hZ({type:t,...n}){return J3(t)&&Y3()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class mZ extends bS{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:r,name:s,keyframes:a,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=n;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=n,lS(typeof n.type!="string");const u=hZ(n);this.animation=pZ(r,s,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const f=vS(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):cZ(r,s,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,r;(r=(n=this.animation).finish)==null||r.call(n)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r;this.isPseudoElement||(r=(n=this.animation).commitStyles)==null||r.call(n)}get duration(){var r,s;const n=((s=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:s.call(r).duration)||0;return rs(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+rs(n)}get time(){return rs(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=ca(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:r}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&dZ()?(this.animation.timeline=n,is):r(this)}}const Q3={anticipate:E3,backInOut:A3,circInOut:M3};function xZ(t){return t in Q3}function gZ(t){typeof t.ease=="string"&&xZ(t.ease)&&(t.ease=Q3[t.ease])}const dA=10;class yZ extends mZ{constructor(n){gZ(n),K3(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:r,onUpdate:s,onComplete:a,element:i,...l}=this.options;if(!r)return;if(n!==void 0){r.set(n);return}const c=new wS({...l,autoplay:!1}),d=ca(this.finishedTime??this.time);r.setWithVelocity(c.sample(d-dA).value,c.sample(d).value,dA),c.stop()}}const uA=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(lo.test(t)||t==="0")&&!t.startsWith("url("));function vZ(t){const n=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function bZ(t,n,r,s){const a=t[0];if(a===null)return!1;if(n==="display"||n==="visibility")return!0;const i=t[t.length-1],l=uA(a,n),c=uA(i,n);return!l||!c?!1:vZ(t)||(r==="spring"||J3(r))&&s}function dj(t){t.duration=0,t.type="keyframes"}const wZ=new Set(["opacity","clipPath","filter","transform"]),jZ=cS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NZ(t){var f;const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:i,type:l}=t;if(!(((f=n==null?void 0:n.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:u}=n.owner.getProps();return jZ()&&r&&wZ.has(r)&&(r!=="transform"||!u)&&!d&&!s&&a!=="mirror"&&i!==0&&l!=="inertia"}const SZ=40;class kZ extends bS{constructor({autoplay:n=!0,delay:r=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",keyframes:c,name:d,motionValue:u,element:f,...p}){var g;super(),this.stop=()=>{var y,v;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=pr.now();const h={autoplay:n,delay:r,type:s,repeat:a,repeatDelay:i,repeatType:l,name:d,motionValue:u,element:f,...p},m=(f==null?void 0:f.KeyframeResolver)||jS;this.keyframeResolver=new m(c,(y,v,b)=>this.onKeyframesResolved(y,v,h,!b),d,u,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(n,r,s,a){this.keyframeResolver=void 0;const{name:i,type:l,velocity:c,delay:d,isHandoff:u,onUpdate:f}=s;this.resolvedAt=pr.now(),bZ(n,i,l,c)||((Qa.instantAnimations||!d)&&(f==null||f(vS(n,s,r))),n[0]=n[n.length-1],dj(s),s.repeat=0);const h={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>SZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...s,keyframes:n},m=!u&&NZ(h)?new yZ({...h,element:h.motionValue.owner.current}):new wS(h);m.finished.then(()=>this.notifyFinished()).catch(is),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(n,r){return this.finished.finally(n).then(()=>{})}get animation(){var n;return this._animation||((n=this.keyframeResolver)==null||n.resume(),oZ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var n;this._animation&&this.animation.cancel(),(n=this.keyframeResolver)==null||n.cancel()}}const CZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _Z(t){const n=CZ.exec(t);if(!n)return[,];const[,r,s,a]=n;return[`--${r??s}`,a]}function Z3(t,n,r=1){const[s,a]=_Z(t);if(!s)return;const i=window.getComputedStyle(n).getPropertyValue(s);if(i){const l=i.trim();return w3(l)?parseFloat(l):l}return hS(a)?Z3(a,n,r+1):a}function NS(t,n){return(t==null?void 0:t[n])??(t==null?void 0:t.default)??t}const eL=new Set(["width","height","top","left","right","bottom",...Id]),PZ={test:t=>t==="auto",parse:t=>t},tL=t=>n=>n.test(t),nL=[Rd,Me,da,_i,vQ,yQ,PZ],fA=t=>nL.find(tL(t));function AZ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||N3(t):!0}const EZ=new Set(["brightness","contrast","saturate","opacity"]);function TZ(t){const[n,r]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[s]=r.match(mS)||[];if(!s)return t;const a=r.replace(s,"");let i=EZ.has(n)?1:0;return s!==r&&(i*=100),n+"("+i+a+")"}const MZ=/\b([a-z-]*)\(.*?\)/gu,uj={...lo,getAnimatableNone:t=>{const n=t.match(MZ);return n?n.map(TZ).join(" "):t}},pA={...Rd,transform:Math.round},OZ={rotate:_i,rotateX:_i,rotateY:_i,rotateZ:_i,scale:xh,scaleX:xh,scaleY:xh,scaleZ:xh,skew:_i,skewX:_i,skewY:_i,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:Ef,originX:eA,originY:eA,originZ:Me},SS={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me,...OZ,zIndex:pA,fillOpacity:Ef,strokeOpacity:Ef,numOctaves:pA},RZ={...SS,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:uj,WebkitFilter:uj},rL=t=>RZ[t];function sL(t,n){let r=rL(t);return r!==uj&&(r=lo),r.getAnimatableNone?r.getAnimatableNone(n):void 0}const IZ=new Set(["auto","none","0"]);function DZ(t,n,r){let s=0,a;for(;s<t.length&&!a;){const i=t[s];typeof i=="string"&&!IZ.has(i)&&Tf(i).values.length&&(a=t[s]),s++}if(a&&r)for(const i of n)t[i]=sL(r,a)}class LZ extends jS{constructor(n,r,s,a,i){super(n,r,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<n.length;d++){let u=n[d];if(typeof u=="string"&&(u=u.trim(),hS(u))){const f=Z3(u,r.current);f!==void 0&&(n[d]=f),d===n.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!eL.has(s)||n.length!==2)return;const[a,i]=n,l=fA(a),c=fA(i);if(l!==c)if(lA(l)&&lA(c))for(let d=0;d<n.length;d++){const u=n[d];typeof u=="string"&&(n[d]=parseFloat(u))}else ol[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:r}=this,s=[];for(let a=0;a<n.length;a++)(n[a]===null||AZ(n[a]))&&s.push(a);s.length&&DZ(n,s,r)}measureInitialState(){const{element:n,unresolvedKeyframes:r,name:s}=this;if(!n||!n.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ol[s](n.measureViewportBox(),window.getComputedStyle(n.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&n.getValue(s,a).jump(a,!1)}measureEndState(){var c;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=ol[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,u])=>{n.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function $Z(t,n,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=(r==null?void 0:r[t])??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const aL=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function iL(t){return j3(t)&&"offsetHeight"in t}const hA=30,FZ=t=>!isNaN(parseFloat(t));class BZ{constructor(n,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var i;const a=pr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=r.owner}setCurrent(n){this.current=n,this.updatedAt=pr.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=FZ(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,r){this.events[n]||(this.events[n]=new dS);const s=this.events[n].add(r);return n==="change"?()=>{s(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,r){this.passiveEffect=n,this.stopPassiveEffect=r}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-s}jump(n,r=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var n;(n=this.events.change)==null||n.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>hA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,hA);return S3(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(n){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=n(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n,r;(n=this.dependents)==null||n.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ld(t,n){return new BZ(t,n)}const{schedule:kS}=I3(queueMicrotask,!1),bs={x:!1,y:!1};function oL(){return bs.x||bs.y}function zZ(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}function lL(t,n){const r=$Z(t),s=new AbortController,a={passive:!0,...n,signal:s.signal};return[r,a,()=>s.abort()]}function mA(t){return!(t.pointerType==="touch"||oL())}function VZ(t,n,r={}){const[s,a,i]=lL(t,r),l=c=>{if(!mA(c))return;const{target:d}=c,u=n(d,c);if(typeof u!="function"||!d)return;const f=p=>{mA(p)&&(u(p),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,a)};return s.forEach(c=>{c.addEventListener("pointerenter",l,a)}),i}const cL=(t,n)=>n?t===n?!0:cL(t,n.parentElement):!1,CS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,UZ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HZ(t){return UZ.has(t.tagName)||t.tabIndex!==-1}const wm=new WeakSet;function xA(t){return n=>{n.key==="Enter"&&t(n)}}function P0(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const WZ=(t,n)=>{const r=t.currentTarget;if(!r)return;const s=xA(()=>{if(wm.has(r))return;P0(r,"down");const a=xA(()=>{P0(r,"up")}),i=()=>P0(r,"cancel");r.addEventListener("keyup",a,n),r.addEventListener("blur",i,n)});r.addEventListener("keydown",s,n),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),n)};function gA(t){return CS(t)&&!oL()}function KZ(t,n,r={}){const[s,a,i]=lL(t,r),l=c=>{const d=c.currentTarget;if(!gA(c))return;wm.add(d);const u=n(d,c),f=(m,g)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",h),wm.has(d)&&wm.delete(d),gA(m)&&typeof u=="function"&&u(m,{success:g})},p=m=>{f(m,d===window||d===document||r.useGlobalTarget||cL(d,m.target))},h=m=>{f(m,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",h,a)};return s.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),iL(c)&&(c.addEventListener("focus",u=>WZ(u,a)),!HZ(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function dL(t){return j3(t)&&"ownerSVGElement"in t}function qZ(t){return dL(t)&&t.tagName==="svg"}const $n=t=>!!(t&&t.getVelocity),GZ=[...nL,zt,lo],YZ=t=>GZ.find(tL(t)),_S=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function yA(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function XZ(...t){return n=>{let r=!1;const s=t.map(a=>{const i=yA(a,n);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():yA(t[a],null)}}}}function JZ(...t){return x.useCallback(XZ(...t),t)}class QZ extends x.Component{getSnapshotBeforeUpdate(n){const r=this.props.childRef.current;if(r&&n.isPresent&&!this.props.isPresent){const s=r.offsetParent,a=iL(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZZ({children:t,isPresent:n,anchorX:r,root:s}){const a=x.useId(),i=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=x.useContext(_S),d=JZ(i,t==null?void 0:t.ref);return x.useInsertionEffect(()=>{const{width:u,height:f,top:p,left:h,right:m}=l.current;if(n||!i.current||!u||!f)return;const g=r==="left"?`left: ${h}`:`right: ${m}`;i.current.dataset.motionPopId=a;const y=document.createElement("style");c&&(y.nonce=c);const v=s??document.head;return v.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${g}px !important;
            top: ${p}px !important;
          }
        `),()=>{v.contains(y)&&v.removeChild(y)}},[n]),o.jsx(QZ,{isPresent:n,childRef:i,sizeRef:l,children:x.cloneElement(t,{ref:d})})}const eee=({children:t,initial:n,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:l,anchorX:c,root:d})=>{const u=sS(tee),f=x.useId();let p=!0,h=x.useMemo(()=>(p=!1,{id:f,initial:n,isPresent:r,custom:a,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;s&&s()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,s]);return i&&p&&(h={...h}),x.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[r]),x.useEffect(()=>{!r&&!u.size&&s&&s()},[r]),l==="popLayout"&&(t=o.jsx(ZZ,{isPresent:r,anchorX:c,root:d,children:t})),o.jsx(cy.Provider,{value:h,children:t})};function tee(){return new Map}function uL(t=!0){const n=x.useContext(cy);if(n===null)return[!0,null];const{isPresent:r,onExitComplete:s,register:a}=n,i=x.useId();x.useEffect(()=>{if(t)return a(i)},[t]);const l=x.useCallback(()=>t&&s&&s(i),[i,s,t]);return!r&&s?[!1,l]:[!0]}const gh=t=>t.key||"";function vA(t){const n=[];return x.Children.forEach(t,r=>{x.isValidElement(r)&&n.push(r)}),n}const Ds=({children:t,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[u,f]=uL(l),p=x.useMemo(()=>vA(t),[t]),h=l&&!u?[]:p.map(gh),m=x.useRef(!0),g=x.useRef(p),y=sS(()=>new Map),[v,b]=x.useState(p),[w,j]=x.useState(p);b3(()=>{m.current=!1,g.current=p;for(let _=0;_<w.length;_++){const k=gh(w[_]);h.includes(k)?y.delete(k):y.get(k)!==!0&&y.set(k,!1)}},[w,h.length,h.join("-")]);const N=[];if(p!==v){let _=[...p];for(let k=0;k<w.length;k++){const C=w[k],P=gh(C);h.includes(P)||(_.splice(k,0,C),N.push(C))}return i==="wait"&&N.length&&(_=N),j(vA(_)),b(p),null}const{forceRender:S}=x.useContext(rS);return o.jsx(o.Fragment,{children:w.map(_=>{const k=gh(_),C=l&&!u?!1:p===w||h.includes(k),P=()=>{if(y.has(k))y.set(k,!0);else return;let E=!0;y.forEach(M=>{M||(E=!1)}),E&&(S==null||S(),j(g.current),l&&(f==null||f()),s&&s())};return o.jsx(eee,{isPresent:C,initial:!m.current||r?void 0:!1,custom:n,presenceAffectsLayout:a,mode:i,root:d,onExitComplete:C?void 0:P,anchorX:c,children:_},k)})})},fL=x.createContext({strict:!1}),bA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cd={};for(const t in bA)cd[t]={isEnabled:n=>bA[t].some(r=>!!n[r])};function nee(t){for(const n in t)cd[n]={...cd[n],...t[n]}}const ree=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ree.has(t)}let pL=t=>!yx(t);function see(t){typeof t=="function"&&(pL=n=>n.startsWith("on")?!yx(n):t(n))}try{see(require("@emotion/is-prop-valid").default)}catch{}function aee(t,n,r){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(pL(a)||r===!0&&yx(a)||!n&&!yx(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const dy=x.createContext({});function uy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Mf(t){return typeof t=="string"||Array.isArray(t)}const PS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AS=["initial",...PS];function fy(t){return uy(t.animate)||AS.some(n=>Mf(t[n]))}function hL(t){return!!(fy(t)||t.variants)}function iee(t,n){if(fy(t)){const{initial:r,animate:s}=t;return{initial:r===!1||Mf(r)?r:void 0,animate:Mf(s)?s:void 0}}return t.inherit!==!1?n:{}}function oee(t){const{initial:n,animate:r}=iee(t,x.useContext(dy));return x.useMemo(()=>({initial:n,animate:r}),[wA(n),wA(r)])}function wA(t){return Array.isArray(t)?t.join(" "):t}const Of={};function lee(t){for(const n in t)Of[n]=t[n],pS(n)&&(Of[n].isCSSVariable=!0)}function mL(t,{layout:n,layoutId:r}){return Dd.has(t)||t.startsWith("origin")||(n||r!==void 0)&&(!!Of[t]||t==="opacity")}const cee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dee=Id.length;function uee(t,n,r){let s="",a=!0;for(let i=0;i<dee;i++){const l=Id[i],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||r){const u=aL(c,SS[l]);if(!d){a=!1;const f=cee[l]||l;s+=`${f}(${u}) `}r&&(n[l]=u)}}return s=s.trim(),r?s=r(n,a?"":s):a&&(s="none"),s}function ES(t,n,r){const{style:s,vars:a,transformOrigin:i}=t;let l=!1,c=!1;for(const d in n){const u=n[d];if(Dd.has(d)){l=!0;continue}else if(pS(d)){a[d]=u;continue}else{const f=aL(u,SS[d]);d.startsWith("origin")?(c=!0,i[d]=f):s[d]=f}}if(n.transform||(l||r?s.transform=uee(n,t.transform,r):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:u="50%",originZ:f=0}=i;s.transformOrigin=`${d} ${u} ${f}`}}const TS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xL(t,n,r){for(const s in n)!$n(n[s])&&!mL(s,r)&&(t[s]=n[s])}function fee({transformTemplate:t},n){return x.useMemo(()=>{const r=TS();return ES(r,n,t),Object.assign({},r.vars,r.style)},[n])}function pee(t,n){const r=t.style||{},s={};return xL(s,r,t),Object.assign(s,fee(t,n)),s}function hee(t,n){const r={},s=pee(t,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const mee={offset:"stroke-dashoffset",array:"stroke-dasharray"},xee={offset:"strokeDashoffset",array:"strokeDasharray"};function gee(t,n,r=1,s=0,a=!0){t.pathLength=1;const i=a?mee:xee;t[i.offset]=Me.transform(-s);const l=Me.transform(n),c=Me.transform(r);t[i.array]=`${l} ${c}`}function gL(t,{attrX:n,attrY:r,attrScale:s,pathLength:a,pathSpacing:i=1,pathOffset:l=0,...c},d,u,f){if(ES(t,c,u),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:h}=t;p.transform&&(h.transform=p.transform,delete p.transform),(h.transform||p.transformOrigin)&&(h.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),h.transform&&(h.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox),n!==void 0&&(p.x=n),r!==void 0&&(p.y=r),s!==void 0&&(p.scale=s),a!==void 0&&gee(p,a,i,l,!1)}const yL=()=>({...TS(),attrs:{}}),vL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yee(t,n,r,s){const a=x.useMemo(()=>{const i=yL();return gL(i,n,vL(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[n]);if(t.style){const i={};xL(i,t.style,t),a.style={...i,...a.style}}return a}const vee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function MS(t){return typeof t!="string"||t.includes("-")?!1:!!(vee.indexOf(t)>-1||/[A-Z]/u.test(t))}function bee(t,n,r,{latestValues:s},a,i=!1){const c=(MS(t)?yee:hee)(n,s,a,t),d=aee(n,typeof t=="string",i),u=t!==x.Fragment?{...d,...c,ref:r}:{},{children:f}=n,p=x.useMemo(()=>$n(f)?f.get():f,[f]);return x.createElement(t,{...u,children:p})}function jA(t){const n=[{},{}];return t==null||t.values.forEach((r,s)=>{n[0][s]=r.get(),n[1][s]=r.getVelocity()}),n}function OS(t,n,r,s){if(typeof n=="function"){const[a,i]=jA(s);n=n(r!==void 0?r:t.custom,a,i)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[a,i]=jA(s);n=n(r!==void 0?r:t.custom,a,i)}return n}function jm(t){return $n(t)?t.get():t}function wee({scrapeMotionValuesFromProps:t,createRenderState:n},r,s,a){return{latestValues:jee(r,s,a,t),renderState:n()}}function jee(t,n,r,s){const a={},i=s(t,{});for(const h in i)a[h]=jm(i[h]);let{initial:l,animate:c}=t;const d=fy(t),u=hL(t);n&&u&&!d&&t.inherit!==!1&&(l===void 0&&(l=n.initial),c===void 0&&(c=n.animate));let f=r?r.initial===!1:!1;f=f||l===!1;const p=f?c:l;if(p&&typeof p!="boolean"&&!uy(p)){const h=Array.isArray(p)?p:[p];for(let m=0;m<h.length;m++){const g=OS(t,h[m]);if(g){const{transitionEnd:y,transition:v,...b}=g;for(const w in b){let j=b[w];if(Array.isArray(j)){const N=f?j.length-1:0;j=j[N]}j!==null&&(a[w]=j)}for(const w in y)a[w]=y[w]}}}return a}const bL=t=>(n,r)=>{const s=x.useContext(dy),a=x.useContext(cy),i=()=>wee(t,n,s,a);return r?i():sS(i)};function RS(t,n,r){var i;const{style:s}=t,a={};for(const l in s)($n(s[l])||n.style&&$n(n.style[l])||mL(l,t)||((i=r==null?void 0:r.getValue(l))==null?void 0:i.liveStyle)!==void 0)&&(a[l]=s[l]);return a}const Nee=bL({scrapeMotionValuesFromProps:RS,createRenderState:TS});function wL(t,n,r){const s=RS(t,n,r);for(const a in t)if($n(t[a])||$n(n[a])){const i=Id.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=t[a]}return s}const See=bL({scrapeMotionValuesFromProps:wL,createRenderState:yL}),kee=Symbol.for("motionComponentSymbol");function Cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Cee(t,n,r){return x.useCallback(s=>{s&&t.onMount&&t.onMount(s),n&&(s?n.mount(s):n.unmount()),r&&(typeof r=="function"?r(s):Cc(r)&&(r.current=s))},[n])}const IS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_ee="framerAppearId",jL="data-"+IS(_ee),NL=x.createContext({});function Pee(t,n,r,s,a){var y,v;const{visualElement:i}=x.useContext(dy),l=x.useContext(fL),c=x.useContext(cy),d=x.useContext(_S).reducedMotion,u=x.useRef(null);s=s||l.renderer,!u.current&&s&&(u.current=s(t,{visualState:n,parent:i,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=u.current,p=x.useContext(NL);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&Aee(u.current,r,a,p);const h=x.useRef(!1);x.useInsertionEffect(()=>{f&&h.current&&f.update(r,c)});const m=r[jL],g=x.useRef(!!m&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,m))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,m)));return b3(()=>{f&&(h.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),g.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,m)}),g.current=!1),f.enteringChildren=void 0)}),f}function Aee(t,n,r,s){const{layoutId:a,layout:i,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:u,layoutCrossfade:f}=n;t.projection=new r(t.latestValues,n["data-framer-portal-id"]?void 0:SL(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||c&&Cc(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:d,layoutRoot:u})}function SL(t){if(t)return t.options.allowProjection!==!1?t.projection:SL(t.parent)}function A0(t,{forwardMotionProps:n=!1}={},r,s){r&&nee(r);const a=MS(t)?See:Nee;function i(c,d){let u;const f={...x.useContext(_S),...c,layoutId:Eee(c)},{isStatic:p}=f,h=oee(c),m=a(c,p);if(!p&&aS){Tee();const g=Mee(f);u=g.MeasureLayout,h.visualElement=Pee(t,m,f,s,g.ProjectionNode)}return o.jsxs(dy.Provider,{value:h,children:[u&&h.visualElement?o.jsx(u,{visualElement:h.visualElement,...f}):null,bee(t,c,Cee(m,h.visualElement,d),m,p,n)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=x.forwardRef(i);return l[kee]=t,l}function Eee({layoutId:t}){const n=x.useContext(rS).id;return n&&t!==void 0?n+"-"+t:t}function Tee(t,n){x.useContext(fL).strict}function Mee(t){const{drag:n,layout:r}=cd;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Oee(t,n){if(typeof Proxy>"u")return A0;const r=new Map,s=(i,l)=>A0(i,l,t,n),a=(i,l)=>s(i,l);return new Proxy(a,{get:(i,l)=>l==="create"?s:(r.has(l)||r.set(l,A0(l,void 0,t,n)),r.get(l))})}function kL({top:t,left:n,right:r,bottom:s}){return{x:{min:n,max:r},y:{min:t,max:s}}}function Ree({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function Iee(t,n){if(!n)return t;const r=n({x:t.left,y:t.top}),s=n({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function E0(t){return t===void 0||t===1}function fj({scale:t,scaleX:n,scaleY:r}){return!E0(t)||!E0(n)||!E0(r)}function Uo(t){return fj(t)||CL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function CL(t){return NA(t.x)||NA(t.y)}function NA(t){return t&&t!=="0%"}function vx(t,n,r){const s=t-r,a=n*s;return r+a}function SA(t,n,r,s,a){return a!==void 0&&(t=vx(t,a,s)),vx(t,r,s)+n}function pj(t,n=0,r=1,s,a){t.min=SA(t.min,n,r,s,a),t.max=SA(t.max,n,r,s,a)}function _L(t,{x:n,y:r}){pj(t.x,n.translate,n.scale,n.originPoint),pj(t.y,r.translate,r.scale,r.originPoint)}const kA=.999999999999,CA=1.0000000000001;function Dee(t,n,r,s=!1){const a=r.length;if(!a)return;n.x=n.y=1;let i,l;for(let c=0;c<a;c++){i=r[c],l=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Pc(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(n.x*=l.x.scale,n.y*=l.y.scale,_L(t,l)),s&&Uo(i.latestValues)&&Pc(t,i.latestValues))}n.x<CA&&n.x>kA&&(n.x=1),n.y<CA&&n.y>kA&&(n.y=1)}function _c(t,n){t.min=t.min+n,t.max=t.max+n}function _A(t,n,r,s,a=.5){const i=wt(t.min,t.max,a);pj(t,n,r,i,s)}function Pc(t,n){_A(t.x,n.x,n.scaleX,n.scale,n.originX),_A(t.y,n.y,n.scaleY,n.scale,n.originY)}function PL(t,n){return kL(Iee(t.getBoundingClientRect(),n))}function Lee(t,n,r){const s=PL(t,r),{scroll:a}=n;return a&&(_c(s.x,a.offset.x),_c(s.y,a.offset.y)),s}const PA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ac=()=>({x:PA(),y:PA()}),AA=()=>({min:0,max:0}),It=()=>({x:AA(),y:AA()}),hj={current:null},AL={current:!1};function $ee(){if(AL.current=!0,!!aS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>hj.current=t.matches;t.addEventListener("change",n),n()}else hj.current=!1}const Fee=new WeakMap;function Bee(t,n,r){for(const s in n){const a=n[s],i=r[s];if($n(a))t.addValue(s,a);else if($n(i))t.addValue(s,ld(a,{owner:t}));else if(i!==a)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(s);t.addValue(s,ld(l!==void 0?l:a,{owner:t}))}}for(const s in r)n[s]===void 0&&t.removeValue(s);return n}const EA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zee{scrapeMotionValuesFromProps(n,r,s){return{}}constructor({parent:n,props:r,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=pr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,pt.render(this.render,!1,!0))};const{latestValues:d,renderState:u}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=u,this.parent=n,this.props=r,this.presenceContext=s,this.depth=n?n.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=fy(r),this.isVariantNode=hL(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in p){const m=p[h];d[h]!==void 0&&$n(m)&&m.set(d[h])}}mount(n){var r;this.current=n,Fee.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),AL.current||$ee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hj.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var n;this.projection&&this.projection.unmount(),oo(this.notifyUpdate),oo(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(n=this.parent)==null||n.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,r){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const s=Dd.has(n);s&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",l=>{this.latestValues[n]=l,this.props.onUpdate&&pt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,n,r)),this.valueSubscriptions.set(n,()=>{a(),i&&i(),r.owner&&r.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in cd){const r=cd[n];if(!r)continue;const{isEnabled:s,Feature:a}=r;if(!this.features[n]&&a&&s(this.props)&&(this.features[n]=new a(this)),this.features[n]){const i=this.features[n];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,r){this.latestValues[n]=r}update(n,r){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<EA.length;s++){const a=EA[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=n[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=Bee(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(n),()=>r.variantChildren.delete(n)}addValue(n,r){const s=this.values.get(n);r!==s&&(s&&this.removeValue(n),this.bindToMotionValue(n,r),this.values.set(n,r),this.latestValues[n]=r.get())}removeValue(n){this.values.delete(n);const r=this.valueSubscriptions.get(n);r&&(r(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,r){if(this.props.values&&this.props.values[n])return this.props.values[n];let s=this.values.get(n);return s===void 0&&r!==void 0&&(s=ld(r===null?void 0:r,{owner:this}),this.addValue(n,s)),s}readValue(n,r){let s=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return s!=null&&(typeof s=="string"&&(w3(s)||N3(s))?s=parseFloat(s):!YZ(s)&&lo.test(r)&&(s=sL(n,r)),this.setBaseTarget(n,$n(s)?s.get():s)),$n(s)?s.get():s}setBaseTarget(n,r){this.baseTarget[n]=r}getBaseTarget(n){var i;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=OS(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);l&&(s=l[n])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,n);return a!==void 0&&!$n(a)?a:this.initialValues[n]!==void 0&&s===void 0?void 0:this.baseTarget[n]}on(n,r){return this.events[n]||(this.events[n]=new dS),this.events[n].add(r)}notify(n,...r){this.events[n]&&this.events[n].notify(...r)}scheduleRenderMicrotask(){kS.render(this.render)}}class EL extends zee{constructor(){super(...arguments),this.KeyframeResolver=LZ}sortInstanceNodePosition(n,r){return n.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(n,r){return n.style?n.style[r]:void 0}removeValueFromRenderState(n,{vars:r,style:s}){delete r[n],delete s[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;$n(n)&&(this.childSubscription=n.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function TL(t,{style:n,vars:r},s,a){const i=t.style;let l;for(l in n)i[l]=n[l];a==null||a.applyProjectionStyles(i,s);for(l in r)i.setProperty(l,r[l])}function Vee(t){return window.getComputedStyle(t)}class Uee extends EL{constructor(){super(...arguments),this.type="html",this.renderInstance=TL}readValueFromInstance(n,r){var s;if(Dd.has(r))return(s=this.projection)!=null&&s.isProjecting?aj(r):nZ(n,r);{const a=Vee(n),i=(pS(r)?a.getPropertyValue(r):a[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(n,{transformPagePoint:r}){return PL(n,r)}build(n,r,s){ES(n,r,s.transformTemplate)}scrapeMotionValuesFromProps(n,r,s){return RS(n,r,s)}}const ML=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hee(t,n,r,s){TL(t,n,void 0,s);for(const a in n.attrs)t.setAttribute(ML.has(a)?a:IS(a),n.attrs[a])}class Wee extends EL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(n,r){return n[r]}readValueFromInstance(n,r){if(Dd.has(r)){const s=rL(r);return s&&s.default||0}return r=ML.has(r)?r:IS(r),n.getAttribute(r)}scrapeMotionValuesFromProps(n,r,s){return wL(n,r,s)}build(n,r,s){gL(n,r,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(n,r,s,a){Hee(n,r,s,a)}mount(n){this.isSVGTag=vL(n.tagName),super.mount(n)}}const Kee=(t,n)=>MS(t)?new Wee(n):new Uee(n,{allowProjection:t!==x.Fragment});function Hc(t,n,r){const s=t.getProps();return OS(s,n,r!==void 0?r:s.custom,t)}const mj=t=>Array.isArray(t);function qee(t,n,r){t.hasValue(n)?t.getValue(n).set(r):t.addValue(n,ld(r))}function Gee(t){return mj(t)?t[t.length-1]||0:t}function Yee(t,n){const r=Hc(t,n);let{transitionEnd:s={},transition:a={},...i}=r||{};i={...i,...s};for(const l in i){const c=Gee(i[l]);qee(t,l,c)}}function Xee(t){return!!($n(t)&&t.add)}function xj(t,n){const r=t.getValue("willChange");if(Xee(r))return r.add(n);if(!r&&Qa.WillChange){const s=new Qa.WillChange("auto");t.addValue("willChange",s),s.add(n)}}function OL(t){return t.props[jL]}const Jee=t=>t!==null;function Qee(t,{repeat:n,repeatType:r="loop"},s){const a=t.filter(Jee),i=n&&r!=="loop"&&n%2===1?0:a.length-1;return a[i]}const Zee={type:"spring",stiffness:500,damping:25,restSpeed:10},ete=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tte={type:"keyframes",duration:.8},nte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rte=(t,{keyframes:n})=>n.length>2?tte:Dd.has(t)?t.startsWith("scale")?ete(n[1]):Zee:nte;function ste({when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:c,from:d,elapsed:u,...f}){return!!Object.keys(f).length}const DS=(t,n,r,s={},a,i)=>l=>{const c=NS(s,t)||{},d=c.delay||s.delay||0;let{elapsed:u=0}=s;u=u-ca(d);const f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:n.getVelocity(),...c,delay:-u,onUpdate:h=>{n.set(h),c.onUpdate&&c.onUpdate(h)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:n,element:i?void 0:a};ste(c)||Object.assign(f,rte(t,f)),f.duration&&(f.duration=ca(f.duration)),f.repeatDelay&&(f.repeatDelay=ca(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(dj(f),f.delay===0&&(p=!0)),(Qa.instantAnimations||Qa.skipAnimations)&&(p=!0,dj(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,p&&!i&&n.get()!==void 0){const h=Qee(f.keyframes,c);if(h!==void 0){pt.update(()=>{f.onUpdate(h),f.onComplete()});return}}return c.isSync?new wS(f):new kZ(f)};function ate({protectedKeys:t,needsAnimating:n},r){const s=t.hasOwnProperty(r)&&n[r]!==!0;return n[r]=!1,s}function RL(t,n,{delay:r=0,transitionOverride:s,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:l,...c}=n;s&&(i=s);const d=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const f in c){const p=t.getValue(f,t.latestValues[f]??null),h=c[f];if(h===void 0||u&&ate(u,f))continue;const m={delay:r,...NS(i||{},f)},g=p.get();if(g!==void 0&&!p.isAnimating&&!Array.isArray(h)&&h===g&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const b=OL(t);if(b){const w=window.MotionHandoffAnimation(b,f,pt);w!==null&&(m.startTime=w,y=!0)}}xj(t,f),p.start(DS(f,p,h,t.shouldReduceMotion&&eL.has(f)?{type:!1}:m,t,y));const v=p.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{pt.update(()=>{l&&Yee(t,l)})}),d}function IL(t,n,r,s=0,a=1){const i=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(n),l=t.size,c=(l-1)*s;return typeof r=="function"?r(i,l):a===1?i*s:c-i*s}function gj(t,n,r={}){var d;const s=Hc(t,n,r.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(a=r.transitionOverride);const i=s?()=>Promise.all(RL(t,s,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:h}=a;return ite(t,n,u,f,p,h,r)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,f]=c==="beforeChildren"?[i,l]:[l,i];return u().then(()=>f())}else return Promise.all([i(),l(r.delay)])}function ite(t,n,r=0,s=0,a=0,i=1,l){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",n),c.push(gj(d,n,{...l,delay:r+(typeof s=="function"?0:s)+IL(t.variantChildren,d,s,a,i)}).then(()=>d.notify("AnimationComplete",n)));return Promise.all(c)}function ote(t,n,r={}){t.notify("AnimationStart",n);let s;if(Array.isArray(n)){const a=n.map(i=>gj(t,i,r));s=Promise.all(a)}else if(typeof n=="string")s=gj(t,n,r);else{const a=typeof n=="function"?Hc(t,n,r.custom):n;s=Promise.all(RL(t,a,r))}return s.then(()=>{t.notify("AnimationComplete",n)})}function DL(t,n){if(!Array.isArray(n))return!1;const r=n.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(n[s]!==t[s])return!1;return!0}const lte=AS.length;function LL(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?LL(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const n={};for(let r=0;r<lte;r++){const s=AS[r],a=t.props[s];(Mf(a)||a===!1)&&(n[s]=a)}return n}const cte=[...PS].reverse(),dte=PS.length;function ute(t){return n=>Promise.all(n.map(({animation:r,options:s})=>ote(t,r,s)))}function fte(t){let n=ute(t),r=TA(),s=!0;const a=d=>(u,f)=>{var h;const p=Hc(t,f,d==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:g,...y}=p;u={...u,...y,...g}}return u};function i(d){n=d(t)}function l(d){const{props:u}=t,f=LL(t.parent)||{},p=[],h=new Set;let m={},g=1/0;for(let v=0;v<dte;v++){const b=cte[v],w=r[b],j=u[b]!==void 0?u[b]:f[b],N=Mf(j),S=b===d?w.isActive:null;S===!1&&(g=v);let _=j===f[b]&&j!==u[b]&&N;if(_&&s&&t.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...m},!w.isActive&&S===null||!j&&!w.prevProp||uy(j)||typeof j=="boolean")continue;const k=pte(w.prevProp,j);let C=k||b===d&&w.isActive&&!_&&N||v>g&&N,P=!1;const E=Array.isArray(j)?j:[j];let M=E.reduce(a(b),{});S===!1&&(M={});const{prevResolvedValues:T={}}=w,A={...T,...M},R=L=>{C=!0,h.has(L)&&(P=!0,h.delete(L)),w.needsAnimating[L]=!0;const D=t.getValue(L);D&&(D.liveStyle=!1)};for(const L in A){const D=M[L],$=T[L];if(m.hasOwnProperty(L))continue;let F=!1;mj(D)&&mj($)?F=!DL(D,$):F=D!==$,F?D!=null?R(L):h.add(L):D!==void 0&&h.has(L)?R(L):w.protectedKeys[L]=!0}w.prevProp=j,w.prevResolvedValues=M,w.isActive&&(m={...m,...M}),s&&t.blockInitialAnimation&&(C=!1);const O=_&&k;C&&(!O||P)&&p.push(...E.map(L=>{const D={type:b};if(typeof L=="string"&&s&&!O&&t.manuallyAnimateOnMount&&t.parent){const{parent:$}=t,F=Hc($,L);if($.enteringChildren&&F){const{delayChildren:K}=F.transition||{};D.delay=IL($.enteringChildren,t,K)}}return{animation:L,options:D}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const b=Hc(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(v.transition=b.transition)}h.forEach(b=>{const w=t.getBaseTarget(b),j=t.getValue(b);j&&(j.liveStyle=!0),v[b]=w??null}),p.push({animation:v})}let y=!!p.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),s=!1,y?n(p):Promise.resolve()}function c(d,u){var p;if(r[d].isActive===u)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(d,u)}),r[d].isActive=u;const f=l(d);for(const h in r)r[h].protectedKeys={};return f}return{animateChanges:l,setActive:c,setAnimateFunction:i,getState:()=>r,reset:()=>{r=TA()}}}function pte(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!DL(n,t):!1}function Fo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TA(){return{animate:Fo(!0),whileInView:Fo(),whileHover:Fo(),whileTap:Fo(),whileDrag:Fo(),whileFocus:Fo(),exit:Fo()}}class So{constructor(n){this.isMounted=!1,this.node=n}update(){}}class hte extends So{constructor(n){super(n),n.animationState||(n.animationState=fte(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();uy(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:r}=this.node.prevProps||{};n!==r&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let mte=0;class xte extends So{constructor(){super(...arguments),this.id=mte++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===s)return;const a=this.node.animationState.setActive("exit",!n);r&&!n&&a.then(()=>{r(this.id)})}mount(){const{register:n,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const gte={animation:{Feature:hte},exit:{Feature:xte}};function Rf(t,n,r,s={passive:!0}){return t.addEventListener(n,r,s),()=>t.removeEventListener(n,r)}function bp(t){return{point:{x:t.pageX,y:t.pageY}}}const yte=t=>n=>CS(n)&&t(n,bp(n));function Zu(t,n,r,s){return Rf(t,n,yte(r),s)}const $L=1e-4,vte=1-$L,bte=1+$L,FL=.01,wte=0-FL,jte=0+FL;function er(t){return t.max-t.min}function Nte(t,n,r){return Math.abs(t-n)<=r}function MA(t,n,r,s=.5){t.origin=s,t.originPoint=wt(n.min,n.max,t.origin),t.scale=er(r)/er(n),t.translate=wt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=vte&&t.scale<=bte||isNaN(t.scale))&&(t.scale=1),(t.translate>=wte&&t.translate<=jte||isNaN(t.translate))&&(t.translate=0)}function ef(t,n,r,s){MA(t.x,n.x,r.x,s?s.originX:void 0),MA(t.y,n.y,r.y,s?s.originY:void 0)}function OA(t,n,r){t.min=r.min+n.min,t.max=t.min+er(n)}function Ste(t,n,r){OA(t.x,n.x,r.x),OA(t.y,n.y,r.y)}function RA(t,n,r){t.min=n.min-r.min,t.max=t.min+er(n)}function tf(t,n,r){RA(t.x,n.x,r.x),RA(t.y,n.y,r.y)}function Jr(t){return[t("x"),t("y")]}const BL=({current:t})=>t?t.ownerDocument.defaultView:null,IA=(t,n)=>Math.abs(t-n);function kte(t,n){const r=IA(t.x,n.x),s=IA(t.y,n.y);return Math.sqrt(r**2+s**2)}class zL{constructor(n,r,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=M0(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=kte(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:y}=h,{timestamp:v}=Sn;this.history.push({...y,timestamp:v});const{onStart:b,onMove:w}=this.handlers;m||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=T0(m,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=M0(h.type==="pointercancel"?this.lastMoveEventInfo:T0(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,b),y&&y(h,b)},!CS(n))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=a||window;const c=bp(n),d=T0(c,this.transformPagePoint),{point:u}=d,{timestamp:f}=Sn;this.history=[{...u,timestamp:f}];const{onSessionStart:p}=r;p&&p(n,M0(d,this.history)),this.removeListeners=gp(Zu(this.contextWindow,"pointermove",this.handlePointerMove),Zu(this.contextWindow,"pointerup",this.handlePointerUp),Zu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),oo(this.updatePoint)}}function T0(t,n){return n?{point:n(t.point)}:t}function DA(t,n){return{x:t.x-n.x,y:t.y-n.y}}function M0({point:t},n){return{point:t,delta:DA(t,VL(n)),offset:DA(t,Cte(n)),velocity:_te(n,.1)}}function Cte(t){return t[0]}function VL(t){return t[t.length-1]}function _te(t,n){if(t.length<2)return{x:0,y:0};let r=t.length-1,s=null;const a=VL(t);for(;r>=0&&(s=t[r],!(a.timestamp-s.timestamp>ca(n)));)r--;if(!s)return{x:0,y:0};const i=rs(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Pte(t,{min:n,max:r},s){return n!==void 0&&t<n?t=s?wt(n,t,s.min):Math.max(t,n):r!==void 0&&t>r&&(t=s?wt(r,t,s.max):Math.min(t,r)),t}function LA(t,n,r){return{min:n!==void 0?t.min+n:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Ate(t,{top:n,left:r,bottom:s,right:a}){return{x:LA(t.x,r,a),y:LA(t.y,n,s)}}function $A(t,n){let r=n.min-t.min,s=n.max-t.max;return n.max-n.min<t.max-t.min&&([r,s]=[s,r]),{min:r,max:s}}function Ete(t,n){return{x:$A(t.x,n.x),y:$A(t.y,n.y)}}function Tte(t,n){let r=.5;const s=er(t),a=er(n);return a>s?r=Af(n.min,n.max-s,t.min):s>a&&(r=Af(t.min,t.max-a,n.min)),Ja(0,1,r)}function Mte(t,n){const r={};return n.min!==void 0&&(r.min=n.min-t.min),n.max!==void 0&&(r.max=n.max-t.min),r}const yj=.35;function Ote(t=yj){return t===!1?t=0:t===!0&&(t=yj),{x:FA(t,"left","right"),y:FA(t,"top","bottom")}}function FA(t,n,r){return{min:BA(t,n),max:BA(t,r)}}function BA(t,n){return typeof t=="number"?t:t[n]||0}const Rte=new WeakMap;class Ite{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:r=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(bp(p).point)},l=(p,h)=>{const{drag:m,dragPropagation:g,onDragStart:y}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zZ(m),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jr(b=>{let w=this.getAxisMotionValue(b).get()||0;if(da.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[b];N&&(w=er(N)*(parseFloat(w)/100))}}this.originPoint[b]=w}),y&&pt.postRender(()=>y(p,h)),xj(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},c=(p,h)=>{this.latestPointerEvent=p,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:y,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=h;if(g&&this.currentDirection===null){this.currentDirection=Dte(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),v&&v(p,h)},d=(p,h)=>{this.latestPointerEvent=p,this.latestPanInfo=h,this.stop(p,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Jr(p=>{var h;return this.getAnimationState(p)==="paused"&&((h=this.getAxisMotionValue(p).animation)==null?void 0:h.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new zL(n,{onSessionStart:i,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:BL(this.visualElement)})}stop(n,r){const s=n||this.latestPointerEvent,a=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!s)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&pt.postRender(()=>c(s,a))}cancel(){this.isDragging=!1;const{projection:n,animationState:r}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(n,r,s){const{drag:a}=this.getProps();if(!s||!yh(n,a,this.currentDirection))return;const i=this.getAxisMotionValue(n);let l=this.originPoint[n]+s[n];this.constraints&&this.constraints[n]&&(l=Pte(l,this.constraints[n],this.elastic[n])),i.set(l)}resolveConstraints(){var i;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;n&&Cc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Ate(s.layoutBox,n):this.constraints=!1,this.elastic=Ote(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Jr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Mte(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:r}=this.getProps();if(!n||!Cc(n))return!1;const s=n.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Lee(s,a.root,this.visualElement.getTransformPagePoint());let l=Ete(a.layout.layoutBox,i);if(r){const c=r(Ree(l));this.hasMutatedConstraints=!!c,c&&(l=kL(c))}return l}startAnimation(n){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},u=Jr(f=>{if(!yh(f,r,this.currentDirection))return;let p=d&&d[f]||{};l&&(p={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:s?n[f]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(c)}startAxisValueAnimation(n,r){const s=this.getAxisMotionValue(n);return xj(this.visualElement,n),s.start(DS(n,s,0,r,this.visualElement,!1))}stopAnimation(){Jr(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Jr(n=>{var r;return(r=this.getAxisMotionValue(n).animation)==null?void 0:r.pause()})}getAnimationState(n){var r;return(r=this.getAxisMotionValue(n).animation)==null?void 0:r.state}getAxisMotionValue(n){const r=`_drag${n.toUpperCase()}`,s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(n,(s.initial?s.initial[n]:void 0)||0)}snapToCursor(n){Jr(r=>{const{drag:s}=this.getProps();if(!yh(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[r];i.set(n[r]-wt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Cc(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Jr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();a[l]=Tte({min:d,max:d},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Jr(l=>{if(!yh(l,n,null))return;const c=this.getAxisMotionValue(l),{min:d,max:u}=this.constraints[l];c.set(wt(d,u,a[l]))})}addListeners(){if(!this.visualElement.current)return;Rte.set(this.visualElement,this);const n=this.visualElement.current,r=Zu(n,"pointerdown",d=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Cc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),pt.read(s);const l=Rf(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u})=>{this.isDragging&&u&&(Jr(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=d[f].translate,p.set(p.get()+d[f].translate))}),this.visualElement.render())});return()=>{l(),r(),i(),c&&c()}}getProps(){const n=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=yj,dragMomentum:c=!0}=n;return{...n,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:c}}}function yh(t,n,r){return(n===!0||n===t)&&(r===null||r===t)}function Dte(t,n=10){let r=null;return Math.abs(t.y)>n?r="y":Math.abs(t.x)>n&&(r="x"),r}class Lte extends So{constructor(n){super(n),this.removeGroupControls=is,this.removeListeners=is,this.controls=new Ite(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||is}unmount(){this.removeGroupControls(),this.removeListeners()}}const zA=t=>(n,r)=>{t&&pt.postRender(()=>t(n,r))};class $te extends So{constructor(){super(...arguments),this.removePointerDownListener=is}onPointerDown(n){this.session=new zL(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BL(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:zA(n),onStart:zA(r),onMove:s,onEnd:(i,l)=>{delete this.session,a&&pt.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=Zu(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VA(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const fu={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const r=VA(t,n.target.x),s=VA(t,n.target.y);return`${r}% ${s}%`}},Fte={correct:(t,{treeScale:n,projectionDelta:r})=>{const s=t,a=lo.parse(t);if(a.length>5)return s;const i=lo.createTransformer(t),l=typeof a[0]!="number"?1:0,c=r.x.scale*n.x,d=r.y.scale*n.y;a[0+l]/=c,a[1+l]/=d;const u=wt(c,d,.5);return typeof a[2+l]=="number"&&(a[2+l]/=u),typeof a[3+l]=="number"&&(a[3+l]/=u),i(a)}};let O0=!1;class Bte extends x.Component{componentDidMount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=n;lee(zte),i&&(r.group&&r.group.add(i),s&&s.register&&a&&s.register(i),O0&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Nm.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:r,visualElement:s,drag:a,isPresent:i}=this.props,{projection:l}=s;return l&&(l.isPresent=i,O0=!0,a||n.layoutDependency!==r||r===void 0||n.isPresent!==i?l.willUpdate():this.safeToRemove(),n.isPresent!==i&&(i?l.promote():l.relegate()||pt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),kS.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=n;O0=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function UL(t){const[n,r]=uL(),s=x.useContext(rS);return o.jsx(Bte,{...t,layoutGroup:s,switchLayoutGroup:x.useContext(NL),isPresent:n,safeToRemove:r})}const zte={borderRadius:{...fu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fu,borderTopRightRadius:fu,borderBottomLeftRadius:fu,borderBottomRightRadius:fu,boxShadow:Fte};function Vte(t,n,r){const s=$n(t)?t:ld(t);return s.start(DS("",s,n,r)),s.animation}const Ute=(t,n)=>t.depth-n.depth;class Hte{constructor(){this.children=[],this.isDirty=!1}add(n){iS(this.children,n),this.isDirty=!0}remove(n){oS(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(Ute),this.isDirty=!1,this.children.forEach(n)}}function Wte(t,n){const r=pr.now(),s=({timestamp:a})=>{const i=a-r;i>=n&&(oo(s),t(i-n))};return pt.setup(s,!0),()=>oo(s)}const HL=["TopLeft","TopRight","BottomLeft","BottomRight"],Kte=HL.length,UA=t=>typeof t=="string"?parseFloat(t):t,HA=t=>typeof t=="number"||Me.test(t);function qte(t,n,r,s,a,i){a?(t.opacity=wt(0,r.opacity??1,Gte(s)),t.opacityExit=wt(n.opacity??1,0,Yte(s))):i&&(t.opacity=wt(n.opacity??1,r.opacity??1,s));for(let l=0;l<Kte;l++){const c=`border${HL[l]}Radius`;let d=WA(n,c),u=WA(r,c);if(d===void 0&&u===void 0)continue;d||(d=0),u||(u=0),d===0||u===0||HA(d)===HA(u)?(t[c]=Math.max(wt(UA(d),UA(u),s),0),(da.test(u)||da.test(d))&&(t[c]+="%")):t[c]=u}(n.rotate||r.rotate)&&(t.rotate=wt(n.rotate||0,r.rotate||0,s))}function WA(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const Gte=WL(0,.5,T3),Yte=WL(.5,.95,is);function WL(t,n,r){return s=>s<t?0:s>n?1:r(Af(t,n,s))}function KA(t,n){t.min=n.min,t.max=n.max}function qr(t,n){KA(t.x,n.x),KA(t.y,n.y)}function qA(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function GA(t,n,r,s,a){return t-=n,t=vx(t,1/r,s),a!==void 0&&(t=vx(t,1/a,s)),t}function Xte(t,n=0,r=1,s=.5,a,i=t,l=t){if(da.test(n)&&(n=parseFloat(n),n=wt(l.min,l.max,n/100)-l.min),typeof n!="number")return;let c=wt(i.min,i.max,s);t===i&&(c-=n),t.min=GA(t.min,n,r,c,a),t.max=GA(t.max,n,r,c,a)}function YA(t,n,[r,s,a],i,l){Xte(t,n[r],n[s],n[a],n.scale,i,l)}const Jte=["x","scaleX","originX"],Qte=["y","scaleY","originY"];function XA(t,n,r,s){YA(t.x,n,Jte,r?r.x:void 0,s?s.x:void 0),YA(t.y,n,Qte,r?r.y:void 0,s?s.y:void 0)}function JA(t){return t.translate===0&&t.scale===1}function KL(t){return JA(t.x)&&JA(t.y)}function QA(t,n){return t.min===n.min&&t.max===n.max}function Zte(t,n){return QA(t.x,n.x)&&QA(t.y,n.y)}function ZA(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function qL(t,n){return ZA(t.x,n.x)&&ZA(t.y,n.y)}function eE(t){return er(t.x)/er(t.y)}function tE(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class ene{constructor(){this.members=[]}add(n){iS(this.members,n),n.scheduleRender()}remove(n){if(oS(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(n){const r=this.members.findIndex(a=>n===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(n,r){const s=this.lead;if(n!==s&&(this.prevLead=s,this.lead=n,n.show(),s)){s.instance&&s.scheduleRender(),n.scheduleRender(),n.resumeFrom=s,r&&(n.resumeFrom.preserveOpacity=!0),s.snapshot&&(n.snapshot=s.snapshot,n.snapshot.latestValues=s.animationValues||s.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:a}=n.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:r,resumingFrom:s}=n;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tne(t,n,r){let s="";const a=t.x.translate/n.x,i=t.y.translate/n.y,l=(r==null?void 0:r.z)||0;if((a||i||l)&&(s=`translate3d(${a}px, ${i}px, ${l}px) `),(n.x!==1||n.y!==1)&&(s+=`scale(${1/n.x}, ${1/n.y}) `),r){const{transformPerspective:u,rotate:f,rotateX:p,rotateY:h,skewX:m,skewY:g}=r;u&&(s=`perspective(${u}px) ${s}`),f&&(s+=`rotate(${f}deg) `),p&&(s+=`rotateX(${p}deg) `),h&&(s+=`rotateY(${h}deg) `),m&&(s+=`skewX(${m}deg) `),g&&(s+=`skewY(${g}deg) `)}const c=t.x.scale*n.x,d=t.y.scale*n.y;return(c!==1||d!==1)&&(s+=`scale(${c}, ${d})`),s||"none"}const R0=["","X","Y","Z"],nne=1e3;let rne=0;function I0(t,n,r,s){const{latestValues:a}=n;a[t]&&(r[t]=a[t],n.setStaticValue(t,0),s&&(s[t]=0))}function GL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const r=OL(n);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",pt,!(a||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&GL(s)}function YL({attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},c=n==null?void 0:n()){this.id=rne++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ine),this.nodes.forEach(dne),this.nodes.forEach(une),this.nodes.forEach(one)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Hte)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new dS),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dL(l)&&!qZ(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let f,p=0;const h=()=>this.root.updateBlockedByResize=!1;pt.read(()=>{p=window.innerWidth}),t(l,()=>{const m=window.innerWidth;m!==p&&(p=m,this.root.updateBlockedByResize=!0,f&&f(),f=Wte(h,250),Nm.hasAnimatedSinceResize&&(Nm.hasAnimatedSinceResize=!1,this.nodes.forEach(sE)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||xne,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!qL(this.targetLayout,m),w=!p&&h;if(this.options.layoutRoot||this.resumeFrom||w||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...NS(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(f,w)}else p||sE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fne),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cne),this.nodes.forEach(sne),this.nodes.forEach(ane)):this.nodes.forEach(rE),this.clearAllSnapshots();const c=pr.now();Sn.delta=Ja(0,1e3/60,c-Sn.timestamp),Sn.timestamp=c,Sn.isProcessing=!0,N0.update.process(Sn),N0.preRender.process(Sn),N0.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lne),this.sharedNodes.forEach(pne)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!er(this.snapshot.measuredBox.x)&&!er(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!KL(this.projectionDelta),d=this.getTransformTemplate(),u=d?d(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;l&&this.instance&&(c||Uo(this.latestValues)||f)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),gne(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:l}=this.options;if(!l)return It();const c=l.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(yne))){const{scroll:f}=this.root;f&&(_c(c.x,f.offset.x),_c(c.y,f.offset.y))}return c}removeElementScroll(l){var d;const c=It();if(qr(c,l),(d=this.scroll)!=null&&d.wasRoot)return c;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:p,options:h}=f;f!==this.root&&p&&h.layoutScroll&&(p.wasRoot&&qr(c,l),_c(c.x,p.offset.x),_c(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const d=It();qr(d,l);for(let u=0;u<this.path.length;u++){const f=this.path[u];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Pc(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Uo(f.latestValues)&&Pc(d,f.latestValues)}return Uo(this.latestValues)&&Pc(d,this.latestValues),d}removeTransform(l){const c=It();qr(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];if(!u.instance||!Uo(u.latestValues))continue;fj(u.latestValues)&&u.updateSnapshot();const f=It(),p=u.measurePageBox();qr(f,p),XA(c,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Uo(this.latestValues)&&XA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var h;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),tf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ste(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qr(this.target,this.layout.layoutBox),_L(this.target,this.targetDelta)):qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),tf(this.relativeTargetOrigin,this.target,m.target),qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fj(this.parent.latestValues)||CL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(d=!1),d)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;qr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,h=this.treeScale.y;Dee(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=It());const{target:m}=l;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qA(this.prevProjectionDelta.x,this.projectionDelta.x),qA(this.prevProjectionDelta.y,this.projectionDelta.y)),ef(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==h||!tE(this.projectionDelta.x,this.prevProjectionDelta.x)||!tE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ac(),this.projectionDelta=Ac(),this.projectionDeltaWithTransform=Ac()}setAnimationOrigin(l,c=!1){const d=this.snapshot,u=d?d.latestValues:{},f={...this.latestValues},p=Ac();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const h=It(),m=d?d.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,v=this.getStack(),b=!v||v.members.length<=1,w=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(mne));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const S=N/1e3;aE(p.x,l.x,S),aE(p.y,l.y,S),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tf(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hne(this.relativeTarget,this.relativeTargetOrigin,h,S),j&&Zte(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=It()),qr(j,this.relativeTarget)),y&&(this.animationValues=f,qte(f,u,this.latestValues,S,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,d,u;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(u=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||u.stop(),this.pendingAnimation&&(oo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{Nm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ld(0)),this.currentAnimation=Vte(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),l.onUpdate&&l.onUpdate(f)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nne),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:u,latestValues:f}=l;if(!(!c||!d||!u)){if(this!==l&&this.layout&&u&&XL(this.options.animationType,this.layout.layoutBox,u.layoutBox)){d=this.target||It();const p=er(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+p;const h=er(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+h}qr(c,d),Pc(c,f),ef(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new ene),this.sharedNodes.get(l).add(c);const u=c.options.initialPromotionConfig;c.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const u=this.getStack();u&&u.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const u={};d.z&&I0("z",l,u,this.animationValues);for(let f=0;f<R0.length;f++)I0(`rotate${R0[f]}`,l,u,this.animationValues),I0(`skew${R0[f]}`,l,u,this.animationValues);l.render();for(const f in u)l.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=jm(c==null?void 0:c.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=jm(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=tne(this.projectionDeltaWithTransform,this.treeScale,f);d&&(p=d(f,p)),l.transform=p;const{x:h,y:m}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?l.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Of){if(f[g]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:b}=Of[g],w=p==="none"?f[g]:y(f[g],u);if(v){const j=v.length;for(let N=0;N<j;N++)l[v[N]]=w}else b?this.options.visualElement.renderState.vars[g]=w:l[g]=w}this.options.layoutId&&(l.pointerEvents=u===this?jm(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(nE),this.root.sharedNodes.clear()}}}function sne(t){t.updateLayout()}function ane(t){var r;const n=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=t.layout,{animationType:i}=t.options,l=n.source!==t.layout.source;i==="size"?Jr(p=>{const h=l?n.measuredBox[p]:n.layoutBox[p],m=er(h);h.min=s[p].min,h.max=h.min+m}):XL(i,n.layoutBox,s)&&Jr(p=>{const h=l?n.measuredBox[p]:n.layoutBox[p],m=er(s[p]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+m)});const c=Ac();ef(c,s,n.layoutBox);const d=Ac();l?ef(d,t.applyTransform(a,!0),n.measuredBox):ef(d,s,n.layoutBox);const u=!KL(c);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:h,layout:m}=p;if(h&&m){const g=It();tf(g,n.layoutBox,h.layoutBox);const y=It();tf(y,s,m.layoutBox),qL(g,y)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function ine(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function one(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lne(t){t.clearSnapshot()}function nE(t){t.clearMeasurements()}function rE(t){t.isLayoutDirty=!1}function cne(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function sE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function dne(t){t.resolveTargetDelta()}function une(t){t.calcProjection()}function fne(t){t.resetSkewAndRotation()}function pne(t){t.removeLeadSnapshot()}function aE(t,n,r){t.translate=wt(n.translate,0,r),t.scale=wt(n.scale,1,r),t.origin=n.origin,t.originPoint=n.originPoint}function iE(t,n,r,s){t.min=wt(n.min,r.min,s),t.max=wt(n.max,r.max,s)}function hne(t,n,r,s){iE(t.x,n.x,r.x,s),iE(t.y,n.y,r.y,s)}function mne(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const xne={duration:.45,ease:[.4,0,.1,1]},oE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lE=oE("applewebkit/")&&!oE("chrome/")?Math.round:is;function cE(t){t.min=lE(t.min),t.max=lE(t.max)}function gne(t){cE(t.x),cE(t.y)}function XL(t,n,r){return t==="position"||t==="preserve-aspect"&&!Nte(eE(n),eE(r),.2)}function yne(t){var n;return t!==t.root&&((n=t.scroll)==null?void 0:n.wasRoot)}const vne=YL({attachResizeListener:(t,n)=>Rf(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),D0={current:void 0},JL=YL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!D0.current){const t=new vne({});t.mount(window),t.setOptions({layoutScroll:!0}),D0.current=t}return D0.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bne={pan:{Feature:$te},drag:{Feature:Lte,ProjectionNode:JL,MeasureLayout:UL}};function dE(t,n,r){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=s[a];i&&pt.postRender(()=>i(n,bp(n)))}class wne extends So{mount(){const{current:n}=this.node;n&&(this.unmount=VZ(n,(r,s)=>(dE(this.node,s,"Start"),a=>dE(this.node,a,"End"))))}unmount(){}}class jne extends So{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gp(Rf(this.node.current,"focus",()=>this.onFocus()),Rf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uE(t,n,r){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=s[a];i&&pt.postRender(()=>i(n,bp(n)))}class Nne extends So{mount(){const{current:n}=this.node;n&&(this.unmount=KZ(n,(r,s)=>(uE(this.node,s,"Start"),(a,{success:i})=>uE(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vj=new WeakMap,L0=new WeakMap,Sne=t=>{const n=vj.get(t.target);n&&n(t)},kne=t=>{t.forEach(Sne)};function Cne({root:t,...n}){const r=t||document;L0.has(r)||L0.set(r,{});const s=L0.get(r),a=JSON.stringify(n);return s[a]||(s[a]=new IntersectionObserver(kne,{root:t,...n})),s[a]}function _ne(t,n,r){const s=Cne(n);return vj.set(t,r),s.observe(t),()=>{vj.delete(t),s.unobserve(t)}}const Pne={some:0,all:1};class Ane extends So{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:i}=n,l={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:Pne[a]},c=d=>{const{isIntersecting:u}=d;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),h=u?f:p;h&&h(d)};return _ne(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:r}=this.node;["amount","margin","root"].some(Ene(n,r))&&this.startObserver()}unmount(){}}function Ene({viewport:t={}},{viewport:n={}}={}){return r=>t[r]!==n[r]}const Tne={inView:{Feature:Ane},tap:{Feature:Nne},focus:{Feature:jne},hover:{Feature:wne}},Mne={layout:{ProjectionNode:JL,MeasureLayout:UL}},One={...gte,...Tne,...bne,...Mne},ge=Oee(One,Kee);function py(t){const n=$t(d=>d.modules)||{},r=$t(d=>d.user),s=(r==null?void 0:r.is_admin)&&Object.keys(n).length===0,a=n[t]||[],i=x.useMemo(()=>new Set(a.map(d=>d.code.split(".").pop())),[a]),l=s||a.length>0,c=d=>s||i.has(d);return{hasAny:l,canView:c("view"),canCreate:c("create"),canUpdate:c("update"),canDelete:c("delete")}}function QL(t){var n,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=QL(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Xe(){for(var t,n,r=0,s="",a=arguments.length;r<a;r++)(t=arguments[r])&&(n=QL(t))&&(s&&(s+=" "),s+=n);return s}const LS="-",Rne=t=>{const n=Dne(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:l=>{const c=l.split(LS);return c[0]===""&&c.length!==1&&c.shift(),ZL(c,n)||Ine(l)},getConflictingClassGroupIds:(l,c)=>{const d=r[l]||[];return c&&s[l]?[...d,...s[l]]:d}}},ZL=(t,n)=>{var l;if(t.length===0)return n.classGroupId;const r=t[0],s=n.nextPart.get(r),a=s?ZL(t.slice(1),s):void 0;if(a)return a;if(n.validators.length===0)return;const i=t.join(LS);return(l=n.validators.find(({validator:c})=>c(i)))==null?void 0:l.classGroupId},fE=/^\[(.+)\]$/,Ine=t=>{if(fE.test(t)){const n=fE.exec(t)[1],r=n==null?void 0:n.substring(0,n.indexOf(":"));if(r)return"arbitrary.."+r}},Dne=t=>{const{theme:n,classGroups:r}=t,s={nextPart:new Map,validators:[]};for(const a in r)bj(r[a],s,a,n);return s},bj=(t,n,r,s)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?n:pE(n,a);i.classGroupId=r;return}if(typeof a=="function"){if(Lne(a)){bj(a(s),n,r,s);return}n.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{bj(l,pE(n,i),r,s)})})},pE=(t,n)=>{let r=t;return n.split(LS).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Lne=t=>t.isThemeGetter,$ne=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,r=new Map,s=new Map;const a=(i,l)=>{r.set(i,l),n++,n>t&&(n=0,s=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=s.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},wj="!",jj=":",Fne=jj.length,Bne=t=>{const{prefix:n,experimentalParseClassName:r}=t;let s=a=>{const i=[];let l=0,c=0,d=0,u;for(let g=0;g<a.length;g++){let y=a[g];if(l===0&&c===0){if(y===jj){i.push(a.slice(d,g)),d=g+Fne;continue}if(y==="/"){u=g;continue}}y==="["?l++:y==="]"?l--:y==="("?c++:y===")"&&c--}const f=i.length===0?a:a.substring(d),p=zne(f),h=p!==f,m=u&&u>d?u-d:void 0;return{modifiers:i,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};if(n){const a=n+jj,i=s;s=l=>l.startsWith(a)?i(l.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(r){const a=s;s=i=>r({className:i,parseClassName:a})}return s},zne=t=>t.endsWith(wj)?t.substring(0,t.length-1):t.startsWith(wj)?t.substring(1):t,Vne=t=>{const n=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let i=[];return s.forEach(l=>{l[0]==="["||n[l]?(a.push(...i.sort(),l),i=[]):i.push(l)}),a.push(...i.sort()),a}},Une=t=>({cache:$ne(t.cacheSize),parseClassName:Bne(t),sortModifiers:Vne(t),...Rne(t)}),Hne=/\s+/,Wne=(t,n)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:i}=n,l=[],c=t.trim().split(Hne);let d="";for(let u=c.length-1;u>=0;u-=1){const f=c[u],{isExternal:p,modifiers:h,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:y}=r(f);if(p){d=f+(d.length>0?" "+d:d);continue}let v=!!y,b=s(v?g.substring(0,y):g);if(!b){if(!v){d=f+(d.length>0?" "+d:d);continue}if(b=s(g),!b){d=f+(d.length>0?" "+d:d);continue}v=!1}const w=i(h).join(":"),j=m?w+wj:w,N=j+b;if(l.includes(N))continue;l.push(N);const S=a(b,v);for(let _=0;_<S.length;++_){const k=S[_];l.push(j+k)}d=f+(d.length>0?" "+d:d)}return d};function Kne(){let t=0,n,r,s="";for(;t<arguments.length;)(n=arguments[t++])&&(r=e$(n))&&(s&&(s+=" "),s+=r);return s}const e$=t=>{if(typeof t=="string")return t;let n,r="";for(let s=0;s<t.length;s++)t[s]&&(n=e$(t[s]))&&(r&&(r+=" "),r+=n);return r};function qne(t,...n){let r,s,a,i=l;function l(d){const u=n.reduce((f,p)=>p(f),t());return r=Une(u),s=r.cache.get,a=r.cache.set,i=c,c(d)}function c(d){const u=s(d);if(u)return u;const f=Wne(d,r);return a(d,f),f}return function(){return i(Kne.apply(null,arguments))}}const Yt=t=>{const n=r=>r[t]||[];return n.isThemeGetter=!0,n},t$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,n$=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Gne=/^\d+\/\d+$/,Yne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Qne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nc=t=>Gne.test(t),ze=t=>!!t&&!Number.isNaN(Number(t)),Ni=t=>!!t&&Number.isInteger(Number(t)),$0=t=>t.endsWith("%")&&ze(t.slice(0,-1)),Ea=t=>Yne.test(t),ere=()=>!0,tre=t=>Xne.test(t)&&!Jne.test(t),r$=()=>!1,nre=t=>Qne.test(t),rre=t=>Zne.test(t),sre=t=>!me(t)&&!xe(t),are=t=>Ld(t,i$,r$),me=t=>t$.test(t),Bo=t=>Ld(t,o$,tre),F0=t=>Ld(t,dre,ze),hE=t=>Ld(t,s$,r$),ire=t=>Ld(t,a$,rre),vh=t=>Ld(t,l$,nre),xe=t=>n$.test(t),pu=t=>$d(t,o$),ore=t=>$d(t,ure),mE=t=>$d(t,s$),lre=t=>$d(t,i$),cre=t=>$d(t,a$),bh=t=>$d(t,l$,!0),Ld=(t,n,r)=>{const s=t$.exec(t);return s?s[1]?n(s[1]):r(s[2]):!1},$d=(t,n,r=!1)=>{const s=n$.exec(t);return s?s[1]?n(s[1]):r:!1},s$=t=>t==="position"||t==="percentage",a$=t=>t==="image"||t==="url",i$=t=>t==="length"||t==="size"||t==="bg-size",o$=t=>t==="length",dre=t=>t==="number",ure=t=>t==="family-name",l$=t=>t==="shadow",fre=()=>{const t=Yt("color"),n=Yt("font"),r=Yt("text"),s=Yt("font-weight"),a=Yt("tracking"),i=Yt("leading"),l=Yt("breakpoint"),c=Yt("container"),d=Yt("spacing"),u=Yt("radius"),f=Yt("shadow"),p=Yt("inset-shadow"),h=Yt("text-shadow"),m=Yt("drop-shadow"),g=Yt("blur"),y=Yt("perspective"),v=Yt("aspect"),b=Yt("ease"),w=Yt("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...N(),xe,me],_=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],C=()=>[xe,me,d],P=()=>[nc,"full","auto",...C()],E=()=>[Ni,"none","subgrid",xe,me],M=()=>["auto",{span:["full",Ni,xe,me]},Ni,xe,me],T=()=>[Ni,"auto",xe,me],A=()=>["auto","min","max","fr",xe,me],R=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...C()],L=()=>[nc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],D=()=>[t,xe,me],$=()=>[...N(),mE,hE,{position:[xe,me]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",lre,are,{size:[xe,me]}],J=()=>[$0,pu,Bo],Y=()=>["","none","full",u,xe,me],ee=()=>["",ze,pu,Bo],Q=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>[ze,$0,mE,hE],ne=()=>["","none",g,xe,me],z=()=>["none",ze,xe,me],te=()=>["none",ze,xe,me],oe=()=>[ze,xe,me],H=()=>[nc,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ea],breakpoint:[Ea],color:[ere],container:[Ea],"drop-shadow":[Ea],ease:["in","out","in-out"],font:[sre],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ea],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ea],shadow:[Ea],spacing:["px",ze],text:[Ea],"text-shadow":[Ea],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nc,me,xe,v]}],container:["container"],columns:[{columns:[ze,me,xe,c]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Ni,"auto",xe,me]}],basis:[{basis:[nc,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ze,nc,"auto","initial","none",me]}],grow:[{grow:["",ze,xe,me]}],shrink:[{shrink:["",ze,xe,me]}],order:[{order:[Ni,"first","last","none",xe,me]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...R(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...R()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":R()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],w:[{w:[c,"screen",...L()]}],"min-w":[{"min-w":[c,"screen","none",...L()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",r,pu,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,xe,F0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",$0,me]}],"font-family":[{font:[ore,me,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,xe,me]}],"line-clamp":[{"line-clamp":[ze,"none",xe,F0]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",xe,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[ze,"from-font","auto",xe,Bo]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[ze,"auto",xe,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ni,xe,me],radial:["",xe,me],conic:[Ni,xe,me]},cre,ire]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ze,xe,me]}],"outline-w":[{outline:["",ze,pu,Bo]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",f,bh,vh]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",p,bh,vh]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[ze,Bo]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",h,bh,vh]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[ze,xe,me]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":G()}],"mask-image-linear-to-pos":[{"mask-linear-to":G()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":G()}],"mask-image-t-to-pos":[{"mask-t-to":G()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":G()}],"mask-image-r-to-pos":[{"mask-r-to":G()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":G()}],"mask-image-b-to-pos":[{"mask-b-to":G()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":G()}],"mask-image-l-to-pos":[{"mask-l-to":G()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":G()}],"mask-image-x-to-pos":[{"mask-x-to":G()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":G()}],"mask-image-y-to-pos":[{"mask-y-to":G()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[xe,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":G()}],"mask-image-radial-to-pos":[{"mask-radial-to":G()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":G()}],"mask-image-conic-to-pos":[{"mask-conic-to":G()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xe,me]}],filter:[{filter:["","none",xe,me]}],blur:[{blur:ne()}],brightness:[{brightness:[ze,xe,me]}],contrast:[{contrast:[ze,xe,me]}],"drop-shadow":[{"drop-shadow":["","none",m,bh,vh]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",ze,xe,me]}],"hue-rotate":[{"hue-rotate":[ze,xe,me]}],invert:[{invert:["",ze,xe,me]}],saturate:[{saturate:[ze,xe,me]}],sepia:[{sepia:["",ze,xe,me]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,me]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[ze,xe,me]}],"backdrop-contrast":[{"backdrop-contrast":[ze,xe,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ze,xe,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ze,xe,me]}],"backdrop-invert":[{"backdrop-invert":["",ze,xe,me]}],"backdrop-opacity":[{"backdrop-opacity":[ze,xe,me]}],"backdrop-saturate":[{"backdrop-saturate":[ze,xe,me]}],"backdrop-sepia":[{"backdrop-sepia":["",ze,xe,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ze,"initial",xe,me]}],ease:[{ease:["linear","initial",b,xe,me]}],delay:[{delay:[ze,xe,me]}],animate:[{animate:["none",w,xe,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,xe,me]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:z()}],"rotate-x":[{"rotate-x":z()}],"rotate-y":[{"rotate-y":z()}],"rotate-z":[{"rotate-z":z()}],scale:[{scale:te()}],"scale-x":[{"scale-x":te()}],"scale-y":[{"scale-y":te()}],"scale-z":[{"scale-z":te()}],"scale-3d":["scale-3d"],skew:[{skew:oe()}],"skew-x":[{"skew-x":oe()}],"skew-y":[{"skew-y":oe()}],transform:[{transform:[xe,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:H()}],"translate-x":[{"translate-x":H()}],"translate-y":[{"translate-y":H()}],"translate-z":[{"translate-z":H()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,me]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[ze,pu,Bo,F0]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},pre=qne(fre);function Ce(...t){return pre(Xe(t))}const Se=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("rounded-xl border bg-card text-card-foreground shadow",t),...n}));Se.displayName="Card";const De=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("flex flex-col space-y-1.5 p-6",t),...n}));De.displayName="CardHeader";const Le=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("font-semibold leading-none tracking-tight",t),...n}));Le.displayName="CardTitle";const Sm=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("text-sm text-muted-foreground",t),...n}));Sm.displayName="CardDescription";const Ee=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("p-6 pt-0",t),...n}));Ee.displayName="CardContent";const hre=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{ref:r,className:Ce("flex items-center p-6 pt-0",t),...n}));hre.displayName="CardFooter";const xE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,gE=Xe,$S=(t,n)=>r=>{var s;if((n==null?void 0:n.variants)==null)return gE(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=n,l=Object.keys(a).map(u=>{const f=r==null?void 0:r[u],p=i==null?void 0:i[u];if(f===null)return null;const h=xE(f)||xE(p);return a[u][h]}),c=r&&Object.entries(r).reduce((u,f)=>{let[p,h]=f;return h===void 0||(u[p]=h),u},{}),d=n==null||(s=n.compoundVariants)===null||s===void 0?void 0:s.reduce((u,f)=>{let{class:p,className:h,...m}=f;return Object.entries(m).every(g=>{let[y,v]=g;return Array.isArray(v)?v.includes({...i,...c}[y]):{...i,...c}[y]===v})?[...u,p,h]:u},[]);return gE(t,l,d,r==null?void 0:r.class,r==null?void 0:r.className)},mre=$S("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vn({className:t,variant:n,...r}){return o.jsx("div",{className:Ce(mre({variant:n}),t),...r})}function yE(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function c$(...t){return n=>{let r=!1;const s=t.map(a=>{const i=yE(a,n);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():yE(t[a],null)}}}}function Je(...t){return x.useCallback(c$(...t),t)}function dd(t){const n=gre(t),r=x.forwardRef((s,a)=>{const{children:i,...l}=s,c=x.Children.toArray(i),d=c.find(vre);if(d){const u=d.props.children,f=c.map(p=>p===d?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:p);return o.jsx(n,{...l,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,f):null})}return o.jsx(n,{...l,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var xre=dd("Slot");function gre(t){const n=x.forwardRef((r,s)=>{const{children:a,...i}=r;if(x.isValidElement(a)){const l=wre(a),c=bre(i,a.props);return a.type!==x.Fragment&&(c.ref=s?c$(s,l):l),x.cloneElement(a,c)}return x.Children.count(a)>1?x.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var yre=Symbol("radix.slottable");function vre(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yre}function bre(t,n){const r={...n};for(const s in n){const a=t[s],i=n[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function wre(t){var s,a;let n=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const jre=$S("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ce=x.forwardRef(({className:t,variant:n,size:r,asChild:s=!1,...a},i)=>{const l=s?xre:"button";return o.jsx(l,{className:Ce(jre({variant:n,size:r,className:t})),ref:i,...a})});ce.displayName="Button";const fe=x.forwardRef(({className:t,type:n,...r},s)=>o.jsx("input",{type:n,className:Ce("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r}));fe.displayName="Input";function co({variant:t="default",className:n,children:r,...s}){const a="relative w-full rounded-lg border px-4 py-3 text-sm flex gap-3 items-start",i={default:"bg-slate-50 border-slate-200 text-slate-800",destructive:"bg-rose-50 border-rose-200 text-rose-800"};return o.jsx("div",{role:"alert",className:Ce(a,i[t]||i.default,n),...s,children:r})}function uo({className:t,children:n,...r}){return o.jsx("div",{className:Ce("font-semibold leading-tight text-sm",t),...r,children:n})}function fo({className:t,children:n,...r}){return o.jsx("div",{className:Ce("text-xs mt-1 text-slate-700",t),...r,children:n})}function He({className:t,...n}){return o.jsx("div",{className:Ce("animate-pulse rounded-md bg-primary/10",t),...n})}const wh={initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18}};function Nre(){const{hasAny:t,canView:n,canCreate:r,canUpdate:s,canDelete:a}=py("departments"),[i,l]=x.useState([]),[c,d]=x.useState({name:"",description:""}),[u,f]=x.useState(null),[p,h]=x.useState(""),[m,g]=x.useState(!1),[y,v]=x.useState(!1),b=x.useCallback(async()=>{var S,_,k;if(n){h(""),v(!0);try{const{data:C}=await B.get("/departments/");l(C||[])}catch(C){const P=(S=C==null?void 0:C.response)==null?void 0:S.status;h(P===403?"Access denied for Departments.":P===401?"Session expired. Please login again.":((k=(_=C==null?void 0:C.response)==null?void 0:_.data)==null?void 0:k.detail)||"Failed to load departments.")}finally{v(!1)}}},[n]);x.useEffect(()=>{b()},[b]);const w=async S=>{var _,k,C;if(S.preventDefault(),!(!u&&!r)&&!(u&&!s)){g(!0),h("");try{u?await B.put(`/departments/${u}`,c):await B.post("/departments/",c),d({name:"",description:""}),f(null),b()}catch(P){const E=(_=P==null?void 0:P.response)==null?void 0:_.status;h(E===403?"Access denied.":E===401?"Session expired. Please login again.":((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Failed to save department.")}finally{g(!1)}}},j=async S=>{var _,k,C;if(a&&window.confirm("Delete this department?"))try{await B.delete(`/departments/${S}`),b()}catch(P){const E=(_=P==null?void 0:P.response)==null?void 0:_.status;h(E===403?"Access denied.":E===401?"Session expired. Please login again.":((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Failed to delete department.")}},N=S=>{s&&(f(S.id),d({name:S.name,description:S.description||""}))};return!t||!n?o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsx("div",{className:"mx-auto max-w-6xl",children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{children:o.jsx(Le,{className:"text-base text-slate-900",children:"Departments"})}),o.jsx(Ee,{children:o.jsxs(co,{variant:"destructive",className:"border-amber-200 bg-amber-50 text-amber-800",children:[o.jsx(uo,{children:"Access restricted"}),o.jsx(fo,{className:"text-sm",children:"You dont have permission to view the Departments module."})]})})]})})}):o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsx(Vn,{variant:"outline",className:"rounded-full border-slate-200 bg-white px-2.5 py-1 text-[10px] font-medium tracking-wide text-slate-600",children:"Admin  Departments"}),o.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-500",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 shadow-sm animate-pulse"}),o.jsx("span",{children:"Desktop workspace"})]})]}),o.jsx(ge.div,{...wh,children:o.jsx(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:o.jsxs(De,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-3xl bg-slate-900 text-slate-50",children:o.jsx(JN,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-base sm:text-lg text-slate-900",children:"Clinical & support departments"}),o.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Configure OPD, IPD, diagnostics and support departments to align users, doctors and services."})]})]}),o.jsx("div",{className:"grid w-full gap-2 sm:w-auto sm:grid-cols-1",children:o.jsx(Sre,{label:"Departments",value:i.length,hint:"Mapped across OPD, IPD, lab, radiology, etc."})})]})})}),p&&o.jsx(ge.div,{...wh,children:o.jsxs(co,{variant:"destructive",className:"rounded-2xl border-red-200 bg-red-50 text-red-800",children:[o.jsx(uo,{children:"Issue"}),o.jsx(fo,{className:"text-sm",children:p})]})}),o.jsxs("div",{className:"grid items-start gap-4 lg:grid-cols-[minmax(0,260px)_minmax(0,1fr)]",children:[o.jsx(ge.div,{...wh,children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsxs(De,{className:"pb-3",children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:u?"Edit department":"Create department"}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Add or update hospital departments that will be used across modules."})]}),o.jsx(Ee,{children:o.jsxs("form",{onSubmit:w,className:"grid gap-3",children:[o.jsx(fe,{placeholder:"Department name (e.g., General Medicine)",value:c.name,onChange:S=>d({...c,name:S.target.value}),required:!0,disabled:!(u?s:r),className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsx(fe,{placeholder:"Description (optional)",value:c.description,onChange:S=>d({...c,description:S.target.value}),disabled:!(u?s:r),className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[u&&o.jsx("button",{type:"button",onClick:()=>{f(null),d({name:"",description:""})},className:"text-[11px] text-slate-500 underline",children:"Cancel edit & reset"}),o.jsx(ce,{type:"submit",className:"ml-auto rounded-2xl bg-slate-900 px-4 py-1.5 text-xs font-medium text-white hover:bg-slate-800",disabled:m||(u?!s:!r),children:m?"Saving...":u?"Update department":"Create department"})]})]})})]})}),o.jsx(ge.div,{...wh,children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"border-b border-slate-100 pb-3",children:o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Department list"}),o.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[i.length," configured department(s)."]})]})})}),o.jsx(Ee,{className:"pt-4",children:y?o.jsx("div",{className:"space-y-2",children:[0,1,2].map(S=>o.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-3 py-3",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(He,{className:"h-3 w-1/3 rounded-full bg-slate-100"}),o.jsx(He,{className:"h-2.5 w-1/2 rounded-full bg-slate-100"})]}),o.jsx(He,{className:"h-6 w-20 rounded-full bg-slate-100"})]},S))}):o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:o.jsxs("table",{className:"min-w-full text-xs",children:[o.jsx("thead",{className:"bg-slate-50 text-[11px] font-medium text-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 text-left",children:"#"}),o.jsx("th",{className:"p-2 text-left",children:"Name"}),o.jsx("th",{className:"p-2 text-left",children:"Description"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[i.map((S,_)=>o.jsxs("tr",{className:"border-t border-slate-100 text-xs text-slate-800",children:[o.jsx("td",{className:"p-2",children:_+1}),o.jsx("td",{className:"p-2",children:S.name}),o.jsx("td",{className:"p-2 text-slate-500",children:S.description||""}),o.jsx("td",{className:"p-2 text-right",children:o.jsxs("div",{className:"inline-flex gap-2",children:[s&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border-slate-200 px-3 text-[11px]",onClick:()=>N(S),children:"Edit"}),a&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border border-rose-200 px-3 text-[11px] text-rose-700 hover:bg-rose-50",onClick:()=>j(S.id),children:"Delete"})]})})]},S.id)),!i.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4",children:o.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-4 py-5 text-center",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:"No departments yet."}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Use the form on the left to add your first department."})]})})})]})]})})})]})})]})]})})}function Sre({label:t,value:n,hint:r}){return o.jsxs(ge.div,{whileHover:{y:-2,scale:1.01},className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-600",children:[o.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:t}),o.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:n}),r&&o.jsx("div",{className:"mt-0.5 text-[10px] text-slate-400",children:r})]})}const jh={initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18}};function kre(){const{hasAny:t,canView:n,canCreate:r,canUpdate:s,canDelete:a}=py("roles"),[i,l]=x.useState([]),[c,d]=x.useState([]),[u,f]=x.useState({name:"",description:"",permission_ids:[]}),[p,h]=x.useState(null),[m,g]=x.useState(!1),[y,v]=x.useState(!1),[b,w]=x.useState(""),j=x.useCallback(async()=>{var C,P,E;if(n){w(""),v(!0);try{const[M,T]=await Promise.all([B.get("/roles/"),B.get("/permissions/")]);l(M.data||[]),d(T.data||[])}catch(M){const T=(C=M==null?void 0:M.response)==null?void 0:C.status;w(T===403?"Access denied for Roles.":T===401?"Session expired. Please login again.":((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Failed to load roles.")}finally{v(!1)}}},[n]);x.useEffect(()=>{j()},[j]);const N=C=>{f(P=>({...P,permission_ids:P.permission_ids.includes(C)?P.permission_ids.filter(E=>E!==C):[...P.permission_ids,C]}))},S=async C=>{var P,E;if(C.preventDefault(),!(!p&&!r)&&!(p&&!s)){g(!0),w("");try{p?await B.put(`/roles/${p}`,u):await B.post("/roles/",u),f({name:"",description:"",permission_ids:[]}),h(null),j()}catch(M){w(((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Failed to save role.")}finally{g(!1)}}},_=C=>{s&&(h(C.id),f({name:C.name,description:C.description||"",permission_ids:C.permission_ids||[]}))},k=async C=>{var P,E;if(a&&window.confirm("Delete this role?"))try{await B.delete(`/roles/${C}`),j()}catch(M){w(((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Failed to delete role.")}};return!t||!n?o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsx("div",{className:"mx-auto max-w-6xl",children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{children:o.jsx(Le,{className:"text-base text-slate-900",children:"Roles"})}),o.jsx(Ee,{children:o.jsxs(co,{variant:"destructive",className:"border-amber-200 bg-amber-50 text-amber-800",children:[o.jsx(uo,{children:"Access restricted"}),o.jsx(fo,{className:"text-sm",children:"You dont have permission to view the Roles module."})]})})]})})}):o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsx(Vn,{variant:"outline",className:"rounded-full border-slate-200 bg-white px-2.5 py-1 text-[10px] font-medium tracking-wide text-slate-600",children:"Admin  Roles & permissions"}),o.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-500",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 shadow-sm animate-pulse"}),o.jsx("span",{children:"Desktop workspace"})]})]}),o.jsx(ge.div,{...jh,children:o.jsx(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:o.jsxs(De,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-3xl bg-slate-900 text-slate-50",children:o.jsx(No,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-base sm:text-lg text-slate-900",children:"Roles & Permissions"}),o.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Define role templates and attach permission sets for OPD, IPD, billing, pharmacy, lab and other modules."})]})]}),o.jsxs("div",{className:"grid w-full gap-2 sm:w-auto sm:grid-cols-2",children:[o.jsx(vE,{label:"Roles",value:i.length,hint:"Reusable access profiles"}),o.jsx(vE,{label:"Permissions",value:c.length,hint:"Atomic permission codes"})]})]})})}),b&&o.jsx(ge.div,{...jh,children:o.jsxs(co,{variant:"destructive",className:"rounded-2xl border-red-200 bg-red-50 text-red-800",children:[o.jsx(uo,{children:"Issue"}),o.jsx(fo,{className:"text-sm",children:b})]})}),o.jsxs("div",{className:"grid items-start gap-4 lg:grid-cols-[minmax(0,290px)_minmax(0,1fr)]",children:[o.jsx(ge.div,{...jh,children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-2xl bg-slate-900 text-slate-50",children:o.jsx(ea,{className:"h-4 w-4"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:p?"Edit role":"Create role"}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Group permissions into named roles and assign them to users."})]})]})}),o.jsx(Ee,{className:"space-y-3",children:o.jsxs("form",{onSubmit:S,className:"space-y-3",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(fe,{placeholder:"Role name (e.g., OPD Doctor)",value:u.name,onChange:C=>f({...u,name:C.target.value}),required:!0,disabled:!(p?s:r),className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsx(fe,{placeholder:"Description (optional)",value:u.description,onChange:C=>f({...u,description:C.target.value}),disabled:!(p?s:r),className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[o.jsx("span",{className:"font-medium text-slate-700",children:"Permissions"}),o.jsxs("span",{className:"text-slate-400",children:[u.permission_ids.length||0," selected"]})]}),o.jsxs("div",{className:"max-h-64 space-y-1 overflow-y-auto rounded-2xl border border-slate-100 bg-slate-50 px-2 py-2",children:[c.map(C=>o.jsxs("label",{className:`flex cursor-pointer items-start gap-2 rounded-2xl px-2 py-1.5 text-[11px] ${u.permission_ids.includes(C.id)?"bg-white":"bg-slate-50"}`,children:[o.jsx("input",{type:"checkbox",checked:u.permission_ids.includes(C.id),onChange:()=>N(C.id),disabled:!(p?s:r),className:"mt-0.5 h-3.5 w-3.5 rounded border-slate-300"}),o.jsxs("span",{children:[o.jsx("span",{className:"block font-medium text-slate-800",children:C.label}),o.jsx("span",{className:"block text-[10px] text-slate-500",children:C.code})]})]},C.id)),!c.length&&!y&&o.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:"No permissions configured yet."}),y&&o.jsx("div",{className:"space-y-2",children:[0,1,2].map(C=>o.jsxs("div",{className:"flex items-center gap-2 rounded-2xl px-2 py-1.5",children:[o.jsx(He,{className:"h-3 w-3 rounded bg-slate-100"}),o.jsxs("div",{className:"flex-1 space-y-1",children:[o.jsx(He,{className:"h-3 w-1/2 rounded-full bg-slate-100"}),o.jsx(He,{className:"h-2 w-1/3 rounded-full bg-slate-100"})]})]},C))})]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[p&&o.jsx("button",{type:"button",onClick:()=>{h(null),f({name:"",description:"",permission_ids:[]})},className:"text-[11px] text-slate-500 underline",children:"Cancel edit & reset"}),o.jsx(ce,{type:"submit",className:"ml-auto rounded-2xl bg-slate-900 px-4 py-1.5 text-xs font-medium text-white hover:bg-slate-800",disabled:m||(p?!s:!r),children:m?"Saving...":p?"Update role":"Create role"})]})]})})]})}),o.jsx(ge.div,{...jh,children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"border-b border-slate-100 pb-3",children:o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Role list"}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Overview of all defined roles and number of attached permissions."})]})})}),o.jsx(Ee,{className:"pt-4",children:y?o.jsx("div",{className:"space-y-2",children:[0,1,2].map(C=>o.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-3 py-3",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(He,{className:"h-3 w-1/3 rounded-full bg-slate-100"}),o.jsx(He,{className:"h-2.5 w-1/4 rounded-full bg-slate-100"})]}),o.jsx(He,{className:"h-6 w-20 rounded-full bg-slate-100"})]},C))}):o.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:o.jsxs("table",{className:"min-w-full text-xs",children:[o.jsx("thead",{className:"bg-slate-50 text-[11px] font-medium text-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 text-left",children:"#"}),o.jsx("th",{className:"p-2 text-left",children:"Role name"}),o.jsx("th",{className:"p-2 text-left",children:"Description"}),o.jsx("th",{className:"p-2 text-left",children:"Permissions"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[i.map((C,P)=>{var E;return o.jsxs("tr",{className:"border-t border-slate-100 text-xs text-slate-800",children:[o.jsx("td",{className:"p-2",children:P+1}),o.jsx("td",{className:"p-2",children:C.name}),o.jsx("td",{className:"p-2 text-slate-500",children:C.description||""}),o.jsxs("td",{className:"p-2 text-slate-600",children:[((E=C.permission_ids)==null?void 0:E.length)||0," permissions"]}),o.jsx("td",{className:"p-2 text-right",children:o.jsxs("div",{className:"inline-flex gap-2",children:[s&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border-slate-200 px-3 text-[11px]",onClick:()=>_(C),children:"Edit"}),a&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border border-rose-200 px-3 text-[11px] text-rose-700 hover:bg-rose-50",onClick:()=>k(C.id),children:"Delete"})]})})]},C.id)}),!i.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4",children:o.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-4 py-5 text-center",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:"No roles defined yet."}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Create a role on the left to start grouping permissions."})]})})})]})]})})})]})})]})]})})}function vE({label:t,value:n,hint:r}){return o.jsxs(ge.div,{whileHover:{y:-2,scale:1.01},className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-600",children:[o.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:t}),o.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:n}),r&&o.jsx("div",{className:"mt-0.5 text-[10px] text-slate-400",children:r})]})}function Cre(){const{hasAny:t,canView:n,canCreate:r,canUpdate:s,canDelete:a}=py("permissions"),[i,l]=x.useState([]),[c,d]=x.useState({code:"",label:"",module:""}),[u,f]=x.useState(null),[p,h]=x.useState(!1),[m,g]=x.useState(""),y=x.useCallback(async()=>{var j,N,S;if(n){g("");try{const _=await B.get("/permissions/");l(_.data)}catch(_){const k=(j=_==null?void 0:_.response)==null?void 0:j.status;g(k===403?"Access denied for Permissions.":k===401?"Session expired. Please login again.":((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load")}}},[n]);x.useEffect(()=>{y()},[y]);const v=async j=>{var N,S;if(j.preventDefault(),!(!u&&!r)&&!(u&&!s)){h(!0),g("");try{u?await B.put(`/permissions/${u}`,c):await B.post("/permissions/",c),d({code:"",label:"",module:""}),f(null),y()}catch(_){g(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to save")}finally{h(!1)}}},b=async j=>{var N,S;if(a&&confirm("Delete this permission?"))try{await B.delete(`/permissions/${j}`),y()}catch(_){g(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to delete")}},w=j=>{s&&(f(j.id),d({code:j.code,label:j.label,module:j.module}))};return!t||!n?o.jsxs("section",{className:"card",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Permissions"}),o.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"You dont have access to view this module."})]}):o.jsxs("section",{className:"card",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("h3",{className:"text-lg font-semibold",children:"Permissions"})}),o.jsxs("form",{onSubmit:v,className:"grid md:grid-cols-4 gap-3 mb-4",children:[o.jsx("input",{className:"input",placeholder:"code (e.g. users.view)",value:c.code,onChange:j=>d({...c,code:j.target.value}),required:!0,disabled:!(u?s:r)}),o.jsx("input",{className:"input",placeholder:"label (Users  View)",value:c.label,onChange:j=>d({...c,label:j.target.value}),required:!0,disabled:!(u?s:r)}),o.jsx("input",{className:"input",placeholder:"module (users)",value:c.module,onChange:j=>d({...c,module:j.target.value}),required:!0,disabled:!(u?s:r)}),o.jsx("button",{className:"btn",disabled:p||(u?!s:!r),children:u?"Update":"Create"})]}),m&&o.jsx("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:m}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left",children:[o.jsx("th",{className:"p-2",children:"#"}),o.jsx("th",{className:"p-2",children:"Code"}),o.jsx("th",{className:"p-2",children:"Label"}),o.jsx("th",{className:"p-2",children:"Module"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[i.map((j,N)=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:N+1}),o.jsx("td",{className:"p-2 font-mono text-xs",children:j.code}),o.jsx("td",{className:"p-2",children:j.label}),o.jsx("td",{className:"p-2",children:j.module}),o.jsxs("td",{className:"p-2 text-right space-x-2",children:[s&&o.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>w(j),children:"Edit"}),a&&o.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>b(j.id),children:"Delete"})]})]},j.id)),!i.length&&o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:"5",children:"No permissions yet."})})]})]})})]})}const Nh={initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18}};function _re(){const{hasAny:t,canView:n,canCreate:r,canUpdate:s,canDelete:a}=py("users"),[i,l]=x.useState([]),[c,d]=x.useState([]),[u,f]=x.useState([]),[p,h]=x.useState({name:"",email:"",password:"",department_id:"",role_ids:[],is_doctor:!1,is_active:!0}),[m,g]=x.useState(null),[y,v]=x.useState(!1),[b,w]=x.useState(!1),[j,N]=x.useState(""),[S,_]=x.useState("all"),[k,C]=x.useState(""),P=m?s:r,E=x.useCallback(async()=>{var F,K,J;if(n){N(""),w(!0);try{const[Y,ee,Q]=await Promise.all([B.get("/users/"),B.get("/roles/").catch(()=>({data:[]})),B.get("/departments/").catch(()=>({data:[]}))]);l(Y.data||[]),d(ee.data||[]),f(Q.data||[])}catch(Y){const ee=(F=Y==null?void 0:Y.response)==null?void 0:F.status;N(ee===403?"Access denied for Users.":ee===401?"Session expired. Please login again.":((J=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:J.detail)||"Failed to load users.")}finally{w(!1)}}},[n]);x.useEffect(()=>{E()},[E]);const M=x.useMemo(()=>{const F={};return u.forEach(K=>{F[K.id]=K.name}),F},[u]),T=F=>{h(K=>({...K,role_ids:K.role_ids.includes(F)?K.role_ids.filter(J=>J!==F):[...K.role_ids,F]}))},A=()=>{h({name:"",email:"",password:"",department_id:"",role_ids:[],is_doctor:!1,is_active:!0}),g(null)},R=async F=>{var J,Y;if(F.preventDefault(),!m&&!r||m&&!s)return;v(!0),N("");const K={...p,department_id:p.department_id?Number(p.department_id):null};try{m?await B.put(`/users/${m}`,K):await B.post("/users/",K),A(),E()}catch(ee){N(((Y=(J=ee==null?void 0:ee.response)==null?void 0:J.data)==null?void 0:Y.detail)||"Failed to save user.")}finally{v(!1)}},O=async F=>{var K,J;if(a&&window.confirm("Delete this user?"))try{await B.delete(`/users/${F}`),E()}catch(Y){N(((J=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:J.detail)||"Failed to delete user.")}},I=F=>{s&&(g(F.id),h({name:F.name||"",email:F.email||"",password:"",department_id:F.department_id||"",role_ids:F.role_ids||[],is_doctor:!!F.is_doctor,is_active:F.is_active??!0}))},L=x.useMemo(()=>i.filter(F=>F.is_doctor).length,[i]),D=x.useMemo(()=>i.filter(F=>F.is_active).length,[i]),$=x.useMemo(()=>{let F=i;if(S==="doctors"&&(F=F.filter(K=>K.is_doctor)),k.trim()){const K=k.toLowerCase();F=F.filter(J=>(J.name||"").toLowerCase().includes(K)||(J.email||"").toLowerCase().includes(K))}return F},[i,S,k]);return!t||!n?o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsx("div",{className:"mx-auto max-w-6xl",children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{children:o.jsx(Le,{className:"text-base text-slate-900",children:"Users"})}),o.jsx(Ee,{children:o.jsxs(co,{variant:"destructive",className:"border-amber-200 bg-amber-50 text-amber-800",children:[o.jsx(uo,{children:"Access restricted"}),o.jsx(fo,{className:"text-sm",children:"You dont have permission to view the Users module. Contact your administrator for access."})]})})]})})}):o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-4 md:px-6 md:py-6 lg:px-8",children:o.jsxs("div",{className:"mx-auto max-w-6xl space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsx(Vn,{variant:"outline",className:"rounded-full border-slate-200 bg-white px-2.5 py-1 text-[10px] font-medium tracking-wide text-slate-600",children:"Admin  User management"}),o.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-500",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 shadow-sm animate-pulse"}),o.jsx("span",{children:"Desktop workspace"})]})]}),o.jsx(ge.div,{...Nh,children:o.jsx(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:o.jsxs(De,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-3xl bg-slate-900 text-slate-50",children:o.jsx(Ci,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-base sm:text-lg text-slate-900",children:"Users & Doctors"}),o.jsx("p",{className:"mt-1 text-xs text-slate-600",children:"Manage staff accounts, link them to departments, assign roles and mark doctors for OPD/IPD routing."})]})]}),o.jsxs("div",{className:"grid w-full gap-2 sm:w-auto sm:grid-cols-3",children:[o.jsx(B0,{label:"Total users",value:i.length,hint:"All active & inactive staff"}),o.jsx(B0,{label:"Doctors",value:L,icon:o.jsx(ur,{className:"h-3 w-3 text-emerald-600"}),hint:"Marked as doctor"}),o.jsx(B0,{label:"Active users",value:D,hint:"Can login today"})]})]})})}),j&&o.jsx(ge.div,{...Nh,children:o.jsxs(co,{variant:"destructive",className:"rounded-2xl border-red-200 bg-red-50 text-red-800",children:[o.jsx(uo,{children:"Issue"}),o.jsx(fo,{className:"text-sm",children:j})]})}),o.jsxs("div",{className:"grid items-start gap-4 lg:grid-cols-[minmax(0,260px)_minmax(0,1fr)]",children:[o.jsx(ge.div,{...Nh,children:o.jsxs(Se,{className:"sticky top-20 rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"pb-3",children:o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Filters & user form"}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Filter list and add/update staff users."})]})})}),o.jsxs(Ee,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-2.5 py-1 text-[10px] font-medium text-slate-600",children:[o.jsx(Pf,{className:"h-3 w-3"}),o.jsx("span",{children:"View"})]}),o.jsxs("div",{className:"inline-flex gap-1 rounded-full border border-slate-200 bg-slate-100 p-1 text-[11px]",children:[o.jsx("button",{type:"button",onClick:()=>_("all"),className:`rounded-full px-3 py-1 ${S==="all"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:"All users"}),o.jsxs("button",{type:"button",onClick:()=>_("doctors"),className:`inline-flex items-center gap-1 rounded-full px-3 py-1 ${S==="doctors"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-800"}`,children:[o.jsx(ur,{className:"h-3 w-3"}),"Doctors"]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] font-medium text-slate-600",children:"Search"}),o.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-slate-50 px-2 py-1.5",children:[o.jsx(ZN,{className:"h-3.5 w-3.5 text-slate-400"}),o.jsx(fe,{placeholder:"Name or email",value:k,onChange:F=>C(F.target.value),className:"h-7 border-0 bg-transparent px-0 text-xs focus-visible:ring-0"})]})]})]}),o.jsxs("div",{className:"space-y-3 border-t border-slate-100 pt-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-medium text-slate-700",children:[o.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-2xl bg-slate-900 text-slate-50",children:o.jsx(qJ,{className:"h-3.5 w-3.5"})}),o.jsx("span",{children:m?"Edit user":"Create new user"})]}),o.jsxs("form",{onSubmit:R,className:"space-y-3",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(fe,{placeholder:"Full name",value:p.name,onChange:F=>h({...p,name:F.target.value}),required:!0,disabled:!P,className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsx(fe,{placeholder:"Email",type:"email",value:p.email,onChange:F=>h({...p,email:F.target.value}),required:!0,disabled:!P,className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsx(fe,{placeholder:m?"Password (leave blank to keep)":"Password",type:"password",value:p.password,onChange:F=>h({...p,password:F.target.value}),required:!m,disabled:!P,className:"h-8 rounded-2xl border-slate-200 bg-slate-50 text-xs"}),o.jsxs("div",{className:"space-y-1 text-[11px]",children:[o.jsx("label",{className:"font-medium text-slate-600",children:"Department"}),o.jsxs("select",{value:p.department_id,onChange:F=>h({...p,department_id:F.target.value}),disabled:!P,className:"h-8 w-full rounded-2xl border border-slate-200 bg-slate-50 px-2 text-xs text-slate-800 focus:outline-none focus:ring-1 focus:ring-slate-300",children:[o.jsx("option",{value:"",children:"No department"}),u.map(F=>o.jsx("option",{value:F.id,children:F.name},F.id))]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px]",children:[o.jsxs("label",{className:`inline-flex flex-1 min-w-[140px] cursor-pointer items-center gap-2 rounded-2xl border px-3 py-2 ${p.is_doctor?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white"}`,children:[o.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 rounded border-slate-300",checked:p.is_doctor,onChange:F=>h({...p,is_doctor:F.target.checked}),disabled:!P}),o.jsxs("span",{className:"inline-flex items-center gap-1 text-slate-700",children:[o.jsx(ur,{className:"h-3.5 w-3.5 text-emerald-600"}),o.jsx("span",{children:"Mark as doctor"})]})]}),o.jsxs("label",{className:`inline-flex flex-1 min-w-[140px] cursor-pointer items-center gap-2 rounded-2xl border px-3 py-2 ${p.is_active?"border-slate-300 bg-slate-50":"border-slate-200 bg-white"}`,children:[o.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 rounded border-slate-300",checked:p.is_active,onChange:F=>h({...p,is_active:F.target.checked}),disabled:!P}),o.jsxs("span",{className:"inline-flex items-center gap-1 text-slate-700",children:[o.jsx(No,{className:"h-3.5 w-3.5 text-slate-700"}),o.jsx("span",{children:"Active user"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[o.jsx("span",{className:"font-medium text-slate-700",children:"Roles"}),o.jsxs("span",{className:"text-slate-400",children:[p.role_ids.length||0," selected"]})]}),o.jsxs("div",{className:"grid gap-1.5 sm:grid-cols-2",children:[c.map(F=>o.jsxs("label",{className:`flex cursor-pointer items-center gap-2 rounded-2xl border px-2.5 py-2 ${p.role_ids.includes(F.id)?"border-slate-300 bg-slate-50":"border-slate-200 bg-white"}`,children:[o.jsx("input",{type:"checkbox",checked:p.role_ids.includes(F.id),onChange:()=>T(F.id),disabled:!P,className:"h-3.5 w-3.5 rounded border-slate-300"}),o.jsx("span",{className:"text-[11px] text-slate-800",children:F.name})]},F.id)),!c.length&&o.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-3 py-2 text-[11px] text-slate-500",children:"No roles configured yet."})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-1",children:[m&&o.jsx("button",{type:"button",onClick:A,className:"text-[11px] text-slate-500 underline",children:"Cancel edit & clear form"}),o.jsx(ce,{type:"submit",className:"ml-auto rounded-2xl bg-slate-900 px-4 py-1.5 text-xs font-medium text-white hover:bg-slate-800",disabled:y||!P,children:y?"Saving...":m?"Update user":"Create user"})]})]})]})]})]})}),o.jsx(ge.div,{...Nh,children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"border-b border-slate-100 pb-3",children:o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"User directory"}),o.jsxs("p",{className:"mt-1 text-[11px] text-slate-500",children:[$.length," of ",i.length," records visible in this view."]})]})})}),o.jsx(Ee,{className:"space-y-4 pt-4",children:b?o.jsx(Pre,{}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-3 md:hidden",children:[$.map((F,K)=>{const J=c.filter(Y=>(F.role_ids||[]).includes(Y.id)).map(Y=>Y.name);return o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-3",children:[o.jsx("div",{className:"flex items-start justify-between gap-3",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[o.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[K+1,". ",F.name]}),F.is_doctor&&o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700",children:[o.jsx(ur,{className:"h-3 w-3"}),"Doctor"]}),!F.is_active&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-600",children:"Inactive"}),F.is_admin&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] text-white",children:"Admin"})]}),o.jsx("div",{className:"text-[11px] text-slate-500",children:F.email}),o.jsxs("div",{className:"text-[11px] text-slate-500",children:["Dept:"," ",o.jsx("span",{className:"font-medium text-slate-700",children:M[F.department_id]||"-"})]}),o.jsxs("div",{className:"text-[11px] text-slate-500",children:["Roles:"," ",J.length?J.join(", "):"No roles"]})]})}),o.jsxs("div",{className:"mt-3 flex justify-end gap-2 text-[11px]",children:[s&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border-slate-200 px-3 text-[11px]",onClick:()=>I(F),children:"Edit"}),a&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border border-rose-200 px-3 text-[11px] text-rose-700 hover:bg-rose-50",onClick:()=>O(F.id),children:"Delete"})]})]},F.id)}),!$.length&&o.jsx(bE,{title:"No users match this view"})]}),o.jsx("div",{className:"hidden overflow-x-auto rounded-2xl border border-slate-200 bg-white md:block",children:o.jsxs("table",{className:"min-w-full text-xs",children:[o.jsx("thead",{className:"bg-slate-50 text-[11px] font-medium text-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 text-left",children:"#"}),o.jsx("th",{className:"p-2 text-left",children:"Name"}),o.jsx("th",{className:"p-2 text-left",children:"Email"}),o.jsx("th",{className:"p-2 text-left",children:"Dept"}),o.jsx("th",{className:"p-2 text-left",children:"Roles"}),o.jsx("th",{className:"p-2 text-left",children:"Flags"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[$.map((F,K)=>{const J=c.filter(Y=>(F.role_ids||[]).includes(Y.id)).map(Y=>Y.name);return o.jsxs("tr",{className:"border-t border-slate-100 text-xs text-slate-800",children:[o.jsx("td",{className:"p-2",children:K+1}),o.jsx("td",{className:"p-2",children:F.name}),o.jsx("td",{className:"p-2",children:F.email}),o.jsx("td",{className:"p-2",children:M[F.department_id]||"-"}),o.jsx("td",{className:"p-2",children:J.length?J.join(", "):o.jsx("span",{className:"text-slate-400",children:"No roles"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.is_doctor&&o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] text-emerald-700",children:[o.jsx(ur,{className:"h-3 w-3"}),"Doctor"]}),!F.is_active&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-600",children:"Inactive"}),F.is_admin&&o.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] text-white",children:"Admin"})]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsxs("div",{className:"inline-flex gap-2",children:[s&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border-slate-200 px-3 text-[11px]",onClick:()=>I(F),children:"Edit"}),a&&o.jsx(ce,{type:"button",variant:"outline",size:"sm",className:"h-7 rounded-2xl border border-rose-200 px-3 text-[11px] text-rose-700 hover:bg-rose-50",onClick:()=>O(F.id),children:"Delete"})]})})]},F.id)}),!$.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4",children:o.jsx(bE,{title:"No users match this view"})})})]})]})})]})})]})})]})]})})}function B0({label:t,value:n,icon:r,hint:s}){return o.jsxs(ge.div,{whileHover:{y:-2,scale:1.01},className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-[11px] text-slate-600",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:t}),r&&o.jsx("span",{children:r})]}),o.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:n}),s&&o.jsx("div",{className:"mt-0.5 text-[10px] text-slate-400",children:s})]})}function bE({title:t}){return o.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-4 py-5 text-center",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:t}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Try changing filters, clearing the search, or creating a new user."})]})}function Pre(){return o.jsx("div",{className:"space-y-2",children:[0,1,2].map(t=>o.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-3 py-3",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(He,{className:"h-3 w-1/3 rounded-full bg-slate-100"}),o.jsx(He,{className:"h-2.5 w-1/2 rounded-full bg-slate-100"})]}),o.jsx(He,{className:"h-6 w-20 rounded-full bg-slate-100"})]},t))})}const Are=(()=>{try{return JSON.parse(localStorage.getItem("sidebarCollapsed")||"false")}catch{return!1}})(),d$=$D(t=>({sidebarCollapsed:Are,sidebarMobileOpen:!1,toggleCollapse:()=>t(n=>{const r=!n.sidebarCollapsed;return localStorage.setItem("sidebarCollapsed",JSON.stringify(r)),{sidebarCollapsed:r}}),openMobile:()=>t({sidebarMobileOpen:!0}),closeMobile:()=>t({sidebarMobileOpen:!1}),toggleMobile:()=>t(n=>({sidebarMobileOpen:!n.sidebarMobileOpen}))})),Ere=[{key:"Dashboard",label:"Dashboard",icon:Ci,flatLink:{to:"/dashboard",reqAny:["patients.view"]}},{key:"patients",label:"Patients management",icon:Ci,flatLink:{to:"/patients",reqAny:["patients.view","patients.create","patients.update"]}},{key:"patients masters",label:"patients masters",icon:Ci,flatLink:{to:"/patients/masters",reqAny:["patients.masters.view"]}},{key:"MIS",label:"MIS",icon:Ci,flatLink:{to:"/mis",reqAny:["mis.view"]}},{key:"emr",label:"Patients EMR",icon:Ci,flatLink:{to:"/emr",reqAny:["emr.view"]}},{key:"user-mgmt",label:"User Management",icon:Ci,items:[{key:"departments",label:"Departments",to:"/admin/departments",icon:JN,reqAny:["departments.view","departments.create","departments.update","departments.delete"]},{key:"roles",label:"Roles",to:"/admin/roles",icon:No,reqAny:["roles.view","roles.create","roles.update","roles.delete"]},{key:"users",label:"Users",to:"/admin/users",icon:Ci,reqAny:["users.view","users.create","users.update","users.delete"]}]},{key:"templates",label:"Templates",icon:KX,items:[{key:"tpl-list",label:"Templates",to:"/templates",icon:px,reqAny:["templates.view","templates.manage"]},{key:"tpl-generate",label:"Generate Reports",to:"/templates/generate",icon:AJ,reqAny:["templates.view","patients.view","emr.view"]},{key:"consents",label:"Patient Consents",to:"/templates/consents",icon:DJ,reqAny:["consents.view","patients.view"]}]},{key:"op",label:"OP",icon:ur,items:[{key:"appointments",label:"Appointments",to:"/opd/appointments",icon:XP,reqAny:["appointments.view","appointments.create"]},{key:"triage",label:"Vitals (Triage)",to:"/opd/triage",icon:Vc,reqAny:["vitals.create"]},{key:"queue",label:"Queue",to:"/opd/queue",icon:GX,reqAny:["appointments.view","visits.view"]}]},{key:"ip",label:"IP",icon:zc,items:[{key:"ipd-admissions",label:"Admissions",to:"/ipd/admissions",icon:PX,reqAny:["ipd.view","ipd.manage"]},{key:"ipd-tracking",label:"Tracking",to:"/ipd/tracking",icon:YP,reqAny:["ipd.tracking.view"]},{key:"ipd-my",label:"My Admissions",to:"/ipd/my",icon:XP,reqAny:["ipd.my.view","ipd.doctor"]},{key:"ipd-discharged",label:"Discharged",to:"/ipd/discharged",icon:h3,reqAny:["ipd.discharged.view"]},{key:"ipd-bedboard",label:"Bedboard",to:"/ipd/bedboard",icon:zc,reqAny:["ipd.bedboard.view"]},{key:"ipd-masters",label:"IPD Masters",to:"/ipd/masters",icon:ea,reqAny:["ipd.masters.manage","ipd.packages.manage"]}]},{key:"pharmacy",label:"Pharmacy",icon:Uc,items:[{key:"ph-home",label:"Dashboard",to:"/pharmacy",icon:Uc,reqAny:["pharmacy.view"]},{key:"prescriptions create",label:"Prescriptions new",to:"/pharmacy/prescriptions/new",icon:Yu,reqAny:["pharmacy.view","prescriptions.create","ipd.doctor"]},{key:"prescriptions",label:"Prescriptions",to:"/pharmacy/prescriptions",icon:Yu,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-dispense",label:"Dispense",to:"/pharmacy/dispense",icon:tS,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-returns",label:"Returns",to:"/pharmacy/returns",icon:eS,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-alerts",label:"Alerts (Low/Expiry)",to:"/pharmacy/alerts",icon:ly,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-stock",label:"Inventory (Lots)",to:"/pharmacy/inventory",icon:KY,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-trans",label:"Transactions",to:"/pharmacy/transactions",icon:DX,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-po",label:"Purchase Orders",to:"/pharmacy/po",icon:Yu,reqAny:["pharmacy.view","pharmacy.procure.manage"]},{key:"ph-grn",label:"Goods Receipt (GRN)",to:"/pharmacy/grn",icon:HJ,reqAny:["pharmacy.view","pharmacy.procure.manage"]},{key:"ph-medicines",label:"Medicines",to:"/pharmacy/medicines",icon:Uc,reqAny:["pharmacy.view","pharmacy.masters.manage"]},{key:"ph-suppliers",label:"Suppliers",to:"/pharmacy/suppliers",icon:jX,reqAny:["pharmacy.view","pharmacy.masters.manage"]},{key:"ph-locations",label:"Locations",to:"/pharmacy/locations",icon:nJ,reqAny:["pharmacy.view","pharmacy.masters.manage"]}]},{key:"lab",label:"Laboratory",icon:od,items:[{key:"lab-orders",label:"Orders & Reporting",to:"/lab/orders",icon:od,reqAny:["lab.orders.view","lab.orders.create","orders.lab.view","orders.lab.create"]},{key:"lab-masters",label:"Lab Masters (NABL)",to:"/lab/masters",icon:ea,reqAny:["lab.masters.manage"]}]},{key:"ris",label:"Radiology",icon:Mu,items:[{key:"ris-orders",label:"Orders & Reporting",to:"/ris/orders",icon:Mu,reqAny:["radiology.orders.view","radiology.orders.create","orders.ris.view","orders.ris.create","radiology.report.create","radiology.report.approve","radiology.schedule.manage","radiology.scan.update"]},{key:"ris-masters",label:"RIS Masters",to:"/ris/masters",icon:ea,reqAny:["radiology.masters.manage"]}]},{key:"ot",label:"Operation Theatre",icon:Mu,items:[{key:"ot-orders",label:"OT Orders",to:"/ot/orders",icon:Mu,reqAny:["ot.cases.view","ot.cases.create","ipd.view"]},{key:"ot-masters",label:"OT Masters",to:"/ot/masters",icon:ea,reqAny:["ot.masters.view","ot.masters.manage"]}]},{key:"billing",label:"Billing",icon:x3,items:[{key:"billing-console",label:"Billing Console",to:"/billing",icon:YP,reqAny:["billing.invoices.view","billing.invoices.create"]}]},{key:"settings",label:"Settings",icon:MJ,items:[{key:"schedules",label:"Schedules",to:"/opd/schedules",icon:iy,reqAny:["schedules.manage"]},{key:"opd-masters",label:"OPD Masters",to:"/opd/masters",icon:ea,reqAny:["pharmacy.masters.manage","lab.masters.manage","radiology.masters.manage","ipd.masters.manage"]},{key:"perm-logs",label:"Permissions (Access Logs)",to:"/admin/permissions",icon:ea,reqAny:["permissions.view","permissions.create","permissions.update","permissions.delete"]}]}];function Tre(){const t=$t(v=>v.user),n=$t(v=>v.modules)||{},r=ps(),{sidebarCollapsed:s,toggleCollapse:a,sidebarMobileOpen:i,closeMobile:l}=d$();x.useEffect(()=>{if(!i)return;const v=window.scrollY,b={position:document.body.style.position,top:document.body.style.top,width:document.body.style.width,overflow:document.body.style.overflow,ob:document.documentElement.style.overscrollBehavior};return document.body.style.position="fixed",document.body.style.top=`-${v}px`,document.body.style.width="100%",document.body.style.overflow="hidden",document.documentElement.style.overscrollBehavior="none",()=>{document.body.style.position=b.position||"",document.body.style.top=b.top||"",document.body.style.width=b.width||"",document.body.style.overflow=b.overflow||"",document.documentElement.style.overscrollBehavior=b.ob||"",window.scrollTo(0,v)}},[i]);const c=!!(t!=null&&t.is_admin),d=x.useMemo(()=>{const v=Object.values(n).flat().map(w=>typeof w=="string"?w:w==null?void 0:w.code).filter(Boolean),b=((t==null?void 0:t.permissions)||[]).map(w=>typeof w=="string"?w:w==null?void 0:w.code).filter(Boolean);return new Set([...v||[],...b||[]])},[n,t]),u=(v=[])=>c?!0:v.some(b=>d.has(b)),f=x.useMemo(()=>Ere.map(v=>{if(v.flatLink){const j=u(v.flatLink.reqAny);return{...v,_visible:j}}const b=(v.items||[]).map(j=>({...j,_visible:u(j.reqAny)})),w=b.some(j=>j._visible);return{...v,items:b,_visible:w}}).filter(v=>v._visible),[d,c]),p=v=>v.flatLink?r.pathname.startsWith(v.flatLink.to):(v.items||[]).some(b=>r.pathname.startsWith(b.to)),[h,m]=x.useState({});x.useEffect(()=>{const v={};f.forEach(b=>{v[b.key]=p(b)}),m(b=>({...b,...v}))},[r.pathname]);const g=v=>m(b=>({...b,[v]:!b[v]})),y=s?"md:w-16":"md:w-64";return o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:l,className:`fixed inset-0 z-40 bg-black/35 backdrop-blur-sm transition-opacity md:hidden ${i?"opacity-100":"pointer-events-none opacity-0"}`}),o.jsxs("aside",{className:["z-50 bg-white border-r transition-all duration-300 ease-out","fixed left-0 top-0 h-[100dvh] w-[86vw] max-w-sm md:w-auto",i?"translate-x-0":"-translate-x-full","md:static md:translate-x-0 md:sticky md:top-0 md:h-[100dvh]",y,"grid grid-rows-[auto,1fr,auto] min-h-0","overflow-x-hidden overflow-y-hidden"].join(" "),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-3",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-xl bg-blue-600/10 ring-1 ring-blue-600/20",children:o.jsx("span",{className:"text-xs font-bold text-blue-700",children:"NH"})}),!s&&o.jsx("div",{className:"truncate text-sm font-semibold tracking-tight",children:"NABH-Standard"})]}),o.jsx("button",{onClick:l,className:"md:hidden inline-flex h-8 w-8 items-center justify-center rounded-xl hover:bg-gray-50 active:scale-95 transition","aria-label":"Close sidebar",children:o.jsx(Is,{className:"h-5 w-5"})}),o.jsx("button",{onClick:a,className:"hidden md:inline-flex h-8 w-8 items-center justify-center rounded-xl hover:bg-gray-50 active:scale-95 transition","aria-label":s?"Expand sidebar":"Collapse sidebar",title:s?"Expand":"Collapse",children:s?o.jsx(u3,{className:"h-5 w-5"}):o.jsx(d3,{className:"h-5 w-5"})})]}),o.jsxs("nav",{className:"min-h-0 flex-1 overflow-y-auto no-scrollbar y-fade px-2 pb-4 pt-1 space-y-1 overscroll-contain touch-pan-y",children:[f.map(v=>{if(v.flatLink){const N=v.icon||ea;return o.jsxs(wP,{to:v.flatLink.to,onClick:l,className:({isActive:S})=>["group relative flex h-10 items-center gap-3 rounded-xl px-3 text-sm leading-none transition-colors duration-200 ease-out hover:bg-gray-50 active:scale-[0.99]",S?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700",s?"justify-center":""].join(" "),title:s?v.label:void 0,children:[o.jsx(N,{className:"h-5 w-5 shrink-0"}),!s&&o.jsx("span",{className:"transition-all duration-300",children:v.label})]},v.key)}const b=v.icon||ea,w=!!h[v.key]&&!s,j=p(v);return o.jsxs("div",{className:"rounded-xl",children:[o.jsxs("button",{type:"button",onClick:()=>s?null:g(v.key),className:["w-full flex items-center gap-3 rounded-xl px-3 h-10 text-sm transition-colors duration-200 ease-out",j?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700 hover:bg-gray-50",s?"justify-center":"justify-between"].join(" "),title:s?v.label:void 0,children:[o.jsxs("span",{className:"flex items-center gap-3",children:[o.jsx(b,{className:"h-5 w-5 shrink-0"}),!s&&o.jsx("span",{className:"font-medium",children:v.label})]}),!s&&o.jsx(QN,{className:["h-4 w-4 transition-transform",w?"rotate-180":""].join(" ")})]}),w&&o.jsx("div",{className:"mt-1 space-y-1 pl-9",children:v.items.filter(N=>N._visible).map(N=>{const S=N.icon||ea;return o.jsxs(wP,{to:N.to,onClick:l,className:({isActive:_})=>["group relative flex h-9 items-center gap-2 rounded-lg px-2 text-sm leading-none transition-colors duration-200 ease-out hover:bg-gray-50 active:scale-[0.99]",_?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700"].join(" "),children:[o.jsx(S,{className:"h-[18px] w-[18px] shrink-0"}),o.jsx("span",{children:N.label})]},N.key)})})]},v.key)}),f.length===0&&o.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:"No modules granted. Contact administrator."})]}),o.jsx("div",{className:"px-3 pb-3",children:s?o.jsx("div",{className:"grid place-items-center text-[10px] text-gray-400",children:"v1.0"}):o.jsx("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-3 text-[11px] text-gray-500",children:"Tip: Click the chevron to collapse the sidebar."})})]})]})}function Mre(){const{user:t,logout:n,fetchProfile:r}=$t(),{toggleMobile:s}=d$(),[a,i]=x.useState(new Date),[l,c]=x.useState(typeof navigator<"u"?navigator.onLine:!0),[d,u]=x.useState(!1),[f,p]=x.useState(!1),[h,m]=x.useState(!1);x.useEffect(()=>{const N=setInterval(()=>i(new Date),1e3);return()=>clearInterval(N)},[]),x.useEffect(()=>{const N=()=>c(navigator.onLine);return window.addEventListener("online",N),window.addEventListener("offline",N),()=>{window.removeEventListener("online",N),window.removeEventListener("offline",N)}},[]);const g=x.useMemo(()=>t?t.is_admin?"Admin":Array.isArray(t.roles)&&t.roles.length?t.roles[0]:"User":"",[t]),y=x.useMemo(()=>{try{return a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return a.toTimeString().slice(0,8)}},[a]),v=()=>{p(!0),setTimeout(()=>window.location.reload(),120)},b=async()=>{m(!0);try{await r()}finally{setTimeout(()=>m(!1),500)}},w=o.jsx("svg",{viewBox:"0 0 24 24",className:"h-9 w-9 text-gray-300","aria-hidden":"true",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6.75a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.5 20.25a8.25 8.25 0 1 1 15 0v.75H4.5v-.75Z"})}),j=({ok:N})=>o.jsx("span",{title:N?"Online":"Offline",className:`inline-block h-2.5 w-2.5 rounded-full ${N?"bg-emerald-500":"bg-rose-500"} ring-2 ring-white`});return o.jsx("header",{className:"sticky top-0 z-30 bg-blue-900 text-white",children:o.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between gap-3 px-4 py-2 sm:px-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"md:hidden inline-flex items-center justify-center rounded-xl p-2 ring-1 ring-white/20 hover:bg-white/10 active:scale-95 transition",onClick:s,"aria-label":"Open menu",children:o.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7h16M4 12h16M4 17h16"})})}),o.jsx("h1",{className:"text-lg font-semibold tracking-tight sm:text-xl",children:"NUTRYAH"})]}),o.jsxs("div",{className:"hidden items-center gap-3 sm:flex",children:[o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm",children:[o.jsx(j,{ok:l}),o.jsx("span",{className:"tabular-nums",children:y})]}),o.jsxs("button",{onClick:b,className:`group inline-flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm transition ${h?"animate-pulse":"hover:bg-white/15"}`,title:"Sync data",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${h?"animate-spin":"group-hover:rotate-90"} transition`,stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8V4m0 0h4m-4 0l2 2M8 16v4m0 0H4m4 0-2-2M6 8a6 6 0 1 1 12 0 6 6 0 0 1-12 0Z"})}),o.jsx("span",{children:"Sync"})]}),o.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm transition hover:bg-white/15 active:scale-95",title:"Refresh page",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${f?"animate-spin":""} transition`,stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992V4.356M21 12a9 9 0 1 1-3-6.708"})}),o.jsx("span",{children:"Refresh"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>u(N=>!N),className:"group inline-flex items-center gap-3 rounded-2xl border border-white/15 bg-white/10 px-2.5 py-1.5 transition hover:bg-white/15","aria-haspopup":"menu","aria-expanded":d,title:"Account",children:[o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute -right-0.5 -top-0.5 rounded-full bg-emerald-500 p-1 ring-2 ring-blue-900"}),w]}),o.jsx("div",{className:"hidden min-w-[9rem] text-left sm:block",children:o.jsxs("div",{className:"leading-tight",children:[o.jsx("div",{className:"truncate text-sm font-medium",children:(t==null?void 0:t.name)||""}),o.jsx("div",{className:"truncate text-[11px] text-white/70",children:g})]})}),o.jsx("svg",{viewBox:"0 0 24 24",className:`hidden h-4 w-4 text-white/70 sm:block transition ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9l6 6 6-6"})})]}),o.jsxs("div",{className:`absolute right-0 mt-2 w-64 origin-top-right rounded-2xl border border-gray-200 bg-gray-900 p-3 shadow-lg transition ${d?"scale-100 opacity-100":"pointer-events-none scale-95 opacity-0"}`,children:[o.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[o.jsx("div",{className:"shrink-0 ",children:w}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"truncate text-sm font-semibold text-gray-100",children:(t==null?void 0:t.name)||""}),o.jsx("div",{className:"truncate text-xs text-gray-300",children:g}),o.jsx("div",{className:"truncate text-[11px] text-gray-300",children:t==null?void 0:t.email})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsxs("button",{onClick:b,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm hover:bg-gray-50 hover:text-black/90",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${h?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 1 13.5-4.5M19.5 12A7.5 7.5 0 0 1 6 16.5M3 12h3m12 0h3"})}),"Sync data"]}),o.jsxs("button",{onClick:v,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm hover:bg-gray-50 hover:text-black/90",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${f?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992V4.356M21 12a9 9 0 1 1-3-6.708"})}),"Refresh page"]}),o.jsx("div",{className:"my-1 h-px bg-gray-100"}),o.jsxs("button",{onClick:n,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm text-rose-600 hover:bg-rose-50",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6A2.25 2.25 0 0 0 5.25 5.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 8l-4 4m0 0 4 4m-4-4h12"})}),"Logout"]})]})]})]})]})})}function Ore(){return o.jsx("div",{className:"min-h-dvh bg-gradient-to-b from-gray-50 to-white",children:o.jsxs("div",{className:"flex min-h-dvh",children:[o.jsx(Tre,{}),o.jsxs("div",{className:"flex min-h-dvh flex-1 flex-col",children:[o.jsx(Mre,{}),o.jsx("main",{className:"flex-1",children:o.jsx("div",{className:"mx-auto w-full max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:o.jsx(ED,{})})})]})]})})}function Rre(){const{user:t,loading:n,fetchProfile:r}=$t(),[s,a]=x.useState(!1),i=localStorage.getItem("access_token"),l=ps();return x.useEffect(()=>{i&&!t&&!n&&(a(!0),r().finally(()=>a(!1)))},[i,t,n,r]),i?s||n||!t&&i?o.jsx("div",{className:"min-h-screen grid place-items-center text-sm",children:"Loading"}):o.jsx(ED,{}):o.jsx(AD,{to:"/auth/login",state:{from:l},replace:!0})}function ha(t){const n=$t(l=>l.user),r=$t(l=>l.modules)||{};if(!t||!n)return!1;if(n.is_admin||(n.roles||[]).some(l=>l.name==="Admin"||l.code==="admin"))return!0;const[a]=t.split(".");return(r[a]||[]).some(l=>l.code===t)}const FS=()=>B.get("/opd/departments"),BS=t=>B.get("/opd/roles",{params:{department_id:t}}),zS=(t,n)=>B.get("/opd/users",{params:{department_id:t,role_id:n}}),hy=t=>B.get("/opd/patients/search",{params:{q:t}}),Ire=t=>B.get("/opd/schedules",{params:{doctor_user_id:t}}),Dre=t=>B.post("/opd/schedules",t),wE=async(t,n)=>{try{return await B.get("/opd/slots",{params:{doctor_user_id:t,date_str:n,detailed:1}})}catch{try{return await B.get("/opd/slots",{params:{doctor_user_id:t,date:n}})}catch{return await B.get("/opd/slots/free",{params:{doctor_user_id:t,date:n}})}}},Lre=t=>B.post("/opd/appointments",t),jE=(t={})=>B.get("/opd/appointments",{params:t}),$re=(t,n)=>B.patch(`/opd/appointments/${t}/status`,{status:n}),Fre=(t,n)=>B.post(`/opd/vitals/${t}`,n),Bre=({doctor_user_id:t,for_date:n})=>B.get("/opd/queue",{params:{doctor_user_id:t,...n?{for_date:n}:{}}}),zre=t=>B.post("/opd/visits",t),Vre=t=>B.get(`/opd/visits/${t}`),Ure=(t,n)=>B.put(`/opd/visits/${t}`,n),Hre=(t,n)=>B.post(`/opd/visits/${t}/prescription`,n),Wre=t=>B.post(`/opd/visits/${t}/prescription/esign`,{}),Kre=(t,n)=>B.post(`/opd/visits/${t}/orders/lab`,n),qre=(t,n)=>B.post(`/opd/visits/${t}/orders/radiology`,n),u$=t=>B.get("/masters/medicines",{params:{q:t}}),Gre=t=>B.post("/masters/medicines",t),f$=t=>B.get("/masters/lab-tests",{params:{q:t}}),Yre=t=>B.post("/masters/lab-tests",t),p$=t=>B.get("/masters/radiology-tests",{params:{q:t}}),Xre=t=>B.post("/masters/radiology-tests",t);function Jre({value:t,onChange:n}){const[r,s]=x.useState([]),[a,i]=x.useState(""),[l,c]=x.useState([]),[d,u]=x.useState(""),[f,p]=x.useState([]),[h,m]=x.useState(!1),[g,y]=x.useState(!1),[v,b]=x.useState("");x.useEffect(()=>{let j=!0;return FS().then(N=>j&&s(N.data||[])).catch(()=>j&&s([])),()=>{j=!1}},[]),x.useEffect(()=>{let j=!0;if(b(""),c([]),u(""),p([]),n==null||n(null),!!a)return y(!0),BS(a).then(N=>{j&&c(N.data||[])}).catch(N=>{var S,_;j&&b(((_=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to load roles")}).finally(()=>{j&&y(!1)}),()=>{j=!1}},[a]),x.useEffect(()=>{let j=!0;if(b(""),p([]),n==null||n(null),!!a)return m(!0),zS(a,d||void 0).then(N=>{j&&p(N.data||[])}).catch(N=>{var S,_;j&&b(((_=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to load users")}).finally(()=>{j&&m(!1)}),()=>{j=!1}},[a,d]);const w=x.useMemo(()=>f.find(j=>j.id===t)||null,[f,t]);return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Department  Role  User"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("select",{className:"input",value:a,onChange:j=>i(j.target.value),children:[o.jsx("option",{value:"",children:"Select department"}),r.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]}),o.jsxs("select",{className:"input",value:d,onChange:j=>u(j.target.value),disabled:!a||g,children:[o.jsx("option",{value:"",children:"All roles"}),l.map(j=>o.jsxs("option",{value:j.id,children:[j.name,typeof j.members=="number"?` (${j.members})`:""]},j.id))]}),o.jsxs("select",{className:"input",value:t||"",onChange:j=>n(Number(j.target.value)),disabled:!a||h||f.length===0,children:[o.jsx("option",{value:"",children:h?"Loading users":"Select user"}),f.map(j=>{var N;return o.jsxs("option",{value:j.id,children:[j.name,(N=j.roles)!=null&&N.length?`  ${j.roles.join(", ")}`:""]},j.id)})]})]}),w&&o.jsxs("div",{className:"rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",o.jsx("span",{className:"font-medium",children:w.name})]}),v&&o.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-2 text-sm text-red-700",children:v})]})}function Qre(){const[t,n]=x.useState(null),[r,s]=x.useState("0"),[a,i]=x.useState("09:00"),[l,c]=x.useState("13:00"),[d,u]=x.useState([]),[f,p]=x.useState(""),h=async()=>{if(!t){u([]);return}const{data:g}=await Ire(t);u(g||[])};x.useEffect(()=>{h()},[t]);const m=async g=>{g.preventDefault(),p(""),await Dre({doctor_user_id:t,weekday:Number(r),start_time:a,end_time:l}),p("Saved."),h()};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Doctor Schedules"}),o.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsx(Jre,{value:t,onChange:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Weekday"}),o.jsx("select",{className:"input",value:r,onChange:g=>s(g.target.value),children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((g,y)=>o.jsx("option",{value:y,children:g},y))})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Start"}),o.jsx("input",{type:"time",className:"input",value:a,onChange:g=>i(g.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"End"}),o.jsx("input",{type:"time",className:"input",value:l,onChange:g=>c(g.target.value)})]})]})]}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"btn",disabled:!t,onClick:m,children:"Add Slot"})}),f&&o.jsx("div",{className:"mt-2 text-sm text-emerald-600",children:f})]}),o.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[o.jsx("h3",{className:"mb-2 font-medium",children:"Existing"}),o.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:[d.map(g=>o.jsx("div",{className:"rounded-xl border px-3 py-2 text-sm",children:o.jsxs("div",{className:"font-medium",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][g.weekday],"  ",g.start_time.slice(0,5),"",g.end_time.slice(0,5)]})},`${g.weekday}-${g.start_time}`)),(!d||d.length===0)&&o.jsx("div",{className:"text-sm text-gray-500",children:"No schedules yet."})]})]})]})}const h$=x.createContext(null);function Zre({children:t,duration:n=3500}){const[r,s]=x.useState([]),a=x.useCallback(c=>{s(d=>d.filter(u=>u.id!==c))},[]),i=x.useCallback((c,d,u={})=>{const f=crypto.randomUUID(),p=u.duration??n;return s(h=>[...h,{id:f,type:c,message:d,duration:p}]),f},[n]),l=x.useMemo(()=>({success:(c,d)=>i("success",c,d),error:(c,d)=>i("error",c,d),warn:(c,d)=>i("warn",c,d),info:(c,d)=>i("info",c,d)}),[i]);return o.jsxs(h$.Provider,{value:l,children:[t,o.jsx("div",{className:"fixed right-4 top-4 z-[9999] flex w-[min(92vw,380px)] flex-col gap-2",children:r.map(c=>o.jsx(tse,{toast:c,onClose:()=>a(c.id)},c.id))})]})}function ese(){const t=x.useContext(h$);if(!t)throw new Error("useToast must be used within <ToastProvider>");return t}function tse({toast:t,onClose:n}){x.useEffect(()=>{const a=setTimeout(n,t.duration);return()=>clearTimeout(a)},[t.duration,n]);const r={success:"border-emerald-200 bg-emerald-50 text-emerald-800",error:"border-rose-200 bg-rose-50 text-rose-800",warn:"border-amber-200 bg-amber-50 text-amber-800",info:"border-blue-200 bg-blue-50 text-blue-800"}[t.type]??"border-gray-200 bg-white text-gray-800",s={success:Od,error:xp,warn:ly,info:GP}[t.type]??GP;return o.jsxs("div",{className:`flex items-start gap-3 rounded-xl border p-3 shadow-sm ${r}`,role:"status","aria-live":"polite",children:[o.jsx(s,{className:"mt-0.5 h-5 w-5"}),o.jsx("div",{className:"flex-1 text-sm",children:t.message}),o.jsx("button",{onClick:n,className:"opacity-70 hover:opacity-100","aria-label":"Close",children:o.jsx(Is,{className:"h-4 w-4"})})]})}function NE(t){const n=t instanceof Date?t:new Date(t),r=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${r}-${s}-${a}`}function SE(t,n){const[r,s]=(n||"00:00").split(":").map(i=>parseInt(i||"0",10)),a=new Date(t+"T00:00:00");return a.setHours(r,s,0,0),a}const hu=new Set(["booked","checked_in","in_progress"]);function nse({status:t}){const n={booked:"bg-blue-50 text-blue-700 ring-blue-100",checked_in:"bg-amber-50 text-amber-700 ring-amber-100",in_progress:"bg-purple-50 text-purple-700 ring-purple-100",completed:"bg-emerald-50 text-emerald-700 ring-emerald-100",no_show:"bg-gray-50 text-gray-600 ring-gray-100",cancelled:"bg-rose-50 text-rose-700 ring-rose-100"},r=n[t]??n.booked;return o.jsx("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs ring-1 ${r}`,children:String(t||"").replace("_"," ")})}function rse({has:t}){return t?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100",children:[o.jsx(Od,{className:"h-3.5 w-3.5"})," vitals done"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-rose-50 px-2 py-0.5 text-[11px] font-medium text-rose-700 ring-1 ring-rose-100",children:[o.jsx(xp,{className:"h-3.5 w-3.5"})," vitals pending"]})}function sse({value:t,onSelect:n}){const[r,s]=x.useState([]),[a,i]=x.useState(""),[l,c]=x.useState([]),[d,u]=x.useState(""),[f,p]=x.useState([]),[h,m]=x.useState(!1);x.useEffect(()=>{FS().then(y=>s(y.data||[]))},[]),x.useEffect(()=>{if(!a){c([]),u(""),p([]),n==null||n({doctorId:null,departmentId:null});return}m(!0),BS(a).then(y=>c(y.data||[])).finally(()=>m(!1))},[a]),x.useEffect(()=>{if(!a){p([]);return}m(!0),zS(a,d||void 0).then(y=>p(y.data||[])).finally(()=>m(!1))},[a,d]);const g=y=>{i(y),n==null||n({doctorId:null,departmentId:y?Number(y):null})};return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Doctor selection"}),o.jsxs("div",{className:"grid gap-2 md:grid-cols-3",children:[o.jsxs("select",{className:"input",value:a,onChange:y=>g(y.target.value),children:[o.jsx("option",{value:"",children:"Select department"}),r.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]}),o.jsxs("select",{className:"input",value:d,onChange:y=>u(y.target.value),disabled:!a||h,children:[o.jsx("option",{value:"",children:"All roles"}),l.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]}),o.jsxs("select",{className:"input",value:t||"",onChange:y=>n==null?void 0:n({doctorId:Number(y.target.value),departmentId:a?Number(a):null}),disabled:!a||h,children:[o.jsx("option",{value:"",children:"Select user"}),f.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})}function ase(){const t=ese(),[n,r]=x.useState(()=>NE(new Date)),[s,a]=x.useState(null),[i,l]=x.useState(null),[c,d]=x.useState(""),[u,f]=x.useState([]),[p,h]=x.useState(null),[m,g]=x.useState("Consultation"),[y,v]=x.useState([]),[b,w]=x.useState(""),[j,N]=x.useState([]),[S,_]=x.useState(!1),[k,C]=x.useState(!1),[P,E]=x.useState(""),[M,T]=x.useState(null),A=NE(new Date);x.useEffect(()=>{const $=setTimeout(()=>{if(!c){f([]);return}hy(c).then(F=>f(F.data||[]))},250);return()=>clearTimeout($)},[c]),x.useEffect(()=>{if(v([]),w(""),!s||!n)return;(async()=>{const{data:F}=await wE(s,n);let K=[];F&&Array.isArray(F.slots)?K=F.slots:Array.isArray(F)&&(K=F);const J=K.map(Y=>typeof Y=="string"?{start:Y,end:"",status:"free"}:{start:Y.start,end:Y.end||"",status:Y.status||"free"});v(J)})()},[s,n]);const R=async()=>{_(!0);try{const{data:$}=await jE({date_str:n,doctor_id:s||void 0});N($||[])}finally{_(!1)}};x.useEffect(()=>{R()},[n,s]),x.useEffect(()=>{(async()=>{if(T(null),!(!p||!n))try{const{data:F}=await jE({date_str:n}),J=(Array.isArray(F)?F:[]).find(Y=>{var Q;return(Y.patient_id??Y.patientId??((Q=Y.patient)==null?void 0:Q.id))===p&&hu.has(Y.status)});J&&(T(J),t.warn(`This patient already has an active appointment at ${J.slot_start}. Cancel or complete it before booking another.`))}catch{}})()},[p,n]);const O=x.useMemo(()=>{const $=new Set;for(const F of j||[])(!s||F.doctor_user_id===s)&&F.status!=="cancelled"&&F.slot_start&&$.add(F.slot_start);return $},[j,s]),I=x.useMemo(()=>{const $=new Date;return(y||[]).map(F=>{let K=F.status||"free";return O.has(F.start)&&(K="booked"),n<A&&(K="past"),n===A&&SE(n,F.start)<$&&K==="free"&&(K="past"),{...F,status:K}})},[y,O,n,A]),L=$=>{if($&&$<A){t.warn("Past dates are not allowed"),r(A);return}r($||A)},D=async $=>{var K,J,Y,ee;if($.preventDefault(),E(""),!p||!s||!i||!b){E("Please complete all fields"),t.warn("Please fill all the fields");return}if(n<A){t.warn("Cannot book on a past date");return}if(n===A&&SE(n,b)<new Date){t.warn("Selected time is already past");return}const F=I.find(Q=>Q.start===b);if(!F||F.status!=="free"){t.warn("Selected slot is not available");return}if(M&&hu.has(M.status)){t.error(`Duplicate booking blocked. Patient already has an active appointment at ${M.slot_start}.`);return}C(!0);try{await Lre({patient_id:p,department_id:i,doctor_user_id:s,date:n,slot_start:b,purpose:m||"Consultation"}),E("Appointment booked."),t.success("Appointment booked successfully"),d(""),f([]),h(null),g("Consultation"),w(""),await R();const{data:Q}=await wE(s,n),G=((Q==null?void 0:Q.slots)??Q??[]).map(ne=>typeof ne=="string"?{start:ne,end:"",status:"free"}:{start:ne.start,end:ne.end||"",status:ne.status||"free"});v(G),T(null)}catch(Q){const ue=((J=(K=Q==null?void 0:Q.response)==null?void 0:K.data)==null?void 0:J.detail)||((ee=(Y=Q==null?void 0:Q.response)==null?void 0:Y.data)==null?void 0:ee.message)||"Booking failed";E(ue),t.error(ue)}finally{C(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"OPD Appointments"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(XY,{className:"h-4 w-4 text-gray-500"}),o.jsx("input",{type:"date",className:"input",value:n,min:A,onChange:$=>L($.target.value)})]})]}),o.jsxs("form",{onSubmit:D,className:"rounded-2xl border bg-white p-4 shadow-sm",children:[o.jsxs("div",{className:"mb-3 text-sm font-semibold flex items-center gap-2",children:[o.jsx(ur,{className:"h-4 w-4"})," Book appointment"]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsx(sse,{value:s,onSelect:({doctorId:$,departmentId:F})=>{a($||null),l(F||null)}}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Patient"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input w-full",placeholder:"Search by UHID, name, phone",value:c,onChange:$=>d($.target.value)})]}),c&&u.length>0&&o.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-xl border bg-white shadow-lg",children:u.map($=>o.jsxs("button",{type:"button",onClick:()=>{h($.id),d(`${$.uhid}  ${$.first_name} ${$.last_name||""}`.trim())},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:[o.jsxs("div",{className:"font-medium",children:[$.uhid,"  ",$.first_name," ",$.last_name||""]}),o.jsx("div",{className:"text-xs text-gray-500",children:$.phone||$.email||""})]},$.id))})]}),M&&hu.has(M.status)&&o.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg bg-amber-50 px-3 py-1.5 text-xs text-amber-800 ring-1 ring-amber-100",children:[o.jsx(Vc,{className:"h-3.5 w-3.5"}),"Patient already has an active appointment at ",o.jsx("span",{className:"font-semibold",children:M.slot_start})," on this date."]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Purpose"}),o.jsx("input",{className:"input",value:m,onChange:$=>g($.target.value),placeholder:"Consultation"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Available slot"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-6",children:[I.map($=>{const F=$.status!=="free",K=$.start,J=["rounded-xl border px-2.5 py-1.5 text-sm",F?"opacity-40 cursor-not-allowed":"",!F&&(b===$.start?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50")].join(" "),Y=()=>{if(F){$.status==="booked"?t.warn(`Slot ${$.start} is already booked`):$.status==="past"?t.warn(`Slot ${$.start} has already passed`):t.warn(`Slot ${$.start} is not available`);return}w($.start)};return o.jsx("button",{type:"button",onClick:Y,disabled:F,className:J,title:$.status==="booked"?"Booked":$.status==="past"?"Past time":"Free",children:o.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[o.jsx(Vc,{className:"h-4 w-4"}),o.jsx("span",{children:K})]})},$.start)}),(!I||I.length===0)&&o.jsx("div",{className:"col-span-3 sm:col-span-6 text-sm text-gray-500",children:"No slots for the selected day."})]})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{className:"text-sm text-gray-500",children:P}),o.jsx("button",{className:"btn",disabled:k||!p||!s||!i||!b||M&&hu.has(M.status),title:M&&hu.has(M.status)?"Duplicate booking blocked for this patient on this date":"",children:k?"Booking":"Book Appointment"})]})]}),o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[o.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Todays schedule"}),S?o.jsx("div",{className:"text-sm text-gray-500",children:"Loading"}):j.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No appointments."}):o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:j.map($=>o.jsxs("div",{className:"rounded-2xl border p-4",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vc,{className:"h-4 w-4 text-gray-500"}),o.jsxs("span",{className:"text-sm font-semibold",children:[$.slot_start,"  ",$.slot_end]})]}),o.jsx(nse,{status:$.status})]}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nS,{className:"h-4 w-4 text-gray-500"}),o.jsx("span",{className:"font-medium",children:$.patient_name})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["UHID: ",o.jsx("span",{className:"font-medium",children:$.uhid})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Doctor: ",o.jsx("span",{className:"font-medium",children:$.doctor_name})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Department: ",o.jsx("span",{className:"font-medium",children:$.department_name})]})]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsx(rse,{has:$.vitals_registered}),o.jsx("span",{className:"text-[11px] text-gray-500",children:$.purpose||"Consultation"})]})]},$.id))})]})]})}function kE(t){var r;const n=(r=t==null?void 0:t.response)==null?void 0:r.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(s=>s!=null&&s.loc?`${s.loc.join(".")}: ${s.msg}`:s.msg).join(", ")}return"Error"}const z0=["booked","checked_in","in_progress","completed","no_show","cancelled"];function ise(){const t=$t(A=>A.user),n=jr(),[r,s]=x.useState(null),[a,i]=x.useState(()=>new Date().toISOString().slice(0,10)),[l,c]=x.useState([]),[d,u]=x.useState(!1),[f,p]=x.useState(""),[h,m]=x.useState(""),[g,y]=x.useState(""),[v,b]=x.useState(!1),[w,j]=x.useState(!1),N=x.useRef(null);x.useEffect(()=>{t&&!t.is_admin&&t.id&&r==null&&s(t.id)},[t]);const S=async()=>{if(p(""),!r){c([]);return}u(!0);try{const{data:A}=await Bre({doctor_user_id:r,for_date:a});c(Array.isArray(A)?A:[])}catch(A){p(kE(A)),c([])}finally{u(!1)}};x.useEffect(()=>{S()},[r,a]),x.useEffect(()=>{if(!w){N.current&&clearInterval(N.current);return}return N.current=setInterval(S,15e3),()=>{N.current&&clearInterval(N.current)}},[w,r,a]);const _=A=>t?!!(t.is_admin||A!=null&&A.doctor_user_id&&A.doctor_user_id===t.id||A!=null&&A.booked_by&&A.booked_by===t.id):!1,k=A=>{try{if(!(A!=null&&A.time)||!a||["completed","cancelled","no_show"].includes(A.status))return null;const R=new Date(`${a}T${A.time}:00`),O=Math.floor((Date.now()-R.getTime())/6e4);return O>0?O:null}catch{return null}},C=x.useMemo(()=>{let A=l;if(h){const R=h.toLowerCase();A=A.filter(O=>{const I=O.patient||{};return String(I.uhid||"").toLowerCase().includes(R)||String(I.name||"").toLowerCase().includes(R)||String(I.phone||"").toLowerCase().includes(R)})}return g&&(A=A.filter(R=>R.status===g)),v&&(t!=null&&t.id)&&(A=A.filter(R=>R.doctor_user_id===t.id||R.booked_by===t.id)),A},[l,h,g,v,t]),P=x.useMemo(()=>{const A=Object.fromEntries(z0.map(R=>[R,0]));for(const R of C)A[R.status]!=null&&A[R.status]++;return A},[C]),E=async A=>{try{if(!(A!=null&&A.appointment_id))return;const{data:R}=await zre({appointment_id:A.appointment_id});R!=null&&R.id?n(`/opd/visit/${R.id}`):(p("Could not start visit"),await S())}catch(R){p(kE(R))}},M=A=>{if(!(A!=null&&A.visit_id)){p("No visit created yet for this appointment");return}n(`/opd/visit/${A.visit_id}`)},T=()=>{const R=[["time","status","uhid","patient","phone","purpose"].join(",")];C.forEach(D=>{const $=D.patient||{},F=[D.time||"",D.status||"",$.uhid||"",($.name||"").replace(/,/g," "),$.phone||"",D.visit_purpose||""];R.push(F.map(K=>`"${String(K).replace(/"/g,'""')}"`).join(","))});const O=new Blob([R.join(`
`)],{type:"text/csv;charset=utf-8"}),I=URL.createObjectURL(O),L=document.createElement("a");L.href=I,L.download=`queue_${r}_${a}.csv`,L.click(),URL.revokeObjectURL(I)};return o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"OPD Queue"}),o.jsx("div",{className:"text-sm text-gray-600",children:f})]}),o.jsxs("div",{className:"rounded-2xl border bg-white p-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(nS,{className:"h-3.5 w-3.5"})," Doctor (User ID)"]}),o.jsx("input",{className:"input",placeholder:"Enter doctor user id",value:r||"",onChange:A=>s(A.target.value?Number(A.target.value):null)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(fx,{className:"h-3.5 w-3.5"})," Date"]}),o.jsx("input",{type:"date",className:"input",value:a,onChange:A=>i(A.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(En,{className:"h-3.5 w-3.5"})," Search"]}),o.jsx("input",{className:"input",placeholder:"UHID / name / phone",value:h,onChange:A=>m(A.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 items-end",children:[o.jsxs("select",{className:"input",value:g,onChange:A=>y(A.target.value),children:[o.jsx("option",{value:"",children:"All statuses"}),z0.map(A=>o.jsx("option",{value:A,children:A.replace("_"," ")},A))]}),o.jsx("button",{className:"btn",onClick:S,disabled:!r||d,children:d?"Loading":"Refresh"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:v,onChange:A=>b(A.target.checked)}),"Show mine only"]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:w,onChange:A=>j(A.target.checked)}),"Auto-refresh"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2",onClick:T,title:"Export current view to CSV",children:[o.jsx(Xu,{className:"h-4 w-4"})," Export"]}),o.jsxs("button",{type:"button",className:"px-3 py-2 rounded-xl border flex items-center gap-2",onClick:S,title:"Force refresh",children:[o.jsx(BJ,{className:"h-4 w-4"})," Reload"]})]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-3 sm:grid-cols-6 gap-2 text-[11px]",children:z0.map(A=>o.jsxs("div",{className:"rounded-xl border px-2 py-1 text-center",children:[o.jsx("span",{className:"font-medium",children:A.replace("_"," ")}),": ",P[A]||0]},A))})]}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[C.map(A=>{var O,I,L;const R=_(A);return k(A),o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm font-semibold",children:[((O=A.patient)==null?void 0:O.uhid)||((I=A.patient)==null?void 0:I.id),"  ",(L=A.patient)==null?void 0:L.name]}),o.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs text-blue-700",children:A.time})]}),o.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yu,{className:"h-3.5 w-3.5"})," Purpose: ",A.visit_purpose||"Consultation"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ts,{className:"h-3.5 w-3.5"})," Status: ",o.jsx("span",{className:"font-medium",children:A.status})]})]}),R&&o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("button",{className:"btn",onClick:()=>E(A),disabled:!A.appointment_id||A.status==="completed"||A.status==="cancelled",title:A.appointment_id?["completed","cancelled"].includes(A.status)?"Visit is finished":"Start or continue visit":"Missing appointment",children:"Start / Continue"}),o.jsx("button",{className:"btn-outline",onClick:()=>M(A),disabled:!A.visit_id,title:A.visit_id?"Open existing visit":"No visit yet",children:"Open Visit"})]})]},A.appointment_id)}),!d&&C.length===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"No appointments."})]})]})}function ose(t){var r;const n=(r=t==null?void 0:t.response)==null?void 0:r.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(s=>s!=null&&s.loc?`${s.loc.join(".")}: ${s.msg}`:s.msg).join(", ")}return"Validation error"}function lse(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState(null),[l,c]=x.useState({height_cm:"",weight_kg:"",temp_c:"",pulse:"",rr:"",spo2:"",bp_systolic:"",bp_diastolic:"",notes:""}),[d,u]=x.useState(!1),[f,p]=x.useState("");x.useEffect(()=>{const m=setTimeout(()=>{if(!t){s([]);return}hy(t).then(g=>s(g.data||[]))},250);return()=>clearTimeout(m)},[t]);const h=async m=>{if(m.preventDefault(),!a){p("Select a patient");return}u(!0),p("");try{const g={height_cm:l.height_cm?Number(l.height_cm):void 0,weight_kg:l.weight_kg?Number(l.weight_kg):void 0,temp_c:l.temp_c?Number(l.temp_c):void 0,pulse:l.pulse?Number(l.pulse):void 0,rr:l.rr?Number(l.rr):void 0,spo2:l.spo2?Number(l.spo2):void 0,bp_systolic:l.bp_systolic?Number(l.bp_systolic):void 0,bp_diastolic:l.bp_diastolic?Number(l.bp_diastolic):void 0,notes:l.notes||void 0};await Fre(a.id,g),p("Vitals saved"),c({height_cm:"",weight_kg:"",temp_c:"",pulse:"",rr:"",spo2:"",bp_systolic:"",bp_diastolic:"",notes:""})}catch(g){p(ose(g))}finally{u(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Vitals (Triage)"}),o.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[o.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Select patient"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input w-full",placeholder:"Search by UHID, name, phone",value:t,onChange:m=>n(m.target.value)})]}),t&&r.length>0&&o.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-xl border bg-white shadow-lg",children:r.map(m=>o.jsxs("button",{type:"button",onClick:()=>{i(m),n(`${m.uhid}  ${m.first_name} ${m.last_name||""}`)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:[o.jsxs("div",{className:"font-medium",children:[m.uhid,"  ",m.first_name," ",m.last_name||""]}),o.jsx("div",{className:"text-xs text-gray-500",children:m.phone||m.email||""})]},m.id))})]}),a&&o.jsxs("div",{className:"mt-2 rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",o.jsx("span",{className:"font-medium",children:a.uhid}),"  ",a.first_name," ",a.last_name||""]})]}),o.jsxs("form",{onSubmit:h,className:"rounded-2xl border bg-white p-4",children:[o.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Enter vitals"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(g3,{className:"h-3.5 w-3.5"})," Height (cm)"]}),o.jsx("input",{className:"input",value:l.height_cm,onChange:m=>c({...l,height_cm:m.target.value.replace(/[^\d.]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(y3,{className:"h-3.5 w-3.5"})," Weight (kg)"]}),o.jsx("input",{className:"input",value:l.weight_kg,onChange:m=>c({...l,weight_kg:m.target.value.replace(/[^\d.]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(v3,{className:"h-3.5 w-3.5"})," Temp (C)"]}),o.jsx("input",{className:"input",value:l.temp_c,onChange:m=>c({...l,temp_c:m.target.value.replace(/[^\d.]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(Ts,{className:"h-3.5 w-3.5"})," Pulse (bpm)"]}),o.jsx("input",{className:"input",value:l.pulse,onChange:m=>c({...l,pulse:m.target.value.replace(/[^\d]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Respiratory Rate (rr)"}),o.jsx("input",{className:"input",value:l.rr,onChange:m=>c({...l,rr:m.target.value.replace(/[^\d]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(xX,{className:"h-3.5 w-3.5"})," SpO (%)"]}),o.jsx("input",{className:"input",value:l.spo2,onChange:m=>c({...l,spo2:m.target.value.replace(/[^\d]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"BP Systolic"}),o.jsx("input",{className:"input",value:l.bp_systolic,onChange:m=>c({...l,bp_systolic:m.target.value.replace(/[^\d]/g,"")})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"BP Diastolic"}),o.jsx("input",{className:"input",value:l.bp_diastolic,onChange:m=>c({...l,bp_diastolic:m.target.value.replace(/[^\d]/g,"")})})]}),o.jsxs("div",{className:"md:col-span-3 space-y-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Notes"}),o.jsx("textarea",{className:"input min-h-[80px]",value:l.notes,onChange:m=>c({...l,notes:m.target.value})})]})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsx("div",{className:"text-sm text-gray-600",children:f}),o.jsx("button",{className:"btn",disabled:!a||d,children:d?"Saving":"Save Vitals"})]})]})]})}function If(t){var r;const n=(r=t==null?void 0:t.response)==null?void 0:r.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(s=>s!=null&&s.loc?`${s.loc.join(".")}: ${s.msg}`:s.msg).join(", ")}return"Error"}function cse({status:t}){const n=(t||"").toLowerCase(),s={booked:"bg-blue-50 text-blue-700 ring-blue-100",checked_in:"bg-amber-50 text-amber-700 ring-amber-100",in_progress:"bg-purple-50 text-purple-700 ring-purple-100",completed:"bg-emerald-50 text-emerald-700 ring-emerald-100",cancelled:"bg-rose-50 text-rose-700 ring-rose-100",no_show:"bg-gray-50 text-gray-600 ring-gray-100"}[n]??"bg-gray-50 text-gray-600 ring-gray-100";return o.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs ring-1 ${s}`,children:[o.jsx(Vc,{className:"h-3.5 w-3.5"}),(t||"").replace("_"," ")]})}function dse(){const{id:t}=Wl(),n=jr(),r=$t(w=>w.user),[s,a]=x.useState(null),[i,l]=x.useState("soap"),[c,d]=x.useState(!1),[u,f]=x.useState(""),[p,h]=x.useState(""),m=async()=>{const{data:w}=await Vre(t);a(w)};x.useEffect(()=>{m()},[t]);const g=async w=>{w.preventDefault(),d(!0),f("");try{await Ure(t,{chief_complaint:s.chief_complaint||"",symptoms:s.symptoms||"",soap_subjective:s.soap_subjective||"",soap_objective:s.soap_objective||"",soap_assessment:s.soap_assessment||"",plan:s.plan||""}),await m()}catch(j){f(If(j))}finally{d(!1)}},y=x.useMemo(()=>!s||!r?!1:!!(r.is_admin||r.id===s.doctor_id),[s,r]),v=async w=>{if(s!=null&&s.appointment_id){h("");try{await $re(s.appointment_id,w),h(`Status set to ${w.replace("_"," ")}`),await m()}catch(j){h(If(j))}}},b=()=>{window.print()};return s?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"UHID"}),o.jsx("div",{className:"text-sm font-medium",children:s.uhid}),o.jsx("div",{className:"text-lg font-semibold",children:s.patient_name}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Dept: ",o.jsx("span",{className:"font-medium",children:s.department_name})]})]}),o.jsxs("div",{className:"space-y-2 text-right",children:[o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx(cse,{status:s.appointment_status}),o.jsxs("button",{className:"btn-outline hidden md:inline-flex",onClick:b,children:[o.jsx(CX,{className:"h-4 w-4"})," Print / PDF"]})]}),y&&s.appointment_id&&o.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[o.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("completed"),children:[o.jsx(WP,{className:"mr-1 inline h-3.5 w-3.5"}),"Mark Completed"]}),o.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("cancelled"),children:[o.jsx(UY,{className:"mr-1 inline h-3.5 w-3.5"}),"Cancel"]}),o.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("no_show"),children:[o.jsx(xp,{className:"mr-1 inline h-3.5 w-3.5"}),"No-show"]})]}),p&&o.jsx("div",{className:"text-[11px] text-gray-500",children:p}),o.jsxs("div",{className:"text-xs text-gray-500",children:[s.visit_at,"  Dr: ",o.jsx("span",{className:"font-medium",children:s.doctor_name})]})]})]})}),o.jsxs("div",{className:"rounded-2xl border bg-white",children:[o.jsx("div",{className:"sticky top-0 z-10 flex flex-wrap gap-1 border-b bg-white/80 p-2 backdrop-blur",children:[["soap","SOAP Notes",o.jsx(Yu,{className:"h-4 w-4"},"i")],["vitals","Vitals",o.jsx(ur,{className:"h-4 w-4"},"i")],["rx","Prescription",o.jsx(Od,{className:"h-4 w-4"},"i")],["lab","Lab Orders",o.jsx(Ts,{className:"h-4 w-4"},"i")],["ris","Radiology Orders",o.jsx(Ts,{className:"h-4 w-4"},"i")],["summary","Summary",o.jsx(WP,{className:"h-4 w-4"},"i")]].map(([w,j,N])=>o.jsxs("button",{onClick:()=>l(w),className:["px-3 py-2 text-sm rounded-xl inline-flex items-center gap-2",i===w?"bg-blue-50 text-blue-700":"hover:bg-gray-50"].join(" "),children:[N," ",j]},w))}),i==="soap"&&o.jsxs("form",{onSubmit:g,className:"p-4 grid gap-3 md:grid-cols-2",children:[[["chief_complaint","Chief Complaint"],["symptoms","Symptoms"],["soap_subjective","Subjective"],["soap_objective","Objective"],["soap_assessment","Assessment"],["plan","Plan"]].map(([w,j])=>o.jsxs("div",{className:"space-y-1 md:col-span-2",children:[o.jsx("label",{className:"text-sm",children:j}),o.jsx("textarea",{className:"input min-h-[90px]",value:s[w]||"",onChange:N=>a(S=>({...S,[w]:N.target.value}))})]},w)),u&&o.jsx("div",{className:"md:col-span-2 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:u}),o.jsx("div",{className:"md:col-span-2 flex justify-end",children:o.jsx("button",{className:"btn",disabled:c,children:c?"Saving":"Save Notes"})})]}),i==="vitals"&&o.jsx(use,{vitals:s.current_vitals,patientId:s.patient_id}),i==="rx"&&o.jsx(fse,{visitId:t}),i==="lab"&&o.jsx(CE,{visitId:t,kind:"lab"}),i==="ris"&&o.jsx(CE,{visitId:t,kind:"ris"}),i==="summary"&&o.jsx(pse,{v:s})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsxs("div",{children:["Episode: ",o.jsx("span",{className:"font-medium",children:s.episode_id})]}),o.jsx("button",{className:"hover:underline",onClick:()=>n(`/opd/triage?patient_id=${s.patient_id}`),children:"Go to Triage"})]})]}):o.jsx("div",{children:"Loading"})}function use({vitals:t,patientId:n}){const r=jr(),s=()=>r(`/opd/triage?patient_id=${n}`);if(!t)return o.jsxs("div",{className:"p-4 flex items-center justify-between",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"No vitals recorded yet."}),o.jsx("button",{className:"btn",onClick:s,children:"Record Vitals"})]});const a=[{label:"Height",value:t.height_cm?`${t.height_cm} cm`:"",Icon:g3},{label:"Weight",value:t.weight_kg?`${t.weight_kg} kg`:"",Icon:y3},{label:"BMI",value:t.bmi??"",Icon:Ts},{label:"BP",value:t.bp_systolic&&t.bp_diastolic?`${t.bp_systolic}/${t.bp_diastolic} mmHg`:"",Icon:KP},{label:"Pulse",value:t.pulse?`${t.pulse} bpm`:"",Icon:KP},{label:"RR",value:t.rr?`${t.rr} /min`:"",Icon:Ts},{label:"Temp",value:t.temp_c?`${t.temp_c} C`:"",Icon:v3},{label:"SpO",value:t.spo2?`${t.spo2} %`:"",Icon:yX}];return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Recorded at:"," ",o.jsx("span",{className:"font-medium",children:new Date(t.created_at).toLocaleString()})]}),o.jsx("button",{className:"btn",onClick:s,children:"Record New Vitals"})]}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:a.map(({label:i,value:l,Icon:c})=>o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx(c,{className:"h-4 w-4"})," ",i]}),o.jsx("div",{className:"mt-1 text-lg font-semibold",children:l})]},i))}),t.notes&&o.jsxs("div",{className:"rounded-2xl border bg-amber-50 p-3 text-sm",children:[o.jsx("span",{className:"font-medium",children:"Notes:"})," ",t.notes]})]})}function fse({visitId:t}){const[n,r]=x.useState(""),[s,a]=x.useState([]),[i,l]=x.useState([]),[c,d]=x.useState(""),[u,f]=x.useState("");x.useEffect(()=>{let v=!0;return(async()=>{try{const{data:w}=await u$(n);v&&a(w||[])}catch{v&&a([])}})(),()=>{v=!1}},[n]);const p=v=>{l(b=>[...b,{drug_name:v.name,strength:"",frequency:"",duration_days:"",quantity:0,unit_price:Number(v.price_per_unit??0),_form:v.form,_unit:v.unit}])},h=(v,b,w)=>l(j=>j.map((N,S)=>S===v?{...N,[b]:w}:N)),m=v=>l(b=>b.filter((w,j)=>j!==v)),g=async()=>{d(""),f("");try{const v={notes:"",items:i.map(b=>({drug_name:b.drug_name,strength:b.strength||"",frequency:b.frequency||"",duration_days:Number(b.duration_days||0),quantity:Number(b.quantity||0),unit_price:Number(b.unit_price||0)}))};await Hre(t,v),d("Prescription saved.")}catch(v){f(If(v))}},y=async()=>{d(""),f("");try{await Wre(t,{}),d("e-Signed.")}catch(v){f(If(v))}};return o.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Search medicine"}),o.jsx("input",{className:"input",value:n,onChange:v=>r(v.target.value),placeholder:"Type to search"}),o.jsxs("div",{className:"max-h-64 overflow-y-auto rounded-xl border",children:[s.map(v=>o.jsxs("button",{type:"button",onClick:()=>p(v),className:"w-full px-3 py-2 text-left hover:bg-gray-50",children:[o.jsx("div",{className:"text-sm font-medium",children:v.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:[v.form,"  ",v.unit,"  ",v.price_per_unit]})]},v.id)),s.length===0&&o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches."})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium",children:"Prescription"}),o.jsxs("div",{className:"grid gap-2",children:[i.map((v,b)=>o.jsxs("div",{className:"rounded-2xl border p-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold",children:v.drug_name}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:[v._form||"","  ",v._unit||""]})]}),o.jsx("button",{className:"text-xs text-rose-600 hover:underline",onClick:()=>m(b),children:"Remove"})]}),o.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-5",children:[o.jsx("input",{className:"input",placeholder:"Strength",value:v.strength,onChange:w=>h(b,"strength",w.target.value)}),o.jsx("input",{className:"input",placeholder:"Frequency",value:v.frequency,onChange:w=>h(b,"frequency",w.target.value)}),o.jsx("input",{className:"input",placeholder:"Days",value:v.duration_days,onChange:w=>h(b,"duration_days",w.target.value.replace(/\D/g,""))}),o.jsx("input",{className:"input",placeholder:"Qty",value:v.quantity,onChange:w=>h(b,"quantity",w.target.value.replace(/\D/g,""))}),o.jsx("input",{className:"input",placeholder:"Unit Price",value:v.unit_price,onChange:w=>h(b,"unit_price",w.target.value.replace(/[^\d.]/g,""))})]})]},b)),i.length===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"No items yet."})]}),(c||u)&&o.jsx("div",{className:`rounded-xl p-3 text-sm ${u?"bg-red-50 text-red-700 border border-red-200":"text-emerald-700"}`,children:u||c}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:g,children:"Save"}),o.jsx("button",{className:"btn",onClick:y,children:"e-Sign"})]})]})]})}function CE({visitId:t,kind:n}){const[r,s]=x.useState(""),[a,i]=x.useState([]),[l,c]=x.useState(""),[d,u]=x.useState("");x.useEffect(()=>{let p=!0;return(async()=>{try{const m=n==="lab"?f$:p$,{data:g}=await m(r);p&&i(g||[])}catch{p&&i([])}})(),()=>{p=!1}},[r,n]);const f=async p=>{c(""),u("");try{const h={test_ids:[p.id]};n==="lab"?await Kre(t,h):await qre(t,h),c("Order placed.")}catch(h){u(If(h))}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm font-medium",children:[n==="lab"?"Lab":"Radiology"," tests"]}),o.jsx("input",{className:"input w-48",value:r,onChange:p=>s(p.target.value),placeholder:"Search"})]}),(l||d)&&o.jsx("div",{className:`mb-2 rounded-xl p-3 text-sm ${d?"bg-red-50 text-red-700 border border-red-200":"text-emerald-700"}`,children:d||l}),o.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[a.map(p=>o.jsxs("div",{className:"rounded-2xl border p-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:p.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:["",p.price]}),o.jsx("div",{className:"mt-2 flex justify-end",children:o.jsx("button",{className:"btn",onClick:()=>f(p),children:"Order"})})]},p.id)),a.length===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"No tests."})]})]})}function pse({v:t}){return o.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"UHID:"})," ",t.uhid]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Doctor:"})," ",t.doctor_name]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Date/Time:"})," ",t.visit_at]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Status:"})," ",(t.appointment_status||"").replace("_"," ")]}),o.jsx("div",{className:"mt-2 text-gray-700",children:"Use Print/PDF to export a summary with your letterhead."})]})}function hse(){const[t,n]=x.useState("meds");return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"OPD Masters"}),o.jsxs("div",{className:"rounded-2xl border bg-white",children:[o.jsx("div",{className:"flex gap-1 border-b p-2",children:["meds","lab","ris"].map(r=>o.jsx("button",{onClick:()=>n(r),className:`px-3 py-2 text-sm rounded-xl ${t===r?"bg-blue-50 text-blue-700":"hover:bg-gray-50"}`,children:{meds:"Medicines",lab:"Lab Tests",ris:"Radiology Tests"}[r]},r))}),t==="meds"&&o.jsx(mse,{}),t==="lab"&&o.jsx(xse,{}),t==="ris"&&o.jsx(gse,{})]})]})}function mse(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState({name:"",form:"tablet",unit:"per tab",price_per_unit:""}),l=async()=>{const{data:d}=await u$(t);s(d||[])};x.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await Gre({...a,price_per_unit:Number(a.price_per_unit)||0}),i({name:"",form:"tablet",unit:"per tab",price_per_unit:""}),l()};return o.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[o.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-medium",children:"Add Medicine"}),o.jsx("input",{className:"input",placeholder:"Name",value:a.name,onChange:d=>i(u=>({...u,name:d.target.value}))}),o.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[o.jsx("input",{className:"input",placeholder:"Form (tablet/syrup)",value:a.form,onChange:d=>i(u=>({...u,form:d.target.value}))}),o.jsx("input",{className:"input",placeholder:"Unit (per tab/per 100ml)",value:a.unit,onChange:d=>i(u=>({...u,unit:d.target.value}))})]}),o.jsx("input",{className:"input",placeholder:"Price",value:a.price_per_unit,onChange:d=>i(u=>({...u,price_per_unit:d.target.value.replace(/[^\d.]/g,"")}))}),o.jsx("button",{className:"btn",children:"Save"})]}),o.jsxs("div",{children:[o.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:r.map(d=>o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:d.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:[d.form,"  ",d.unit]}),o.jsxs("div",{className:"text-xs",children:["",d.price_per_unit]})]},d.id))})]})]})}function xse(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState({code:"",name:"",price:""}),l=async()=>{const{data:d}=await f$(t);s(d||[])};x.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await Yre({...a,price:Number(a.price)||0}),i({code:"",name:"",price:""}),l()};return o.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[o.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-medium",children:"Add Lab Test"}),o.jsx("input",{className:"input",placeholder:"Code",value:a.code,onChange:d=>i(u=>({...u,code:d.target.value}))}),o.jsx("input",{className:"input",placeholder:"Name",value:a.name,onChange:d=>i(u=>({...u,name:d.target.value}))}),o.jsx("input",{className:"input",placeholder:"Price",value:a.price,onChange:d=>i(u=>({...u,price:d.target.value.replace(/[^\d.]/g,"")}))}),o.jsx("button",{className:"btn",children:"Save"})]}),o.jsxs("div",{children:[o.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:r.map(d=>o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:d.name}),o.jsx("div",{className:"text-xs text-gray-500",children:d.code}),o.jsxs("div",{className:"text-xs",children:["",d.price]})]},d.id))})]})]})}function gse(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState({code:"",name:"",price:""}),l=async()=>{const{data:d}=await p$(t);s(d||[])};x.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await Xre({...a,price:Number(a.price)||0}),i({code:"",name:"",price:""}),l()};return o.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[o.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-medium",children:"Add Radiology Test"}),o.jsx("input",{className:"input",placeholder:"Code",value:a.code,onChange:d=>i(u=>({...u,code:d.target.value}))}),o.jsx("input",{className:"input",placeholder:"Name",value:a.name,onChange:d=>i(u=>({...u,name:d.target.value}))}),o.jsx("input",{className:"input",placeholder:"Price",value:a.price,onChange:d=>i(u=>({...u,price:d.target.value.replace(/[^\d.]/g,"")}))}),o.jsx("button",{className:"btn",children:"Save"})]}),o.jsxs("div",{children:[o.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:r.map(d=>o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:d.name}),o.jsx("div",{className:"text-xs text-gray-500",children:d.code}),o.jsxs("div",{className:"text-xs",children:["",d.price]})]},d.id))})]})]})}function Ie({anyOf:t=[],fallback:n=null,children:r}){const s=$t(d=>d.user),a=$t(d=>d.modules)||{};if(!!(s!=null&&s.is_admin))return r;const l=new Set(Object.values(a).flat().map(d=>typeof d=="string"?d:d==null?void 0:d.code).filter(Boolean));return t.length===0||t.some(d=>l.has(d))?r:n}const VS=()=>B.get("/ipd/wards"),yse=t=>B.post("/ipd/wards",t),vse=t=>B.delete(`/ipd/wards/${t}`),US=(t={})=>B.get("/ipd/rooms",{params:t}),bse=t=>B.post("/ipd/rooms",t),wse=t=>B.delete(`/ipd/rooms/${t}`),ma=(t={})=>B.get("/ipd/beds",{params:t}),jse=t=>B.post("/ipd/beds",t),Nse=t=>B.delete(`/ipd/beds/${t}`),Sse=(t,n)=>B.patch(`/ipd/beds/${t}/state`,n),m$=()=>B.get("/ipd/packages"),kse=t=>B.post("/ipd/packages",t),Cse=t=>B.delete(`/ipd/packages/${t}`),_se=()=>B.get("/ipd/bed-rates"),Pse=t=>B.post("/ipd/bed-rates",t),Ase=t=>B.delete(`/ipd/bed-rates/${t}`),my=(t={})=>B.get("/ipd/admissions",{params:t}),Ese=t=>B.post("/ipd/admissions",t),x$=async t=>{var n,r;try{return await B.get(`/ipd/admissions/${t}`)}catch(s){const a=(n=s==null?void 0:s.response)==null?void 0:n.status;if(a===404||a===405)try{return await B.get(`/ipd/admission/${t}`)}catch(i){const l=(r=i==null?void 0:i.response)==null?void 0:r.status;if(l===404||l===405){const{data:c=[]}=await B.get("/ipd/admissions",{params:{limit:500}}),d=(c||[]).find(u=>Number(u==null?void 0:u.id)===Number(t));if(!d){const u=new Error("Not found");throw u.status=404,u}return{data:d}}throw i}throw s}},Tse=(t,n)=>B.put(`/ipd/admissions/${t}`,n),Mse=t=>B.patch(`/ipd/admissions/${t}/cancel`),Ose=(t,n)=>B.post(`/ipd/admissions/${t}/transfer`,n),Rse=t=>B.get(`/ipd/admissions/${t}/nursing-notes`),Ise=(t,n)=>B.post(`/ipd/admissions/${t}/nursing-notes`,n),Dse=t=>B.get(`/ipd/admissions/${t}/vitals`),Lse=(t,n)=>B.post(`/ipd/admissions/${t}/vitals`,n),$se=t=>B.get(`/ipd/admissions/${t}/io`),Fse=(t,n)=>B.post(`/ipd/admissions/${t}/io`,n),Bse=t=>B.get(`/ipd/admissions/${t}/shift-handovers`),zse=(t,n)=>B.post(`/ipd/admissions/${t}/shift-handovers`,n),Vse=t=>B.get(`/ipd/admissions/${t}/rounds`),Use=(t,n)=>B.post(`/ipd/admissions/${t}/rounds`,n),Hse=t=>B.get(`/ipd/admissions/${t}/progress-notes`),Wse=(t,n)=>B.post(`/ipd/admissions/${t}/progress-notes`,n),Kse=t=>B.get(`/ipd/admissions/${t}/referrals`),qse=(t,n)=>B.post(`/ipd/admissions/${t}/referrals`,n),Gse=t=>B.get(`/ipd/admissions/${t}/discharge-summary`),Yse=(t,n)=>B.post(`/ipd/admissions/${t}/discharge-summary`,n),Xse=t=>B.get(`/ipd/admissions/${t}/discharge-checklist`),Jse=(t,n)=>B.post(`/ipd/admissions/${t}/discharge-checklist`,n),Qse=t=>B.get(`/ipd/admissions/${t}/ot-cases`),Zse=(t,n)=>B.post(`/ipd/admissions/${t}/ot-cases`,n),eae=t=>B.get(`/ipd/ot-cases/${t}/anaesthesia`),tae=t=>B.post("/ipd/anaesthesia",t),nae=(t,n={})=>B.get("/ipd/bed-charges/preview",{params:{admission_id:t,...n}}),xy=t=>B.get(`/patients/${t}`),rae=(...t)=>Ise(...t),sae=(...t)=>Lse(...t);function aae(){return o.jsx(Ie,{anyOf:["ipd.masters.manage","ipd.packages.manage"],children:o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"IPD Masters"}),o.jsx(iae,{}),o.jsx(oae,{}),o.jsx(lae,{})]})})}function iae(){const[t,n]=x.useState([]),[r,s]=x.useState([]),[a,i]=x.useState([]),[l,c]=x.useState(""),d=async()=>{var u,f;c("");try{const[p,h,m]=await Promise.all([VS(),US(),ma()]);n(p.data||[]),s(h.data||[]),i(m.data||[])}catch(p){c(((f=(u=p==null?void 0:p.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load")}};return x.useEffect(()=>{d()},[]),o.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-4",children:[o.jsx("div",{className:"font-medium",children:"Ward  Room  Bed"}),l&&o.jsx("div",{className:"text-rose-700 text-sm",children:l}),o.jsx(nf,{title:"New Ward",onSubmit:async u=>{await yse(u),await d()},fields:[{name:"code",placeholder:"Code",required:!0},{name:"name",placeholder:"Name",required:!0},{name:"floor",placeholder:"Floor"}]}),o.jsx(nf,{title:"New Room",onSubmit:async u=>{await bse(u),await d()},fields:[{name:"ward_id",type:"select",options:t.map(u=>({value:u.id,label:`${u.code}  ${u.name}`})),required:!0},{name:"number",placeholder:"Room number",required:!0},{name:"type",placeholder:"Type (General/Private/ICU)",required:!0}]}),o.jsx(nf,{title:"New Bed",onSubmit:async u=>{await jse(u),await d()},fields:[{name:"room_id",type:"select",options:r.map(u=>({value:u.id,label:`Ward ${u.ward_id}  Room ${u.number} (${u.type})`})),required:!0},{name:"code",placeholder:"Bed code",required:!0}]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Wards"}),o.jsx(rf,{items:t,cols:[["code"],["name"],["floor"]],onDelete:async u=>{await vse(u),await d()}})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Rooms"}),o.jsx(rf,{items:r,cols:[["ward_id","Ward"],["number","Room"],["type","Type"]],onDelete:async u=>{await wse(u),await d()}})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:"Beds"}),o.jsx(rf,{items:a,cols:[["room_id","RoomId"],["code","Code"],["state","State"]],onDelete:async u=>{await Nse(u),await d()}})]})]})]})}function oae(){const[t,n]=x.useState([]),r=async()=>{const{data:s}=await m$();n(s||[])};return x.useEffect(()=>{r()},[]),o.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-3",children:[o.jsx("div",{className:"font-medium",children:"Packages"}),o.jsx(nf,{title:"New Package",onSubmit:async s=>{await kse(s),await r()},fields:[{name:"name",placeholder:"Name",required:!0},{name:"included",placeholder:"Included"},{name:"excluded",placeholder:"Excluded"},{name:"charges",placeholder:"Charges",type:"number"}]}),o.jsx(rf,{items:t,cols:[["name"],["charges"],["included"],["excluded"]],onDelete:async s=>{await Cse(s),await r()}})]})}function lae(){const[t,n]=x.useState([]),r=async()=>{const{data:s}=await _se();n(s||[])};return x.useEffect(()=>{r()},[]),o.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-3",children:[o.jsx("div",{className:"font-medium",children:"Bed Rates"}),o.jsx(nf,{title:"New Bed Rate",onSubmit:async s=>{await Pse(s),await r()},fields:[{name:"room_type",placeholder:"General/Private/ICU",required:!0},{name:"daily_rate",placeholder:"Daily rate",type:"number",required:!0},{name:"effective_from",type:"date",required:!0},{name:"effective_to",type:"date"}]}),o.jsx(rf,{items:t,cols:[["room_type","Room"],["daily_rate","Rate"],["effective_from","From"],["effective_to","To"],["is_active","Active"]],onDelete:async s=>{await Ase(s),await r()}})]})}function nf({title:t,fields:n,onSubmit:r}){const[s,a]=x.useState({}),i=async l=>{l.preventDefault();const c={...s};Object.keys(c).forEach(d=>c[d]===""&&delete c[d]),await r(c),a({})};return o.jsxs("form",{onSubmit:i,className:"rounded-lg border bg-gray-50 p-3 grid gap-3 md:grid-cols-4",children:[o.jsx("div",{className:"md:col-span-4 text-sm font-medium",children:t}),n.map(l=>{var c;return l.type==="select"?o.jsxs("select",{className:"input",value:s[l.name]||"",onChange:d=>a(u=>({...u,[l.name]:d.target.value})),required:l.required,children:[o.jsx("option",{value:"",children:l.placeholder||"Select"}),(c=l.options)==null?void 0:c.map(d=>o.jsx("option",{value:d.value,children:d.label},d.value))]},l.name):o.jsx("input",{className:"input",type:l.type||"text",placeholder:l.placeholder||l.name,value:s[l.name]||"",onChange:d=>a(u=>({...u,[l.name]:d.target.value})),required:l.required},l.name)}),o.jsx("div",{className:"md:col-span-4 flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})})]})}function rf({items:t=[],cols:n=[],onDelete:r}){return o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[n.map(([s,a])=>o.jsx("th",{className:"px-3 py-2",children:a||s},s)),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsxs("tbody",{children:[t.map(s=>o.jsxs("tr",{className:"border-t",children:[n.map(([a])=>o.jsx("td",{className:"px-3 py-2",children:String(s[a]??"")},a)),o.jsx("td",{className:"px-3 py-2",children:o.jsx("button",{className:"btn btn-sm bg-rose-600 hover:bg-rose-700",onClick:()=>r(s.id),children:"Delete"})})]},s.id)),!t.length&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:n.length+1,children:"No items"})})]})]})})}const V0=10;function cae({value:t,onChange:n}){const[r,s]=x.useState(""),[a,i]=x.useState([]),[l,c]=x.useState(0);x.useEffect(()=>{let p=!0;return(async()=>{const{data:m}=await hy(r||"");p&&(i(m||[]),c(0))})(),()=>{p=!1}},[r]);const d=Math.max(1,Math.ceil(((a==null?void 0:a.length)||0)/V0)),u=l*V0,f=x.useMemo(()=>(a||[]).slice(u,u+V0),[a,u]);return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Patient"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search by UHID, name, phone, email",value:r,onChange:p=>s(p.target.value)})]}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"UHID"}),o.jsx("th",{className:"px-3 py-2",children:"Name"}),o.jsx("th",{className:"px-3 py-2",children:"Phone"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsxs("tbody",{children:[f.map(p=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-1",children:p.uhid}),o.jsxs("td",{className:"px-3 py-1",children:[p.first_name," ",p.last_name]}),o.jsx("td",{className:"px-3 py-1",children:p.phone||""}),o.jsx("td",{className:"px-3 py-1",children:o.jsx("button",{className:["btn btn-sm",t===p.id?"bg-emerald-600 hover:bg-emerald-700":""].join(" "),onClick:()=>n(p.id),children:t===p.id?"Selected":"Select"})})]},p.id)),!f.length&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",colSpan:4,children:"No results"})})]})]})}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("button",{className:"px-2 py-1 rounded-lg border disabled:opacity-50",onClick:()=>c(p=>Math.max(0,p-1)),disabled:l===0,children:[o.jsx(d3,{className:"inline h-4 w-4"})," Prev"]}),o.jsxs("div",{children:["Page ",l+1," / ",d]}),o.jsxs("button",{className:"px-2 py-1 rounded-lg border disabled:opacity-50",onClick:()=>c(p=>Math.min(d-1,p+1)),disabled:l>=d-1,children:["Next ",o.jsx(u3,{className:"inline h-4 w-4"})]})]})]})}function g$({value:t,onChange:n}){const[r,s]=x.useState([]),[a,i]=x.useState(""),[l,c]=x.useState([]),[d,u]=x.useState(""),[f,p]=x.useState([]);return x.useEffect(()=>{VS().then(h=>s(h.data||[]))},[]),x.useEffect(()=>{c([]),u(""),p([]),a&&US({ward_id:a}).then(h=>c(h.data||[]))},[a]),x.useEffect(()=>{p([]),d&&ma({room_id:d}).then(h=>p(h.data||[]))},[d]),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Allocate Bed (Ward  Room  Bed)"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("select",{className:"input",value:a,onChange:h=>i(h.target.value),children:[o.jsx("option",{value:"",children:"Select ward"}),r.map(h=>o.jsxs("option",{value:h.id,children:[h.code,"  ",h.name]},h.id))]}),o.jsxs("select",{className:"input",value:d,onChange:h=>u(h.target.value),disabled:!a,children:[o.jsx("option",{value:"",children:"Select room"}),l.map(h=>o.jsxs("option",{value:h.id,children:[h.number,"  ",h.type]},h.id))]}),o.jsxs("select",{className:"input",value:t||"",onChange:h=>n(Number(h.target.value)),disabled:!d,children:[o.jsx("option",{value:"",children:"Select bed"}),f.map(h=>o.jsxs("option",{value:h.id,children:[h.code," ",h.state!=="vacant"?` ${h.state}`:""]},h.id))]})]}),!!t&&(()=>{const h=f.find(m=>m.id===t);return h?o.jsxs("div",{className:"text-xs text-gray-500",children:["Selected: ",o.jsx("span",{className:"font-medium",children:h.code})," (",h.state,")"]}):null})()]})}function HS({value:t,onChange:n,label:r="Department  Role  User"}){const[s,a]=x.useState([]),[i,l]=x.useState(""),[c,d]=x.useState([]),[u,f]=x.useState(""),[p,h]=x.useState([]),[m,g]=x.useState("");return x.useEffect(()=>{FS().then(y=>a(y.data||[]))},[]),x.useEffect(()=>{if(f(""),h([]),g(""),!i){d([]);return}BS(i).then(y=>d(y.data||[]))},[i]),x.useEffect(()=>{h([]),g(""),!(!i||!u)&&zS(i,u).then(y=>h(y.data||[]))},[i,u]),x.useEffect(()=>{n==null||n(m?Number(m):null,{department_id:i?Number(i):null})},[m]),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:r}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[o.jsxs("select",{className:"input",value:i,onChange:y=>l(y.target.value),children:[o.jsx("option",{value:"",children:"Select department"}),s.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]}),o.jsxs("select",{className:"input",value:u,onChange:y=>f(y.target.value),disabled:!i,children:[o.jsx("option",{value:"",children:"Select role"}),c.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]}),o.jsxs("select",{className:"input",value:m,onChange:y=>g(y.target.value),disabled:!u,children:[o.jsx("option",{value:"",children:"Select user"}),p.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})}function dae({kind:t="success",title:n,message:r,onClose:s}){const a={success:{bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-700",Icon:Od},warn:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-800",Icon:ly},error:{bg:"bg-rose-50",border:"border-rose-200",text:"text-rose-700",Icon:xp}},i=a[t]||a.success;return o.jsxs("div",{className:`flex items-start gap-3 rounded-xl border ${i.border} ${i.bg} p-3`,children:[o.jsx(i.Icon,{className:`h-5 w-5 mt-0.5 ${i.text}`}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium",children:n}),r?o.jsx("div",{className:"text-[13px] opacity-90",children:r}):null]}),o.jsx("button",{className:"ml-auto inline-flex h-7 w-7 items-center justify-center rounded-lg hover:bg-black/5",onClick:s,"aria-label":"Close",children:o.jsx(Is,{className:"h-4 w-4"})})]})}const Ta=t=>typeof t=="number"?Number.isInteger(t)&&t>0:typeof t=="string"&&t.trim()!==""&&/^\d+$/.test(t)?Number(t)>0:!1;function uae(){const[t,n]=x.useState([]),[r,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState(null),[d,u]=x.useState(null),[f,p]=x.useState(null),[h,m]=x.useState(null),[g,y]=x.useState({admission_type:"planned",expected_discharge_at:"",package_id:"",payor_type:"cash",insurer_name:"",policy_number:"",preliminary_diagnosis:"",history:"",care_plan:""}),[v,b]=x.useState(null),w=x.useRef(null),j=C=>{w.current&&clearTimeout(w.current),b(C),w.current=setTimeout(()=>b(null),4500)},N=C=>C?C.length===16?`${C}:00`:C:void 0,S=x.useMemo(()=>t.find(C=>C.id===Number(h))||null,[t,h]);x.useEffect(()=>{let C=!0;return(async()=>{var P,E;i(!0);try{const[M,T]=await Promise.all([ma(),m$()]);if(!C)return;n(M.data||[]),s(T.data||[])}catch(M){j({kind:"error",title:"Failed to load lookups",message:((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Please refresh and try again."})}finally{C&&i(!1)}})(),()=>{C=!1}},[]);const _=async C=>{try{const{data:P}=await my({status:"admitted",patient_id:C});return Array.isArray(P)&&P.length>0?P[0]:null}catch{return null}},k=async C=>{var E;if(C.preventDefault(),a)return;if(!Ta(l)){j({kind:"warn",title:"Select a patient",message:"Pick a patient before admitting."});return}if(!Ta(h)){j({kind:"warn",title:"Select a bed",message:"Choose Ward  Room  Bed."});return}if(!t.find(M=>M.id===Number(h))){j({kind:"warn",title:"Selected bed is unavailable",message:"Refresh beds and select again."});return}i(!0);try{const M=await _(Number(l));if(M!=null&&M.id){const R=`ADM-${String(M.id).padStart(6,"0")}`;j({kind:"warn",title:"Patient already admitted",message:`Active admission ${R} exists. Open Tracking / My Admissions to view.`});return}const T={patient_id:Number(l),bed_id:Number(h),admission_type:g.admission_type||"planned",expected_discharge_at:N(g.expected_discharge_at),department_id:Ta(d)?Number(d):void 0,practitioner_user_id:Ta(f)?Number(f):void 0,package_id:Ta(g.package_id)?Number(g.package_id):void 0,payor_type:g.payor_type||"cash",insurer_name:g.insurer_name||"",policy_number:g.policy_number||"",preliminary_diagnosis:g.preliminary_diagnosis||"",history:g.history||"",care_plan:g.care_plan||""};Object.keys(T).forEach(R=>T[R]===void 0&&delete T[R]);const{data:A}=await Ese(T);j({kind:"success",title:"Admission created",message:`Admission ADM-${String(A.id).padStart(6,"0")} has been created successfully.`});try{const R=await ma();n(R.data||[])}catch{}m(null),y(R=>({...R,expected_discharge_at:"",preliminary_diagnosis:"",history:"",care_plan:"",package_id:"",payor_type:"cash",insurer_name:"",policy_number:""}))}catch(M){const T=(E=M==null?void 0:M.response)==null?void 0:E.data,A=Array.isArray(T==null?void 0:T.detail)?T.detail.map(O=>O==null?void 0:O.msg).filter(Boolean).join(", "):(T==null?void 0:T.detail)||M.message||"Failed to create admission",R=/Bed not found/i.test(A)?"Please select a valid bed.":/Bed not available/i.test(A)?"That bed is not available. Pick another one.":A;j({kind:"error",title:"Admission failed",message:R})}finally{i(!1)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[v&&o.jsx(dae,{kind:v.kind,title:v.title,message:v.message,onClose:()=>b(null)}),o.jsxs("div",{className:"rounded-2xl border bg-white shadow-sm",children:[o.jsx("div",{className:"border-b px-4 py-3 font-semibold",children:"New Admission"}),o.jsx(Ie,{anyOf:["ipd.manage"],fallback:o.jsx("div",{className:"p-4 text-xs text-gray-500",children:"Creating admissions requires IPD Manage permission."}),children:o.jsxs("form",{onSubmit:k,className:"p-4 space-y-6 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(cae,{value:l??void 0,onChange:c}),Ta(l)&&o.jsx("div",{className:"rounded-xl border bg-gray-50 px-3 py-2 text-xs text-gray-600",children:"Tip: Well auto-block if this patient already has an active admission."})]}),o.jsx(HS,{label:"Primary Doctor  Department  Role  User",value:f??void 0,onChange:(C,P)=>{p(C||null),u((P==null?void 0:P.department_id)||null)}}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(g$,{value:h??"",onChange:C=>m(Ta(C)?Number(C):null)}),S&&o.jsxs("div",{className:"rounded-xl border bg-white px-3 py-2 text-xs text-gray-700",children:["Selected bed: ",o.jsx("span",{className:"font-medium",children:S.code}),"  State:",o.jsx("span",{className:["rounded-md px-1.5 py-0.5",S.state==="vacant"?"bg-emerald-50 text-emerald-700 border border-emerald-200":S.state==="reserved"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-gray-100 text-gray-700 border"].join(" "),children:S.state}),S.reserved_until&&o.jsxs("span",{className:"ml-2 text-gray-500",children:["until ",new Date(S.reserved_until).toLocaleString()]})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Admission type"}),o.jsx("select",{className:"input",value:g.admission_type,onChange:C=>y({...g,admission_type:C.target.value}),children:["planned","emergency","daycare"].map(C=>o.jsx("option",{value:C,children:C},C))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Expected discharge"}),o.jsx("input",{type:"datetime-local",className:"input",value:g.expected_discharge_at,onChange:C=>y({...g,expected_discharge_at:C.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Package"}),o.jsxs("select",{className:"input",value:g.package_id,onChange:C=>y({...g,package_id:C.target.value}),children:[o.jsx("option",{value:"",children:""}),r.map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Payor type"}),o.jsx("select",{className:"input",value:g.payor_type,onChange:C=>y({...g,payor_type:C.target.value}),children:["cash","insurance","tpa"].map(C=>o.jsx("option",{value:C,children:C},C))})]}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Insurer name",value:g.insurer_name,onChange:C=>y({...g,insurer_name:C.target.value})}),o.jsx("input",{className:"input",placeholder:"Policy number",value:g.policy_number,onChange:C=>y({...g,policy_number:C.target.value})}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Preliminary diagnosis",value:g.preliminary_diagnosis,onChange:C=>y({...g,preliminary_diagnosis:C.target.value})}),o.jsx("input",{className:"input",placeholder:"History",value:g.history,onChange:C=>y({...g,history:C.target.value})}),o.jsx("input",{className:"input",placeholder:"Care plan",value:g.care_plan,onChange:C=>y({...g,care_plan:C.target.value})})]}),o.jsx("div",{className:"flex items-center justify-end gap-2",children:o.jsx("button",{className:"btn",disabled:a||!Ta(l)||!Ta(h),children:a?"Admitting":"Admit"})})]})})]})]})}function Fn(t){const n=$t(i=>i.user),r=$t(i=>i.modules)||{};if(!t||!n)return!1;if(n.is_admin)return!0;const[s]=t.split(".");return(r[s]||[]).some(i=>i.code===t)}function fae({admissionId:t,canWrite:n}){const r=n??Fn("ipd.nursing"),[s,a]=x.useState([]),[i,l]=x.useState({entry_time:"",patient_condition:"",clinical_finding:"",significant_events:"",response_progress:""}),[c,d]=x.useState(!1),[u,f]=x.useState(""),p=async()=>{var m,g;d(!0),f("");try{const{data:y}=await Rse(t);a(y||[])}catch(y){f(((g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to load")}finally{d(!1)}};x.useEffect(()=>{p()},[t]);const h=async m=>{var g,y;m.preventDefault();try{const v={entry_time:i.entry_time?new Date(i.entry_time).toISOString():void 0,patient_condition:i.patient_condition||"",clinical_finding:i.clinical_finding||"",significant_events:i.significant_events||"",response_progress:i.response_progress||""};await rae(t,v),l({entry_time:"",patient_condition:"",clinical_finding:"",significant_events:"",response_progress:""}),p()}catch(v){f(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Save failed")}};return o.jsxs("div",{className:"space-y-4",children:[!r&&o.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-2 text-xs text-gray-600",children:"View-only. You dont have permission to add nursing notes."}),r&&o.jsxs("form",{onSubmit:h,className:"rounded-xl border bg-white p-3 space-y-2",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Entry time"}),o.jsx("input",{type:"datetime-local",className:"input",value:i.entry_time,onChange:m=>l(g=>({...g,entry_time:m.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Patient condition"}),o.jsx("input",{className:"input",value:i.patient_condition,onChange:m=>l(g=>({...g,patient_condition:m.target.value}))})]}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Clinical finding",value:i.clinical_finding,onChange:m=>l(g=>({...g,clinical_finding:m.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Significant events",value:i.significant_events,onChange:m=>l(g=>({...g,significant_events:m.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Response / Progress",value:i.response_progress,onChange:m=>l(g=>({...g,response_progress:m.target.value}))})]}),o.jsx("button",{className:"btn",children:"Add Note"})]}),o.jsxs("div",{className:"rounded-xl border bg-white",children:[o.jsx("div",{className:"px-3 py-2 text-sm font-medium",children:"Recent notes"}),c?o.jsx("div",{className:"px-3 pb-3 text-sm",children:"Loading"}):o.jsxs("div",{className:"divide-y",children:[(s||[]).map(m=>o.jsxs("div",{className:"px-3 py-2 text-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:new Date(m.entry_time).toLocaleString()}),o.jsx("div",{className:"font-medium",children:m.patient_condition||""}),o.jsx("div",{className:"text-gray-700",children:m.clinical_finding}),m.significant_events&&o.jsxs("div",{className:"text-gray-700",children:["Events: ",m.significant_events]}),m.response_progress&&o.jsxs("div",{className:"text-gray-700",children:["Progress: ",m.response_progress]})]},m.id)),(!s||s.length===0)&&o.jsx("div",{className:"px-3 py-3 text-sm text-gray-500",children:"No notes yet."})]})]}),u&&o.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:u})]})}function pae({admissionId:t,canWrite:n}){const r=n??Fn("ipd.nursing"),[s,a]=x.useState([]),[i,l]=x.useState({recorded_at:"",bp_systolic:"",bp_diastolic:"",temp_c:"",rr:"",spo2:"",pulse:""}),[c,d]=x.useState(""),u=async()=>{var p,h;try{const{data:m}=await Dse(t);a(m||[])}catch(m){d(((h=(p=m==null?void 0:m.response)==null?void 0:p.data)==null?void 0:h.detail)||"Failed to load")}};x.useEffect(()=>{u()},[t]);const f=async p=>{var h,m;p.preventDefault(),d("");try{const g={recorded_at:i.recorded_at?new Date(i.recorded_at).toISOString():void 0,bp_systolic:i.bp_systolic?Number(i.bp_systolic):void 0,bp_diastolic:i.bp_diastolic?Number(i.bp_diastolic):void 0,temp_c:i.temp_c?Number(i.temp_c):void 0,rr:i.rr?Number(i.rr):void 0,spo2:i.spo2?Number(i.spo2):void 0,pulse:i.pulse?Number(i.pulse):void 0};await sae(t,g),l({recorded_at:"",bp_systolic:"",bp_diastolic:"",temp_c:"",rr:"",spo2:"",pulse:""}),u()}catch(g){d(((m=(h=g==null?void 0:g.response)==null?void 0:h.data)==null?void 0:m.detail)||"Save failed")}};return o.jsxs("div",{className:"space-y-4",children:[!r&&o.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-2 text-xs text-gray-600",children:"View-only. You dont have permission to record vitals."}),r&&o.jsxs("form",{onSubmit:f,className:"rounded-xl border bg-white p-3 space-y-2",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Recorded at"}),o.jsx("input",{type:"datetime-local",className:"input",value:i.recorded_at,onChange:p=>l(h=>({...h,recorded_at:p.target.value}))})]}),o.jsx("input",{className:"input",placeholder:"BP (Systolic)",value:i.bp_systolic,onChange:p=>l(h=>({...h,bp_systolic:p.target.value}))}),o.jsx("input",{className:"input",placeholder:"BP (Diastolic)",value:i.bp_diastolic,onChange:p=>l(h=>({...h,bp_diastolic:p.target.value}))}),o.jsx("input",{className:"input",placeholder:"Temp C",value:i.temp_c,onChange:p=>l(h=>({...h,temp_c:p.target.value}))}),o.jsx("input",{className:"input",placeholder:"RR",value:i.rr,onChange:p=>l(h=>({...h,rr:p.target.value}))}),o.jsx("input",{className:"input",placeholder:"SpO",value:i.spo2,onChange:p=>l(h=>({...h,spo2:p.target.value}))}),o.jsx("input",{className:"input",placeholder:"Pulse",value:i.pulse,onChange:p=>l(h=>({...h,pulse:p.target.value}))})]}),o.jsx("button",{className:"btn",children:"Record"})]}),o.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Time"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"BP"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Temp"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"RR"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"SpO"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Pulse"})]})}),o.jsxs("tbody",{children:[(s||[]).map(p=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(p.recorded_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:[p.bp_systolic,p.bp_diastolic].filter(Boolean).join("/")||""}),o.jsx("td",{className:"px-3 py-2",children:p.temp_c??""}),o.jsx("td",{className:"px-3 py-2",children:p.rr??""}),o.jsx("td",{className:"px-3 py-2",children:p.spo2??""}),o.jsx("td",{className:"px-3 py-2",children:p.pulse??""})]},p.id)),(!s||s.length===0)&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3 text-gray-500",colSpan:6,children:"No vitals yet."})})]})]})}),c&&o.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:c})]})}function hae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState({recorded_at:"",intake_ml:"",urine_ml:"",drains_ml:"",stools_count:"",remarks:""}),c=async()=>{var f,p;a("");try{const{data:h}=await $se(t);r((h||[]).sort((m,g)=>new Date(g.recorded_at)-new Date(m.recorded_at)))}catch(h){a(((p=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:p.detail)||"Failed to load I/O")}};x.useEffect(()=>{c()},[t]);const d=f=>f?f.length===16?`${f}:00`:f:void 0,u=async f=>{var p,h;f.preventDefault(),a("");try{const m={recorded_at:d(i.recorded_at),intake_ml:i.intake_ml?Number(i.intake_ml):0,urine_ml:i.urine_ml?Number(i.urine_ml):0,drains_ml:i.drains_ml?Number(i.drains_ml):0,stools_count:i.stools_count?Number(i.stools_count):0,remarks:i.remarks||""};await Fse(t,m),l({recorded_at:"",intake_ml:"",urine_ml:"",drains_ml:"",stools_count:"",remarks:""}),await c()}catch(m){a(((h=(p=m==null?void 0:m.response)==null?void 0:p.data)==null?void 0:h.detail)||"Failed to add I/O")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ie,{anyOf:["ipd.nursing"],children:o.jsxs("form",{onSubmit:u,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-6 text-sm",children:[o.jsx("div",{className:"md:col-span-6 font-medium",children:"Record Intake / Output"}),o.jsx("input",{type:"datetime-local",className:"input",value:i.recorded_at,onChange:f=>l(p=>({...p,recorded_at:f.target.value}))}),o.jsx("input",{className:"input",placeholder:"Intake (ml)",value:i.intake_ml,onChange:f=>l(p=>({...p,intake_ml:f.target.value}))}),o.jsx("input",{className:"input",placeholder:"Urine (ml)",value:i.urine_ml,onChange:f=>l(p=>({...p,urine_ml:f.target.value}))}),o.jsx("input",{className:"input",placeholder:"Drains (ml)",value:i.drains_ml,onChange:f=>l(p=>({...p,drains_ml:f.target.value}))}),o.jsx("input",{className:"input",placeholder:"Stools count",value:i.stools_count,onChange:f=>l(p=>({...p,stools_count:f.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Remarks",value:i.remarks,onChange:f=>l(p=>({...p,remarks:f.target.value}))}),o.jsx("div",{className:"md:col-span-6 flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})}),s&&o.jsx("div",{className:"md:col-span-6 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:s})]})}),o.jsx("div",{className:"rounded-xl border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[680px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Time"}),o.jsx("th",{className:"px-3 py-2",children:"Intake"}),o.jsx("th",{className:"px-3 py-2",children:"Urine"}),o.jsx("th",{className:"px-3 py-2",children:"Drains"}),o.jsx("th",{className:"px-3 py-2",children:"Stools"}),o.jsx("th",{className:"px-3 py-2",children:"Remarks"})]})}),o.jsxs("tbody",{children:[(n||[]).map(f=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(f.recorded_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:f.intake_ml}),o.jsx("td",{className:"px-3 py-2",children:f.urine_ml}),o.jsx("td",{className:"px-3 py-2",children:f.drains_ml}),o.jsx("td",{className:"px-3 py-2",children:f.stools_count}),o.jsx("td",{className:"px-3 py-2",children:f.remarks||""})]},f.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:6,children:"No I/O entries"})})]})]})})]})}function mae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState({vital_signs:"",procedure_undergone:"",todays_diagnostics:"",current_condition:"",recent_changes:"",ongoing_treatment:"",possible_changes:"",other_info:""}),c=async()=>{var u,f;a("");try{const{data:p}=await Bse(t);r((p||[]).sort((h,m)=>new Date(m.created_at)-new Date(h.created_at)))}catch(p){a(((f=(u=p==null?void 0:p.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load handovers")}};x.useEffect(()=>{c()},[t]);const d=async u=>{var f,p;u.preventDefault(),a("");try{await zse(t,{...i}),l({vital_signs:"",procedure_undergone:"",todays_diagnostics:"",current_condition:"",recent_changes:"",ongoing_treatment:"",possible_changes:"",other_info:""}),await c()}catch(h){a(((p=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:p.detail)||"Failed to add handover")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ie,{anyOf:["ipd.nursing"],children:o.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[o.jsx("div",{className:"md:col-span-2 font-medium",children:"Shift Handover"}),o.jsx("input",{className:"input",placeholder:"Vital signs",value:i.vital_signs,onChange:u=>l(f=>({...f,vital_signs:u.target.value}))}),o.jsx("input",{className:"input",placeholder:"Procedure undergone",value:i.procedure_undergone,onChange:u=>l(f=>({...f,procedure_undergone:u.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Today's diagnostics/procedures",value:i.todays_diagnostics,onChange:u=>l(f=>({...f,todays_diagnostics:u.target.value}))}),o.jsx("input",{className:"input",placeholder:"Current condition",value:i.current_condition,onChange:u=>l(f=>({...f,current_condition:u.target.value}))}),o.jsx("input",{className:"input",placeholder:"Recent changes",value:i.recent_changes,onChange:u=>l(f=>({...f,recent_changes:u.target.value}))}),o.jsx("input",{className:"input",placeholder:"Ongoing treatment",value:i.ongoing_treatment,onChange:u=>l(f=>({...f,ongoing_treatment:u.target.value}))}),o.jsx("input",{className:"input",placeholder:"Possible changes/complications",value:i.possible_changes,onChange:u=>l(f=>({...f,possible_changes:u.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Other info",value:i.other_info,onChange:u=>l(f=>({...f,other_info:u.target.value}))}),o.jsx("div",{className:"md:col-span-2 flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})}),s&&o.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:s})]})}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Time"}),o.jsx("th",{className:"px-3 py-2",children:"Vitals"}),o.jsx("th",{className:"px-3 py-2",children:"Procedure"}),o.jsx("th",{className:"px-3 py-2",children:"Diagnostics"}),o.jsx("th",{className:"px-3 py-2",children:"Condition"})]})}),o.jsxs("tbody",{children:[(n||[]).map(u=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:u.vital_signs||""}),o.jsx("td",{className:"px-3 py-2",children:u.procedure_undergone||""}),o.jsx("td",{className:"px-3 py-2",children:u.todays_diagnostics||""}),o.jsx("td",{className:"px-3 py-2",children:u.current_condition||""})]},u.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:5,children:"No handovers"})})]})]})})]})}function xae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState(""),c=async()=>{var u,f;a("");try{const{data:p}=await Vse(t);r((p||[]).sort((h,m)=>new Date(m.created_at)-new Date(h.created_at)))}catch(p){a(((f=(u=p==null?void 0:p.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load rounds")}};x.useEffect(()=>{c()},[t]);const d=async u=>{var f,p;u.preventDefault(),a("");try{await Use(t,{notes:i||""}),l(""),await c()}catch(h){a(((p=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:p.detail)||"Failed to add round")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ie,{anyOf:["ipd.doctor"],children:o.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 text-sm space-y-2",children:[o.jsx("div",{className:"font-medium",children:"Add Round Note"}),o.jsx("textarea",{className:"input",rows:3,placeholder:"Notes",value:i,onChange:u=>l(u.target.value)}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})}),s&&o.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:s})]})}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Time"}),o.jsx("th",{className:"px-3 py-2",children:"Notes"})]})}),o.jsxs("tbody",{children:[(n||[]).map(u=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:u.notes||""})]},u.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:2,children:"No rounds"})})]})]})})]})}function gae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState({observation:"",plan:""}),c=async()=>{var u,f;a("");try{const{data:p}=await Hse(t);r((p||[]).sort((h,m)=>new Date(m.created_at)-new Date(h.created_at)))}catch(p){a(((f=(u=p==null?void 0:p.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load progress notes")}};x.useEffect(()=>{c()},[t]);const d=async u=>{var f,p;u.preventDefault(),a("");try{await Wse(t,{observation:i.observation||"",plan:i.plan||""}),l({observation:"",plan:""}),await c()}catch(h){a(((p=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:p.detail)||"Failed to add progress note")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ie,{anyOf:["ipd.doctor"],children:o.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[o.jsx("div",{className:"md:col-span-2 font-medium",children:"New Progress Note"}),o.jsx("textarea",{className:"input",rows:3,placeholder:"Observation",value:i.observation,onChange:u=>l(f=>({...f,observation:u.target.value}))}),o.jsx("textarea",{className:"input",rows:3,placeholder:"Plan",value:i.plan,onChange:u=>l(f=>({...f,plan:u.target.value}))}),o.jsx("div",{className:"md:col-span-2 flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})}),s&&o.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:s})]})}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Time"}),o.jsx("th",{className:"px-3 py-2",children:"Observation"}),o.jsx("th",{className:"px-3 py-2",children:"Plan"})]})}),o.jsxs("tbody",{children:[(n||[]).map(u=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:u.observation||""}),o.jsx("td",{className:"px-3 py-2",children:u.plan||""})]},u.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:3,children:"No progress notes"})})]})]})})]})}function yae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState(null),[c,d]=x.useState(null),[u,f]=x.useState({type:"internal",to_department:"",external_org:"",reason:""}),p=async()=>{var m,g;a("");try{const{data:y}=await Kse(t);r(y||[])}catch(y){a(((g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to load referrals")}};x.useEffect(()=>{p()},[t]);const h=async m=>{var g,y;m.preventDefault();try{const v={type:u.type,to_department:u.to_department||"",to_user_id:i||void 0,external_org:u.external_org||"",reason:u.reason||""};await qse(t,v),f({type:"internal",to_department:"",external_org:"",reason:""}),l(null),d(null),await p()}catch(v){a(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to create referral")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("form",{onSubmit:h,className:"rounded-xl border bg-white p-3 text-sm space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Type"}),o.jsxs("select",{className:"input",value:u.type,onChange:m=>f(g=>({...g,type:m.target.value})),children:[o.jsx("option",{value:"internal",children:"Internal"}),o.jsx("option",{value:"external",children:"External"})]})]}),u.type==="internal"?o.jsx("div",{className:"md:col-span-2",children:o.jsx(HS,{label:"Department  Role  User",value:i||void 0,onChange:(m,g)=>{l(m||null),d((g==null?void 0:g.department_id)||null),f(y=>({...y,to_department:g!=null&&g.department_id?String(g.department_id):""}))}})}):o.jsx("input",{className:"input md:col-span-2",placeholder:"External organization",value:u.external_org,onChange:m=>f(g=>({...g,external_org:m.target.value}))})]}),o.jsx("input",{className:"input",placeholder:"Reason",value:u.reason,onChange:m=>f(g=>({...g,reason:m.target.value}))}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"btn",children:"Save"})}),s&&o.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:s})]}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Type"}),o.jsx("th",{className:"px-3 py-2",children:"To"}),o.jsx("th",{className:"px-3 py-2",children:"Status"})]})}),o.jsxs("tbody",{children:[(n||[]).map(m=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:m.type}),o.jsx("td",{className:"px-3 py-2",children:m.type==="internal"?m.to_user_id?`User#${m.to_user_id}`:`Dept ${m.to_department}`:m.external_org||""}),o.jsx("td",{className:"px-3 py-2",children:m.status})]},m.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:3,children:"No referrals"})})]})]})})]})}function vae({admissionId:t}){const[n,r]=x.useState(null),[s,a]=x.useState(null),[i,l]=x.useState(""),[c,d]=x.useState(!1),[u,f]=x.useState({demographics:"",medical_history:"",treatment_summary:"",medications:"",follow_up:"",icd10_codes:"",finalize:!1}),[p,h]=x.useState({financial_clearance:!1,clinical_clearance:!1,delay_reason:"",submit:!1}),m=async()=>{var b,w;l("");try{const[j,N]=await Promise.all([Gse(t),Xse(t)]),S=(j==null?void 0:j.data)||null;r(S),S&&f({demographics:S.demographics||"",medical_history:S.medical_history||"",treatment_summary:S.treatment_summary||"",medications:S.medications||"",follow_up:S.follow_up||"",icd10_codes:S.icd10_codes||"",finalize:!1});const _=(N==null?void 0:N.data)||null;a(_),_&&h({financial_clearance:!!_.financial_clearance,clinical_clearance:!!_.clinical_clearance,delay_reason:_.delay_reason||"",submit:!1})}catch(j){l(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Failed to load discharge data")}};x.useEffect(()=>{m()},[t]);const g=async b=>{var w,j;b.preventDefault(),d(!0),l("");try{const N={...u};await Yse(t,N),await m()}catch(N){l(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to save summary")}finally{d(!1)}},y=async b=>{var w,j;b.preventDefault(),d(!0),l("");try{await Jse(t,{...p}),await m()}catch(N){l(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to save checklist")}finally{d(!1)}},v=!!(n!=null&&n.finalized);return o.jsx("div",{className:"space-y-4",children:o.jsxs(Ie,{anyOf:["ipd.manage"],children:[o.jsxs("form",{onSubmit:g,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[o.jsx("div",{className:"md:col-span-2 font-medium",children:"Discharge Summary"}),o.jsx("textarea",{className:"input",rows:2,placeholder:"Patient demographics",value:u.demographics,onChange:b=>f(w=>({...w,demographics:b.target.value})),disabled:v}),o.jsx("textarea",{className:"input",rows:2,placeholder:"Medical history",value:u.medical_history,onChange:b=>f(w=>({...w,medical_history:b.target.value})),disabled:v}),o.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Treatment summary",value:u.treatment_summary,onChange:b=>f(w=>({...w,treatment_summary:b.target.value})),disabled:v}),o.jsx("textarea",{className:"input",rows:2,placeholder:"Medications",value:u.medications,onChange:b=>f(w=>({...w,medications:b.target.value})),disabled:v}),o.jsx("textarea",{className:"input",rows:2,placeholder:"Follow-up",value:u.follow_up,onChange:b=>f(w=>({...w,follow_up:b.target.value})),disabled:v}),o.jsx("input",{className:"input md:col-span-2",placeholder:"ICD-10 codes (CSV/JSON)",value:u.icd10_codes,onChange:b=>f(w=>({...w,icd10_codes:b.target.value})),disabled:v}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[o.jsx("div",{className:"text-xs text-gray-500",children:v?`Finalized at ${n!=null&&n.finalized_at?new Date(n.finalized_at).toLocaleString():""}`:"Fill mandatory fields before finalizing"}),o.jsxs("div",{className:"flex items-center gap-3",children:[!v&&o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:u.finalize,onChange:b=>f(w=>({...w,finalize:b.target.checked}))}),o.jsx("span",{children:"Finalize"})]}),o.jsx("button",{className:"btn",disabled:c||v,children:"Save"})]})]}),i&&o.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:i})]}),o.jsxs("form",{onSubmit:y,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[o.jsx("div",{className:"md:col-span-2 font-medium",children:"Discharge Checklist & Clearance"}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p.financial_clearance,onChange:b=>h(w=>({...w,financial_clearance:b.target.checked}))}),o.jsx("span",{children:"Financial clearance"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p.clinical_clearance,onChange:b=>h(w=>({...w,clinical_clearance:b.target.checked}))}),o.jsx("span",{children:"Clinical clearance"})]}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Delay reason (if any)",value:p.delay_reason,onChange:b=>h(w=>({...w,delay_reason:b.target.value}))}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p.submit,onChange:b=>h(w=>({...w,submit:b.target.checked}))}),o.jsx("span",{children:"Submit checklist"})]}),o.jsx("button",{className:"btn",disabled:c,children:"Save"})]}),(s==null?void 0:s.submitted)&&o.jsxs("div",{className:"md:col-span-2 text-xs text-emerald-700",children:["Submitted at ",s!=null&&s.submitted_at?new Date(s.submitted_at).toLocaleString():""]})]})]})})}function bae({admissionId:t}){const[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState({surgery_name:"",scheduled_start:"",scheduled_end:"",status:"planned",surgeon_id:"",anaesthetist_id:"",staff_tags:"",preop_notes:""}),[c,d]=x.useState({ot_case_id:"",pre_assessment:"",anaesthesia_type:"general",intraop_monitoring:"",drugs_administered:"",post_status:""}),u=async()=>{var m,g;a("");try{const{data:y}=await Qse(t);r(y||[])}catch(y){a(((g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to load OT cases")}};x.useEffect(()=>{u()},[t]);const f=async m=>{var g,y;m.preventDefault();try{const v={admission_id:t,surgery_name:i.surgery_name,scheduled_start:i.scheduled_start?i.scheduled_start.length===16?`${i.scheduled_start}:00`:i.scheduled_start:void 0,scheduled_end:i.scheduled_end?i.scheduled_end.length===16?`${i.scheduled_end}:00`:i.scheduled_end:void 0,status:i.status||"planned",surgeon_id:i.surgeon_id?Number(i.surgeon_id):void 0,anaesthetist_id:i.anaesthetist_id?Number(i.anaesthetist_id):void 0,staff_tags:i.staff_tags||"",preop_notes:i.preop_notes||""};await Zse(t,v),l({surgery_name:"",scheduled_start:"",scheduled_end:"",status:"planned",surgeon_id:"",anaesthetist_id:"",staff_tags:"",preop_notes:""}),await u()}catch(v){a(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to add OT case")}},p=async m=>{try{const{data:g}=await eae(m);d({...g,ot_case_id:m})}catch{d(g=>({...g,ot_case_id:m}))}},h=async m=>{var g,y;m.preventDefault();try{const v={ot_case_id:Number(c.ot_case_id),pre_assessment:c.pre_assessment||"",anaesthesia_type:c.anaesthesia_type||"general",intraop_monitoring:c.intraop_monitoring||"",drugs_administered:c.drugs_administered||"",post_status:c.post_status||""};await tae(v),alert("Anaesthesia record saved")}catch(v){alert(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Save failed")}};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("form",{onSubmit:f,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-4 text-sm",children:[o.jsx("div",{className:"md:col-span-4 font-medium",children:"Schedule Surgery"}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Surgery name",value:i.surgery_name,onChange:m=>l(g=>({...g,surgery_name:m.target.value}))}),o.jsx("input",{type:"datetime-local",className:"input",value:i.scheduled_start,onChange:m=>l(g=>({...g,scheduled_start:m.target.value}))}),o.jsx("input",{type:"datetime-local",className:"input",value:i.scheduled_end,onChange:m=>l(g=>({...g,scheduled_end:m.target.value}))}),o.jsx("select",{className:"input",value:i.status,onChange:m=>l(g=>({...g,status:m.target.value})),children:["planned","unplanned","cancelled","completed"].map(m=>o.jsx("option",{value:m,children:m},m))}),o.jsx("input",{className:"input",placeholder:"Surgeon user id (optional)",value:i.surgeon_id,onChange:m=>l(g=>({...g,surgeon_id:m.target.value}))}),o.jsx("input",{className:"input",placeholder:"Anaesthetist user id (optional)",value:i.anaesthetist_id,onChange:m=>l(g=>({...g,anaesthetist_id:m.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Staff tags (CSV/JSON)",value:i.staff_tags,onChange:m=>l(g=>({...g,staff_tags:m.target.value}))}),o.jsx("input",{className:"input md:col-span-4",placeholder:"Pre-op notes",value:i.preop_notes,onChange:m=>l(g=>({...g,preop_notes:m.target.value}))}),o.jsx("div",{className:"md:col-span-4 flex justify-end",children:o.jsx("button",{className:"btn",children:"Add"})})]}),o.jsx("div",{className:"rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Case"}),o.jsx("th",{className:"px-3 py-2",children:"Schedule"}),o.jsx("th",{className:"px-3 py-2",children:"Status"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsxs("tbody",{children:[(n||[]).map(m=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:m.surgery_name}),o.jsxs("td",{className:"px-3 py-2",children:[m.scheduled_start?new Date(m.scheduled_start).toLocaleString():"","  ",m.scheduled_end?new Date(m.scheduled_end).toLocaleString():""]}),o.jsx("td",{className:"px-3 py-2",children:m.status}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("button",{className:"btn btn-sm",onClick:()=>p(m.id),children:"Anaesthesia"})})]},m.id)),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:4,children:"No OT cases"})})]})]})}),(c==null?void 0:c.ot_case_id)&&o.jsxs("form",{onSubmit:h,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[o.jsx("div",{className:"md:col-span-2 font-medium",children:"Anaesthesia / Procedural Sedation"}),o.jsx("textarea",{className:"input",rows:4,placeholder:"Pre-assessment",value:c.pre_assessment,onChange:m=>d(g=>({...g,pre_assessment:m.target.value}))}),o.jsx("select",{className:"input",value:c.anaesthesia_type,onChange:m=>d(g=>({...g,anaesthesia_type:m.target.value})),children:["local","regional","spinal","general"].map(m=>o.jsx("option",{value:m,children:m},m))}),o.jsx("textarea",{className:"input md:col-span-2",rows:4,placeholder:"Intra-op monitoring (JSON/time-series)",value:c.intraop_monitoring,onChange:m=>d(g=>({...g,intraop_monitoring:m.target.value}))}),o.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Drugs administered (JSON)",value:c.drugs_administered,onChange:m=>d(g=>({...g,drugs_administered:m.target.value}))}),o.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Post status / recovery notes",value:c.post_status,onChange:m=>d(g=>({...g,post_status:m.target.value}))}),o.jsx("div",{className:"md:col-span-2 flex justify-end gap-2",children:o.jsx("button",{className:"btn",children:"Save Anaesthesia"})})]})]})}function wae({admissionId:t}){const n=Fn("ipd.view")||Fn("ipd.manage"),[r,s]=x.useState(""),[a,i]=x.useState(""),[l,c]=x.useState(null),[d,u]=x.useState(""),[f,p]=x.useState([]),h=x.useMemo(()=>{const g=new Map;for(const y of f||[])g.set(y.id,y.code);return g},[f]);x.useEffect(()=>{let g=!0;return(async()=>{try{const y=await ma();g&&p((y==null?void 0:y.data)||[])}catch{}try{const{data:y}=await x$(t);if(!g)return;const v=y!=null&&y.admitted_at?new Date(y.admitted_at).toISOString().slice(0,10):"",b=new Date().toISOString().slice(0,10);s(v),i(b)}catch{}})(),()=>{g=!1}},[t]);const m=async()=>{var g,y;u(""),c(null);try{const{data:v}=await nae(t,{...r?{from_date:r}:{},...a?{to_date:a}:{}});c(v)}catch(v){u(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to preview charges")}};return n?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-5 text-sm",children:[o.jsx("div",{className:"md:col-span-5 font-medium",children:"Bed Charge Preview"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"From"}),o.jsx("input",{type:"date",className:"input",value:r,onChange:g=>s(g.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"To"}),o.jsx("input",{type:"date",className:"input",value:a,onChange:g=>i(g.target.value)})]}),o.jsx("div",{className:"md:col-span-3 flex items-end justify-end",children:o.jsx("button",{className:"btn",onClick:m,children:"Preview"})}),d&&o.jsx("div",{className:"md:col-span-5 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:d})]}),l&&o.jsxs("div",{className:"rounded-xl border overflow-hidden bg-white",children:[o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Date"}),o.jsx("th",{className:"px-3 py-2",children:"Room Type"}),o.jsx("th",{className:"px-3 py-2",children:"Bed"}),o.jsx("th",{className:"px-3 py-2",children:"Rate"})]})}),o.jsxs("tbody",{children:[(l.days||[]).map((g,y)=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:new Date(g.date).toLocaleDateString()}),o.jsx("td",{className:"px-3 py-2",children:g.room_type||""}),o.jsx("td",{className:"px-3 py-2",children:g.bed_id&&h.get(g.bed_id)||""}),o.jsx("td",{className:"px-3 py-2",children:Number(g.rate).toFixed(2)})]},y)),o.jsxs("tr",{className:"bg-gray-50 font-medium",children:[o.jsx("td",{className:"px-3 py-2",colSpan:3,children:"Total"}),o.jsx("td",{className:"px-3 py-2",children:Number(l.total_amount||0).toFixed(2)})]})]})]}),!!l.missing_rate_days&&o.jsxs("div",{className:"px-3 py-2 text-xs text-amber-700 bg-amber-50 border-t",children:["Note: ",l.missing_rate_days," day(s) had no bed rate set for the room type."]})]})]}):o.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-2 text-sm text-rose-700",children:"Access denied (need ipd.view)."})}const U0=[{key:"nursing",label:"Nursing Notes",el:fae,writePerm:"ipd.nursing"},{key:"vitals",label:"Vitals",el:pae,writePerm:"ipd.nursing"},{key:"io",label:"Intake/Output",el:hae,writePerm:"ipd.nursing"},{key:"handover",label:"Shift Handover",el:mae,writePerm:"ipd.nursing"},{key:"rounds",label:"Doctor Rounds",el:xae,writePerm:"ipd.doctor"},{key:"progress",label:"Progress Notes",el:gae,writePerm:"ipd.doctor"},{key:"referrals",label:"Referrals",el:yae,writePerm:"ipd.manage"},{key:"ot",label:"OT",el:bae,writePerm:"ipd.manage"},{key:"discharge",label:"Discharge",el:vae,writePerm:"ipd.manage"},{key:"charges",label:"Bed Charges",el:wae,writePerm:"ipd.manage"}];function jae(){var M;const{id:t}=Wl(),n=ps(),r=((M=n==null?void 0:n.state)==null?void 0:M.admission)||null,[s,a]=x.useState(r),[i,l]=x.useState([]),[c,d]=x.useState("nursing"),[u,f]=x.useState(""),[p,h]=x.useState(!1),[m,g]=x.useState(null),y=Fn("ipd.view"),v=Fn("ipd.manage"),b=async()=>{var T,A,R;h(!0),f("");try{const[{data:O},I]=await Promise.all([x$(Number(t)),ma()]);a(O||r||null),l(I.data||[]);try{const{data:L}=await xy(O.patient_id);g(L)}catch{}}catch(O){((O==null?void 0:O.status)||((T=O==null?void 0:O.response)==null?void 0:T.status))===404&&r?a(r):f(((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Failed to load")}finally{h(!1)}};x.useEffect(()=>{b()},[t]);const w=T=>`ADM-${String(T).padStart(6,"0")}`,[j,N]=x.useState({practitioner_user_id:"",department_id:"",expected_discharge_at:"",package_id:"",payor_type:"",insurer_name:"",policy_number:"",preliminary_diagnosis:"",history:"",care_plan:""});x.useEffect(()=>{s&&N({practitioner_user_id:s.practitioner_user_id||"",department_id:s.department_id||"",expected_discharge_at:s.expected_discharge_at?new Date(s.expected_discharge_at).toISOString().slice(0,16):"",package_id:s.package_id||"",payor_type:s.payor_type||"cash",insurer_name:s.insurer_name||"",policy_number:s.policy_number||"",preliminary_diagnosis:s.preliminary_diagnosis||"",history:s.history||"",care_plan:s.care_plan||""})},[s]);const S=T=>T?T.length===16?`${T}:00`:T:void 0,_=async T=>{var A,R;T.preventDefault();try{const O={practitioner_user_id:j.practitioner_user_id?Number(j.practitioner_user_id):void 0,department_id:j.department_id?Number(j.department_id):void 0,expected_discharge_at:S(j.expected_discharge_at),package_id:j.package_id?Number(j.package_id):void 0,payor_type:j.payor_type||"cash",insurer_name:j.insurer_name||"",policy_number:j.policy_number||"",preliminary_diagnosis:j.preliminary_diagnosis||"",history:j.history||"",care_plan:j.care_plan||""};Object.keys(O).forEach(I=>O[I]===void 0&&delete O[I]),await Tse(s.id,O),await b()}catch(O){f(((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Update failed")}},k=async()=>{var T,A;if(window.confirm("Cancel this admission?"))try{await Mse(s.id),window.location.assign("/ipd/tracking")}catch(R){f(((A=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:A.detail)||"Cancel failed")}},C=async T=>{var A,R;try{await Ose(s.id,{to_bed_id:Number(T),reason:"Transfer"}),await b()}catch(O){f(((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Transfer failed")}};if(!y&&!v)return o.jsx("div",{className:"p-4 text-sm text-rose-700",children:"Access denied (need ipd.view)."});if(p&&!s)return o.jsx("div",{className:"p-4 text-sm",children:"Loading"});if(!s)return o.jsx("div",{className:"p-4 text-sm",children:"No data"});const P=()=>{var T;return o.jsxs("div",{className:"rounded-xl border bg-white p-3 text-sm grid md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Admission:"})," ",w(s.id)]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Patient:"})," ",(m==null?void 0:m.uhid)||`P-${s.patient_id}`]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Bed:"})," ",s.current_bed_id&&((T=i.find(A=>A.id===s.current_bed_id))==null?void 0:T.code)||""]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Status:"})," ",s.status]})]})},E=()=>o.jsxs("div",{className:"rounded-xl border bg-white",children:[o.jsx("div",{className:"border-b px-3 py-2 flex flex-wrap gap-2",children:U0.map(T=>{const A=Fn(T.writePerm),R=c===T.key;return o.jsxs("button",{onClick:()=>d(T.key),className:["relative px-3 py-1 rounded-lg text-sm transition",R?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"].join(" "),title:A?"":"View-only",children:[T.label,!A&&o.jsx("span",{className:"ml-2 text-[10px] rounded bg-gray-200 px-1.5 py-0.5 text-gray-700 align-middle",children:"view-only"})]},T.key)})}),o.jsx("div",{className:"p-3",children:(()=>{const T=U0.find(O=>O.key===c)||U0[0],A=T.el,R=Fn(T.writePerm);return o.jsx(A,{admissionId:s.id,canWrite:R})})()})]});return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-lg font-semibold",children:"Patient Tracking "})}),o.jsx(P,{}),v&&o.jsxs("div",{className:"rounded-xl border bg-white p-3 text-sm grid md:grid-cols-2 gap-4",children:[o.jsxs("form",{onSubmit:_,className:"space-y-3",children:[o.jsx("div",{className:"text-sm font-medium",children:"Update Admission"}),o.jsx(HS,{value:j.practitioner_user_id||"",onChange:(T,A)=>{N(R=>({...R,practitioner_user_id:T||"",department_id:(A==null?void 0:A.department_id)||R.department_id}))},label:"Primary Doctor  Department  Role  User"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Expected discharge"}),o.jsx("input",{type:"datetime-local",className:"input",value:j.expected_discharge_at,onChange:T=>N(A=>({...A,expected_discharge_at:T.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Payor type"}),o.jsx("select",{className:"input",value:j.payor_type,onChange:T=>N(A=>({...A,payor_type:T.target.value})),children:["cash","insurance","tpa"].map(T=>o.jsx("option",{value:T,children:T},T))})]}),o.jsx("input",{className:"input",placeholder:"Insurer name",value:j.insurer_name,onChange:T=>N(A=>({...A,insurer_name:T.target.value}))}),o.jsx("input",{className:"input",placeholder:"Policy number",value:j.policy_number,onChange:T=>N(A=>({...A,policy_number:T.target.value}))}),o.jsx("input",{className:"input md:col-span-2",placeholder:"Preliminary diagnosis",value:j.preliminary_diagnosis,onChange:T=>N(A=>({...A,preliminary_diagnosis:T.target.value}))}),o.jsx("input",{className:"input",placeholder:"History",value:j.history,onChange:T=>N(A=>({...A,history:T.target.value}))}),o.jsx("input",{className:"input",placeholder:"Care plan",value:j.care_plan,onChange:T=>N(A=>({...A,care_plan:T.target.value}))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"btn",children:"Save"}),o.jsx("button",{type:"button",className:"btn bg-rose-600 hover:bg-rose-700",onClick:k,children:"Cancel Admission"})]}),u&&o.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:u})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium",children:"Transfer Bed"}),o.jsx(g$,{value:"",onChange:C}),o.jsx("div",{className:"text-xs text-gray-500",children:"Pick a target bed (vacant) to transfer."})]})]}),o.jsx(E,{})]})}function Nae(){const[t,n]=x.useState([]),[r,s]=x.useState([]),[a,i]=x.useState({}),[l,c]=x.useState(!1),d=u=>`ADM-${String(u).padStart(6,"0")}`;return x.useEffect(()=>{let u=!0;return(async()=>{c(!0);const[p,h]=await Promise.all([my({status:"admitted"}),ma()]);if(!u)return;n(p.data||[]),s(h.data||[]);const m=[...new Set((p.data||[]).map(y=>y.patient_id))].slice(0,50),g={};await Promise.all(m.map(async y=>{try{const{data:v}=await xy(y);g[y]=(v==null?void 0:v.uhid)||`P-${y}`}catch{g[y]=`P-${y}`}})),u&&i(g),c(!1)})(),()=>{u=!1}},[]),l?o.jsx("div",{className:"p-4",children:"Loading"}):o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Tracking Admissions (All)"}),o.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Admission"}),o.jsx("th",{className:"px-3 py-2",children:"Patient"}),o.jsx("th",{className:"px-3 py-2",children:"Bed"}),o.jsx("th",{className:"px-3 py-2",children:"Admitted"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsxs("tbody",{children:[(t||[]).map(u=>{var p;const f=((p=r.find(h=>h.id===u.current_bed_id))==null?void 0:p.code)||"";return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:d(u.id)}),o.jsx("td",{className:"px-3 py-2",children:a[u.patient_id]||`P-${u.patient_id}`}),o.jsx("td",{className:"px-3 py-2",children:f}),o.jsx("td",{className:"px-3 py-2",children:new Date(u.admitted_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(Os,{to:`/ipd/admission/${u.id}`,state:{admission:u},className:"text-blue-600",children:"Open"})})]},u.id)}),!(t!=null&&t.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No active admissions"})})]})]})})]})}function Sae(){const t=$t(f=>f.user),[n,r]=x.useState([]),[s,a]=x.useState([]),[i,l]=x.useState({}),[c,d]=x.useState(!1),u=f=>`ADM-${String(f).padStart(6,"0")}`;return x.useEffect(()=>{if(!(t!=null&&t.id))return;let f=!0;return(async()=>{d(!0);const[h,m]=await Promise.all([my({status:"admitted",practitioner_user_id:t.id}),ma()]);if(!f)return;r(h.data||[]),a(m.data||[]);const g=[...new Set((h.data||[]).map(v=>v.patient_id))].slice(0,50),y={};await Promise.all(g.map(async v=>{try{const{data:b}=await xy(v);y[v]=(b==null?void 0:b.uhid)||`P-${v}`}catch{y[v]=`P-${v}`}})),f&&l(y),d(!1)})(),()=>{f=!1}},[t==null?void 0:t.id]),c?o.jsx("div",{className:"p-4",children:"Loading"}):o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"My Admissions"}),o.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Admission"}),o.jsx("th",{className:"px-3 py-2",children:"Patient"}),o.jsx("th",{className:"px-3 py-2",children:"Bed"}),o.jsx("th",{className:"px-3 py-2",children:"Admitted"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsxs("tbody",{children:[(n||[]).map(f=>{var h;const p=((h=s.find(m=>m.id===f.current_bed_id))==null?void 0:h.code)||"";return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:u(f.id)}),o.jsx("td",{className:"px-3 py-2",children:i[f.patient_id]||`P-${f.patient_id}`}),o.jsx("td",{className:"px-3 py-2",children:p}),o.jsx("td",{className:"px-3 py-2",children:new Date(f.admitted_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(Os,{to:`/ipd/admission/${f.id}`,state:{admission:f},className:"text-blue-600",children:"Open"})})]},f.id)}),!(n!=null&&n.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No admissions assigned to you"})})]})]})})]})}function kae(){const[t,n]=x.useState([]),[r,s]=x.useState([]),[a,i]=x.useState({}),[l,c]=x.useState(!1),d=u=>`ADM-${String(u).padStart(6,"0")}`;return x.useEffect(()=>{let u=!0;return(async()=>{c(!0);const[p,h]=await Promise.all([my({status:"discharged"}),ma()]);if(!u)return;n(p.data||[]),s(h.data||[]);const m=[...new Set((p.data||[]).map(y=>y.patient_id))].slice(0,50),g={};await Promise.all(m.map(async y=>{try{const{data:v}=await xy(y);g[y]=(v==null?void 0:v.uhid)||`P-${y}`}catch{g[y]=`P-${y}`}})),u&&i(g),c(!1)})(),()=>{u=!1}},[]),l?o.jsx("div",{className:"p-4",children:"Loading"}):o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Discharged Patients"}),o.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[o.jsx("th",{className:"px-3 py-2",children:"Admission"}),o.jsx("th",{className:"px-3 py-2",children:"Patient"}),o.jsx("th",{className:"px-3 py-2",children:"Bed"}),o.jsx("th",{className:"px-3 py-2",children:"Admitted"}),o.jsx("th",{className:"px-3 py-2",children:"Status"})]})}),o.jsxs("tbody",{children:[(t||[]).map(u=>{var p;const f=((p=r.find(h=>h.id===u.current_bed_id))==null?void 0:p.code)||"";return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:d(u.id)}),o.jsx("td",{className:"px-3 py-2",children:a[u.patient_id]||`P-${u.patient_id}`}),o.jsx("td",{className:"px-3 py-2",children:f}),o.jsx("td",{className:"px-3 py-2",children:new Date(u.admitted_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2",children:u.status})]},u.id)}),!(t!=null&&t.length)&&o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No discharged records"})})]})]})})]})}function Cae(){const[t,n]=x.useState([]),[r,s]=x.useState([]),[a,i]=x.useState([]),[l,c]=x.useState(!1),[d,u]=x.useState(""),[f,p]=x.useState(null),h=async()=>{var w,j;c(!0),u("");try{const[N,S,_]=await Promise.all([VS(),US(),ma()]);n(N.data||[]),s(S.data||[]),i(_.data||[])}catch(N){u(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to load beds")}finally{c(!1)}};x.useEffect(()=>{h()},[]);const m=x.useMemo(()=>{const w={};return r.forEach(j=>{var N;(w[N=j.ward_id]||(w[N]=[])).push(j)}),w},[r]),g=x.useMemo(()=>{const w={};return a.forEach(j=>{var N;(w[N=j.room_id]||(w[N]=[])).push(j)}),w},[a]),y=({s:w})=>{const j=w==="vacant"?"bg-emerald-50 text-emerald-700 border-emerald-200":w==="occupied"?"bg-rose-50 text-rose-700 border-rose-200":w==="reserved"?"bg-amber-50 text-amber-700 border-amber-200":"bg-gray-50 text-gray-700 border-gray-200";return o.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[11px] ${j}`,children:w})},v=async(w,j,N)=>{p({id:w,code:j,action:N,dt:"",note:""})},b=async()=>{var w,j;try{const N={state:f.action};f.action==="reserved"&&(N.reserved_until=f.dt?f.dt.length===16?`${f.dt}:00`:f.dt:null),f.note&&(N.note=f.note),await Sse(f.id,N),p(null),await h()}catch(N){alert(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to set state")}};return o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Bedboard"}),l?o.jsx("div",{children:"Loading"}):d?o.jsx("div",{className:"text-rose-700",children:d}):null,o.jsx("div",{className:"space-y-4",children:t.map(w=>o.jsxs("div",{className:"rounded-xl border bg-white overflow-hidden",children:[o.jsxs("div",{className:"px-3 py-2 text-sm font-semibold",children:[w.code,"  ",w.name]}),(m[w.id]||[]).map(j=>o.jsxs("div",{className:"border-t px-3 py-2",children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["Room ",j.number,"  ",j.type]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(g[j.id]||[]).map(N=>o.jsxs("div",{className:"rounded-lg border px-3 py-2 text-sm",children:[o.jsx("div",{className:"font-medium",children:N.code}),o.jsx("div",{className:"mt-1",children:o.jsx(y,{s:N.state})}),o.jsxs("div",{className:"mt-2 flex gap-2",children:[o.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"reserved"),children:"Reserve"}),o.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"preoccupied"),children:"Preoccupy"}),o.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"vacant"),children:"Vacate"})]})]},N.id))})]},j.id)),!(m[w.id]||[]).length&&o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No rooms"})]},w.id))}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50",children:o.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-4 space-y-3",children:[o.jsxs("div",{className:"text-sm font-semibold",children:["Set ",f.action,"  ",f.code]}),f.action==="reserved"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Reserved until"}),o.jsx("input",{type:"datetime-local",className:"input",value:f.dt,onChange:w=>p(j=>({...j,dt:w.target.value}))})]}),o.jsx("input",{className:"input",placeholder:"Note (optional)",value:f.note,onChange:w=>p(j=>({...j,note:w.target.value}))}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{className:"btn",onClick:b,children:"Save"}),o.jsx("button",{className:"btn bg-gray-100 text-gray-700 hover:bg-gray-200",onClick:()=>p(null),children:"Close"})]})]})})]})}function gy(t,n=250){const[r,s]=x.useState(t);return x.useEffect(()=>{const a=setTimeout(()=>s(t),n);return()=>clearTimeout(a)},[t,n]),r}const Kl=(t={})=>B.get("/pharmacy/medicines",{params:t}),_ae=t=>B.post("/pharmacy/medicines",t),Pae=(t,n)=>B.patch(`/pharmacy/medicines/${t}`,n),Aae=t=>B.delete(`/pharmacy/medicines/${t}`),Eae=async(t="xlsx")=>{const n=t==="csv"?"/pharmacy/medicines/samples/template.csv":"/pharmacy/medicines/samples/template.xlsx",r=await B.get(n,{responseType:"blob"});return r==null?void 0:r.data},Tae=(t,{upsert:n=!0,format:r}={})=>{const s=new FormData;s.append("file",t);const a={upsert:n};return r&&(a.format=r),B.post("/pharmacy/medicines/import",s,{params:a,headers:{"Content-Type":"multipart/form-data"}})},WS=(t={})=>B.get("/pharmacy/suppliers",{params:t}),Mae=t=>B.post("/pharmacy/suppliers",t),Oae=(t,n)=>B.patch(`/pharmacy/suppliers/${t}`,n),Rae=t=>B.delete(`/pharmacy/suppliers/${t}`),Fd=(t={})=>B.get("/pharmacy/locations",{params:t}),Iae=t=>B.post("/pharmacy/locations",t),Dae=(t,n)=>B.patch(`/pharmacy/locations/${t}`,n),Lae=t=>B.delete(`/pharmacy/locations/${t}`),$ae=(t={})=>B.get("/pharmacy/inventory/lots",{params:t}),y$=(t={})=>B.get("/pharmacy/inventory/txns",{params:t}),Fae=t=>B.post("/pharmacy/inventory/adjust",t),Bae=t=>B.post("/pharmacy/inventory/transfer",t),v$=({type:t="low",...n}={})=>t==="expiry"?B.get("/pharmacy/alerts/expiry",{params:n}):B.get("/pharmacy/alerts/low-stock",{params:n}),KS=(t={})=>B.get("/pharmacy/po",{params:t}),zae=t=>B.post("/pharmacy/po",t),Vae=t=>B.post(`/pharmacy/po/${t}/approve`),Uae=t=>B.post(`/pharmacy/po/${t}/cancel`),Hae=(t={})=>B.get("/pharmacy/grn",{params:t}),Wae=t=>B.post("/pharmacy/grn",t),Kae=t=>B.post("/pharmacy/dispense",t),qae=t=>B.post("/pharmacy/dispense/return",null,{params:t}),b$=(t={})=>B.get("/pharmacy/prescriptions",{params:t}),Gae=(t,n)=>B.post(`/pharmacy/prescriptions/items/${t}/status`,n),_E=(t,n)=>B.post(`/pharmacy/prescriptions/${t}/status`,n),Yae=t=>B.post("/pharmacy/prescriptions",t),Xae=t=>B.get("/pharmacy/active-context",{params:{patient_id:t}}),Jae=async t=>{try{const{data:n}=await B.get("/pharmacy/active-context",{params:{patient_id:t}});return n&&Object.keys(n).length?n:null}catch{return null}};var Qae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$e=Qae.reduce((t,n)=>{const r=dd(`Primitive.${n}`),s=x.forwardRef((a,i)=>{const{asChild:l,...c}=a,d=l?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(d,{...c,ref:i})});return s.displayName=`Primitive.${n}`,{...t,[n]:s}},{});function Zae(t,n){t&&jo.flushSync(()=>t.dispatchEvent(n))}var eie="Label",w$=x.forwardRef((t,n)=>o.jsx($e.label,{...t,ref:n,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));w$.displayName=eie;var j$=w$;const tie=$S("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),le=x.forwardRef(({className:t,...n},r)=>o.jsx(j$,{ref:r,className:Ce(tie(),t),...n}));le.displayName=j$.displayName;function Nj(t,[n,r]){return Math.min(r,Math.max(n,t))}function Oe(t,n,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return n==null?void 0:n(a)}}function nie(t,n){const r=x.createContext(n),s=i=>{const{children:l,...c}=i,d=x.useMemo(()=>c,Object.values(c));return o.jsx(r.Provider,{value:d,children:l})};s.displayName=t+"Provider";function a(i){const l=x.useContext(r);if(l)return l;if(n!==void 0)return n;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,a]}function ko(t,n=[]){let r=[];function s(i,l){const c=x.createContext(l),d=r.length;r=[...r,l];const u=p=>{var b;const{scope:h,children:m,...g}=p,y=((b=h==null?void 0:h[t])==null?void 0:b[d])||c,v=x.useMemo(()=>g,Object.values(g));return o.jsx(y.Provider,{value:v,children:m})};u.displayName=i+"Provider";function f(p,h){var y;const m=((y=h==null?void 0:h[t])==null?void 0:y[d])||c,g=x.useContext(m);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,f]}const a=()=>{const i=r.map(l=>x.createContext(l));return function(c){const d=(c==null?void 0:c[t])||i;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return a.scopeName=t,[s,rie(a,...n)]}function rie(...t){const n=t[0];if(t.length===1)return n;const r=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=s.reduce((c,{useScope:d,scopeName:u})=>{const p=d(i)[`__scope${u}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return r.scopeName=n.scopeName,r}function N$(t){const n=t+"CollectionProvider",[r,s]=ko(n),[a,i]=r(n,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:v,children:b}=y,w=ae.useRef(null),j=ae.useRef(new Map).current;return o.jsx(a,{scope:v,itemMap:j,collectionRef:w,children:b})};l.displayName=n;const c=t+"CollectionSlot",d=dd(c),u=ae.forwardRef((y,v)=>{const{scope:b,children:w}=y,j=i(c,b),N=Je(v,j.collectionRef);return o.jsx(d,{ref:N,children:w})});u.displayName=c;const f=t+"CollectionItemSlot",p="data-radix-collection-item",h=dd(f),m=ae.forwardRef((y,v)=>{const{scope:b,children:w,...j}=y,N=ae.useRef(null),S=Je(v,N),_=i(f,b);return ae.useEffect(()=>(_.itemMap.set(N,{ref:N,...j}),()=>void _.itemMap.delete(N))),o.jsx(h,{[p]:"",ref:S,children:w})});m.displayName=f;function g(y){const v=i(t+"CollectionConsumer",y);return ae.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const j=Array.from(w.querySelectorAll(`[${p}]`));return Array.from(v.itemMap.values()).sort((_,k)=>j.indexOf(_.ref.current)-j.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:l,Slot:u,ItemSlot:m},g,s]}var sie=x.createContext(void 0);function yy(t){const n=x.useContext(sie);return t||n||"ltr"}function Zn(t){const n=x.useRef(t);return x.useEffect(()=>{n.current=t}),x.useMemo(()=>(...r)=>{var s;return(s=n.current)==null?void 0:s.call(n,...r)},[])}function aie(t,n=globalThis==null?void 0:globalThis.document){const r=Zn(t);x.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return n.addEventListener("keydown",s,{capture:!0}),()=>n.removeEventListener("keydown",s,{capture:!0})},[r,n])}var iie="DismissableLayer",Sj="dismissableLayer.update",oie="dismissableLayer.pointerDownOutside",lie="dismissableLayer.focusOutside",PE,S$=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qS=x.forwardRef((t,n)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...d}=t,u=x.useContext(S$),[f,p]=x.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=x.useState({}),g=Je(n,k=>p(k)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=f?y.indexOf(f):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=b,S=uie(k=>{const C=k.target,P=[...u.branches].some(E=>E.contains(C));!N||P||(a==null||a(k),l==null||l(k),k.defaultPrevented||c==null||c())},h),_=fie(k=>{const C=k.target;[...u.branches].some(E=>E.contains(C))||(i==null||i(k),l==null||l(k),k.defaultPrevented||c==null||c())},h);return aie(k=>{w===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},h),x.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(PE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),AE(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=PE)}},[f,h,r,u]),x.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),AE())},[f,u]),x.useEffect(()=>{const k=()=>m({});return document.addEventListener(Sj,k),()=>document.removeEventListener(Sj,k)},[]),o.jsx($e.div,{...d,ref:g,style:{pointerEvents:j?N?"auto":"none":void 0,...t.style},onFocusCapture:Oe(t.onFocusCapture,_.onFocusCapture),onBlurCapture:Oe(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Oe(t.onPointerDownCapture,S.onPointerDownCapture)})});qS.displayName=iie;var cie="DismissableLayerBranch",die=x.forwardRef((t,n)=>{const r=x.useContext(S$),s=x.useRef(null),a=Je(n,s);return x.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx($e.div,{...t,ref:a})});die.displayName=cie;function uie(t,n=globalThis==null?void 0:globalThis.document){const r=Zn(t),s=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=c=>{if(c.target&&!s.current){let d=function(){k$(oie,r,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",a.current),a.current=d,n.addEventListener("click",a.current,{once:!0})):d()}else n.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",i),n.removeEventListener("click",a.current)}},[n,r]),{onPointerDownCapture:()=>s.current=!0}}function fie(t,n=globalThis==null?void 0:globalThis.document){const r=Zn(t),s=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!s.current&&k$(lie,r,{originalEvent:i},{discrete:!1})};return n.addEventListener("focusin",a),()=>n.removeEventListener("focusin",a)},[n,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function AE(){const t=new CustomEvent(Sj);document.dispatchEvent(t)}function k$(t,n,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});n&&a.addEventListener(t,n,{once:!0}),s?Zae(a,i):a.dispatchEvent(i)}var H0=0;function C$(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??EE()),document.body.insertAdjacentElement("beforeend",t[1]??EE()),H0++,()=>{H0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),H0--}},[])}function EE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var W0="focusScope.autoFocusOnMount",K0="focusScope.autoFocusOnUnmount",TE={bubbles:!1,cancelable:!0},pie="FocusScope",GS=x.forwardRef((t,n)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[c,d]=x.useState(null),u=Zn(a),f=Zn(i),p=x.useRef(null),h=Je(n,y=>d(y)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let y=function(j){if(m.paused||!c)return;const N=j.target;c.contains(N)?p.current=N:Pi(p.current,{select:!0})},v=function(j){if(m.paused||!c)return;const N=j.relatedTarget;N!==null&&(c.contains(N)||Pi(p.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const S of j)S.removedNodes.length>0&&Pi(c)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const w=new MutationObserver(b);return c&&w.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),w.disconnect()}}},[s,c,m.paused]),x.useEffect(()=>{if(c){OE.add(m);const y=document.activeElement;if(!c.contains(y)){const b=new CustomEvent(W0,TE);c.addEventListener(W0,u),c.dispatchEvent(b),b.defaultPrevented||(hie(vie(_$(c)),{select:!0}),document.activeElement===y&&Pi(c))}return()=>{c.removeEventListener(W0,u),setTimeout(()=>{const b=new CustomEvent(K0,TE);c.addEventListener(K0,f),c.dispatchEvent(b),b.defaultPrevented||Pi(y??document.body,{select:!0}),c.removeEventListener(K0,f),OE.remove(m)},0)}}},[c,u,f,m]);const g=x.useCallback(y=>{if(!r&&!s||m.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(v&&b){const w=y.currentTarget,[j,N]=mie(w);j&&N?!y.shiftKey&&b===N?(y.preventDefault(),r&&Pi(j,{select:!0})):y.shiftKey&&b===j&&(y.preventDefault(),r&&Pi(N,{select:!0})):b===w&&y.preventDefault()}},[r,s,m.paused]);return o.jsx($e.div,{tabIndex:-1,...l,ref:h,onKeyDown:g})});GS.displayName=pie;function hie(t,{select:n=!1}={}){const r=document.activeElement;for(const s of t)if(Pi(s,{select:n}),document.activeElement!==r)return}function mie(t){const n=_$(t),r=ME(n,t),s=ME(n.reverse(),t);return[r,s]}function _$(t){const n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n}function ME(t,n){for(const r of t)if(!xie(r,{upTo:n}))return r}function xie(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function gie(t){return t instanceof HTMLInputElement&&"select"in t}function Pi(t,{select:n=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&gie(t)&&n&&t.select()}}var OE=yie();function yie(){let t=[];return{add(n){const r=t[0];n!==r&&(r==null||r.pause()),t=RE(t,n),t.unshift(n)},remove(n){var r;t=RE(t,n),(r=t[0])==null||r.resume()}}}function RE(t,n){const r=[...t],s=r.indexOf(n);return s!==-1&&r.splice(s,1),r}function vie(t){return t.filter(n=>n.tagName!=="A")}var An=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},bie=Ig[" useId ".trim().toString()]||(()=>{}),wie=0;function eo(t){const[n,r]=x.useState(bie());return An(()=>{r(s=>s??String(wie++))},[t]),n?`radix-${n}`:""}const jie=["top","right","bottom","left"],po=Math.min,Ar=Math.max,bx=Math.round,Sh=Math.floor,ua=t=>({x:t,y:t}),Nie={left:"right",right:"left",bottom:"top",top:"bottom"},Sie={start:"end",end:"start"};function kj(t,n,r){return Ar(t,po(n,r))}function Za(t,n){return typeof t=="function"?t(n):t}function ei(t){return t.split("-")[0]}function Bd(t){return t.split("-")[1]}function YS(t){return t==="x"?"y":"x"}function XS(t){return t==="y"?"height":"width"}const kie=new Set(["top","bottom"]);function ra(t){return kie.has(ei(t))?"y":"x"}function JS(t){return YS(ra(t))}function Cie(t,n,r){r===void 0&&(r=!1);const s=Bd(t),a=JS(t),i=XS(a);let l=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return n.reference[i]>n.floating[i]&&(l=wx(l)),[l,wx(l)]}function _ie(t){const n=wx(t);return[Cj(t),n,Cj(n)]}function Cj(t){return t.replace(/start|end/g,n=>Sie[n])}const IE=["left","right"],DE=["right","left"],Pie=["top","bottom"],Aie=["bottom","top"];function Eie(t,n,r){switch(t){case"top":case"bottom":return r?n?DE:IE:n?IE:DE;case"left":case"right":return n?Pie:Aie;default:return[]}}function Tie(t,n,r,s){const a=Bd(t);let i=Eie(ei(t),r==="start",s);return a&&(i=i.map(l=>l+"-"+a),n&&(i=i.concat(i.map(Cj)))),i}function wx(t){return t.replace(/left|right|bottom|top/g,n=>Nie[n])}function Mie(t){return{top:0,right:0,bottom:0,left:0,...t}}function P$(t){return typeof t!="number"?Mie(t):{top:t,right:t,bottom:t,left:t}}function jx(t){const{x:n,y:r,width:s,height:a}=t;return{width:s,height:a,top:r,left:n,right:n+s,bottom:r+a,x:n,y:r}}function LE(t,n,r){let{reference:s,floating:a}=t;const i=ra(n),l=JS(n),c=XS(l),d=ei(n),u=i==="y",f=s.x+s.width/2-a.width/2,p=s.y+s.height/2-a.height/2,h=s[c]/2-a[c]/2;let m;switch(d){case"top":m={x:f,y:s.y-a.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:p};break;case"left":m={x:s.x-a.width,y:p};break;default:m={x:s.x,y:s.y}}switch(Bd(n)){case"start":m[l]-=h*(r&&u?-1:1);break;case"end":m[l]+=h*(r&&u?-1:1);break}return m}const Oie=async(t,n,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l}=r,c=i.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(n));let u=await l.getElementRects({reference:t,floating:n,strategy:a}),{x:f,y:p}=LE(u,s,d),h=s,m={},g=0;for(let y=0;y<c.length;y++){const{name:v,fn:b}=c[y],{x:w,y:j,data:N,reset:S}=await b({x:f,y:p,initialPlacement:s,placement:h,strategy:a,middlewareData:m,rects:u,platform:l,elements:{reference:t,floating:n}});f=w??f,p=j??p,m={...m,[v]:{...m[v],...N}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await l.getElementRects({reference:t,floating:n,strategy:a}):S.rects),{x:f,y:p}=LE(u,h,d)),y=-1)}return{x:f,y:p,placement:h,strategy:a,middlewareData:m}};async function Df(t,n){var r;n===void 0&&(n={});const{x:s,y:a,platform:i,rects:l,elements:c,strategy:d}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:h=!1,padding:m=0}=Za(n,t),g=P$(m),v=c[h?p==="floating"?"reference":"floating":p],b=jx(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:u,rootBoundary:f,strategy:d})),w=p==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),N=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},S=jx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:w,offsetParent:j,strategy:d}):w);return{top:(b.top-S.top+g.top)/N.y,bottom:(S.bottom-b.bottom+g.bottom)/N.y,left:(b.left-S.left+g.left)/N.x,right:(S.right-b.right+g.right)/N.x}}const Rie=t=>({name:"arrow",options:t,async fn(n){const{x:r,y:s,placement:a,rects:i,platform:l,elements:c,middlewareData:d}=n,{element:u,padding:f=0}=Za(t,n)||{};if(u==null)return{};const p=P$(f),h={x:r,y:s},m=JS(a),g=XS(m),y=await l.getDimensions(u),v=m==="y",b=v?"top":"left",w=v?"bottom":"right",j=v?"clientHeight":"clientWidth",N=i.reference[g]+i.reference[m]-h[m]-i.floating[g],S=h[m]-i.reference[m],_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let k=_?_[j]:0;(!k||!await(l.isElement==null?void 0:l.isElement(_)))&&(k=c.floating[j]||i.floating[g]);const C=N/2-S/2,P=k/2-y[g]/2-1,E=po(p[b],P),M=po(p[w],P),T=E,A=k-y[g]-M,R=k/2-y[g]/2+C,O=kj(T,R,A),I=!d.arrow&&Bd(a)!=null&&R!==O&&i.reference[g]/2-(R<T?E:M)-y[g]/2<0,L=I?R<T?R-T:R-A:0;return{[m]:h[m]+L,data:{[m]:O,centerOffset:R-O-L,...I&&{alignmentOffset:L}},reset:I}}}),Iie=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var r,s;const{placement:a,middlewareData:i,rects:l,initialPlacement:c,platform:d,elements:u}=n,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=Za(t,n);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=ei(a),w=ra(c),j=ei(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(u.floating)),S=h||(j||!y?[wx(c)]:_ie(c)),_=g!=="none";!h&&_&&S.push(...Tie(c,y,g,N));const k=[c,...S],C=await Df(n,v),P=[];let E=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&P.push(C[b]),p){const R=Cie(a,l,N);P.push(C[R[0]],C[R[1]])}if(E=[...E,{placement:a,overflows:P}],!P.every(R=>R<=0)){var M,T;const R=(((M=i.flip)==null?void 0:M.index)||0)+1,O=k[R];if(O&&(!(p==="alignment"?w!==ra(O):!1)||E.every(D=>ra(D.placement)===w?D.overflows[0]>0:!0)))return{data:{index:R,overflows:E},reset:{placement:O}};let I=(T=E.filter(L=>L.overflows[0]<=0).sort((L,D)=>L.overflows[1]-D.overflows[1])[0])==null?void 0:T.placement;if(!I)switch(m){case"bestFit":{var A;const L=(A=E.filter(D=>{if(_){const $=ra(D.placement);return $===w||$==="y"}return!0}).map(D=>[D.placement,D.overflows.filter($=>$>0).reduce(($,F)=>$+F,0)]).sort((D,$)=>D[1]-$[1])[0])==null?void 0:A[0];L&&(I=L);break}case"initialPlacement":I=c;break}if(a!==I)return{reset:{placement:I}}}return{}}}};function $E(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function FE(t){return jie.some(n=>t[n]>=0)}const Die=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:r}=n,{strategy:s="referenceHidden",...a}=Za(t,n);switch(s){case"referenceHidden":{const i=await Df(n,{...a,elementContext:"reference"}),l=$E(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:FE(l)}}}case"escaped":{const i=await Df(n,{...a,altBoundary:!0}),l=$E(i,r.floating);return{data:{escapedOffsets:l,escaped:FE(l)}}}default:return{}}}}},A$=new Set(["left","top"]);async function Lie(t,n){const{placement:r,platform:s,elements:a}=t,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=ei(r),c=Bd(r),d=ra(r)==="y",u=A$.has(l)?-1:1,f=i&&d?-1:1,p=Za(n,t);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof g=="number"&&(m=c==="end"?g*-1:g),d?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const $ie=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var r,s;const{x:a,y:i,placement:l,middlewareData:c}=n,d=await Lie(n,t);return l===((r=c.offset)==null?void 0:r.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:l}}}}},Fie=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:r,y:s,placement:a}=n,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...d}=Za(t,n),u={x:r,y:s},f=await Df(n,d),p=ra(ei(a)),h=YS(p);let m=u[h],g=u[p];if(i){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=m+f[v],j=m-f[b];m=kj(w,m,j)}if(l){const v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=g+f[v],j=g-f[b];g=kj(w,g,j)}const y=c.fn({...n,[h]:m,[p]:g});return{...y,data:{x:y.x-r,y:y.y-s,enabled:{[h]:i,[p]:l}}}}}},Bie=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:r,y:s,placement:a,rects:i,middlewareData:l}=n,{offset:c=0,mainAxis:d=!0,crossAxis:u=!0}=Za(t,n),f={x:r,y:s},p=ra(a),h=YS(p);let m=f[h],g=f[p];const y=Za(c,n),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(d){const j=h==="y"?"height":"width",N=i.reference[h]-i.floating[j]+v.mainAxis,S=i.reference[h]+i.reference[j]-v.mainAxis;m<N?m=N:m>S&&(m=S)}if(u){var b,w;const j=h==="y"?"width":"height",N=A$.has(ei(a)),S=i.reference[p]-i.floating[j]+(N&&((b=l.offset)==null?void 0:b[p])||0)+(N?0:v.crossAxis),_=i.reference[p]+i.reference[j]+(N?0:((w=l.offset)==null?void 0:w[p])||0)-(N?v.crossAxis:0);g<S?g=S:g>_&&(g=_)}return{[h]:m,[p]:g}}}},zie=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var r,s;const{placement:a,rects:i,platform:l,elements:c}=n,{apply:d=()=>{},...u}=Za(t,n),f=await Df(n,u),p=ei(a),h=Bd(a),m=ra(a)==="y",{width:g,height:y}=i.floating;let v,b;p==="top"||p==="bottom"?(v=p,b=h===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(b=p,v=h==="end"?"top":"bottom");const w=y-f.top-f.bottom,j=g-f.left-f.right,N=po(y-f[v],w),S=po(g-f[b],j),_=!n.middlewareData.shift;let k=N,C=S;if((r=n.middlewareData.shift)!=null&&r.enabled.x&&(C=j),(s=n.middlewareData.shift)!=null&&s.enabled.y&&(k=w),_&&!h){const E=Ar(f.left,0),M=Ar(f.right,0),T=Ar(f.top,0),A=Ar(f.bottom,0);m?C=g-2*(E!==0||M!==0?E+M:Ar(f.left,f.right)):k=y-2*(T!==0||A!==0?T+A:Ar(f.top,f.bottom))}await d({...n,availableWidth:C,availableHeight:k});const P=await l.getDimensions(c.floating);return g!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function vy(){return typeof window<"u"}function zd(t){return E$(t)?(t.nodeName||"").toLowerCase():"#document"}function Dr(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Sa(t){var n;return(n=(E$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function E$(t){return vy()?t instanceof Node||t instanceof Dr(t).Node:!1}function Ls(t){return vy()?t instanceof Element||t instanceof Dr(t).Element:!1}function xa(t){return vy()?t instanceof HTMLElement||t instanceof Dr(t).HTMLElement:!1}function BE(t){return!vy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dr(t).ShadowRoot}const Vie=new Set(["inline","contents"]);function wp(t){const{overflow:n,overflowX:r,overflowY:s,display:a}=$s(t);return/auto|scroll|overlay|hidden|clip/.test(n+s+r)&&!Vie.has(a)}const Uie=new Set(["table","td","th"]);function Hie(t){return Uie.has(zd(t))}const Wie=[":popover-open",":modal"];function by(t){return Wie.some(n=>{try{return t.matches(n)}catch{return!1}})}const Kie=["transform","translate","scale","rotate","perspective"],qie=["transform","translate","scale","rotate","perspective","filter"],Gie=["paint","layout","strict","content"];function QS(t){const n=ZS(),r=Ls(t)?$s(t):t;return Kie.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||qie.some(s=>(r.willChange||"").includes(s))||Gie.some(s=>(r.contain||"").includes(s))}function Yie(t){let n=ho(t);for(;xa(n)&&!ud(n);){if(QS(n))return n;if(by(n))return null;n=ho(n)}return null}function ZS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Xie=new Set(["html","body","#document"]);function ud(t){return Xie.has(zd(t))}function $s(t){return Dr(t).getComputedStyle(t)}function wy(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ho(t){if(zd(t)==="html")return t;const n=t.assignedSlot||t.parentNode||BE(t)&&t.host||Sa(t);return BE(n)?n.host:n}function T$(t){const n=ho(t);return ud(n)?t.ownerDocument?t.ownerDocument.body:t.body:xa(n)&&wp(n)?n:T$(n)}function Lf(t,n,r){var s;n===void 0&&(n=[]),r===void 0&&(r=!0);const a=T$(t),i=a===((s=t.ownerDocument)==null?void 0:s.body),l=Dr(a);if(i){const c=_j(l);return n.concat(l,l.visualViewport||[],wp(a)?a:[],c&&r?Lf(c):[])}return n.concat(a,Lf(a,[],r))}function _j(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function M$(t){const n=$s(t);let r=parseFloat(n.width)||0,s=parseFloat(n.height)||0;const a=xa(t),i=a?t.offsetWidth:r,l=a?t.offsetHeight:s,c=bx(r)!==i||bx(s)!==l;return c&&(r=i,s=l),{width:r,height:s,$:c}}function ek(t){return Ls(t)?t:t.contextElement}function Wc(t){const n=ek(t);if(!xa(n))return ua(1);const r=n.getBoundingClientRect(),{width:s,height:a,$:i}=M$(n);let l=(i?bx(r.width):r.width)/s,c=(i?bx(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Jie=ua(0);function O$(t){const n=Dr(t);return!ZS()||!n.visualViewport?Jie:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Qie(t,n,r){return n===void 0&&(n=!1),!r||n&&r!==Dr(t)?!1:n}function kl(t,n,r,s){n===void 0&&(n=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=ek(t);let l=ua(1);n&&(s?Ls(s)&&(l=Wc(s)):l=Wc(t));const c=Qie(i,r,s)?O$(i):ua(0);let d=(a.left+c.x)/l.x,u=(a.top+c.y)/l.y,f=a.width/l.x,p=a.height/l.y;if(i){const h=Dr(i),m=s&&Ls(s)?Dr(s):s;let g=h,y=_j(g);for(;y&&s&&m!==g;){const v=Wc(y),b=y.getBoundingClientRect(),w=$s(y),j=b.left+(y.clientLeft+parseFloat(w.paddingLeft))*v.x,N=b.top+(y.clientTop+parseFloat(w.paddingTop))*v.y;d*=v.x,u*=v.y,f*=v.x,p*=v.y,d+=j,u+=N,g=Dr(y),y=_j(g)}}return jx({width:f,height:p,x:d,y:u})}function jy(t,n){const r=wy(t).scrollLeft;return n?n.left+r:kl(Sa(t)).left+r}function R$(t,n){const r=t.getBoundingClientRect(),s=r.left+n.scrollLeft-jy(t,r),a=r.top+n.scrollTop;return{x:s,y:a}}function Zie(t){let{elements:n,rect:r,offsetParent:s,strategy:a}=t;const i=a==="fixed",l=Sa(s),c=n?by(n.floating):!1;if(s===l||c&&i)return r;let d={scrollLeft:0,scrollTop:0},u=ua(1);const f=ua(0),p=xa(s);if((p||!p&&!i)&&((zd(s)!=="body"||wp(l))&&(d=wy(s)),xa(s))){const m=kl(s);u=Wc(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const h=l&&!p&&!i?R$(l,d):ua(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-d.scrollLeft*u.x+f.x+h.x,y:r.y*u.y-d.scrollTop*u.y+f.y+h.y}}function eoe(t){return Array.from(t.getClientRects())}function toe(t){const n=Sa(t),r=wy(t),s=t.ownerDocument.body,a=Ar(n.scrollWidth,n.clientWidth,s.scrollWidth,s.clientWidth),i=Ar(n.scrollHeight,n.clientHeight,s.scrollHeight,s.clientHeight);let l=-r.scrollLeft+jy(t);const c=-r.scrollTop;return $s(s).direction==="rtl"&&(l+=Ar(n.clientWidth,s.clientWidth)-a),{width:a,height:i,x:l,y:c}}const zE=25;function noe(t,n){const r=Dr(t),s=Sa(t),a=r.visualViewport;let i=s.clientWidth,l=s.clientHeight,c=0,d=0;if(a){i=a.width,l=a.height;const f=ZS();(!f||f&&n==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const u=jy(s);if(u<=0){const f=s.ownerDocument,p=f.body,h=getComputedStyle(p),m=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(s.clientWidth-p.clientWidth-m);g<=zE&&(i-=g)}else u<=zE&&(i+=u);return{width:i,height:l,x:c,y:d}}const roe=new Set(["absolute","fixed"]);function soe(t,n){const r=kl(t,!0,n==="fixed"),s=r.top+t.clientTop,a=r.left+t.clientLeft,i=xa(t)?Wc(t):ua(1),l=t.clientWidth*i.x,c=t.clientHeight*i.y,d=a*i.x,u=s*i.y;return{width:l,height:c,x:d,y:u}}function VE(t,n,r){let s;if(n==="viewport")s=noe(t,r);else if(n==="document")s=toe(Sa(t));else if(Ls(n))s=soe(n,r);else{const a=O$(t);s={x:n.x-a.x,y:n.y-a.y,width:n.width,height:n.height}}return jx(s)}function I$(t,n){const r=ho(t);return r===n||!Ls(r)||ud(r)?!1:$s(r).position==="fixed"||I$(r,n)}function aoe(t,n){const r=n.get(t);if(r)return r;let s=Lf(t,[],!1).filter(c=>Ls(c)&&zd(c)!=="body"),a=null;const i=$s(t).position==="fixed";let l=i?ho(t):t;for(;Ls(l)&&!ud(l);){const c=$s(l),d=QS(l);!d&&c.position==="fixed"&&(a=null),(i?!d&&!a:!d&&c.position==="static"&&!!a&&roe.has(a.position)||wp(l)&&!d&&I$(t,l))?s=s.filter(f=>f!==l):a=c,l=ho(l)}return n.set(t,s),s}function ioe(t){let{element:n,boundary:r,rootBoundary:s,strategy:a}=t;const l=[...r==="clippingAncestors"?by(n)?[]:aoe(n,this._c):[].concat(r),s],c=l[0],d=l.reduce((u,f)=>{const p=VE(n,f,a);return u.top=Ar(p.top,u.top),u.right=po(p.right,u.right),u.bottom=po(p.bottom,u.bottom),u.left=Ar(p.left,u.left),u},VE(n,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function ooe(t){const{width:n,height:r}=M$(t);return{width:n,height:r}}function loe(t,n,r){const s=xa(n),a=Sa(n),i=r==="fixed",l=kl(t,!0,i,n);let c={scrollLeft:0,scrollTop:0};const d=ua(0);function u(){d.x=jy(a)}if(s||!s&&!i)if((zd(n)!=="body"||wp(a))&&(c=wy(n)),s){const m=kl(n,!0,i,n);d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}else a&&u();i&&!s&&a&&u();const f=a&&!s&&!i?R$(a,c):ua(0),p=l.left+c.scrollLeft-d.x-f.x,h=l.top+c.scrollTop-d.y-f.y;return{x:p,y:h,width:l.width,height:l.height}}function q0(t){return $s(t).position==="static"}function UE(t,n){if(!xa(t)||$s(t).position==="fixed")return null;if(n)return n(t);let r=t.offsetParent;return Sa(t)===r&&(r=r.ownerDocument.body),r}function D$(t,n){const r=Dr(t);if(by(t))return r;if(!xa(t)){let a=ho(t);for(;a&&!ud(a);){if(Ls(a)&&!q0(a))return a;a=ho(a)}return r}let s=UE(t,n);for(;s&&Hie(s)&&q0(s);)s=UE(s,n);return s&&ud(s)&&q0(s)&&!QS(s)?r:s||Yie(t)||r}const coe=async function(t){const n=this.getOffsetParent||D$,r=this.getDimensions,s=await r(t.floating);return{reference:loe(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function doe(t){return $s(t).direction==="rtl"}const uoe={convertOffsetParentRelativeRectToViewportRelativeRect:Zie,getDocumentElement:Sa,getClippingRect:ioe,getOffsetParent:D$,getElementRects:coe,getClientRects:eoe,getDimensions:ooe,getScale:Wc,isElement:Ls,isRTL:doe};function L$(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function foe(t,n){let r=null,s;const a=Sa(t);function i(){var c;clearTimeout(s),(c=r)==null||c.disconnect(),r=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const u=t.getBoundingClientRect(),{left:f,top:p,width:h,height:m}=u;if(c||n(),!h||!m)return;const g=Sh(p),y=Sh(a.clientWidth-(f+h)),v=Sh(a.clientHeight-(p+m)),b=Sh(f),j={rootMargin:-g+"px "+-y+"px "+-v+"px "+-b+"px",threshold:Ar(0,po(1,d))||1};let N=!0;function S(_){const k=_[0].intersectionRatio;if(k!==d){if(!N)return l();k?l(!1,k):s=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!L$(u,t.getBoundingClientRect())&&l(),N=!1}try{r=new IntersectionObserver(S,{...j,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,j)}r.observe(t)}return l(!0),i}function poe(t,n,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,u=ek(t),f=a||i?[...u?Lf(u):[],...Lf(n)]:[];f.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const p=u&&c?foe(u,r):null;let h=-1,m=null;l&&(m=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&m&&(m.unobserve(n),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(n)})),r()}),u&&!d&&m.observe(u),m.observe(n));let g,y=d?kl(t):null;d&&v();function v(){const b=kl(t);y&&!L$(y,b)&&r(),y=b,g=requestAnimationFrame(v)}return r(),()=>{var b;f.forEach(w=>{a&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),p==null||p(),(b=m)==null||b.disconnect(),m=null,d&&cancelAnimationFrame(g)}}const hoe=$ie,moe=Fie,xoe=Iie,goe=zie,yoe=Die,HE=Rie,voe=Bie,boe=(t,n,r)=>{const s=new Map,a={platform:uoe,...r},i={...a.platform,_c:s};return Oie(t,n,{...a,platform:i})};var woe=typeof document<"u",joe=function(){},km=woe?x.useLayoutEffect:joe;function Nx(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let r,s,a;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==n.length)return!1;for(s=r;s--!==0;)if(!Nx(t[s],n[s]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&t.$$typeof)&&!Nx(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}function $$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function WE(t,n){const r=$$(t);return Math.round(n*r)/r}function G0(t){const n=x.useRef(t);return km(()=>{n.current=t}),n}function Noe(t){t===void 0&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:l}={},transform:c=!0,whileElementsMounted:d,open:u}=t,[f,p]=x.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[h,m]=x.useState(s);Nx(h,s)||m(s);const[g,y]=x.useState(null),[v,b]=x.useState(null),w=x.useCallback(D=>{D!==_.current&&(_.current=D,y(D))},[]),j=x.useCallback(D=>{D!==k.current&&(k.current=D,b(D))},[]),N=i||g,S=l||v,_=x.useRef(null),k=x.useRef(null),C=x.useRef(f),P=d!=null,E=G0(d),M=G0(a),T=G0(u),A=x.useCallback(()=>{if(!_.current||!k.current)return;const D={placement:n,strategy:r,middleware:h};M.current&&(D.platform=M.current),boe(_.current,k.current,D).then($=>{const F={...$,isPositioned:T.current!==!1};R.current&&!Nx(C.current,F)&&(C.current=F,jo.flushSync(()=>{p(F)}))})},[h,n,r,M,T]);km(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,p(D=>({...D,isPositioned:!1})))},[u]);const R=x.useRef(!1);km(()=>(R.current=!0,()=>{R.current=!1}),[]),km(()=>{if(N&&(_.current=N),S&&(k.current=S),N&&S){if(E.current)return E.current(N,S,A);A()}},[N,S,A,E,P]);const O=x.useMemo(()=>({reference:_,floating:k,setReference:w,setFloating:j}),[w,j]),I=x.useMemo(()=>({reference:N,floating:S}),[N,S]),L=x.useMemo(()=>{const D={position:r,left:0,top:0};if(!I.floating)return D;const $=WE(I.floating,f.x),F=WE(I.floating,f.y);return c?{...D,transform:"translate("+$+"px, "+F+"px)",...$$(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:F}},[r,c,I.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:A,refs:O,elements:I,floatingStyles:L}),[f,A,O,I,L])}const Soe=t=>{function n(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:s,padding:a}=typeof t=="function"?t(r):t;return s&&n(s)?s.current!=null?HE({element:s.current,padding:a}).fn(r):{}:s?HE({element:s,padding:a}).fn(r):{}}}},koe=(t,n)=>({...hoe(t),options:[t,n]}),Coe=(t,n)=>({...moe(t),options:[t,n]}),_oe=(t,n)=>({...voe(t),options:[t,n]}),Poe=(t,n)=>({...xoe(t),options:[t,n]}),Aoe=(t,n)=>({...goe(t),options:[t,n]}),Eoe=(t,n)=>({...yoe(t),options:[t,n]}),Toe=(t,n)=>({...Soe(t),options:[t,n]});var Moe="Arrow",F$=x.forwardRef((t,n)=>{const{children:r,width:s=10,height:a=5,...i}=t;return o.jsx($e.svg,{...i,ref:n,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});F$.displayName=Moe;var Ooe=F$;function B$(t){const[n,r]=x.useState(void 0);return An(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,c;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;l=u.inlineSize,c=u.blockSize}else l=t.offsetWidth,c=t.offsetHeight;r({width:l,height:c})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),n}var tk="Popper",[z$,V$]=ko(tk),[Roe,U$]=z$(tk),H$=t=>{const{__scopePopper:n,children:r}=t,[s,a]=x.useState(null);return o.jsx(Roe,{scope:n,anchor:s,onAnchorChange:a,children:r})};H$.displayName=tk;var W$="PopperAnchor",K$=x.forwardRef((t,n)=>{const{__scopePopper:r,virtualRef:s,...a}=t,i=U$(W$,r),l=x.useRef(null),c=Je(n,l),d=x.useRef(null);return x.useEffect(()=>{const u=d.current;d.current=(s==null?void 0:s.current)||l.current,u!==d.current&&i.onAnchorChange(d.current)}),s?null:o.jsx($e.div,{...a,ref:c})});K$.displayName=W$;var nk="PopperContent",[Ioe,Doe]=z$(nk),q$=x.forwardRef((t,n)=>{var G,ne,z,te,oe,H;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...y}=t,v=U$(nk,r),[b,w]=x.useState(null),j=Je(n,Fe=>w(Fe)),[N,S]=x.useState(null),_=B$(N),k=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,P=s+(i!=="center"?"-"+i:""),E=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},M=Array.isArray(u)?u:[u],T=M.length>0,A={padding:E,boundary:M.filter($oe),altBoundary:T},{refs:R,floatingStyles:O,placement:I,isPositioned:L,middlewareData:D}=Noe({strategy:"fixed",placement:P,whileElementsMounted:(...Fe)=>poe(...Fe,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[koe({mainAxis:a+C,alignmentAxis:l}),d&&Coe({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?_oe():void 0,...A}),d&&Poe({...A}),Aoe({...A,apply:({elements:Fe,rects:Te,availableWidth:X,availableHeight:je})=>{const{width:_e,height:it}=Te.reference,tt=Fe.floating.style;tt.setProperty("--radix-popper-available-width",`${X}px`),tt.setProperty("--radix-popper-available-height",`${je}px`),tt.setProperty("--radix-popper-anchor-width",`${_e}px`),tt.setProperty("--radix-popper-anchor-height",`${it}px`)}}),N&&Toe({element:N,padding:c}),Foe({arrowWidth:k,arrowHeight:C}),h&&Eoe({strategy:"referenceHidden",...A})]}),[$,F]=X$(I),K=Zn(g);An(()=>{L&&(K==null||K())},[L,K]);const J=(G=D.arrow)==null?void 0:G.x,Y=(ne=D.arrow)==null?void 0:ne.y,ee=((z=D.arrow)==null?void 0:z.centerOffset)!==0,[Q,ue]=x.useState();return An(()=>{b&&ue(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:L?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(te=D.transformOrigin)==null?void 0:te.x,(oe=D.transformOrigin)==null?void 0:oe.y].join(" "),...((H=D.hide)==null?void 0:H.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(Ioe,{scope:r,placedSide:$,onArrowChange:S,arrowX:J,arrowY:Y,shouldHideArrow:ee,children:o.jsx($e.div,{"data-side":$,"data-align":F,...y,ref:j,style:{...y.style,animation:L?void 0:"none"}})})})});q$.displayName=nk;var G$="PopperArrow",Loe={top:"bottom",right:"left",bottom:"top",left:"right"},Y$=x.forwardRef(function(n,r){const{__scopePopper:s,...a}=n,i=Doe(G$,s),l=Loe[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(Ooe,{...a,ref:r,style:{...a.style,display:"block"}})})});Y$.displayName=G$;function $oe(t){return t!==null}var Foe=t=>({name:"transformOrigin",options:t,fn(n){var v,b,w;const{placement:r,rects:s,middlewareData:a}=n,l=((v=a.arrow)==null?void 0:v.centerOffset)!==0,c=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[u,f]=X$(r),p={start:"0%",center:"50%",end:"100%"}[f],h=(((b=a.arrow)==null?void 0:b.x)??0)+c/2,m=(((w=a.arrow)==null?void 0:w.y)??0)+d/2;let g="",y="";return u==="bottom"?(g=l?p:`${h}px`,y=`${-d}px`):u==="top"?(g=l?p:`${h}px`,y=`${s.floating.height+d}px`):u==="right"?(g=`${-d}px`,y=l?p:`${m}px`):u==="left"&&(g=`${s.floating.width+d}px`,y=l?p:`${m}px`),{data:{x:g,y}}}});function X$(t){const[n,r="center"]=t.split("-");return[n,r]}var Boe=H$,zoe=K$,Voe=q$,Uoe=Y$,Hoe="Portal",rk=x.forwardRef((t,n)=>{var c;const{container:r,...s}=t,[a,i]=x.useState(!1);An(()=>i(!0),[]);const l=r||a&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?yD.createPortal(o.jsx($e.div,{...s,ref:n}),l):null});rk.displayName=Hoe;var Woe=Ig[" useInsertionEffect ".trim().toString()]||An;function fd({prop:t,defaultProp:n,onChange:r=()=>{},caller:s}){const[a,i,l]=Koe({defaultProp:n,onChange:r}),c=t!==void 0,d=c?t:a;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const u=x.useCallback(f=>{var p;if(c){const h=qoe(f)?f(t):f;h!==t&&((p=l.current)==null||p.call(l,h))}else i(f)},[c,t,i,l]);return[d,u]}function Koe({defaultProp:t,onChange:n}){const[r,s]=x.useState(t),a=x.useRef(r),i=x.useRef(n);return Woe(()=>{i.current=n},[n]),x.useEffect(()=>{var l;a.current!==r&&((l=i.current)==null||l.call(i,r),a.current=r)},[r,a]),[r,s,i]}function qoe(t){return typeof t=="function"}function J$(t){const n=x.useRef({value:t,previous:t});return x.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var Q$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Goe="VisuallyHidden",Yoe=x.forwardRef((t,n)=>o.jsx($e.span,{...t,ref:n,style:{...Q$,...t.style}}));Yoe.displayName=Goe;var Xoe=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},rc=new WeakMap,kh=new WeakMap,Ch={},Y0=0,Z$=function(t){return t&&(t.host||Z$(t.parentNode))},Joe=function(t,n){return n.map(function(r){if(t.contains(r))return r;var s=Z$(r);return s&&t.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Qoe=function(t,n,r,s){var a=Joe(n,Array.isArray(t)?t:[t]);Ch[r]||(Ch[r]=new WeakMap);var i=Ch[r],l=[],c=new Set,d=new Set(a),u=function(p){!p||c.has(p)||(c.add(p),u(p.parentNode))};a.forEach(u);var f=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(h){if(c.has(h))f(h);else try{var m=h.getAttribute(s),g=m!==null&&m!=="false",y=(rc.get(h)||0)+1,v=(i.get(h)||0)+1;rc.set(h,y),i.set(h,v),l.push(h),y===1&&g&&kh.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return f(n),c.clear(),Y0++,function(){l.forEach(function(p){var h=rc.get(p)-1,m=i.get(p)-1;rc.set(p,h),i.set(p,m),h||(kh.has(p)||p.removeAttribute(s),kh.delete(p)),m||p.removeAttribute(r)}),Y0--,Y0||(rc=new WeakMap,rc=new WeakMap,kh=new WeakMap,Ch={})}},e4=function(t,n,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),a=Xoe(t);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Qoe(s,a,r,"aria-hidden")):function(){return null}},na=function(){return na=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},na.apply(this,arguments)};function t4(t,n){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function Zoe(t,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,i;s<a;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return t.concat(i||Array.prototype.slice.call(n))}var Cm="right-scroll-bar-position",_m="width-before-scroll-bar",ele="with-scroll-bars-hidden",tle="--removed-body-scroll-bar-size";function X0(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function nle(t,n){var r=x.useState(function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=n,r.facade}var rle=typeof window<"u"?x.useLayoutEffect:x.useEffect,KE=new WeakMap;function sle(t,n){var r=nle(null,function(s){return t.forEach(function(a){return X0(a,s)})});return rle(function(){var s=KE.get(r);if(s){var a=new Set(s),i=new Set(t),l=r.current;a.forEach(function(c){i.has(c)||X0(c,null)}),i.forEach(function(c){a.has(c)||X0(c,l)})}KE.set(r,t)},[t]),r}function ale(t){return t}function ile(t,n){n===void 0&&(n=ale);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=n(i,s);return r.push(l),function(){r=r.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(s=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(c){return i(c)},filter:function(){return r}}},assignMedium:function(i){s=!0;var l=[];if(r.length){var c=r;r=[],c.forEach(i),l=r}var d=function(){var f=l;l=[],f.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),r={push:function(f){l.push(f),u()},filter:function(f){return l=l.filter(f),r}}}};return a}function ole(t){t===void 0&&(t={});var n=ile(null);return n.options=na({async:!0,ssr:!1},t),n}var n4=function(t){var n=t.sideCar,r=t4(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,na({},r))};n4.isSideCarExport=!0;function lle(t,n){return t.useMedium(n),n4}var r4=ole(),J0=function(){},Ny=x.forwardRef(function(t,n){var r=x.useRef(null),s=x.useState({onScrollCapture:J0,onWheelCapture:J0,onTouchMoveCapture:J0}),a=s[0],i=s[1],l=t.forwardProps,c=t.children,d=t.className,u=t.removeScrollBar,f=t.enabled,p=t.shards,h=t.sideCar,m=t.noRelative,g=t.noIsolation,y=t.inert,v=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,j=t.gapMode,N=t4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,_=sle([r,n]),k=na(na({},N),a);return x.createElement(x.Fragment,null,f&&x.createElement(S,{sideCar:r4,removeScrollBar:u,shards:p,noRelative:m,noIsolation:g,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:j}),l?x.cloneElement(x.Children.only(c),na(na({},k),{ref:_})):x.createElement(w,na({},k,{className:d,ref:_}),c))});Ny.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ny.classNames={fullWidth:_m,zeroRight:Cm};var cle=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=cle();return n&&t.setAttribute("nonce",n),t}function ule(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function fle(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var ple=function(){var t=0,n=null;return{add:function(r){t==0&&(n=dle())&&(ule(n,r),fle(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},hle=function(){var t=ple();return function(n,r){x.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&r])}},s4=function(){var t=hle(),n=function(r){var s=r.styles,a=r.dynamic;return t(s,a),null};return n},mle={left:0,top:0,right:0,gap:0},Q0=function(t){return parseInt(t||"",10)||0},xle=function(t){var n=window.getComputedStyle(document.body),r=n[t==="padding"?"paddingLeft":"marginLeft"],s=n[t==="padding"?"paddingTop":"marginTop"],a=n[t==="padding"?"paddingRight":"marginRight"];return[Q0(r),Q0(s),Q0(a)]},gle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mle;var n=xle(t),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,s-r+n[2]-n[0])}},yle=s4(),Kc="data-scroll-locked",vle=function(t,n,r,s){var a=t.left,i=t.top,l=t.right,c=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(ele,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(Kc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cm,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(_m,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(Cm," .").concat(Cm,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(_m," .").concat(_m,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Kc,`] {
    `).concat(tle,": ").concat(c,`px;
  }
`)},qE=function(){var t=parseInt(document.body.getAttribute(Kc)||"0",10);return isFinite(t)?t:0},ble=function(){x.useEffect(function(){return document.body.setAttribute(Kc,(qE()+1).toString()),function(){var t=qE()-1;t<=0?document.body.removeAttribute(Kc):document.body.setAttribute(Kc,t.toString())}},[])},wle=function(t){var n=t.noRelative,r=t.noImportant,s=t.gapMode,a=s===void 0?"margin":s;ble();var i=x.useMemo(function(){return gle(a)},[a]);return x.createElement(yle,{styles:vle(i,!n,a,r?"":"!important")})},Pj=!1;if(typeof window<"u")try{var _h=Object.defineProperty({},"passive",{get:function(){return Pj=!0,!0}});window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{Pj=!1}var sc=Pj?{passive:!1}:!1,jle=function(t){return t.tagName==="TEXTAREA"},a4=function(t,n){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[n]!=="hidden"&&!(r.overflowY===r.overflowX&&!jle(t)&&r[n]==="visible")},Nle=function(t){return a4(t,"overflowY")},Sle=function(t){return a4(t,"overflowX")},GE=function(t,n){var r=n.ownerDocument,s=n;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=i4(t,s);if(a){var i=o4(t,s),l=i[1],c=i[2];if(l>c)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},kle=function(t){var n=t.scrollTop,r=t.scrollHeight,s=t.clientHeight;return[n,r,s]},Cle=function(t){var n=t.scrollLeft,r=t.scrollWidth,s=t.clientWidth;return[n,r,s]},i4=function(t,n){return t==="v"?Nle(n):Sle(n)},o4=function(t,n){return t==="v"?kle(n):Cle(n)},_le=function(t,n){return t==="h"&&n==="rtl"?-1:1},Ple=function(t,n,r,s,a){var i=_le(t,window.getComputedStyle(n).direction),l=i*s,c=r.target,d=n.contains(c),u=!1,f=l>0,p=0,h=0;do{if(!c)break;var m=o4(t,c),g=m[0],y=m[1],v=m[2],b=y-v-i*g;(g||b)&&i4(t,c)&&(p+=b,h+=g);var w=c.parentNode;c=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!d&&c!==document.body||d&&(n.contains(c)||n===c));return(f&&Math.abs(p)<1||!f&&Math.abs(h)<1)&&(u=!0),u},Ph=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},YE=function(t){return[t.deltaX,t.deltaY]},XE=function(t){return t&&"current"in t?t.current:t},Ale=function(t,n){return t[0]===n[0]&&t[1]===n[1]},Ele=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Tle=0,ac=[];function Mle(t){var n=x.useRef([]),r=x.useRef([0,0]),s=x.useRef(),a=x.useState(Tle++)[0],i=x.useState(s4)[0],l=x.useRef(t);x.useEffect(function(){l.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var y=Zoe([t.lockRef.current],(t.shards||[]).map(XE),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!l.current.allowPinchZoom;var b=Ph(y),w=r.current,j="deltaX"in y?y.deltaX:w[0]-b[0],N="deltaY"in y?y.deltaY:w[1]-b[1],S,_=y.target,k=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in y&&k==="h"&&_.type==="range")return!1;var C=GE(k,_);if(!C)return!0;if(C?S=k:(S=k==="v"?"h":"v",C=GE(k,_)),!C)return!1;if(!s.current&&"changedTouches"in y&&(j||N)&&(s.current=S),!S)return!0;var P=s.current||S;return Ple(P,v,y,P==="h"?j:N)},[]),d=x.useCallback(function(y){var v=y;if(!(!ac.length||ac[ac.length-1]!==i)){var b="deltaY"in v?YE(v):Ph(v),w=n.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&Ale(S.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var j=(l.current.shards||[]).map(XE).filter(Boolean).filter(function(S){return S.contains(v.target)}),N=j.length>0?c(v,j[0]):!l.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(y,v,b,w){var j={name:y,delta:v,target:b,should:w,shadowParent:Ole(b)};n.current.push(j),setTimeout(function(){n.current=n.current.filter(function(N){return N!==j})},1)},[]),f=x.useCallback(function(y){r.current=Ph(y),s.current=void 0},[]),p=x.useCallback(function(y){u(y.type,YE(y),y.target,c(y,t.lockRef.current))},[]),h=x.useCallback(function(y){u(y.type,Ph(y),y.target,c(y,t.lockRef.current))},[]);x.useEffect(function(){return ac.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:h}),document.addEventListener("wheel",d,sc),document.addEventListener("touchmove",d,sc),document.addEventListener("touchstart",f,sc),function(){ac=ac.filter(function(y){return y!==i}),document.removeEventListener("wheel",d,sc),document.removeEventListener("touchmove",d,sc),document.removeEventListener("touchstart",f,sc)}},[]);var m=t.removeScrollBar,g=t.inert;return x.createElement(x.Fragment,null,g?x.createElement(i,{styles:Ele(a)}):null,m?x.createElement(wle,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Ole(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const Rle=lle(r4,Mle);var sk=x.forwardRef(function(t,n){return x.createElement(Ny,na({},t,{ref:n,sideCar:Rle}))});sk.classNames=Ny.classNames;var Ile=[" ","Enter","ArrowUp","ArrowDown"],Dle=[" ","Enter"],Cl="Select",[Sy,ky,Lle]=N$(Cl),[Vd]=ko(Cl,[Lle,V$]),Cy=V$(),[$le,Co]=Vd(Cl),[Fle,Ble]=Vd(Cl),l4=t=>{const{__scopeSelect:n,children:r,open:s,defaultOpen:a,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:u,name:f,autoComplete:p,disabled:h,required:m,form:g}=t,y=Cy(n),[v,b]=x.useState(null),[w,j]=x.useState(null),[N,S]=x.useState(!1),_=yy(u),[k,C]=fd({prop:s,defaultProp:a??!1,onChange:i,caller:Cl}),[P,E]=fd({prop:l,defaultProp:c,onChange:d,caller:Cl}),M=x.useRef(null),T=v?g||!!v.closest("form"):!0,[A,R]=x.useState(new Set),O=Array.from(A).map(I=>I.props.value).join(";");return o.jsx(Boe,{...y,children:o.jsxs($le,{required:m,scope:n,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:eo(),value:P,onValueChange:E,open:k,onOpenChange:C,dir:_,triggerPointerDownPosRef:M,disabled:h,children:[o.jsx(Sy.Provider,{scope:n,children:o.jsx(Fle,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(I=>{R(L=>new Set(L).add(I))},[]),onNativeOptionRemove:x.useCallback(I=>{R(L=>{const D=new Set(L);return D.delete(I),D})},[]),children:r})}),T?o.jsxs(M4,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:p,value:P,onChange:I=>E(I.target.value),disabled:h,form:g,children:[P===void 0?o.jsx("option",{value:""}):null,Array.from(A)]},O):null]})})};l4.displayName=Cl;var c4="SelectTrigger",d4=x.forwardRef((t,n)=>{const{__scopeSelect:r,disabled:s=!1,...a}=t,i=Cy(r),l=Co(c4,r),c=l.disabled||s,d=Je(n,l.onTriggerChange),u=ky(r),f=x.useRef("touch"),[p,h,m]=R4(y=>{const v=u().filter(j=>!j.disabled),b=v.find(j=>j.value===l.value),w=I4(v,y,b);w!==void 0&&l.onValueChange(w.value)}),g=y=>{c||(l.onOpenChange(!0),m()),y&&(l.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx(zoe,{asChild:!0,...i,children:o.jsx($e.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":O4(l.value)?"":void 0,...a,ref:d,onClick:Oe(a.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&g(y)}),onPointerDown:Oe(a.onPointerDown,y=>{f.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(g(y),y.preventDefault())}),onKeyDown:Oe(a.onKeyDown,y=>{const v=p.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(v&&y.key===" ")&&Ile.includes(y.key)&&(g(),y.preventDefault())})})})});d4.displayName=c4;var u4="SelectValue",f4=x.forwardRef((t,n)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:l="",...c}=t,d=Co(u4,r),{onValueNodeHasChildrenChange:u}=d,f=i!==void 0,p=Je(n,d.onValueNodeChange);return An(()=>{u(f)},[u,f]),o.jsx($e.span,{...c,ref:p,style:{pointerEvents:"none"},children:O4(d.value)?o.jsx(o.Fragment,{children:l}):i})});f4.displayName=u4;var zle="SelectIcon",p4=x.forwardRef((t,n)=>{const{__scopeSelect:r,children:s,...a}=t;return o.jsx($e.span,{"aria-hidden":!0,...a,ref:n,children:s||""})});p4.displayName=zle;var Vle="SelectPortal",h4=t=>o.jsx(rk,{asChild:!0,...t});h4.displayName=Vle;var _l="SelectContent",m4=x.forwardRef((t,n)=>{const r=Co(_l,t.__scopeSelect),[s,a]=x.useState();if(An(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?jo.createPortal(o.jsx(x4,{scope:t.__scopeSelect,children:o.jsx(Sy.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(g4,{...t,ref:n})});m4.displayName=_l;var ws=10,[x4,_o]=Vd(_l),Ule="SelectContentImpl",Hle=dd("SelectContent.RemoveScroll"),g4=x.forwardRef((t,n)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:y,avoidCollisions:v,...b}=t,w=Co(_l,r),[j,N]=x.useState(null),[S,_]=x.useState(null),k=Je(n,G=>N(G)),[C,P]=x.useState(null),[E,M]=x.useState(null),T=ky(r),[A,R]=x.useState(!1),O=x.useRef(!1);x.useEffect(()=>{if(j)return e4(j)},[j]),C$();const I=x.useCallback(G=>{const[ne,...z]=T().map(H=>H.ref.current),[te]=z.slice(-1),oe=document.activeElement;for(const H of G)if(H===oe||(H==null||H.scrollIntoView({block:"nearest"}),H===ne&&S&&(S.scrollTop=0),H===te&&S&&(S.scrollTop=S.scrollHeight),H==null||H.focus(),document.activeElement!==oe))return},[T,S]),L=x.useCallback(()=>I([C,j]),[I,C,j]);x.useEffect(()=>{A&&L()},[A,L]);const{onOpenChange:D,triggerPointerDownPosRef:$}=w;x.useEffect(()=>{if(j){let G={x:0,y:0};const ne=te=>{var oe,H;G={x:Math.abs(Math.round(te.pageX)-(((oe=$.current)==null?void 0:oe.x)??0)),y:Math.abs(Math.round(te.pageY)-(((H=$.current)==null?void 0:H.y)??0))}},z=te=>{G.x<=10&&G.y<=10?te.preventDefault():j.contains(te.target)||D(!1),document.removeEventListener("pointermove",ne),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",z,{capture:!0})}}},[j,D,$]),x.useEffect(()=>{const G=()=>D(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[D]);const[F,K]=R4(G=>{const ne=T().filter(oe=>!oe.disabled),z=ne.find(oe=>oe.ref.current===document.activeElement),te=I4(ne,G,z);te&&setTimeout(()=>te.ref.current.focus())}),J=x.useCallback((G,ne,z)=>{const te=!O.current&&!z;(w.value!==void 0&&w.value===ne||te)&&(P(G),te&&(O.current=!0))},[w.value]),Y=x.useCallback(()=>j==null?void 0:j.focus(),[j]),ee=x.useCallback((G,ne,z)=>{const te=!O.current&&!z;(w.value!==void 0&&w.value===ne||te)&&M(G)},[w.value]),Q=s==="popper"?Aj:y4,ue=Q===Aj?{side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:y,avoidCollisions:v}:{};return o.jsx(x4,{scope:r,content:j,viewport:S,onViewportChange:_,itemRefCallback:J,selectedItem:C,onItemLeave:Y,itemTextRefCallback:ee,focusSelectedItem:L,selectedItemText:E,position:s,isPositioned:A,searchRef:F,children:o.jsx(sk,{as:Hle,allowPinchZoom:!0,children:o.jsx(GS,{asChild:!0,trapped:w.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:Oe(a,G=>{var ne;(ne=w.trigger)==null||ne.focus({preventScroll:!0}),G.preventDefault()}),children:o.jsx(qS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:G=>G.preventDefault(),...b,...ue,onPlaced:()=>R(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Oe(b.onKeyDown,G=>{const ne=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!ne&&G.key.length===1&&K(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let te=T().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);if(["ArrowUp","End"].includes(G.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const oe=G.target,H=te.indexOf(oe);te=te.slice(H+1)}setTimeout(()=>I(te)),G.preventDefault()}})})})})})})});g4.displayName=Ule;var Wle="SelectItemAlignedPosition",y4=x.forwardRef((t,n)=>{const{__scopeSelect:r,onPlaced:s,...a}=t,i=Co(_l,r),l=_o(_l,r),[c,d]=x.useState(null),[u,f]=x.useState(null),p=Je(n,k=>f(k)),h=ky(r),m=x.useRef(!1),g=x.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=l,j=x.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&y&&v&&b){const k=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(i.dir!=="rtl"){const oe=E.left-C.left,H=P.left-oe,Fe=k.left-H,Te=k.width+Fe,X=Math.max(Te,C.width),je=window.innerWidth-ws,_e=Nj(H,[ws,Math.max(ws,je-X)]);c.style.minWidth=Te+"px",c.style.left=_e+"px"}else{const oe=C.right-E.right,H=window.innerWidth-P.right-oe,Fe=window.innerWidth-k.right-H,Te=k.width+Fe,X=Math.max(Te,C.width),je=window.innerWidth-ws,_e=Nj(H,[ws,Math.max(ws,je-X)]);c.style.minWidth=Te+"px",c.style.right=_e+"px"}const M=h(),T=window.innerHeight-ws*2,A=y.scrollHeight,R=window.getComputedStyle(u),O=parseInt(R.borderTopWidth,10),I=parseInt(R.paddingTop,10),L=parseInt(R.borderBottomWidth,10),D=parseInt(R.paddingBottom,10),$=O+I+A+D+L,F=Math.min(v.offsetHeight*5,$),K=window.getComputedStyle(y),J=parseInt(K.paddingTop,10),Y=parseInt(K.paddingBottom,10),ee=k.top+k.height/2-ws,Q=T-ee,ue=v.offsetHeight/2,G=v.offsetTop+ue,ne=O+I+G,z=$-ne;if(ne<=ee){const oe=M.length>0&&v===M[M.length-1].ref.current;c.style.bottom="0px";const H=u.clientHeight-y.offsetTop-y.offsetHeight,Fe=Math.max(Q,ue+(oe?Y:0)+H+L),Te=ne+Fe;c.style.height=Te+"px"}else{const oe=M.length>0&&v===M[0].ref.current;c.style.top="0px";const Fe=Math.max(ee,O+y.offsetTop+(oe?J:0)+ue)+z;c.style.height=Fe+"px",y.scrollTop=ne-ee+y.offsetTop}c.style.margin=`${ws}px 0`,c.style.minHeight=F+"px",c.style.maxHeight=T+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,c,u,y,v,b,i.dir,s]);An(()=>j(),[j]);const[N,S]=x.useState();An(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=x.useCallback(k=>{k&&g.current===!0&&(j(),w==null||w(),g.current=!1)},[j,w]);return o.jsx(qle,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:o.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:o.jsx($e.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});y4.displayName=Wle;var Kle="SelectPopperPosition",Aj=x.forwardRef((t,n)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=ws,...i}=t,l=Cy(r);return o.jsx(Voe,{...l,...i,ref:n,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Aj.displayName=Kle;var[qle,ak]=Vd(_l,{}),Ej="SelectViewport",v4=x.forwardRef((t,n)=>{const{__scopeSelect:r,nonce:s,...a}=t,i=_o(Ej,r),l=ak(Ej,r),c=Je(n,i.onViewportChange),d=x.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Sy.Slot,{scope:r,children:o.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Oe(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&p){const m=Math.abs(d.current-f.scrollTop);if(m>0){const g=window.innerHeight-ws*2,y=parseFloat(p.style.minHeight),v=parseFloat(p.style.height),b=Math.max(y,v);if(b<g){const w=b+m,j=Math.min(g,w),N=w-j;p.style.height=j+"px",p.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});v4.displayName=Ej;var b4="SelectGroup",[Gle,Yle]=Vd(b4),Xle=x.forwardRef((t,n)=>{const{__scopeSelect:r,...s}=t,a=eo();return o.jsx(Gle,{scope:r,id:a,children:o.jsx($e.div,{role:"group","aria-labelledby":a,...s,ref:n})})});Xle.displayName=b4;var w4="SelectLabel",j4=x.forwardRef((t,n)=>{const{__scopeSelect:r,...s}=t,a=Yle(w4,r);return o.jsx($e.div,{id:a.id,...s,ref:n})});j4.displayName=w4;var Sx="SelectItem",[Jle,N4]=Vd(Sx),S4=x.forwardRef((t,n)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...l}=t,c=Co(Sx,r),d=_o(Sx,r),u=c.value===s,[f,p]=x.useState(i??""),[h,m]=x.useState(!1),g=Je(n,w=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,w,s,a)}),y=eo(),v=x.useRef("touch"),b=()=>{a||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(Jle,{scope:r,value:s,disabled:a,textId:y,isSelected:u,onItemTextChange:x.useCallback(w=>{p(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(Sy.ItemSlot,{scope:r,value:s,disabled:a,textValue:f,children:o.jsx($e.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:g,onFocus:Oe(l.onFocus,()=>m(!0)),onBlur:Oe(l.onBlur,()=>m(!1)),onClick:Oe(l.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Oe(l.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Oe(l.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Oe(l.onPointerMove,w=>{var j;v.current=w.pointerType,a?(j=d.onItemLeave)==null||j.call(d):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Oe(l.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:Oe(l.onKeyDown,w=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(Dle.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});S4.displayName=Sx;var Ru="SelectItemText",k4=x.forwardRef((t,n)=>{const{__scopeSelect:r,className:s,style:a,...i}=t,l=Co(Ru,r),c=_o(Ru,r),d=N4(Ru,r),u=Ble(Ru,r),[f,p]=x.useState(null),h=Je(n,b=>p(b),d.onItemTextChange,b=>{var w;return(w=c.itemTextRefCallback)==null?void 0:w.call(c,b,d.value,d.disabled)}),m=f==null?void 0:f.textContent,g=x.useMemo(()=>o.jsx("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return An(()=>(y(g),()=>v(g)),[y,v,g]),o.jsxs(o.Fragment,{children:[o.jsx($e.span,{id:d.textId,...i,ref:h}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?jo.createPortal(i.children,l.valueNode):null]})});k4.displayName=Ru;var C4="SelectItemIndicator",_4=x.forwardRef((t,n)=>{const{__scopeSelect:r,...s}=t;return N4(C4,r).isSelected?o.jsx($e.span,{"aria-hidden":!0,...s,ref:n}):null});_4.displayName=C4;var Tj="SelectScrollUpButton",P4=x.forwardRef((t,n)=>{const r=_o(Tj,t.__scopeSelect),s=ak(Tj,t.__scopeSelect),[a,i]=x.useState(!1),l=Je(n,s.onScrollButtonChange);return An(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=d.scrollTop>0;i(u)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?o.jsx(E4,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});P4.displayName=Tj;var Mj="SelectScrollDownButton",A4=x.forwardRef((t,n)=>{const r=_o(Mj,t.__scopeSelect),s=ak(Mj,t.__scopeSelect),[a,i]=x.useState(!1),l=Je(n,s.onScrollButtonChange);return An(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;i(f)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?o.jsx(E4,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});A4.displayName=Mj;var E4=x.forwardRef((t,n)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=t,i=_o("SelectScrollButton",r),l=x.useRef(null),c=ky(r),d=x.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),An(()=>{var f;const u=c().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),o.jsx($e.div,{"aria-hidden":!0,...a,ref:n,style:{flexShrink:0,...a.style},onPointerDown:Oe(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Oe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Oe(a.onPointerLeave,()=>{d()})})}),Qle="SelectSeparator",T4=x.forwardRef((t,n)=>{const{__scopeSelect:r,...s}=t;return o.jsx($e.div,{"aria-hidden":!0,...s,ref:n})});T4.displayName=Qle;var Oj="SelectArrow",Zle=x.forwardRef((t,n)=>{const{__scopeSelect:r,...s}=t,a=Cy(r),i=Co(Oj,r),l=_o(Oj,r);return i.open&&l.position==="popper"?o.jsx(Uoe,{...a,...s,ref:n}):null});Zle.displayName=Oj;var ece="SelectBubbleInput",M4=x.forwardRef(({__scopeSelect:t,value:n,...r},s)=>{const a=x.useRef(null),i=Je(s,a),l=J$(n);return x.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&f){const p=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(p)}},[l,n]),o.jsx($e.select,{...r,style:{...Q$,...r.style},ref:i,defaultValue:n})});M4.displayName=ece;function O4(t){return t===""||t===void 0}function R4(t){const n=Zn(t),r=x.useRef(""),s=x.useRef(0),a=x.useCallback(l=>{const c=r.current+l;n(c),function d(u){r.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>d(""),1e3))}(c)},[n]),i=x.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function I4(t,n,r){const a=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,i=r?t.indexOf(r):-1;let l=tce(t,Math.max(i,0));a.length===1&&(l=l.filter(u=>u!==r));const d=l.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==r?d:void 0}function tce(t,n){return t.map((r,s)=>t[(n+s)%t.length])}var nce=l4,D4=d4,rce=f4,sce=p4,ace=h4,L4=m4,ice=v4,$4=j4,F4=S4,oce=k4,lce=_4,B4=P4,z4=A4,V4=T4;const jt=nce,Nt=rce,ht=x.forwardRef(({className:t,children:n,...r},s)=>o.jsxs(D4,{ref:s,className:Ce("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[n,o.jsx(sce,{asChild:!0,children:o.jsx(QN,{className:"h-4 w-4 opacity-50"})})]}));ht.displayName=D4.displayName;const U4=x.forwardRef(({className:t,...n},r)=>o.jsx(B4,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",t),...n,children:o.jsx(aX,{className:"h-4 w-4"})}));U4.displayName=B4.displayName;const H4=x.forwardRef(({className:t,...n},r)=>o.jsx(z4,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",t),...n,children:o.jsx(QN,{className:"h-4 w-4"})}));H4.displayName=z4.displayName;const mt=x.forwardRef(({className:t,children:n,position:r="popper",...s},a)=>o.jsx(ace,{children:o.jsxs(L4,{ref:a,className:Ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...s,children:[o.jsx(U4,{}),o.jsx(ice,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),o.jsx(H4,{})]})}));mt.displayName=L4.displayName;const cce=x.forwardRef(({className:t,...n},r)=>o.jsx($4,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",t),...n}));cce.displayName=$4.displayName;const Ue=x.forwardRef(({className:t,children:n,...r},s)=>o.jsxs(F4,{ref:s,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(lce,{children:o.jsx(mp,{className:"h-4 w-4"})})}),o.jsx(oce,{children:n})]}));Ue.displayName=F4.displayName;const dce=x.forwardRef(({className:t,...n},r)=>o.jsx(V4,{ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",t),...n}));dce.displayName=V4.displayName;function uce(t,n){return x.useReducer((r,s)=>n[r][s]??r,t)}var ka=t=>{const{present:n,children:r}=t,s=fce(n),a=typeof r=="function"?r({present:s.isPresent}):x.Children.only(r),i=Je(s.ref,pce(a));return typeof r=="function"||s.isPresent?x.cloneElement(a,{ref:i}):null};ka.displayName="Presence";function fce(t){const[n,r]=x.useState(),s=x.useRef(null),a=x.useRef(t),i=x.useRef("none"),l=t?"mounted":"unmounted",[c,d]=uce(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Ah(s.current);i.current=c==="mounted"?u:"none"},[c]),An(()=>{const u=s.current,f=a.current;if(f!==t){const h=i.current,m=Ah(u);t?d("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),An(()=>{if(n){let u;const f=n.ownerDocument.defaultView??window,p=m=>{const y=Ah(s.current).includes(CSS.escape(m.animationName));if(m.target===n&&y&&(d("ANIMATION_END"),!a.current)){const v=n.style.animationFillMode;n.style.animationFillMode="forwards",u=f.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=v)})}},h=m=>{m.target===n&&(i.current=Ah(s.current))};return n.addEventListener("animationstart",h),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{f.clearTimeout(u),n.removeEventListener("animationstart",h),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function Ah(t){return(t==null?void 0:t.animationName)||"none"}function pce(t){var s,a;let n=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var _y="Dialog",[W4]=ko(_y),[hce,Hs]=W4(_y),K4=t=>{const{__scopeDialog:n,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,c=x.useRef(null),d=x.useRef(null),[u,f]=fd({prop:s,defaultProp:a??!1,onChange:i,caller:_y});return o.jsx(hce,{scope:n,triggerRef:c,contentRef:d,contentId:eo(),titleId:eo(),descriptionId:eo(),open:u,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:l,children:r})};K4.displayName=_y;var q4="DialogTrigger",mce=x.forwardRef((t,n)=>{const{__scopeDialog:r,...s}=t,a=Hs(q4,r),i=Je(n,a.triggerRef);return o.jsx($e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":lk(a.open),...s,ref:i,onClick:Oe(t.onClick,a.onOpenToggle)})});mce.displayName=q4;var ik="DialogPortal",[xce,G4]=W4(ik,{forceMount:void 0}),Y4=t=>{const{__scopeDialog:n,forceMount:r,children:s,container:a}=t,i=Hs(ik,n);return o.jsx(xce,{scope:n,forceMount:r,children:x.Children.map(s,l=>o.jsx(ka,{present:r||i.open,children:o.jsx(rk,{asChild:!0,container:a,children:l})}))})};Y4.displayName=ik;var kx="DialogOverlay",X4=x.forwardRef((t,n)=>{const r=G4(kx,t.__scopeDialog),{forceMount:s=r.forceMount,...a}=t,i=Hs(kx,t.__scopeDialog);return i.modal?o.jsx(ka,{present:s||i.open,children:o.jsx(yce,{...a,ref:n})}):null});X4.displayName=kx;var gce=dd("DialogOverlay.RemoveScroll"),yce=x.forwardRef((t,n)=>{const{__scopeDialog:r,...s}=t,a=Hs(kx,r);return o.jsx(sk,{as:gce,allowPinchZoom:!0,shards:[a.contentRef],children:o.jsx($e.div,{"data-state":lk(a.open),...s,ref:n,style:{pointerEvents:"auto",...s.style}})})}),Pl="DialogContent",J4=x.forwardRef((t,n)=>{const r=G4(Pl,t.__scopeDialog),{forceMount:s=r.forceMount,...a}=t,i=Hs(Pl,t.__scopeDialog);return o.jsx(ka,{present:s||i.open,children:i.modal?o.jsx(vce,{...a,ref:n}):o.jsx(bce,{...a,ref:n})})});J4.displayName=Pl;var vce=x.forwardRef((t,n)=>{const r=Hs(Pl,t.__scopeDialog),s=x.useRef(null),a=Je(n,r.contentRef,s);return x.useEffect(()=>{const i=s.current;if(i)return e4(i)},[]),o.jsx(Q4,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Oe(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:Oe(t.onFocusOutside,i=>i.preventDefault())})}),bce=x.forwardRef((t,n)=>{const r=Hs(Pl,t.__scopeDialog),s=x.useRef(!1),a=x.useRef(!1);return o.jsx(Q4,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(s.current||(c=r.triggerRef.current)==null||c.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var d,u;(d=t.onInteractOutside)==null||d.call(t,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Q4=x.forwardRef((t,n)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,c=Hs(Pl,r),d=x.useRef(null),u=Je(n,d);return C$(),o.jsxs(o.Fragment,{children:[o.jsx(GS,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:o.jsx(qS,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":lk(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(wce,{titleId:c.titleId}),o.jsx(Nce,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ok="DialogTitle",Z4=x.forwardRef((t,n)=>{const{__scopeDialog:r,...s}=t,a=Hs(ok,r);return o.jsx($e.h2,{id:a.titleId,...s,ref:n})});Z4.displayName=ok;var eF="DialogDescription",tF=x.forwardRef((t,n)=>{const{__scopeDialog:r,...s}=t,a=Hs(eF,r);return o.jsx($e.p,{id:a.descriptionId,...s,ref:n})});tF.displayName=eF;var nF="DialogClose",rF=x.forwardRef((t,n)=>{const{__scopeDialog:r,...s}=t,a=Hs(nF,r);return o.jsx($e.button,{type:"button",...s,ref:n,onClick:Oe(t.onClick,()=>a.onOpenChange(!1))})});rF.displayName=nF;function lk(t){return t?"open":"closed"}var sF="DialogTitleWarning",[qRe,aF]=nie(sF,{contentName:Pl,titleName:ok,docsSlug:"dialog"}),wce=({titleId:t})=>{const n=aF(sF),r=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},jce="DialogDescriptionWarning",Nce=({contentRef:t,descriptionId:n})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aF(jce).contentName}}.`;return x.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");n&&a&&(document.getElementById(n)||console.warn(s))},[s,t,n]),null},Sce=K4,kce=Y4,iF=X4,oF=J4,lF=Z4,cF=tF,Cce=rF;const mo=Sce,_ce=kce,dF=x.forwardRef(({className:t,...n},r)=>o.jsx(iF,{ref:r,className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n}));dF.displayName=iF.displayName;const ti=x.forwardRef(({className:t,children:n,...r},s)=>o.jsxs(_ce,{children:[o.jsx(dF,{}),o.jsxs(oF,{ref:s,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[n,o.jsxs(Cce,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Is,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ti.displayName=oF.displayName;const ni=({className:t,...n})=>o.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",t),...n});ni.displayName="DialogHeader";const Al=({className:t,...n})=>o.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Al.displayName="DialogFooter";const ri=x.forwardRef(({className:t,...n},r)=>o.jsx(lF,{ref:r,className:Ce("text-lg font-semibold leading-none tracking-tight",t),...n}));ri.displayName=lF.displayName;const Pce=x.forwardRef(({className:t,...n},r)=>o.jsx(cF,{ref:r,className:Ce("text-sm text-muted-foreground",t),...n}));Pce.displayName=cF.displayName;var Z0="rovingFocusGroup.onEntryFocus",Ace={bubbles:!1,cancelable:!0},jp="RovingFocusGroup",[Rj,uF,Ece]=N$(jp),[Tce,fF]=ko(jp,[Ece]),[Mce,Oce]=Tce(jp),pF=x.forwardRef((t,n)=>o.jsx(Rj.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Rj.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Rce,{...t,ref:n})})}));pF.displayName=jp;var Rce=x.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...p}=t,h=x.useRef(null),m=Je(n,h),g=yy(i),[y,v]=fd({prop:l,defaultProp:c??null,onChange:d,caller:jp}),[b,w]=x.useState(!1),j=Zn(u),N=uF(r),S=x.useRef(!1),[_,k]=x.useState(0);return x.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(Z0,j),()=>C.removeEventListener(Z0,j)},[j]),o.jsx(Mce,{scope:r,orientation:s,dir:g,loop:a,currentTabStopId:y,onItemFocus:x.useCallback(C=>v(C),[v]),onItemShiftTab:x.useCallback(()=>w(!0),[]),onFocusableItemAdd:x.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>k(C=>C-1),[]),children:o.jsx($e.div,{tabIndex:b||_===0?-1:0,"data-orientation":s,...p,ref:m,style:{outline:"none",...t.style},onMouseDown:Oe(t.onMouseDown,()=>{S.current=!0}),onFocus:Oe(t.onFocus,C=>{const P=!S.current;if(C.target===C.currentTarget&&P&&!b){const E=new CustomEvent(Z0,Ace);if(C.currentTarget.dispatchEvent(E),!E.defaultPrevented){const M=N().filter(I=>I.focusable),T=M.find(I=>I.active),A=M.find(I=>I.id===y),O=[T,A,...M].filter(Boolean).map(I=>I.ref.current);xF(O,f)}}S.current=!1}),onBlur:Oe(t.onBlur,()=>w(!1))})})}),hF="RovingFocusGroupItem",mF=x.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:l,...c}=t,d=eo(),u=i||d,f=Oce(hF,r),p=f.currentTabStopId===u,h=uF(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:y}=f;return x.useEffect(()=>{if(s)return m(),()=>g()},[s,m,g]),o.jsx(Rj.ItemSlot,{scope:r,id:u,focusable:s,active:a,children:o.jsx($e.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:n,onMouseDown:Oe(t.onMouseDown,v=>{s?f.onItemFocus(u):v.preventDefault()}),onFocus:Oe(t.onFocus,()=>f.onItemFocus(u)),onKeyDown:Oe(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){f.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=Lce(v,f.orientation,f.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let j=h().filter(N=>N.focusable).map(N=>N.ref.current);if(b==="last")j.reverse();else if(b==="prev"||b==="next"){b==="prev"&&j.reverse();const N=j.indexOf(v.currentTarget);j=f.loop?$ce(j,N+1):j.slice(N+1)}setTimeout(()=>xF(j))}}),children:typeof l=="function"?l({isCurrentTabStop:p,hasTabStop:y!=null}):l})})});mF.displayName=hF;var Ice={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dce(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Lce(t,n,r){const s=Dce(t.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Ice[s]}function xF(t,n=!1){const r=document.activeElement;for(const s of t)if(s===r||(s.focus({preventScroll:n}),document.activeElement!==r))return}function $ce(t,n){return t.map((r,s)=>t[(n+s)%t.length])}var Fce=pF,Bce=mF,Py="Tabs",[zce]=ko(Py,[fF]),gF=fF(),[Vce,ck]=zce(Py),yF=x.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,f=yy(c),[p,h]=fd({prop:s,onChange:a,defaultProp:i??"",caller:Py});return o.jsx(Vce,{scope:r,baseId:eo(),value:p,onValueChange:h,orientation:l,dir:f,activationMode:d,children:o.jsx($e.div,{dir:f,"data-orientation":l,...u,ref:n})})});yF.displayName=Py;var vF="TabsList",bF=x.forwardRef((t,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,i=ck(vF,r),l=gF(r);return o.jsx(Fce,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:o.jsx($e.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:n})})});bF.displayName=vF;var wF="TabsTrigger",jF=x.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=t,l=ck(wF,r),c=gF(r),d=kF(l.baseId,s),u=CF(l.baseId,s),f=s===l.value;return o.jsx(Bce,{asChild:!0,...c,focusable:!a,active:f,children:o.jsx($e.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:n,onMouseDown:Oe(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?l.onValueChange(s):p.preventDefault()}),onKeyDown:Oe(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&l.onValueChange(s)}),onFocus:Oe(t.onFocus,()=>{const p=l.activationMode!=="manual";!f&&!a&&p&&l.onValueChange(s)})})})});jF.displayName=wF;var NF="TabsContent",SF=x.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...l}=t,c=ck(NF,r),d=kF(c.baseId,s),u=CF(c.baseId,s),f=s===c.value,p=x.useRef(f);return x.useEffect(()=>{const h=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(ka,{present:a||f,children:({present:h})=>o.jsx($e.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!h,id:u,tabIndex:0,...l,ref:n,style:{...t.style,animationDuration:p.current?"0s":void 0},children:h&&i})})});SF.displayName=NF;function kF(t,n){return`${t}-trigger-${n}`}function CF(t,n){return`${t}-content-${n}`}var Uce=yF,_F=bF,PF=jF,AF=SF;const dk=Uce,Ay=x.forwardRef(({className:t,...n},r)=>o.jsx(_F,{ref:r,className:Ce("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...n}));Ay.displayName=_F.displayName;const cl=x.forwardRef(({className:t,...n},r)=>o.jsx(PF,{ref:r,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...n}));cl.displayName=PF.displayName;const sa=x.forwardRef(({className:t,...n},r)=>o.jsx(AF,{ref:r,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n}));sa.displayName=AF.displayName;const Fs=x.forwardRef(({className:t,...n},r)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:r,className:Ce("w-full caption-bottom text-sm",t),...n})}));Fs.displayName="Table";const Bs=x.forwardRef(({className:t,...n},r)=>o.jsx("thead",{ref:r,className:Ce("[&_tr]:border-b",t),...n}));Bs.displayName="TableHeader";const zs=x.forwardRef(({className:t,...n},r)=>o.jsx("tbody",{ref:r,className:Ce("[&_tr:last-child]:border-0",t),...n}));zs.displayName="TableBody";const Hce=x.forwardRef(({className:t,...n},r)=>o.jsx("tfoot",{ref:r,className:Ce("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n}));Hce.displayName="TableFooter";const qe=x.forwardRef(({className:t,...n},r)=>o.jsx("tr",{ref:r,className:Ce("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n}));qe.displayName="TableRow";const we=x.forwardRef(({className:t,...n},r)=>o.jsx("th",{ref:r,className:Ce("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));we.displayName="TableHead";const re=x.forwardRef(({className:t,...n},r)=>o.jsx("td",{ref:r,className:Ce("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));re.displayName="TableCell";const Wce=x.forwardRef(({className:t,...n},r)=>o.jsx("caption",{ref:r,className:Ce("mt-4 text-sm text-muted-foreground",t),...n}));Wce.displayName="TableCaption";var Kce="Separator",JE="horizontal",qce=["horizontal","vertical"],EF=x.forwardRef((t,n)=>{const{decorative:r,orientation:s=JE,...a}=t,i=Gce(s)?s:JE,c=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx($e.div,{"data-orientation":i,...c,...a,ref:n})});EF.displayName=Kce;function Gce(t){return qce.includes(t)}var TF=EF;const Ud=x.forwardRef(({className:t,orientation:n="horizontal",decorative:r=!0,...s},a)=>o.jsx(TF,{ref:a,decorative:r,orientation:n,className:Ce("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...s}));Ud.displayName=TF.displayName;function Yce(t,n){return x.useReducer((r,s)=>n[r][s]??r,t)}var uk="ScrollArea",[MF]=ko(uk),[Xce,hs]=MF(uk),OF=x.forwardRef((t,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600,...l}=t,[c,d]=x.useState(null),[u,f]=x.useState(null),[p,h]=x.useState(null),[m,g]=x.useState(null),[y,v]=x.useState(null),[b,w]=x.useState(0),[j,N]=x.useState(0),[S,_]=x.useState(!1),[k,C]=x.useState(!1),P=Je(n,M=>d(M)),E=yy(a);return o.jsx(Xce,{scope:r,type:s,dir:E,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:f,content:p,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:w,onCornerHeightChange:N,children:o.jsx($e.div,{dir:E,...l,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});OF.displayName=uk;var RF="ScrollAreaViewport",IF=x.forwardRef((t,n)=>{const{__scopeScrollArea:r,children:s,nonce:a,...i}=t,l=hs(RF,r),c=x.useRef(null),d=Je(n,c,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),o.jsx($e.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});IF.displayName=RF;var Ca="ScrollAreaScrollbar",fk=x.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=hs(Ca,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,c=t.orientation==="horizontal";return x.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),a.type==="hover"?o.jsx(Jce,{...s,ref:n,forceMount:r}):a.type==="scroll"?o.jsx(Qce,{...s,ref:n,forceMount:r}):a.type==="auto"?o.jsx(DF,{...s,ref:n,forceMount:r}):a.type==="always"?o.jsx(pk,{...s,ref:n}):null});fk.displayName=Ca;var Jce=x.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=hs(Ca,t.__scopeScrollArea),[i,l]=x.useState(!1);return x.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const u=()=>{window.clearTimeout(d),l(!0)},f=()=>{d=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),o.jsx(ka,{present:r||i,children:o.jsx(DF,{"data-state":i?"visible":"hidden",...s,ref:n})})}),Qce=x.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=hs(Ca,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Ty(()=>d("SCROLL_END"),100),[c,d]=Yce("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,a.scrollHideDelay,d]),x.useEffect(()=>{const u=a.viewport,f=i?"scrollLeft":"scrollTop";if(u){let p=u[f];const h=()=>{const m=u[f];p!==m&&(d("SCROLL"),l()),p=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,d,l]),o.jsx(ka,{present:r||c!=="hidden",children:o.jsx(pk,{"data-state":c==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:Oe(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Oe(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),DF=x.forwardRef((t,n)=>{const r=hs(Ca,t.__scopeScrollArea),{forceMount:s,...a}=t,[i,l]=x.useState(!1),c=t.orientation==="horizontal",d=Ty(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?u:f)}},10);return pd(r.viewport,d),pd(r.content,d),o.jsx(ka,{present:s||i,children:o.jsx(pk,{"data-state":i?"visible":"hidden",...a,ref:n})})}),pk=x.forwardRef((t,n)=>{const{orientation:r="vertical",...s}=t,a=hs(Ca,t.__scopeScrollArea),i=x.useRef(null),l=x.useRef(0),[c,d]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=zF(c.viewport,c.content),f={...s,sizes:c,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function p(h,m){return sde(h,l.current,c,m)}return r==="horizontal"?o.jsx(Zce,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=QE(h,c,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=p(h,a.dir))}}):r==="vertical"?o.jsx(ede,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=QE(h,c);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=p(h))}}):null}),Zce=x.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,i=hs(Ca,t.__scopeScrollArea),[l,c]=x.useState(),d=x.useRef(null),u=Je(n,d,i.onScrollbarXChange);return x.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),o.jsx($F,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ey(r)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;t.onWheelScroll(h),UF(h,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:_x(l.paddingLeft),paddingEnd:_x(l.paddingRight)}})}})}),ede=x.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,i=hs(Ca,t.__scopeScrollArea),[l,c]=x.useState(),d=x.useRef(null),u=Je(n,d,i.onScrollbarYChange);return x.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),o.jsx($F,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ey(r)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;t.onWheelScroll(h),UF(h,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:_x(l.paddingTop),paddingEnd:_x(l.paddingBottom)}})}})}),[tde,LF]=MF(Ca),$F=x.forwardRef((t,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:p,...h}=t,m=hs(Ca,r),[g,y]=x.useState(null),v=Je(n,P=>y(P)),b=x.useRef(null),w=x.useRef(""),j=m.viewport,N=s.content-s.viewport,S=Zn(f),_=Zn(d),k=Ty(p,10);function C(P){if(b.current){const E=P.clientX-b.current.left,M=P.clientY-b.current.top;u({x:E,y:M})}}return x.useEffect(()=>{const P=E=>{const M=E.target;(g==null?void 0:g.contains(M))&&S(E,N)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[j,g,N,S]),x.useEffect(_,[s,_]),pd(g,k),pd(m.content,k),o.jsx(tde,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:Zn(i),onThumbPointerUp:Zn(l),onThumbPositionChange:_,onThumbPointerDown:Zn(c),children:o.jsx($e.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Oe(t.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),b.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(P))}),onPointerMove:Oe(t.onPointerMove,C),onPointerUp:Oe(t.onPointerUp,P=>{const E=P.target;E.hasPointerCapture(P.pointerId)&&E.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Cx="ScrollAreaThumb",FF=x.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=LF(Cx,t.__scopeScrollArea);return o.jsx(ka,{present:r||a.hasThumb,children:o.jsx(nde,{ref:n,...s})})}),nde=x.forwardRef((t,n)=>{const{__scopeScrollArea:r,style:s,...a}=t,i=hs(Cx,r),l=LF(Cx,r),{onThumbPositionChange:c}=l,d=Je(n,p=>l.onThumbChange(p)),u=x.useRef(void 0),f=Ty(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const p=i.viewport;if(p){const h=()=>{if(f(),!u.current){const m=ade(p,c);u.current=m,c()}};return c(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[i.viewport,f,c]),o.jsx($e.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Oe(t.onPointerDownCapture,p=>{const m=p.target.getBoundingClientRect(),g=p.clientX-m.left,y=p.clientY-m.top;l.onThumbPointerDown({x:g,y})}),onPointerUp:Oe(t.onPointerUp,l.onThumbPointerUp)})});FF.displayName=Cx;var hk="ScrollAreaCorner",BF=x.forwardRef((t,n)=>{const r=hs(hk,t.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?o.jsx(rde,{...t,ref:n}):null});BF.displayName=hk;var rde=x.forwardRef((t,n)=>{const{__scopeScrollArea:r,...s}=t,a=hs(hk,r),[i,l]=x.useState(0),[c,d]=x.useState(0),u=!!(i&&c);return pd(a.scrollbarX,()=>{var p;const f=((p=a.scrollbarX)==null?void 0:p.offsetHeight)||0;a.onCornerHeightChange(f),d(f)}),pd(a.scrollbarY,()=>{var p;const f=((p=a.scrollbarY)==null?void 0:p.offsetWidth)||0;a.onCornerWidthChange(f),l(f)}),u?o.jsx($e.div,{...s,ref:n,style:{width:i,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function _x(t){return t?parseInt(t,10):0}function zF(t,n){const r=t/n;return isNaN(r)?0:r}function Ey(t){const n=zF(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-r)*n;return Math.max(s,18)}function sde(t,n,r,s="ltr"){const a=Ey(r),i=a/2,l=n||i,c=a-l,d=r.scrollbar.paddingStart+l,u=r.scrollbar.size-r.scrollbar.paddingEnd-c,f=r.content-r.viewport,p=s==="ltr"?[0,f]:[f*-1,0];return VF([d,u],p)(t)}function QE(t,n,r="ltr"){const s=Ey(n),a=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=n.scrollbar.size-a,l=n.content-n.viewport,c=i-s,d=r==="ltr"?[0,l]:[l*-1,0],u=Nj(t,d);return VF([0,l],[0,c])(u)}function VF(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(t[1]-t[0]);return n[0]+s*(r-t[0])}}function UF(t,n){return t>0&&t<n}var ade=(t,n=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},s=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=r.left!==i.left,c=r.top!==i.top;(l||c)&&n(),r=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Ty(t,n){const r=Zn(t),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function pd(t,n){const r=Zn(n);An(()=>{let s=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(s),a.unobserve(t)}}},[t,r])}var HF=OF,ide=IF,ode=BF;const WF=x.forwardRef(({className:t,children:n,...r},s)=>o.jsxs(HF,{ref:s,className:Ce("relative overflow-hidden",t),...r,children:[o.jsx(ide,{className:"h-full w-full rounded-[inherit]",children:n}),o.jsx(KF,{}),o.jsx(ode,{})]}));WF.displayName=HF.displayName;const KF=x.forwardRef(({className:t,orientation:n="vertical",...r},s)=>o.jsx(fk,{ref:s,orientation:n,className:Ce("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:o.jsx(FF,{className:"relative flex-1 rounded-full bg-border"})}));KF.displayName=fk.displayName;const qF=["tablet","injection","syrup","capsule","ointment","drops","tonic","other"],GF="__all__",lde=t=>t===GF?"":t;function cde(){const[t,n]=x.useState([]),[r,s]=x.useState(!1),[a,i]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),[f,p]=x.useState(!0),h=gy(a,250),[m,g]=x.useState(null),[y,v]=x.useState(!1),[b,w]=x.useState(!1),[j,N]=x.useState(null),[S,_]=x.useState("xlsx"),[k,C]=x.useState(!1),P=async()=>{var R,O;s(!0);try{const{data:I}=await Kl({q:h||void 0,form:l||void 0,class_name:d||void 0,is_active:f?!0:void 0,limit:200});n(I||[])}catch(I){V.error("Failed to load medicines",{description:((O=(R=I==null?void 0:I.response)==null?void 0:R.data)==null?void 0:O.detail)||"Please retry."})}finally{s(!1)}};x.useEffect(()=>{P()},[h,l,d,f]);const E=async R=>{var O,I;try{m!=null&&m.id?await Pae(m.id,R):await _ae(R),v(!1),g(null),await P(),V.success("Saved",{description:"Medicine saved successfully."})}catch(L){V.error("Save failed",{description:((I=(O=L==null?void 0:L.response)==null?void 0:O.data)==null?void 0:I.detail)||"Try again."})}},M=async R=>{var O,I;if(window.confirm(`Delete ${R.name}?`))try{await Aae(R.id),await P(),V.success("Deleted",{description:"Medicine removed."})}catch(L){V.error("Delete failed",{description:((I=(O=L==null?void 0:L.response)==null?void 0:O.data)==null?void 0:I.detail)||"Try again."})}},T=async()=>{var R,O;try{const I=await Eae(S),L=URL.createObjectURL(I),D=document.createElement("a");D.href=L,D.download=S==="xlsx"?"medicine_import_sample.xlsx":"medicine_import_sample.csv",D.click(),URL.revokeObjectURL(L)}catch(I){V.error("Could not download sample",{description:((O=(R=I==null?void 0:I.response)==null?void 0:R.data)==null?void 0:O.detail)||"Try again."})}},A=async()=>{var R,O;if(!j){V.error("Choose a file",{description:"Select an .xlsx or .csv file to continue."});return}C(!0);try{await Tae(j,!0),N(null),w(!1),V.success("Imported",{description:"Medicines imported successfully."}),await P()}catch(I){V.error("Import failed",{description:((O=(R=I==null?void 0:I.response)==null?void 0:R.data)==null?void 0:O.detail)||"Please check the format and retry."})}finally{C(!1)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Medicines"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(Ie,{anyOf:["pharmacy.masters.manage"],children:[o.jsxs(ce,{onClick:()=>{g(null),v(!0)},children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New"]}),o.jsxs(ce,{variant:"outline",onClick:()=>w(!0),children:[o.jsx(hx,{className:"h-4 w-4 mr-2"})," Import"]})]})})]}),o.jsx(Se,{children:o.jsx(Ee,{className:"p-4",children:o.jsxs("div",{className:"grid gap-3 md:grid-cols-5 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx(fe,{className:"pl-9",placeholder:"Code, brand, generic, manufacturer",value:a,onChange:R=>i(R.target.value)})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Form"}),o.jsxs(jt,{value:l,onValueChange:R=>c(lde(R)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:GF,children:"All"}),qF.map(R=>o.jsx(Ue,{value:R,children:R},R))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Therapeutic class"}),o.jsx(fe,{placeholder:"e.g. Antibiotic",value:d,onChange:R=>u(R.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{id:"activeOnly",type:"checkbox",className:"h-4 w-4",checked:f,onChange:R=>p(R.target.checked)}),o.jsx(le,{htmlFor:"activeOnly",children:"Active only"})]})]})})}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Catalog"})}),o.jsx(Ee,{className:"p-0",children:o.jsx(WF,{className:"max-h-[65vh]",children:o.jsxs(Fs,{children:[o.jsx(Bs,{className:"sticky top-0 bg-white",children:o.jsxs(qe,{children:[o.jsx(we,{children:"Code"}),o.jsx(we,{children:"Name"}),o.jsx(we,{children:"Form"}),o.jsx(we,{children:"Strength"}),o.jsx(we,{children:"Pack"}),o.jsx(we,{children:"Default Price"}),o.jsx(we,{children:"Reorder"}),o.jsx(we,{className:"w-[120px]"})]})}),o.jsxs(zs,{children:[r&&Array.from({length:8}).map((R,O)=>o.jsxs(qe,{children:[o.jsx(re,{children:o.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),o.jsxs(re,{children:[o.jsx("div",{className:"h-4 w-48 animate-pulse rounded bg-gray-200 mb-1"}),o.jsx("div",{className:"h-3 w-32 animate-pulse rounded bg-gray-200"})]}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-12 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{})]},`sk-${O}`)),!r&&t.map(R=>o.jsx(Ds,{children:o.jsxs(ge.tr,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.15},className:"border-b",children:[o.jsx(re,{className:"font-mono",children:R.code}),o.jsxs(re,{children:[o.jsxs("div",{className:"font-medium flex items-center gap-2",children:[R.name,!!R.lasa_flag&&o.jsx(Vn,{variant:"secondary",className:"bg-amber-50 text-amber-800",children:"LASA"}),R.is_active===!1&&o.jsx(Vn,{variant:"outline",className:"text-gray-600",children:"Inactive"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:R.generic_name||""})]}),o.jsx(re,{className:"capitalize",children:R.form}),o.jsx(re,{children:R.strength||""}),o.jsxs(re,{children:[R.pack_size||1," ",R.unit]}),o.jsx(re,{children:R.default_price??""}),o.jsx(re,{children:R.reorder_level??0}),o.jsx(re,{className:"text-right",children:o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsxs("div",{className:"flex justify-end gap-1",children:[o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>{g(R),v(!0)},title:"Edit",children:o.jsx(Rs,{className:"h-4 w-4"})}),o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>M(R),title:"Delete",children:o.jsx(Na,{className:"h-4 w-4 text-rose-600"})})]})})})]})},R.id)),!r&&t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No records"})})]})]})})})]}),o.jsx(mo,{open:y,onOpenChange:v,children:o.jsxs(ti,{className:"sm:max-w-2xl",children:[o.jsx(ni,{children:o.jsx(ri,{children:m?"Edit Medicine":"New Medicine"})}),o.jsx(dde,{initial:m,onCancel:()=>v(!1),onSave:E})]})}),o.jsx(mo,{open:b,onOpenChange:w,children:o.jsxs(ti,{className:"sm:max-w-xl",children:[o.jsx(ni,{children:o.jsx(ri,{children:"Import Medicines"})}),o.jsxs(dk,{defaultValue:"howto",className:"w-full",children:[o.jsxs(Ay,{className:"grid grid-cols-2",children:[o.jsx(cl,{value:"howto",children:"How it works"}),o.jsx(cl,{value:"upload",children:"Upload"})]}),o.jsxs(sa,{value:"howto",className:"space-y-3 text-sm",children:[o.jsx("p",{children:"Download a sample file that matches the exact columns supported by your backend."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(jt,{value:S,onValueChange:_,children:[o.jsx(ht,{className:"w-40",children:o.jsx(Nt,{placeholder:"Format"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:"xlsx",children:"Excel (.xlsx)"}),o.jsx(Ue,{value:"csv",children:"CSV (.csv)"})]})]}),o.jsxs(ce,{variant:"outline",onClick:T,children:[o.jsx(Xu,{className:"h-4 w-4 mr-2"})," Sample"]})]}),o.jsx(Ud,{}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Expected columns (order can vary; header names must match):"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-xs",children:["code","name","generic_name","form","strength","unit","pack_size","manufacturer","class_name","atc_code","lasa_flag","default_tax_percent","default_price","default_mrp","reorder_level","is_active"].map(R=>o.jsx(Vn,{variant:"secondary",className:"justify-start",children:R},R))})]})]}),o.jsxs(sa,{value:"upload",className:"space-y-3 text-sm",children:[o.jsx(le,{children:"Upload file"}),o.jsx(fe,{type:"file",accept:".xlsx,.csv",onChange:R=>{var O;return N(((O=R.target.files)==null?void 0:O[0])||null)}}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Tips: Keep booleans as ",o.jsx("code",{children:"true/false"}),", and empty numeric fields as blank."]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx(ce,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),o.jsxs(ce,{onClick:A,disabled:k,children:[o.jsx(hx,{className:"h-4 w-4 mr-2"})," ",k?"Importing":"Import"]})]})]})]})]})})]})}function dde({initial:t,onCancel:n,onSave:r}){const[s,a]=x.useState({code:"",name:"",generic_name:"",form:"tablet",strength:"",unit:"unit",pack_size:1,manufacturer:"",class_name:"",atc_code:"",lasa_flag:!1,default_tax_percent:"",default_price:"",default_mrp:"",reorder_level:0,is_active:!0});x.useEffect(()=>{t&&a({code:t.code||"",name:t.name||"",generic_name:t.generic_name||"",form:t.form||"tablet",strength:t.strength||"",unit:t.unit||"unit",pack_size:t.pack_size??1,manufacturer:t.manufacturer||"",class_name:t.class_name||"",atc_code:t.atc_code||"",lasa_flag:!!t.lasa_flag,default_tax_percent:t.default_tax_percent??"",default_price:t.default_price??"",default_mrp:t.default_mrp??"",reorder_level:t.reorder_level??0,is_active:t.is_active!==!1})},[t]);const i=(c,d)=>a(u=>({...u,[c]:d})),l=c=>{c.preventDefault();const d={...s,default_tax_percent:s.default_tax_percent===""?null:Number(s.default_tax_percent),default_price:s.default_price===""?null:Number(s.default_price),default_mrp:s.default_mrp===""?null:Number(s.default_mrp),pack_size:Number(s.pack_size||1),reorder_level:Number(s.reorder_level||0)};r(d)};return o.jsx(Ds,{mode:"wait",children:o.jsxs(ge.form,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},onSubmit:l,className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Code"}),o.jsx(fe,{value:s.code,onChange:c=>i("code",c.target.value),required:!0})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Name (Brand)"}),o.jsx(fe,{value:s.name,onChange:c=>i("name",c.target.value),required:!0})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx(le,{children:"Generic name"}),o.jsx(fe,{value:s.generic_name,onChange:c=>i("generic_name",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Form"}),o.jsxs(jt,{value:s.form,onValueChange:c=>i("form",c),children:[o.jsx(ht,{children:o.jsx(Nt,{})}),o.jsx(mt,{children:qF.map(c=>o.jsx(Ue,{value:c,children:c},c))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Strength"}),o.jsx(fe,{value:s.strength,onChange:c=>i("strength",c.target.value),placeholder:"500mg / 5mg/ml"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Unit"}),o.jsx(fe,{value:s.unit,onChange:c=>i("unit",c.target.value),placeholder:"tablet/ml/vial"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Pack size"}),o.jsx(fe,{type:"number",value:s.pack_size,onChange:c=>i("pack_size",c.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Manufacturer"}),o.jsx(fe,{value:s.manufacturer,onChange:c=>i("manufacturer",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Therapeutic class"}),o.jsx(fe,{value:s.class_name,onChange:c=>i("class_name",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"ATC code"}),o.jsx(fe,{value:s.atc_code,onChange:c=>i("atc_code",c.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[o.jsx("input",{id:"lasa",type:"checkbox",className:"h-4 w-4",checked:s.lasa_flag,onChange:c=>i("lasa_flag",c.target.checked)}),o.jsx(le,{htmlFor:"lasa",children:"LASA (Look-Alike / Sound-Alike)"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Default tax %"}),o.jsx(fe,{type:"number",step:"0.01",value:s.default_tax_percent,onChange:c=>i("default_tax_percent",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Default price"}),o.jsx(fe,{type:"number",step:"0.01",value:s.default_price,onChange:c=>i("default_price",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Default MRP"}),o.jsx(fe,{type:"number",step:"0.01",value:s.default_mrp,onChange:c=>i("default_mrp",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Reorder level"}),o.jsx(fe,{type:"number",value:s.reorder_level,onChange:c=>i("reorder_level",c.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[o.jsx("input",{id:"active",type:"checkbox",className:"h-4 w-4",checked:s.is_active,onChange:c=>i("is_active",c.target.checked)}),o.jsx(le,{htmlFor:"active",children:"Active"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsx(ce,{type:"submit",children:"Save"})]})]},t!=null&&t.id?"edit":"new")})}function ude(){const[t,n]=x.useState([]),[r,s]=x.useState(""),[a,i]=x.useState(!1),[l,c]=x.useState(null),[d,u]=x.useState(!1),[f,p]=x.useState({name:"",contact_person:"",phone:"",email:"",gstin:"",address:"",payment_terms:"",is_active:!0}),h=async()=>{var N,S;try{const{data:_}=await WS({q:r||void 0});n(_||[])}catch(_){V.error("Load failed",{description:((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Please retry."})}};x.useEffect(()=>{h()},[r]);const m=(N,S)=>p(_=>({..._,[N]:S})),g=()=>{c(null),p({name:"",contact_person:"",phone:"",email:"",gstin:"",address:"",payment_terms:"",is_active:!0})},y=()=>{g(),i(!0)},v=N=>{c(N),p({...N}),i(!0)},b=()=>{var N;return(N=f.name)!=null&&N.trim()?f.email&&!/^\S+@\S+\.\S+$/.test(f.email)?"Invalid email":f.phone&&!/^[\d+\-\s()]{6,}$/.test(f.phone)?"Invalid phone":null:"Name is required"},w=async()=>{var S,_;const N=b();if(N){V.error("Validation error",{description:N});return}u(!0);try{l?await Oae(l.id,f):await Mae(f),i(!1),c(null),await h(),V.success("Saved",{description:"Supplier saved successfully."})}catch(k){V.error("Save failed",{description:((_=(S=k==null?void 0:k.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}finally{u(!1)}},j=async N=>{var S,_;if(window.confirm(`Delete ${N.name}?`))try{await Rae(N.id),await h(),V.success("Deleted",{description:"Supplier removed."})}catch(k){V.error("Delete failed",{description:((_=(S=k==null?void 0:k.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Suppliers"}),o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsxs(ce,{onClick:y,children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New"]})})]}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Suppliers"})}),o.jsxs(Ee,{children:[o.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:o.jsxs("div",{children:[o.jsx(le,{children:"Search"}),o.jsx(fe,{value:r,onChange:N=>s(N.target.value),placeholder:"Name, phone, email, GSTIN"})]})}),o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"overflow-auto",children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"Name"}),o.jsx(we,{children:"Contact"}),o.jsx(we,{children:"Phone"}),o.jsx(we,{children:"GSTIN"}),o.jsx(we,{children:"Status"}),o.jsx(we,{})]})}),o.jsxs(zs,{children:[(t||[]).map((N,S)=>o.jsxs(ge.tr,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.01*S},className:"border-b",children:[o.jsx(re,{className:"font-medium",children:N.name}),o.jsxs(re,{children:[N.contact_person||"","  ",N.email||""]}),o.jsx(re,{children:N.phone||""}),o.jsx(re,{children:N.gstin||""}),o.jsx(re,{children:o.jsx("span",{className:["rounded-md px-2 py-0.5 text-xs border",N.is_active?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"].join(" "),children:N.is_active?"Active":"Inactive"})}),o.jsx(re,{className:"text-right",children:o.jsxs(Ie,{anyOf:["pharmacy.masters.manage"],children:[o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>v(N),children:o.jsx(Rs,{className:"h-4 w-4"})}),o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>j(N),children:o.jsx(Na,{className:"h-4 w-4 text-rose-600"})})]})})]},N.id)),t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:6,className:"text-center py-6 text-sm text-gray-500",children:"No suppliers"})})]})]})})})]})]})}),o.jsx(mo,{open:a,onOpenChange:i,children:o.jsxs(ti,{className:"sm:max-w-2xl",children:[o.jsx(ni,{children:o.jsx(ri,{children:l?"Edit Supplier":"New Supplier"})}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2 text-sm",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Name"}),o.jsx(fe,{value:f.name,onChange:N=>m("name",N.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Contact person"}),o.jsx(fe,{value:f.contact_person,onChange:N=>m("contact_person",N.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Phone"}),o.jsx(fe,{value:f.phone,onChange:N=>m("phone",N.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Email"}),o.jsx(fe,{value:f.email,onChange:N=>m("email",N.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"GSTIN"}),o.jsx(fe,{value:f.gstin,onChange:N=>m("gstin",N.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Address"}),o.jsx(fe,{value:f.address,onChange:N=>m("address",N.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Payment terms"}),o.jsx(fe,{value:f.payment_terms,onChange:N=>m("payment_terms",N.target.value)})]}),o.jsx(Ud,{className:"md:col-span-2"}),o.jsxs("div",{className:"flex gap-2 items-center md:col-span-2",children:[o.jsx("input",{id:"sup-active",type:"checkbox",className:"h-4 w-4",checked:!!f.is_active,onChange:N=>m("is_active",N.target.checked)}),o.jsx(le,{htmlFor:"sup-active",children:"Active"})]})]}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),o.jsx(ce,{onClick:w,disabled:d,children:d?"Saving":"Save"})]})]})})]})}function fde(){const[t,n]=x.useState([]),[r,s]=x.useState(!1),[a,i]=x.useState(""),l=gy(a,250),[c,d]=x.useState(!1),[u,f]=x.useState(null),[p,h]=x.useState({code:"",name:"",is_active:!0}),[m,g]=x.useState(!1),y=(S,_)=>h(k=>({...k,[S]:_})),v=async()=>{var S,_;s(!0);try{const{data:k}=await Fd({q:l||void 0});n(k||[])}catch(k){V.error("Load failed",{description:((_=(S=k==null?void 0:k.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}finally{s(!1)}};x.useEffect(()=>{v()},[l]);const b=()=>{f(null),h({code:"",name:"",is_active:!0}),d(!0)},w=S=>{f(S),h({code:S.code||"",name:S.name||"",is_active:!!S.is_active}),d(!0)},j=async()=>{var S,_,k,C;if(!((S=p.code)!=null&&S.trim())||!((_=p.name)!=null&&_.trim())){V.error("Missing fields",{description:"Code and Name are required."});return}g(!0);try{u?await Dae(u.id,p):await Iae(p),d(!1),f(null),await v(),V.success("Saved",{description:"Location saved successfully."})}catch(P){V.error("Save failed",{description:((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Please retry."})}finally{g(!1)}},N=async S=>{var _,k;if(window.confirm(`Delete location "${S.name}"? This cannot be undone.`))try{await Lae(S.id),await v(),V.success("Deleted",{description:"Location removed."})}catch(C){V.error("Delete failed",{description:((k=(_=C==null?void 0:C.response)==null?void 0:_.data)==null?void 0:k.detail)||"Please retry."})}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Locations"}),o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsxs(ce,{onClick:b,children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New"]})})]}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Locations"})}),o.jsxs(Ee,{children:[o.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:o.jsxs("div",{children:[o.jsx(le,{children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx(fe,{className:"pl-9",value:a,onChange:S=>i(S.target.value),placeholder:"Code, name"})]})]})}),o.jsx("div",{className:"mt-4 overflow-auto rounded-lg border",children:o.jsxs(Fs,{children:[o.jsx(Bs,{className:"sticky top-0 bg-white",children:o.jsxs(qe,{children:[o.jsx(we,{className:"w-[160px]",children:"Code"}),o.jsx(we,{children:"Name"}),o.jsx(we,{className:"w-[140px]",children:"Status"}),o.jsx(we,{className:"w-[120px]"})]})}),o.jsxs(zs,{children:[r&&Array.from({length:6}).map((S,_)=>o.jsxs(qe,{children:[o.jsx(re,{children:o.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-64 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-5 w-20 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{})]},`sk-${_}`)),!r&&t.map(S=>o.jsxs(qe,{className:"hover:bg-gray-50 transition-colors",children:[o.jsx(re,{className:"font-mono",children:S.code}),o.jsx(re,{className:"font-medium",children:S.name}),o.jsx(re,{children:S.is_active?o.jsx(Vn,{variant:"secondary",className:"bg-emerald-50 text-emerald-800 hover:bg-emerald-50",children:"Active"}):o.jsx(Vn,{variant:"outline",className:"text-gray-600",children:"Inactive"})}),o.jsx(re,{className:"text-right",children:o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsxs("div",{className:"flex justify-end gap-1",children:[o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>w(S),title:"Edit",children:o.jsx(Rs,{className:"h-4 w-4"})}),o.jsx(ce,{size:"icon",variant:"ghost",onClick:()=>N(S),title:"Delete",children:o.jsx(Na,{className:"h-4 w-4 text-rose-600"})})]})})})]},S.id)),!r&&t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:4,className:"text-center py-6 text-sm text-gray-500",children:"No locations"})})]})]})})]})]}),o.jsx(mo,{open:c,onOpenChange:d,children:o.jsxs(ti,{className:"sm:max-w-md",children:[o.jsx(ni,{children:o.jsx(ri,{children:u?"Edit Location":"New Location"})}),o.jsx(Ds,{mode:"wait",children:o.jsxs(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"grid gap-3 md:grid-cols-2 text-sm",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Code"}),o.jsx(fe,{value:p.code,onChange:S=>y("code",S.target.value),placeholder:"e.g. MAIN, ICU, SAT1"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Name"}),o.jsx(fe,{value:p.name,onChange:S=>y("name",S.target.value),placeholder:"Main Pharmacy"})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 pt-1",children:[o.jsx("input",{id:"loc-active",type:"checkbox",className:"h-4 w-4",checked:!!p.is_active,onChange:S=>y("is_active",S.target.checked)}),o.jsx(le,{htmlFor:"loc-active",children:"Active"})]})]},u?"edit":"new")}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),o.jsx(ce,{onClick:j,disabled:m,children:m?"Saving":"Save"})]})]})})]})}function pde(){var Fe,Te;const[t,n]=x.useState([]),[r,s]=x.useState(!1),a="__all__",i=X=>X===a?"":X,[l,c]=x.useState(""),d=gy(l,250),[u,f]=x.useState(""),[p,h]=x.useState(""),[m,g]=x.useState(!1),[y,v]=x.useState(""),[b,w]=x.useState([]),[j,N]=x.useState([]),[S,_]=x.useState(!1),[k,C]=x.useState(!1),[P,E]=x.useState(!1),[M,T]=x.useState(!1),[A,R]=x.useState(null),[O,I]=x.useState(0),[L,D]=x.useState("stock_take"),[$,F]=x.useState(""),[K,J]=x.useState(0),Y=X=>X&&new Date(X)<new Date,ee=X=>{if(!X)return!1;const je=new Date(X),_e=new Date;return _e.setDate(_e.getDate()+30),je>=new Date&&je<=_e},Q=X=>{const je=Number((X==null?void 0:X.reorder_level)??NaN);return Number.isFinite(je)&&Number(X.on_hand)<=je},ue=async()=>{var X,je;s(!0);try{const{data:_e}=await $ae({q:d||void 0,location_id:u||void 0,medicine_id:p||void 0,expiry_before:y||void 0,only_low:m?!0:void 0,limit:500});n(_e||[])}catch(_e){V.error("Failed to load inventory",{description:((je=(X=_e==null?void 0:_e.response)==null?void 0:X.data)==null?void 0:je.detail)||"Please retry."})}finally{s(!1)}};x.useEffect(()=>{ue()},[d,u,p,y,m]),x.useEffect(()=>{(async()=>{var X,je;try{const[_e,it]=await Promise.all([Fd().then(tt=>tt.data||[]),Kl({limit:1e3,is_active:!0}).then(tt=>tt.data||[])]);w(_e),N(it)}catch(_e){V.error("Failed to load filters",{description:((je=(X=_e==null?void 0:_e.response)==null?void 0:X.data)==null?void 0:je.detail)||"Please refresh."})}})()},[]);const G=X=>{R(X),I(0),D("stock_take"),_(!0)},ne=X=>{R(X),F(""),J(0),C(!0)},z=()=>{const X=Number(O||0);if(!Number.isFinite(X))return"Enter a valid number.";if(X===0)return"Change cannot be 0.";const je=Number((A==null?void 0:A.on_hand)||0)+X;return je<0?`Cannot reduce below 0 (would be ${je}).`:null},te=()=>{const X=Number(K||0);return $?X>0?X>Number((A==null?void 0:A.on_hand)||0)?`Only ${A==null?void 0:A.on_hand} available.`:null:"Quantity must be > 0.":"Select a destination."},oe=async()=>{var je,_e;const X=z();if(X){V.error("Cannot adjust",{description:X});return}E(!0);try{await Fae({lot_id:A.id,qty_change:Number(O||0),reason:L}),_(!1),V.success("Adjusted",{description:`Lot ${A.batch}: on-hand updated.`}),await ue()}catch(it){V.error("Adjust failed",{description:((_e=(je=it==null?void 0:it.response)==null?void 0:je.data)==null?void 0:_e.detail)||"Please retry."})}finally{E(!1)}},H=async()=>{var je,_e;const X=te();if(X){V.error("Cannot transfer",{description:X});return}T(!0);try{await Bae({lot_id:A.id,from_location_id:A.location_id,to_location_id:Number($),qty:Number(K||0)}),C(!1),V.success("Transferred",{description:`Moved ${K} unit(s) of ${A.batch}.`}),await ue()}catch(it){V.error("Transfer failed",{description:((_e=(je=it==null?void 0:it.response)==null?void 0:je.data)==null?void 0:_e.detail)||"Please retry."})}finally{T(!1)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Inventory (Lots)"})}),o.jsx(Se,{children:o.jsx(Ee,{className:"p-4",children:o.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx(fe,{className:"pl-9",placeholder:"Medicine code/name/batch",value:l,onChange:X=>c(X.target.value)})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Location"}),o.jsxs(jt,{value:u||a,onValueChange:X=>f(i(X)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:a,children:"All"}),b.map(X=>o.jsxs(Ue,{value:String(X.id),children:[X.code,"  ",X.name]},X.id))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:p,onValueChange:X=>h(i(X)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:a,children:"All"}),j.map(X=>o.jsxs(Ue,{value:String(X.id),children:[X.code,"  ",X.name]},X.id))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Expiry before"}),o.jsx(fe,{type:"date",value:y,onChange:X=>v(X.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center pt-6 md:pt-0",children:[o.jsx("input",{id:"onlyLow",type:"checkbox",className:"h-4 w-4",checked:m,onChange:X=>g(X.target.checked)}),o.jsx(le,{htmlFor:"onlyLow",children:"Low stock only"})]})]})})}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Lots"})}),o.jsx(Ee,{className:"p-0",children:o.jsx("div",{className:"overflow-auto",children:o.jsxs(Fs,{children:[o.jsx(Bs,{className:"sticky top-0 bg-white",children:o.jsxs(qe,{children:[o.jsx(we,{children:"Medicine"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"Batch"}),o.jsx(we,{children:"Expiry"}),o.jsx(we,{className:"text-right",children:"On Hand"}),o.jsx(we,{className:"text-right",children:"Price"}),o.jsx(we,{className:"text-right",children:"Status"}),o.jsx(we,{})]})}),o.jsxs(zs,{children:[r&&Array.from({length:6}).map((X,je)=>o.jsxs(qe,{children:[o.jsx(re,{children:o.jsx("div",{className:"h-4 w-40 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{className:"text-right",children:o.jsx("div",{className:"ml-auto h-4 w-10 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{className:"text-right",children:o.jsx("div",{className:"ml-auto h-4 w-12 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{className:"text-right",children:o.jsx("div",{className:"ml-auto h-4 w-24 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{})]},`sk-${je}`)),!r&&t.map(X=>{var tt,bi,Do;const je=Y(X.expiry),_e=ee(X.expiry),it=Q(X);return o.jsxs(qe,{className:[je?"bg-rose-50":_e?"bg-amber-50":"","hover:bg-gray-50 transition-colors"].join(" "),children:[o.jsxs(re,{children:[o.jsx("div",{className:"font-medium",children:((tt=X.medicine)==null?void 0:tt.name)||X.medicine_name||`#${X.medicine_id}`}),o.jsx("div",{className:"text-xs text-gray-500",children:((bi=X.medicine)==null?void 0:bi.code)||X.code})]}),o.jsx(re,{children:((Do=X.location)==null?void 0:Do.code)||X.location_id}),o.jsx(re,{children:X.batch}),o.jsx(re,{children:X.expiry}),o.jsx(re,{className:"text-right",children:X.on_hand}),o.jsx(re,{className:"text-right",children:X.sell_price??""}),o.jsx(re,{className:"text-right",children:o.jsxs("div",{className:"inline-flex flex-wrap justify-end gap-1",children:[je&&o.jsx(Vn,{variant:"destructive",children:"Expired"}),!je&&_e&&o.jsx(Vn,{variant:"secondary",children:"Expiring soon"}),it&&o.jsx(Vn,{className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:"Low"})]})}),o.jsx(re,{className:"text-right",children:o.jsx(Ie,{anyOf:["pharmacy.inventory.manage"],children:o.jsxs("div",{className:"flex justify-end gap-1",children:[o.jsx(ce,{size:"sm",variant:"outline",onClick:()=>G(X),children:"Adjust"}),o.jsx(ce,{size:"sm",onClick:()=>ne(X),children:"Transfer"})]})})})]},X.id)}),!r&&t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No lots found."})})]})]})})})]}),o.jsx(mo,{open:S,onOpenChange:_,children:o.jsxs(ti,{children:[o.jsx(ni,{children:o.jsx(ri,{children:"Adjust stock"})}),o.jsx(Ds,{mode:"wait",children:A&&o.jsxs(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:["Lot ",o.jsx("span",{className:"font-medium",children:A.batch}),"  On hand: ",o.jsx("span",{className:"font-medium",children:A.on_hand}),"  Location: ",o.jsx("span",{className:"font-medium",children:((Fe=A.location)==null?void 0:Fe.code)||A.location_id})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Quantity change"}),o.jsx(fe,{type:"number",value:O,onChange:X=>I(X.target.value),placeholder:"e.g. -3, +5"}),o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Use negative to decrease. Cannot reduce below 0."})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Reason"}),o.jsx(fe,{value:L,onChange:X=>D(X.target.value)})]})]})]},A.id)}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),o.jsx(ce,{onClick:oe,disabled:P,children:P?"Updating":"Update"})]})]})}),o.jsx(mo,{open:k,onOpenChange:C,children:o.jsxs(ti,{children:[o.jsx(ni,{children:o.jsx(ri,{children:"Transfer stock"})}),o.jsx(Ds,{mode:"wait",children:A&&o.jsxs(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:["From ",o.jsx("span",{className:"font-medium",children:((Te=A.location)==null?void 0:Te.code)||A.location_id}),"  Batch ",o.jsx("span",{className:"font-medium",children:A.batch}),"  On hand ",o.jsx("span",{className:"font-medium",children:A.on_hand})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx(le,{children:"To Location"}),o.jsxs(jt,{value:$,onValueChange:F,children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select location"})}),o.jsx(mt,{children:b.filter(X=>String(X.id)!==String(A==null?void 0:A.location_id)).map(X=>o.jsxs(Ue,{value:String(X.id),children:[X.code,"  ",X.name]},X.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Quantity"}),o.jsx(fe,{type:"number",value:K,onChange:X=>J(X.target.value),placeholder:"e.g. 5"})]})]})]},`x-${A.id}`)}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),o.jsx(ce,{onClick:H,disabled:M,children:M?"Transferring":"Transfer"})]})]})})]})}const hde=t=>{const n="inline-flex items-center rounded-md px-2 py-0.5 text-xs border";switch(t){case"grn":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"po_return":return`${n} bg-rose-50 text-rose-700 border-rose-200`;case"dispense":return`${n} bg-rose-50 text-rose-700 border-rose-200`;case"sale_return":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"adjust_in":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"adjust_out":return`${n} bg-amber-50 text-amber-800 border-amber-200`;case"transfer_in":return`${n} bg-blue-50 text-blue-700 border-blue-200`;case"transfer_out":return`${n} bg-amber-50 text-amber-800 border-amber-200`;default:return`${n} bg-gray-50 text-gray-700 border-gray-200`}};function mde(){const[t,n]=x.useState([]),[r,s]=x.useState(""),[a,i]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),[f,p]=x.useState([]),[h,m]=x.useState([]),[g,y]=x.useState(!1),v=gy(r,250),b="__all__",w=k=>k===""||k==null?b:String(k),j=k=>k===b?"":k,N=["grn","po_return","dispense","sale_return","adjust_in","adjust_out","transfer_in","transfer_out"];x.useEffect(()=>{(async()=>{var k,C;try{const[P,E]=await Promise.all([Fd().then(M=>M.data||[]),Kl({limit:500}).then(M=>M.data||[])]);p(P),m(E)}catch(P){V.error("Failed to load filters",{description:((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Retry."})}})()},[]);const S=async()=>{var k,C;y(!0);try{const{data:P}=await y$({q:v||void 0,type:a||void 0,location_id:l||void 0,medicine_id:d||void 0,limit:500});n(P||[])}catch(P){V.error("Failed to load transactions",{description:((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Retry."})}finally{y(!1)}};x.useEffect(()=>{S()},[v,a,l,d]);const _=()=>{s(""),i(""),c(""),u("")};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Transactions"}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:S,disabled:g,children:[o.jsx(wJ,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Reload"]})]}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:o.jsx(Se,{children:o.jsx(Ee,{className:"p-4",children:o.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx(fe,{className:"pl-9",placeholder:"Ref, note, batch",value:r,onChange:k=>s(k.target.value)})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Type"}),o.jsxs(jt,{value:w(a),onValueChange:k=>i(j(k)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:b,children:"All"}),N.map(k=>o.jsx(Ue,{value:k,children:k},k))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Location"}),o.jsxs(jt,{value:w(l),onValueChange:k=>c(j(k)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:b,children:"All"}),f.map(k=>o.jsxs(Ue,{value:String(k.id),children:[k.code,"  ",k.name]},k.id))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:w(d),onValueChange:k=>u(j(k)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:b,children:"All"}),h.map(k=>o.jsxs(Ue,{value:String(k.id),children:[k.code,"  ",k.name]},k.id))]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{type:"button",variant:"outline",onClick:_,children:"Reset"}),o.jsx(ce,{type:"button",onClick:S,disabled:g,children:g?"Loading":"Apply"})]})]})})})}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18,delay:.04},children:o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Recent activity"})}),o.jsx(Ee,{className:"p-0",children:o.jsx("div",{className:"overflow-auto",children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"Time"}),o.jsx(we,{children:"Type"}),o.jsx(we,{children:"Medicine"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"Lot"}),o.jsx(we,{className:"text-right",children:" Qty"}),o.jsx(we,{children:"Ref"}),o.jsx(we,{children:"Note"})]})}),o.jsxs(zs,{children:[t.map((k,C)=>o.jsxs(ge.tr,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.01*C},className:"border-b",children:[o.jsx(re,{children:new Date(k.ts).toLocaleString()}),o.jsx(re,{children:o.jsx("span",{className:hde(k.type),children:k.type})}),o.jsx(re,{children:k.medicine_name||k.medicine_id}),o.jsx(re,{children:k.location_code||k.location_id}),o.jsxs(re,{children:["#",k.lot_id]}),o.jsx(re,{className:`text-right font-medium ${k.qty_change<0?"text-rose-600":"text-emerald-700"}`,children:k.qty_change>0?`+${k.qty_change}`:k.qty_change}),o.jsxs(re,{children:[k.ref_type||""," ",k.ref_id||""]}),o.jsx(re,{className:"max-w-[26ch] truncate",title:k.note||"",children:k.note||""})]},k.id)),t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No transactions"})})]})]})})})]})})]})}const xde=t=>{switch(t){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"approved":return"bg-blue-50 text-blue-700 border-blue-200";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"cancelled":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};function gde(){const[t,n]=x.useState([]),[r,s]=x.useState(""),[a,i]=x.useState(!1),[l,c]=x.useState(null),[d,u]=x.useState(!1),[f,p]=x.useState([]),[h,m]=x.useState([]),[g,y]=x.useState([]),[v,b]=x.useState({supplier_id:"",location_id:"",items:[]}),w=async()=>{var T,A;i(!0);try{const{data:R}=await KS({q:r||void 0});n(R||[])}catch(R){V.error("Load failed",{description:((A=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:A.detail)||"Retry"})}finally{i(!1)}};x.useEffect(()=>{w()},[r]),x.useEffect(()=>{(async()=>{var T,A;try{const[R,O,I]=await Promise.all([WS().then(L=>L.data||[]),Fd().then(L=>L.data||[]),Kl({limit:500}).then(L=>L.data||[])]);p(R),m(O),y(I)}catch(R){V.error("Failed to load lookups",{description:((A=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:A.detail)||"Retry"})}})()},[]);const j=()=>b(T=>({...T,items:[...T.items,{medicine_id:"",qty:1}]})),N=(T,A)=>b(R=>({...R,items:R.items.map((O,I)=>I===T?{...O,...A}:O)})),S=T=>b(A=>({...A,items:A.items.filter((R,O)=>O!==T)})),_=x.useMemo(()=>!v.supplier_id||!v.location_id?!1:v.items.filter(A=>Number(A.medicine_id)&&Number(A.qty)>0).length>0,[v]),k=v.items.length,C=v.items.reduce((T,A)=>T+Number(A.qty||0),0),P=async()=>{var T,A;try{const R={supplier_id:Number(v.supplier_id),location_id:Number(v.location_id),items:v.items.filter(O=>Number(O.medicine_id)&&Number(O.qty)>0).map(O=>({medicine_id:Number(O.medicine_id),qty:Number(O.qty||1)}))};await zae(R),u(!1),b({supplier_id:"",location_id:"",items:[]}),await w(),V.success("PO created",{description:"Purchase order saved"})}catch(R){V.error("Save failed",{description:((A=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:A.detail)||"Retry"})}},E=async T=>{var A,R;try{c(T),await Vae(T),await w(),V.success("Approved")}catch(O){V.error("Approve failed",{description:((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Retry"})}finally{c(null)}},M=async T=>{var A,R;if(window.confirm("Cancel this purchase order?"))try{c(T),await Uae(T),await w(),V.success("Cancelled")}catch(O){V.error("Cancel failed",{description:((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Retry"})}finally{c(null)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Purchase Orders"}),o.jsx(Ie,{anyOf:["pharmacy.procure.manage"],children:o.jsxs(ce,{onClick:()=>u(!0),children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New PO"]})})]}),o.jsx(Se,{children:o.jsx(Ee,{className:"p-4",children:o.jsx("div",{className:"grid gap-3 md:grid-cols-3 items-end",children:o.jsxs("div",{className:"md:col-span-1",children:[o.jsx(le,{children:"Search"}),o.jsx(fe,{value:r,onChange:T=>s(T.target.value),placeholder:"Supplier, location, code"})]})})})}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"PO List"})}),o.jsx(Ee,{className:"p-0",children:o.jsx("div",{className:"overflow-auto",children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"#"}),o.jsx(we,{children:"Supplier"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"Status"}),o.jsx(we,{className:"text-right",children:"Actions"})]})}),o.jsx(zs,{children:o.jsxs(Ds,{initial:!1,children:[a&&t.length===0&&Array.from({length:4}).map((T,A)=>o.jsxs(qe,{children:[o.jsx(re,{children:o.jsx(He,{className:"h-4 w-24"})}),o.jsx(re,{children:o.jsx(He,{className:"h-4 w-40"})}),o.jsx(re,{children:o.jsx(He,{className:"h-4 w-32"})}),o.jsx(re,{children:o.jsx(He,{className:"h-6 w-24 rounded-md"})}),o.jsx(re,{className:"text-right",children:o.jsx(He,{className:"h-8 w-28 rounded-md ml-auto"})})]},`sk-${A}`)),(t||[]).map(T=>o.jsxs(ge.tr,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},className:"border-b",children:[o.jsxs(re,{children:["PO-",String(T.id).padStart(6,"0")]}),o.jsx(re,{children:T.supplier_name||T.supplier_id}),o.jsx(re,{children:T.location_code||T.location_id}),o.jsx(re,{children:o.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs ${xde(T.status)}`,children:T.status})}),o.jsx(re,{className:"text-right",children:o.jsx(Ie,{anyOf:["pharmacy.procure.manage"],children:o.jsxs("div",{className:"inline-flex gap-2",children:[T.status==="draft"&&o.jsxs(ce,{size:"sm",onClick:()=>E(T.id),disabled:l===T.id,children:[l===T.id?o.jsx(Xa,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Approve"]}),T.status!=="cancelled"&&T.status!=="closed"&&o.jsxs(ce,{size:"sm",variant:"outline",onClick:()=>M(T.id),disabled:l===T.id,children:[l===T.id?o.jsx(Xa,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Cancel"]})]})})})]},T.id)),!a&&t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No purchase orders"})})]})})]})})})]}),o.jsx(mo,{open:d,onOpenChange:u,children:o.jsxs(ti,{className:"sm:max-w-2xl",children:[o.jsx(ni,{children:o.jsx(ri,{children:"New Purchase Order"})}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2 text-sm",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Supplier"}),o.jsxs(jt,{value:String(v.supplier_id),onValueChange:T=>b(A=>({...A,supplier_id:Number(T)})),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:f.map(T=>o.jsx(Ue,{value:String(T.id),children:T.name},T.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Location"}),o.jsxs(jt,{value:String(v.location_id),onValueChange:T=>b(A=>({...A,location_id:Number(T)})),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:h.map(T=>o.jsxs(Ue,{value:String(T.id),children:[T.code,"  ",T.name]},T.id))})]})]})]}),o.jsx(Ud,{className:"my-3"}),o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(le,{children:"Items"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Lines: ",o.jsx("span",{className:"font-medium",children:k}),"  Qty: ",o.jsx("span",{className:"font-medium",children:C})]}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:j,children:[o.jsx(mn,{className:"h-4 w-4 mr-1"})," Add"]})]})]}),o.jsxs("div",{className:"mt-2 space-y-2",children:[v.items.map((T,A)=>o.jsxs("div",{className:"grid gap-2 md:grid-cols-6 items-end",children:[o.jsxs("div",{className:"md:col-span-4",children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:String(T.medicine_id),onValueChange:R=>N(A,{medicine_id:Number(R)}),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select medicine"})}),o.jsx(mt,{children:g.map(R=>o.jsxs(Ue,{value:String(R.id),children:[R.code,"  ",R.name]},R.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Qty"}),o.jsx(fe,{type:"number",value:T.qty,onChange:R=>N(A,{qty:Number(R.target.value||1)})})]}),o.jsx("div",{className:"flex",children:o.jsx(ce,{size:"sm",variant:"outline",onClick:()=>S(A),children:"Remove"})})]},A)),v.items.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No items yet."})]})]}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),o.jsx(ce,{onClick:P,disabled:!_,children:"Save"})]})]})})]})}function yde(){const[t,n]=x.useState([]),[r,s]=x.useState(!1),[a,i]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState([]),[f,p]=x.useState([]),[h,m]=x.useState([]),[g,y]=x.useState([]),[v,b]=x.useState({supplier_id:"",location_id:"",po_id:"",items:[]}),w=()=>b(A=>({...A,items:[...A.items,{medicine_id:"",batch:"",expiry:"",qty:1,unit_cost:"",tax_percent:"",sell_price:"",mrp:""}]})),j=(A,R)=>b(O=>({...O,items:O.items.map((I,L)=>L===A?{...I,...R}:I)})),N=A=>b(R=>({...R,items:R.items.filter((O,I)=>I!==A)})),S=()=>{b({supplier_id:"",location_id:"",po_id:"",items:[]})},_=async()=>{var A,R;s(!0);try{const{data:O}=await Hae();n(O||[])}catch(O){V.error("Failed to load GRNs",{description:((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Please retry."})}finally{s(!1)}};x.useEffect(()=>{_()},[]),x.useEffect(()=>{(async()=>{var A,R;try{const[O,I,L,D]=await Promise.all([WS().then($=>$.data||[]),Fd().then($=>$.data||[]),Kl({limit:1e3,is_active:!0}).then($=>$.data||[]),KS({status:"approved"}).then($=>$.data||[])]);u(O),p(I),m(L),y(D)}catch(O){V.error("Failed to load lookups",{description:((R=(A=O==null?void 0:O.response)==null?void 0:A.data)==null?void 0:R.detail)||"Please refresh and try again."})}})()},[]);const k=x.useMemo(()=>{let A=0,R=0,O=0;for(const I of v.items){const L=Number(I.qty||0),D=Number(I.unit_cost||0),$=Number(I.tax_percent||0);A+=L;const F=L*D;R+=F,O+=F*($/100)}return{qty:A,subtotal:R,tax:O,grand:R+O}},[v.items]),C=()=>{if(!v.supplier_id)return"Please select a supplier.";if(!v.location_id)return"Please select a location.";if(!Array.isArray(v.items)||v.items.length===0)return"Add at least one item.";for(let A=0;A<v.items.length;A++){const R=v.items[A];if(!R.medicine_id)return`Row ${A+1}: select a medicine.`;if(!R.batch)return`Row ${A+1}: enter batch.`;if(!R.expiry)return`Row ${A+1}: enter expiry date.`;if(!(Number(R.qty)>0))return`Row ${A+1}: quantity must be > 0.`;if(!(Number(R.unit_cost)>=0))return`Row ${A+1}: unit cost invalid.`}return null},P=async()=>{var O,I,L;const A=C();if(A){V.error("Cannot save GRN",{description:A});return}const R={supplier_id:Number(v.supplier_id),location_id:Number(v.location_id),po_id:v.po_id?Number(v.po_id):void 0,items:v.items.map(D=>({medicine_id:Number(D.medicine_id),batch:D.batch,expiry:D.expiry,qty:Number(D.qty||1),unit_cost:Number(D.unit_cost||0),tax_percent:D.tax_percent===""?null:Number(D.tax_percent),sell_price:D.sell_price===""?null:Number(D.sell_price),mrp:D.mrp===""?null:Number(D.mrp)}))};c(!0);try{const D=await Wae(R),$=(O=D==null?void 0:D.data)==null?void 0:O.id;i(!1),S(),await _(),V.success("GRN created",{description:$?`GRN-${String($).padStart(6,"0")}  ${R.items.length} line(s)  ${k.qty} units`:"Stock received."})}catch(D){V.error("Save failed",{description:((L=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:L.detail)||"Please retry."})}finally{c(!1)}},E="__none__",M=A=>A===""||A==null?E:String(A),T=A=>A===E?"":Number(A);return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Goods Receipt (GRN)"}),o.jsx(Ie,{anyOf:["pharmacy.procure.manage"],children:o.jsxs(ce,{onClick:()=>i(!0),children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New GRN"]})})]}),o.jsxs(Se,{children:[o.jsxs(De,{className:"flex flex-row items-center justify-between",children:[o.jsxs(Le,{className:"flex items-center gap-2",children:[o.jsx(mJ,{className:"h-5 w-5"}),"Recent GRNs"]}),r&&o.jsxs("span",{className:"inline-flex items-center text-xs text-gray-500",children:[o.jsx(Xa,{className:"mr-1 h-3.5 w-3.5 animate-spin"})," Loading"]})]}),o.jsx(Ee,{className:"overflow-x-auto",children:o.jsxs(Fs,{children:[o.jsx(Bs,{className:"sticky top-0 bg-white",children:o.jsxs(qe,{children:[o.jsx(we,{children:"#"}),o.jsx(we,{children:"Supplier"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"PO"}),o.jsx(we,{children:"Received"})]})}),o.jsxs(zs,{children:[(t||[]).map(A=>o.jsxs(qe,{className:"hover:bg-gray-50",children:[o.jsxs(re,{children:["GRN-",String(A.id).padStart(6,"0")]}),o.jsx(re,{children:A.supplier_name||A.supplier_id}),o.jsx(re,{children:A.location_code||A.location_id}),o.jsx(re,{children:A.po_id?`PO-${String(A.po_id).padStart(6,"0")}`:""}),o.jsx(re,{children:new Date(A.received_at).toLocaleString()})]},A.id)),!r&&t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No GRNs yet."})}),r&&Array.from({length:4}).map((A,R)=>o.jsxs(qe,{children:[o.jsx(re,{className:"py-4",children:o.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-36 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),o.jsx(re,{children:o.jsx("div",{className:"h-4 w-40 animate-pulse rounded bg-gray-200"})})]},R))]})]})})]}),o.jsx(mo,{open:a,onOpenChange:A=>{i(A),A||S()},children:o.jsxs(ti,{className:"sm:max-w-4xl",children:[o.jsx(ni,{children:o.jsx(ri,{children:"New GRN"})}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3 text-sm",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Supplier"}),o.jsxs(jt,{value:v.supplier_id?String(v.supplier_id):void 0,onValueChange:A=>b(R=>({...R,supplier_id:Number(A)})),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:d.map(A=>o.jsx(Ue,{value:String(A.id),children:A.name},A.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Location"}),o.jsxs(jt,{value:v.location_id?String(v.location_id):void 0,onValueChange:A=>b(R=>({...R,location_id:Number(A)})),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:f.map(A=>o.jsxs(Ue,{value:String(A.id),children:[A.code,"  ",A.name]},A.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"PO (optional)"}),o.jsxs(jt,{value:M(v.po_id),onValueChange:A=>b(R=>({...R,po_id:T(A)})),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:""})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:E,children:""})," ",g.map(A=>o.jsx(Ue,{value:String(A.id),children:`PO-${String(A.id).padStart(6,"0")} (${A.supplier_name||A.supplier_id})`},A.id))]})]})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(le,{className:"text-[13px] uppercase tracking-wide text-gray-600",children:"Items"}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:w,children:[o.jsx(mn,{className:"h-4 w-4 mr-1"})," Add"]})]}),o.jsxs("div",{className:"mt-2 space-y-2",children:[o.jsx(Ds,{initial:!1,children:v.items.map((A,R)=>o.jsxs(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"grid gap-2 md:grid-cols-8 items-end rounded-xl border p-2",children:[o.jsxs("div",{className:"md:col-span-3",children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:String(A.medicine_id),onValueChange:O=>j(R,{medicine_id:Number(O)}),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select medicine"})}),o.jsx(mt,{children:h.map(O=>o.jsxs(Ue,{value:String(O.id),children:[O.code,"  ",O.name]},O.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Batch"}),o.jsx(fe,{value:A.batch,onChange:O=>j(R,{batch:O.target.value})})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Expiry"}),o.jsx(fe,{type:"date",value:A.expiry,onChange:O=>j(R,{expiry:O.target.value})})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Qty"}),o.jsx(fe,{type:"number",min:1,value:A.qty,onChange:O=>j(R,{qty:Number(O.target.value||1)})})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Unit cost"}),o.jsx(fe,{type:"number",step:"0.01",value:A.unit_cost,onChange:O=>j(R,{unit_cost:O.target.value})})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Tax %"}),o.jsx(fe,{type:"number",step:"0.01",value:A.tax_percent,onChange:O=>j(R,{tax_percent:O.target.value})})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Sell / MRP"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(fe,{placeholder:"Sell",type:"number",step:"0.01",value:A.sell_price,onChange:O=>j(R,{sell_price:O.target.value})}),o.jsx(fe,{placeholder:"MRP",type:"number",step:"0.01",value:A.mrp,onChange:O=>j(R,{mrp:O.target.value})})]})]}),o.jsx("div",{className:"md:col-span-8 flex justify-end",children:o.jsx(ce,{type:"button",size:"icon",variant:"ghost",onClick:()=>N(R),className:"text-rose-600 hover:text-rose-700",title:"Remove row",children:o.jsx(Na,{className:"h-4 w-4"})})})]},R))}),v.items.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No items yet."})]})]}),o.jsxs("div",{className:"mt-4 rounded-xl border bg-gray-50 p-3 text-sm",children:[o.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Lines:"})," ",v.items.length]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Total Qty:"})," ",k.qty]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Subtotal:"})," ",k.subtotal.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Tax:"})," ",k.tax.toFixed(2)]})]}),o.jsxs("div",{className:"mt-1 font-medium",children:["Grand Total: ",k.grand.toFixed(2)]})]}),o.jsxs(Al,{children:[o.jsx(ce,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),o.jsx(ce,{onClick:P,disabled:l,children:l?o.jsxs(o.Fragment,{children:[o.jsx(Xa,{className:"mr-2 h-4 w-4 animate-spin"})," Saving"]}):"Save"})]})]})})]})}function vde(){const[t,n]=x.useState([]),[r,s]=x.useState([]);return x.useEffect(()=>{let a=!0;return(async()=>{var i,l;try{const{data:c}=await v$();if(!a)return;n((c==null?void 0:c.low)||[]),s((c==null?void 0:c.expiry)||[])}catch(c){const d=((l=(i=c==null?void 0:c.response)==null?void 0:i.data)==null?void 0:l.detail)||"Please retry";V.error("Failed to load alerts",{description:d})}})(),()=>{a=!1}},[]),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Alerts"}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Low Stock"})}),o.jsx(Ee,{children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"Medicine"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"On hand"}),o.jsx(we,{children:"Reorder"})]})}),o.jsxs(zs,{children:[t.map(a=>o.jsxs(qe,{children:[o.jsx(re,{children:a.medicine_name||a.medicine_id}),o.jsx(re,{children:a.location_code||a.location_id}),o.jsx(re,{children:a.on_hand}),o.jsx(re,{children:a.reorder_level})]},`${a.medicine_id}-${a.location_id}`)),t.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:4,className:"text-center py-6 text-sm text-gray-500",children:"All good "})})]})]})})]}),o.jsxs(Se,{children:[o.jsx(De,{children:o.jsx(Le,{children:"Expiry (next 30 days / expired)"})}),o.jsx(Ee,{children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"Medicine"}),o.jsx(we,{children:"Batch"}),o.jsx(we,{children:"Location"}),o.jsx(we,{children:"Expiry"}),o.jsx(we,{children:"On hand"})]})}),o.jsxs(zs,{children:[r.map(a=>o.jsxs(qe,{children:[o.jsx(re,{children:a.medicine_name||a.medicine_id}),o.jsx(re,{children:a.batch}),o.jsx(re,{children:a.location_code||a.location_id}),o.jsx(re,{children:a.expiry}),o.jsx(re,{children:a.on_hand})]},a.id)),r.length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"Nothing expiring soon "})})]})]})})]})]})}function Hd({value:t,onChange:n}){const[r,s]=x.useState(""),[a,i]=x.useState([]);x.useEffect(()=>{let c=!0;return(async()=>{const{data:u}=await hy(r||"");c&&i(u||[])})(),()=>{c=!1}},[r]);const l=x.useMemo(()=>a.find(c=>c.id===t),[a,t]);return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Patient"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search by UHID, name, phone, email",value:r,onChange:c=>s(c.target.value)})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:a.slice(0,8).map(c=>o.jsxs("button",{onClick:()=>n(c.id),className:["rounded-xl border p-3 text-left transition",t===c.id?"border-blue-500 bg-blue-50":"hover:bg-gray-50"].join(" "),children:[o.jsxs("div",{className:"font-medium",children:[c.uhid,"  ",c.first_name," ",c.last_name]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[c.phone,"  ",c.email||""]})]},c.id))}),l&&o.jsxs("div",{className:"rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",o.jsx("span",{className:"font-medium",children:l.uhid})]})]})}function bde(){const[t,n]=x.useState(null),[r,s]=x.useState(null),[a,i]=x.useState([]),[l,c]=x.useState(""),[d,u]=x.useState([]),[f,p]=x.useState([]),[h,m]=x.useState(!1),[g,y]=x.useState([]);x.useEffect(()=>{let S=!0;return(async()=>{var _,k;try{const[C,P]=await Promise.all([Fd().then(E=>E.data||[]),Kl({limit:500,is_active:!0}).then(E=>E.data||[])]);if(!S)return;i(C),u(P)}catch(C){const P=((k=(_=C==null?void 0:C.response)==null?void 0:_.data)==null?void 0:k.detail)||"Please refresh and try again.";V.error("Failed to load locations/medicines",{description:P})}})(),()=>{S=!1}},[]),x.useEffect(()=>{let S=!0;return t?((async()=>{try{const _=await Jae(t);if(!S)return;s(_||null)}catch{s(null)}})(),()=>{S=!1}):s(null)},[t]),x.useEffect(()=>{let S=!0;if(!t){y([]);return}return(async()=>{try{const{data:_}=await b$({patient_id:t,status:"in_progress",limit:200}),k=(_||[]).flatMap(C=>(C.items||[]).map(P=>{var E,M;return{rx_id:C.id,id:P.id,medicine_id:P.medicine_id,name:((E=P.medicine)==null?void 0:E.name)||P.medicine_name,code:((M=P.medicine)==null?void 0:M.code)||P.medicine_code,remaining:Math.max(0,(P.quantity||0)-(P.dispensed_qty||0))}})).filter(C=>C.remaining>0);S&&y(k)}catch{S&&y([])}})(),()=>{S=!1}},[t]);const v=()=>p(S=>[...S,{medicine_id:"",qty:1,lot_id:null}]),b=(S,_)=>p(k=>k.map((C,P)=>P===S?{...C,..._}:C)),w=S=>p(_=>_.filter((k,C)=>C!==S)),j=S=>{p(_=>[..._,{medicine_id:S.medicine_id,qty:S.remaining,lot_id:null,prescription_item_id:S.id}])},N=async()=>{var k,C;if(!t){V.error("Select patient");return}if(!l){V.error("Select location");return}const S=f.map(P=>({...P,medicine_id:Number(P.medicine_id),qty:Number(P.qty||1)})).filter(P=>P.medicine_id&&P.qty>0);if(S.length===0){V.error("Add at least one medicine");return}const _={context:r||{},patient_id:Number(t),location_id:Number(l),items:S.map(P=>({medicine_id:P.medicine_id,qty:P.qty,lot_id:P.lot_id?Number(P.lot_id):void 0,prescription_item_id:P.prescription_item_id||void 0})),payment:{mode:"on-account"}};m(!0);try{const{data:P}=await Kae(_);V.success("Dispensed",{description:`Sale #${String(P.id).padStart(6,"0")} created successfully.`}),p([])}catch(P){const E=((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Failed to dispense";V.error("Error",{description:E})}finally{m(!1)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Dispense"})}),o.jsx(Ie,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:o.jsx(Se,{children:o.jsxs(Ee,{className:"p-4 space-y-4",children:[o.jsx(Hd,{value:t,onChange:n}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Context (auto)"}),o.jsx(fe,{disabled:!0,value:r?r.type==="ipd"?`IPD  Admission ${r.admission_id}`:`OPD  Visit ${r.visit_id}`:"None (will rely on prescription or manual context)"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Location"}),o.jsxs(jt,{value:l,onValueChange:c,children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:a.map(S=>o.jsxs(Ue,{value:String(S.id),children:[S.code,"  ",S.name]},S.id))})]})]})]}),g.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(le,{className:"text-sm",children:"Pending prescription items"}),o.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:g.map(S=>o.jsxs(ce,{variant:"outline",size:"sm",onClick:()=>j(S),title:`Add ${S.code}  ${S.name} (${S.remaining})`,children:["+ ",S.code,"  ",S.name,"  Rem: ",S.remaining]},S.id))})]}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsx(le,{className:"text-base",children:"Items"}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:v,children:[o.jsx(mn,{className:"h-4 w-4 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-2",children:[f.map((S,_)=>o.jsxs("div",{className:"grid gap-2 md:grid-cols-6 items-end",children:[o.jsxs("div",{className:"md:col-span-4",children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:String(S.medicine_id||""),onValueChange:k=>b(_,{medicine_id:Number(k)}),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select"})}),o.jsx(mt,{children:d.map(k=>o.jsxs(Ue,{value:String(k.id),children:[k.code,"  ",k.name]},k.id))})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Qty"}),o.jsx(fe,{type:"number",min:1,value:S.qty,onChange:k=>b(_,{qty:Number(k.target.value||1)})})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx(ce,{type:"button",variant:"outline",size:"sm",onClick:()=>w(_),children:o.jsx(sJ,{className:"h-4 w-4"})})})]},_)),f.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No items added."})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(ce,{onClick:N,disabled:h,children:h?"Dispensing":"Dispense"})})]})})})]})}function wde(){const[t,n]=x.useState(""),[r,s]=x.useState(""),[a,i]=x.useState(""),[l,c]=x.useState(!1),[d,u]=x.useState(null),f=g=>g.replace(/[^\d]/g,""),p=!!t&&!!r&&Number(a)>0,h=async()=>{var g,y;if(!t){V.error("Sale ID required");return}if(!r){V.error("Sale Item ID required");return}if(!a||Number(a)<=0){V.error("Quantity must be > 0");return}c(!0),u(null);try{const{data:v}=await qae({sale_id:Number(t),sale_item_id:Number(r),qty:Number(a)});n(""),s(""),i(""),u(v||null),V.success("Return accepted",{description:(v==null?void 0:v.lot_on_hand)!=null?`Updated lot on-hand: ${v.lot_on_hand}`:"Stock updated successfully."})}catch(v){const b=((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Could not process the return. Please try again.";V.error("Return failed",{description:b})}finally{c(!1)}},m=g=>{g.key==="Enter"&&p&&!l&&h()};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Returns"})}),o.jsx(Ie,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:o.jsxs(Se,{className:"overflow-hidden",children:[o.jsx(De,{className:"pb-2",children:o.jsx(Le,{className:"text-sm",children:"Return to Stock"})}),o.jsxs(Ee,{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-4 items-end",children:[o.jsxs("div",{children:[o.jsx(le,{children:"Sale ID"}),o.jsx(fe,{inputMode:"numeric",value:t,onChange:g=>n(f(g.target.value)),onKeyDown:m,placeholder:"e.g. 1024"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Sale Item ID"}),o.jsx(fe,{inputMode:"numeric",value:r,onChange:g=>s(f(g.target.value)),onKeyDown:m,placeholder:"e.g. 3011"})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Quantity"}),o.jsx(fe,{type:"number",value:a,onChange:g=>i(g.target.value),onKeyDown:m,placeholder:"e.g. 2"})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs(ce,{className:"w-full md:w-auto",onClick:h,disabled:!p||l,children:[l?o.jsx(Xa,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(eS,{className:"h-4 w-4 mr-2"}),"Return"]})})]}),o.jsx(Ud,{}),o.jsxs("div",{className:"text-xs text-gray-500 grid gap-1 md:grid-cols-2",children:[o.jsx("div",{children:"Tip: Return uses the **exact sale items lot** and credits stock back to that lot."}),o.jsx("div",{children:"If the sale had multiple lots, return line-by-line using each Sale Item ID."})]}),d&&o.jsxs(ge.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Return accepted. ",d.lot_on_hand!=null?o.jsxs(o.Fragment,{children:["Lot on-hand is now ",o.jsx("span",{className:"font-medium",children:d.lot_on_hand}),"."]}):"Stock updated."]})]})]})})})]})}const jde=["new","in_progress","dispensed","cancelled"],ZE=t=>{switch(t){case"new":return{class:"bg-blue-50 text-blue-700 border-blue-200",label:"New"};case"in_progress":return{class:"bg-amber-50 text-amber-700 border-amber-200",label:"In Progress"};case"dispensed":return{class:"bg-emerald-50 text-emerald-700 border-emerald-200",label:"Dispensed"};case"cancelled":return{class:"bg-rose-50 text-rose-700 border-rose-200",label:"Cancelled"};default:return{class:"bg-gray-50 text-gray-700 border-gray-200",label:t||""}}};function Nde(){const[t,n]=x.useState([]),[r,s]=x.useState(""),[a,i]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(null),[f,p]=x.useState(!1),[h,m]=x.useState(!0),[g,y]=x.useState(null),v=x.useRef(null),b=x.useCallback(async()=>{var P,E;p(!0);try{const{data:M}=await b$({q:(r==null?void 0:r.trim())||void 0,status:a||void 0,context_type:l||void 0,patient_id:d||void 0,limit:200});n(M||[]),y(new Date)}catch(M){V.error("Failed to load prescriptions",{description:((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Retry"})}finally{p(!1)}},[r,a,l,d]);x.useEffect(()=>{b()},[b]),x.useEffect(()=>{if(h)return v.current=setInterval(b,1e4),()=>clearInterval(v.current)},[h,b]);const w=async(P,E)=>{var M,T;try{await Gae(P,{status:E}),V.success("Item updated",{description:`Status  ${E}`}),await b()}catch(A){V.error("Update failed",{description:((T=(M=A==null?void 0:A.response)==null?void 0:M.data)==null?void 0:T.detail)||"Retry"})}},j=async(P,E)=>{var M,T;try{await _E(P,{status:E}),V.success("Prescription updated",{description:`Status  ${E}`}),await b()}catch(A){V.error("Update failed",{description:((T=(M=A==null?void 0:A.response)==null?void 0:M.data)==null?void 0:T.detail)||"Retry"})}},N=()=>{s(""),i(""),c(""),u(null)},S=(P,E)=>o.jsx(ce,{size:"sm",variant:a===P?"default":"outline",onClick:()=>i(P),children:E},P),_="__all__",k=P=>P===""||P==null?_:String(P),C=P=>P===_?"":P;return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Prescriptions"}),g&&o.jsxs("span",{className:"hidden sm:inline text-xs text-gray-500",children:["Updated ",g.toLocaleTimeString()]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 border rounded-lg px-2 py-1",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:h,onChange:P=>m(P.target.checked)}),"Auto-refresh"]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:b,disabled:f,children:[o.jsx(oy,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]})]}),o.jsx(Se,{children:o.jsxs(Ee,{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Search"}),o.jsx(fe,{placeholder:"UHID, patient, medicine",value:r,onChange:P=>s(P.target.value)})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Status"}),o.jsxs(jt,{value:k(a),onValueChange:P=>i(C(P)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:_,children:"All"}),jde.map(P=>o.jsx(Ue,{value:P,children:P},P))]})]})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Context"}),o.jsxs(jt,{value:k(l),onValueChange:P=>c(C(P)),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"All"})}),o.jsxs(mt,{children:[o.jsx(Ue,{value:_,children:"All"}),o.jsx(Ue,{value:"opd",children:"OPD"}),o.jsx(Ue,{value:"ipd",children:"IPD"})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(Hd,{value:d,onChange:u})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(Vn,{variant:"secondary",className:"inline-flex items-center gap-1",children:[o.jsx(Pf,{className:"h-3.5 w-3.5"})," Quick status"]}),S("","All"),S("new","New"),S("in_progress","In-Progress"),S("dispensed","Dispensed"),S("cancelled","Cancelled")]}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:N,children:"Clear filters"})]})]})}),o.jsx("div",{className:"space-y-3",children:o.jsxs(Ds,{initial:!1,children:[f&&t.length===0&&Array.from({length:3}).map((P,E)=>o.jsxs(Se,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(He,{className:"h-4 w-44"}),o.jsx(He,{className:"h-8 w-40 rounded-md"})]}),o.jsx(He,{className:"h-24 w-full"})]},`sk-${E}`)),!f&&(t||[]).map(P=>{var O,I;const E=(P.items||[]).length,M=(P.items||[]).filter(L=>L.status==="dispensed").length,T=(P.items||[]).filter(L=>L.status==="in_progress").length,A=E?Math.round(M/E*100):0,R=ZE(P.status);return o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},children:o.jsxs(Se,{className:"overflow-hidden",children:[o.jsxs(De,{className:"pb-2",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs(Le,{className:"text-sm",children:["#",String(P.id).padStart(6,"0"),"  ",(O=P.context_type)==null?void 0:O.toUpperCase(),"  Patient: ",((I=P.patient)==null?void 0:I.uhid)||`P-${P.patient_id}`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-xs ${R.class}`,children:R.label}),o.jsxs(Ie,{anyOf:["pharmacy.dispense.manage"],children:[o.jsx(ce,{size:"sm",variant:"outline",onClick:()=>j(P.id,"in_progress"),children:"Start"}),o.jsx(ce,{size:"sm",onClick:async()=>{var L,D;try{await _E(P.id,{status:"dispensed"}),V.success("Prescription updated",{description:"Status  dispensed"}),await b()}catch($){V.error("Update failed",{description:((D=(L=$==null?void 0:$.response)==null?void 0:L.data)==null?void 0:D.detail)||"Retry"})}},children:"Mark Dispensed"})]})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[o.jsxs("span",{children:[M,"/",E," dispensed"]}),T>0&&o.jsxs("span",{children:[T," in-progress"]})]}),o.jsx("div",{className:"h-2 w-full rounded-full bg-gray-100 overflow-hidden",children:o.jsx("div",{className:"h-2 bg-emerald-500 transition-all",style:{width:`${A}%`}})})]})]}),o.jsx(Ee,{className:"p-0",children:o.jsxs(Fs,{children:[o.jsx(Bs,{children:o.jsxs(qe,{children:[o.jsx(we,{children:"Medicine"}),o.jsx(we,{children:"Dose"}),o.jsx(we,{children:"Qty"}),o.jsx(we,{children:"Status"}),o.jsx(we,{className:"text-right",children:"Actions"})]})}),o.jsxs(zs,{children:[(P.items||[]).map(L=>{var $,F;const D=ZE(L.status||P.status);return o.jsxs(qe,{children:[o.jsxs(re,{children:[o.jsx("div",{className:"font-medium",children:L.medicine_name||(($=L.medicine)==null?void 0:$.name)||`#${L.medicine_id}`}),o.jsx("div",{className:"text-xs text-gray-500",children:L.medicine_code||((F=L.medicine)==null?void 0:F.code)})]}),o.jsx(re,{children:L.dose||""}),o.jsx(re,{children:L.qty||L.quantity||1}),o.jsx(re,{children:o.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs ${D.class}`,children:D.label})}),o.jsx(re,{className:"text-right",children:o.jsx(Ie,{anyOf:["pharmacy.dispense.manage"],children:o.jsxs("div",{className:"inline-flex flex-wrap gap-2",children:[o.jsx(ce,{size:"sm",variant:"outline",onClick:()=>w(L.id,"in_progress"),children:"In-Progress"}),o.jsxs(ce,{size:"sm",onClick:()=>w(L.id,"dispensed"),children:[o.jsx(Od,{className:"h-4 w-4 mr-1"}),"Dispensed"]}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:()=>w(L.id,"cancelled"),children:[o.jsx(xp,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})})})]},L.id)}),(P.items||[]).length===0&&o.jsx(qe,{children:o.jsx(re,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No items"})})]})]})})]})},P.id)}),(t||[]).length===0&&!f&&o.jsx(Se,{children:o.jsx(Ee,{className:"py-10 text-center text-sm text-gray-500",children:d?"No prescriptions found for this patient.":"No prescriptions match your filters."})})]})})]})}function Sde(){const t=jr(),[n,r]=x.useState({low:0,exp:0,todayTxns:0,openPO:0}),[s,a]=x.useState(!1),[i,l]=x.useState(!0),[c,d]=x.useState(null),u=x.useCallback(async()=>{var p,h;a(!0);try{const m=new Date().toISOString().slice(0,10),[{data:g},{data:y},{data:v}]=await Promise.all([v$(),y$({date:m}),KS({status:"approved"})]),b=((g==null?void 0:g.low)||[]).length,w=((g==null?void 0:g.expiry)||[]).length,j=(y||[]).length,N=(v||[]).filter(S=>S.status!=="closed"&&S.status!=="cancelled").length;r({low:b,exp:w,todayTxns:j,openPO:N}),d(new Date)}catch(m){V.error("Failed to load pharmacy dashboard",{description:((h=(p=m==null?void 0:m.response)==null?void 0:p.data)==null?void 0:h.detail)||"Please try again."})}finally{a(!1)}},[]);x.useEffect(()=>{u()},[u]),x.useEffect(()=>{if(!i)return;const p=setInterval(u,3e4);return()=>clearInterval(p)},[i,u]);const f=[{title:"Low stock",value:n.low,icon:ly,color:"text-amber-600",bg:"bg-amber-50",to:"/pharmacy/alerts"},{title:"Expiring soon",value:n.exp,icon:iy,color:"text-rose-600",bg:"bg-rose-50",to:"/pharmacy/alerts"},{title:"Today transactions",value:n.todayTxns,icon:Ts,color:"text-blue-600",bg:"bg-blue-50",to:"/pharmacy/transactions"},{title:"Open POs",value:n.openPO,icon:h3,color:"text-emerald-700",bg:"bg-emerald-50",to:"/pharmacy/po"}];return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy"}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs text-gray-500",children:[c&&o.jsxs("span",{children:["Last updated: ",c.toLocaleTimeString()]}),o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsxs("span",{className:"relative inline-flex h-2 w-2",children:[o.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75 animate-ping"}),o.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-emerald-500"})]}),"Live"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 border rounded-lg px-2 py-1",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:i,onChange:p=>l(p.target.checked)}),"Auto-refresh"]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:u,disabled:s,children:[o.jsx(oy,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),o.jsx(Ie,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:o.jsxs(ce,{onClick:()=>t("/pharmacy/dispense"),children:[o.jsx(tS,{className:"h-4 w-4 mr-2"})," Dispense"]})}),o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsxs(ce,{variant:"outline",onClick:()=>t("/pharmacy/medicines"),children:[o.jsx(Uc,{className:"h-4 w-4 mr-2"})," Medicines"]})})]})]}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:s?Array.from({length:4}).map((p,h)=>o.jsxs(Se,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(He,{className:"h-4 w-24"}),o.jsx(He,{className:"h-6 w-10 rounded-md"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(He,{className:"h-8 w-8 rounded-md"}),o.jsx(He,{className:"h-6 w-12"})]})]},`sk-${h}`)):f.map((p,h)=>{const m=p.icon;return o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.05*h},children:o.jsx(Os,{to:p.to,children:o.jsxs(Se,{className:"hover:shadow-md transition",children:[o.jsxs(De,{className:"pb-2 flex items-center justify-between",children:[o.jsx(Le,{className:"text-sm",children:p.title}),o.jsx("span",{className:`rounded-md px-2 py-1 text-xs ${p.bg} ${p.color}`,children:"Live"})]}),o.jsx(Ee,{children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(m,{className:`h-8 w-8 ${p.color}`}),o.jsx("div",{className:"text-2xl font-semibold",children:p.value})]})})]})})},p.title)})}),o.jsx(Ud,{}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[o.jsxs(Se,{className:"hover:shadow-sm",children:[o.jsx(De,{className:"pb-1",children:o.jsx(Le,{className:"text-sm",children:"Procurement"})}),o.jsxs(Ee,{className:"flex flex-wrap gap-2",children:[o.jsx(Ie,{anyOf:["pharmacy.procure.manage"],children:o.jsx(ce,{onClick:()=>t("/pharmacy/po"),children:"Purchase Orders"})}),o.jsx(Ie,{anyOf:["pharmacy.procure.manage"],children:o.jsx(ce,{variant:"outline",onClick:()=>t("/pharmacy/grn"),children:"GRN"})})]})]}),o.jsxs(Se,{className:"hover:shadow-sm",children:[o.jsx(De,{className:"pb-1",children:o.jsx(Le,{className:"text-sm",children:"Inventory"})}),o.jsxs(Ee,{className:"flex flex-wrap gap-2",children:[o.jsx(ce,{onClick:()=>t("/pharmacy/inventory"),children:"Lots"}),o.jsx(ce,{variant:"outline",onClick:()=>t("/pharmacy/transactions"),children:"Transactions"})]})]}),o.jsxs(Se,{className:"hover:shadow-sm",children:[o.jsx(De,{className:"pb-1",children:o.jsx(Le,{className:"text-sm",children:"Masters"})}),o.jsxs(Ee,{className:"flex flex-wrap gap-2",children:[o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsx(ce,{onClick:()=>t("/pharmacy/medicines"),children:"Medicines"})}),o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsx(ce,{variant:"outline",onClick:()=>t("/pharmacy/suppliers"),children:"Suppliers"})}),o.jsx(Ie,{anyOf:["pharmacy.masters.manage"],children:o.jsx(ce,{variant:"outline",onClick:()=>t("/pharmacy/locations"),children:"Locations"})})]})]})]})]})}var My="Checkbox",[kde]=ko(My),[Cde,mk]=kde(My);function _de(t){const{__scopeCheckbox:n,checked:r,children:s,defaultChecked:a,disabled:i,form:l,name:c,onCheckedChange:d,required:u,value:f="on",internal_do_not_use_render:p}=t,[h,m]=fd({prop:r,defaultProp:a??!1,onChange:d,caller:My}),[g,y]=x.useState(null),[v,b]=x.useState(null),w=x.useRef(!1),j=g?!!l||!!g.closest("form"):!0,N={checked:h,disabled:i,setChecked:m,control:g,setControl:y,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:to(a)?!1:a,isFormControl:j,bubbleInput:v,setBubbleInput:b};return o.jsx(Cde,{scope:n,...N,children:Pde(p)?p(N):s})}var YF="CheckboxTrigger",XF=x.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:r,...s},a)=>{const{control:i,value:l,disabled:c,checked:d,required:u,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=mk(YF,t),y=Je(a,f),v=x.useRef(d);return x.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const w=()=>p(v.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[i,p]),o.jsx($e.button,{type:"button",role:"checkbox","aria-checked":to(d)?"mixed":d,"aria-required":u,"data-state":tB(d),"data-disabled":c?"":void 0,disabled:c,value:l,...s,ref:y,onKeyDown:Oe(n,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Oe(r,b=>{p(w=>to(w)?!0:!w),g&&m&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});XF.displayName=YF;var xk=x.forwardRef((t,n)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:l,disabled:c,value:d,onCheckedChange:u,form:f,...p}=t;return o.jsx(_de,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:c,required:l,onCheckedChange:u,name:s,form:f,value:d,internal_do_not_use_render:({isFormControl:h})=>o.jsxs(o.Fragment,{children:[o.jsx(XF,{...p,ref:n,__scopeCheckbox:r}),h&&o.jsx(eB,{__scopeCheckbox:r})]})})});xk.displayName=My;var JF="CheckboxIndicator",QF=x.forwardRef((t,n)=>{const{__scopeCheckbox:r,forceMount:s,...a}=t,i=mk(JF,r);return o.jsx(ka,{present:s||to(i.checked)||i.checked===!0,children:o.jsx($e.span,{"data-state":tB(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:n,style:{pointerEvents:"none",...t.style}})})});QF.displayName=JF;var ZF="CheckboxBubbleInput",eB=x.forwardRef(({__scopeCheckbox:t,...n},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:c,disabled:d,name:u,value:f,form:p,bubbleInput:h,setBubbleInput:m}=mk(ZF,t),g=Je(r,m),y=J$(i),v=B$(s);x.useEffect(()=>{const w=h;if(!w)return;const j=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(j,"checked").set,_=!a.current;if(y!==i&&S){const k=new Event("click",{bubbles:_});w.indeterminate=to(i),S.call(w,to(i)?!1:i),w.dispatchEvent(k)}},[h,y,i,a]);const b=x.useRef(to(i)?!1:i);return o.jsx($e.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:c,disabled:d,name:u,value:f,form:p,...n,tabIndex:-1,ref:g,style:{...n.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});eB.displayName=ZF;function Pde(t){return typeof t=="function"}function to(t){return t==="indeterminate"}function tB(t){return to(t)?"indeterminate":t?"checked":"unchecked"}const Iu=x.forwardRef(({className:t,...n},r)=>o.jsx(xk,{ref:r,className:Ce("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:o.jsx(QF,{className:Ce("grid place-content-center text-current"),children:o.jsx(mp,{className:"h-4 w-4"})})}));Iu.displayName=xk.displayName;const eb=()=>({medicine_id:"",dose:"",am:!0,af:!1,pm:!0,night:!1,duration_days:3,route:"po",instructions:""});function Ade(){const[t,n]=x.useState(null),[r,s]=x.useState(null),[a,i]=x.useState([]),[l,c]=x.useState([eb()]),[d,u]=x.useState(""),[f,p]=x.useState(!1);x.useEffect(()=>{let w=!0;return(async()=>{var j,N;try{const S=await Kl({limit:500,is_active:!0}).then(_=>_.data||[]);if(!w)return;i(S)}catch(S){V.error("Failed to load medicines",{description:((N=(j=S==null?void 0:S.response)==null?void 0:j.data)==null?void 0:N.detail)||"Retry"})}})(),()=>{w=!1}},[]),x.useEffect(()=>{let w=!0;return t?((async()=>{try{const{data:j}=await Xae(t).catch(()=>({data:null}));if(!w)return;s(j||null)}catch{s(null)}})(),()=>{w=!1}):s(null)},[t]);const h=(w,j)=>c(N=>N.map((S,_)=>_===w?{...S,...j}:S)),m=()=>c(w=>[...w,eb()]),g=w=>c(j=>j.filter((N,S)=>S!==w)),y=w=>{const j=(w.am?1:0)+(w.af?1:0)+(w.pm?1:0)+(w.night?1:0),N=Math.max(1,Number(w.duration_days||0));return j*N},v=()=>{if(!t)return V.error("Select patient"),!1;if(l.length===0)return V.error("Add at least one medicine"),!1;for(let w=0;w<l.length;w++){const j=l[w];if(!j.medicine_id)return V.error(`Select medicine for row ${w+1}`),!1;if((j.am?1:0)+(j.af?1:0)+(j.pm?1:0)+(j.night?1:0)===0)return V.error(`Choose at least one time-of-day for row ${w+1}`),!1;const S=Number(j.duration_days);if(!S||S<1)return V.error(`Days must be  1 for row ${w+1}`),!1;const _=y(j);if(!_||_<=0)return V.error(`Quantity computes to 0 for row ${w+1}`),!1}return!0},b=async()=>{var j,N;if(!v())return;const w={patient_id:Number(t),notes:d,items:l.map(S=>({medicine_id:Number(S.medicine_id),dose:S.dose||"",am:!!S.am,af:!!S.af,pm:!!S.pm,night:!!S.night,duration_days:Number(S.duration_days)||1,quantity:y(S),route:S.route||"po",instructions:S.instructions||""}))};p(!0);try{await Yae(w),V.success("Prescription created"),c([eb()]),u("")}catch(S){V.error("Failed to create prescription",{description:((N=(j=S==null?void 0:S.response)==null?void 0:j.data)==null?void 0:N.detail)||"Retry"})}finally{p(!1)}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(pi,{richColors:!0,closeButton:!0,position:"top-right"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Create Prescription"})}),o.jsx(Ie,{anyOf:["ipd.doctor","prescriptions.create"],children:o.jsx(Se,{children:o.jsxs(Ee,{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Patient"}),o.jsx(Hd,{value:t,onChange:n})]}),o.jsxs("div",{children:[o.jsx(le,{children:"Context (auto)"}),o.jsx(fe,{disabled:!0,value:r?r.type==="ipd"?`IPD  Admission ${r.admission_id}`:`OPD  Visit ${r.visit_id}`:"Will auto-detect (OPD/IPD)"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsx(le,{className:"text-base",children:"Medicines"}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:m,children:[o.jsx(mn,{className:"h-4 w-4 mr-1"})," Add more medicines"]})]}),o.jsxs("div",{className:"space-y-3",children:[l.map((w,j)=>{const N=y(w);return o.jsxs("div",{className:"grid gap-3 md:grid-cols-12 items-end rounded-xl border p-3",children:[o.jsxs("div",{className:"md:col-span-4",children:[o.jsx(le,{children:"Medicine"}),o.jsxs(jt,{value:String(w.medicine_id||""),onValueChange:S=>h(j,{medicine_id:Number(S)}),children:[o.jsx(ht,{children:o.jsx(Nt,{placeholder:"Select medicine"})}),o.jsx(mt,{children:a.map(S=>o.jsxs(Ue,{value:String(S.id),children:[S.code,"  ",S.name]},S.id))})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Dosage (e.g., 500 mg)"}),o.jsx(fe,{value:w.dose,onChange:S=>h(j,{dose:S.target.value})})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx(le,{children:"Time of day"}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-sm py-1",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx(Iu,{checked:w.am,onCheckedChange:S=>h(j,{am:!!S})})," AM"]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx(Iu,{checked:w.af,onCheckedChange:S=>h(j,{af:!!S})})," AF"]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx(Iu,{checked:w.pm,onCheckedChange:S=>h(j,{pm:!!S})})," PM"]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx(Iu,{checked:w.night,onCheckedChange:S=>h(j,{night:!!S})})," Night"]})]})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx(le,{children:"Days"}),o.jsx(fe,{type:"number",min:1,value:w.duration_days,onChange:S=>h(j,{duration_days:Number(S.target.value||1)})})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx(le,{children:"Quantity (auto)"}),o.jsx(fe,{value:N,readOnly:!0})]}),o.jsx("div",{className:"md:col-span-1 flex justify-end",children:o.jsx(ce,{type:"button",variant:"ghost",size:"icon",onClick:()=>g(j),className:"text-rose-600 hover:text-rose-700",title:"Remove row",children:o.jsx(Na,{className:"h-4 w-4"})})}),o.jsxs("div",{className:"md:col-span-12",children:[o.jsx(le,{children:"Instructions (optional)"}),o.jsx(fe,{placeholder:"e.g., After food; drink water; avoid spicy food",value:w.instructions,onChange:S=>h(j,{instructions:S.target.value})})]})]},j)}),l.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No medicines added."})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(le,{children:"Notes"}),o.jsx(fe,{placeholder:"Optional note for prescription",value:d,onChange:w=>u(w.target.value)})]}),o.jsx("div",{className:"flex items-end justify-end",children:o.jsx(ce,{onClick:b,disabled:f,children:f?"Saving":"Save Prescription"})})]})]})})})]})}const nB=({q:t="",active:n,page:r=1,page_size:s=50}={})=>B.get("/masters/lab-tests",{params:{q:t,active:n,page:r,page_size:s}}),Ede=t=>B.post("/masters/lab-tests",t),Tde=(t,n)=>B.put(`/masters/lab-tests/${t}`,n),Mde=t=>B.delete(`/masters/lab-tests/${t}`),Ode=({patient_id:t,context_type:n=null,context_id:r=null,priority:s="routine",test_ids:a=[]})=>{const i=(a||[]).map(l=>({test_id:l}));return B.post("/lab/orders",{patient_id:t,context_type:n,context_id:r,priority:s,items:i})},Rde=(t={})=>B.get("/lab/orders",{params:t}),Ide=t=>B.get(`/lab/orders/${t}`),Dde=(t,n)=>B.post(`/lab/orders/${t}/collect`,{barcode:n}),Lde=(t,n)=>B.post(`/lab/orders/${t}/results`,n),$de=t=>B.post(`/lab/items/${t}/validate`),Fde=t=>B.post(`/lab/orders/${t}/finalize`),Bde=(t,n,r="")=>B.post("/lab/attachments",{item_id:t,file_url:n,note:r});function zde({value:t=[],onChange:n}){const[r,s]=x.useState(""),[a,i]=x.useState(!1),[l,c]=x.useState([]);x.useEffect(()=>{let p=!0;return i(!0),nB({q:r,active:!0,page_size:50}).then(h=>{p&&c(h.data||[])}).finally(()=>p&&i(!1)),()=>{p=!1}},[r]);const d=x.useMemo(()=>new Set(t||[]),[t]),u=x.useMemo(()=>l.filter(p=>d.has(p.id)),[l,d]),f=p=>{const h=new Set(d);h.has(p)?h.delete(p):h.add(p),n==null||n([...h])};return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Select Tests"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search by code/name",value:r,onChange:p=>s(p.target.value)})]}),o.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:(l||[]).slice(0,10).map(p=>{const h=d.has(p.id);return o.jsxs("button",{type:"button",onClick:()=>f(p.id),className:["rounded-xl border p-3 text-left transition",h?"border-blue-500 bg-blue-50":"hover:bg-gray-50"].join(" "),children:[o.jsxs("div",{className:"font-medium",children:[p.code,"  ",p.name]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["",Number(p.price||0).toFixed(2)]})]},p.id)})}),u.length>0&&o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsx("div",{className:"text-xs font-medium mb-2",children:"Selected"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(p=>o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-50 px-3 py-1 text-xs",children:[p.code,o.jsx("button",{onClick:()=>f(p.id),className:"ml-1 rounded-full p-0.5 hover:bg-blue-100",children:o.jsx(Is,{className:"h-3 w-3"})})]},p.id))})]}),a&&o.jsx("div",{className:"text-xs text-gray-500",children:"Loading"})]})}function gk({order:t,to:n,className:r="",prefix:s="LAB"}){const a=new Date((t==null?void 0:t.created_at)||(t==null?void 0:t.createdAt)||Date.now()),i=a.toISOString().slice(2,7).replace("-",""),l=Number((t==null?void 0:t.id)||0).toString(36).toUpperCase().padStart(3,"0"),c=`${s}-${i}-${l}`,d=(t==null?void 0:t.accession_no)||c,u=o.jsx("span",{className:["inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium","bg-blue-50 border-blue-200 text-blue-700",r].join(" "),title:`Created ${a.toLocaleString()}`,children:d});return n?o.jsx(Os,{to:n,children:u}):u}function Oy({patient:t,patientId:n,className:r=""}){const[s,a]=x.useState(t||null);x.useEffect(()=>{let u=!1;return!t&&n&&(async()=>{try{const{data:f}=await B.get(`/patients/${n}`);u||a(f)}catch{}})(),()=>{u=!0}},[t,n]);const i=(s==null?void 0:s.uhid)||"",l=(s==null?void 0:s.name)||(s!=null&&s.first_name?`${s.first_name} ${s.last_name||""}`.trim():""),c=s!=null&&s.id?`/patients?focus=${s.id}`:void 0,d=o.jsxs("span",{className:["inline-flex items-center gap-2 rounded-md border px-2 py-0.5 text-xs","bg-gray-50 border-gray-200 text-gray-700","max-w-[18rem]",r].join(" "),title:l!==""?l:void 0,children:[o.jsx("span",{className:"font-medium",children:i}),o.jsx("span",{className:"text-gray-400",children:""}),o.jsx("span",{className:"truncate",children:l})]});return c?o.jsx(Os,{to:c,children:d}):d}function yk({status:t}){const n=String(t||"ordered").toLowerCase(),s={ordered:"bg-amber-50 text-amber-700 border-amber-200",collected:"bg-blue-50 text-blue-700 border-blue-200",validated:"bg-purple-50 text-purple-700 border-purple-200",reported:"bg-emerald-50 text-emerald-700 border-emerald-200",cancelled:"bg-rose-50 text-rose-700 border-rose-200"}[n]||"bg-gray-50 text-gray-700 border-gray-200";return o.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium ${s}`,children:n.charAt(0).toUpperCase()+n.slice(1)})}const Vde=t=>t?new Date(t).toLocaleString():"";function Ude(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState(null),[f,p]=x.useState([]),[h,m]=x.useState("routine"),g=async()=>{i(!0);try{const{data:w}=await Rde({q:t,page_size:100});s(w||[])}catch{V.error("Failed to load orders")}finally{i(!1)}};x.useEffect(()=>{g()},[t]);const y=jr(),v=async()=>{var w,j;if(!d||f.length===0){V.error("Select patient and at least one test");return}try{const{data:N}=await Ode({patient_id:d,priority:h,test_ids:f});V.success("Order created"),c(!1),u(null),p([]),m("routine"),y(`/lab/orders/${(N==null?void 0:N.id)||(N==null?void 0:N.order_id)}`)}catch(N){V.error(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Create failed")}},b=x.useMemo(()=>r.length,[r]);return o.jsxs("div",{className:"p-4 md:p-6",children:[o.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(od,{className:"h-5 w-5"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Lab Orders"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Create, track, and report LIS orders"})]})]}),o.jsx(Ie,{anyOf:["lab.orders.create","orders.lab.create"],children:o.jsxs("button",{className:"btn-primary",onClick:()=>c(!0),children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New Order"]})})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search patient UHID/name or order id",value:t,onChange:w=>n(w.target.value)})]})}),o.jsx("div",{className:"rounded-xl border bg-white",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Order #"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Priority"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Created"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[a&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",colSpan:6,children:"Loading"})}),!a&&r.map(w=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:o.jsx(gk,{order:w,to:`/lab/orders/${w.id}`})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(Oy,{patient:w.patient,patientId:w.patient_id})}),o.jsx("td",{className:"px-3 py-2 capitalize",children:w.priority||"routine"}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(yk,{status:w.status})}),o.jsx("td",{className:"px-3 py-2",children:Vde(w.created_at||w.createdAt)}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsx(Os,{to:`/lab/orders/${w.id}`,className:"btn-ghost",children:"View"})})]},w.id)),!a&&r.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:6,children:"No orders"})})]}),o.jsx("tfoot",{children:o.jsx("tr",{children:o.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:6,children:["Total: ",b]})})})]})}),l&&o.jsxs("div",{className:"fixed inset-0 z-40",children:[o.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>c(!1)}),o.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-xl bg-white shadow-xl p-4 overflow-y-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"New Lab Order"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Hd,{value:d,onChange:u}),o.jsx(zde,{value:f,onChange:p}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm",children:"Priority"}),o.jsxs("select",{className:"input",value:h,onChange:w=>m(w.target.value),children:[o.jsx("option",{value:"routine",children:"Routine"}),o.jsx("option",{value:"urgent",children:"Urgent"}),o.jsx("option",{value:"stat",children:"STAT"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{className:"btn-ghost",onClick:()=>c(!1),children:"Cancel"}),o.jsx("button",{className:"btn-primary",onClick:v,children:"Create"})]})]})]})]})]})}const Hde=async t=>{const n=new FormData;n.append("file",t);const{data:r}=await B.post("/files/upload",n,{headers:{"Content-Type":"multipart/form-data"}});return(r==null?void 0:r.url)||(r==null?void 0:r.file_url)||(r==null?void 0:r.path)||""},eT=t=>t?new Date(t).toLocaleString():"";function Wde(){const{id:t}=Wl(),[n,r]=x.useState(!1),[s,a]=x.useState(null),[i,l]=x.useState(""),[c,d]=x.useState({}),u=async()=>{r(!0);try{const{data:v}=await Ide(t);a(v),d(()=>{const b={};return((v==null?void 0:v.items)||[]).forEach(w=>{b[w.id]={result_value:w.result_value??"",is_critical:!!w.is_critical}}),b})}catch{V.error("Failed to load order")}finally{r(!1)}};x.useEffect(()=>{u()},[t]);const f=x.useMemo(()=>{const v=(s==null?void 0:s.items)||[];return v.length>0&&v.every(b=>(b.status||"").toLowerCase()==="validated")},[s]),p=async()=>{var v,b;if(!i.trim()){V.error("Barcode required");return}try{await Dde(t,i.trim()),V.success("Sample collected"),l(""),u()}catch(w){V.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Collect failed")}},h=async()=>{var b,w;const v=Object.entries(c).map(([j,N])=>({item_id:Number(j),result_value:N.result_value,is_critical:!!N.is_critical}));try{await Lde(t,v),V.success("Results saved"),u()}catch(j){V.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Save failed")}},m=async v=>{var b,w;try{await $de(v),V.success("Item validated"),u()}catch(j){V.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Validate failed")}},g=async()=>{var v,b;try{await Fde(t),V.success("Report finalized"),u()}catch(w){V.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Finalize failed")}},y=async(v,b)=>{try{const w=await Hde(b);await Bde(v,w,b.name),V.success("Attachment added"),u()}catch{V.error("Attachment failed")}};return n&&!s?o.jsx("div",{className:"p-6",children:"Loading"}):s?o.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-semibold",children:["Lab Order #",s.id]}),o.jsxs("div",{className:"text-xs text-gray-500 flex flex-wrap items-center gap-2",children:[o.jsx(Oy,{patient:s==null?void 0:s.patient,patientId:s==null?void 0:s.patient_id,className:"border-blue-100 bg-blue-50"}),o.jsxs("span",{children:[" Created: ",eT(s.created_at||s.createdAt)]})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Priority: ",o.jsx("span",{className:"capitalize",children:s.priority||"routine"}),"  Status: ",s.status]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ie,{anyOf:["lab.results.enter","lab.orders.create"],children:o.jsx("button",{className:"btn",onClick:h,children:"Save Results"})}),o.jsx(Ie,{anyOf:["lab.results.validate","lab.results.report","lab.results.approve"],children:o.jsxs("button",{className:"btn",disabled:!f,onClick:g,children:[o.jsx(mp,{className:"h-4 w-4 mr-2"})," Finalize"]})})]})]}),o.jsx(Ie,{anyOf:["lab.samples.collect"],children:o.jsxs("section",{className:"rounded-xl border bg-white p-4",children:[o.jsx("h2",{className:"font-semibold mb-3",children:"Sample Collection"}),o.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm",children:"Barcode"}),o.jsx("input",{className:"input",placeholder:"Scan/enter barcode",value:i,onChange:v=>l(v.target.value)})]}),o.jsx("button",{className:"btn",onClick:p,children:"Collect"}),o.jsxs("div",{className:"text-xs text-gray-500 ml-auto",children:["Collected at: ",eT(s.collected_at||s.collectedAt)]})]})]})}),o.jsxs("section",{className:"rounded-xl border bg-white",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"font-semibold",children:"Results"})}),o.jsxs("div",{className:"divide-y",children:[(s.items||[]).map(v=>{const b=c[v.id]||{result_value:"",is_critical:!1},w=(v.status||"").toLowerCase()==="validated";return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-medium",children:[v.test_code||v.code,"  ",v.test_name||v.name]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Range: ",v.reference_range||"","  Unit: ",v.unit||""]})]}),o.jsxs("div",{className:"text-xs",children:["Status: ",o.jsx("span",{className:w?"text-emerald-600":"text-gray-600",children:w?"Validated":v.status||"Pending"})]})]}),o.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-[2fr_1fr_auto]",children:[o.jsx("input",{className:"input",placeholder:"Result value",value:b.result_value,onChange:j=>d(N=>({...N,[v.id]:{...N[v.id],result_value:j.target.value}}))}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!b.is_critical,onChange:j=>d(N=>({...N,[v.id]:{...N[v.id],is_critical:j.target.checked}}))}),o.jsx("span",{className:"text-sm",children:"Critical"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{className:"btn-ghost",onClick:()=>m(v.id),disabled:w,children:"Validate"})})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsxs("label",{className:"btn-ghost inline-flex items-center gap-2 cursor-pointer",children:[o.jsx(hx,{className:"h-4 w-4"}),o.jsx("span",{children:"Attach"}),o.jsx("input",{type:"file",hidden:!0,onChange:j=>{var N;return((N=j.target.files)==null?void 0:N[0])&&y(v.id,j.target.files[0])}})]}),o.jsx("div",{className:"text-xs text-gray-500",children:(v.attachments||[]).length?`${v.attachments.length} attachment(s)`:"No attachments"})]})]},v.id)}),(s.items||[]).length===0&&o.jsx("div",{className:"p-6 text-sm text-gray-500",children:"No items"})]})]})]}):o.jsx("div",{className:"p-6",children:"Order not found"})}function Kde(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState(null),[d,u]=x.useState(!1),f=async()=>{i(!0);try{const{data:v}=await nB({q:t,page_size:200});s(v||[])}catch{V.error("Failed to load tests")}finally{i(!1)}};x.useEffect(()=>{f()},[t]);const p=()=>{c({code:"",name:"",price:0,is_active:!0}),u(!0)},h=v=>{c({...v}),u(!0)},m=async()=>{var v,b;try{l!=null&&l.id?(await Tde(l.id,l),V.success("Updated")):(await Ede(l),V.success("Created")),u(!1),f()}catch(w){V.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Save failed")}},g=async v=>{if(confirm("Delete this test?"))try{await Mde(v),V.success("Deleted"),f()}catch{V.error("Delete failed")}},y=x.useMemo(()=>r.length,[r]);return o.jsxs("div",{className:"p-4 md:p-6",children:[o.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Lab Masters"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Manage NABL-friendly test catalogue"})]}),o.jsx(Ie,{anyOf:["lab.masters.manage","masters.lab.manage"],children:o.jsxs("button",{className:"btn-primary",onClick:p,children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New Test"]})})]}),o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search code/name",value:t,onChange:v=>n(v.target.value)})]})}),o.jsx("div",{className:"rounded-xl border bg-white",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Price"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Active"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[a&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!a&&r.map(v=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:v.code}),o.jsx("td",{className:"px-3 py-2",children:v.name}),o.jsxs("td",{className:"px-3 py-2 text-right",children:["",Number(v.price||0).toFixed(2)]}),o.jsx("td",{className:"px-3 py-2",children:v.is_active?"Yes":"No"}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsxs(Ie,{anyOf:["lab.masters.manage","masters.lab.manage"],children:[o.jsx("button",{className:"btn-ghost mr-2",onClick:()=>h(v),children:o.jsx(Rs,{className:"h-4 w-4"})}),o.jsx("button",{className:"btn-ghost text-red-600",onClick:()=>g(v.id),children:o.jsx(Na,{className:"h-4 w-4"})})]})})]},v.id)),!a&&r.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No tests"})})]}),o.jsx("tfoot",{children:o.jsx("tr",{children:o.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:5,children:["Total: ",y]})})})]})}),d&&o.jsxs("div",{className:"fixed inset-0 z-40",children:[o.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>u(!1)}),o.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl p-4 overflow-y-auto",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:l!=null&&l.id?"Edit Test":"New Test"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm",children:"Code"}),o.jsx("input",{className:"input",value:(l==null?void 0:l.code)||"",onChange:v=>c(b=>({...b,code:v.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm",children:"Name"}),o.jsx("input",{className:"input",value:(l==null?void 0:l.name)||"",onChange:v=>c(b=>({...b,name:v.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm",children:"Price"}),o.jsx("input",{type:"number",step:"0.01",className:"input",value:(l==null?void 0:l.price)??0,onChange:v=>c(b=>({...b,price:parseFloat(v.target.value||0)}))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{id:"active",type:"checkbox",checked:!!(l!=null&&l.is_active),onChange:v=>c(b=>({...b,is_active:v.target.checked}))}),o.jsx("label",{htmlFor:"active",className:"text-sm",children:"Active"})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[o.jsx("button",{className:"btn-ghost",onClick:()=>u(!1),children:"Cancel"}),o.jsx("button",{className:"btn-primary",onClick:m,children:"Save"})]})]})]})]})]})}const rB=({q:t="",active:n,page:r=1,page_size:s=50}={})=>B.get("/ris/masters/tests",{params:{q:t,active:n,page:r,page_size:s}}),qde=t=>B.post("/ris/masters/tests",t),Gde=(t,n)=>B.put(`/ris/masters/tests/${t}`,n),Yde=t=>B.delete(`/ris/masters/tests/${t}`),Xde=({patient_id:t,test_id:n,context_type:r=null,context_id:s=null,ordering_user_id:a=null,priority:i="routine"})=>B.post("/ris/orders",{patient_id:t,test_id:n,context_type:r,context_id:s,ordering_user_id:a,priority:i}),Jde=(t={})=>B.get("/ris/orders",{params:t}),Qde=t=>B.get(`/ris/orders/${t}`),Zde=(t,{scheduled_at:n})=>B.post(`/ris/orders/${t}/schedule`,{scheduled_at:n}),eue=t=>B.post(`/ris/orders/${t}/scan`),tue=(t,{report_text:n})=>B.post(`/ris/orders/${t}/report`,{report_text:n}),nue=(t,{report_text:n})=>B.put(`/ris/orders/${t}/report`,{report_text:n}),rue=t=>B.post(`/ris/orders/${t}/approve`),sue=(t,n,r="")=>B.post(`/ris/attachments/${t}`,{file_url:n,note:r}),aue=(t,n)=>{const r=new FormData;return r.append("file",n),B.post(`/ris/orders/${t}/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})};function sB({modality:t}){const n=String(t||"").toUpperCase(),s={XR:"bg-sky-50 text-sky-700 border-sky-200",CT:"bg-purple-50 text-purple-700 border-purple-200",MRI:"bg-indigo-50 text-indigo-700 border-indigo-200",USG:"bg-emerald-50 text-emerald-700 border-emerald-200",MAMMO:"bg-rose-50 text-rose-700 border-rose-200"}[n]||"bg-gray-50 text-gray-700 border-gray-200";return o.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium ${s}`,children:n||""})}function iue({onClose:t,onCreated:n}){const[r,s]=x.useState(null),[a,i]=x.useState([]),[l,c]=x.useState(""),[d,u]=x.useState(!1),[f,p]=x.useState("routine"),[h,m]=x.useState("");x.useEffect(()=>{let y=!1;return(async()=>{const{data:b}=await rB({q:l});y||i(Array.isArray(b)?b:(b==null?void 0:b.items)||[])})(),()=>{y=!0}},[l]);const g=async()=>{var y,v;if(!r)return V.error("Select a patient");if(!h)return V.error("Select a test");u(!0);try{const{data:b}=await Xde({patient_id:r,test_id:Number(h),priority:f});V.success(`Order #${b==null?void 0:b.id} created`),n==null||n(b),t==null||t()}catch(b){V.error(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to create order")}finally{u(!1)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Create Radiology Order"}),o.jsx(Hd,{value:r,onChange:s}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Test"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"input",placeholder:"Search tests",value:l,onChange:y=>c(y.target.value)}),o.jsxs("select",{className:"input",value:h,onChange:y=>m(y.target.value),children:[o.jsx("option",{value:"",children:"Select"}),a.map(y=>o.jsxs("option",{value:y.id,children:[y.code,"  ",y.name," ",y.modality?`(${y.modality})`:""]},y.id))]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Priority"}),o.jsxs("select",{className:"input",value:f,onChange:y=>p(y.target.value),children:[o.jsx("option",{value:"routine",children:"Routine"}),o.jsx("option",{value:"urgent",children:"Urgent"}),o.jsx("option",{value:"stat",children:"STAT"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[o.jsx("button",{className:"btn-ghost",onClick:t,children:"Cancel"}),o.jsx("button",{className:"btn",onClick:g,disabled:d,children:d?"Creating":"Create Order"})]})]})}function oue({open:t,onClose:n,children:r}){return t?o.jsxs("div",{className:"fixed inset-0 z-[100] grid place-items-center bg-black/40 p-4",children:[o.jsx("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-4 shadow-2xl",children:r}),o.jsx("button",{className:"absolute inset-0 -z-10",onClick:n,"aria-label":"Close"})]}):null}function lue(){const[t,n]=x.useState([]),[r,s]=x.useState(!0),[a,i]=x.useState(""),[l,c]=x.useState(!1);return x.useEffect(()=>{let d=!1;return(async()=>{var f,p;s(!0);try{const{data:h}=await Jde({q:a});d||n(Array.isArray(h)?h:[])}catch(h){V.error(((p=(f=h==null?void 0:h.response)==null?void 0:f.data)==null?void 0:p.detail)||"Failed to load orders")}finally{d||s(!1)}})(),()=>{d=!0}},[a]),o.jsxs("div",{className:"space-y-5",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Radiology Orders"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Book, track, scan and report."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"input w-60",placeholder:"Search test, UHID or name",value:a,onChange:d=>i(d.target.value)}),o.jsx(Ie,{anyOf:["orders.ris.create","radiology.orders.create"],children:o.jsxs("button",{className:"btn",onClick:()=>c(!0),children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New Order"]})})]})]}),o.jsx("div",{className:"rounded-xl border bg-white",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Order"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Modality"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Priority"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Created"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[r&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3",colSpan:7,children:"Loading"})}),!r&&t.map(d=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:o.jsx(gk,{order:d,to:`/ris/orders/${d.id}`,prefix:"RAD"})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(Oy,{patientId:d.patient_id})}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(sB,{modality:d.modality})}),o.jsx("td",{className:"px-3 py-2 capitalize",children:d.priority||"routine"}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(yk,{status:d.status})}),o.jsx("td",{className:"px-3 py-2",children:new Date(d.created_at).toLocaleString()}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsx(Os,{to:`/ris/orders/${d.id}`,className:"btn-ghost",children:"View"})})]},d.id)),!r&&t.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:7,children:"No orders"})})]})]})}),o.jsx(oue,{open:l,onClose:()=>c(!1),children:o.jsx(iue,{onClose:()=>c(!1),onCreated:()=>c(!1)})})]})}function cue({t,onEdit:n,onDelete:r}){return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:t.code}),o.jsx("td",{className:"px-3 py-2",children:t.name}),o.jsx("td",{className:"px-3 py-2",children:t.modality||""}),o.jsx("td",{className:"px-3 py-2",children:Number(t.price||0).toFixed(2)}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsxs(Ie,{anyOf:["radiology.masters.manage","masters.ris.manage"],children:[o.jsx("button",{className:"btn-ghost mr-2",onClick:()=>n(t),children:"Edit"}),o.jsx("button",{className:"btn-ghost text-rose-600",onClick:()=>r(t),children:"Delete"})]})})]})}function due(){const[t,n]=x.useState([]),[r,s]=x.useState(!0),[a,i]=x.useState(""),[l,c]=x.useState({code:"",name:"",modality:"",price:0}),[d,u]=x.useState(null),f=async()=>{var g,y;s(!0);try{const{data:v}=await rB({q:a,page_size:100});n(Array.isArray(v)?v:(v==null?void 0:v.items)||[])}catch(v){V.error(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to load")}finally{s(!1)}};x.useEffect(()=>{f()},[a]);const p=async()=>{var g,y;try{d?(await Gde(d,l),V.success("Updated")):(await qde(l),V.success("Created")),c({code:"",name:"",modality:"",price:0}),u(null),f()}catch(v){V.error(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Save failed")}},h=g=>{u(g.id),c({code:g.code,name:g.name,modality:g.modality||"",price:g.price||0})},m=async g=>{var y,v;if(window.confirm(`Delete ${g.code}?`))try{await Yde(g.id),V.success("Deleted"),f()}catch(b){V.error(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Delete failed")}};return o.jsxs("div",{className:"space-y-5",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"RIS Masters"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Manage radiology tests & modalities."})]}),o.jsx("input",{className:"input w-60",placeholder:"Search code/name",value:a,onChange:g=>i(g.target.value)})]}),o.jsx(Ie,{anyOf:["radiology.masters.manage","masters.ris.manage"],children:o.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-3",children:d?"Edit Test":"New Test"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[o.jsx("input",{className:"input",placeholder:"Code",value:l.code,onChange:g=>c(y=>({...y,code:g.target.value}))}),o.jsx("input",{className:"input",placeholder:"Name",value:l.name,onChange:g=>c(y=>({...y,name:g.target.value}))}),o.jsx("input",{className:"input",placeholder:"Modality (XR/CT/MRI/USG)",value:l.modality,onChange:g=>c(y=>({...y,modality:g.target.value}))}),o.jsx("input",{className:"input",placeholder:"Price",type:"number",step:"0.01",value:l.price,onChange:g=>c(y=>({...y,price:g.target.value}))})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("button",{className:"btn",onClick:p,children:d?"Update":"Create"}),d&&o.jsx("button",{className:"btn-ghost",onClick:()=>{u(null),c({code:"",name:"",modality:"",price:0})},children:"Cancel"})]})]})}),o.jsx("div",{className:"rounded-xl border bg-white",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Modality"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Price"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[r&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!r&&t.map(g=>o.jsx(cue,{t:g,onEdit:h,onDelete:m},g.id)),!r&&t.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No tests"})})]})]})})]})}const Si=t=>t?new Date(t).toLocaleString():"";function uue(){const{id:t}=Wl(),[n,r]=x.useState(null),[s,a]=x.useState(!0),[i,l]=x.useState(""),[c,d]=x.useState(""),[u,f]=x.useState(!1),[p,h]=x.useState([]),m=async()=>{var N,S;a(!0);try{const{data:_}=await Qde(t);r(_),d((_==null?void 0:_.report_text)||"")}catch(_){V.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load order")}finally{a(!1)}};x.useEffect(()=>{m()},[t]);const g=async()=>{var N,S;if(!i)return V.error("Pick a date & time");try{await Zde(n.id,{scheduled_at:i}),V.success("Scheduled"),m()}catch(_){V.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to schedule")}},y=async()=>{var N,S;try{await eue(n.id),V.success("Marked scanned"),m()}catch(_){V.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to mark scanned")}},v=async()=>{var N,S;f(!0);try{n.status==="reported"||n.status==="approved"?await nue(n.id,{report_text:c}):await tue(n.id,{report_text:c}),V.success("Report saved"),m()}catch(_){V.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to save report")}finally{f(!1)}},b=async()=>{var N,S;try{await rue(n.id),V.success("Report approved"),m()}catch(_){V.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Approval failed")}},w=async N=>{var _,k,C;const S=(_=N.target.files)==null?void 0:_[0];if(S)try{const{data:P}=await aue(n.id,S);h(E=>[{file_url:P==null?void 0:P.file_url,note:S.name},...E]),V.success("Attachment uploaded")}catch(P){V.error(((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Upload failed")}finally{N.target.value=""}},j=async()=>{var S,_;const N=prompt("Paste file URL");if(N)try{const{data:k}=await sue(n.id,N,"Link");h(C=>[{file_url:(k==null?void 0:k.file_url)||N,note:"Link"},...C]),V.success("Attachment linked")}catch(k){V.error(((_=(S=k==null?void 0:k.response)==null?void 0:S.data)==null?void 0:_.detail)||"Link failed")}};return s?o.jsx("div",{children:"Loading"}):n?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-semibold",children:["Radiology Order ",o.jsx(gk,{order:n,prefix:"RAD"})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Patient: ",o.jsx(Oy,{patientId:n.patient_id}),"  Created: ",Si(n.created_at)]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Modality: ",o.jsx(sB,{modality:n.modality}),"  Status: ",o.jsx(yk,{status:n.status})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ie,{anyOf:["radiology.report.create"],children:o.jsx("button",{className:"btn",onClick:v,disabled:u,children:u?"Saving":"Save Report"})}),o.jsx(Ie,{anyOf:["radiology.report.approve"],children:o.jsxs("button",{className:"btn",onClick:b,children:[o.jsx(mp,{className:"h-4 w-4 mr-2"})," Approve"]})})]})]}),o.jsxs("section",{className:"rounded-2xl border bg-white p-4 space-y-4",children:[o.jsx("h2",{className:"text-sm font-semibold",children:"Workflow"}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[o.jsx(fX,{className:"h-4 w-4"})," Schedule"]}),o.jsxs("div",{className:"mt-2 space-y-2",children:[o.jsx("input",{type:"datetime-local",className:"input w-full",value:i,onChange:N=>l(N.target.value)}),o.jsx(Ie,{anyOf:["radiology.schedule.manage"],children:o.jsx("button",{className:"btn w-full",onClick:g,children:"Book Slot"})}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Current: ",Si(n.scheduled_at)]})]})]}),o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsx("div",{className:"flex items-center gap-2 font-medium",children:"Scan"}),o.jsxs("div",{className:"mt-2 grid gap-2",children:[o.jsx(Ie,{anyOf:["radiology.scan.update"],children:o.jsx("button",{className:"btn w-full",onClick:y,children:"Mark Scanned"})}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Scanned: ",Si(n.scanned_at)]})]})]}),o.jsxs("div",{className:"rounded-xl border p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[o.jsx(hx,{className:"h-4 w-4"})," Attachments"]}),o.jsxs("div",{className:"mt-2 grid gap-2",children:[o.jsx("input",{type:"file",onChange:w}),o.jsx("button",{className:"btn-ghost text-left",onClick:j,children:"Add link"}),o.jsxs("div",{className:"mt-2 space-y-1",children:[p.map((N,S)=>o.jsx("a",{href:N.file_url,className:"text-xs text-blue-700 underline",target:"_blank",rel:"noreferrer",children:N.note||N.file_url},S)),p.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No attachments (local list)"})]})]})]})]})]}),o.jsxs("section",{className:"rounded-2xl border bg-white p-4 space-y-3",children:[o.jsx("h2",{className:"text-sm font-semibold",children:"Report"}),o.jsx("textarea",{className:"input min-h-[200px]",placeholder:"Enter radiology report text",value:c,onChange:N=>d(N.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-gray-600",children:[o.jsxs("div",{children:["Ordered: ",Si(n.created_at)]}),o.jsxs("div",{children:["Scheduled: ",Si(n.scheduled_at)]}),o.jsxs("div",{children:["Scanned: ",Si(n.scanned_at)]}),o.jsxs("div",{children:["Reported: ",Si(n.reported_at)]}),o.jsxs("div",{children:["Approved: ",Si(n.approved_at)]})]})]})]}):o.jsx("div",{className:"text-sm text-gray-500",children:"Order not found"})}const aB=(t={})=>B.get("/ot/masters/surgeries",{params:t}),fue=t=>B.post("/ot/masters/surgeries",t),pue=(t,n)=>B.put(`/ot/masters/surgeries/${t}`,n),hue=t=>B.delete(`/ot/masters/surgeries/${t}`),mue=(t={})=>B.get("/ot/orders",{params:t}),xue=t=>B.get(`/ot/orders/${t}`),gue=t=>B.post("/ot/orders",t),yue=(t,n)=>B.post(`/ot/orders/${t}/schedule`,n),vue=(t,n)=>B.post(`/ot/orders/${t}/status`,{status:n}),bue=(t,n,r="")=>{const s=new FormData;return s.append("file",n),r&&s.append("note",r),B.post(`/ot/orders/${t}/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})},wue=(t,n)=>B.post(`/ot/orders/${t}/attachments`,n);function jue({open:t,onClose:n}){const r=jr(),s=$t(C=>C.user),[a,i]=x.useState(null),[l,c]=x.useState(""),[d,u]=x.useState([]),[f,p]=x.useState(""),[h,m]=x.useState(""),[g,y]=x.useState(""),[v,b]=x.useState(""),[w,j]=x.useState(""),[N,S]=x.useState(!1);x.useEffect(()=>{if(!t)return;let C=!0;return(async()=>{try{const{data:E}=await aB({q:l,page_size:50,active:!0});if(!C)return;u((E==null?void 0:E.items)||[])}catch{}})(),()=>{C=!1}},[t,l]);const _=x.useMemo(()=>a&&(f||h.trim().length>0),[a,f,h]),k=async()=>{var C,P;if(_){S(!0);try{const E={patient_id:a,context_type:"ipd",context_id:null,surgery_master_id:f?Number(f):null,surgery_name:f?null:h.trim(),estimated_cost:g?Number(g):null,surgeon_id:null,anaesthetist_id:null,scheduled_start:v||null,scheduled_end:w||null,ordering_user_id:s==null?void 0:s.id},{data:M}=await gue(E);V.success("OT order created"),n==null||n(),r(`/ot/orders/${M.id}`)}catch(E){const M=((P=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:P.detail)||"Failed to create OT order";V.error(M)}finally{S(!1)}}};return t?o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-end md:place-items-center bg-black/30 backdrop-blur-sm p-3",children:o.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white shadow-xl",children:[o.jsxs("header",{className:"flex items-center justify-between border-b p-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"New OT Order"}),o.jsx("button",{className:"btn-ghost",onClick:()=>n==null?void 0:n(),children:"Close"})]}),o.jsxs("div",{className:"p-4 space-y-5",children:[o.jsx(Hd,{value:a,onChange:i}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Choose Surgery (Master)"}),o.jsx("input",{className:"input",placeholder:"Search master list",value:l,onChange:C=>c(C.target.value)}),o.jsxs("select",{className:"input",value:f,onChange:C=>p(C.target.value),children:[o.jsx("option",{value:"",children:" Select from master "}),d.map(C=>o.jsxs("option",{value:C.id,children:[C.code,"  ",C.name," (",Number(C.default_cost||0).toFixed(2),")"]},C.id))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"OR enter Custom Surgery"}),o.jsx("input",{className:"input",placeholder:"e.g., Laparoscopic Cholecystectomy",value:h,onChange:C=>m(C.target.value),disabled:!!f}),o.jsx("label",{className:"text-sm font-medium",children:"Estimated Cost (optional)"}),o.jsx("input",{className:"input",type:"number",min:"0",value:g,onChange:C=>y(C.target.value)})]})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium inline-flex items-center gap-2",children:[o.jsx(iy,{className:"h-4 w-4"})," Scheduled Start (optional)"]}),o.jsx("input",{className:"input",type:"datetime-local",value:v,onChange:C=>b(C.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Scheduled End (optional)"}),o.jsx("input",{className:"input",type:"datetime-local",value:w,onChange:C=>j(C.target.value)})]})]})]}),o.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t p-4",children:[o.jsx("button",{className:"btn-ghost",onClick:()=>n==null?void 0:n(),children:"Cancel"}),o.jsxs("button",{className:"btn",disabled:!_||N,onClick:k,children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," Create Order"]})]})]})}):null}function iB({id:t}){const[n,r]=x.useState(null);return x.useEffect(()=>{let s=!0;return(async()=>{if(t)try{const{data:i}=await B.get(`/patients/${t}`);if(!s)return;const l=[i.first_name,i.last_name].filter(Boolean).join(" ");r(`${i.uhid||"UHID"}  ${l||"Name"}`)}catch{r(`#${t}`)}})(),()=>{s=!1}},[t]),o.jsx("span",{children:n||""})}const Nue=["planned","scheduled","in_progress","completed","cancelled"],Sue=t=>{if(!t)return"";try{return new Date(t).toLocaleString()}catch{return t}};function kue(){const[t,n]=x.useState([]),[r,s]=x.useState("planned"),[a,i]=x.useState(""),[l,c]=x.useState(!1),[d,u]=x.useState(!1),f=Fn("ot.cases.create")||Fn("ipd.manage"),p=async()=>{var m,g;c(!0);try{const y={status:r,limit:200};a&&(y.q=a);const{data:v}=await mue(y);n(Array.isArray(v)?v:[])}catch(y){V.error(((g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to load OT orders")}finally{c(!1)}};x.useEffect(()=>{p()},[r]);const h=x.useMemo(()=>t.length,[t]);return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"OT Orders"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Plan, schedule and track surgical cases"})]}),o.jsx("div",{className:"flex items-center gap-2",children:f&&o.jsxs("button",{className:"btn",onClick:()=>u(!0),children:[o.jsx(mn,{className:"h-4 w-4 mr-2"})," New OT Order"]})})]}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-[1fr_auto]",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"input pl-9",placeholder:"Search text (test name/code not indexed here, use status filters)",value:a,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&p()})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("select",{className:"input",value:r,onChange:m=>s(m.target.value),children:Nue.map(m=>o.jsx("option",{value:m,children:m},m))}),o.jsx("button",{className:"btn-ghost",onClick:p,children:"Refresh"})]})]}),o.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Case #"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Surgery"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Scheduled"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[l&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3",colSpan:6,children:"Loading"})}),!l&&t.map(m=>o.jsxs("tr",{className:"border-t",children:[o.jsxs("td",{className:"px-3 py-2",children:["#",m.id]}),o.jsx("td",{className:"px-3 py-2",children:o.jsx(iB,{id:m.patient_id})}),o.jsx("td",{className:"px-3 py-2",children:m.surgery_name||""}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("span",{className:"inline-block rounded-full bg-gray-100 px-2 py-0.5 text-xs capitalize",children:m.status})}),o.jsx("td",{className:"px-3 py-2",children:Sue(m.scheduled_start)}),o.jsx("td",{className:"px-3 py-2 text-right",children:o.jsx(Os,{to:`/ot/orders/${m.id}`,className:"btn-ghost",children:"View"})})]},m.id)),!l&&t.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:6,children:"No OT orders"})})]}),o.jsx("tfoot",{children:o.jsx("tr",{children:o.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:6,children:["Total: ",h]})})})]})}),o.jsx(jue,{open:d,onClose:()=>u(!1)})]})}const ic=t=>{if(!t)return"";try{return new Date(t).toLocaleString()}catch{return t}},Cue=t=>{const n=(t||"").toLowerCase();return n==="planned"?["scheduled","in_progress","cancelled"]:n==="scheduled"?["in_progress","cancelled"]:n==="in_progress"?["completed","cancelled"]:[]};function _ue(){const{id:t}=Wl(),[n,r]=x.useState(null),[s,a]=x.useState(!0),[i,l]=x.useState(!1),c=Fn("ot.cases.update"),d=Fn("ot.cases.update")||Fn("ot.masters.manage"),u=async()=>{var C,P;a(!0);try{const{data:E}=await xue(t);r(E)}catch(E){V.error(((P=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:P.detail)||"Failed to load order")}finally{a(!1)}};x.useEffect(()=>{u()},[t]),x.useEffect(()=>{try{const P=(B.defaults.baseURL||"").replace(/^http/,"ws"),E=new WebSocket(`${P}/ot/ws`);return E.onmessage=M=>{var T;try{const A=JSON.parse(M.data);if(!((T=A==null?void 0:A.type)!=null&&T.startsWith("ot."))||String(A==null?void 0:A.order_id)!==String(t))return;u()}catch{}},()=>E.close()}catch{}},[t]);const[f,p]=x.useState(""),[h,m]=x.useState(""),g=async()=>{var C,P;if(!f)return V.error("Start time required");l(!0);try{await yue(t,{scheduled_start:f,scheduled_end:h||null}),V.success("Scheduled"),p(""),m(""),await u()}catch(E){V.error(((P=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:P.detail)||"Failed to schedule")}finally{l(!1)}},y=async C=>{var P,E;l(!0);try{await vue(t,C),V.success(`Status: ${C}`),await u()}catch(M){V.error(((E=(P=M==null?void 0:M.response)==null?void 0:P.data)==null?void 0:E.detail)||"Failed to update status")}finally{l(!1)}},[v,b]=x.useState(""),w=x.useRef(null),j=async C=>{var E,M,T;const P=(E=C.target.files)==null?void 0:E[0];if(P){l(!0);try{await bue(t,P,v),V.success("File uploaded"),b(""),w.current.value="",await u()}catch(A){V.error(((T=(M=A==null?void 0:A.response)==null?void 0:M.data)==null?void 0:T.detail)||"Upload failed")}finally{l(!1)}}},[N,S]=x.useState(""),_=async()=>{var C,P;if(N.trim()){l(!0);try{await wue(t,{file_url:N.trim(),note:v}),V.success("Link added"),S(""),b(""),await u()}catch(E){V.error(((P=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:P.detail)||"Failed to add link")}finally{l(!1)}}};if(s)return o.jsx("div",{className:"p-4",children:"Loading"});if(!n)return o.jsx("div",{className:"p-4",children:"Not found"});const k=Cue(n.status);return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-semibold",children:["OT Case #",n.id]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Patient: ",o.jsx(iB,{id:n.patient_id}),"  Created: ",ic(n.created_at)]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Surgery: ",o.jsx("span",{className:"font-medium",children:n.surgery_name||""}),"  Status: ",o.jsx("span",{className:"capitalize",children:n.status})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{className:"btn-ghost",onClick:()=>u(),children:[o.jsx(oy,{className:"h-4 w-4 mr-2"})," Refresh"]}),c&&k.includes("scheduled")&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"datetime-local",className:"input",value:f,onChange:C=>p(C.target.value)}),o.jsx("input",{type:"datetime-local",className:"input",value:h,onChange:C=>m(C.target.value)}),o.jsxs("button",{className:"btn",disabled:i,onClick:g,children:[o.jsx(iy,{className:"h-4 w-4 mr-2"})," Schedule"]})]}),c&&k.includes("in_progress")&&o.jsxs("button",{className:"btn",disabled:i,onClick:()=>y("in_progress"),children:[o.jsx(uJ,{className:"h-4 w-4 mr-2"})," Start"]}),c&&k.includes("completed")&&o.jsxs("button",{className:"btn",disabled:i,onClick:()=>y("completed"),children:[o.jsx(mp,{className:"h-4 w-4 mr-2"})," Complete"]}),c&&k.includes("cancelled")&&o.jsxs("button",{className:"btn-ghost",disabled:i,onClick:()=>y("cancelled"),children:[o.jsx(Is,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]}),o.jsxs("section",{className:"rounded-xl border bg-white p-4",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Timing"}),o.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-3",children:[o.jsx(mu,{label:"Scheduled Start",value:ic(n.scheduled_start)}),o.jsx(mu,{label:"Scheduled End",value:ic(n.scheduled_end)}),o.jsx(mu,{label:"Actual Start",value:ic(n.actual_start)}),o.jsx(mu,{label:"Actual End",value:ic(n.actual_end)}),o.jsx(mu,{label:"Updated",value:ic(n.updated_at)})]})]}),o.jsxs("section",{className:"rounded-xl border bg-white p-4 space-y-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h3",{className:"font-medium",children:"Attachments"})}),d&&o.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto]",children:[o.jsxs("div",{className:"grid gap-2 sm:grid-cols-[2fr_1fr]",children:[o.jsx("input",{type:"file",ref:w,className:"input",onChange:j,"aria-label":"Upload file"}),o.jsx("input",{className:"input",placeholder:"Note (optional)",value:v,onChange:C=>b(C.target.value)})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"input",placeholder:"or paste link (https://...)",value:N,onChange:C=>S(C.target.value)}),o.jsxs("button",{className:"btn-ghost",disabled:i,onClick:_,children:[o.jsx(m3,{className:"h-4 w-4 mr-2"})," Add Link"]})]})]}),o.jsx("div",{className:"rounded-lg border",children:o.jsx("div",{className:"p-3 text-sm text-gray-500",children:"Uploaded files and links are stored against this case. Use the upload field to add new items."})})]})]})}function mu({label:t,value:n}){return o.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-sm",children:n||""})]})}function Pue(){Fn("ot.masters.manage")||Fn("ot.masters.view");const t=Fn("ot.masters.manage"),[n,r]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState(!0),c=async()=>{var v,b;l(!0);try{const{data:w}=await aB({q:s,page:1,page_size:100});r(w.items||[])}catch(w){V.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to load surgeries")}finally{l(!1)}};x.useEffect(()=>{c()},[]);const[d,u]=x.useState({id:null,code:"",name:"",default_cost:"",active:!0}),[f,p]=x.useState(!1),h=()=>{u({id:null,code:"",name:"",default_cost:"",active:!0}),p(!0)},m=v=>{u({...v}),p(!0)},g=async()=>{var v,b;if(!d.code.trim()||!d.name.trim())return V.error("Code and Name are required");try{d.id?(await pue(d.id,{code:d.code.trim(),name:d.name.trim(),default_cost:Number(d.default_cost||0),active:!!d.active}),V.success("Updated")):(await fue({code:d.code.trim(),name:d.name.trim(),default_cost:Number(d.default_cost||0),active:!!d.active}),V.success("Created")),p(!1),await c()}catch(w){V.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Save failed")}},y=async v=>{var b,w;if(confirm("Delete this surgery master?"))try{await hue(v),V.success("Deleted"),await c()}catch(j){V.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Delete failed")}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("header",{className:"flex items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"OT Masters"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"input",placeholder:"Search name/code",value:s,onChange:v=>a(v.target.value)}),o.jsxs("button",{className:"btn-ghost",onClick:c,children:[o.jsx(oy,{className:"h-4 w-4 mr-2"}),"Refresh"]}),t&&o.jsxs("button",{className:"btn",onClick:h,children:[o.jsx(mn,{className:"h-4 w-4 mr-2"}),"New Surgery"]})]})]}),o.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Default Cost"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Active"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[i&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!i&&n.map(v=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:v.code}),o.jsx("td",{className:"px-3 py-2",children:v.name}),o.jsxs("td",{className:"px-3 py-2",children:[" ",Number(v.default_cost||0).toFixed(2)]}),o.jsx("td",{className:"px-3 py-2",children:v.active?"Yes":"No"}),o.jsx("td",{className:"px-3 py-2 text-right",children:t&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn-ghost mr-2",onClick:()=>m(v),children:o.jsx(Rs,{className:"h-4 w-4"})}),o.jsx("button",{className:"btn-ghost text-red-600",onClick:()=>y(v.id),children:o.jsx(Na,{className:"h-4 w-4"})})]})})]},v.id)),!i&&n.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No items"})})]})]})}),f&&o.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",onClick:()=>p(!1),children:o.jsxs("div",{className:"w-full max-w-lg rounded-xl border bg-white p-4",onClick:v=>v.stopPropagation(),children:[o.jsx("h3",{className:"font-medium mb-3",children:d.id?"Edit Surgery":"New Surgery"}),o.jsxs("div",{className:"grid gap-3",children:[o.jsx("input",{className:"input",placeholder:"Code",value:d.code,onChange:v=>u(b=>({...b,code:v.target.value}))}),o.jsx("input",{className:"input",placeholder:"Name",value:d.name,onChange:v=>u(b=>({...b,name:v.target.value}))}),o.jsx("input",{className:"input",placeholder:"Default Cost",type:"number",value:d.default_cost,onChange:v=>u(b=>({...b,default_cost:v.target.value}))}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:!!d.active,onChange:v=>u(b=>({...b,active:v.target.checked}))}),"Active"]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"btn-ghost",onClick:()=>p(!1),children:"Cancel"}),o.jsx("button",{className:"btn",onClick:g,children:"Save"})]})]})})]})}function Aue(t){return B.post("/billing/invoices",t)}function Eue(t){return B.get(`/billing/invoices/${t}`)}function Tue(t={}){return B.get("/billing/invoices",{params:t})}function Mue(t,n){return B.put(`/billing/invoices/${t}`,n)}function Oue(t){return B.post(`/billing/invoices/${t}/finalize`)}function Rue(t){return B.post(`/billing/invoices/${t}/cancel`)}function tT(t,n){return B.post(`/billing/invoices/${t}/items/manual`,n)}function Iue(t,n,r){return B.put(`/billing/invoices/${t}/items/${n}`,r)}function Due(t,n,r){return B.post(`/billing/invoices/${t}/items/${n}/void`,r)}function Lue(t,n){return B.post(`/billing/invoices/${t}/payments`,n)}function $ue(t,n){return B.delete(`/billing/invoices/${t}/payments/${n}`)}function Fue(t,n={}){return B.post(`/billing/invoices/${t}/apply-advances`,n)}function oB(){return B.get("/billing/masters")}function Bue(t){return B.get(`/billing/patients/${t}/summary`)}function zue(t){return B.get(`/billing/invoices/${t}/print`,{responseType:"blob"})}function Vue(t){return B.get(`/billing/patients/${t}/print-summary`,{responseType:"blob"})}function Xt(t){return Number(t||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}function Uue(){var Wp,nu;const{invoiceId:t}=Wl(),n=jr(),[r,s]=x.useState(null),[a,i]=x.useState({doctors:[],credit_providers:[],packages:[],payers:[],tpas:[],credit_plans:[]}),[l,c]=x.useState(!0),[d,u]=x.useState(!1),[f,p]=x.useState({}),[h,m]=x.useState(!1),[g,y]=x.useState({description:"",quantity:1,unit_price:"",tax_rate:0,discount_percent:0,discount_amount:""}),[v,b]=x.useState(null),[w,j]=x.useState({description:"",quantity:1,unit_price:"",tax_rate:0,discount_percent:0,discount_amount:""}),[N,S]=x.useState(!1),[_,k]=x.useState({amount:"",mode:"cash",reference_no:"",notes:""}),[C,P]=x.useState(!1),[E,M]=x.useState(""),[T,A]=x.useState(""),[R,O]=x.useState(null),[I,L]=x.useState(!1),D=(r==null?void 0:r.status)==="finalized"||(r==null?void 0:r.status)==="cancelled";x.useEffect(()=>{$()},[]),x.useEffect(()=>{t&&K()},[t]);async function $(){try{const{data:W}=await oB();i({doctors:(W==null?void 0:W.doctors)||[],credit_providers:(W==null?void 0:W.credit_providers)||[],packages:(W==null?void 0:W.packages)||[],payers:(W==null?void 0:W.payers)||[],tpas:(W==null?void 0:W.tpas)||[],credit_plans:(W==null?void 0:W.credit_plans)||[]})}catch(W){console.error("Failed to load masters",W)}}async function F(W){if(W){L(!0);try{const{data:ye}=await Bue(W);O(ye)}catch(ye){console.error("Failed to load patient billing summary",ye)}finally{L(!1)}}}async function K(){c(!0),A("");try{const{data:W}=await Eue(t);s(W),p({billing_type:W.billing_type||"general",consultant_id:W.consultant_id||"",provider_id:W.provider_id||"",visit_no:W.visit_no||"",remarks:W.remarks||"",header_discount_percent:W.header_discount_percent??"",header_discount_amount:W.header_discount_amount??"",discount_remarks:W.discount_remarks||""}),await F(W.patient_id)}catch(W){console.error("Failed to load invoice",W),A("Unable to load invoice. Please go back and try again.")}finally{c(!1)}}function J(W){const{name:ye,value:We}=W.target;p(At=>({...At,[ye]:We}))}async function Y(){if(r){u(!0),A("");try{const W={billing_type:f.billing_type||null,consultant_id:f.consultant_id?Number(f.consultant_id):null,provider_id:f.provider_id?Number(f.provider_id):null,visit_no:f.visit_no||null,remarks:f.remarks||null,header_discount_percent:f.header_discount_percent!==""&&f.header_discount_percent!==null?Number(f.header_discount_percent):null,header_discount_amount:f.header_discount_amount!==""&&f.header_discount_amount!==null?Number(f.header_discount_amount):null,discount_remarks:f.discount_remarks||null},{data:ye}=await Mue(r.id,W);s(ye),p(We=>({...We,header_discount_percent:ye.header_discount_percent??"",header_discount_amount:ye.header_discount_amount??""}))}catch(W){console.error("Save header failed",W),A("Unable to save header details.")}finally{u(!1)}}}function ee(W){const{name:ye,value:We}=W.target;y(At=>({...At,[ye]:ye==="quantity"||ye==="tax_rate"||ye==="discount_percent"?Number(We):We}))}async function Q(W){if(W.preventDefault(),!!r){A("");try{const ye={description:g.description||"",quantity:g.quantity||1,unit_price:Number(g.unit_price||0),tax_rate:Number(g.tax_rate||0),discount_percent:Number(g.discount_percent||0),discount_amount:g.discount_amount!==""?Number(g.discount_amount||0):void 0},{data:We}=await tT(r.id,ye);s(We),m(!1),y({description:"",quantity:1,unit_price:"",tax_rate:0,discount_percent:0,discount_amount:""})}catch(ye){console.error("Add manual item failed",ye),A("Unable to add manual item. Please check values.")}}}function ue(W){b(W.id),j({description:W.description||"",quantity:W.quantity||1,unit_price:String(W.unit_price||""),tax_rate:Number(W.tax_rate||0),discount_percent:Number(W.discount_percent||0),discount_amount:W.discount_amount!==null&&W.discount_amount!==void 0?String(W.discount_amount):""})}function G(W){const{name:ye,value:We}=W.target;j(At=>({...At,[ye]:ye==="quantity"||ye==="tax_rate"||ye==="discount_percent"?Number(We):We}))}async function ne(W){if(W.preventDefault(),!(!r||!v))try{const ye={description:w.description||"",quantity:w.quantity||1,unit_price:Number(w.unit_price||0),tax_rate:Number(w.tax_rate||0),discount_percent:Number(w.discount_percent||0),discount_amount:w.discount_amount!==""?Number(w.discount_amount||0):void 0},{data:We}=await Iue(r.id,v,ye);s(We),b(null)}catch(ye){console.error("Update item failed",ye),A("Unable to update item.")}}async function z(W){if(!(!r||!window.confirm("Void this line item?")))try{const{data:We}=await Due(r.id,W.id,{reason:"Voided from UI"});s(We)}catch(We){console.error("Void item failed",We),A("Unable to void item.")}}function te(W){const{name:ye,value:We}=W.target;k(At=>({...At,[ye]:We}))}async function oe(W){if(W.preventDefault(),!!r){A("");try{let ye=Number(_.amount||0);C&&(ye=-Math.abs(ye));const We={amount:ye,mode:C?"refund":_.mode,reference_no:_.reference_no||null,notes:_.notes||null},{data:At}=await Lue(r.id,We);s(At),S(!1),P(!1),k({amount:"",mode:"cash",reference_no:"",notes:""})}catch(ye){console.error("Add payment/refund failed",ye),A("Unable to save payment / refund.")}}}async function H(W){if(!(!r||!window.confirm("Delete this payment?")))try{const{data:We}=await $ue(r.id,W.id);s(We)}catch(We){console.error("Delete payment failed",We),A("Unable to delete payment.")}}async function Fe(){if(r){M("advance"),A("");try{const{data:W}=await Fue(r.id,{});s(W)}catch(W){console.error("Apply advances failed",W),A("Unable to apply advances.")}finally{M("")}}}async function Te(){if(!(!r||!window.confirm("Finalize this invoice? You cannot edit items later."))){M("finalize"),A("");try{const{data:ye}=await Oue(r.id);s(ye)}catch(ye){console.error("Finalize failed",ye),A("Unable to finalize invoice.")}finally{M("")}}}async function X(){if(!(!r||!window.confirm("Cancel this invoice?"))){M("cancel"),A("");try{await Rue(r.id),await K()}catch(ye){console.error("Cancel failed",ye),A("Unable to cancel invoice.")}finally{M("")}}}async function je(){if(r)try{const W=await zue(r.id),ye=new Blob([W.data],{type:W.headers["content-type"]||"application/pdf"}),We=URL.createObjectURL(ye);window.open(We,"_blank","noopener")}catch(W){console.error("Print failed",W),A("Unable to open invoice print view.")}}async function _e(){if(r)try{const W=await Vue(r.patient_id),ye=new Blob([W.data],{type:W.headers["content-type"]||"application/pdf"}),We=URL.createObjectURL(ye);window.open(We,"_blank","noopener")}catch(W){console.error("Patient summary print failed",W),A("Unable to open patient billing summary.")}}function it(){P(!0),S(!0)}function tt(){P(!1),S(!0)}function bi(W){if(!r||!W)return;const ye=a.packages.find(At=>String(At.id)===String(W));if(!ye)return;const We={description:`Package: ${ye.name}`,quantity:1,unit_price:Number(ye.charges||0),tax_rate:0,discount_percent:0};tT(r.id,We).then(({data:At})=>s(At)).catch(At=>{console.error("Add package charge failed",At),A("Unable to add package charge.")})}const Do=a.packages||[],Yn=(r==null?void 0:r.status)==="finalized"?"bg-green-100 text-green-800":(r==null?void 0:r.status)==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",xs=(r==null?void 0:r.payments)||[],Up=(r==null?void 0:r.items)||[],Hp=x.useMemo(()=>xs.filter(W=>Number(W.amount||0)>=0),[xs]),Lo=x.useMemo(()=>xs.filter(W=>Number(W.amount||0)<0),[xs]);return l?o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 md:px-6 py-4",children:o.jsx("div",{className:"max-w-5xl mx-auto text-xs text-slate-500",children:"Loading invoice..."})}):r?o.jsxs("div",{className:"min-h-[calc(100vh-4rem)] bg-gradient-to-b from-slate-50 via-slate-100 to-slate-50 px-3 md:px-6 pb-20 md:pb-4 pt-4",children:[o.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>n("/billing"),className:"text-xs text-slate-500 hover:text-slate-700",children:" Billing Console"}),o.jsx("span",{className:"text-xs text-slate-400",children:"/"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h1",{className:"text-sm md:text-base font-semibold text-slate-900",children:["Invoice #",r.invoice_number||r.id]}),o.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-[10px] font-medium ${Yn}`,children:r.status})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:je,className:"text-xs rounded-full border border-slate-300 px-3 py-1.5 text-slate-700 bg-white hover:bg-slate-50 shadow-sm",children:"Print Invoice"})})]}),T&&o.jsx("div",{className:"rounded-md bg-red-50 px-3 py-2 text-xs text-red-700",children:T}),o.jsxs("div",{className:"rounded-2xl border border-indigo-100 bg-gradient-to-r from-indigo-50 via-sky-50 to-purple-50 p-3 md:p-4 shadow-sm flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-xs font-semibold text-slate-800",children:"Patient Credit Overview"}),o.jsxs("div",{className:"text-[11px] text-slate-500",children:["Patient ID: ",o.jsxs("span",{className:"font-medium",children:["#",r.patient_id]})]}),(R==null?void 0:R.patient)&&o.jsxs("div",{className:"text-[11px] text-slate-600",children:[R.patient.uhid&&o.jsxs(o.Fragment,{children:["UHID:"," ",o.jsx("span",{className:"font-medium",children:R.patient.uhid})," ",""," "]}),(R.patient.first_name||R.patient.last_name)&&o.jsxs(o.Fragment,{children:[R.patient.first_name," ",R.patient.last_name," "," "]}),R.patient.phone&&o.jsxs(o.Fragment,{children:[" ",R.patient.phone]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px]",children:[o.jsxs("div",{className:"rounded-full bg-white/80 border border-indigo-100 px-3 py-1 shadow-sm",children:[o.jsx("span",{className:"text-slate-500 mr-1",children:"Total Outstanding:"}),o.jsxs("span",{className:"font-semibold text-red-700",children:[""," ",Xt((R==null?void 0:R.total_outstanding)??r.balance_due??0)]})]}),o.jsxs("div",{className:"rounded-full bg-white/80 border border-emerald-100 px-3 py-1 shadow-sm",children:[o.jsx("span",{className:"text-slate-500 mr-1",children:"Advance Balance:"}),o.jsxs("span",{className:"font-semibold text-emerald-700",children:[" ",Xt((R==null?void 0:R.advance_balance)??0)]})]}),o.jsx("button",{type:"button",onClick:_e,disabled:I,className:"rounded-full bg-slate-900 px-3 py-1 text-[11px] font-medium text-white shadow-sm hover:bg-slate-800 disabled:opacity-60",children:I?"Loading...":"Credit Summary PDF"})]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"w-full md:w-2/5 space-y-4",children:[o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 md:p-4 shadow-sm space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("h2",{className:"text-xs font-semibold text-slate-800",children:"Invoice Header"}),o.jsxs("span",{className:"text-[11px] text-slate-400",children:["Patient #",r.patient_id]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Billing Type"}),o.jsxs("select",{name:"billing_type",value:f.billing_type,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50",children:[o.jsx("option",{value:"op_billing",children:"OP Billing"}),o.jsx("option",{value:"ip_billing",children:"IP Billing"}),o.jsx("option",{value:"lab",children:"Lab"}),o.jsx("option",{value:"pharmacy",children:"Pharmacy"}),o.jsx("option",{value:"radiology",children:"Radiology"}),o.jsx("option",{value:"general",children:"General"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Consultant"}),o.jsxs("select",{name:"consultant_id",value:f.consultant_id,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50",children:[o.jsx("option",{value:"",children:"None"}),(Wp=a.doctors)==null?void 0:Wp.map(W=>o.jsx("option",{value:W.id,children:W.name||`Doctor #${W.id}`},W.id))]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Credit Provider"}),o.jsxs("select",{name:"provider_id",value:f.provider_id,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50",children:[o.jsx("option",{value:"",children:"Self pay"}),(nu=a.credit_providers)==null?void 0:nu.map(W=>o.jsx("option",{value:W.id,children:W.display_name||W.name||W.code||`Provider #${W.id}`},W.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Visit No (optional)"}),o.jsx("input",{type:"text",name:"visit_no",value:f.visit_no,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Remarks"}),o.jsx("input",{type:"text",name:"remarks",value:f.remarks,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50"})]})]}),o.jsxs("div",{className:"mt-2 border-t border-slate-100 pt-2 space-y-2",children:[o.jsx("div",{className:"text-[11px] font-semibold text-slate-700",children:"Header Discount"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Discount %"}),o.jsx("input",{type:"number",name:"header_discount_percent",value:f.header_discount_percent,onChange:J,disabled:D,step:"0.1",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Discount Amount"}),o.jsx("input",{type:"number",name:"header_discount_amount",value:f.header_discount_amount,onChange:J,disabled:D,step:"0.01",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-[11px] text-slate-600",children:"Discount Remarks"}),o.jsx("input",{type:"text",name:"discount_remarks",value:f.discount_remarks,onChange:J,disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50"})]})]}),!D&&o.jsx("div",{className:"pt-1 flex justify-end",children:o.jsx("button",{type:"button",onClick:Y,disabled:d,className:"px-3 py-1.5 rounded-full bg-slate-900 text-xs font-medium text-white hover:bg-slate-800 disabled:opacity-60",children:d?"Saving...":"Save Header"})})]})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 md:p-4 shadow-sm space-y-2 text-xs",children:[o.jsx("h2",{className:"text-xs font-semibold text-slate-800",children:"Totals"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Gross Amount"}),o.jsxs("span",{className:"font-medium text-slate-900",children:[" ",Xt(r.gross_total)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Tax Total"}),o.jsxs("span",{className:"font-medium text-slate-900",children:[" ",Xt(r.tax_total)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Header Discount"}),o.jsxs("span",{className:"font-medium text-orange-700",children:[" ",Xt(r.header_discount_amount||0)," ",r.header_discount_percent?`(${r.header_discount_percent}%)`:""]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Net Amount"}),o.jsxs("span",{className:"font-semibold text-slate-900",children:[" ",Xt(r.net_total)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Amount Received"}),o.jsxs("span",{className:"font-medium text-emerald-700",children:[" ",Xt(r.amount_paid)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Advance Adjusted"}),o.jsxs("span",{className:"font-medium text-slate-900",children:[" ",Xt(r.advance_adjusted)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Previous Balance"}),o.jsxs("span",{className:"font-medium text-slate-900",children:[" ",Xt(r.previous_balance_snapshot)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-500",children:"Balance Due"}),o.jsxs("span",{className:"font-semibold text-red-700",children:[" ",Xt(r.balance_due)]})]})]})]}),Do.length>0&&o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 md:p-4 shadow-sm space-y-2 text-xs",children:[o.jsx("div",{className:"flex items-center justify-between gap-2",children:o.jsx("h2",{className:"text-xs font-semibold text-slate-800",children:"Package Billing (IPD)"})}),o.jsx("p",{className:"text-[11px] text-slate-500 mb-1",children:"Quickly post a package charge to this invoice."}),o.jsxs("select",{onChange:W=>bi(W.target.value),disabled:D,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-50",defaultValue:"",children:[o.jsx("option",{value:"",children:"Select package to add..."}),Do.map(W=>o.jsxs("option",{value:W.id,children:[W.name,"   ",Xt(W.charges)]},W.id))]})]})]}),o.jsxs("div",{className:"w-full md:w-3/5 space-y-4",children:[o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 md:p-4 shadow-sm space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("h2",{className:"text-xs font-semibold text-slate-800",children:"Items"}),!D&&o.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[11px] rounded-full border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50 shadow-sm",children:"+ Add Manual Item"})]}),Up.length===0?o.jsx("p",{className:"text-xs text-slate-500",children:"No items added yet."}):o.jsx("div",{className:"overflow-x-auto text-xs",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"#"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Description"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Qty"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Price"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"GST%"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Disc"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Total"}),o.jsx("th",{className:"px-2 py-1.5"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:Up.map((W,ye)=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-slate-500",children:ye+1}),o.jsx("td",{className:"px-2 py-1.5 text-slate-800",children:o.jsxs("div",{className:"max-w-xs",children:[o.jsx("div",{className:"truncate",children:W.description}),o.jsxs("div",{className:"text-[10px] text-slate-400",children:[W.service_type," #",W.service_ref_id]})]})}),o.jsx("td",{className:"px-2 py-1.5 text-right text-slate-700",children:W.quantity}),o.jsx("td",{className:"px-2 py-1.5 text-right text-slate-700",children:Xt(W.unit_price)}),o.jsxs("td",{className:"px-2 py-1.5 text-right text-slate-700",children:[Number(W.tax_rate||0),"%"]}),o.jsxs("td",{className:"px-2 py-1.5 text-right text-slate-700",children:[W.discount_percent?`${Number(W.discount_percent)}%`:"",W.discount_amount?` /  ${Xt(W.discount_amount)}`:""]}),o.jsx("td",{className:"px-2 py-1.5 text-right text-slate-800",children:Xt(W.line_total)}),o.jsx("td",{className:"px-2 py-1.5 text-right whitespace-nowrap",children:!D&&o.jsxs("div",{className:"flex justify-end gap-1",children:[o.jsx("button",{type:"button",onClick:()=>ue(W),className:"text-[10px] text-indigo-600 hover:text-indigo-800",children:"Edit"}),o.jsx("span",{className:"text-slate-300",children:"|"}),o.jsx("button",{type:"button",onClick:()=>z(W),className:"text-[10px] text-red-600 hover:text-red-800",children:"Void"})]})})]},W.id))})]})})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 md:p-4 shadow-sm space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("h2",{className:"text-xs font-semibold text-slate-800",children:"Payments & Refunds"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:Fe,disabled:E==="advance",className:"text-[11px] rounded-full border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50 disabled:opacity-60",children:E==="advance"?"Applying...":"Apply Advances"}),!D&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:it,className:"text-[11px] rounded-full border border-red-200 bg-red-50 px-3 py-1 text-red-700 hover:bg-red-100",children:"+ Add Refund"}),o.jsx("button",{type:"button",onClick:tt,className:"text-[11px] rounded-full border border-slate-300 px-3 py-1 text-slate-700 hover:bg-slate-50",children:"+ Add Payment"})]})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-[11px] font-semibold text-slate-700",children:"Payments"}),Hp.length===0?o.jsx("p",{className:"text-[11px] text-slate-500",children:"No payments recorded."}):o.jsx("div",{className:"overflow-x-auto text-xs",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Mode"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Reference"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Notes"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Paid At"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Amount"}),o.jsx("th",{className:"px-2 py-1.5"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:Hp.map(W=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1.5 text-slate-800",children:W.mode}),o.jsx("td",{className:"px-2 py-1.5 text-slate-600",children:W.reference_no||""}),o.jsx("td",{className:"px-2 py-1.5 text-slate-600",children:W.notes||""}),o.jsx("td",{className:"px-2 py-1.5 text-slate-500",children:W.paid_at?new Date(W.paid_at).toLocaleString():""}),o.jsxs("td",{className:"px-2 py-1.5 text-right text-emerald-700 font-medium",children:[" ",Xt(W.amount)]}),o.jsx("td",{className:"px-2 py-1.5 text-right",children:!D&&o.jsx("button",{type:"button",onClick:()=>H(W),className:"text-[10px] text-red-600 hover:text-red-800",children:"Delete"})})]},W.id))})]})})]}),o.jsxs("div",{className:"space-y-1 border-t border-slate-100 pt-2",children:[o.jsx("div",{className:"text-[11px] font-semibold text-slate-700",children:"Refunds"}),Lo.length===0?o.jsx("p",{className:"text-[11px] text-slate-500",children:"No refunds recorded."}):o.jsx("div",{className:"overflow-x-auto text-xs",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Mode"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Reference"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Notes"}),o.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-slate-500",children:"Time"}),o.jsx("th",{className:"px-2 py-1.5 text-right font-medium text-slate-500",children:"Amount"}),o.jsx("th",{className:"px-2 py-1.5"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:Lo.map(W=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1.5 text-slate-800",children:W.mode}),o.jsx("td",{className:"px-2 py-1.5 text-slate-600",children:W.reference_no||""}),o.jsx("td",{className:"px-2 py-1.5 text-slate-600",children:W.notes||""}),o.jsx("td",{className:"px-2 py-1.5 text-slate-500",children:W.paid_at?new Date(W.paid_at).toLocaleString():""}),o.jsxs("td",{className:"px-2 py-1.5 text-right text-red-700 font-medium",children:[" ",Xt(W.amount)]}),o.jsx("td",{className:"px-2 py-1.5 text-right",children:!D&&o.jsx("button",{type:"button",onClick:()=>H(W),className:"text-[10px] text-red-600 hover:text-red-800",children:"Delete"})})]},W.id))})]})})]})]})]})]}),o.jsx("div",{className:"fixed inset-x-0 bottom-0 z-20 bg-white border-t border-slate-200 px-3 py-2 md:static md:border-none md:px-0 md:py-0 mt-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between text-xs",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("span",{className:"rounded-full bg-slate-100 px-2.5 py-1 text-[11px] text-slate-700",children:["Net:  ",Xt(r.net_total)]}),o.jsxs("span",{className:"rounded-full bg-emerald-50 px-2.5 py-1 text-[11px] text-emerald-700",children:["Paid:  ",Xt(r.amount_paid)]}),o.jsxs("span",{className:"rounded-full bg-red-50 px-2.5 py-1 text-[11px] text-red-700",children:["Balance:  ",Xt(r.balance_due)]})]}),o.jsx("div",{className:"flex gap-2 justify-end",children:!D&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:X,disabled:E==="cancel",className:"rounded-full border border-slate-300 px-3 py-1.5 text-xs text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-60",children:E==="cancel"?"Cancelling...":"Cancel Invoice"}),o.jsx("button",{type:"button",onClick:Te,disabled:E==="finalize",className:"rounded-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 px-4 py-1.5 text-xs font-medium text-white shadow-md hover:shadow-lg disabled:opacity-60",children:E==="finalize"?"Finalizing...":"Finalize"})]})})]})})]}),h&&!D&&o.jsx("div",{className:"fixed inset-0 z-30 flex items-end sm:items-center justify-center bg-black/40",children:o.jsxs("div",{className:"w-full sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl shadow-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Add Manual Item"}),o.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-xs text-slate-400 hover:text-slate-600",children:""})]}),o.jsxs("form",{className:"space-y-3",onSubmit:Q,children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Description"}),o.jsx("input",{type:"text",name:"description",value:g.description,onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Qty"}),o.jsx("input",{type:"number",name:"quantity",value:g.quantity,min:1,onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Unit Price"}),o.jsx("input",{type:"number",name:"unit_price",value:g.unit_price,step:"0.01",onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Tax %"}),o.jsx("input",{type:"number",name:"tax_rate",value:g.tax_rate,step:"0.1",onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Disc %"}),o.jsx("input",{type:"number",name:"discount_percent",value:g.discount_percent,step:"0.1",onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Disc Amount"}),o.jsx("input",{type:"number",name:"discount_amount",value:g.discount_amount,step:"0.01",onChange:ee,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs text-slate-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-indigo-700",children:"Add Item"})]})]})]})}),v&&!D&&o.jsx("div",{className:"fixed inset-0 z-30 flex items-end sm:items-center justify-center bg-black/40",children:o.jsxs("div",{className:"w-full sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl shadow-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Edit Item"}),o.jsx("button",{type:"button",onClick:()=>b(null),className:"text-xs text-slate-400 hover:text-slate-600",children:""})]}),o.jsxs("form",{className:"space-y-3",onSubmit:ne,children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Description"}),o.jsx("input",{type:"text",name:"description",value:w.description,onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Qty"}),o.jsx("input",{type:"number",name:"quantity",value:w.quantity,min:1,onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Unit Price"}),o.jsx("input",{type:"number",name:"unit_price",value:w.unit_price,step:"0.01",onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Tax %"}),o.jsx("input",{type:"number",name:"tax_rate",value:w.tax_rate,step:"0.1",onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Disc %"}),o.jsx("input",{type:"number",name:"discount_percent",value:w.discount_percent,step:"0.1",onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Disc Amount"}),o.jsx("input",{type:"number",name:"discount_amount",value:w.discount_amount,step:"0.01",onChange:G,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:()=>b(null),className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs text-slate-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-indigo-700",children:"Save Changes"})]})]})]})}),N&&!D&&o.jsx("div",{className:"fixed inset-0 z-30 flex items-end sm:items-center justify-center bg-black/40",children:o.jsxs("div",{className:"w-full sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl shadow-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:C?"Add Refund":"Add Payment"}),o.jsx("button",{type:"button",onClick:()=>{S(!1),P(!1)},className:"text-xs text-slate-400 hover:text-slate-600",children:""})]}),o.jsxs("form",{className:"space-y-3",onSubmit:oe,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Amount"}),o.jsx("input",{type:"number",name:"amount",value:_.amount,onChange:te,step:"0.01",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",required:!0})]}),!C&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Mode"}),o.jsxs("select",{name:"mode",value:_.mode,onChange:te,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"card",children:"Card"}),o.jsx("option",{value:"upi",children:"UPI"}),o.jsx("option",{value:"credit",children:"Credit"}),o.jsx("option",{value:"cheque",children:"Cheque"}),o.jsx("option",{value:"neft",children:"NEFT"}),o.jsx("option",{value:"rtgs",children:"RTGS"}),o.jsx("option",{value:"wallet",children:"Wallet"}),o.jsx("option",{value:"other",children:"Other"})]})]}),C&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Mode (optional)"}),o.jsx("input",{type:"text",name:"mode",value:_.mode,onChange:te,placeholder:"refund / bank / cash",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Reference No (optional)"}),o.jsx("input",{type:"text",name:"reference_no",value:_.reference_no,onChange:te,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Notes (optional)"}),o.jsx("input",{type:"text",name:"notes",value:_.notes,onChange:te,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{S(!1),P(!1)},className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs text-slate-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:`rounded-md px-3 py-1.5 text-xs font-medium text-white ${C?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:C?"Save Refund":"Save Payment"})]})]})]})})]}):o.jsx("div",{className:"min-h-[calc(100vh-4rem)] bg-slate-50 px-3 md:px-6 py-4",children:o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsx("p",{className:"text-xs text-red-600 mb-2",children:T||"Invoice not found."}),o.jsx("button",{type:"button",onClick:()=>n("/billing"),className:"text-xs text-indigo-600 hover:text-indigo-800",children:" Back to Billing Console"})]})})}function lB(t){return B.get("/emr/patients/lookup",{params:{q:t}})}function Hue({patient_id:t,uhid:n,date_from:r,date_to:s,types:a}){return B.get("/emr/timeline",{params:{patient_id:t,uhid:n,date_from:r||void 0,date_to:s||void 0,types:a&&a.length?a.join(","):void 0}})}function Wue(t){return B.post("/emr/export/pdf-json",t,{responseType:"blob"})}function Kue(t,n,r){return B.get(`/emr/fhir/${t}`,{params:{date_from:n,date_to:r}})}function que({onPick:t,placeholder:n="UHID, name, phone, email"}){const[r,s]=x.useState(""),[a,i]=x.useState([]),[l,c]=x.useState(!1);x.useEffect(()=>{let u=!0;const p=setTimeout(async()=>{if(!r||!r.trim()){i([]);return}try{c(!0);const{data:h}=await lB(r.trim());if(!u)return;i((h==null?void 0:h.results)||[])}finally{c(!1)}},250);return()=>{u=!1,clearTimeout(p)}},[r]);const d=x.useMemo(()=>a.slice(0,8),[a]);return o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Find Patient"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),o.jsx("input",{className:"w-full rounded-xl border border-gray-200 bg-white px-9 py-2 text-sm outline-none ring-blue-200 focus:ring-2",placeholder:n,value:r,onChange:u=>s(u.target.value)})]}),l&&o.jsx("div",{className:"text-xs text-gray-500",children:"Searching"}),!l&&d.length>0&&o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:d.map(u=>{var f;return o.jsxs("button",{onClick:()=>t(u),className:"rounded-xl border p-3 text-left transition hover:bg-gray-50",children:[o.jsxs("div",{className:"font-medium",children:[u.uhid,"  ",u.name]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[(f=u.gender)==null?void 0:f.toUpperCase()," ",u.dob?` ${u.dob}`:""," ",u.phone?` ${u.phone}`:""]})]},u.uhid)})}),!l&&r&&d.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No matches."})]})}const xu=[{code:"opd_visit",label:"OPD Visit",icon:ur},{code:"opd_vitals",label:"Vitals",icon:Ts},{code:"rx",label:"Prescription",icon:px},{code:"lab",label:"Lab",icon:od},{code:"radiology",label:"Radiology",icon:Mu},{code:"pharmacy",label:"Pharmacy",icon:tS},{code:"ipd_admission",label:"IPD Admit",icon:zc},{code:"ipd_transfer",label:"IPD Transfer",icon:FY},{code:"ipd_discharge",label:"IPD Discharge",icon:JX},{code:"ot",label:"OT",icon:_J},{code:"billing",label:"Billing",icon:x3},{code:"attachment",label:"Attachment",icon:m3},{code:"consent",label:"Consent",icon:No}];function Ec(t){return t<10?"0"+t:""+t}function Gue(t){const n=new Date(t);return isNaN(n)?String(t||""):`${n.getFullYear()}-${Ec(n.getMonth()+1)}-${Ec(n.getDate())} ${Ec(n.getHours())}:${Ec(n.getMinutes())}`}function Yue(t){const n=new Date(t);return isNaN(n)?"":`${n.getFullYear()}-${Ec(n.getMonth()+1)}-${Ec(n.getDate())}`}function Xue(t){const n=new Map;return t.forEach(r=>{const s=Yue(r.ts);n.has(s)||n.set(s,[]),n.get(s).push(r)}),Array.from(n.entries()).sort((r,s)=>r[0]<s[0]?1:-1)}function Jue(t,n){const r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=n,s.click(),URL.revokeObjectURL(r)}function Eh(t,n){const r=document.createElement("a");r.href=t,r.download=n||"download",r.target="_blank",r.rel="noopener",r.click()}const Que="inline-flex items-center gap-1 rounded-full border px-3 py-1 text-[11px] font-medium transition",Zue={new:"border-slate-200 bg-slate-50 text-slate-700",in_progress:"border-slate-200 bg-slate-50 text-slate-700",dispensed:"border-emerald-200 bg-emerald-50 text-emerald-700",completed:"border-emerald-200 bg-emerald-50 text-emerald-700",cancelled:"border-rose-200 bg-rose-50 text-rose-700"};function nT(t){const n=(t.content_type||"").toLowerCase(),r=String(t.url||"").toLowerCase();return n.startsWith("image/")?"image":n==="application/pdf"?"pdf":r.endsWith(".png")||r.endsWith(".jpg")||r.endsWith(".jpeg")||r.endsWith(".webp")||r.endsWith(".gif")?"image":r.endsWith(".pdf")?"pdf":"other"}function efe(){const[t,n]=x.useState(null),[r,s]=x.useState({date_from:"",date_to:"",types:xu.map(O=>O.code),consent_required:!1}),[a,i]=x.useState(!1),[l,c]=x.useState([]),[d,u]=x.useState(0),f=x.useMemo(()=>new Set(r.types||[]),[r.types]),[p,h]=x.useState(null),[m,g]=x.useState(!1),[y,v]=x.useState(null);x.useEffect(()=>()=>{p&&URL.revokeObjectURL(p)},[p]);const b=O=>{s(I=>{const L=new Set(I.types);return L.has(O)?L.delete(O):L.add(O),{...I,types:Array.from(L)}})},w=()=>s(O=>({...O,types:xu.map(I=>I.code)})),j=()=>s(O=>({...O,types:[]}));x.useEffect(()=>{let O=!0;return(async()=>{var L,D;if(!(!(t!=null&&t.uhid)&&!(t!=null&&t.id)))try{i(!0);const $={uhid:t.uhid,patient_id:t.id,date_from:r.date_from||void 0,date_to:r.date_to||void 0};r.types&&r.types.length&&r.types.length!==xu.length&&($.types=r.types.join(","));const{data:F}=await Hue($);if(!O)return;c(F||[])}catch($){console.error($),V.error(((D=(L=$==null?void 0:$.response)==null?void 0:L.data)==null?void 0:D.detail)||"Failed to load EMR timeline"),c([])}finally{i(!1)}})(),()=>{O=!1}},[t==null?void 0:t.uhid,t==null?void 0:t.id,r.date_from,r.date_to,JSON.stringify(r.types),d]);const N=x.useMemo(()=>Xue(l),[l]),S=(l==null?void 0:l.length)||0,_=r.date_from||r.date_to?`${r.date_from||""}  ${r.date_to||"Today"}`:"All available records",k=async()=>{var O,I,L;if(!t){V.info("Select a patient first.");return}try{const $={...t!=null&&t.id?{patient_id:t.id}:{uhid:t==null?void 0:t.uhid},date_from:r.date_from||null,date_to:r.date_to||null,sections:{opd:f.has("opd_visit")||f.has("opd_vitals")||f.has("rx"),ipd:f.has("ipd_admission")||f.has("ipd_transfer")||f.has("ipd_discharge"),vitals:f.has("opd_vitals"),prescriptions:f.has("rx"),lab:f.has("lab"),radiology:f.has("radiology"),pharmacy:f.has("pharmacy"),ot:f.has("ot"),billing:f.has("billing"),attachments:f.has("attachment"),consents:f.has("consent")},consent_required:!!r.consent_required},K=(await Wue($)).data;if(!(K instanceof Blob)){V.error("PDF export failed: invalid response");return}h(J=>(J&&URL.revokeObjectURL(J),URL.createObjectURL(K))),g(!0),V.success("EMR PDF ready for preview")}catch(D){((O=D==null?void 0:D.response)==null?void 0:O.status)===412?V.error("Consent required. Enable consent capture or uncheck the Require consent box."):V.error(((L=(I=D==null?void 0:D.response)==null?void 0:I.data)==null?void 0:L.detail)||"PDF export failed")}},C=async()=>{if(!(t!=null&&t.id)){V.info("Patient id required; please pick from the search list.");return}try{const{data:O}=await Kue(t.id,r.date_from||void 0,r.date_to||void 0),I=new Blob([JSON.stringify(O,null,2)],{type:"application/json"});Jue(I,`FHIR_${t.uhid||"patient"}.json`),V.success("FHIR bundle downloaded")}catch{V.error("FHIR export failed")}};function P({k:O,v:I}){return I==null||I===""?null:o.jsxs("div",{className:"text-xs text-slate-700",children:[o.jsxs("span",{className:"font-medium",children:[O,":"]})," ",String(I)]})}function E(O){const I=O.data||{};switch(O.type){case"opd_visit":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Chief Complaint",v:I.chief_complaint}),o.jsx(P,{k:"Symptoms",v:I.symptoms}),o.jsx(P,{k:"Subjective",v:I.subjective}),o.jsx(P,{k:"Objective",v:I.objective}),o.jsx(P,{k:"Assessment",v:I.assessment}),o.jsx(P,{k:"Plan",v:I.plan}),o.jsx(P,{k:"Episode",v:I.episode_id}),I.appointment&&o.jsxs("div",{className:"text-xs text-slate-700",children:[o.jsx("span",{className:"font-medium",children:"Appointment:"})," ",I.appointment.date,"  ",I.appointment.slot_start,"",I.appointment.slot_end,"  ",I.appointment.purpose]})]});case"opd_vitals":return o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-slate-800 md:grid-cols-3",children:[o.jsx(P,{k:"Recorded at",v:I.recorded_at}),o.jsx(P,{k:"Height (cm)",v:I.height_cm}),o.jsx(P,{k:"Weight (kg)",v:I.weight_kg}),o.jsx(P,{k:"BMI",v:I.bmi}),o.jsx(P,{k:"BP",v:I.bp_systolic!=null&&I.bp_diastolic!=null?`${I.bp_systolic}/${I.bp_diastolic} mmHg`:""}),o.jsx(P,{k:"Pulse",v:I.pulse}),o.jsx(P,{k:"RR",v:I.rr}),o.jsx(P,{k:"Temp (C)",v:I.temp_c}),o.jsx(P,{k:"SpO (%)",v:I.spo2}),o.jsx("div",{className:"col-span-2 md:col-span-3",children:o.jsx(P,{k:"Notes",v:I.notes})})]});case"rx":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Notes",v:I.notes}),o.jsx(P,{k:"Signed at",v:I.signed_at}),o.jsx(P,{k:"Signed by",v:I.signed_by}),Array.isArray(I.items)&&I.items.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[11px] font-medium text-slate-600 uppercase tracking-wide",children:"Items"}),o.jsx("div",{className:"mt-1 divide-y rounded-2xl border border-slate-200 bg-slate-50",children:I.items.map((L,D)=>o.jsxs("div",{className:"grid gap-2 p-2.5 md:grid-cols-5",children:[o.jsxs("div",{className:"md:col-span-2 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-900",children:L.drug_name})," ",L.strength?o.jsxs("span",{className:"text-slate-500",children:[" ",L.strength]}):null]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Freq: ",L.frequency||""]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Dur: ",L.duration_days,"d"]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Qty: ",L.quantity]})]},D))})]})]});case"lab":{const L=I.item||{};return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Order ID",v:I.order_id}),o.jsx(P,{k:"Priority",v:I.priority}),o.jsx(P,{k:"Collected at",v:I.collected_at}),o.jsx(P,{k:"Reported at",v:I.reported_at}),o.jsx(P,{k:"Test",v:`${L.test_name} (${L.test_code})`}),o.jsx(P,{k:"Unit",v:L.unit}),o.jsx(P,{k:"Normal range",v:L.normal_range}),o.jsx(P,{k:"Specimen",v:L.specimen_type}),o.jsx(P,{k:"Status",v:L.status}),o.jsx(P,{k:"Result",v:L.result_value}),o.jsx(P,{k:"Critical",v:L.is_critical?"Yes":L.is_critical===!1?"No":""}),o.jsx(P,{k:"Result at",v:L.result_at})]})}case"radiology":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Test",v:`${I.test_name} (${I.test_code})`}),o.jsx(P,{k:"Modality",v:I.modality}),o.jsx(P,{k:"Status",v:I.status}),o.jsx(P,{k:"Scheduled at",v:I.scheduled_at}),o.jsx(P,{k:"Scanned at",v:I.scanned_at}),o.jsx(P,{k:"Reported at",v:I.reported_at}),o.jsx(P,{k:"Approved at",v:I.approved_at}),o.jsx(P,{k:"Report",v:I.report_text})]});case"pharmacy":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Sale ID",v:I.sale_id}),o.jsx(P,{k:"Context",v:I.context_type}),o.jsx(P,{k:"Payment",v:I.payment_mode}),o.jsx(P,{k:"Total",v:I.total_amount}),Array.isArray(I.items)&&I.items.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[11px] font-medium text-slate-600 uppercase tracking-wide",children:"Items"}),o.jsx("div",{className:"mt-1 divide-y rounded-2xl border border-slate-200 bg-slate-50",children:I.items.map((L,D)=>o.jsxs("div",{className:"grid gap-2 p-2.5 md:grid-cols-4",children:[o.jsx("div",{className:"md:col-span-2 text-xs text-slate-800",children:L.medicine_name||`#${L.medicine_id}`}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Qty: ",L.qty]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["",L.amount]})]},D))})]})]});case"ipd_admission":return o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-slate-800 md:grid-cols-3",children:[o.jsx(P,{k:"Admission Code",v:I.admission_code}),o.jsx(P,{k:"Type",v:I.admission_type}),o.jsx(P,{k:"Admitted at",v:I.admitted_at}),o.jsx(P,{k:"Expected Discharge",v:I.expected_discharge_at}),o.jsx(P,{k:"Bed",v:I.current_bed_code}),o.jsx("div",{className:"col-span-2 md:col-span-3",children:o.jsx(P,{k:"Preliminary Diagnosis",v:I.preliminary_diagnosis})}),o.jsx("div",{className:"col-span-2 md:col-span-3",children:o.jsx(P,{k:"History",v:I.history})}),o.jsx("div",{className:"col-span-2 md:col-span-3",children:o.jsx(P,{k:"Care Plan",v:I.care_plan})})]});case"ipd_transfer":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Admission",v:I.admission_id}),o.jsx(P,{k:"From Bed",v:I.from_bed_id}),o.jsx(P,{k:"To Bed",v:I.to_bed_id}),o.jsx(P,{k:"Reason",v:I.reason}),o.jsx(P,{k:"Transferred at",v:I.transferred_at})]});case"ipd_discharge":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Finalized",v:I.finalized?"Yes":"No"}),o.jsx(P,{k:"Finalized at",v:I.finalized_at}),o.jsx(P,{k:"Demographics",v:I.demographics}),o.jsx(P,{k:"Medical History",v:I.medical_history}),o.jsx(P,{k:"Treatment Summary",v:I.treatment_summary}),o.jsx(P,{k:"Medications",v:I.medications}),o.jsx(P,{k:"Follow Up",v:I.follow_up}),o.jsx(P,{k:"ICD-10 Codes",v:I.icd10_codes})]});case"ot":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Surgery",v:I.surgery_name}),o.jsx(P,{k:"Code",v:I.surgery_code}),o.jsx(P,{k:"Estimated Cost",v:I.estimated_cost}),o.jsx(P,{k:"Scheduled",v:`${I.scheduled_start||""}  ${I.scheduled_end||""}`}),o.jsx(P,{k:"Actual",v:`${I.actual_start||""}  ${I.actual_end||""}`}),o.jsx(P,{k:"Status",v:I.status}),o.jsx(P,{k:"Pre-op Notes",v:I.preop_notes}),o.jsx(P,{k:"Post-op Notes",v:I.postop_notes})]});case"billing":return o.jsxs("div",{className:"mt-2 space-y-2 text-sm text-slate-800",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-4",children:[o.jsx(P,{k:"Invoice ID",v:I.invoice_id}),o.jsx(P,{k:"Status",v:I.status}),o.jsx(P,{k:"Net Total",v:I.net_total}),o.jsx(P,{k:"Balance",v:I.balance_due})]}),Array.isArray(I.items)&&I.items.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-medium text-slate-600 uppercase tracking-wide",children:"Items"}),o.jsx("div",{className:"mt-1 divide-y rounded-2xl border border-slate-200 bg-slate-50",children:I.items.map((L,D)=>o.jsxs("div",{className:"grid gap-2 p-2.5 md:grid-cols-6",children:[o.jsx("div",{className:"md:col-span-2 text-xs text-slate-800",children:L.description}),o.jsx("div",{className:"text-xs text-slate-600",children:L.service_type}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Qty: ",L.quantity]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Unit: ",L.unit_price]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Total: ",L.line_total]})]},D))})]}),Array.isArray(I.payments)&&I.payments.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-medium text-slate-600 uppercase tracking-wide",children:"Payments"}),o.jsx("div",{className:"mt-1 divide-y rounded-2xl border border-slate-200 bg-slate-50",children:I.payments.map((L,D)=>o.jsxs("div",{className:"grid gap-2 p-2.5 md:grid-cols-4",children:[o.jsxs("div",{className:"text-xs text-slate-600",children:["Mode: ",L.mode]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["Ref: ",L.reference_no||""]}),o.jsxs("div",{className:"text-xs text-slate-600",children:["",L.amount]}),o.jsx("div",{className:"text-xs text-slate-600",children:L.paid_at})]},D))})]})]});case"attachment":return null;case"consent":return o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-800",children:[o.jsx(P,{k:"Type",v:I.type}),o.jsx(P,{k:"Captured at",v:I.captured_at}),o.jsx(P,{k:"Text",v:I.text})]});default:return null}}const M=O=>{const I=nT(O);if(I==="other"){window.open(O.url,"_blank","noopener,noreferrer");return}v({url:O.url,label:O.label||"Attachment",kind:I})},T=()=>{v(null)},A=()=>{if(!p)return;const O=window.open(p);O&&O.addEventListener("load",()=>{O.focus(),O.print()})},R=()=>{!p||!t||Eh(p,`EMR_${t.uhid||"patient"}.pdf`)};return o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsxs("div",{className:"mx-auto max-w-6xl px-3 py-4 md:px-6 md:py-6 lg:px-8",children:[o.jsxs("div",{className:"mb-3 flex items-center justify-between gap-2",children:[o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-3 py-1 text-[10px] font-medium uppercase tracking-wide text-slate-500",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),"EMR  Patient record & timeline"]}),o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-3 py-1 text-[10px] font-medium text-slate-500",children:[o.jsx(zX,{className:"h-3 w-3"}),"Desktop workspace"]})]}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2},children:o.jsxs(Se,{className:"mb-5 rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsxs(De,{className:"flex flex-col gap-4 border-b border-slate-100 pb-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-3xl bg-slate-900 text-slate-50",children:o.jsx(ur,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-xl font-semibold text-slate-900",children:"Patient EMR Timeline"}),o.jsx(Sm,{className:"text-sm text-slate-600",children:"Unified view of OPD, IPD, lab, radiology, pharmacy, billing, attachments and consents  ready to export as a clean EMR PDF."})]})]}),o.jsxs("div",{className:"grid gap-2 text-xs text-slate-600 sm:grid-cols-3 sm:text-right",children:[o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:"Selected patient"}),o.jsx("div",{className:"mt-1 text-[13px] font-semibold text-slate-900",children:t?t.uhid:"None"}),o.jsx("div",{className:"truncate text-[11px] text-slate-500",children:t?t.name:"Use search to pick a patient"})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:"Total events"}),o.jsx("div",{className:"mt-1 text-[13px] font-semibold text-slate-900",children:S}),o.jsx("div",{className:"text-[11px] text-slate-500",children:"Across visits, orders & billing"})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-slate-500",children:"Date range"}),o.jsx("div",{className:"mt-1 text-[13px] font-semibold text-slate-900",children:_}),o.jsx("div",{className:"text-[11px] text-slate-500",children:"Filter scope for EMR export"})]})]})]}),o.jsx(Ee,{className:"pt-4",children:o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[o.jsx(Vn,{variant:"outline",className:"rounded-full border-slate-200 bg-white px-2.5 py-1 text-[10px] font-medium uppercase tracking-wide text-slate-500",children:"EMR Viewer"}),o.jsx("span",{className:"hidden text-[11px] text-slate-500 sm:inline",children:"Apply filters, review visits and export a print-aligned EMR PDF."})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"inline-flex items-center gap-1 rounded-full border-slate-200 bg-white text-xs text-slate-700 hover:bg-slate-100",onClick:()=>u(O=>O+1),children:[o.jsx(eS,{className:"h-3.5 w-3.5"}),"Refresh"]}),o.jsxs(ce,{size:"sm",className:"inline-flex items-center gap-1 rounded-full bg-slate-900 px-3 py-2 text-xs font-medium text-white hover:bg-slate-800",onClick:k,children:[o.jsx(JP,{className:"h-3.5 w-3.5"}),"Preview / Print EMR PDF"]}),o.jsxs(ce,{variant:"outline",size:"sm",className:"inline-flex items-center gap-1 rounded-full border-slate-200 bg-white text-xs text-slate-700 hover:bg-slate-100",onClick:C,children:[o.jsx(px,{className:"h-3.5 w-3.5"}),"Export FHIR (JSON)"]})]})]})})]})}),o.jsxs("div",{className:"mt-4 lg:grid lg:grid-cols-[280px,minmax(0,1fr)] lg:gap-6",children:[o.jsxs("div",{className:"mb-4 space-y-4 lg:mb-0 lg:sticky lg:top-24",children:[o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05},children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsxs(De,{className:"pb-3",children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Patient"}),o.jsx(Sm,{className:"text-xs text-slate-500",children:"Search and select a patient to view their EMR timeline."})]}),o.jsxs(Ee,{className:"space-y-3",children:[o.jsx(que,{onPick:O=>{n(O),V.success(`Selected ${O.uhid}  ${O.name}`)}}),t&&o.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-700",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[o.jsx(nS,{className:"h-3.5 w-3.5 text-slate-500"}),o.jsx("span",{className:"font-medium text-slate-900",children:t.uhid}),o.jsx(hh,{className:"h-3.5 w-3.5 text-slate-400"}),o.jsx("span",{className:"truncate",children:t.name}),t.gender&&o.jsxs(o.Fragment,{children:[o.jsx(hh,{className:"h-3.5 w-3.5 text-slate-400"}),o.jsx("span",{className:"uppercase text-slate-500",children:t.gender})]}),t.dob&&o.jsxs(o.Fragment,{children:[o.jsx(hh,{className:"h-3.5 w-3.5 text-slate-400"}),o.jsxs("span",{className:"text-slate-500",children:["DOB ",t.dob]})]}),t.phone&&o.jsxs(o.Fragment,{children:[o.jsx(hh,{className:"h-3.5 w-3.5 text-slate-400"}),o.jsx("span",{className:"text-slate-500",children:t.phone})]})]})})]})]})}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,delay:.1},children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"pb-3",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Filters"}),o.jsx(Sm,{className:"text-xs text-slate-500",children:"Date range, data types and consent requirement."})]})})}),o.jsxs(Ee,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"mb-1.5 flex items-center gap-2 text-xs font-semibold text-slate-900",children:[o.jsx(ph,{className:"h-3.5 w-3.5 text-slate-500"}),"Date range"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ph,{className:"pointer-events-none absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-slate-400"}),o.jsx(fe,{type:"date",className:"h-8 rounded-2xl border-slate-200 bg-slate-50 pl-8 pr-2 text-xs text-slate-700",value:r.date_from,onChange:O=>s(I=>({...I,date_from:O.target.value}))})]}),o.jsxs("div",{className:"relative",children:[o.jsx(ph,{className:"pointer-events-none absolute left-2.5 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-slate-400"}),o.jsx(fe,{type:"date",className:"h-8 rounded-2xl border-slate-200 bg-slate-50 pl-8 pr-2 text-xs text-slate-700",value:r.date_to,onChange:O=>s(I=>({...I,date_to:O.target.value}))})]})]}),o.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Leave blank for full EMR history."})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-900",children:[o.jsx(Pf,{className:"h-3.5 w-3.5 text-slate-500"}),"Types"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:w,className:"text-[10px] font-medium text-slate-600 hover:text-slate-900",children:"All"}),o.jsx("button",{type:"button",onClick:j,className:"text-[10px] font-medium text-slate-500 hover:text-slate-900",children:"Clear"})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:xu.map(O=>{const I=O.icon,L=f.has(O.code);return o.jsxs("button",{type:"button",onClick:()=>b(O.code),className:["inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-[10px] font-medium transition",L?"border-slate-900 bg-slate-900 text-white shadow-sm":"border-slate-200 bg-white text-slate-600 hover:bg-slate-50"].join(" "),children:[o.jsx(I,{className:"h-3 w-3"}),O.label]},O.code)})})]}),o.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsx("input",{id:"consentReq",type:"checkbox",checked:!!r.consent_required,onChange:O=>s(I=>({...I,consent_required:O.target.checked})),className:"mt-0.5 h-3.5 w-3.5 rounded border-slate-300 text-slate-900"}),o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{htmlFor:"consentReq",className:"block text-xs font-medium text-slate-900",children:"Require active consent for export"}),o.jsx("p",{className:"text-[11px] text-slate-500",children:"When enabled, EMR PDF export is blocked unless a valid patient consent record exists."})]})]})]})]})})]}),o.jsx(ge.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,delay:.08},className:"space-y-4",children:o.jsxs(Se,{className:"rounded-3xl border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ur,{className:"h-4 w-4 text-slate-500"}),o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Timeline"})]}),o.jsx("span",{className:"text-[11px] text-slate-500",children:"Sorted newest to oldest"})]})}),o.jsxs(Ee,{children:[a&&o.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((O,I)=>o.jsx(He,{className:"h-16 w-full rounded-2xl bg-slate-100"},I))}),!a&&(!l||l.length===0)&&o.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-6 py-8 text-center",children:[o.jsx("div",{className:"mx-auto mb-2 flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-500",children:o.jsx(ur,{className:"h-4 w-4"})}),o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"No EMR events to display"}),o.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Pick a patient and adjust the date range or type filters to load their EMR timeline."})]}),!a&&l&&l.length>0&&o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-px bg-gradient-to-b from-slate-200 via-slate-200/70 to-transparent"}),o.jsx("div",{className:"space-y-6",children:N.map(([O,I])=>o.jsxs("div",{className:"relative pl-10",children:[o.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-[11px] font-medium text-slate-700",children:[o.jsx(ph,{className:"h-3.5 w-3.5 text-slate-500"}),O]}),o.jsx("div",{className:"space-y-3",children:I.map((L,D)=>{var J,Y;const $=[L.doctor_name?`Dr. ${L.doctor_name}`:null,L.department_name||null,L.location_name||null].filter(Boolean).join("  "),F=((J=xu.find(ee=>ee.code===L.type))==null?void 0:J.icon)||px,K=L.status&&(Zue[L.status]||"border-slate-200 bg-slate-50 text-slate-600");return o.jsxs(ge.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15},className:"relative",children:[o.jsx("div",{className:"absolute -left-[9px] top-4 h-2.5 w-2.5 rounded-full border border-slate-200 bg-white"}),o.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3.5 hover:shadow-[0_4px_12px_rgba(15,23,42,0.06)]",children:o.jsx("div",{className:"flex items-start justify-between gap-3",children:o.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[o.jsx("div",{className:"mt-0.5 flex h-8 w-8 items-center justify-center rounded-2xl bg-slate-900 text-slate-50",children:o.jsx(F,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:L.title||"Event"}),o.jsx("div",{className:"text-[11px] text-slate-500",children:Gue(L.ts)}),L.status&&o.jsx("span",{className:`${Que} ${K}`,children:L.status})]}),$&&o.jsx("div",{className:"mt-0.5 text-[11px] text-slate-500",children:$}),E(L),((Y=L.attachments)==null?void 0:Y.length)>0&&o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.attachments.map((ee,Q)=>{const ue=nT(ee);return o.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-[10px]",children:[o.jsxs("button",{type:"button",onClick:()=>M(ee),className:"inline-flex items-center gap-1 text-slate-700 hover:text-slate-900",children:[o.jsx(p3,{className:"h-3 w-3"}),ee.label||"attachment"]}),o.jsxs("button",{type:"button",onClick:()=>Eh(ee.url,ee.label||"attachment"),className:"inline-flex items-center gap-1 text-slate-400 hover:text-slate-700",children:[o.jsx(Xu,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),o.jsx("span",{className:"text-[9px] uppercase text-slate-400",children:ue})]},Q)})})]})]})})})]},`${L.type}-${String(L.ts)}-${D}`)})})]},O))})]})]})]})})]})]}),m&&p&&o.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60",children:o.jsxs("div",{className:"relative flex h-[90vh] w-[95vw] max-w-6xl flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"EMR PDF Preview"}),t&&o.jsxs("div",{className:"text-[11px] text-slate-500",children:[t.uhid,"  ",t.name]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"inline-flex items-center gap-1 rounded-full border-slate-200 bg-white text-[11px] text-slate-700 hover:bg-slate-100",onClick:R,children:[o.jsx(Xu,{className:"h-3 w-3"}),"Download"]}),o.jsxs(ce,{size:"sm",className:"inline-flex items-center gap-1 rounded-full bg-slate-900 px-3 py-1.5 text-[11px] text-white hover:bg-slate-800",onClick:A,children:[o.jsx(JP,{className:"h-3 w-3"}),"Print"]}),o.jsx("button",{type:"button",onClick:()=>g(!1),className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200",children:o.jsx(Is,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"flex-1 bg-slate-100",children:o.jsx("iframe",{src:p,title:"EMR PDF",className:"h-full w-full"})})]})}),y&&o.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60",children:o.jsxs("div",{className:"relative flex h-[90vh] w-[95vw] max-w-4xl flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:y.label}),o.jsxs("div",{className:"text-[11px] uppercase text-slate-400",children:[y.kind," preview"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",className:"inline-flex items-center gap-1 rounded-full border-slate-200 bg-white text-[11px] text-slate-700 hover:bg-slate-100",onClick:()=>Eh(y.url,y.label),children:[o.jsx(Xu,{className:"h-3 w-3"}),"Download"]}),o.jsx("button",{type:"button",onClick:T,className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200",children:o.jsx(Is,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex-1 bg-slate-100",children:[y.kind==="image"&&o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-auto bg-black",children:o.jsx("img",{src:y.url,alt:y.label,className:"max-h-full max-w-full object-contain"})}),y.kind==="pdf"&&o.jsx("iframe",{src:y.url,title:y.label,className:"h-full w-full"}),y.kind==="other"&&o.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 p-6 text-center text-sm text-slate-600",children:[o.jsx("p",{children:"This file type cant be previewed here. You can open it in a new tab or download it."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{size:"sm",className:"rounded-full bg-slate-900 px-4 py-1 text-[11px] text-white hover:bg-slate-800",onClick:()=>window.open(y.url,"_blank","noopener,noreferrer"),children:"Open in new tab"}),o.jsx(ce,{variant:"outline",size:"sm",className:"rounded-full border-slate-200 bg-white px-4 py-1 text-[11px] text-slate-700 hover:bg-slate-100",onClick:()=>Eh(y.url,y.label),children:"Download"})]})]})]})]})})]})}const vk=(t={})=>B.get("/templates/templates",{params:t}),tfe=t=>B.get(`/templates/templates/${t}`),nfe=t=>B.post("/templates/templates",t),rfe=(t,n)=>B.patch(`/templates/templates/${t}`,n),sfe=t=>B.delete(`/templates/templates/${t}`),cB=(t,n,r=null)=>B.post(`/templates/templates/${t}/render-html`,r?{data:r}:{},{params:{patient_id:n}}),afe=async(t,n)=>(await B.get(`/templates/templates/${t}/pdf`,{params:{patient_id:n,inline:!1},responseType:"blob"})).data,ife=async(t,n)=>(await B.post(`/templates/templates/${t}/pdf`,n,{responseType:"blob"})).data,ofe=(t,n)=>B.post(`/templates/patients/${t}/consents`,n),lfe=t=>B.get(`/templates/patients/${t}/consents`),cfe=async t=>{const n=new FormData;return n.append("file",t),(await B.post("/files/upload",n,{headers:{"Content-Type":"multipart/form-data"}})).data};function dfe(){const[t,n]=x.useState([]),[r,s]=x.useState(""),[a,i]=x.useState(""),[l,c]=x.useState(!1),d=async()=>{c(!0);try{const p=await vk({q:r,category:a||void 0});n(p.data||[])}finally{c(!1)}};x.useEffect(()=>{d()},[]);const u=async p=>{p.preventDefault(),d()},f=async p=>{if(confirm("Delete this template?"))try{await sfe(p),V.success("Deleted"),d()}catch{}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between gap-2",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Templates"}),o.jsx(Os,{to:"/templates/new",className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm",children:"New Template"})]}),o.jsxs("form",{onSubmit:u,className:"mb-3 flex flex-wrap gap-2",children:[o.jsx("input",{value:r,onChange:p=>s(p.target.value),placeholder:"Search name/code...",className:"border rounded px-3 py-2 text-sm"}),o.jsxs("select",{value:a,onChange:p=>i(p.target.value),className:"border rounded px-3 py-2 text-sm",children:[o.jsx("option",{value:"",children:"All"}),o.jsx("option",{value:"report",children:"Report"}),o.jsx("option",{value:"consent",children:"Consent"})]}),o.jsx("button",{className:"px-3 py-2 border rounded text-sm",children:"Filter"})]}),o.jsx("div",{className:"overflow-x-auto bg-white border rounded-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Category"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Version"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[t.map(p=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:p.id}),o.jsx("td",{className:"px-3 py-2",children:p.name}),o.jsx("td",{className:"px-3 py-2",children:p.code}),o.jsx("td",{className:"px-3 py-2 capitalize",children:p.category}),o.jsx("td",{className:"px-3 py-2",children:p.version}),o.jsxs("td",{className:"px-3 py-2 text-right",children:[o.jsx(Os,{to:`/templates/${p.id}/edit`,className:"px-2 py-1 text-blue-700 hover:underline",children:"Edit"}),o.jsx("button",{onClick:()=>f(p.id),className:"px-2 py-1 text-red-600 hover:underline",children:"Delete"})]})]},p.id)),t.length===0&&!l&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:"No templates"})})]})]})})]})}const rT=["system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif","Arial, Helvetica, sans-serif","'Times New Roman', Times, serif","'Georgia', serif","'Courier New', Courier, monospace","'Inter', system-ui, -apple-system, sans-serif"],sT=["#000000","#444444","#666666","#999999","#CCCCCC","#EEEEEE","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB"];function tb({value:t,onChange:n}){const r=x.useRef(null),s=x.useRef(null),[a,i]=x.useState(rT[0]);x.useEffect(()=>{r.current&&r.current.innerHTML!==(t||"")&&(r.current.innerHTML=t||"")},[t]);const l=()=>{var k;return((k=r.current)==null?void 0:k.innerHTML)||""},c=()=>n&&n(l()),d=k=>{document.execCommand("styleWithCSS",!1,!0);const C=window.getSelection();if(!C||C.rangeCount===0)return;const P=C.getRangeAt(0),E=document.createElement("span");Object.entries(k).forEach(([M,T])=>E.style[M]=T),P.surroundContents(E),c()},u=(k,C=null)=>{document.execCommand("styleWithCSS",!1,!0),document.execCommand(k,!1,C),c()},f=(k,C="",P=null)=>{const E=window.getSelection();if(!E||E.rangeCount===0)return;const M=E.getRangeAt(0),T=document.createElement(k);C&&(T.className=C),P&&Object.entries(P).forEach(([A,R])=>T.style[A]=R),M.surroundContents(T),c()},p=()=>{var k;return(k=s.current)==null?void 0:k.click()},h=async k=>{var P,E;const C=(P=k.target.files)==null?void 0:P[0];if(C)try{const M=await cfe(C),T="".replace(/\/$/,""),A=M.file_url_abs?M.file_url_abs:(E=M.file_url)!=null&&E.startsWith("http")?M.file_url:`${T}${M.file_url}`;m(`<img src="${A}" alt="${M.original_name||""}" style="max-width:100%;">`)}catch{V.error("Upload failed")}finally{k.target.value=""}},m=k=>{var C;(C=r.current)==null||C.focus(),document.execCommand("insertHTML",!1,k),c()},g=()=>{var T;const k=window.getSelection();if(!k||k.rangeCount===0)return null;const C=k.getRangeAt(0),P=C.commonAncestorContainer.nodeType===1?C.commonAncestorContainer:C.commonAncestorContainer.parentNode;if(!P)return null;const E=P.querySelectorAll?P.querySelectorAll("img"):[],M=(T=k.anchorNode)==null?void 0:T.parentNode;if(M&&M.tagName==="IMG")return M;if(M!=null&&M.closest){const A=M.closest("img");if(A)return A}return E.length?E[0]:null},y=k=>{const C=g();if(!C)return V.info("Select an image first");C.style.width=k,k==="100%"&&(C.style.maxWidth="100%"),c()},v=k=>{const C=g();if(!C)return V.info("Select an image first");C.classList.remove("float-left","float-right","img-center"),C.style.removeProperty("float"),C.style.removeProperty("display"),C.style.removeProperty("margin-left"),C.style.removeProperty("margin-right"),k==="left"&&C.classList.add("float-left"),k==="right"&&C.classList.add("float-right"),k==="center"&&C.classList.add("img-center"),c()},b=k=>{var E,M;const C=window.getSelection();if(!C||C.rangeCount===0)return null;let P=((E=C.anchorNode)==null?void 0:E.nodeType)===1?C.anchorNode:(M=C.anchorNode)==null?void 0:M.parentNode;for(;P;){if(P.tagName&&k.includes(P.tagName))return P;P=P.parentNode}return null},w=k=>{var P;const C=b(["TABLE"])||((P=b(["TD","TH"]))==null?void 0:P.closest("TABLE"));if(!C)return V.info("Place caret inside a table");C.classList.remove("tbl-border-all","tbl-border-h","tbl-border-v","tbl-border-none"),C.removeAttribute("border"),C.style.borderCollapse="collapse",C.querySelectorAll("th,td").forEach(E=>{E.style.border="",E.style.borderTop="",E.style.borderBottom="",E.style.borderLeft="",E.style.borderRight=""}),k==="all"&&C.classList.add("tbl-border-all"),k==="h"&&C.classList.add("tbl-border-h"),k==="v"&&C.classList.add("tbl-border-v"),k==="none"&&C.classList.add("tbl-border-none"),c()},j=()=>{const k=b(["TD","TH"]);if(!k)return V.info("Place caret inside a row");k.closest("tr").classList.toggle("tr-shade"),c()},N=k=>{f("div",k===2?"cols-2":"cols-3")},S=k=>{k.preventDefault();const C=k.clipboardData.getData("text/plain");document.execCommand("insertText",!1,C),c()},_=k=>{k.preventDefault();const C=k.dataTransfer.getData("text/x-token")||k.dataTransfer.getData("text/plain");if(C){m(C);return}const P=k.dataTransfer.getData("text");P&&document.execCommand("insertText",!1,P),c()};return o.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border-b bg-gray-50",children:[o.jsx("select",{className:"text-sm border rounded px-2 py-1",value:a,onChange:k=>{i(k.target.value),d({fontFamily:k.target.value})},title:"Font family",children:rT.map(k=>o.jsx("option",{value:k,children:k.split(",")[0].replace(/['"]/g,"")},k))}),o.jsx("select",{className:"text-sm border rounded px-2 py-1",onChange:k=>d({fontSize:k.target.value}),children:["10px","12px","14px","16px","18px","20px","24px"].map(k=>o.jsx("option",{value:k,children:k},k))}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("bold"),children:o.jsx("b",{children:"B"})}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("italic"),children:o.jsx("i",{children:"I"})}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("underline"),children:o.jsx("u",{children:"U"})}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyLeft"),children:"Left"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyCenter"),children:"Center"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyRight"),children:"Right"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>f("span","text-justify"),children:"Justify"}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Text"}),sT.map(k=>o.jsx("button",{className:"w-4 h-4 rounded border",style:{background:k},onClick:()=>u("foreColor",k)},"fg"+k))]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500 ml-2 mr-1",children:"Highlight"}),sT.map(k=>o.jsx("button",{className:"w-4 h-4 rounded border",style:{background:k},onClick:()=>u("hiliteColor",k)},"bg"+k))]}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("insertUnorderedList"),children:" List"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("insertOrderedList"),children:"1. List"}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:p,children:"Image"}),o.jsx("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:h}),o.jsxs("select",{className:"text-sm border rounded px-2 py-1",onChange:k=>y(k.target.value),defaultValue:"",children:[o.jsx("option",{value:"",disabled:!0,children:"Img Width"}),o.jsx("option",{value:"25%",children:"25%"}),o.jsx("option",{value:"33%",children:"33%"}),o.jsx("option",{value:"50%",children:"50%"}),o.jsx("option",{value:"75%",children:"75%"}),o.jsx("option",{value:"100%",children:"100%"})]}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("left"),children:"Img Left"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("center"),children:"Img Center"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("right"),children:"Img Right"}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>N(2),children:"2 Columns"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>N(3),children:"3 Columns"}),o.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>m("<table><tr><th>Header</th><th>Header</th></tr><tr><td>Cell</td><td>Cell</td></tr></table>"),children:"Insert Table"}),o.jsxs("select",{className:"text-sm border rounded px-2 py-1",onChange:k=>w(k.target.value),defaultValue:"",children:[o.jsx("option",{value:"",disabled:!0,children:"Borders"}),o.jsx("option",{value:"all",children:"All borders"}),o.jsx("option",{value:"h",children:"Horizontal only"}),o.jsx("option",{value:"v",children:"Vertical only"}),o.jsx("option",{value:"none",children:"No borders"})]}),o.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:j,children:"Shade Row"})]}),o.jsx("div",{ref:r,className:"min-h-[320px] p-3 prose max-w-none focus:outline-none",contentEditable:!0,onInput:c,onPaste:S,suppressContentEditableWarning:!0,spellCheck:!1}),o.jsx("div",{ref:r,className:"min-h-[320px] p-3 prose max-w-none focus:outline-none",contentEditable:!0,onInput:c,onPaste:S,onDragOver:k=>k.preventDefault(),onDrop:_,suppressContentEditableWarning:!0,spellCheck:!1}),o.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-500 border-t bg-gray-50",children:"Tip: select an image to resize/align; use columns for magazine-style layouts."})]})}function Nn(t){this.content=t}Nn.prototype={constructor:Nn,find:function(t){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===t)return n;return-1},get:function(t){var n=this.find(t);return n==-1?void 0:this.content[n+1]},update:function(t,n,r){var s=r&&r!=t?this.remove(r):this,a=s.find(t),i=s.content.slice();return a==-1?i.push(r||t,n):(i[a+1]=n,r&&(i[a]=r)),new Nn(i)},remove:function(t){var n=this.find(t);if(n==-1)return this;var r=this.content.slice();return r.splice(n,2),new Nn(r)},addToStart:function(t,n){return new Nn([t,n].concat(this.remove(t).content))},addToEnd:function(t,n){var r=this.remove(t).content.slice();return r.push(t,n),new Nn(r)},addBefore:function(t,n,r){var s=this.remove(n),a=s.content.slice(),i=s.find(t);return a.splice(i==-1?a.length:i,0,n,r),new Nn(a)},forEach:function(t){for(var n=0;n<this.content.length;n+=2)t(this.content[n],this.content[n+1])},prepend:function(t){return t=Nn.from(t),t.size?new Nn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Nn.from(t),t.size?new Nn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var n=this;t=Nn.from(t);for(var r=0;r<t.content.length;r+=2)n=n.remove(t.content[r]);return n},toObject:function(){var t={};return this.forEach(function(n,r){t[n]=r}),t},get size(){return this.content.length>>1}};Nn.from=function(t){if(t instanceof Nn)return t;var n=[];if(t)for(var r in t)n.push(r,t[r]);return new Nn(n)};function dB(t,n,r){for(let s=0;;s++){if(s==t.childCount||s==n.childCount)return t.childCount==n.childCount?null:r;let a=t.child(s),i=n.child(s);if(a==i){r+=a.nodeSize;continue}if(!a.sameMarkup(i))return r;if(a.isText&&a.text!=i.text){for(let l=0;a.text[l]==i.text[l];l++)r++;return r}if(a.content.size||i.content.size){let l=dB(a.content,i.content,r+1);if(l!=null)return l}r+=a.nodeSize}}function uB(t,n,r,s){for(let a=t.childCount,i=n.childCount;;){if(a==0||i==0)return a==i?null:{a:r,b:s};let l=t.child(--a),c=n.child(--i),d=l.nodeSize;if(l==c){r-=d,s-=d;continue}if(!l.sameMarkup(c))return{a:r,b:s};if(l.isText&&l.text!=c.text){let u=0,f=Math.min(l.text.length,c.text.length);for(;u<f&&l.text[l.text.length-u-1]==c.text[c.text.length-u-1];)u++,r--,s--;return{a:r,b:s}}if(l.content.size||c.content.size){let u=uB(l.content,c.content,r-1,s-1);if(u)return u}r-=d,s-=d}}class Z{constructor(n,r){if(this.content=n,this.size=r||0,r==null)for(let s=0;s<n.length;s++)this.size+=n[s].nodeSize}nodesBetween(n,r,s,a=0,i){for(let l=0,c=0;c<r;l++){let d=this.content[l],u=c+d.nodeSize;if(u>n&&s(d,a+c,i||null,l)!==!1&&d.content.size){let f=c+1;d.nodesBetween(Math.max(0,n-f),Math.min(d.content.size,r-f),s,a+f)}c=u}}descendants(n){this.nodesBetween(0,this.size,n)}textBetween(n,r,s,a){let i="",l=!0;return this.nodesBetween(n,r,(c,d)=>{let u=c.isText?c.text.slice(Math.max(n,d)-d,r-d):c.isLeaf?a?typeof a=="function"?a(c):a:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&u||c.isTextblock)&&s&&(l?l=!1:i+=s),i+=u},0),i}append(n){if(!n.size)return this;if(!this.size)return n;let r=this.lastChild,s=n.firstChild,a=this.content.slice(),i=0;for(r.isText&&r.sameMarkup(s)&&(a[a.length-1]=r.withText(r.text+s.text),i=1);i<n.content.length;i++)a.push(n.content[i]);return new Z(a,this.size+n.size)}cut(n,r=this.size){if(n==0&&r==this.size)return this;let s=[],a=0;if(r>n)for(let i=0,l=0;l<r;i++){let c=this.content[i],d=l+c.nodeSize;d>n&&((l<n||d>r)&&(c.isText?c=c.cut(Math.max(0,n-l),Math.min(c.text.length,r-l)):c=c.cut(Math.max(0,n-l-1),Math.min(c.content.size,r-l-1))),s.push(c),a+=c.nodeSize),l=d}return new Z(s,a)}cutByIndex(n,r){return n==r?Z.empty:n==0&&r==this.content.length?this:new Z(this.content.slice(n,r))}replaceChild(n,r){let s=this.content[n];if(s==r)return this;let a=this.content.slice(),i=this.size+r.nodeSize-s.nodeSize;return a[n]=r,new Z(a,i)}addToStart(n){return new Z([n].concat(this.content),this.size+n.nodeSize)}addToEnd(n){return new Z(this.content.concat(n),this.size+n.nodeSize)}eq(n){if(this.content.length!=n.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(n.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(n){let r=this.content[n];if(!r)throw new RangeError("Index "+n+" out of range for "+this);return r}maybeChild(n){return this.content[n]||null}forEach(n){for(let r=0,s=0;r<this.content.length;r++){let a=this.content[r];n(a,s,r),s+=a.nodeSize}}findDiffStart(n,r=0){return dB(this,n,r)}findDiffEnd(n,r=this.size,s=n.size){return uB(this,n,r,s)}findIndex(n){if(n==0)return Th(0,n);if(n==this.size)return Th(this.content.length,n);if(n>this.size||n<0)throw new RangeError(`Position ${n} outside of fragment (${this})`);for(let r=0,s=0;;r++){let a=this.child(r),i=s+a.nodeSize;if(i>=n)return i==n?Th(r+1,i):Th(r,s);s=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(n,r){if(!r)return Z.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(r.map(n.nodeFromJSON))}static fromArray(n){if(!n.length)return Z.empty;let r,s=0;for(let a=0;a<n.length;a++){let i=n[a];s+=i.nodeSize,a&&i.isText&&n[a-1].sameMarkup(i)?(r||(r=n.slice(0,a)),r[r.length-1]=i.withText(r[r.length-1].text+i.text)):r&&r.push(i)}return new Z(r||n,s)}static from(n){if(!n)return Z.empty;if(n instanceof Z)return n;if(Array.isArray(n))return this.fromArray(n);if(n.attrs)return new Z([n],n.nodeSize);throw new RangeError("Can not convert "+n+" to a Fragment"+(n.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const nb={index:0,offset:0};function Th(t,n){return nb.index=t,nb.offset=n,nb}function Px(t,n){if(t===n)return!0;if(!(t&&typeof t=="object")||!(n&&typeof n=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(n)!=r)return!1;if(r){if(t.length!=n.length)return!1;for(let s=0;s<t.length;s++)if(!Px(t[s],n[s]))return!1}else{for(let s in t)if(!(s in n)||!Px(t[s],n[s]))return!1;for(let s in n)if(!(s in t))return!1}return!0}let ft=class Ij{constructor(n,r){this.type=n,this.attrs=r}addToSet(n){let r,s=!1;for(let a=0;a<n.length;a++){let i=n[a];if(this.eq(i))return n;if(this.type.excludes(i.type))r||(r=n.slice(0,a));else{if(i.type.excludes(this.type))return n;!s&&i.type.rank>this.type.rank&&(r||(r=n.slice(0,a)),r.push(this),s=!0),r&&r.push(i)}}return r||(r=n.slice()),s||r.push(this),r}removeFromSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return n.slice(0,r).concat(n.slice(r+1));return n}isInSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return!0;return!1}eq(n){return this==n||this.type==n.type&&Px(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let r in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let s=n.marks[r.type];if(!s)throw new RangeError(`There is no mark type ${r.type} in this schema`);let a=s.create(r.attrs);return s.checkAttrs(a.attrs),a}static sameSet(n,r){if(n==r)return!0;if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++)if(!n[s].eq(r[s]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return Ij.none;if(n instanceof Ij)return[n];let r=n.slice();return r.sort((s,a)=>s.type.rank-a.type.rank),r}};ft.none=[];class Ax extends Error{}class de{constructor(n,r,s){this.content=n,this.openStart=r,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(n,r){let s=pB(this.content,n+this.openStart,r);return s&&new de(s,this.openStart,this.openEnd)}removeBetween(n,r){return new de(fB(this.content,n+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(n){return this.content.eq(n.content)&&this.openStart==n.openStart&&this.openEnd==n.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let n={content:this.content.toJSON()};return this.openStart>0&&(n.openStart=this.openStart),this.openEnd>0&&(n.openEnd=this.openEnd),n}static fromJSON(n,r){if(!r)return de.empty;let s=r.openStart||0,a=r.openEnd||0;if(typeof s!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new de(Z.fromJSON(n,r.content),s,a)}static maxOpen(n,r=!0){let s=0,a=0;for(let i=n.firstChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.firstChild)s++;for(let i=n.lastChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.lastChild)a++;return new de(n,s,a)}}de.empty=new de(Z.empty,0,0);function fB(t,n,r){let{index:s,offset:a}=t.findIndex(n),i=t.maybeChild(s),{index:l,offset:c}=t.findIndex(r);if(a==n||i.isText){if(c!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(s!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(s,i.copy(fB(i.content,n-a-1,r-a-1)))}function pB(t,n,r,s){let{index:a,offset:i}=t.findIndex(n),l=t.maybeChild(a);if(i==n||l.isText)return s&&!s.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));let c=pB(l.content,n-i-1,r,l);return c&&t.replaceChild(a,l.copy(c))}function ufe(t,n,r){if(r.openStart>t.depth)throw new Ax("Inserted content deeper than insertion position");if(t.depth-r.openStart!=n.depth-r.openEnd)throw new Ax("Inconsistent open depths");return hB(t,n,r,0)}function hB(t,n,r,s){let a=t.index(s),i=t.node(s);if(a==n.index(s)&&s<t.depth-r.openStart){let l=hB(t,n,r,s+1);return i.copy(i.content.replaceChild(a,l))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==s&&n.depth==s){let l=t.parent,c=l.content;return ul(l,c.cut(0,t.parentOffset).append(r.content).append(c.cut(n.parentOffset)))}else{let{start:l,end:c}=ffe(r,t);return ul(i,xB(t,l,c,n,s))}else return ul(i,Ex(t,n,s))}function mB(t,n){if(!n.type.compatibleContent(t.type))throw new Ax("Cannot join "+n.type.name+" onto "+t.type.name)}function Dj(t,n,r){let s=t.node(r);return mB(s,n.node(r)),s}function dl(t,n){let r=n.length-1;r>=0&&t.isText&&t.sameMarkup(n[r])?n[r]=t.withText(n[r].text+t.text):n.push(t)}function sf(t,n,r,s){let a=(n||t).node(r),i=0,l=n?n.index(r):a.childCount;t&&(i=t.index(r),t.depth>r?i++:t.textOffset&&(dl(t.nodeAfter,s),i++));for(let c=i;c<l;c++)dl(a.child(c),s);n&&n.depth==r&&n.textOffset&&dl(n.nodeBefore,s)}function ul(t,n){return t.type.checkContent(n),t.copy(n)}function xB(t,n,r,s,a){let i=t.depth>a&&Dj(t,n,a+1),l=s.depth>a&&Dj(r,s,a+1),c=[];return sf(null,t,a,c),i&&l&&n.index(a)==r.index(a)?(mB(i,l),dl(ul(i,xB(t,n,r,s,a+1)),c)):(i&&dl(ul(i,Ex(t,n,a+1)),c),sf(n,r,a,c),l&&dl(ul(l,Ex(r,s,a+1)),c)),sf(s,null,a,c),new Z(c)}function Ex(t,n,r){let s=[];if(sf(null,t,r,s),t.depth>r){let a=Dj(t,n,r+1);dl(ul(a,Ex(t,n,r+1)),s)}return sf(n,null,r,s),new Z(s)}function ffe(t,n){let r=n.depth-t.openStart,a=n.node(r).copy(t.content);for(let i=r-1;i>=0;i--)a=n.node(i).copy(Z.from(a));return{start:a.resolveNoCache(t.openStart+r),end:a.resolveNoCache(a.content.size-t.openEnd-r)}}class $f{constructor(n,r,s){this.pos=n,this.path=r,this.parentOffset=s,this.depth=r.length/3-1}resolveDepth(n){return n==null?this.depth:n<0?this.depth+n:n}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(n){return this.path[this.resolveDepth(n)*3]}index(n){return this.path[this.resolveDepth(n)*3+1]}indexAfter(n){return n=this.resolveDepth(n),this.index(n)+(n==this.depth&&!this.textOffset?0:1)}start(n){return n=this.resolveDepth(n),n==0?0:this.path[n*3-1]+1}end(n){return n=this.resolveDepth(n),this.start(n)+this.node(n).content.size}before(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position before the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]}after(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position after the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]+this.path[n*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let n=this.parent,r=this.index(this.depth);if(r==n.childCount)return null;let s=this.pos-this.path[this.path.length-1],a=n.child(r);return s?n.child(r).cut(s):a}get nodeBefore(){let n=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(n).cut(0,r):n==0?null:this.parent.child(n-1)}posAtIndex(n,r){r=this.resolveDepth(r);let s=this.path[r*3],a=r==0?0:this.path[r*3-1]+1;for(let i=0;i<n;i++)a+=s.child(i).nodeSize;return a}marks(){let n=this.parent,r=this.index();if(n.content.size==0)return ft.none;if(this.textOffset)return n.child(r).marks;let s=n.maybeChild(r-1),a=n.maybeChild(r);if(!s){let c=s;s=a,a=c}let i=s.marks;for(var l=0;l<i.length;l++)i[l].type.spec.inclusive===!1&&(!a||!i[l].isInSet(a.marks))&&(i=i[l--].removeFromSet(i));return i}marksAcross(n){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let s=r.marks,a=n.parent.maybeChild(n.index());for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!a||!s[i].isInSet(a.marks))&&(s=s[i--].removeFromSet(s));return s}sharedDepth(n){for(let r=this.depth;r>0;r--)if(this.start(r)<=n&&this.end(r)>=n)return r;return 0}blockRange(n=this,r){if(n.pos<this.pos)return n.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==n.pos?1:0);s>=0;s--)if(n.pos<=this.end(s)&&(!r||r(this.node(s))))return new Tx(this,n,s);return null}sameParent(n){return this.pos-this.parentOffset==n.pos-n.parentOffset}max(n){return n.pos>this.pos?n:this}min(n){return n.pos<this.pos?n:this}toString(){let n="";for(let r=1;r<=this.depth;r++)n+=(n?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return n+":"+this.parentOffset}static resolve(n,r){if(!(r>=0&&r<=n.content.size))throw new RangeError("Position "+r+" out of range");let s=[],a=0,i=r;for(let l=n;;){let{index:c,offset:d}=l.content.findIndex(i),u=i-d;if(s.push(l,c,a+d),!u||(l=l.child(c),l.isText))break;i=u-1,a+=d+1}return new $f(r,s,i)}static resolveCached(n,r){let s=aT.get(n);if(s)for(let i=0;i<s.elts.length;i++){let l=s.elts[i];if(l.pos==r)return l}else aT.set(n,s=new pfe);let a=s.elts[s.i]=$f.resolve(n,r);return s.i=(s.i+1)%hfe,a}}class pfe{constructor(){this.elts=[],this.i=0}}const hfe=12,aT=new WeakMap;class Tx{constructor(n,r,s){this.$from=n,this.$to=r,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const mfe=Object.create(null);let no=class Lj{constructor(n,r,s,a=ft.none){this.type=n,this.attrs=r,this.marks=a,this.content=s||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(n){return this.content.child(n)}maybeChild(n){return this.content.maybeChild(n)}forEach(n){this.content.forEach(n)}nodesBetween(n,r,s,a=0){this.content.nodesBetween(n,r,s,a,this)}descendants(n){this.nodesBetween(0,this.content.size,n)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(n,r,s,a){return this.content.textBetween(n,r,s,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(n){return this==n||this.sameMarkup(n)&&this.content.eq(n.content)}sameMarkup(n){return this.hasMarkup(n.type,n.attrs,n.marks)}hasMarkup(n,r,s){return this.type==n&&Px(this.attrs,r||n.defaultAttrs||mfe)&&ft.sameSet(this.marks,s||ft.none)}copy(n=null){return n==this.content?this:new Lj(this.type,this.attrs,n,this.marks)}mark(n){return n==this.marks?this:new Lj(this.type,this.attrs,this.content,n)}cut(n,r=this.content.size){return n==0&&r==this.content.size?this:this.copy(this.content.cut(n,r))}slice(n,r=this.content.size,s=!1){if(n==r)return de.empty;let a=this.resolve(n),i=this.resolve(r),l=s?0:a.sharedDepth(r),c=a.start(l),u=a.node(l).content.cut(a.pos-c,i.pos-c);return new de(u,a.depth-l,i.depth-l)}replace(n,r,s){return ufe(this.resolve(n),this.resolve(r),s)}nodeAt(n){for(let r=this;;){let{index:s,offset:a}=r.content.findIndex(n);if(r=r.maybeChild(s),!r)return null;if(a==n||r.isText)return r;n-=a+1}}childAfter(n){let{index:r,offset:s}=this.content.findIndex(n);return{node:this.content.maybeChild(r),index:r,offset:s}}childBefore(n){if(n==0)return{node:null,index:0,offset:0};let{index:r,offset:s}=this.content.findIndex(n);if(s<n)return{node:this.content.child(r),index:r,offset:s};let a=this.content.child(r-1);return{node:a,index:r-1,offset:s-a.nodeSize}}resolve(n){return $f.resolveCached(this,n)}resolveNoCache(n){return $f.resolve(this,n)}rangeHasMark(n,r,s){let a=!1;return r>n&&this.nodesBetween(n,r,i=>(s.isInSet(i.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let n=this.type.name;return this.content.size&&(n+="("+this.content.toStringInner()+")"),gB(this.marks,n)}contentMatchAt(n){let r=this.type.contentMatch.matchFragment(this.content,0,n);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(n,r,s=Z.empty,a=0,i=s.childCount){let l=this.contentMatchAt(n).matchFragment(s,a,i),c=l&&l.matchFragment(this.content,r);if(!c||!c.validEnd)return!1;for(let d=a;d<i;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(n,r,s,a){if(a&&!this.type.allowsMarks(a))return!1;let i=this.contentMatchAt(n).matchType(s),l=i&&i.matchFragment(this.content,r);return l?l.validEnd:!1}canAppend(n){return n.content.size?this.canReplace(this.childCount,this.childCount,n.content):this.type.compatibleContent(n.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let n=ft.none;for(let r=0;r<this.marks.length;r++){let s=this.marks[r];s.type.checkAttrs(s.attrs),n=s.addToSet(n)}if(!ft.sameSet(n,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let n={type:this.type.name};for(let r in this.attrs){n.attrs=this.attrs;break}return this.content.size&&(n.content=this.content.toJSON()),this.marks.length&&(n.marks=this.marks.map(r=>r.toJSON())),n}static fromJSON(n,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let s;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=r.marks.map(n.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return n.text(r.text,s)}let a=Z.fromJSON(n,r.content),i=n.nodeType(r.type).create(r.attrs,a,s);return i.type.checkAttrs(i.attrs),i}};no.prototype.text=void 0;class Mx extends no{constructor(n,r,s,a){if(super(n,r,null,a),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(n,r){return this.text.slice(n,r)}get nodeSize(){return this.text.length}mark(n){return n==this.marks?this:new Mx(this.type,this.attrs,this.text,n)}withText(n){return n==this.text?this:new Mx(this.type,this.attrs,n,this.marks)}cut(n=0,r=this.text.length){return n==0&&r==this.text.length?this:this.withText(this.text.slice(n,r))}eq(n){return this.sameMarkup(n)&&this.text==n.text}toJSON(){let n=super.toJSON();return n.text=this.text,n}}function gB(t,n){for(let r=t.length-1;r>=0;r--)n=t[r].type.name+"("+n+")";return n}class El{constructor(n){this.validEnd=n,this.next=[],this.wrapCache=[]}static parse(n,r){let s=new xfe(n,r);if(s.next==null)return El.empty;let a=yB(s);s.next&&s.err("Unexpected trailing text");let i=Nfe(jfe(a));return Sfe(i,s),i}matchType(n){for(let r=0;r<this.next.length;r++)if(this.next[r].type==n)return this.next[r].next;return null}matchFragment(n,r=0,s=n.childCount){let a=this;for(let i=r;a&&i<s;i++)a=a.matchType(n.child(i).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let n=0;n<this.next.length;n++){let{type:r}=this.next[n];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(n){for(let r=0;r<this.next.length;r++)for(let s=0;s<n.next.length;s++)if(this.next[r].type==n.next[s].type)return!0;return!1}fillBefore(n,r=!1,s=0){let a=[this];function i(l,c){let d=l.matchFragment(n,s);if(d&&(!r||d.validEnd))return Z.from(c.map(u=>u.createAndFill()));for(let u=0;u<l.next.length;u++){let{type:f,next:p}=l.next[u];if(!(f.isText||f.hasRequiredAttrs())&&a.indexOf(p)==-1){a.push(p);let h=i(p,c.concat(f));if(h)return h}}return null}return i(this,[])}findWrapping(n){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==n)return this.wrapCache[s+1];let r=this.computeWrapping(n);return this.wrapCache.push(n,r),r}computeWrapping(n){let r=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let a=s.shift(),i=a.match;if(i.matchType(n)){let l=[];for(let c=a;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<i.next.length;l++){let{type:c,next:d}=i.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in r)&&(!a.type||d.validEnd)&&(s.push({match:c.contentMatch,type:c,via:a}),r[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let n=[];function r(s){n.push(s);for(let a=0;a<s.next.length;a++)n.indexOf(s.next[a].next)==-1&&r(s.next[a].next)}return r(this),n.map((s,a)=>{let i=a+(s.validEnd?"*":" ")+" ";for(let l=0;l<s.next.length;l++)i+=(l?", ":"")+s.next[l].type.name+"->"+n.indexOf(s.next[l].next);return i}).join(`
`)}}El.empty=new El(!0);class xfe{constructor(n,r){this.string=n,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=n.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(n){return this.next==n&&(this.pos++||!0)}err(n){throw new SyntaxError(n+" (in content expression '"+this.string+"')")}}function yB(t){let n=[];do n.push(gfe(t));while(t.eat("|"));return n.length==1?n[0]:{type:"choice",exprs:n}}function gfe(t){let n=[];do n.push(yfe(t));while(t.next&&t.next!=")"&&t.next!="|");return n.length==1?n[0]:{type:"seq",exprs:n}}function yfe(t){let n=wfe(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=vfe(t,n);else break;return n}function iT(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let n=Number(t.next);return t.pos++,n}function vfe(t,n){let r=iT(t),s=r;return t.eat(",")&&(t.next!="}"?s=iT(t):s=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:s,expr:n}}function bfe(t,n){let r=t.nodeTypes,s=r[n];if(s)return[s];let a=[];for(let i in r){let l=r[i];l.isInGroup(n)&&a.push(l)}return a.length==0&&t.err("No node type or group '"+n+"' found"),a}function wfe(t){if(t.eat("(")){let n=yB(t);return t.eat(")")||t.err("Missing closing paren"),n}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let n=bfe(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function jfe(t){let n=[[]];return a(i(t,0),r()),n;function r(){return n.push([])-1}function s(l,c,d){let u={term:d,to:c};return n[l].push(u),u}function a(l,c){l.forEach(d=>d.to=c)}function i(l,c){if(l.type=="choice")return l.exprs.reduce((d,u)=>d.concat(i(u,c)),[]);if(l.type=="seq")for(let d=0;;d++){let u=i(l.exprs[d],c);if(d==l.exprs.length-1)return u;a(u,c=r())}else if(l.type=="star"){let d=r();return s(c,d),a(i(l.expr,d),d),[s(d)]}else if(l.type=="plus"){let d=r();return a(i(l.expr,c),d),a(i(l.expr,d),d),[s(d)]}else{if(l.type=="opt")return[s(c)].concat(i(l.expr,c));if(l.type=="range"){let d=c;for(let u=0;u<l.min;u++){let f=r();a(i(l.expr,d),f),d=f}if(l.max==-1)a(i(l.expr,d),d);else for(let u=l.min;u<l.max;u++){let f=r();s(d,f),a(i(l.expr,d),f),d=f}return[s(d)]}else{if(l.type=="name")return[s(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function vB(t,n){return n-t}function oT(t,n){let r=[];return s(n),r.sort(vB);function s(a){let i=t[a];if(i.length==1&&!i[0].term)return s(i[0].to);r.push(a);for(let l=0;l<i.length;l++){let{term:c,to:d}=i[l];!c&&r.indexOf(d)==-1&&s(d)}}}function Nfe(t){let n=Object.create(null);return r(oT(t,0));function r(s){let a=[];s.forEach(l=>{t[l].forEach(({term:c,to:d})=>{if(!c)return;let u;for(let f=0;f<a.length;f++)a[f][0]==c&&(u=a[f][1]);oT(t,d).forEach(f=>{u||a.push([c,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let i=n[s.join(",")]=new El(s.indexOf(t.length-1)>-1);for(let l=0;l<a.length;l++){let c=a[l][1].sort(vB);i.next.push({type:a[l][0],next:n[c.join(",")]||r(c)})}return i}}function Sfe(t,n){for(let r=0,s=[t];r<s.length;r++){let a=s[r],i=!a.validEnd,l=[];for(let c=0;c<a.next.length;c++){let{type:d,next:u}=a.next[c];l.push(d.name),i&&!(d.isText||d.hasRequiredAttrs())&&(i=!1),s.indexOf(u)==-1&&s.push(u)}i&&n.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function bB(t){let n=Object.create(null);for(let r in t){let s=t[r];if(!s.hasDefault)return null;n[r]=s.default}return n}function wB(t,n){let r=Object.create(null);for(let s in t){let a=n&&n[s];if(a===void 0){let i=t[s];if(i.hasDefault)a=i.default;else throw new RangeError("No value supplied for attribute "+s)}r[s]=a}return r}function jB(t,n,r,s){for(let a in n)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${r} of type ${a}`);for(let a in t){let i=t[a];i.validate&&i.validate(n[a])}}function NB(t,n){let r=Object.create(null);if(n)for(let s in n)r[s]=new Cfe(t,s,n[s]);return r}let lT=class SB{constructor(n,r,s){this.name=n,this.schema=r,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=NB(n,s.attrs),this.defaultAttrs=bB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||n=="text"),this.isText=n=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==El.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(n){return this.groups.indexOf(n)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(n){return this==n||this.contentMatch.compatible(n.contentMatch)}computeAttrs(n){return!n&&this.defaultAttrs?this.defaultAttrs:wB(this.attrs,n)}create(n=null,r,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new no(this,this.computeAttrs(n),Z.from(r),ft.setFrom(s))}createChecked(n=null,r,s){return r=Z.from(r),this.checkContent(r),new no(this,this.computeAttrs(n),r,ft.setFrom(s))}createAndFill(n=null,r,s){if(n=this.computeAttrs(n),r=Z.from(r),r.size){let l=this.contentMatch.fillBefore(r);if(!l)return null;r=l.append(r)}let a=this.contentMatch.matchFragment(r),i=a&&a.fillBefore(Z.empty,!0);return i?new no(this,n,r.append(i),ft.setFrom(s)):null}validContent(n){let r=this.contentMatch.matchFragment(n);if(!r||!r.validEnd)return!1;for(let s=0;s<n.childCount;s++)if(!this.allowsMarks(n.child(s).marks))return!1;return!0}checkContent(n){if(!this.validContent(n))throw new RangeError(`Invalid content for node ${this.name}: ${n.toString().slice(0,50)}`)}checkAttrs(n){jB(this.attrs,n,"node",this.name)}allowsMarkType(n){return this.markSet==null||this.markSet.indexOf(n)>-1}allowsMarks(n){if(this.markSet==null)return!0;for(let r=0;r<n.length;r++)if(!this.allowsMarkType(n[r].type))return!1;return!0}allowedMarks(n){if(this.markSet==null)return n;let r;for(let s=0;s<n.length;s++)this.allowsMarkType(n[s].type)?r&&r.push(n[s]):r||(r=n.slice(0,s));return r?r.length?r:ft.none:n}static compile(n,r){let s=Object.create(null);n.forEach((i,l)=>s[i]=new SB(i,r,l));let a=r.spec.topNode||"doc";if(!s[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let i in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function kfe(t,n,r){let s=r.split("|");return a=>{let i=a===null?"null":typeof a;if(s.indexOf(i)<0)throw new RangeError(`Expected value of type ${s} for attribute ${n} on type ${t}, got ${i}`)}}class Cfe{constructor(n,r,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?kfe(n,r,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class Ry{constructor(n,r,s,a){this.name=n,this.rank=r,this.schema=s,this.spec=a,this.attrs=NB(n,a.attrs),this.excluded=null;let i=bB(this.attrs);this.instance=i?new ft(this,i):null}create(n=null){return!n&&this.instance?this.instance:new ft(this,wB(this.attrs,n))}static compile(n,r){let s=Object.create(null),a=0;return n.forEach((i,l)=>s[i]=new Ry(i,a++,r,l)),s}removeFromSet(n){for(var r=0;r<n.length;r++)n[r].type==this&&(n=n.slice(0,r).concat(n.slice(r+1)),r--);return n}isInSet(n){for(let r=0;r<n.length;r++)if(n[r].type==this)return n[r]}checkAttrs(n){jB(this.attrs,n,"mark",this.name)}excludes(n){return this.excluded.indexOf(n)>-1}}class kB{constructor(n){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let a in n)r[a]=n[a];r.nodes=Nn.from(n.nodes),r.marks=Nn.from(n.marks||{}),this.nodes=lT.compile(this.spec.nodes,this),this.marks=Ry.compile(this.spec.marks,this);let s=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let i=this.nodes[a],l=i.spec.content||"",c=i.spec.marks;if(i.contentMatch=s[l]||(s[l]=El.parse(l,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=c=="_"?null:c?cT(this,c.split(" ")):c==""||!i.inlineContent?[]:null}for(let a in this.marks){let i=this.marks[a],l=i.spec.excludes;i.excluded=l==null?[i]:l==""?[]:cT(this,l.split(" "))}this.nodeFromJSON=a=>no.fromJSON(this,a),this.markFromJSON=a=>ft.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(n,r=null,s,a){if(typeof n=="string")n=this.nodeType(n);else if(n instanceof lT){if(n.schema!=this)throw new RangeError("Node type from different schema used ("+n.name+")")}else throw new RangeError("Invalid node type: "+n);return n.createChecked(r,s,a)}text(n,r){let s=this.nodes.text;return new Mx(s,s.defaultAttrs,n,ft.setFrom(r))}mark(n,r){return typeof n=="string"&&(n=this.marks[n]),n.create(r)}nodeType(n){let r=this.nodes[n];if(!r)throw new RangeError("Unknown node type: "+n);return r}}function cT(t,n){let r=[];for(let s=0;s<n.length;s++){let a=n[s],i=t.marks[a],l=i;if(i)r.push(i);else for(let c in t.marks){let d=t.marks[c];(a=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(a)>-1)&&r.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+n[s]+"'")}return r}function _fe(t){return t.tag!=null}function Pfe(t){return t.style!=null}class fa{constructor(n,r){this.schema=n,this.rules=r,this.tags=[],this.styles=[];let s=this.matchedStyles=[];r.forEach(a=>{if(_fe(a))this.tags.push(a);else if(Pfe(a)){let i=/[^=]*/.exec(a.style)[0];s.indexOf(i)<0&&s.push(i),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let i=n.nodes[a.node];return i.contentMatch.matchType(i)})}parse(n,r={}){let s=new uT(this,r,!1);return s.addAll(n,ft.none,r.from,r.to),s.finish()}parseSlice(n,r={}){let s=new uT(this,r,!0);return s.addAll(n,ft.none,r.from,r.to),de.maxOpen(s.finish())}matchTag(n,r,s){for(let a=s?this.tags.indexOf(s)+1:0;a<this.tags.length;a++){let i=this.tags[a];if(Tfe(n,i.tag)&&(i.namespace===void 0||n.namespaceURI==i.namespace)&&(!i.context||r.matchesContext(i.context))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}matchStyle(n,r,s,a){for(let i=a?this.styles.indexOf(a)+1:0;i<this.styles.length;i++){let l=this.styles[i],c=l.style;if(!(c.indexOf(n)!=0||l.context&&!s.matchesContext(l.context)||c.length>n.length&&(c.charCodeAt(n.length)!=61||c.slice(n.length+1)!=r))){if(l.getAttrs){let d=l.getAttrs(r);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(n){let r=[];function s(a){let i=a.priority==null?50:a.priority,l=0;for(;l<r.length;l++){let c=r[l];if((c.priority==null?50:c.priority)<i)break}r.splice(l,0,a)}for(let a in n.marks){let i=n.marks[a].spec.parseDOM;i&&i.forEach(l=>{s(l=fT(l)),l.mark||l.ignore||l.clearMark||(l.mark=a)})}for(let a in n.nodes){let i=n.nodes[a].spec.parseDOM;i&&i.forEach(l=>{s(l=fT(l)),l.node||l.ignore||l.mark||(l.node=a)})}return r}static fromSchema(n){return n.cached.domParser||(n.cached.domParser=new fa(n,fa.schemaRules(n)))}}const CB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Afe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_B={ol:!0,ul:!0},Ff=1,$j=2,af=4;function dT(t,n,r){return n!=null?(n?Ff:0)|(n==="full"?$j:0):t&&t.whitespace=="pre"?Ff|$j:r&~af}class Mh{constructor(n,r,s,a,i,l){this.type=n,this.attrs=r,this.marks=s,this.solid=a,this.options=l,this.content=[],this.activeMarks=ft.none,this.match=i||(l&af?null:n.contentMatch)}findWrapping(n){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Z.from(n));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let s=this.type.contentMatch,a;return(a=s.findWrapping(n.type))?(this.match=s,a):null}}return this.match.findWrapping(n.type)}finish(n){if(!(this.options&Ff)){let s=this.content[this.content.length-1],a;if(s&&s.isText&&(a=/[ \t\r\n\u000c]+$/.exec(s.text))){let i=s;s.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-a[0].length))}}let r=Z.from(this.content);return!n&&this.match&&(r=r.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(n){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:n.parentNode&&!CB.hasOwnProperty(n.parentNode.nodeName.toLowerCase())}}class uT{constructor(n,r,s){this.parser=n,this.options=r,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let a=r.topNode,i,l=dT(null,r.preserveWhitespace,0)|(s?af:0);a?i=new Mh(a.type,a.attrs,ft.none,!0,r.topMatch||a.type.contentMatch,l):s?i=new Mh(null,null,ft.none,!0,null,l):i=new Mh(n.schema.topNodeType,null,ft.none,!0,null,l),this.nodes=[i],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,r){n.nodeType==3?this.addTextNode(n,r):n.nodeType==1&&this.addElement(n,r)}addTextNode(n,r){let s=n.nodeValue,a=this.top,i=a.options&$j?"full":this.localPreserveWS||(a.options&Ff)>0,{schema:l}=this.parser;if(i==="full"||a.inlineContext(n)||/[^ \t\r\n\u000c]/.test(s)){if(i)if(i==="full")s=s.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(l.linebreakReplacement.create())){let c=s.split(/\r?\n|\r/);for(let d=0;d<c.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),r,!0),c[d]&&this.insertNode(l.text(c[d]),r,!/\S/.test(c[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let c=a.content[a.content.length-1],d=n.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(s=s.slice(1))}s&&this.insertNode(l.text(s),r,!/\S/.test(s)),this.findInText(n)}else this.findInside(n)}addElement(n,r,s){let a=this.localPreserveWS,i=this.top;(n.tagName=="PRE"||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let l=n.nodeName.toLowerCase(),c;_B.hasOwnProperty(l)&&this.parser.normalizeLists&&Efe(n);let d=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(c=this.parser.matchTag(n,this,s));e:if(d?d.ignore:Afe.hasOwnProperty(l))this.findInside(n),this.ignoreFallback(n,r);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(n=d.skip);let u,f=this.needsBlock;if(CB.hasOwnProperty(l))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,r);break e}let p=d&&d.skip?r:this.readStyles(n,r);p&&this.addAll(n,p),u&&this.sync(i),this.needsBlock=f}else{let u=this.readStyles(n,r);u&&this.addElementByRule(n,d,u,d.consuming===!1?c:void 0)}this.localPreserveWS=a}leafFallback(n,r){n.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode(`
`),r)}ignoreFallback(n,r){n.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(n,r){let s=n.style;if(s&&s.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let i=this.parser.matchedStyles[a],l=s.getPropertyValue(i);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(i,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?r=r.filter(u=>!d.clearMark(u)):r=r.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return r}addElementByRule(n,r,s,a){let i,l;if(r.node)if(l=this.parser.schema.nodes[r.node],l.isLeaf)this.insertNode(l.create(r.attrs),s,n.nodeName=="BR")||this.leafFallback(n,s);else{let d=this.enter(l,r.attrs||null,s,r.preserveWhitespace);d&&(i=!0,s=d)}else{let d=this.parser.schema.marks[r.mark];s=s.concat(d.create(r.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(n);else if(a)this.addElement(n,s,a);else if(r.getContent)this.findInside(n),r.getContent(n,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=n;typeof r.contentElement=="string"?d=n.querySelector(r.contentElement):typeof r.contentElement=="function"?d=r.contentElement(n):r.contentElement&&(d=r.contentElement),this.findAround(n,d,!0),this.addAll(d,s),this.findAround(n,d,!1)}i&&this.sync(c)&&this.open--}addAll(n,r,s,a){let i=s||0;for(let l=s?n.childNodes[s]:n.firstChild,c=a==null?null:n.childNodes[a];l!=c;l=l.nextSibling,++i)this.findAtPoint(n,i),this.addDOM(l,r);this.findAtPoint(n,i)}findPlace(n,r,s){let a,i;for(let l=this.open,c=0;l>=0;l--){let d=this.nodes[l],u=d.findWrapping(n);if(u&&(!a||a.length>u.length+c)&&(a=u,i=d,!u.length))break;if(d.solid){if(s)break;c+=2}}if(!a)return null;this.sync(i);for(let l=0;l<a.length;l++)r=this.enterInner(a[l],null,r,!1);return r}insertNode(n,r,s){if(n.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(r=this.enterInner(i,null,r))}let a=this.findPlace(n,r,s);if(a){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(n.type));let l=ft.none;for(let c of a.concat(n.marks))(i.type?i.type.allowsMarkType(c.type):pT(c.type,n.type))&&(l=c.addToSet(l));return i.content.push(n.mark(l)),!0}return!1}enter(n,r,s,a){let i=this.findPlace(n.create(r),s,!1);return i&&(i=this.enterInner(n,r,s,!0,a)),i}enterInner(n,r,s,a=!1,i){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(n);let c=dT(n,i,l.options);l.options&af&&l.content.length==0&&(c|=af);let d=ft.none;return s=s.filter(u=>(l.type?l.type.allowsMarkType(u.type):pT(u.type,n))?(d=u.addToSet(d),!1):!0),this.nodes.push(new Mh(n,r,d,a,null,c)),this.open++,s}closeExtra(n=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let r=this.open;r>=0;r--){if(this.nodes[r]==n)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Ff)}return!1}get currentPos(){this.closeExtra();let n=0;for(let r=this.open;r>=0;r--){let s=this.nodes[r].content;for(let a=s.length-1;a>=0;a--)n+=s[a].nodeSize;r&&n++}return n}findAtPoint(n,r){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==n&&this.find[s].offset==r&&(this.find[s].pos=this.currentPos)}findInside(n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&n.nodeType==1&&n.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(n,r,s){if(n!=r&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&n.nodeType==1&&n.contains(this.find[a].node)&&r.compareDocumentPosition(this.find[a].node)&(s?2:4)&&(this.find[a].pos=this.currentPos)}findInText(n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==n&&(this.find[r].pos=this.currentPos-(n.nodeValue.length-this.find[r].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let r=n.split("/"),s=this.options.context,a=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),i=-(s?s.depth+1:0)+(a?0:1),l=(c,d)=>{for(;c>=0;c--){let u=r[c];if(u==""){if(c==r.length-1||c==0)continue;for(;d>=i;d--)if(l(c-1,d))return!0;return!1}else{let f=d>0||d==0&&a?this.nodes[d].type:s&&d>=i?s.node(d-i).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;d--}}return!0};return l(r.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let r=n.depth;r>=0;r--){let s=n.node(r).contentMatchAt(n.indexAfter(r)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let r in this.parser.schema.nodes){let s=this.parser.schema.nodes[r];if(s.isTextblock&&s.defaultAttrs)return s}}}function Efe(t){for(let n=t.firstChild,r=null;n;n=n.nextSibling){let s=n.nodeType==1?n.nodeName.toLowerCase():null;s&&_B.hasOwnProperty(s)&&r?(r.appendChild(n),n=r):s=="li"?r=n:s&&(r=null)}}function Tfe(t,n){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,n)}function fT(t){let n={};for(let r in t)n[r]=t[r];return n}function pT(t,n){let r=n.schema.nodes;for(let s in r){let a=r[s];if(!a.allowsMarkType(t))continue;let i=[],l=c=>{i.push(c);for(let d=0;d<c.edgeCount;d++){let{type:u,next:f}=c.edge(d);if(u==n||i.indexOf(f)<0&&l(f))return!0}};if(l(a.contentMatch))return!0}}class Iy{constructor(n,r){this.nodes=n,this.marks=r}serializeFragment(n,r={},s){s||(s=rb(r).createDocumentFragment());let a=s,i=[];return n.forEach(l=>{if(i.length||l.marks.length){let c=0,d=0;for(;c<i.length&&d<l.marks.length;){let u=l.marks[d];if(!this.marks[u.type.name]){d++;continue}if(!u.eq(i[c][0])||u.type.spec.spanning===!1)break;c++,d++}for(;c<i.length;)a=i.pop()[1];for(;d<l.marks.length;){let u=l.marks[d++],f=this.serializeMark(u,l.isInline,r);f&&(i.push([u,a]),a.appendChild(f.dom),a=f.contentDOM||f.dom)}}a.appendChild(this.serializeNodeInner(l,r))}),s}serializeNodeInner(n,r){let{dom:s,contentDOM:a}=Pm(rb(r),this.nodes[n.type.name](n),null,n.attrs);if(a){if(n.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(n.content,r,a)}return s}serializeNode(n,r={}){let s=this.serializeNodeInner(n,r);for(let a=n.marks.length-1;a>=0;a--){let i=this.serializeMark(n.marks[a],n.isInline,r);i&&((i.contentDOM||i.dom).appendChild(s),s=i.dom)}return s}serializeMark(n,r,s={}){let a=this.marks[n.type.name];return a&&Pm(rb(s),a(n,r),null,n.attrs)}static renderSpec(n,r,s=null,a){return Pm(n,r,s,a)}static fromSchema(n){return n.cached.domSerializer||(n.cached.domSerializer=new Iy(this.nodesFromSchema(n),this.marksFromSchema(n)))}static nodesFromSchema(n){let r=hT(n.nodes);return r.text||(r.text=s=>s.text),r}static marksFromSchema(n){return hT(n.marks)}}function hT(t){let n={};for(let r in t){let s=t[r].spec.toDOM;s&&(n[r]=s)}return n}function rb(t){return t.document||window.document}const mT=new WeakMap;function Mfe(t){let n=mT.get(t);return n===void 0&&mT.set(t,n=Ofe(t)),n}function Ofe(t){let n=null;function r(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")n||(n=[]),n.push(s);else for(let a=0;a<s.length;a++)r(s[a]);else for(let a in s)r(s[a])}return r(t),n}function Pm(t,n,r,s){if(typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let a=n[0],i;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(i=Mfe(s))&&i.indexOf(n)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=a.indexOf(" ");l>0&&(r=a.slice(0,l),a=a.slice(l+1));let c,d=r?t.createElementNS(r,a):t.createElement(a),u=n[1],f=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){f=2;for(let p in u)if(u[p]!=null){let h=p.indexOf(" ");h>0?d.setAttributeNS(p.slice(0,h),p.slice(h+1),u[p]):p=="style"&&d.style?d.style.cssText=u[p]:d.setAttribute(p,u[p])}}for(let p=f;p<n.length;p++){let h=n[p];if(h===0){if(p<n.length-1||p>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:m,contentDOM:g}=Pm(t,h,r,s);if(d.appendChild(m),g){if(c)throw new RangeError("Multiple content holes");c=g}}}return{dom:d,contentDOM:c}}const PB=65535,AB=Math.pow(2,16);function Rfe(t,n){return t+n*AB}function xT(t){return t&PB}function Ife(t){return(t-(t&PB))/AB}const EB=1,TB=2,Am=4,MB=8;class Fj{constructor(n,r,s){this.pos=n,this.delInfo=r,this.recover=s}get deleted(){return(this.delInfo&MB)>0}get deletedBefore(){return(this.delInfo&(EB|Am))>0}get deletedAfter(){return(this.delInfo&(TB|Am))>0}get deletedAcross(){return(this.delInfo&Am)>0}}class Er{constructor(n,r=!1){if(this.ranges=n,this.inverted=r,!n.length&&Er.empty)return Er.empty}recover(n){let r=0,s=xT(n);if(!this.inverted)for(let a=0;a<s;a++)r+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[s*3]+r+Ife(n)}mapResult(n,r=1){return this._map(n,r,!1)}map(n,r=1){return this._map(n,r,!0)}_map(n,r,s){let a=0,i=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?a:0);if(d>n)break;let u=this.ranges[c+i],f=this.ranges[c+l],p=d+u;if(n<=p){let h=u?n==d?-1:n==p?1:r:r,m=d+a+(h<0?0:f);if(s)return m;let g=n==(r<0?d:p)?null:Rfe(c/3,n-d),y=n==d?TB:n==p?EB:Am;return(r<0?n!=d:n!=p)&&(y|=MB),new Fj(m,y,g)}a+=f-u}return s?n+a:new Fj(n+a,0,null)}touches(n,r){let s=0,a=xT(r),i=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?s:0);if(d>n)break;let u=this.ranges[c+i],f=d+u;if(n<=f&&c==a*3)return!0;s+=this.ranges[c+l]-u}return!1}forEach(n){let r=this.inverted?2:1,s=this.inverted?1:2;for(let a=0,i=0;a<this.ranges.length;a+=3){let l=this.ranges[a],c=l-(this.inverted?i:0),d=l+(this.inverted?0:i),u=this.ranges[a+r],f=this.ranges[a+s];n(c,c+u,d,d+f),i+=f-u}}invert(){return new Er(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return n==0?Er.empty:new Er(n<0?[0,-n,0]:[0,0,n])}}Er.empty=new Er([]);class Bf{constructor(n,r,s=0,a=n?n.length:0){this.mirror=r,this.from=s,this.to=a,this._maps=n||[],this.ownData=!(n||r)}get maps(){return this._maps}slice(n=0,r=this.maps.length){return new Bf(this._maps,this.mirror,n,r)}appendMap(n,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(n),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(n){for(let r=0,s=this._maps.length;r<n._maps.length;r++){let a=n.getMirror(r);this.appendMap(n._maps[r],a!=null&&a<r?s+a:void 0)}}getMirror(n){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==n)return this.mirror[r+(r%2?-1:1)]}}setMirror(n,r){this.mirror||(this.mirror=[]),this.mirror.push(n,r)}appendMappingInverted(n){for(let r=n.maps.length-1,s=this._maps.length+n._maps.length;r>=0;r--){let a=n.getMirror(r);this.appendMap(n._maps[r].invert(),a!=null&&a>r?s-a-1:void 0)}}invert(){let n=new Bf;return n.appendMappingInverted(this),n}map(n,r=1){if(this.mirror)return this._map(n,r,!0);for(let s=this.from;s<this.to;s++)n=this._maps[s].map(n,r);return n}mapResult(n,r=1){return this._map(n,r,!1)}_map(n,r,s){let a=0;for(let i=this.from;i<this.to;i++){let l=this._maps[i],c=l.mapResult(n,r);if(c.recover!=null){let d=this.getMirror(i);if(d!=null&&d>i&&d<this.to){i=d,n=this._maps[d].recover(c.recover);continue}}a|=c.delInfo,n=c.pos}return s?n:new Fj(n,a,null)}}const sb=Object.create(null);let Gn=class{getMap(){return Er.empty}merge(n){return null}static fromJSON(n,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=sb[r.stepType];if(!s)throw new RangeError(`No step type ${r.stepType} defined`);return s.fromJSON(n,r)}static jsonID(n,r){if(n in sb)throw new RangeError("Duplicate use of step JSON ID "+n);return sb[n]=r,r.prototype.jsonID=n,r}};class Ht{constructor(n,r){this.doc=n,this.failed=r}static ok(n){return new Ht(n,null)}static fail(n){return new Ht(null,n)}static fromReplace(n,r,s,a){try{return Ht.ok(n.replace(r,s,a))}catch(i){if(i instanceof Ax)return Ht.fail(i.message);throw i}}}function bk(t,n,r){let s=[];for(let a=0;a<t.childCount;a++){let i=t.child(a);i.content.size&&(i=i.copy(bk(i.content,n,i))),i.isInline&&(i=n(i,r,a)),s.push(i)}return Z.fromArray(s)}class Vi extends Gn{constructor(n,r,s){super(),this.from=n,this.to=r,this.mark=s}apply(n){let r=n.slice(this.from,this.to),s=n.resolve(this.from),a=s.node(s.sharedDepth(this.to)),i=new de(bk(r.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),a),r.openStart,r.openEnd);return Ht.fromReplace(n,this.from,this.to,i)}invert(){return new Ps(this.from,this.to,this.mark)}map(n){let r=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return r.deleted&&s.deleted||r.pos>=s.pos?null:new Vi(r.pos,s.pos,this.mark)}merge(n){return n instanceof Vi&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new Vi(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Vi(r.from,r.to,n.markFromJSON(r.mark))}}Gn.jsonID("addMark",Vi);class Ps extends Gn{constructor(n,r,s){super(),this.from=n,this.to=r,this.mark=s}apply(n){let r=n.slice(this.from,this.to),s=new de(bk(r.content,a=>a.mark(this.mark.removeFromSet(a.marks)),n),r.openStart,r.openEnd);return Ht.fromReplace(n,this.from,this.to,s)}invert(){return new Vi(this.from,this.to,this.mark)}map(n){let r=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return r.deleted&&s.deleted||r.pos>=s.pos?null:new Ps(r.pos,s.pos,this.mark)}merge(n){return n instanceof Ps&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new Ps(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ps(r.from,r.to,n.markFromJSON(r.mark))}}Gn.jsonID("removeMark",Ps);class Ui extends Gn{constructor(n,r){super(),this.pos=n,this.mark=r}apply(n){let r=n.nodeAt(this.pos);if(!r)return Ht.fail("No node at mark step's position");let s=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Ht.fromReplace(n,this.pos,this.pos+1,new de(Z.from(s),0,r.isLeaf?0:1))}invert(n){let r=n.nodeAt(this.pos);if(r){let s=this.mark.addToSet(r.marks);if(s.length==r.marks.length){for(let a=0;a<r.marks.length;a++)if(!r.marks[a].isInSet(s))return new Ui(this.pos,r.marks[a]);return new Ui(this.pos,this.mark)}}return new Tl(this.pos,this.mark)}map(n){let r=n.mapResult(this.pos,1);return r.deletedAfter?null:new Ui(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ui(r.pos,n.markFromJSON(r.mark))}}Gn.jsonID("addNodeMark",Ui);class Tl extends Gn{constructor(n,r){super(),this.pos=n,this.mark=r}apply(n){let r=n.nodeAt(this.pos);if(!r)return Ht.fail("No node at mark step's position");let s=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Ht.fromReplace(n,this.pos,this.pos+1,new de(Z.from(s),0,r.isLeaf?0:1))}invert(n){let r=n.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new Ui(this.pos,this.mark)}map(n){let r=n.mapResult(this.pos,1);return r.deletedAfter?null:new Tl(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Tl(r.pos,n.markFromJSON(r.mark))}}Gn.jsonID("removeNodeMark",Tl);class en extends Gn{constructor(n,r,s,a=!1){super(),this.from=n,this.to=r,this.slice=s,this.structure=a}apply(n){return this.structure&&Bj(n,this.from,this.to)?Ht.fail("Structure replace would overwrite content"):Ht.fromReplace(n,this.from,this.to,this.slice)}getMap(){return new Er([this.from,this.to-this.from,this.slice.size])}invert(n){return new en(this.from,this.from+this.slice.size,n.slice(this.from,this.to))}map(n){let r=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return r.deletedAcross&&s.deletedAcross?null:new en(r.pos,Math.max(r.pos,s.pos),this.slice,this.structure)}merge(n){if(!(n instanceof en)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){let r=this.slice.size+n.slice.size==0?de.empty:new de(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new en(this.from,this.to+(n.to-n.from),r,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){let r=this.slice.size+n.slice.size==0?de.empty:new de(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new en(n.from,this.to,r,this.structure)}else return null}toJSON(){let n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new en(r.from,r.to,de.fromJSON(n,r.slice),!!r.structure)}}Gn.jsonID("replace",en);class sn extends Gn{constructor(n,r,s,a,i,l,c=!1){super(),this.from=n,this.to=r,this.gapFrom=s,this.gapTo=a,this.slice=i,this.insert=l,this.structure=c}apply(n){if(this.structure&&(Bj(n,this.from,this.gapFrom)||Bj(n,this.gapTo,this.to)))return Ht.fail("Structure gap-replace would overwrite content");let r=n.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Ht.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,r.content);return s?Ht.fromReplace(n,this.from,this.to,s):Ht.fail("Content does not fit in gap")}getMap(){return new Er([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(n){let r=this.gapTo-this.gapFrom;return new sn(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(n){let r=n.mapResult(this.from,1),s=n.mapResult(this.to,-1),a=this.from==this.gapFrom?r.pos:n.map(this.gapFrom,-1),i=this.to==this.gapTo?s.pos:n.map(this.gapTo,1);return r.deletedAcross&&s.deletedAcross||a<r.pos||i>s.pos?null:new sn(r.pos,s.pos,a,i,this.slice,this.insert,this.structure)}toJSON(){let n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new sn(r.from,r.to,r.gapFrom,r.gapTo,de.fromJSON(n,r.slice),r.insert,!!r.structure)}}Gn.jsonID("replaceAround",sn);function Bj(t,n,r){let s=t.resolve(n),a=r-n,i=s.depth;for(;a>0&&i>0&&s.indexAfter(i)==s.node(i).childCount;)i--,a--;if(a>0){let l=s.node(i).maybeChild(s.indexAfter(i));for(;a>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,a--}}return!1}function Dfe(t,n,r,s){let a=[],i=[],l,c;t.doc.nodesBetween(n,r,(d,u,f)=>{if(!d.isInline)return;let p=d.marks;if(!s.isInSet(p)&&f.type.allowsMarkType(s.type)){let h=Math.max(u,n),m=Math.min(u+d.nodeSize,r),g=s.addToSet(p);for(let y=0;y<p.length;y++)p[y].isInSet(g)||(l&&l.to==h&&l.mark.eq(p[y])?l.to=m:a.push(l=new Ps(h,m,p[y])));c&&c.to==h?c.to=m:i.push(c=new Vi(h,m,s))}}),a.forEach(d=>t.step(d)),i.forEach(d=>t.step(d))}function Lfe(t,n,r,s){let a=[],i=0;t.doc.nodesBetween(n,r,(l,c)=>{if(!l.isInline)return;i++;let d=null;if(s instanceof Ry){let u=l.marks,f;for(;f=s.isInSet(u);)(d||(d=[])).push(f),u=f.removeFromSet(u)}else s?s.isInSet(l.marks)&&(d=[s]):d=l.marks;if(d&&d.length){let u=Math.min(c+l.nodeSize,r);for(let f=0;f<d.length;f++){let p=d[f],h;for(let m=0;m<a.length;m++){let g=a[m];g.step==i-1&&p.eq(a[m].style)&&(h=g)}h?(h.to=u,h.step=i):a.push({style:p,from:Math.max(c,n),to:u,step:i})}}}),a.forEach(l=>t.step(new Ps(l.from,l.to,l.style)))}function wk(t,n,r,s=r.contentMatch,a=!0){let i=t.doc.nodeAt(n),l=[],c=n+1;for(let d=0;d<i.childCount;d++){let u=i.child(d),f=c+u.nodeSize,p=s.matchType(u.type);if(!p)l.push(new en(c,f,de.empty));else{s=p;for(let h=0;h<u.marks.length;h++)r.allowsMarkType(u.marks[h].type)||t.step(new Ps(c,f,u.marks[h]));if(a&&u.isText&&r.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(u.text);)g||(g=new de(Z.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),l.push(new en(c+h.index,c+h.index+h[0].length,g))}}c=f}if(!s.validEnd){let d=s.fillBefore(Z.empty,!0);t.replace(c,c,new de(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function $fe(t,n,r){return(n==0||t.canReplace(n,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function ql(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let s=t.depth;;--s){let a=t.$from.node(s),i=t.$from.index(s),l=t.$to.indexAfter(s);if(s<t.depth&&a.canReplace(i,l,r))return s;if(s==0||a.type.spec.isolating||!$fe(a,i,l))break}return null}function Ffe(t,n,r){let{$from:s,$to:a,depth:i}=n,l=s.before(i+1),c=a.after(i+1),d=l,u=c,f=Z.empty,p=0;for(let g=i,y=!1;g>r;g--)y||s.index(g)>0?(y=!0,f=Z.from(s.node(g).copy(f)),p++):d--;let h=Z.empty,m=0;for(let g=i,y=!1;g>r;g--)y||a.after(g+1)<a.end(g)?(y=!0,h=Z.from(a.node(g).copy(h)),m++):u++;t.step(new sn(d,u,l,c,new de(f.append(h),p,m),f.size-p,!0))}function jk(t,n,r=null,s=t){let a=Bfe(t,n),i=a&&zfe(s,n);return i?a.map(gT).concat({type:n,attrs:r}).concat(i.map(gT)):null}function gT(t){return{type:t,attrs:null}}function Bfe(t,n){let{parent:r,startIndex:s,endIndex:a}=t,i=r.contentMatchAt(s).findWrapping(n);if(!i)return null;let l=i.length?i[0]:n;return r.canReplaceWith(s,a,l)?i:null}function zfe(t,n){let{parent:r,startIndex:s,endIndex:a}=t,i=r.child(s),l=n.contentMatch.findWrapping(i.type);if(!l)return null;let d=(l.length?l[l.length-1]:n).contentMatch;for(let u=s;d&&u<a;u++)d=d.matchType(r.child(u).type);return!d||!d.validEnd?null:l}function Vfe(t,n,r){let s=Z.empty;for(let l=r.length-1;l>=0;l--){if(s.size){let c=r[l].type.contentMatch.matchFragment(s);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=Z.from(r[l].type.create(r[l].attrs,s))}let a=n.start,i=n.end;t.step(new sn(a,i,a,i,new de(s,0,0),r.length,!0))}function Ufe(t,n,r,s,a){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(n,r,(l,c)=>{let d=typeof a=="function"?a(l):a;if(l.isTextblock&&!l.hasMarkup(s,d)&&Hfe(t.doc,t.mapping.slice(i).map(c),s)){let u=null;if(s.schema.linebreakReplacement){let m=s.whitespace=="pre",g=!!s.contentMatch.matchType(s.schema.linebreakReplacement);m&&!g?u=!1:!m&&g&&(u=!0)}u===!1&&RB(t,l,c,i),wk(t,t.mapping.slice(i).map(c,1),s,void 0,u===null);let f=t.mapping.slice(i),p=f.map(c,1),h=f.map(c+l.nodeSize,1);return t.step(new sn(p,h,p+1,h-1,new de(Z.from(s.create(d,null,l.marks)),0,0),1,!0)),u===!0&&OB(t,l,c,i),!1}})}function OB(t,n,r,s){n.forEach((a,i)=>{if(a.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(a.text);){let d=t.mapping.slice(s).map(r+1+i+l.index);t.replaceWith(d,d+1,n.type.schema.linebreakReplacement.create())}}})}function RB(t,n,r,s){n.forEach((a,i)=>{if(a.type==a.type.schema.linebreakReplacement){let l=t.mapping.slice(s).map(r+1+i);t.replaceWith(l,l+1,n.type.schema.text(`
`))}})}function Hfe(t,n,r){let s=t.resolve(n),a=s.index();return s.parent.canReplaceWith(a,a+1,r)}function Wfe(t,n,r,s,a){let i=t.doc.nodeAt(n);if(!i)throw new RangeError("No node at given position");r||(r=i.type);let l=r.create(s,null,a||i.marks);if(i.isLeaf)return t.replaceWith(n,n+i.nodeSize,l);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new sn(n,n+i.nodeSize,n+1,n+i.nodeSize-1,new de(Z.from(l),0,0),1,!0))}function Lr(t,n,r=1,s){let a=t.resolve(n),i=a.depth-r,l=s&&s[s.length-1]||a.parent;if(i<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!l.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let u=a.depth-1,f=r-2;u>i;u--,f--){let p=a.node(u),h=a.index(u);if(p.type.spec.isolating)return!1;let m=p.content.cutByIndex(h,p.childCount),g=s&&s[f+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let y=s&&s[f]||p;if(!p.canReplace(h+1,p.childCount)||!y.type.validContent(m))return!1}let c=a.indexAfter(i),d=s&&s[0];return a.node(i).canReplaceWith(c,c,d?d.type:a.node(i+1).type)}function Kfe(t,n,r=1,s){let a=t.doc.resolve(n),i=Z.empty,l=Z.empty;for(let c=a.depth,d=a.depth-r,u=r-1;c>d;c--,u--){i=Z.from(a.node(c).copy(i));let f=s&&s[u];l=Z.from(f?f.type.create(f.attrs,l):a.node(c).copy(l))}t.step(new en(n,n,new de(i.append(l),r,r),!0))}function _a(t,n){let r=t.resolve(n),s=r.index();return IB(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(s,s+1)}function qfe(t,n){n.content.size||t.type.compatibleContent(n.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:s}=t.type.schema;for(let a=0;a<n.childCount;a++){let i=n.child(a),l=i.type==s?t.type.schema.nodes.text:i.type;if(r=r.matchType(l),!r||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}function IB(t,n){return!!(t&&n&&!t.isLeaf&&qfe(t,n))}function Wd(t,n,r=-1){let s=t.resolve(n);for(let a=s.depth;;a--){let i,l,c=s.index(a);if(a==s.depth?(i=s.nodeBefore,l=s.nodeAfter):r>0?(i=s.node(a+1),c++,l=s.node(a).maybeChild(c)):(i=s.node(a).maybeChild(c-1),l=s.node(a+1)),i&&!i.isTextblock&&IB(i,l)&&s.node(a).canReplace(c,c+1))return n;if(a==0)break;n=r<0?s.before(a):s.after(a)}}function Gfe(t,n,r){let s=null,{linebreakReplacement:a}=t.doc.type.schema,i=t.doc.resolve(n-r),l=i.node().type;if(a&&l.inlineContent){let f=l.whitespace=="pre",p=!!l.contentMatch.matchType(a);f&&!p?s=!1:!f&&p&&(s=!0)}let c=t.steps.length;if(s===!1){let f=t.doc.resolve(n+r);RB(t,f.node(),f.before(),c)}l.inlineContent&&wk(t,n+r-1,l,i.node().contentMatchAt(i.index()),s==null);let d=t.mapping.slice(c),u=d.map(n-r);if(t.step(new en(u,d.map(n+r,-1),de.empty,!0)),s===!0){let f=t.doc.resolve(u);OB(t,f.node(),f.before(),t.steps.length)}return t}function Yfe(t,n,r){let s=t.resolve(n);if(s.parent.canReplaceWith(s.index(),s.index(),r))return n;if(s.parentOffset==0)for(let a=s.depth-1;a>=0;a--){let i=s.index(a);if(s.node(a).canReplaceWith(i,i,r))return s.before(a+1);if(i>0)return null}if(s.parentOffset==s.parent.content.size)for(let a=s.depth-1;a>=0;a--){let i=s.indexAfter(a);if(s.node(a).canReplaceWith(i,i,r))return s.after(a+1);if(i<s.node(a).childCount)return null}return null}function DB(t,n,r){let s=t.resolve(n);if(!r.content.size)return n;let a=r.content;for(let i=0;i<r.openStart;i++)a=a.firstChild.content;for(let i=1;i<=(r.openStart==0&&r.size?2:1);i++)for(let l=s.depth;l>=0;l--){let c=l==s.depth?0:s.pos<=(s.start(l+1)+s.end(l+1))/2?-1:1,d=s.index(l)+(c>0?1:0),u=s.node(l),f=!1;if(i==1)f=u.canReplace(d,d,a);else{let p=u.contentMatchAt(d).findWrapping(a.firstChild.type);f=p&&u.canReplaceWith(d,d,p[0])}if(f)return c==0?s.pos:c<0?s.before(l+1):s.after(l+1)}return null}function Dy(t,n,r=n,s=de.empty){if(n==r&&!s.size)return null;let a=t.resolve(n),i=t.resolve(r);return LB(a,i,s)?new en(n,r,s):new Xfe(a,i,s).fit()}function LB(t,n,r){return!r.openStart&&!r.openEnd&&t.start()==n.start()&&t.parent.canReplace(t.index(),n.index(),r.content)}class Xfe{constructor(n,r,s){this.$from=n,this.$to=r,this.unplaced=s,this.frontier=[],this.placed=Z.empty;for(let a=0;a<=n.depth;a++){let i=n.node(a);this.frontier.push({type:i.type,match:i.contentMatchAt(n.indexAfter(a))})}for(let a=n.depth;a>0;a--)this.placed=Z.from(n.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let n=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,s=this.$from,a=this.close(n<0?this.$to:s.doc.resolve(n));if(!a)return null;let i=this.placed,l=s.depth,c=a.depth;for(;l&&c&&i.childCount==1;)i=i.firstChild.content,l--,c--;let d=new de(i,l,c);return n>-1?new sn(s.pos,n,this.$to.pos,this.$to.end(),d,r):d.size||s.pos!=this.$to.pos?new en(s.pos,a.pos,d):null}findFittable(){let n=this.unplaced.openStart;for(let r=this.unplaced.content,s=0,a=this.unplaced.openEnd;s<n;s++){let i=r.firstChild;if(r.childCount>1&&(a=0),i.type.spec.isolating&&a<=s){n=s;break}r=i.content}for(let r=1;r<=2;r++)for(let s=r==1?n:this.unplaced.openStart;s>=0;s--){let a,i=null;s?(i=ab(this.unplaced.content,s-1).firstChild,a=i.content):a=this.unplaced.content;let l=a.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:u}=this.frontier[c],f,p=null;if(r==1&&(l?u.matchType(l.type)||(p=u.fillBefore(Z.from(l),!1)):i&&d.compatibleContent(i.type)))return{sliceDepth:s,frontierDepth:c,parent:i,inject:p};if(r==2&&l&&(f=u.findWrapping(l.type)))return{sliceDepth:s,frontierDepth:c,parent:i,wrap:f};if(i&&u.matchType(i.type))break}}}openMore(){let{content:n,openStart:r,openEnd:s}=this.unplaced,a=ab(n,r);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new de(n,r+1,Math.max(s,a.size+r>=n.size-s?r+1:0)),!0)}dropNode(){let{content:n,openStart:r,openEnd:s}=this.unplaced,a=ab(n,r);if(a.childCount<=1&&r>0){let i=n.size-r<=r+a.size;this.unplaced=new de(Du(n,r-1,1),r-1,i?r-1:s)}else this.unplaced=new de(Du(n,r,1),r,s)}placeNodes({sliceDepth:n,frontierDepth:r,parent:s,inject:a,wrap:i}){for(;this.depth>r;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let l=this.unplaced,c=s?s.content:l.content,d=l.openStart-n,u=0,f=[],{match:p,type:h}=this.frontier[r];if(a){for(let y=0;y<a.childCount;y++)f.push(a.child(y));p=p.matchFragment(a)}let m=c.size+n-(l.content.size-l.openEnd);for(;u<c.childCount;){let y=c.child(u),v=p.matchType(y.type);if(!v)break;u++,(u>1||d==0||y.content.size)&&(p=v,f.push($B(y.mark(h.allowedMarks(y.marks)),u==1?d:0,u==c.childCount?m:-1)))}let g=u==c.childCount;g||(m=-1),this.placed=Lu(this.placed,r,Z.from(f)),this.frontier[r].match=p,g&&m<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,v=c;y<m;y++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=g?n==0?de.empty:new de(Du(l.content,n-1,1),n-1,m<0?l.openEnd:n-1):new de(Du(l.content,n,u),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let n=this.frontier[this.depth],r;if(!n.type.isTextblock||!ib(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:s}=this.$to,a=this.$to.after(s);for(;s>1&&a==this.$to.end(--s);)++a;return a}findCloseLevel(n){e:for(let r=Math.min(this.depth,n.depth);r>=0;r--){let{match:s,type:a}=this.frontier[r],i=r<n.depth&&n.end(r+1)==n.pos+(n.depth-(r+1)),l=ib(n,r,a,s,i);if(l){for(let c=r-1;c>=0;c--){let{match:d,type:u}=this.frontier[c],f=ib(n,c,u,d,!0);if(!f||f.childCount)continue e}return{depth:r,fit:l,move:i?n.doc.resolve(n.after(r+1)):n}}}}close(n){let r=this.findCloseLevel(n);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Lu(this.placed,r.depth,r.fit)),n=r.move;for(let s=r.depth+1;s<=n.depth;s++){let a=n.node(s),i=a.type.contentMatch.fillBefore(a.content,!0,n.index(s));this.openFrontierNode(a.type,a.attrs,i)}return n}openFrontierNode(n,r=null,s){let a=this.frontier[this.depth];a.match=a.match.matchType(n),this.placed=Lu(this.placed,this.depth,Z.from(n.create(r,s))),this.frontier.push({type:n,match:n.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Z.empty,!0);r.childCount&&(this.placed=Lu(this.placed,this.frontier.length,r))}}function Du(t,n,r){return n==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Du(t.firstChild.content,n-1,r)))}function Lu(t,n,r){return n==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Lu(t.lastChild.content,n-1,r)))}function ab(t,n){for(let r=0;r<n;r++)t=t.firstChild.content;return t}function $B(t,n,r){if(n<=0)return t;let s=t.content;return n>1&&(s=s.replaceChild(0,$B(s.firstChild,n-1,s.childCount==1?r-1:0))),n>0&&(s=t.type.contentMatch.fillBefore(s).append(s),r<=0&&(s=s.append(t.type.contentMatch.matchFragment(s).fillBefore(Z.empty,!0)))),t.copy(s)}function ib(t,n,r,s,a){let i=t.node(n),l=a?t.indexAfter(n):t.index(n);if(l==i.childCount&&!r.compatibleContent(i.type))return null;let c=s.fillBefore(i.content,!0,l);return c&&!Jfe(r,i.content,l)?c:null}function Jfe(t,n,r){for(let s=r;s<n.childCount;s++)if(!t.allowsMarks(n.child(s).marks))return!0;return!1}function Qfe(t){return t.spec.defining||t.spec.definingForContent}function Zfe(t,n,r,s){if(!s.size)return t.deleteRange(n,r);let a=t.doc.resolve(n),i=t.doc.resolve(r);if(LB(a,i,s))return t.step(new en(n,r,s));let l=BB(a,t.doc.resolve(r));l[l.length-1]==0&&l.pop();let c=-(a.depth+1);l.unshift(c);for(let h=a.depth,m=a.pos-1;h>0;h--,m--){let g=a.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;l.indexOf(h)>-1?c=h:a.before(h)==m&&l.splice(1,0,-h)}let d=l.indexOf(c),u=[],f=s.openStart;for(let h=s.content,m=0;;m++){let g=h.firstChild;if(u.push(g),m==s.openStart)break;h=g.content}for(let h=f-1;h>=0;h--){let m=u[h],g=Qfe(m.type);if(g&&!m.sameMarkup(a.node(Math.abs(c)-1)))f=h;else if(g||!m.type.isTextblock)break}for(let h=s.openStart;h>=0;h--){let m=(h+f+1)%(s.openStart+1),g=u[m];if(g)for(let y=0;y<l.length;y++){let v=l[(y+d)%l.length],b=!0;v<0&&(b=!1,v=-v);let w=a.node(v-1),j=a.index(v-1);if(w.canReplaceWith(j,j,g.type,g.marks))return t.replace(a.before(v),b?i.after(v):r,new de(FB(s.content,0,s.openStart,m),m,s.openEnd))}}let p=t.steps.length;for(let h=l.length-1;h>=0&&(t.replace(n,r,s),!(t.steps.length>p));h--){let m=l[h];m<0||(n=a.before(m),r=i.after(m))}}function FB(t,n,r,s,a){if(n<r){let i=t.firstChild;t=t.replaceChild(0,i.copy(FB(i.content,n+1,r,s,i)))}if(n>s){let i=a.contentMatchAt(0),l=i.fillBefore(t).append(t);t=l.append(i.matchFragment(l).fillBefore(Z.empty,!0))}return t}function epe(t,n,r,s){if(!s.isInline&&n==r&&t.doc.resolve(n).parent.content.size){let a=Yfe(t.doc,n,s.type);a!=null&&(n=r=a)}t.replaceRange(n,r,new de(Z.from(s),0,0))}function tpe(t,n,r){let s=t.doc.resolve(n),a=t.doc.resolve(r),i=BB(s,a);for(let l=0;l<i.length;l++){let c=i[l],d=l==i.length-1;if(d&&c==0||s.node(c).type.contentMatch.validEnd)return t.delete(s.start(c),a.end(c));if(c>0&&(d||s.node(c-1).canReplace(s.index(c-1),a.indexAfter(c-1))))return t.delete(s.before(c),a.after(c))}for(let l=1;l<=s.depth&&l<=a.depth;l++)if(n-s.start(l)==s.depth-l&&r>s.end(l)&&a.end(l)-r!=a.depth-l&&s.start(l-1)==a.start(l-1)&&s.node(l-1).canReplace(s.index(l-1),a.index(l-1)))return t.delete(s.before(l),r);t.delete(n,r)}function BB(t,n){let r=[],s=Math.min(t.depth,n.depth);for(let a=s;a>=0;a--){let i=t.start(a);if(i<t.pos-(t.depth-a)||n.end(a)>n.pos+(n.depth-a)||t.node(a).type.spec.isolating||n.node(a).type.spec.isolating)break;(i==n.start(a)||a==t.depth&&a==n.depth&&t.parent.inlineContent&&n.parent.inlineContent&&a&&n.start(a-1)==i-1)&&r.push(a)}return r}class qc extends Gn{constructor(n,r,s){super(),this.pos=n,this.attr=r,this.value=s}apply(n){let r=n.nodeAt(this.pos);if(!r)return Ht.fail("No node at attribute step's position");let s=Object.create(null);for(let i in r.attrs)s[i]=r.attrs[i];s[this.attr]=this.value;let a=r.type.create(s,null,r.marks);return Ht.fromReplace(n,this.pos,this.pos+1,new de(Z.from(a),0,r.isLeaf?0:1))}getMap(){return Er.empty}invert(n){return new qc(this.pos,this.attr,n.nodeAt(this.pos).attrs[this.attr])}map(n){let r=n.mapResult(this.pos,1);return r.deletedAfter?null:new qc(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(n,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new qc(r.pos,r.attr,r.value)}}Gn.jsonID("attr",qc);class zf extends Gn{constructor(n,r){super(),this.attr=n,this.value=r}apply(n){let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let s=n.type.create(r,n.content,n.marks);return Ht.ok(s)}getMap(){return Er.empty}invert(n){return new zf(this.attr,n.attrs[this.attr])}map(n){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(n,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new zf(r.attr,r.value)}}Gn.jsonID("docAttr",zf);let hd=class extends Error{};hd=function t(n){let r=Error.call(this,n);return r.__proto__=t.prototype,r};hd.prototype=Object.create(Error.prototype);hd.prototype.constructor=hd;hd.prototype.name="TransformError";class zB{constructor(n){this.doc=n,this.steps=[],this.docs=[],this.mapping=new Bf}get before(){return this.docs.length?this.docs[0]:this.doc}step(n){let r=this.maybeStep(n);if(r.failed)throw new hd(r.failed);return this}maybeStep(n){let r=n.apply(this.doc);return r.failed||this.addStep(n,r.doc),r}get docChanged(){return this.steps.length>0}addStep(n,r){this.docs.push(this.doc),this.steps.push(n),this.mapping.appendMap(n.getMap()),this.doc=r}replace(n,r=n,s=de.empty){let a=Dy(this.doc,n,r,s);return a&&this.step(a),this}replaceWith(n,r,s){return this.replace(n,r,new de(Z.from(s),0,0))}delete(n,r){return this.replace(n,r,de.empty)}insert(n,r){return this.replaceWith(n,n,r)}replaceRange(n,r,s){return Zfe(this,n,r,s),this}replaceRangeWith(n,r,s){return epe(this,n,r,s),this}deleteRange(n,r){return tpe(this,n,r),this}lift(n,r){return Ffe(this,n,r),this}join(n,r=1){return Gfe(this,n,r),this}wrap(n,r){return Vfe(this,n,r),this}setBlockType(n,r=n,s,a=null){return Ufe(this,n,r,s,a),this}setNodeMarkup(n,r,s=null,a){return Wfe(this,n,r,s,a),this}setNodeAttribute(n,r,s){return this.step(new qc(n,r,s)),this}setDocAttribute(n,r){return this.step(new zf(n,r)),this}addNodeMark(n,r){return this.step(new Ui(n,r)),this}removeNodeMark(n,r){let s=this.doc.nodeAt(n);if(!s)throw new RangeError("No node at position "+n);if(r instanceof ft)r.isInSet(s.marks)&&this.step(new Tl(n,r));else{let a=s.marks,i,l=[];for(;i=r.isInSet(a);)l.push(new Tl(n,i)),a=i.removeFromSet(a);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(n,r=1,s){return Kfe(this,n,r,s),this}addMark(n,r,s){return Dfe(this,n,r,s),this}removeMark(n,r,s){return Lfe(this,n,r,s),this}clearIncompatible(n,r,s){return wk(this,n,r,s),this}}const ob=Object.create(null);class Ae{constructor(n,r,s){this.$anchor=n,this.$head=r,this.ranges=s||[new VB(n.min(r),n.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let n=this.ranges;for(let r=0;r<n.length;r++)if(n[r].$from.pos!=n[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(n,r=de.empty){let s=r.content.lastChild,a=null;for(let c=0;c<r.openEnd;c++)a=s,s=s.lastChild;let i=n.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:d,$to:u}=l[c],f=n.mapping.slice(i);n.replaceRange(f.map(d.pos),f.map(u.pos),c?de.empty:r),c==0&&bT(n,i,(s?s.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(n,r){let s=n.steps.length,a=this.ranges;for(let i=0;i<a.length;i++){let{$from:l,$to:c}=a[i],d=n.mapping.slice(s),u=d.map(l.pos),f=d.map(c.pos);i?n.deleteRange(u,f):(n.replaceRangeWith(u,f,r),bT(n,s,r.isInline?-1:1))}}static findFrom(n,r,s=!1){let a=n.parent.inlineContent?new ve(n):uc(n.node(0),n.parent,n.pos,n.index(),r,s);if(a)return a;for(let i=n.depth-1;i>=0;i--){let l=r<0?uc(n.node(0),n.node(i),n.before(i+1),n.index(i),r,s):uc(n.node(0),n.node(i),n.after(i+1),n.index(i)+1,r,s);if(l)return l}return null}static near(n,r=1){return this.findFrom(n,r)||this.findFrom(n,-r)||new br(n.node(0))}static atStart(n){return uc(n,n,0,0,1)||new br(n)}static atEnd(n){return uc(n,n,n.content.size,n.childCount,-1)||new br(n)}static fromJSON(n,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=ob[r.type];if(!s)throw new RangeError(`No selection type ${r.type} defined`);return s.fromJSON(n,r)}static jsonID(n,r){if(n in ob)throw new RangeError("Duplicate use of selection JSON ID "+n);return ob[n]=r,r.prototype.jsonID=n,r}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}}Ae.prototype.visible=!0;class VB{constructor(n,r){this.$from=n,this.$to=r}}let yT=!1;function vT(t){!yT&&!t.parent.inlineContent&&(yT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ve extends Ae{constructor(n,r=n){vT(n),vT(r),super(n,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(n,r){let s=n.resolve(r.map(this.head));if(!s.parent.inlineContent)return Ae.near(s);let a=n.resolve(r.map(this.anchor));return new ve(a.parent.inlineContent?a:s,s)}replace(n,r=de.empty){if(super.replace(n,r),r==de.empty){let s=this.$from.marksAcross(this.$to);s&&n.ensureMarks(s)}}eq(n){return n instanceof ve&&n.anchor==this.anchor&&n.head==this.head}getBookmark(){return new Ly(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(n,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(n.resolve(r.anchor),n.resolve(r.head))}static create(n,r,s=r){let a=n.resolve(r);return new this(a,s==r?a:n.resolve(s))}static between(n,r,s){let a=n.pos-r.pos;if((!s||a)&&(s=a>=0?1:-1),!r.parent.inlineContent){let i=Ae.findFrom(r,s,!0)||Ae.findFrom(r,-s,!0);if(i)r=i.$head;else return Ae.near(r,s)}return n.parent.inlineContent||(a==0?n=r:(n=(Ae.findFrom(n,-s,!0)||Ae.findFrom(n,s,!0)).$anchor,n.pos<r.pos!=a<0&&(n=r))),new ve(n,r)}}Ae.jsonID("text",ve);class Ly{constructor(n,r){this.anchor=n,this.head=r}map(n){return new Ly(n.map(this.anchor),n.map(this.head))}resolve(n){return ve.between(n.resolve(this.anchor),n.resolve(this.head))}}class ke extends Ae{constructor(n){let r=n.nodeAfter,s=n.node(0).resolve(n.pos+r.nodeSize);super(n,s),this.node=r}map(n,r){let{deleted:s,pos:a}=r.mapResult(this.anchor),i=n.resolve(a);return s?Ae.near(i):new ke(i)}content(){return new de(Z.from(this.node),0,0)}eq(n){return n instanceof ke&&n.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Nk(this.anchor)}static fromJSON(n,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ke(n.resolve(r.anchor))}static create(n,r){return new ke(n.resolve(r))}static isSelectable(n){return!n.isText&&n.type.spec.selectable!==!1}}ke.prototype.visible=!1;Ae.jsonID("node",ke);class Nk{constructor(n){this.anchor=n}map(n){let{deleted:r,pos:s}=n.mapResult(this.anchor);return r?new Ly(s,s):new Nk(s)}resolve(n){let r=n.resolve(this.anchor),s=r.nodeAfter;return s&&ke.isSelectable(s)?new ke(r):Ae.near(r)}}class br extends Ae{constructor(n){super(n.resolve(0),n.resolve(n.content.size))}replace(n,r=de.empty){if(r==de.empty){n.delete(0,n.doc.content.size);let s=Ae.atStart(n.doc);s.eq(n.selection)||n.setSelection(s)}else super.replace(n,r)}toJSON(){return{type:"all"}}static fromJSON(n){return new br(n)}map(n){return new br(n)}eq(n){return n instanceof br}getBookmark(){return npe}}Ae.jsonID("all",br);const npe={map(){return this},resolve(t){return new br(t)}};function uc(t,n,r,s,a,i=!1){if(n.inlineContent)return ve.create(t,r);for(let l=s-(a>0?0:1);a>0?l<n.childCount:l>=0;l+=a){let c=n.child(l);if(c.isAtom){if(!i&&ke.isSelectable(c))return ke.create(t,r-(a<0?c.nodeSize:0))}else{let d=uc(t,c,r+a,a<0?c.childCount:0,a,i);if(d)return d}r+=c.nodeSize*a}return null}function bT(t,n,r){let s=t.steps.length-1;if(s<n)return;let a=t.steps[s];if(!(a instanceof en||a instanceof sn))return;let i=t.mapping.maps[s],l;i.forEach((c,d,u,f)=>{l==null&&(l=f)}),t.setSelection(Ae.near(t.doc.resolve(l),r))}function wT(t,n){return!n||!t?t:t.bind(n)}class Oh{constructor(n,r,s){this.name=n,this.init=wT(r.init,s),this.apply=wT(r.apply,s)}}new Oh("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Oh("selection",{init(t,n){return t.selection||Ae.atStart(n.doc)},apply(t){return t.selection}}),new Oh("storedMarks",{init(t){return t.storedMarks||null},apply(t,n,r,s){return s.selection.$cursor?t.storedMarks:null}}),new Oh("scrollToSelection",{init(){return 0},apply(t,n){return t.scrolledIntoView?n+1:n}});function UB(t,n,r){for(let s in t){let a=t[s];a instanceof Function?a=a.bind(n):s=="handleDOMEvents"&&(a=UB(a,n,{})),r[s]=a}return r}class qt{constructor(n){this.spec=n,this.props={},n.props&&UB(n.props,this,this.props),this.key=n.key?n.key.key:HB("plugin")}getState(n){return n[this.key]}}const lb=Object.create(null);function HB(t){return t in lb?t+"$"+ ++lb[t]:(lb[t]=0,t+"$")}class Gt{constructor(n="key"){this.key=HB(n)}get(n){return n.config.pluginsByKey[this.key]}getState(n){return n[this.key]}}const $y=(t,n)=>t.selection.empty?!1:(n&&n(t.tr.deleteSelection().scrollIntoView()),!0);function WB(t,n){let{$cursor:r}=t.selection;return!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const Sk=(t,n,r)=>{let s=WB(t,r);if(!s)return!1;let a=Ck(s);if(!a){let l=s.blockRange(),c=l&&ql(l);return c==null?!1:(n&&n(t.tr.lift(l,c).scrollIntoView()),!0)}let i=a.nodeBefore;if(tz(t,a,n,-1))return!0;if(s.parent.content.size==0&&(md(i,"end")||ke.isSelectable(i)))for(let l=s.depth;;l--){let c=Dy(t.doc,s.before(l),s.after(l),de.empty);if(c&&c.slice.size<c.to-c.from){if(n){let d=t.tr.step(c);d.setSelection(md(i,"end")?Ae.findFrom(d.doc.resolve(d.mapping.map(a.pos,-1)),-1):ke.create(d.doc,a.pos-i.nodeSize)),n(d.scrollIntoView())}return!0}if(l==1||s.node(l-1).childCount>1)break}return i.isAtom&&a.depth==s.depth-1?(n&&n(t.tr.delete(a.pos-i.nodeSize,a.pos).scrollIntoView()),!0):!1},KB=(t,n,r)=>{let s=WB(t,r);if(!s)return!1;let a=Ck(s);return a?GB(t,a,n):!1},qB=(t,n,r)=>{let s=YB(t,r);if(!s)return!1;let a=Ak(s);return a?GB(t,a,n):!1};function GB(t,n,r){let s=n.nodeBefore,a=s,i=n.pos-1;for(;!a.isTextblock;i--){if(a.type.spec.isolating)return!1;let f=a.lastChild;if(!f)return!1;a=f}let l=n.nodeAfter,c=l,d=n.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let f=c.firstChild;if(!f)return!1;c=f}let u=Dy(t.doc,i,d,de.empty);if(!u||u.from!=i||u instanceof en&&u.slice.size>=d-i)return!1;if(r){let f=t.tr.step(u);f.setSelection(ve.create(f.doc,i)),r(f.scrollIntoView())}return!0}function md(t,n,r=!1){for(let s=t;s;s=n=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(r&&s.childCount!=1)return!1}return!1}const kk=(t,n,r)=>{let{$head:s,empty:a}=t.selection,i=s;if(!a)return!1;if(s.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):s.parentOffset>0)return!1;i=Ck(s)}let l=i&&i.nodeBefore;return!l||!ke.isSelectable(l)?!1:(n&&n(t.tr.setSelection(ke.create(t.doc,i.pos-l.nodeSize)).scrollIntoView()),!0)};function Ck(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){if(t.index(n)>0)return t.doc.resolve(t.before(n+1));if(t.node(n).type.spec.isolating)break}return null}function YB(t,n){let{$cursor:r}=t.selection;return!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const _k=(t,n,r)=>{let s=YB(t,r);if(!s)return!1;let a=Ak(s);if(!a)return!1;let i=a.nodeAfter;if(tz(t,a,n,1))return!0;if(s.parent.content.size==0&&(md(i,"start")||ke.isSelectable(i))){let l=Dy(t.doc,s.before(),s.after(),de.empty);if(l&&l.slice.size<l.to-l.from){if(n){let c=t.tr.step(l);c.setSelection(md(i,"start")?Ae.findFrom(c.doc.resolve(c.mapping.map(a.pos)),1):ke.create(c.doc,c.mapping.map(a.pos))),n(c.scrollIntoView())}return!0}}return i.isAtom&&a.depth==s.depth-1?(n&&n(t.tr.delete(a.pos,a.pos+i.nodeSize).scrollIntoView()),!0):!1},Pk=(t,n,r)=>{let{$head:s,empty:a}=t.selection,i=s;if(!a)return!1;if(s.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)return!1;i=Ak(s)}let l=i&&i.nodeAfter;return!l||!ke.isSelectable(l)?!1:(n&&n(t.tr.setSelection(ke.create(t.doc,i.pos)).scrollIntoView()),!0)};function Ak(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){let r=t.node(n);if(t.index(n)+1<r.childCount)return t.doc.resolve(t.after(n+1));if(r.type.spec.isolating)break}return null}const XB=(t,n)=>{let r=t.selection,s=r instanceof ke,a;if(s){if(r.node.isTextblock||!_a(t.doc,r.from))return!1;a=r.from}else if(a=Wd(t.doc,r.from,-1),a==null)return!1;if(n){let i=t.tr.join(a);s&&i.setSelection(ke.create(i.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),n(i.scrollIntoView())}return!0},JB=(t,n)=>{let r=t.selection,s;if(r instanceof ke){if(r.node.isTextblock||!_a(t.doc,r.to))return!1;s=r.to}else if(s=Wd(t.doc,r.to,1),s==null)return!1;return n&&n(t.tr.join(s).scrollIntoView()),!0},QB=(t,n)=>{let{$from:r,$to:s}=t.selection,a=r.blockRange(s),i=a&&ql(a);return i==null?!1:(n&&n(t.tr.lift(a,i).scrollIntoView()),!0)},Ek=(t,n)=>{let{$head:r,$anchor:s}=t.selection;return!r.parent.type.spec.code||!r.sameParent(s)?!1:(n&&n(t.tr.insertText(`
`).scrollIntoView()),!0)};function Tk(t){for(let n=0;n<t.edgeCount;n++){let{type:r}=t.edge(n);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const ZB=(t,n)=>{let{$head:r,$anchor:s}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(s))return!1;let a=r.node(-1),i=r.indexAfter(-1),l=Tk(a.contentMatchAt(i));if(!l||!a.canReplaceWith(i,i,l))return!1;if(n){let c=r.after(),d=t.tr.replaceWith(c,c,l.createAndFill());d.setSelection(Ae.near(d.doc.resolve(c),1)),n(d.scrollIntoView())}return!0},Mk=(t,n)=>{let r=t.selection,{$from:s,$to:a}=r;if(r instanceof br||s.parent.inlineContent||a.parent.inlineContent)return!1;let i=Tk(a.parent.contentMatchAt(a.indexAfter()));if(!i||!i.isTextblock)return!1;if(n){let l=(!s.parentOffset&&a.index()<a.parent.childCount?s:a).pos,c=t.tr.insert(l,i.createAndFill());c.setSelection(ve.create(c.doc,l+1)),n(c.scrollIntoView())}return!0},Ok=(t,n)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if(Lr(t.doc,i))return n&&n(t.tr.split(i).scrollIntoView()),!0}let s=r.blockRange(),a=s&&ql(s);return a==null?!1:(n&&n(t.tr.lift(s,a).scrollIntoView()),!0)};function rpe(t){return(n,r)=>{let{$from:s,$to:a}=n.selection;if(n.selection instanceof ke&&n.selection.node.isBlock)return!s.parentOffset||!Lr(n.doc,s.pos)?!1:(r&&r(n.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let i=[],l,c,d=!1,u=!1;for(let m=s.depth;;m--)if(s.node(m).isBlock){d=s.end(m)==s.pos+(s.depth-m),u=s.start(m)==s.pos-(s.depth-m),c=Tk(s.node(m-1).contentMatchAt(s.indexAfter(m-1))),i.unshift(d&&c?{type:c}:null),l=m;break}else{if(m==1)return!1;i.unshift(null)}let f=n.tr;(n.selection instanceof ve||n.selection instanceof br)&&f.deleteSelection();let p=f.mapping.map(s.pos),h=Lr(f.doc,p,i.length,i);if(h||(i[0]=c?{type:c}:null,h=Lr(f.doc,p,i.length,i)),!h)return!1;if(f.split(p,i.length,i),!d&&u&&s.node(l).type!=c){let m=f.mapping.map(s.before(l)),g=f.doc.resolve(m);c&&s.node(l-1).canReplaceWith(g.index(),g.index()+1,c)&&f.setNodeMarkup(f.mapping.map(s.before(l)),c)}return r&&r(f.scrollIntoView()),!0}}const spe=rpe(),ez=(t,n)=>{let{$from:r,to:s}=t.selection,a,i=r.sharedDepth(s);return i==0?!1:(a=r.before(i),n&&n(t.tr.setSelection(ke.create(t.doc,a))),!0)};function ape(t,n,r){let s=n.nodeBefore,a=n.nodeAfter,i=n.index();return!s||!a||!s.type.compatibleContent(a.type)?!1:!s.content.size&&n.parent.canReplace(i-1,i)?(r&&r(t.tr.delete(n.pos-s.nodeSize,n.pos).scrollIntoView()),!0):!n.parent.canReplace(i,i+1)||!(a.isTextblock||_a(t.doc,n.pos))?!1:(r&&r(t.tr.join(n.pos).scrollIntoView()),!0)}function tz(t,n,r,s){let a=n.nodeBefore,i=n.nodeAfter,l,c,d=a.type.spec.isolating||i.type.spec.isolating;if(!d&&ape(t,n,r))return!0;let u=!d&&n.parent.canReplace(n.index(),n.index()+1);if(u&&(l=(c=a.contentMatchAt(a.childCount)).findWrapping(i.type))&&c.matchType(l[0]||i.type).validEnd){if(r){let m=n.pos+i.nodeSize,g=Z.empty;for(let b=l.length-1;b>=0;b--)g=Z.from(l[b].create(null,g));g=Z.from(a.copy(g));let y=t.tr.step(new sn(n.pos-1,m,n.pos,m,new de(g,1,0),l.length,!0)),v=y.doc.resolve(m+2*l.length);v.nodeAfter&&v.nodeAfter.type==a.type&&_a(y.doc,v.pos)&&y.join(v.pos),r(y.scrollIntoView())}return!0}let f=i.type.spec.isolating||s>0&&d?null:Ae.findFrom(n,1),p=f&&f.$from.blockRange(f.$to),h=p&&ql(p);if(h!=null&&h>=n.depth)return r&&r(t.tr.lift(p,h).scrollIntoView()),!0;if(u&&md(i,"start",!0)&&md(a,"end")){let m=a,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let y=i,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(r){let b=Z.empty;for(let j=g.length-1;j>=0;j--)b=Z.from(g[j].copy(b));let w=t.tr.step(new sn(n.pos-g.length,n.pos+i.nodeSize,n.pos+v,n.pos+i.nodeSize-v,new de(b,g.length,0),0,!0));r(w.scrollIntoView())}return!0}}return!1}function nz(t){return function(n,r){let s=n.selection,a=t<0?s.$from:s.$to,i=a.depth;for(;a.node(i).isInline;){if(!i)return!1;i--}return a.node(i).isTextblock?(r&&r(n.tr.setSelection(ve.create(n.doc,t<0?a.start(i):a.end(i)))),!0):!1}}const rz=nz(-1),sz=nz(1);function az(t,n=null){return function(r,s){let{$from:a,$to:i}=r.selection,l=a.blockRange(i),c=l&&jk(l,t,n);return c?(s&&s(r.tr.wrap(l,c).scrollIntoView()),!0):!1}}function Ox(t,n=null){return function(r,s){let a=!1;for(let i=0;i<r.selection.ranges.length&&!a;i++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[i];r.doc.nodesBetween(l,c,(d,u)=>{if(a)return!1;if(!(!d.isTextblock||d.hasMarkup(t,n)))if(d.type==t)a=!0;else{let f=r.doc.resolve(u),p=f.index();a=f.parent.canReplaceWith(p,p+1,t)}})}if(!a)return!1;if(s){let i=r.tr;for(let l=0;l<r.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:d}}=r.selection.ranges[l];i.setBlockType(c,d,t,n)}s(i.scrollIntoView())}return!0}}function Rk(...t){return function(n,r,s){for(let a=0;a<t.length;a++)if(t[a](n,r,s))return!0;return!1}}Rk($y,Sk,kk);Rk($y,_k,Pk);Rk(Ek,Mk,Ok,spe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function iz(t,n=null){return function(r,s){let{$from:a,$to:i}=r.selection,l=a.blockRange(i);if(!l)return!1;let c=s?r.tr:null;return ipe(c,l,t,n)?(s&&s(c.scrollIntoView()),!0):!1}}function ipe(t,n,r,s=null){let a=!1,i=n,l=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(r)&&n.startIndex==0){if(n.$from.index(n.depth-1)==0)return!1;let d=l.resolve(n.start-2);i=new Tx(d,d,n.depth),n.endIndex<n.parent.childCount&&(n=new Tx(n.$from,l.resolve(n.$to.end(n.depth)),n.depth)),a=!0}let c=jk(i,r,s,n);return c?(t&&ope(t,n,c,a,r),!0):!1}function ope(t,n,r,s,a){let i=Z.empty;for(let f=r.length-1;f>=0;f--)i=Z.from(r[f].type.create(r[f].attrs,i));t.step(new sn(n.start-(s?2:0),n.end,n.start,n.end,new de(i,0,0),r.length,!0));let l=0;for(let f=0;f<r.length;f++)r[f].type==a&&(l=f+1);let c=r.length-l,d=n.start+r.length-(s?2:0),u=n.parent;for(let f=n.startIndex,p=n.endIndex,h=!0;f<p;f++,h=!1)!h&&Lr(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=u.child(f).nodeSize;return t}function oz(t){return function(n,r){let{$from:s,$to:a}=n.selection,i=s.blockRange(a,l=>l.childCount>0&&l.firstChild.type==t);return i?r?s.node(i.depth-1).type==t?lpe(n,r,t,i):cpe(n,r,i):!0:!1}}function lpe(t,n,r,s){let a=t.tr,i=s.end,l=s.$to.end(s.depth);i<l&&(a.step(new sn(i-1,l,i,l,new de(Z.from(r.create(null,s.parent.copy())),1,0),1,!0)),s=new Tx(a.doc.resolve(s.$from.pos),a.doc.resolve(l),s.depth));const c=ql(s);if(c==null)return!1;a.lift(s,c);let d=a.doc.resolve(a.mapping.map(i,-1)-1);return _a(a.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&a.join(d.pos),n(a.scrollIntoView()),!0}function cpe(t,n,r){let s=t.tr,a=r.parent;for(let m=r.end,g=r.endIndex-1,y=r.startIndex;g>y;g--)m-=a.child(g).nodeSize,s.delete(m-1,m+1);let i=s.doc.resolve(r.start),l=i.nodeAfter;if(s.mapping.map(r.end)!=r.start+i.nodeAfter.nodeSize)return!1;let c=r.startIndex==0,d=r.endIndex==a.childCount,u=i.node(-1),f=i.index(-1);if(!u.canReplace(f+(c?0:1),f+1,l.content.append(d?Z.empty:Z.from(a))))return!1;let p=i.pos,h=p+l.nodeSize;return s.step(new sn(p-(c?1:0),h+(d?1:0),p+1,h-1,new de((c?Z.empty:Z.from(a.copy(Z.empty))).append(d?Z.empty:Z.from(a.copy(Z.empty))),c?0:1,d?0:1),c?0:1)),n(s.scrollIntoView()),!0}function lz(t){return function(n,r){let{$from:s,$to:a}=n.selection,i=s.blockRange(a,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let l=i.startIndex;if(l==0)return!1;let c=i.parent,d=c.child(l-1);if(d.type!=t)return!1;if(r){let u=d.lastChild&&d.lastChild.type==c.type,f=Z.from(u?t.create():null),p=new de(Z.from(t.create(null,Z.from(c.type.create(null,f)))),u?3:1,0),h=i.start,m=i.end;r(n.tr.step(new sn(h-(u?3:1),m,h,m,p,1,!0)).scrollIntoView())}return!0}}const Gl=function(t){for(var n=0;;n++)if(t=t.previousSibling,!t)return n},cz=function(t,n,r,s){return r&&(jT(t,n,r,s,-1)||jT(t,n,r,s,1))},dpe=/^(img|br|input|textarea|hr)$/i;function jT(t,n,r,s,a){for(var i;;){if(t==r&&n==s)return!0;if(n==(a<0?0:Rx(t))){let l=t.parentNode;if(!l||l.nodeType!=1||Ik(t)||dpe.test(t.nodeName)||t.contentEditable=="false")return!1;n=Gl(t)+(a<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[n+(a<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((i=l.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)n+=a;else return!1;else t=l,n=a<0?Rx(t):0}else return!1}}function Rx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function upe(t,n,r){for(let s=n==0,a=n==Rx(t);s||a;){if(t==r)return!0;let i=Gl(t);if(t=t.parentNode,!t)return!1;s=s&&i==0,a=a&&i==Rx(t)}}function Ik(t){let n;for(let r=t;r&&!(n=r.pmViewDesc);r=r.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==t||n.contentDOM==t)}const dz=function(t){return t.focusNode&&cz(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function uz(t,n){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=n,r}const ga=typeof navigator<"u"?navigator:null,NT=typeof document<"u"?document:null,Po=ga&&ga.userAgent||"",zj=/Edge\/(\d+)/.exec(Po),fz=/MSIE \d/.exec(Po),Vj=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Po),Np=!!(fz||Vj||zj),pz=fz?document.documentMode:Vj?+Vj[1]:zj?+zj[1]:0,Fy=!Np&&/gecko\/(\d+)/i.test(Po);Fy&&+(/Firefox\/(\d+)/.exec(Po)||[0,0])[1];const Uj=!Np&&/Chrome\/(\d+)/.exec(Po),Ao=!!Uj,hz=Uj?+Uj[1]:0,Yl=!Np&&!!ga&&/Apple Computer/.test(ga.vendor),Dk=Yl&&(/Mobile\/\w+/.test(Po)||!!ga&&ga.maxTouchPoints>2),Zr=Dk||(ga?/Mac/.test(ga.platform):!1),fpe=ga?/Win/.test(ga.platform):!1,Sp=/Android \d/.test(Po),Lk=!!NT&&"webkitFontSmoothing"in NT.documentElement.style,ppe=Lk?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hpe(t,n=null){let r=t.domSelectionRange(),s=t.state.doc;if(!r.focusNode)return null;let a=t.docView.nearestDesc(r.focusNode),i=a&&a.size==0,l=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(l<0)return null;let c=s.resolve(l),d,u;if(dz(r)){for(d=l;a&&!a.node;)a=a.parent;let p=a.node;if(a&&p.isAtom&&ke.isSelectable(p)&&a.parent&&!(p.isInline&&upe(r.focusNode,r.focusOffset,a.dom))){let h=a.posBefore;u=new ke(l==h?c:s.resolve(h))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let p=l,h=l;for(let m=0;m<r.rangeCount;m++){let g=r.getRangeAt(m);p=Math.min(p,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(p<0)return null;[d,l]=h==t.state.selection.anchor?[h,p]:[p,h],c=s.resolve(l)}else d=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(d<0)return null}let f=s.resolve(d);if(!u){let p=n=="pointer"||t.state.selection.head<c.pos&&!i?1:-1;u=xz(t,f,c,p)}return u}function mz(t){return t.editable?t.hasFocus():ype(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function $k(t,n=!1){let r=t.state.selection;if(gpe(t,r),!!mz(t)){if(!n&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ao){let s=t.domSelectionRange(),a=t.domObserver.currentSelection;if(s.anchorNode&&a.anchorNode&&cz(s.anchorNode,s.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)xpe(t);else{let{anchor:s,head:a}=r,i,l;ST&&!(r instanceof ve)&&(r.$from.parent.inlineContent||(i=kT(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(l=kT(t,r.to))),t.docView.setSelection(s,a,t,n),ST&&(i&&CT(i),l&&CT(l)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&mpe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ST=Yl||Ao&&hz<63;function kT(t,n){let{node:r,offset:s}=t.docView.domFromPos(n,0),a=s<r.childNodes.length?r.childNodes[s]:null,i=s?r.childNodes[s-1]:null;if(Yl&&a&&a.contentEditable=="false")return cb(a);if((!a||a.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(a)return cb(a);if(i)return cb(i)}}function cb(t){return t.contentEditable="true",Yl&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function CT(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function mpe(t){let n=t.dom.ownerDocument;n.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),s=r.anchorNode,a=r.anchorOffset;n.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=s||r.anchorOffset!=a)&&(n.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!mz(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function xpe(t){let n=t.domSelection();if(!n)return;let r=t.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.collapse(r.parentNode,Gl(r)+1):n.collapse(r,0),!s&&!t.state.selection.visible&&Np&&pz<=11&&(r.disabled=!0,r.disabled=!1)}function gpe(t,n){if(n instanceof ke){let r=t.docView.descAt(n.from);r!=t.lastSelectedViewDesc&&(_T(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else _T(t)}function _T(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function xz(t,n,r,s){return t.someProp("createSelectionBetween",a=>a(t,n,r))||ve.between(n,r,s)}function ype(t){let n=t.domSelectionRange();if(!n.anchorNode)return!1;try{return t.dom.contains(n.anchorNode.nodeType==3?n.anchorNode.parentNode:n.anchorNode)&&(t.editable||t.dom.contains(n.focusNode.nodeType==3?n.focusNode.parentNode:n.focusNode))}catch{return!1}}function Hj(t,n){let{$anchor:r,$head:s}=t.selection,a=n>0?r.max(s):r.min(s),i=a.parent.inlineContent?a.depth?t.doc.resolve(n>0?a.after():a.before()):null:a;return i&&Ae.findFrom(i,n)}function Ti(t,n){return t.dispatch(t.state.tr.setSelection(n).scrollIntoView()),!0}function PT(t,n,r){let s=t.state.selection;if(s instanceof ve)if(r.indexOf("s")>-1){let{$head:a}=s,i=a.textOffset?null:n<0?a.nodeBefore:a.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let l=t.state.doc.resolve(a.pos+i.nodeSize*(n<0?-1:1));return Ti(t,new ve(s.$anchor,l))}else if(s.empty){if(t.endOfTextblock(n>0?"forward":"backward")){let a=Hj(t.state,n);return a&&a instanceof ke?Ti(t,a):!1}else if(!(Zr&&r.indexOf("m")>-1)){let a=s.$head,i=a.textOffset?null:n<0?a.nodeBefore:a.nodeAfter,l;if(!i||i.isText)return!1;let c=n<0?a.pos-i.nodeSize:a.pos;return i.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?ke.isSelectable(i)?Ti(t,new ke(n<0?t.state.doc.resolve(a.pos-i.nodeSize):a)):Lk?Ti(t,new ve(t.state.doc.resolve(n<0?c:c+i.nodeSize))):!1:!1}}else return!1;else{if(s instanceof ke&&s.node.isInline)return Ti(t,new ve(n>0?s.$to:s.$from));{let a=Hj(t.state,n);return a?Ti(t,a):!1}}}function Ix(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function of(t,n){let r=t.pmViewDesc;return r&&r.size==0&&(n<0||t.nextSibling||t.nodeName!="BR")}function oc(t,n){return n<0?vpe(t):bpe(t)}function vpe(t){let n=t.domSelectionRange(),r=n.focusNode,s=n.focusOffset;if(!r)return;let a,i,l=!1;for(Fy&&r.nodeType==1&&s<Ix(r)&&of(r.childNodes[s],-1)&&(l=!0);;)if(s>0){if(r.nodeType!=1)break;{let c=r.childNodes[s-1];if(of(c,-1))a=r,i=--s;else if(c.nodeType==3)r=c,s=r.nodeValue.length;else break}}else{if(gz(r))break;{let c=r.previousSibling;for(;c&&of(c,-1);)a=r.parentNode,i=Gl(c),c=c.previousSibling;if(c)r=c,s=Ix(r);else{if(r=r.parentNode,r==t.dom)break;s=0}}}l?Wj(t,r,s):a&&Wj(t,a,i)}function bpe(t){let n=t.domSelectionRange(),r=n.focusNode,s=n.focusOffset;if(!r)return;let a=Ix(r),i,l;for(;;)if(s<a){if(r.nodeType!=1)break;let c=r.childNodes[s];if(of(c,1))i=r,l=++s;else break}else{if(gz(r))break;{let c=r.nextSibling;for(;c&&of(c,1);)i=c.parentNode,l=Gl(c)+1,c=c.nextSibling;if(c)r=c,s=0,a=Ix(r);else{if(r=r.parentNode,r==t.dom)break;s=a=0}}}i&&Wj(t,i,l)}function gz(t){let n=t.pmViewDesc;return n&&n.node&&n.node.isBlock}function wpe(t,n){for(;t&&n==t.childNodes.length&&!Ik(t);)n=Gl(t)+1,t=t.parentNode;for(;t&&n<t.childNodes.length;){let r=t.childNodes[n];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,n=0}}function jpe(t,n){for(;t&&!n&&!Ik(t);)n=Gl(t),t=t.parentNode;for(;t&&n;){let r=t.childNodes[n-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,n=t.childNodes.length}}function Wj(t,n,r){if(n.nodeType!=3){let i,l;(l=wpe(n,r))?(n=l,r=0):(i=jpe(n,r))&&(n=i,r=i.nodeValue.length)}let s=t.domSelection();if(!s)return;if(dz(s)){let i=document.createRange();i.setEnd(n,r),i.setStart(n,r),s.removeAllRanges(),s.addRange(i)}else s.extend&&s.extend(n,r);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&$k(t)},50)}function AT(t,n){let r=t.state.doc.resolve(n);if(!(Ao||fpe)&&r.parent.inlineContent){let a=t.coordsAtPos(n);if(n>r.start()){let i=t.coordsAtPos(n-1),l=(i.top+i.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(i.left-a.left)>1)return i.left<a.left?"ltr":"rtl"}if(n<r.end()){let i=t.coordsAtPos(n+1),l=(i.top+i.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(i.left-a.left)>1)return i.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function ET(t,n,r){let s=t.state.selection;if(s instanceof ve&&!s.empty||r.indexOf("s")>-1||Zr&&r.indexOf("m")>-1)return!1;let{$from:a,$to:i}=s;if(!a.parent.inlineContent||t.endOfTextblock(n<0?"up":"down")){let l=Hj(t.state,n);if(l&&l instanceof ke)return Ti(t,l)}if(!a.parent.inlineContent){let l=n<0?a:i,c=s instanceof br?Ae.near(l,n):Ae.findFrom(l,n);return c?Ti(t,c):!1}return!1}function TT(t,n){if(!(t.state.selection instanceof ve))return!0;let{$head:r,$anchor:s,empty:a}=t.state.selection;if(!r.sameParent(s))return!0;if(!a)return!1;if(t.endOfTextblock(n>0?"forward":"backward"))return!0;let i=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){let l=t.state.tr;return n<0?l.delete(r.pos-i.nodeSize,r.pos):l.delete(r.pos,r.pos+i.nodeSize),t.dispatch(l),!0}return!1}function MT(t,n,r){t.domObserver.stop(),n.contentEditable=r,t.domObserver.start()}function Npe(t){if(!Yl||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:r}=t.domSelectionRange();if(n&&n.nodeType==1&&r==0&&n.firstChild&&n.firstChild.contentEditable=="false"){let s=n.firstChild;MT(t,s,"true"),setTimeout(()=>MT(t,s,"false"),20)}return!1}function Spe(t){let n="";return t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n}function kpe(t,n){let r=n.keyCode,s=Spe(n);if(r==8||Zr&&r==72&&s=="c")return TT(t,-1)||oc(t,-1);if(r==46&&!n.shiftKey||Zr&&r==68&&s=="c")return TT(t,1)||oc(t,1);if(r==13||r==27)return!0;if(r==37||Zr&&r==66&&s=="c"){let a=r==37?AT(t,t.state.selection.from)=="ltr"?-1:1:-1;return PT(t,a,s)||oc(t,a)}else if(r==39||Zr&&r==70&&s=="c"){let a=r==39?AT(t,t.state.selection.from)=="ltr"?1:-1:1;return PT(t,a,s)||oc(t,a)}else{if(r==38||Zr&&r==80&&s=="c")return ET(t,-1,s)||oc(t,-1);if(r==40||Zr&&r==78&&s=="c")return Npe(t)||ET(t,1,s)||oc(t,1);if(s==(Zr?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function yz(t,n){t.someProp("transformCopied",m=>{n=m(n,t)});let r=[],{content:s,openStart:a,openEnd:i}=n;for(;a>1&&i>1&&s.childCount==1&&s.firstChild.childCount==1;){a--,i--;let m=s.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),s=m.content}let l=t.someProp("clipboardSerializer")||Iy.fromSchema(t.state.schema),c=Sz(),d=c.createElement("div");d.appendChild(l.serializeFragment(s,{document:c}));let u=d.firstChild,f,p=0;for(;u&&u.nodeType==1&&(f=Nz[u.nodeName.toLowerCase()]);){for(let m=f.length-1;m>=0;m--){let g=c.createElement(f[m]);for(;d.firstChild;)g.appendChild(d.firstChild);d.appendChild(g),p++}u=d.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${a} ${i}${p?` -${p}`:""} ${JSON.stringify(r)}`);let h=t.someProp("clipboardTextSerializer",m=>m(n,t))||n.content.textBetween(0,n.content.size,`

`);return{dom:d,text:h,slice:n}}function vz(t,n,r,s,a){let i=a.parent.type.spec.code,l,c;if(!r&&!n)return null;let d=!!n&&(s||i||!r);if(d){if(t.someProp("transformPastedText",h=>{n=h(n,i||s,t)}),i)return c=new de(Z.from(t.state.schema.text(n.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{c=h(c,t,!0)}),c;let p=t.someProp("clipboardTextParser",h=>h(n,a,s,t));if(p)c=p;else{let h=a.marks(),{schema:m}=t.state,g=Iy.fromSchema(m);l=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(y=>{let v=l.appendChild(document.createElement("p"));y&&v.appendChild(g.serializeNode(m.text(y,h)))})}}else t.someProp("transformPastedHTML",p=>{r=p(r,t)}),l=Ape(r),Lk&&Epe(l);let u=l&&l.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let p=+f[3];p>0;p--){let h=l.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;l=h}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||fa.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||f),context:a,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Cpe.test(h.parentNode.nodeName)?{ignore:!0}:null}})),f)c=Tpe(OT(c,+f[1],+f[2]),f[4]);else if(c=de.maxOpen(_pe(c.content,a),!0),c.openStart||c.openEnd){let p=0,h=0;for(let m=c.content.firstChild;p<c.openStart&&!m.type.spec.isolating;p++,m=m.firstChild);for(let m=c.content.lastChild;h<c.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);c=OT(c,p,h)}return t.someProp("transformPasted",p=>{c=p(c,t,d)}),c}const Cpe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _pe(t,n){if(t.childCount<2)return t;for(let r=n.depth;r>=0;r--){let a=n.node(r).contentMatchAt(n.index(r)),i,l=[];if(t.forEach(c=>{if(!l)return;let d=a.findWrapping(c.type),u;if(!d)return l=null;if(u=l.length&&i.length&&wz(d,i,c,l[l.length-1],0))l[l.length-1]=u;else{l.length&&(l[l.length-1]=jz(l[l.length-1],i.length));let f=bz(c,d);l.push(f),a=a.matchType(f.type),i=d}}),l)return Z.from(l)}return t}function bz(t,n,r=0){for(let s=n.length-1;s>=r;s--)t=n[s].create(null,Z.from(t));return t}function wz(t,n,r,s,a){if(a<t.length&&a<n.length&&t[a]==n[a]){let i=wz(t,n,r,s.lastChild,a+1);if(i)return s.copy(s.content.replaceChild(s.childCount-1,i));if(s.contentMatchAt(s.childCount).matchType(a==t.length-1?r.type:t[a+1]))return s.copy(s.content.append(Z.from(bz(r,t,a+1))))}}function jz(t,n){if(n==0)return t;let r=t.content.replaceChild(t.childCount-1,jz(t.lastChild,n-1)),s=t.contentMatchAt(t.childCount).fillBefore(Z.empty,!0);return t.copy(r.append(s))}function Kj(t,n,r,s,a,i){let l=n<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(i=0),a<s-1&&(c=Kj(c,n,r,s,a+1,i)),a>=r&&(c=n<0?l.contentMatchAt(0).fillBefore(c,i<=a).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(Z.empty,!0))),t.replaceChild(n<0?0:t.childCount-1,l.copy(c))}function OT(t,n,r){return n<t.openStart&&(t=new de(Kj(t.content,-1,n,t.openStart,0,t.openEnd),n,t.openEnd)),r<t.openEnd&&(t=new de(Kj(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const Nz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let RT=null;function Sz(){return RT||(RT=document.implementation.createHTMLDocument("title"))}let db=null;function Ppe(t){let n=window.trustedTypes;return n?(db||(db=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),db.createHTML(t)):t}function Ape(t){let n=/^(\s*<meta [^>]*>)*/.exec(t);n&&(t=t.slice(n[0].length));let r=Sz().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(t),a;if((a=s&&Nz[s[1].toLowerCase()])&&(t=a.map(i=>"<"+i+">").join("")+t+a.map(i=>"</"+i+">").reverse().join("")),r.innerHTML=Ppe(t),a)for(let i=0;i<a.length;i++)r=r.querySelector(a[i])||r;return r}function Epe(t){let n=t.querySelectorAll(Ao?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<n.length;r++){let s=n[r];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),s)}}function Tpe(t,n){if(!t.size)return t;let r=t.content.firstChild.type.schema,s;try{s=JSON.parse(n)}catch{return t}let{content:a,openStart:i,openEnd:l}=t;for(let c=s.length-2;c>=0;c-=2){let d=r.nodes[s[c]];if(!d||d.hasRequiredAttrs())break;a=Z.from(d.create(s[c+1],a)),i++,l++}return new de(a,i,l)}const Ws={},Br={};function Hi(t,n){t.input.lastSelectionOrigin=n,t.input.lastSelectionTime=Date.now()}Br.keydown=(t,n)=>{let r=n;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!Cz(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Sp&&Ao&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Dk&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let s=Date.now();t.input.lastIOSEnter=s,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==s&&(t.someProp("handleKeyDown",a=>a(t,uz(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",s=>s(t,r))||kpe(t,r)?r.preventDefault():Hi(t,"key")};Br.keyup=(t,n)=>{n.keyCode==16&&(t.input.shiftKey=!1)};Br.keypress=(t,n)=>{let r=n;if(Cz(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||Zr&&r.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,r))){r.preventDefault();return}let s=t.state.selection;if(!(s instanceof ve)||!s.$from.sameParent(s.$to)){let a=String.fromCharCode(r.charCode),i=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",l=>l(t,s.$from.pos,s.$to.pos,a,i))&&t.dispatch(i()),r.preventDefault()}};function By(t){return{left:t.clientX,top:t.clientY}}function Mpe(t,n){let r=n.x-t.clientX,s=n.y-t.clientY;return r*r+s*s<100}function Fk(t,n,r,s,a){if(s==-1)return!1;let i=t.state.doc.resolve(s);for(let l=i.depth+1;l>0;l--)if(t.someProp(n,c=>l>i.depth?c(t,r,i.nodeAfter,i.before(l),a,!0):c(t,r,i.node(l),i.before(l),a,!1)))return!0;return!1}function Gc(t,n,r){if(t.focused||t.focus(),t.state.selection.eq(n))return;let s=t.state.tr.setSelection(n);s.setMeta("pointer",!0),t.dispatch(s)}function Ope(t,n){if(n==-1)return!1;let r=t.state.doc.resolve(n),s=r.nodeAfter;return s&&s.isAtom&&ke.isSelectable(s)?(Gc(t,new ke(r)),!0):!1}function Rpe(t,n){if(n==-1)return!1;let r=t.state.selection,s,a;r instanceof ke&&(s=r.node);let i=t.state.doc.resolve(n);for(let l=i.depth+1;l>0;l--){let c=l>i.depth?i.nodeAfter:i.node(l);if(ke.isSelectable(c)){s&&r.$from.depth>0&&l>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?a=i.before(r.$from.depth):a=i.before(l);break}}return a!=null?(Gc(t,ke.create(t.state.doc,a)),!0):!1}function Ipe(t,n,r,s,a){return Fk(t,"handleClickOn",n,r,s)||t.someProp("handleClick",i=>i(t,n,s))||(a?Rpe(t,r):Ope(t,r))}function Dpe(t,n,r,s){return Fk(t,"handleDoubleClickOn",n,r,s)||t.someProp("handleDoubleClick",a=>a(t,n,s))}function Lpe(t,n,r,s){return Fk(t,"handleTripleClickOn",n,r,s)||t.someProp("handleTripleClick",a=>a(t,n,s))||$pe(t,r,s)}function $pe(t,n,r){if(r.button!=0)return!1;let s=t.state.doc;if(n==-1)return s.inlineContent?(Gc(t,ve.create(s,0,s.content.size)),!0):!1;let a=s.resolve(n);for(let i=a.depth+1;i>0;i--){let l=i>a.depth?a.nodeAfter:a.node(i),c=a.before(i);if(l.inlineContent)Gc(t,ve.create(s,c+1,c+1+l.content.size));else if(ke.isSelectable(l))Gc(t,ke.create(s,c));else continue;return!0}}function Bk(t){return Dx(t)}const kz=Zr?"metaKey":"ctrlKey";Ws.mousedown=(t,n)=>{let r=n;t.input.shiftKey=r.shiftKey;let s=Bk(t),a=Date.now(),i="singleClick";a-t.input.lastClick.time<500&&Mpe(r,t.input.lastClick)&&!r[kz]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:a,x:r.clientX,y:r.clientY,type:i,button:r.button};let l=t.posAtCoords(By(r));l&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Fpe(t,l,r,!!s)):(i=="doubleClick"?Dpe:Lpe)(t,l.pos,l.inside,r)?r.preventDefault():Hi(t,"pointer"))};class Fpe{constructor(n,r,s,a){this.view=n,this.pos=r,this.event=s,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!s[kz],this.allowDefault=s.shiftKey;let i,l;if(r.inside>-1)i=n.state.doc.nodeAt(r.inside),l=r.inside;else{let f=n.state.doc.resolve(r.pos);i=f.parent,l=f.depth?f.before():0}const c=a?null:s.target,d=c?n.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:u}=n.state;(s.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof ke&&u.from<=l&&u.to>l)&&(this.mightDrag={node:i,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fy&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),Hi(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>$k(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(By(n))),this.updateAllowDefault(n),this.allowDefault||!r?Hi(this.view,"pointer"):Ipe(this.view,r.pos,r.inside,n,this.selectNode)?n.preventDefault():n.button==0&&(this.flushed||Yl&&this.mightDrag&&!this.mightDrag.node.isAtom||Ao&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(Gc(this.view,Ae.near(this.view.state.doc.resolve(r.pos))),n.preventDefault()):Hi(this.view,"pointer")}move(n){this.updateAllowDefault(n),Hi(this.view,"pointer"),n.buttons==0&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}Ws.touchstart=t=>{t.input.lastTouch=Date.now(),Bk(t),Hi(t,"pointer")};Ws.touchmove=t=>{t.input.lastTouch=Date.now(),Hi(t,"pointer")};Ws.contextmenu=t=>Bk(t);function Cz(t,n){return t.composing?!0:Yl&&Math.abs(n.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Bpe=Sp?5e3:-1;Br.compositionstart=Br.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:n}=t,r=n.selection.$to;if(n.selection instanceof ve&&(n.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),Dx(t,!0),t.markCursor=null;else if(Dx(t,!n.selection.empty),Fy&&n.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let s=t.domSelectionRange();for(let a=s.focusNode,i=s.focusOffset;a&&a.nodeType==1&&i!=0;){let l=i<0?a.lastChild:a.childNodes[i-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else a=l,i=-1}}t.input.composing=!0}_z(t,Bpe)};Br.compositionend=(t,n)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=n.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,_z(t,20))};function _z(t,n){clearTimeout(t.input.composingTimeout),n>-1&&(t.input.composingTimeout=setTimeout(()=>Dx(t),n))}function zpe(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Vpe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Vpe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Dx(t,n=!1){if(!(Sp&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),zpe(t),n||t.docView&&t.docView.dirty){let r=hpe(t),s=t.state.selection;return r&&!r.eq(s)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||n)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Upe(t,n){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(n),r.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),a=document.createRange();a.selectNodeContents(n),t.dom.blur(),s.removeAllRanges(),s.addRange(a),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Vf=Np&&pz<15||Dk&&ppe<604;Ws.copy=Br.cut=(t,n)=>{let r=n,s=t.state.selection,a=r.type=="cut";if(s.empty)return;let i=Vf?null:r.clipboardData,l=s.content(),{dom:c,text:d}=yz(t,l);i?(r.preventDefault(),i.clearData(),i.setData("text/html",c.innerHTML),i.setData("text/plain",d)):Upe(t,c),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Hpe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Wpe(t,n){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,s=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),s.parentNode&&s.parentNode.removeChild(s),r?qj(t,s.value,null,a,n):qj(t,s.textContent,s.innerHTML,a,n)},50)}function qj(t,n,r,s,a){let i=vz(t,n,r,s,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,a,i||de.empty)))return!0;if(!i)return!1;let l=Hpe(i),c=l?t.state.tr.replaceSelectionWith(l,s):t.state.tr.replaceSelection(i);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Pz(t){let n=t.getData("text/plain")||t.getData("Text");if(n)return n;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Br.paste=(t,n)=>{let r=n;if(t.composing&&!Sp)return;let s=Vf?null:r.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;s&&qj(t,Pz(s),s.getData("text/html"),a,r)?r.preventDefault():Wpe(t,r)};class Kpe{constructor(n,r,s){this.slice=n,this.move=r,this.node=s}}const qpe=Zr?"altKey":"ctrlKey";function Az(t,n){let r=t.someProp("dragCopies",s=>!s(n));return r??!n[qpe]}Ws.dragstart=(t,n)=>{let r=n,s=t.input.mouseDown;if(s&&s.done(),!r.dataTransfer)return;let a=t.state.selection,i=a.empty?null:t.posAtCoords(By(r)),l;if(!(i&&i.pos>=a.from&&i.pos<=(a instanceof ke?a.to-1:a.to))){if(s&&s.mightDrag)l=ke.create(t.state.doc,s.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let p=t.docView.nearestDesc(r.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(l=ke.create(t.state.doc,p.posBefore))}}let c=(l||t.state.selection).content(),{dom:d,text:u,slice:f}=yz(t,c);(!r.dataTransfer.files.length||!Ao||hz>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Vf?"Text":"text/html",d.innerHTML),r.dataTransfer.effectAllowed="copyMove",Vf||r.dataTransfer.setData("text/plain",u),t.dragging=new Kpe(f,Az(t,r),l)};Ws.dragend=t=>{let n=t.dragging;window.setTimeout(()=>{t.dragging==n&&(t.dragging=null)},50)};Br.dragover=Br.dragenter=(t,n)=>n.preventDefault();Br.drop=(t,n)=>{let r=n,s=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let a=t.posAtCoords(By(r));if(!a)return;let i=t.state.doc.resolve(a.pos),l=s&&s.slice;l?t.someProp("transformPasted",g=>{l=g(l,t,!1)}):l=vz(t,Pz(r.dataTransfer),Vf?null:r.dataTransfer.getData("text/html"),!1,i);let c=!!(s&&Az(t,r));if(t.someProp("handleDrop",g=>g(t,r,l||de.empty,c))){r.preventDefault();return}if(!l)return;r.preventDefault();let d=l?DB(t.state.doc,i.pos,l):i.pos;d==null&&(d=i.pos);let u=t.state.tr;if(c){let{node:g}=s;g?g.replace(u):u.deleteSelection()}let f=u.mapping.map(d),p=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,h=u.doc;if(p?u.replaceRangeWith(f,f,l.content.firstChild):u.replaceRange(f,f,l),u.doc.eq(h))return;let m=u.doc.resolve(f);if(p&&ke.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild))u.setSelection(new ke(m));else{let g=u.mapping.map(d);u.mapping.maps[u.mapping.maps.length-1].forEach((y,v,b,w)=>g=w),u.setSelection(xz(t,m,u.doc.resolve(g)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ws.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&$k(t)},20))};Ws.blur=(t,n)=>{let r=n;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ws.beforeinput=(t,n)=>{if(Ao&&Sp&&n.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:s}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=s||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,uz(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in Br)Ws[t]=Br[t];function Uf(t,n){if(t==n)return!0;for(let r in t)if(t[r]!==n[r])return!1;for(let r in n)if(!(r in t))return!1;return!0}class Lx{constructor(n,r){this.toDOM=n,this.spec=r||fl,this.side=this.spec.side||0}map(n,r,s,a){let{pos:i,deleted:l}=n.mapResult(r.from+a,this.side<0?-1:1);return l?null:new Rr(i-s,i-s,this)}valid(){return!0}eq(n){return this==n||n instanceof Lx&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&Uf(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class ro{constructor(n,r){this.attrs=n,this.spec=r||fl}map(n,r,s,a){let i=n.map(r.from+a,this.spec.inclusiveStart?-1:1)-s,l=n.map(r.to+a,this.spec.inclusiveEnd?1:-1)-s;return i>=l?null:new Rr(i,l,this)}valid(n,r){return r.from<r.to}eq(n){return this==n||n instanceof ro&&Uf(this.attrs,n.attrs)&&Uf(this.spec,n.spec)}static is(n){return n.type instanceof ro}destroy(){}}class zk{constructor(n,r){this.attrs=n,this.spec=r||fl}map(n,r,s,a){let i=n.mapResult(r.from+a,1);if(i.deleted)return null;let l=n.mapResult(r.to+a,-1);return l.deleted||l.pos<=i.pos?null:new Rr(i.pos-s,l.pos-s,this)}valid(n,r){let{index:s,offset:a}=n.content.findIndex(r.from),i;return a==r.from&&!(i=n.child(s)).isText&&a+i.nodeSize==r.to}eq(n){return this==n||n instanceof zk&&Uf(this.attrs,n.attrs)&&Uf(this.spec,n.spec)}destroy(){}}class Rr{constructor(n,r,s){this.from=n,this.to=r,this.type=s}copy(n,r){return new Rr(n,r,this.type)}eq(n,r=0){return this.type.eq(n.type)&&this.from+r==n.from&&this.to+r==n.to}map(n,r,s){return this.type.map(n,this,r,s)}static widget(n,r,s){return new Rr(n,n,new Lx(r,s))}static inline(n,r,s,a){return new Rr(n,r,new ro(s,a))}static node(n,r,s,a){return new Rr(n,r,new zk(s,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof ro}get widget(){return this.type instanceof Lx}}const fc=[],fl={};class Dt{constructor(n,r){this.local=n.length?n:fc,this.children=r.length?r:fc}static create(n,r){return r.length?$x(r,n,0,fl):Xn}find(n,r,s){let a=[];return this.findInner(n??0,r??1e9,a,0,s),a}findInner(n,r,s,a,i){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=r&&c.to>=n&&(!i||i(c.spec))&&s.push(c.copy(c.from+a,c.to+a))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<r&&this.children[l+1]>n){let c=this.children[l]+1;this.children[l+2].findInner(n-c,r-c,s,a+c,i)}}map(n,r,s){return this==Xn||n.maps.length==0?this:this.mapInner(n,r,0,0,s||fl)}mapInner(n,r,s,a,i){let l;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(n,s,a);d&&d.type.valid(r,d)?(l||(l=[])).push(d):i.onRemove&&i.onRemove(this.local[c].spec)}return this.children.length?Gpe(this.children,l||[],n,r,s,a,i):l?new Dt(l.sort(pl),fc):Xn}add(n,r){return r.length?this==Xn?Dt.create(n,r):this.addInner(n,r,0):this}addInner(n,r,s){let a,i=0;n.forEach((c,d)=>{let u=d+s,f;if(f=Tz(r,c,u)){for(a||(a=this.children.slice());i<a.length&&a[i]<d;)i+=3;a[i]==d?a[i+2]=a[i+2].addInner(c,f,u+1):a.splice(i,0,d,d+c.nodeSize,$x(f,c,u+1,fl)),i+=3}});let l=Ez(i?Mz(r):r,-s);for(let c=0;c<l.length;c++)l[c].type.valid(n,l[c])||l.splice(c--,1);return new Dt(l.length?this.local.concat(l).sort(pl):this.local,a||this.children)}remove(n){return n.length==0||this==Xn?this:this.removeInner(n,0)}removeInner(n,r){let s=this.children,a=this.local;for(let i=0;i<s.length;i+=3){let l,c=s[i]+r,d=s[i+1]+r;for(let f=0,p;f<n.length;f++)(p=n[f])&&p.from>c&&p.to<d&&(n[f]=null,(l||(l=[])).push(p));if(!l)continue;s==this.children&&(s=this.children.slice());let u=s[i+2].removeInner(l,c+1);u!=Xn?s[i+2]=u:(s.splice(i,3),i-=3)}if(a.length){for(let i=0,l;i<n.length;i++)if(l=n[i])for(let c=0;c<a.length;c++)a[c].eq(l,r)&&(a==this.local&&(a=this.local.slice()),a.splice(c--,1))}return s==this.children&&a==this.local?this:a.length||s.length?new Dt(a,s):Xn}forChild(n,r){if(this==Xn)return this;if(r.isLeaf)return Dt.empty;let s,a;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=n){this.children[c]==n&&(s=this.children[c+2]);break}let i=n+1,l=i+r.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<l&&d.to>i&&d.type instanceof ro){let u=Math.max(i,d.from)-i,f=Math.min(l,d.to)-i;u<f&&(a||(a=[])).push(d.copy(u,f))}}if(a){let c=new Dt(a.sort(pl),fc);return s?new qo([c,s]):c}return s||Xn}eq(n){if(this==n)return!0;if(!(n instanceof Dt)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(n.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=n.children[r]||this.children[r+1]!=n.children[r+1]||!this.children[r+2].eq(n.children[r+2]))return!1;return!0}locals(n){return Vk(this.localsInner(n))}localsInner(n){if(this==Xn)return fc;if(n.inlineContent||!this.local.some(ro.is))return this.local;let r=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof ro||r.push(this.local[s]);return r}forEachSet(n){n(this)}}Dt.empty=new Dt([],[]);Dt.removeOverlap=Vk;const Xn=Dt.empty;class qo{constructor(n){this.members=n}map(n,r){const s=this.members.map(a=>a.map(n,r,fl));return qo.from(s)}forChild(n,r){if(r.isLeaf)return Dt.empty;let s=[];for(let a=0;a<this.members.length;a++){let i=this.members[a].forChild(n,r);i!=Xn&&(i instanceof qo?s=s.concat(i.members):s.push(i))}return qo.from(s)}eq(n){if(!(n instanceof qo)||n.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(n.members[r]))return!1;return!0}locals(n){let r,s=!0;for(let a=0;a<this.members.length;a++){let i=this.members[a].localsInner(n);if(i.length)if(!r)r=i;else{s&&(r=r.slice(),s=!1);for(let l=0;l<i.length;l++)r.push(i[l])}}return r?Vk(s?r:r.sort(pl)):fc}static from(n){switch(n.length){case 0:return Xn;case 1:return n[0];default:return new qo(n.every(r=>r instanceof Dt)?n:n.reduce((r,s)=>r.concat(s instanceof Dt?s:s.members),[]))}}forEachSet(n){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(n)}}function Gpe(t,n,r,s,a,i,l){let c=t.slice();for(let u=0,f=i;u<r.maps.length;u++){let p=0;r.maps[u].forEach((h,m,g,y)=>{let v=y-g-(m-h);for(let b=0;b<c.length;b+=3){let w=c[b+1];if(w<0||h>w+f-p)continue;let j=c[b]+f-p;m>=j?c[b+1]=h<=j?-2:-1:h>=f&&v&&(c[b]+=v,c[b+1]+=v)}p+=v}),f=r.maps[u].map(f,-1)}let d=!1;for(let u=0;u<c.length;u+=3)if(c[u+1]<0){if(c[u+1]==-2){d=!0,c[u+1]=-1;continue}let f=r.map(t[u]+i),p=f-a;if(p<0||p>=s.content.size){d=!0;continue}let h=r.map(t[u+1]+i,-1),m=h-a,{index:g,offset:y}=s.content.findIndex(p),v=s.maybeChild(g);if(v&&y==p&&y+v.nodeSize==m){let b=c[u+2].mapInner(r,v,f+1,t[u]+i+1,l);b!=Xn?(c[u]=p,c[u+1]=m,c[u+2]=b):(c[u+1]=-2,d=!0)}else d=!0}if(d){let u=Ype(c,t,n,r,a,i,l),f=$x(u,s,0,l);n=f.local;for(let p=0;p<c.length;p+=3)c[p+1]<0&&(c.splice(p,3),p-=3);for(let p=0,h=0;p<f.children.length;p+=3){let m=f.children[p];for(;h<c.length&&c[h]<m;)h+=3;c.splice(h,0,f.children[p],f.children[p+1],f.children[p+2])}}return new Dt(n.sort(pl),c)}function Ez(t,n){if(!n||!t.length)return t;let r=[];for(let s=0;s<t.length;s++){let a=t[s];r.push(new Rr(a.from+n,a.to+n,a.type))}return r}function Ype(t,n,r,s,a,i,l){function c(d,u){for(let f=0;f<d.local.length;f++){let p=d.local[f].map(s,a,u);p?r.push(p):l.onRemove&&l.onRemove(d.local[f].spec)}for(let f=0;f<d.children.length;f+=3)c(d.children[f+2],d.children[f]+u+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],n[d]+i+1);return r}function Tz(t,n,r){if(n.isLeaf)return null;let s=r+n.nodeSize,a=null;for(let i=0,l;i<t.length;i++)(l=t[i])&&l.from>r&&l.to<s&&((a||(a=[])).push(l),t[i]=null);return a}function Mz(t){let n=[];for(let r=0;r<t.length;r++)t[r]!=null&&n.push(t[r]);return n}function $x(t,n,r,s){let a=[],i=!1;n.forEach((c,d)=>{let u=Tz(t,c,d+r);if(u){i=!0;let f=$x(u,c,r+d+1,s);f!=Xn&&a.push(d,d+c.nodeSize,f)}});let l=Ez(i?Mz(t):t,-r).sort(pl);for(let c=0;c<l.length;c++)l[c].type.valid(n,l[c])||(s.onRemove&&s.onRemove(l[c].spec),l.splice(c--,1));return l.length||a.length?new Dt(l,a):Xn}function pl(t,n){return t.from-n.from||t.to-n.to}function Vk(t){let n=t;for(let r=0;r<n.length-1;r++){let s=n[r];if(s.from!=s.to)for(let a=r+1;a<n.length;a++){let i=n[a];if(i.from==s.from){i.to!=s.to&&(n==t&&(n=t.slice()),n[a]=i.copy(i.from,s.to),IT(n,a+1,i.copy(s.to,i.to)));continue}else{i.from<s.to&&(n==t&&(n=t.slice()),n[r]=s.copy(s.from,i.from),IT(n,a,s.copy(i.from,s.to)));break}}}return n}function IT(t,n,r){for(;n<t.length&&pl(r,t[n])>0;)n++;t.splice(n,0,r)}var xo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Xpe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Jpe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kn=0;kn<10;kn++)xo[48+kn]=xo[96+kn]=String(kn);for(var kn=1;kn<=24;kn++)xo[kn+111]="F"+kn;for(var kn=65;kn<=90;kn++)xo[kn]=String.fromCharCode(kn+32),Fx[kn]=String.fromCharCode(kn);for(var ub in xo)Fx.hasOwnProperty(ub)||(Fx[ub]=xo[ub]);function Qpe(t){var n=Xpe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Jpe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!n&&t.key||(t.shiftKey?Fx:xo)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const Zpe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),ehe=typeof navigator<"u"&&/Win/.test(navigator.platform);function the(t){let n=t.split(/-(?!$)/),r=n[n.length-1];r=="Space"&&(r=" ");let s,a,i,l;for(let c=0;c<n.length-1;c++){let d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))Zpe?l=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(r="Alt-"+r),a&&(r="Ctrl-"+r),l&&(r="Meta-"+r),i&&(r="Shift-"+r),r}function nhe(t){let n=Object.create(null);for(let r in t)n[the(r)]=t[r];return n}function fb(t,n,r=!0){return n.altKey&&(t="Alt-"+t),n.ctrlKey&&(t="Ctrl-"+t),n.metaKey&&(t="Meta-"+t),r&&n.shiftKey&&(t="Shift-"+t),t}function Oz(t){let n=nhe(t);return function(r,s){let a=Qpe(s),i,l=n[fb(a,s)];if(l&&l(r.state,r.dispatch,r))return!0;if(a.length==1&&a!=" "){if(s.shiftKey){let c=n[fb(a,s,!1)];if(c&&c(r.state,r.dispatch,r))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(ehe&&s.ctrlKey&&s.altKey)&&(i=xo[s.keyCode])&&i!=a){let c=n[fb(i,s)];if(c&&c(r.state,r.dispatch,r))return!0}}return!1}}var rhe=Object.defineProperty,Uk=(t,n)=>{for(var r in n)rhe(t,r,{get:n[r],enumerable:!0})};function Rz(t){const{state:n,transaction:r}=t;let{selection:s}=r,{doc:a}=r,{storedMarks:i}=r;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return i},get selection(){return s},get doc(){return a},get tr(){return s=r.selection,a=r.doc,i=r.storedMarks,r}}}var she=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,{tr:i}=s,l=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>{const p=d(...f)(l);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,r=!0){const{rawCommands:s,editor:a,state:i}=this,{view:l}=a,c=[],d=!!n,u=n||i.tr,f=()=>(!d&&r&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(u),c.every(h=>h===!0)),p={...Object.fromEntries(Object.entries(s).map(([h,m])=>[h,(...y)=>{const v=this.buildProps(u,r),b=m(...y)(v);return c.push(b),p}])),run:f};return p}createCan(n){const{rawCommands:r,state:s}=this,a=!1,i=n||s.tr,l=this.buildProps(i,a);return{...Object.fromEntries(Object.entries(r).map(([d,u])=>[d,(...f)=>u(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(i,a)}}buildProps(n,r=!0){const{rawCommands:s,editor:a,state:i}=this,{view:l}=a,c={tr:n,editor:a,view:l,state:Rz({state:i,transaction:n}),dispatch:r?()=>{}:void 0,chain:()=>this.createChain(n,r),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(s).map(([d,u])=>[d,(...f)=>u(...f)(c)]))}};return c}},Iz={};Uk(Iz,{blur:()=>ahe,clearContent:()=>ihe,clearNodes:()=>ohe,command:()=>lhe,createParagraphNear:()=>che,cut:()=>dhe,deleteCurrentNode:()=>uhe,deleteNode:()=>fhe,deleteRange:()=>phe,deleteSelection:()=>hhe,enter:()=>mhe,exitCode:()=>xhe,extendMarkRange:()=>yhe,first:()=>vhe,focus:()=>jhe,forEach:()=>Nhe,insertContent:()=>She,insertContentAt:()=>_he,joinBackward:()=>Ehe,joinDown:()=>Ahe,joinForward:()=>The,joinItemBackward:()=>Mhe,joinItemForward:()=>Ohe,joinTextblockBackward:()=>Rhe,joinTextblockForward:()=>Ihe,joinUp:()=>Phe,keyboardShortcut:()=>Lhe,lift:()=>$he,liftEmptyBlock:()=>Fhe,liftListItem:()=>Bhe,newlineInCode:()=>zhe,resetAttributes:()=>Vhe,scrollIntoView:()=>Uhe,selectAll:()=>Hhe,selectNodeBackward:()=>Whe,selectNodeForward:()=>Khe,selectParentNode:()=>qhe,selectTextblockEnd:()=>Ghe,selectTextblockStart:()=>Yhe,setContent:()=>Jhe,setMark:()=>dme,setMeta:()=>ume,setNode:()=>fme,setNodeSelection:()=>pme,setTextSelection:()=>hme,sinkListItem:()=>mme,splitBlock:()=>xme,splitListItem:()=>gme,toggleList:()=>yme,toggleMark:()=>vme,toggleNode:()=>bme,toggleWrap:()=>wme,undoInputRule:()=>jme,unsetAllMarks:()=>Nme,unsetMark:()=>Sme,updateAttributes:()=>kme,wrapIn:()=>Cme,wrapInList:()=>_me});var ahe=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(n.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),ihe=(t=!0)=>({commands:n})=>n.setContent("",{emitUpdate:t}),ohe=()=>({state:t,tr:n,dispatch:r})=>{const{selection:s}=n,{ranges:a}=s;return r&&a.forEach(({$from:i,$to:l})=>{t.doc.nodesBetween(i.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:u,mapping:f}=n,p=u.resolve(f.map(d)),h=u.resolve(f.map(d+c.nodeSize)),m=p.blockRange(h);if(!m)return;const g=ql(m);if(c.type.isTextblock){const{defaultType:y}=p.parent.contentMatchAt(p.index());n.setNodeMarkup(m.start,y)}(g||g===0)&&n.lift(m,g)})}),!0},lhe=t=>n=>t(n),che=()=>({state:t,dispatch:n})=>Mk(t,n),dhe=(t,n)=>({editor:r,tr:s})=>{const{state:a}=r,i=a.doc.slice(t.from,t.to);s.deleteRange(t.from,t.to);const l=s.mapping.map(n);return s.insert(l,i.content),s.setSelection(new ve(s.doc.resolve(Math.max(l-1,0)))),!0},uhe=()=>({tr:t,dispatch:n})=>{const{selection:r}=t,s=r.$anchor.node();if(s.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===s.type){if(n){const c=a.before(i),d=a.after(i);t.delete(c,d).scrollIntoView()}return!0}return!1};function Wn(t,n){if(typeof t=="string"){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}var fhe=t=>({tr:n,state:r,dispatch:s})=>{const a=Wn(t,r.schema),i=n.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===a){if(s){const d=i.before(l),u=i.after(l);n.delete(d,u).scrollIntoView()}return!0}return!1},phe=t=>({tr:n,dispatch:r})=>{const{from:s,to:a}=t;return r&&n.delete(s,a),!0},hhe=()=>({state:t,dispatch:n})=>$y(t,n),mhe=()=>({commands:t})=>t.keyboardShortcut("Enter"),xhe=()=>({state:t,dispatch:n})=>ZB(t,n);function ghe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Bx(t,n,r={strict:!0}){const s=Object.keys(n);return s.length?s.every(a=>r.strict?n[a]===t[a]:ghe(n[a])?n[a].test(t[a]):n[a]===t[a]):!0}function Dz(t,n,r={}){return t.find(s=>s.type===n&&Bx(Object.fromEntries(Object.keys(r).map(a=>[a,s.attrs[a]])),r))}function DT(t,n,r={}){return!!Dz(t,n,r)}function Hk(t,n,r){var s;if(!t||!n)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(f=>f.type===n))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(f=>f.type===n)||(r=r||((s=a.node.marks[0])==null?void 0:s.attrs),!Dz([...a.node.marks],n,r)))return;let l=a.index,c=t.start()+a.offset,d=l+1,u=c+a.node.nodeSize;for(;l>0&&DT([...t.parent.child(l-1).marks],n,r);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&DT([...t.parent.child(d).marks],n,r);)u+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:u}}function Eo(t,n){if(typeof t=="string"){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}var yhe=(t,n={})=>({tr:r,state:s,dispatch:a})=>{const i=Eo(t,s.schema),{doc:l,selection:c}=r,{$from:d,from:u,to:f}=c;if(a){const p=Hk(d,i,n);if(p&&p.from<=u&&p.to>=f){const h=ve.create(l,p.from,p.to);r.setSelection(h)}}return!0},vhe=t=>n=>{const r=typeof t=="function"?t(n):t;for(let s=0;s<r.length;s+=1)if(r[s](n))return!0;return!1};function Lz(t){return t instanceof ve}function el(t=0,n=0,r=0){return Math.min(Math.max(t,n),r)}function bhe(t,n=null){if(!n)return null;const r=Ae.atStart(t),s=Ae.atEnd(t);if(n==="start"||n===!0)return r;if(n==="end")return s;const a=r.from,i=s.to;return n==="all"?ve.create(t,el(0,a,i),el(t.content.size,a,i)):ve.create(t,el(n,a,i),el(n,a,i))}function whe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Wk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var jhe=(t=null,n={})=>({editor:r,view:s,tr:a,dispatch:i})=>{n={scrollIntoView:!0,...n};const l=()=>{(Wk()||whe())&&s.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(s.focus(),n!=null&&n.scrollIntoView&&r.commands.scrollIntoView())})};if(s.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!Lz(r.state.selection))return l(),!0;const c=bhe(a.doc,t)||r.state.selection,d=r.state.selection.eq(c);return i&&(d||a.setSelection(c),d&&a.storedMarks&&a.setStoredMarks(a.storedMarks),l()),!0},Nhe=(t,n)=>r=>t.every((s,a)=>n(s,{...r,index:a})),She=(t,n)=>({tr:r,commands:s})=>s.insertContentAt({from:r.selection.from,to:r.selection.to},t,n),$z=t=>{const n=t.childNodes;for(let r=n.length-1;r>=0;r-=1){const s=n[r];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?t.removeChild(s):s.nodeType===1&&$z(s)}return t};function Rh(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const n=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(n,"text/html").body;return $z(r)}function Hf(t,n,r){if(t instanceof no||t instanceof Z)return t;r={slice:!0,parseOptions:{},...r};const s=typeof t=="object"&&t!==null,a=typeof t=="string";if(s)try{if(Array.isArray(t)&&t.length>0)return Z.fromArray(t.map(c=>n.nodeFromJSON(c)));const l=n.nodeFromJSON(t);return r.errorOnInvalidContent&&l.check(),l}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Hf("",n,r)}if(a){if(r.errorOnInvalidContent){let l=!1,c="";const d=new kB({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(l=!0,c=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?fa.fromSchema(d).parseSlice(Rh(t),r.parseOptions):fa.fromSchema(d).parse(Rh(t),r.parseOptions),r.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const i=fa.fromSchema(n);return r.slice?i.parseSlice(Rh(t),r.parseOptions).content:i.parse(Rh(t),r.parseOptions)}return Hf("",n,r)}function khe(t,n,r){const s=t.steps.length-1;if(s<n)return;const a=t.steps[s];if(!(a instanceof en||a instanceof sn))return;const i=t.mapping.maps[s];let l=0;i.forEach((c,d,u,f)=>{l===0&&(l=f)}),t.setSelection(Ae.near(t.doc.resolve(l),r))}var Che=t=>!("type"in t),_he=(t,n,r)=>({tr:s,dispatch:a,editor:i})=>{var l;if(a){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let c;const d=v=>{i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Hf(n,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){d(v)}try{c=Hf(n,i.schema,{parseOptions:u,errorOnInvalidContent:(l=r.errorOnInvalidContent)!=null?l:i.options.enableContentCheck})}catch(v){return d(v),!1}let{from:f,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,m=!0;if((Che(c)?c:[c]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,m=m?v.isBlock:!1}),f===p&&m){const{parent:v}=s.doc.resolve(f);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(f-=1,p+=1)}let y;if(h){if(Array.isArray(n))y=n.map(v=>v.text||"").join("");else if(n instanceof Z){let v="";n.forEach(b=>{b.text&&(v+=b.text)}),y=v}else typeof n=="object"&&n&&n.text?y=n.text:y=n;s.insertText(y,f,p)}else{y=c;const v=s.doc.resolve(f),b=v.node(),w=v.parentOffset===0,j=b.isText||b.isTextblock,N=b.content.size>0;w&&j&&N&&(f=Math.max(0,f-1)),s.replaceWith(f,p,y)}r.updateSelection&&khe(s,s.steps.length-1,-1),r.applyInputRules&&s.setMeta("applyInputRules",{from:f,text:y}),r.applyPasteRules&&s.setMeta("applyPasteRules",{from:f,text:y})}return!0},Phe=()=>({state:t,dispatch:n})=>XB(t,n),Ahe=()=>({state:t,dispatch:n})=>JB(t,n),Ehe=()=>({state:t,dispatch:n})=>Sk(t,n),The=()=>({state:t,dispatch:n})=>_k(t,n),Mhe=()=>({state:t,dispatch:n,tr:r})=>{try{const s=Wd(t.doc,t.selection.$from.pos,-1);return s==null?!1:(r.join(s,2),n&&n(r),!0)}catch{return!1}},Ohe=()=>({state:t,dispatch:n,tr:r})=>{try{const s=Wd(t.doc,t.selection.$from.pos,1);return s==null?!1:(r.join(s,2),n&&n(r),!0)}catch{return!1}},Rhe=()=>({state:t,dispatch:n})=>KB(t,n),Ihe=()=>({state:t,dispatch:n})=>qB(t,n);function Fz(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Dhe(t){const n=t.split(/-(?!$)/);let r=n[n.length-1];r==="Space"&&(r=" ");let s,a,i,l;for(let c=0;c<n.length-1;c+=1){const d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))Wk()||Fz()?l=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(r=`Alt-${r}`),a&&(r=`Ctrl-${r}`),l&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}var Lhe=t=>({editor:n,view:r,tr:s,dispatch:a})=>{const i=Dhe(t).split(/-(?!$)/),l=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),d=n.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,c))});return d==null||d.steps.forEach(u=>{const f=u.map(s.mapping);f&&a&&s.maybeStep(f)}),!0};function Kk(t,n,r={}){const{from:s,to:a,empty:i}=t.selection,l=n?Wn(n,t.schema):null,c=[];t.doc.nodesBetween(s,a,(p,h)=>{if(p.isText)return;const m=Math.max(s,h),g=Math.min(a,h+p.nodeSize);c.push({node:p,from:m,to:g})});const d=a-s,u=c.filter(p=>l?l.name===p.node.type.name:!0).filter(p=>Bx(p.node.attrs,r,{strict:!1}));return i?!!u.length:u.reduce((p,h)=>p+h.to-h.from,0)>=d}var $he=(t,n={})=>({state:r,dispatch:s})=>{const a=Wn(t,r.schema);return Kk(r,a,n)?QB(r,s):!1},Fhe=()=>({state:t,dispatch:n})=>Ok(t,n),Bhe=t=>({state:n,dispatch:r})=>{const s=Wn(t,n.schema);return oz(s)(n,r)},zhe=()=>({state:t,dispatch:n})=>Ek(t,n);function Bz(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function LT(t,n){const r=typeof n=="string"?[n]:n;return Object.keys(t).reduce((s,a)=>(r.includes(a)||(s[a]=t[a]),s),{})}var Vhe=(t,n)=>({tr:r,state:s,dispatch:a})=>{let i=null,l=null;const c=Bz(typeof t=="string"?t:t.name,s.schema);return c?(c==="node"&&(i=Wn(t,s.schema)),c==="mark"&&(l=Eo(t,s.schema)),a&&r.selection.ranges.forEach(d=>{s.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{i&&i===u.type&&r.setNodeMarkup(f,void 0,LT(u.attrs,n)),l&&u.marks.length&&u.marks.forEach(p=>{l===p.type&&r.addMark(f,f+u.nodeSize,l.create(LT(p.attrs,n)))})})}),!0):!1},Uhe=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),Hhe=()=>({tr:t,dispatch:n})=>{if(n){const r=new br(t.doc);t.setSelection(r)}return!0},Whe=()=>({state:t,dispatch:n})=>kk(t,n),Khe=()=>({state:t,dispatch:n})=>Pk(t,n),qhe=()=>({state:t,dispatch:n})=>ez(t,n),Ghe=()=>({state:t,dispatch:n})=>sz(t,n),Yhe=()=>({state:t,dispatch:n})=>rz(t,n);function Xhe(t,n,r={},s={}){return Hf(t,n,{slice:!1,parseOptions:r,errorOnInvalidContent:s.errorOnInvalidContent})}var Jhe=(t,{errorOnInvalidContent:n,emitUpdate:r=!0,parseOptions:s={}}={})=>({editor:a,tr:i,dispatch:l,commands:c})=>{const{doc:d}=i;if(s.preserveWhitespace!=="full"){const u=Xhe(t,a.schema,s,{errorOnInvalidContent:n??a.options.enableContentCheck});return l&&i.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!r),!0}return l&&i.setMeta("preventUpdate",!r),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:s,errorOnInvalidContent:n??a.options.enableContentCheck})};function Qhe(t,n){const r=Eo(n,t.schema),{from:s,to:a,empty:i}=t.selection,l=[];i?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(s,a,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===r.name);return c?{...c.attrs}:{}}function Zhe(t,n){const r=new zB(t);return n.forEach(s=>{s.steps.forEach(a=>{r.step(a)})}),r}function eme(t){for(let n=0;n<t.edgeCount;n+=1){const{type:r}=t.edge(n);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function zz(t,n){for(let r=t.depth;r>0;r-=1){const s=t.node(r);if(n(s))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:s}}}function qk(t){return n=>zz(n.$from,t)}function xd(t,n,r){return t.config[n]===void 0&&t.parent?xd(t.parent,n,r):typeof t.config[n]=="function"?t.config[n].bind({...r,parent:t.parent?xd(t.parent,n,r):null}):t.config[n]}function tme(t){return typeof t=="function"}function Ml(t,n=void 0,...r){return tme(t)?n?t.bind(n)(...r):t(...r):t}function nme(t){const n=t.filter(a=>a.type==="extension"),r=t.filter(a=>a.type==="node"),s=t.filter(a=>a.type==="mark");return{baseExtensions:n,nodeExtensions:r,markExtensions:s}}function To(...t){return t.filter(n=>!!n).reduce((n,r)=>{const s={...n};return Object.entries(r).forEach(([a,i])=>{if(!s[a]){s[a]=i;return}if(a==="class"){const c=i?String(i).split(" "):[],d=s[a]?s[a].split(" "):[],u=c.filter(f=>!d.includes(f));s[a]=[...d,...u].join(" ")}else if(a==="style"){const c=i?i.split(";").map(f=>f.trim()).filter(Boolean):[],d=s[a]?s[a].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;d.forEach(f=>{const[p,h]=f.split(":").map(m=>m.trim());u.set(p,h)}),c.forEach(f=>{const[p,h]=f.split(":").map(m=>m.trim());u.set(p,h)}),s[a]=Array.from(u.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else s[a]=i}),s},{})}function rme(t,n,r){const{from:s,to:a}=n,{blockSeparator:i=`

`,textSerializers:l={}}=r||{};let c="";return t.nodesBetween(s,a,(d,u,f,p)=>{var h;d.isBlock&&u>s&&(c+=i);const m=l==null?void 0:l[d.type.name];if(m)return f&&(c+=m({node:d,pos:u,parent:f,index:p,range:n})),!1;d.isText&&(c+=(h=d==null?void 0:d.text)==null?void 0:h.slice(Math.max(s,u)-u,a-u))}),c}function sme(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,r])=>[n,r.spec.toText]))}function ame(t,n=JSON.stringify){const r={};return t.filter(s=>{const a=n(s);return Object.prototype.hasOwnProperty.call(r,a)?!1:r[a]=!0})}function ime(t){const n=ame(t);return n.length===1?n:n.filter((r,s)=>!n.filter((i,l)=>l!==s).some(i=>r.oldRange.from>=i.oldRange.from&&r.oldRange.to<=i.oldRange.to&&r.newRange.from>=i.newRange.from&&r.newRange.to<=i.newRange.to))}function ome(t){const{mapping:n,steps:r}=t,s=[];return n.maps.forEach((a,i)=>{const l=[];if(a.ranges.length)a.forEach((c,d)=>{l.push({from:c,to:d})});else{const{from:c,to:d}=r[i];if(c===void 0||d===void 0)return;l.push({from:c,to:d})}l.forEach(({from:c,to:d})=>{const u=n.slice(i).map(c,-1),f=n.slice(i).map(d),p=n.invert().map(u,-1),h=n.invert().map(f);s.push({oldRange:{from:p,to:h},newRange:{from:u,to:f}})})}),ime(s)}function Vz(t,n,r){const s=[];return t===n?r.resolve(t).marks().forEach(a=>{const i=r.resolve(t),l=Hk(i,a.type);l&&s.push({mark:a,...l})}):r.nodesBetween(t,n,(a,i)=>{!a||(a==null?void 0:a.nodeSize)===void 0||s.push(...a.marks.map(l=>({from:i,to:i+a.nodeSize,mark:l})))}),s}function Em(t,n,r){return Object.fromEntries(Object.entries(r).filter(([s])=>{const a=t.find(i=>i.type===n&&i.name===s);return a?a.attribute.keepOnSplit:!1}))}function lme(t,n,r={}){const{empty:s,ranges:a}=t.selection,i=n?Eo(n,t.schema):null;if(s)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>i?i.name===p.type.name:!0).find(p=>Bx(p.attrs,r,{strict:!1}));let l=0;const c=[];if(a.forEach(({$from:p,$to:h})=>{const m=p.pos,g=h.pos;t.doc.nodesBetween(m,g,(y,v)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,v),w=Math.min(g,v+y.nodeSize),j=w-b;l+=j,c.push(...y.marks.map(N=>({mark:N,from:b,to:w})))})}),l===0)return!1;const d=c.filter(p=>i?i.name===p.mark.type.name:!0).filter(p=>Bx(p.mark.attrs,r,{strict:!1})).reduce((p,h)=>p+h.to-h.from,0),u=c.filter(p=>i?p.mark.type!==i&&p.mark.type.excludes(i):!0).reduce((p,h)=>p+h.to-h.from,0);return(d>0?d+u:d)>=l}function $T(t,n){const{nodeExtensions:r}=nme(n),s=r.find(l=>l.name===t);if(!s)return!1;const a={name:s.name,options:s.options,storage:s.storage},i=Ml(xd(s,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function Uz(t,{checkChildren:n=!0,ignoreWhitespace:r=!1}={}){var s;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((s=t.text)!=null?s:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(n){let a=!0;return t.content.forEach(i=>{a!==!1&&(Uz(i,{ignoreWhitespace:r,checkChildren:n})||(a=!1))}),a}return!1}function cme(t,n,r){var s;const{selection:a}=n;let i=null;if(Lz(a)&&(i=a.$cursor),i){const c=(s=t.storedMarks)!=null?s:i.marks();return i.parent.type.allowsMarkType(r)&&(!!r.isInSet(c)||!c.some(u=>u.type.excludes(r)))}const{ranges:l}=a;return l.some(({$from:c,$to:d})=>{let u=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(c.pos,d.pos,(f,p,h)=>{if(u)return!1;if(f.isInline){const m=!h||h.type.allowsMarkType(r),g=!!r.isInSet(f.marks)||!f.marks.some(y=>y.type.excludes(r));u=m&&g}return!u}),u})}var dme=(t,n={})=>({tr:r,state:s,dispatch:a})=>{const{selection:i}=r,{empty:l,ranges:c}=i,d=Eo(t,s.schema);if(a)if(l){const u=Qhe(s,d);r.addStoredMark(d.create({...u,...n}))}else c.forEach(u=>{const f=u.$from.pos,p=u.$to.pos;s.doc.nodesBetween(f,p,(h,m)=>{const g=Math.max(m,f),y=Math.min(m+h.nodeSize,p);h.marks.find(b=>b.type===d)?h.marks.forEach(b=>{d===b.type&&r.addMark(g,y,d.create({...b.attrs,...n}))}):r.addMark(g,y,d.create(n))})});return cme(s,r,d)},ume=(t,n)=>({tr:r})=>(r.setMeta(t,n),!0),fme=(t,n={})=>({state:r,dispatch:s,chain:a})=>{const i=Wn(t,r.schema);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:c})=>Ox(i,{...l,...n})(r)?!0:c.clearNodes()).command(({state:c})=>Ox(i,{...l,...n})(c,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pme=t=>({tr:n,dispatch:r})=>{if(r){const{doc:s}=n,a=el(t,0,s.content.size),i=ke.create(s,a);n.setSelection(i)}return!0},hme=t=>({tr:n,dispatch:r})=>{if(r){const{doc:s}=n,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,l=ve.atStart(s).from,c=ve.atEnd(s).to,d=el(a,l,c),u=el(i,l,c),f=ve.create(s,d,u);n.setSelection(f)}return!0},mme=t=>({state:n,dispatch:r})=>{const s=Wn(t,n.schema);return lz(s)(n,r)};function FT(t,n){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const s=r.filter(a=>n==null?void 0:n.includes(a.type.name));t.tr.ensureMarks(s)}}var xme=({keepMarks:t=!0}={})=>({tr:n,state:r,dispatch:s,editor:a})=>{const{selection:i,doc:l}=n,{$from:c,$to:d}=i,u=a.extensionManager.attributes,f=Em(u,c.node().type.name,c.node().attrs);if(i instanceof ke&&i.node.isBlock)return!c.parentOffset||!Lr(l,c.pos)?!1:(s&&(t&&FT(r,a.extensionManager.splittableMarks),n.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const p=d.parentOffset===d.parent.content.size,h=c.depth===0?void 0:eme(c.node(-1).contentMatchAt(c.indexAfter(-1)));let m=p&&h?[{type:h,attrs:f}]:void 0,g=Lr(n.doc,n.mapping.map(c.pos),1,m);if(!m&&!g&&Lr(n.doc,n.mapping.map(c.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:f}]:void 0),s){if(g&&(i instanceof ve&&n.deleteSelection(),n.split(n.mapping.map(c.pos),1,m),h&&!p&&!c.parentOffset&&c.parent.type!==h)){const y=n.mapping.map(c.before()),v=n.doc.resolve(y);c.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&n.setNodeMarkup(n.mapping.map(c.before()),h)}t&&FT(r,a.extensionManager.splittableMarks),n.scrollIntoView()}return g},gme=(t,n={})=>({tr:r,state:s,dispatch:a,editor:i})=>{var l;const c=Wn(t,s.schema),{$from:d,$to:u}=s.selection,f=s.selection.node;if(f&&f.isBlock||d.depth<2||!d.sameParent(u))return!1;const p=d.node(-1);if(p.type!==c)return!1;const h=i.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(a){let b=Z.empty;const w=d.index(-1)?1:d.index(-2)?2:3;for(let C=d.depth-w;C>=d.depth-3;C-=1)b=Z.from(d.node(C).copy(b));const j=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,N={...Em(h,d.node().type.name,d.node().attrs),...n},S=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(N))||void 0;b=b.append(Z.from(c.createAndFill(null,S)||void 0));const _=d.before(d.depth-(w-1));r.replace(_,d.after(-j),new de(b,4-w,0));let k=-1;r.doc.nodesBetween(_,r.doc.content.size,(C,P)=>{if(k>-1)return!1;C.isTextblock&&C.content.size===0&&(k=P+1)}),k>-1&&r.setSelection(ve.near(r.doc.resolve(k))),r.scrollIntoView()}return!0}const m=u.pos===d.end()?p.contentMatchAt(0).defaultType:null,g={...Em(h,p.type.name,p.attrs),...n},y={...Em(h,d.node().type.name,d.node().attrs),...n};r.delete(d.pos,u.pos);const v=m?[{type:c,attrs:g},{type:m,attrs:y}]:[{type:c,attrs:g}];if(!Lr(r.doc,d.pos,2))return!1;if(a){const{selection:b,storedMarks:w}=s,{splittableMarks:j}=i.extensionManager,N=w||b.$to.parentOffset&&b.$from.marks();if(r.split(d.pos,2,v).scrollIntoView(),!N||!a)return!0;const S=N.filter(_=>j.includes(_.type.name));r.ensureMarks(S)}return!0},pb=(t,n)=>{const r=qk(l=>l.type===n)(t.selection);if(!r)return!0;const s=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(s===void 0)return!0;const a=t.doc.nodeAt(s);return r.node.type===(a==null?void 0:a.type)&&_a(t.doc,r.pos)&&t.join(r.pos),!0},hb=(t,n)=>{const r=qk(l=>l.type===n)(t.selection);if(!r)return!0;const s=t.doc.resolve(r.start).after(r.depth);if(s===void 0)return!0;const a=t.doc.nodeAt(s);return r.node.type===(a==null?void 0:a.type)&&_a(t.doc,s)&&t.join(s),!0},yme=(t,n,r,s={})=>({editor:a,tr:i,state:l,dispatch:c,chain:d,commands:u,can:f})=>{const{extensions:p,splittableMarks:h}=a.extensionManager,m=Wn(t,l.schema),g=Wn(n,l.schema),{selection:y,storedMarks:v}=l,{$from:b,$to:w}=y,j=b.blockRange(w),N=v||y.$to.parentOffset&&y.$from.marks();if(!j)return!1;const S=qk(_=>$T(_.type.name,p))(y);if(j.depth>=1&&S&&j.depth-S.depth<=1){if(S.node.type===m)return u.liftListItem(g);if($T(S.node.type.name,p)&&m.validContent(S.node.content)&&c)return d().command(()=>(i.setNodeMarkup(S.pos,m),!0)).command(()=>pb(i,m)).command(()=>hb(i,m)).run()}return!r||!N||!c?d().command(()=>f().wrapInList(m,s)?!0:u.clearNodes()).wrapInList(m,s).command(()=>pb(i,m)).command(()=>hb(i,m)).run():d().command(()=>{const _=f().wrapInList(m,s),k=N.filter(C=>h.includes(C.type.name));return i.ensureMarks(k),_?!0:u.clearNodes()}).wrapInList(m,s).command(()=>pb(i,m)).command(()=>hb(i,m)).run()},vme=(t,n={},r={})=>({state:s,commands:a})=>{const{extendEmptyMarkRange:i=!1}=r,l=Eo(t,s.schema);return lme(s,l,n)?a.unsetMark(l,{extendEmptyMarkRange:i}):a.setMark(l,n)},bme=(t,n,r={})=>({state:s,commands:a})=>{const i=Wn(t,s.schema),l=Wn(n,s.schema),c=Kk(s,i,r);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),c?a.setNode(l,d):a.setNode(i,{...d,...r})},wme=(t,n={})=>({state:r,commands:s})=>{const a=Wn(t,r.schema);return Kk(r,a,n)?s.lift(a):s.wrapIn(a,n)},jme=()=>({state:t,dispatch:n})=>{const r=t.plugins;for(let s=0;s<r.length;s+=1){const a=r[s];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(n){const l=t.tr,c=i.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(i.text){const d=l.doc.resolve(i.from).marks();l.replaceWith(i.from,i.to,t.schema.text(i.text,d))}else l.delete(i.from,i.to)}return!0}}return!1},Nme=()=>({tr:t,dispatch:n})=>{const{selection:r}=t,{empty:s,ranges:a}=r;return s||n&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},Sme=(t,n={})=>({tr:r,state:s,dispatch:a})=>{var i;const{extendEmptyMarkRange:l=!1}=n,{selection:c}=r,d=Eo(t,s.schema),{$from:u,empty:f,ranges:p}=c;if(!a)return!0;if(f&&l){let{from:h,to:m}=c;const g=(i=u.marks().find(v=>v.type===d))==null?void 0:i.attrs,y=Hk(u,d,g);y&&(h=y.from,m=y.to),r.removeMark(h,m,d)}else p.forEach(h=>{r.removeMark(h.$from.pos,h.$to.pos,d)});return r.removeStoredMark(d),!0},kme=(t,n={})=>({tr:r,state:s,dispatch:a})=>{let i=null,l=null;const c=Bz(typeof t=="string"?t:t.name,s.schema);return c?(c==="node"&&(i=Wn(t,s.schema)),c==="mark"&&(l=Eo(t,s.schema)),a&&r.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let p,h,m,g;r.selection.empty?s.doc.nodesBetween(u,f,(y,v)=>{i&&i===y.type&&(m=Math.max(v,u),g=Math.min(v+y.nodeSize,f),p=v,h=y)}):s.doc.nodesBetween(u,f,(y,v)=>{v<u&&i&&i===y.type&&(m=Math.max(v,u),g=Math.min(v+y.nodeSize,f),p=v,h=y),v>=u&&v<=f&&(i&&i===y.type&&r.setNodeMarkup(v,void 0,{...y.attrs,...n}),l&&y.marks.length&&y.marks.forEach(b=>{if(l===b.type){const w=Math.max(v,u),j=Math.min(v+y.nodeSize,f);r.addMark(w,j,l.create({...b.attrs,...n}))}}))}),h&&(p!==void 0&&r.setNodeMarkup(p,void 0,{...h.attrs,...n}),l&&h.marks.length&&h.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...n}))}))}),!0):!1},Cme=(t,n={})=>({state:r,dispatch:s})=>{const a=Wn(t,r.schema);return az(a,n)(r,s)},_me=(t,n={})=>({state:r,dispatch:s})=>{const a=Wn(t,r.schema);return iz(a,n)(r,s)},Hz=class{constructor(n){var r;this.find=n.find,this.handler=n.handler,this.undoable=(r=n.undoable)!=null?r:!0}};function Pme(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ih(t){return Pme(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Wz(t,n){const r={...t};return Ih(t)&&Ih(n)&&Object.keys(n).forEach(s=>{Ih(n[s])&&Ih(t[s])?r[s]=Wz(t[s],n[s]):r[s]=n[s]}),r}var Gk=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ml(xd(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ml(xd(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Wz(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new this.constructor({...this.config,...t});return n.parent=this,this.child=n,n.name="name"in t?t.name:n.parent.name,n}},Yk=class Kz extends Gk{constructor(){super(...arguments),this.type="mark"}static create(n={}){const r=typeof n=="function"?n():n;return new Kz(r)}static handleExit({editor:n,mark:r}){const{tr:s}=n.state,a=n.state.selection.$from;if(a.pos===a.end()){const l=a.marks();if(!!!l.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const d=l.find(u=>(u==null?void 0:u.type.name)===r.name);return d&&s.removeStoredMark(d),s.insertText(" ",a.pos),n.view.dispatch(s),!0}return!1}configure(n){return super.configure(n)}extend(n){const r=typeof n=="function"?n():n;return super.extend(r)}},Ame=class{constructor(n){this.find=n.find,this.handler=n.handler}},Eme={};Uk(Eme,{ClipboardTextSerializer:()=>Tme,Commands:()=>Mme,Delete:()=>Ome,Drop:()=>Rme,Editable:()=>Ime,FocusEvents:()=>Dme,Keymap:()=>Lme,Paste:()=>$me,Tabindex:()=>Fme,focusEventsPluginKey:()=>Gz});var Tn=class qz extends Gk{constructor(){super(...arguments),this.type="extension"}static create(n={}){const r=typeof n=="function"?n():n;return new qz(r)}configure(n){return super.configure(n)}extend(n){const r=typeof n=="function"?n():n;return super.extend(r)}},Tme=Tn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qt({key:new Gt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:r}=t,{doc:s,selection:a}=n,{ranges:i}=a,l=Math.min(...i.map(f=>f.$from.pos)),c=Math.max(...i.map(f=>f.$to.pos)),d=sme(r);return rme(s,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Mme=Tn.create({name:"commands",addCommands(){return{...Iz}}}),Ome=Tn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:n}){var r,s,a;const i=()=>{var l,c,d,u;if((u=(d=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?u:t.getMeta("y-sync$"))return;const f=Zhe(t.before,[t,...n]);ome(f).forEach(m=>{f.mapping.mapResult(m.oldRange.from).deletedAfter&&f.mapping.mapResult(m.oldRange.to).deletedBefore&&f.before.nodesBetween(m.oldRange.from,m.oldRange.to,(g,y)=>{const v=y+g.nodeSize-2,b=m.oldRange.from<=y&&v<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:y,to:v,newFrom:f.mapping.map(y),newTo:f.mapping.map(v),deletedRange:m.oldRange,newRange:m.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:f})})});const h=f.mapping;f.steps.forEach((m,g)=>{var y,v;if(m instanceof Ps){const b=h.slice(g).map(m.from,-1),w=h.slice(g).map(m.to),j=h.invert().map(b,-1),N=h.invert().map(w),S=(y=f.doc.nodeAt(b-1))==null?void 0:y.marks.some(k=>k.eq(m.mark)),_=(v=f.doc.nodeAt(w))==null?void 0:v.marks.some(k=>k.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:j,to:N},newRange:{from:b,to:w},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:f})}})};(a=(s=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:s.async)==null||a?setTimeout(i,0):i()}}),Rme=Tn.create({name:"drop",addProseMirrorPlugins(){return[new qt({key:new Gt("tiptapDrop"),props:{handleDrop:(t,n,r,s)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:r,moved:s})}}})]}}),Ime=Tn.create({name:"editable",addProseMirrorPlugins(){return[new qt({key:new Gt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Gz=new Gt("focusEvents"),Dme=Tn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qt({key:Gz,props:{handleDOMEvents:{focus:(n,r)=>{t.isFocused=!0;const s=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return n.dispatch(s),!1},blur:(n,r)=>{t.isFocused=!1;const s=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return n.dispatch(s),!1}}}})]}}),Lme=Tn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:u}=c,{empty:f,$anchor:p}=d,{pos:h,parent:m}=p,g=p.parent.isTextblock&&h>0?c.doc.resolve(h-1):p,y=g.parent.type.spec.isolating,v=p.pos-p.parentOffset,b=y&&g.parent.childCount===1?v===p.pos:Ae.atStart(u).from===h;return!f||!m.type.isTextblock||m.textContent.length||!b||b&&p.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},a={...s},i={...s,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Wk()||Fz()?i:a},addProseMirrorPlugins(){return[new qt({key:new Gt("clearDocument"),appendTransaction:(t,n,r)=>{if(t.some(y=>y.getMeta("composition")))return;const s=t.some(y=>y.docChanged)&&!n.doc.eq(r.doc),a=t.some(y=>y.getMeta("preventClearDocument"));if(!s||a)return;const{empty:i,from:l,to:c}=n.selection,d=Ae.atStart(n.doc).from,u=Ae.atEnd(n.doc).to;if(i||!(l===d&&c===u)||!Uz(r.doc))return;const h=r.tr,m=Rz({state:r,transaction:h}),{commands:g}=new she({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),$me=Tn.create({name:"paste",addProseMirrorPlugins(){return[new qt({key:new Gt("tiptapPaste"),props:{handlePaste:(t,n,r)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:r})}}})]}}),Fme=Tn.create({name:"tabindex",addProseMirrorPlugins(){return[new qt({key:new Gt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Bme(t){return new Hz({find:t.find,handler:({state:n,range:r,match:s})=>{const a=Ml(t.getAttributes,void 0,s);if(a===!1||a===null)return null;const{tr:i}=n,l=s[s.length-1],c=s[0];if(l){const d=c.search(/\S/),u=r.from+c.indexOf(l),f=u+l.length;if(Vz(r.from,r.to,n.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;f<r.to&&i.delete(f,r.to),u>r.from&&i.delete(r.from+d,u);const h=r.from+d+l.length;i.addMark(r.from+d,h,t.type.create(a||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function zme(t){return new Hz({find:t.find,handler:({state:n,range:r,match:s})=>{const a=Ml(t.getAttributes,void 0,s)||{},{tr:i}=n,l=r.from;let c=r.to;const d=t.type.create(a);if(s[1]){const u=s[0].lastIndexOf(s[1]);let f=l+u;f>c?f=c:c=f+s[1].length;const p=s[0][s[0].length-1];i.insertText(p,l+s[0].length-1),i.replaceWith(f,c,d)}else if(s[0]){const u=t.type.isInline?l:l-1;i.insert(u,t.type.create(a)).delete(i.mapping.map(l),i.mapping.map(c))}i.scrollIntoView()},undoable:t.undoable})}var Vme=t=>"touches"in t,Ume=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.touches[0];if(!c)return;const d=c.clientX-this.startX,u=c.clientY-this.startY;this.handleResize(d,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(l,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var n,r,s,a,i;this.node=t.node,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(n=t.options)!=null&&n.min&&(this.minSize={...this.minSize,...t.options.min}),(r=t.options)!=null&&r.max&&(this.maxSize=t.options.max),(s=t==null?void 0:t.options)!=null&&s.directions&&(this.directions=t.options.directions),(a=t.options)!=null&&a.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(t,n,r){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,n,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",t.style.justifyContent="flex-start",t.style.alignItems="flex-start",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const n=document.createElement("div");return n.dataset.resizeHandle=t,n.style.position="absolute",this.classNames.handle&&(n.className=this.classNames.handle),n}positionHandle(t,n){const r=n.includes("top"),s=n.includes("bottom"),a=n.includes("left"),i=n.includes("right");r&&(t.style.top="0"),s&&(t.style.bottom="0"),a&&(t.style.left="0"),i&&(t.style.right="0"),(n==="top"||n==="bottom")&&(t.style.left="0",t.style.right="0"),(n==="left"||n==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{const n=this.createHandle(t);this.positionHandle(n,t),n.addEventListener("mousedown",r=>this.handleResizeStart(r,t)),n.addEventListener("touchstart",r=>this.handleResizeStart(r,t)),this.wrapper.appendChild(n)})}applyInitialSize(){const t=this.node.attrs.width,n=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,n?(this.element.style.height=`${n}px`,this.initialHeight=n):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,n){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=n,Vme(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,n){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:s,height:a}=this.calculateNewDimensions(this.activeHandle,t,n),i=this.applyConstraints(s,a,r);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,n,r){let s=this.startWidth,a=this.startHeight;const i=t.includes("right"),l=t.includes("left"),c=t.includes("bottom"),d=t.includes("top");return i?s=this.startWidth+n:l&&(s=this.startWidth-n),c?a=this.startHeight+r:d&&(a=this.startHeight-r),(t==="right"||t==="left")&&(s=this.startWidth+(i?n:-n)),(t==="top"||t==="bottom")&&(a=this.startHeight+(c?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(s,a,t):{width:s,height:a}}applyConstraints(t,n,r){var s,a,i,l;if(!r){let u=Math.max(this.minSize.width,t),f=Math.max(this.minSize.height,n);return(s=this.maxSize)!=null&&s.width&&(u=Math.min(this.maxSize.width,u)),(a=this.maxSize)!=null&&a.height&&(f=Math.min(this.maxSize.height,f)),{width:u,height:f}}let c=t,d=n;return c<this.minSize.width&&(c=this.minSize.width,d=c/this.aspectRatio),d<this.minSize.height&&(d=this.minSize.height,c=d*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&c>this.maxSize.width&&(c=this.maxSize.width,d=c/this.aspectRatio),(l=this.maxSize)!=null&&l.height&&d>this.maxSize.height&&(d=this.maxSize.height,c=d*this.aspectRatio),{width:c,height:d}}applyAspectRatio(t,n,r){const s=r==="left"||r==="right",a=r==="top"||r==="bottom";return s?{width:t,height:t/this.aspectRatio}:a?{width:n*this.aspectRatio,height:n}:{width:t,height:t/this.aspectRatio}}},Hme={};Uk(Hme,{createAtomBlockMarkdownSpec:()=>Wme,createBlockMarkdownSpec:()=>Kme,createInlineMarkdownSpec:()=>Yme,parseAttributes:()=>Xk,parseIndentedBlocks:()=>Xme,renderNestedMarkdownContent:()=>Jme,serializeAttributes:()=>Jk});function Xk(t){if(!(t!=null&&t.trim()))return{};const n={},r=[],s=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),a=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(a){const u=a.map(f=>f.trim().slice(1));n.class=u.join(" ")}const i=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(n.id=i[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(l)).forEach(([,u,f])=>{var p;const h=parseInt(((p=f.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),m=r[h];m&&(n[u]=m.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(f=>{f.match(/^[a-zA-Z][\w-]*$/)&&(n[f]=!0)}),n}function Jk(t){if(!t||Object.keys(t).length===0)return"";const n=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(s=>n.push(`.${s}`)),t.id&&n.push(`#${t.id}`),Object.entries(t).forEach(([r,s])=>{r==="class"||r==="id"||(s===!0?n.push(r):s!==!1&&s!=null&&n.push(`${r}="${String(s)}"`))}),n.join(" ")}function Wme(t){const{nodeName:n,name:r,parseAttributes:s=Xk,serializeAttributes:a=Jk,defaultAttributes:i={},requiredAttributes:l=[],allowedAttributes:c}=t,d=r||n,u=f=>{if(!c)return f;const p={};return c.forEach(h=>{h in f&&(p[h]=f[h])}),p};return{parseMarkdown:(f,p)=>{const h={...i,...f.attributes};return p.createNode(n,h,[])},markdownTokenizer:{name:n,level:"block",start(f){var p;const h=new RegExp(`^:::${d}(?:\\s|$)`,"m"),m=(p=f.match(h))==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,p,h){const m=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=f.match(m);if(!g)return;const y=g[1]||"",v=s(y);if(!l.find(w=>!(w in v)))return{type:n,raw:g[0],attributes:v}}},renderMarkdown:f=>{const p=u(f.attrs||{}),h=a(p),m=h?` {${h}}`:"";return`:::${d}${m} :::`}}}function Kme(t){const{nodeName:n,name:r,getContent:s,parseAttributes:a=Xk,serializeAttributes:i=Jk,defaultAttributes:l={},content:c="block",allowedAttributes:d}=t,u=r||n,f=p=>{if(!d)return p;const h={};return d.forEach(m=>{m in p&&(h[m]=p[m])}),h};return{parseMarkdown:(p,h)=>{let m;if(s){const y=s(p);m=typeof y=="string"?[{type:"text",text:y}]:y}else c==="block"?m=h.parseChildren(p.tokens||[]):m=h.parseInline(p.tokens||[]);const g={...l,...p.attributes};return h.createNode(n,g,m)},markdownTokenizer:{name:n,level:"block",start(p){var h;const m=new RegExp(`^:::${u}`,"m"),g=(h=p.match(m))==null?void 0:h.index;return g!==void 0?g:-1},tokenize(p,h,m){var g;const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=p.match(y);if(!v)return;const[b,w=""]=v,j=a(w);let N=1;const S=b.length;let _="";const k=/^:::([\w-]*)(\s.*)?/gm,C=p.slice(S);for(k.lastIndex=0;;){const P=k.exec(C);if(P===null)break;const E=P.index,M=P[1];if(!((g=P[2])!=null&&g.endsWith(":::"))){if(M)N+=1;else if(N-=1,N===0){const T=C.slice(0,E);_=T.trim();const A=p.slice(0,S+E+P[0].length);let R=[];if(_)if(c==="block")for(R=m.blockTokens(T),R.forEach(O=>{O.text&&(!O.tokens||O.tokens.length===0)&&(O.tokens=m.inlineTokens(O.text))});R.length>0;){const O=R[R.length-1];if(O.type==="paragraph"&&(!O.text||O.text.trim()===""))R.pop();else break}else R=m.inlineTokens(_);return{type:n,raw:A,attributes:j,content:_,tokens:R}}}}}},renderMarkdown:(p,h)=>{const m=f(p.attrs||{}),g=i(m),y=g?` {${g}}`:"",v=h.renderChildren(p.content||[],`

`);return`:::${u}${y}

${v}

:::`}}}function qme(t){if(!t.trim())return{};const n={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=r.exec(t);for(;s!==null;){const[,a,i,l]=s;n[a]=i||l,s=r.exec(t)}return n}function Gme(t){return Object.entries(t).filter(([,n])=>n!=null).map(([n,r])=>`${n}="${r}"`).join(" ")}function Yme(t){const{nodeName:n,name:r,getContent:s,parseAttributes:a=qme,serializeAttributes:i=Gme,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:d}=t,u=r||n,f=h=>{if(!d)return h;const m={};return d.forEach(g=>{g in h&&(m[g]=h[g])}),m},p=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,m)=>{const g={...l,...h.attributes};if(c)return m.createNode(n,g);const y=s?s(h):h.content||"";return y?m.createNode(n,g,[m.createTextNode(y)]):m.createNode(n,g,[])},markdownTokenizer:{name:n,level:"inline",start(h){const m=c?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),g=h.match(m),y=g==null?void 0:g.index;return y!==void 0?y:-1},tokenize(h,m,g){const y=c?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),v=h.match(y);if(!v)return;let b="",w="";if(c){const[,N]=v;w=N}else{const[,N,S]=v;w=N,b=S||""}const j=a(w.trim());return{type:n,raw:v[0],content:b.trim(),attributes:j}}},renderMarkdown:h=>{let m="";s?m=s(h):h.content&&h.content.length>0&&(m=h.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const g=f(h.attrs||{}),y=i(g),v=y?` ${y}`:"";return c?`[${u}${v}]`:`[${u}${v}]${m}[/${u}]`}}}function Xme(t,n,r){var s,a,i,l;const c=t.split(`
`),d=[];let u="",f=0;const p=n.baseIndentSize||2;for(;f<c.length;){const h=c[f],m=h.match(n.itemPattern);if(!m){if(d.length>0)break;if(h.trim()===""){f+=1;continue}else return}const g=n.extractItemData(m),{indentLevel:y,mainContent:v}=g;u=`${u}${h}
`;const b=[v];for(f+=1;f<c.length;){const S=c[f];if(S.trim()===""){const k=c.slice(f+1).findIndex(E=>E.trim()!=="");if(k===-1)break;if((((a=(s=c[f+1+k].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:a.length)||0)>y){b.push(S),u=`${u}${S}
`,f+=1;continue}else break}if((((l=(i=S.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:l.length)||0)>y)b.push(S),u=`${u}${S}
`,f+=1;else break}let w;const j=b.slice(1);if(j.length>0){const S=j.map(_=>_.slice(y+p)).join(`
`);S.trim()&&(n.customNestedParser?w=n.customNestedParser(S):w=r.blockTokens(S))}const N=n.createToken(g,w);d.push(N)}if(d.length!==0)return{items:d,raw:u.trim()}}function Jme(t,n,r,s){if(!t||!Array.isArray(t.content))return"";const a=typeof r=="function"?r(s):r,[i,...l]=t.content,c=n.renderChildren([i]),d=[`${a}${c}`];return l&&l.length>0&&l.forEach(u=>{const f=n.renderChildren([u]);if(f){const p=f.split(`
`).map(h=>h?n.indent(h):"").join(`
`);d.push(p)}}),d.join(`
`)}var kp=class Yz extends Gk{constructor(){super(...arguments),this.type="node"}static create(n={}){const r=typeof n=="function"?n():n;return new Yz(r)}configure(n){return super.configure(n)}extend(n){const r=typeof n=="function"?n():n;return super.extend(r)}};function Qme(t){return new Ame({find:t.find,handler:({state:n,range:r,match:s,pasteEvent:a})=>{const i=Ml(t.getAttributes,void 0,s,a);if(i===!1||i===null)return null;const{tr:l}=n,c=s[s.length-1],d=s[0];let u=r.to;if(c){const f=d.search(/\S/),p=r.from+d.indexOf(c),h=p+c.length;if(Vz(r.from,r.to,n.doc).filter(g=>g.mark.type.excluded.find(v=>v===t.type&&v!==g.mark.type)).filter(g=>g.to>p).length)return null;h<r.to&&l.delete(h,r.to),p>r.from&&l.delete(r.from+f,p),u=r.from+f+c.length,l.addMark(r.from+f,u,t.type.create(i||{})),l.removeStoredMark(t.type)}}})}function Xz(t){const{state:n,transaction:r}=t;let{selection:s}=r,{doc:a}=r,{storedMarks:i}=r;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return i},get selection(){return s},get doc(){return a},get tr(){return s=r.selection,a=r.doc,i=r.storedMarks,r}}}class Zme{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,{tr:i}=s,l=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>{const p=d(...f)(l);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,r=!0){const{rawCommands:s,editor:a,state:i}=this,{view:l}=a,c=[],d=!!n,u=n||i.tr,f=()=>(!d&&r&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(u),c.every(h=>h===!0)),p={...Object.fromEntries(Object.entries(s).map(([h,m])=>[h,(...y)=>{const v=this.buildProps(u,r),b=m(...y)(v);return c.push(b),p}])),run:f};return p}createCan(n){const{rawCommands:r,state:s}=this,a=!1,i=n||s.tr,l=this.buildProps(i,a);return{...Object.fromEntries(Object.entries(r).map(([d,u])=>[d,(...f)=>u(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(i,a)}}buildProps(n,r=!0){const{rawCommands:s,editor:a,state:i}=this,{view:l}=a,c={tr:n,editor:a,view:l,state:Xz({state:i,transaction:n}),dispatch:r?()=>{}:void 0,chain:()=>this.createChain(n,r),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(s).map(([d,u])=>[d,(...f)=>u(...f)(c)]))}};return c}}function Bn(t,n,r){return t.config[n]===void 0&&t.parent?Bn(t.parent,n,r):typeof t.config[n]=="function"?t.config[n].bind({...r,parent:t.parent?Bn(t.parent,n,r):null}):t.config[n]}function exe(t){const n=t.filter(a=>a.type==="extension"),r=t.filter(a=>a.type==="node"),s=t.filter(a=>a.type==="mark");return{baseExtensions:n,nodeExtensions:r,markExtensions:s}}function Kn(t,n){if(typeof t=="string"){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}function wr(...t){return t.filter(n=>!!n).reduce((n,r)=>{const s={...n};return Object.entries(r).forEach(([a,i])=>{if(!s[a]){s[a]=i;return}if(a==="class"){const c=i?String(i).split(" "):[],d=s[a]?s[a].split(" "):[],u=c.filter(f=>!d.includes(f));s[a]=[...d,...u].join(" ")}else if(a==="style"){const c=i?i.split(";").map(f=>f.trim()).filter(Boolean):[],d=s[a]?s[a].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;d.forEach(f=>{const[p,h]=f.split(":").map(m=>m.trim());u.set(p,h)}),c.forEach(f=>{const[p,h]=f.split(":").map(m=>m.trim());u.set(p,h)}),s[a]=Array.from(u.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else s[a]=i}),s},{})}function txe(t){return typeof t=="function"}function rn(t,n=void 0,...r){return txe(t)?n?t.bind(n)(...r):t(...r):t}function nxe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class zy{constructor(n){this.find=n.find,this.handler=n.handler}}function rxe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Dh(t){return rxe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Vy(t,n){const r={...t};return Dh(t)&&Dh(n)&&Object.keys(n).forEach(s=>{Dh(n[s])&&Dh(t[s])?r[s]=Vy(t[s],n[s]):r[s]=n[s]}),r}class Ol{constructor(n={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rn(Bn(this,"addOptions",{name:this.name}))),this.storage=rn(Bn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new Ol(n)}configure(n={}){const r=this.extend({...this.config,addOptions:()=>Vy(this.options,n)});return r.name=this.name,r.parent=this.parent,r}extend(n={}){const r=new Ol(n);return r.parent=this,this.child=r,r.name=n.name?n.name:r.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=rn(Bn(r,"addOptions",{name:r.name})),r.storage=rn(Bn(r,"addStorage",{name:r.name,options:r.options})),r}static handleExit({editor:n,mark:r}){const{tr:s}=n.state,a=n.state.selection.$from;if(a.pos===a.end()){const l=a.marks();if(!!!l.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const d=l.find(u=>(u==null?void 0:u.type.name)===r.name);return d&&s.removeStoredMark(d),s.insertText(" ",a.pos),n.view.dispatch(s),!0}return!1}}class sxe{constructor(n){this.find=n.find,this.handler=n.handler}}class rr{constructor(n={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rn(Bn(this,"addOptions",{name:this.name}))),this.storage=rn(Bn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new rr(n)}configure(n={}){const r=this.extend({...this.config,addOptions:()=>Vy(this.options,n)});return r.name=this.name,r.parent=this.parent,r}extend(n={}){const r=new rr({...this.config,...n});return r.parent=this,this.child=r,r.name=n.name?n.name:r.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=rn(Bn(r,"addOptions",{name:r.name})),r.storage=rn(Bn(r,"addStorage",{name:r.name,options:r.options})),r}}function axe(t,n,r){const{from:s,to:a}=n,{blockSeparator:i=`

`,textSerializers:l={}}=r||{};let c="";return t.nodesBetween(s,a,(d,u,f,p)=>{var h;d.isBlock&&u>s&&(c+=i);const m=l==null?void 0:l[d.type.name];if(m)return f&&(c+=m({node:d,pos:u,parent:f,index:p,range:n})),!1;d.isText&&(c+=(h=d==null?void 0:d.text)===null||h===void 0?void 0:h.slice(Math.max(s,u)-u,a-u))}),c}function ixe(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,r])=>[n,r.spec.toText]))}rr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qt({key:new Gt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:r}=t,{doc:s,selection:a}=n,{ranges:i}=a,l=Math.min(...i.map(f=>f.$from.pos)),c=Math.max(...i.map(f=>f.$to.pos)),d=ixe(r);return axe(s,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}});const oxe=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(n.dom.blur(),(r=window==null?void 0:window.getSelection())===null||r===void 0||r.removeAllRanges())}),!0),lxe=(t=!1)=>({commands:n})=>n.setContent("",t),cxe=()=>({state:t,tr:n,dispatch:r})=>{const{selection:s}=n,{ranges:a}=s;return r&&a.forEach(({$from:i,$to:l})=>{t.doc.nodesBetween(i.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:u,mapping:f}=n,p=u.resolve(f.map(d)),h=u.resolve(f.map(d+c.nodeSize)),m=p.blockRange(h);if(!m)return;const g=ql(m);if(c.type.isTextblock){const{defaultType:y}=p.parent.contentMatchAt(p.index());n.setNodeMarkup(m.start,y)}(g||g===0)&&n.lift(m,g)})}),!0},dxe=t=>n=>t(n),uxe=()=>({state:t,dispatch:n})=>Mk(t,n),fxe=(t,n)=>({editor:r,tr:s})=>{const{state:a}=r,i=a.doc.slice(t.from,t.to);s.deleteRange(t.from,t.to);const l=s.mapping.map(n);return s.insert(l,i.content),s.setSelection(new ve(s.doc.resolve(Math.max(l-1,0)))),!0},pxe=()=>({tr:t,dispatch:n})=>{const{selection:r}=t,s=r.$anchor.node();if(s.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===s.type){if(n){const c=a.before(i),d=a.after(i);t.delete(c,d).scrollIntoView()}return!0}return!1},hxe=t=>({tr:n,state:r,dispatch:s})=>{const a=Kn(t,r.schema),i=n.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===a){if(s){const d=i.before(l),u=i.after(l);n.delete(d,u).scrollIntoView()}return!0}return!1},mxe=t=>({tr:n,dispatch:r})=>{const{from:s,to:a}=t;return r&&n.delete(s,a),!0},xxe=()=>({state:t,dispatch:n})=>$y(t,n),gxe=()=>({commands:t})=>t.keyboardShortcut("Enter"),yxe=()=>({state:t,dispatch:n})=>ZB(t,n);function zx(t,n,r={strict:!0}){const s=Object.keys(n);return s.length?s.every(a=>r.strict?n[a]===t[a]:nxe(n[a])?n[a].test(t[a]):n[a]===t[a]):!0}function Jz(t,n,r={}){return t.find(s=>s.type===n&&zx(Object.fromEntries(Object.keys(r).map(a=>[a,s.attrs[a]])),r))}function BT(t,n,r={}){return!!Jz(t,n,r)}function Qk(t,n,r){var s;if(!t||!n)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(f=>f.type===n))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(f=>f.type===n)||(r=r||((s=a.node.marks[0])===null||s===void 0?void 0:s.attrs),!Jz([...a.node.marks],n,r)))return;let l=a.index,c=t.start()+a.offset,d=l+1,u=c+a.node.nodeSize;for(;l>0&&BT([...t.parent.child(l-1).marks],n,r);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&BT([...t.parent.child(d).marks],n,r);)u+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:u}}function Mo(t,n){if(typeof t=="string"){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}const vxe=(t,n={})=>({tr:r,state:s,dispatch:a})=>{const i=Mo(t,s.schema),{doc:l,selection:c}=r,{$from:d,from:u,to:f}=c;if(a){const p=Qk(d,i,n);if(p&&p.from<=u&&p.to>=f){const h=ve.create(l,p.from,p.to);r.setSelection(h)}}return!0},bxe=t=>n=>{const r=typeof t=="function"?t(n):t;for(let s=0;s<r.length;s+=1)if(r[s](n))return!0;return!1};function Qz(t){return t instanceof ve}function tl(t=0,n=0,r=0){return Math.min(Math.max(t,n),r)}function wxe(t,n=null){if(!n)return null;const r=Ae.atStart(t),s=Ae.atEnd(t);if(n==="start"||n===!0)return r;if(n==="end")return s;const a=r.from,i=s.to;return n==="all"?ve.create(t,tl(0,a,i),tl(t.content.size,a,i)):ve.create(t,tl(n,a,i),tl(n,a,i))}function jxe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Zk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Nxe=(t=null,n={})=>({editor:r,view:s,tr:a,dispatch:i})=>{n={scrollIntoView:!0,...n};const l=()=>{(Zk()||jxe())&&s.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(s.focus(),n!=null&&n.scrollIntoView&&r.commands.scrollIntoView())})};if(s.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!Qz(r.state.selection))return l(),!0;const c=wxe(a.doc,t)||r.state.selection,d=r.state.selection.eq(c);return i&&(d||a.setSelection(c),d&&a.storedMarks&&a.setStoredMarks(a.storedMarks),l()),!0},Sxe=(t,n)=>r=>t.every((s,a)=>n(s,{...r,index:a})),kxe=(t,n)=>({tr:r,commands:s})=>s.insertContentAt({from:r.selection.from,to:r.selection.to},t,n),Zz=t=>{const n=t.childNodes;for(let r=n.length-1;r>=0;r-=1){const s=n[r];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?t.removeChild(s):s.nodeType===1&&Zz(s)}return t};function Lh(t){const n=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(n,"text/html").body;return Zz(r)}function Wf(t,n,r){if(t instanceof no||t instanceof Z)return t;r={slice:!0,parseOptions:{},...r};const s=typeof t=="object"&&t!==null,a=typeof t=="string";if(s)try{if(Array.isArray(t)&&t.length>0)return Z.fromArray(t.map(c=>n.nodeFromJSON(c)));const l=n.nodeFromJSON(t);return r.errorOnInvalidContent&&l.check(),l}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Wf("",n,r)}if(a){if(r.errorOnInvalidContent){let l=!1,c="";const d=new kB({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(l=!0,c=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?fa.fromSchema(d).parseSlice(Lh(t),r.parseOptions):fa.fromSchema(d).parse(Lh(t),r.parseOptions),r.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const i=fa.fromSchema(n);return r.slice?i.parseSlice(Lh(t),r.parseOptions).content:i.parse(Lh(t),r.parseOptions)}return Wf("",n,r)}function Cxe(t,n,r){const s=t.steps.length-1;if(s<n)return;const a=t.steps[s];if(!(a instanceof en||a instanceof sn))return;const i=t.mapping.maps[s];let l=0;i.forEach((c,d,u,f)=>{l===0&&(l=f)}),t.setSelection(Ae.near(t.doc.resolve(l),r))}const _xe=t=>!("type"in t),Pxe=(t,n,r)=>({tr:s,dispatch:a,editor:i})=>{var l;if(a){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let c;const d=v=>{i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Wf(n,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){d(v)}try{c=Wf(n,i.schema,{parseOptions:u,errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck})}catch(v){return d(v),!1}let{from:f,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,m=!0;if((_xe(c)?c:[c]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,m=m?v.isBlock:!1}),f===p&&m){const{parent:v}=s.doc.resolve(f);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(f-=1,p+=1)}let y;if(h){if(Array.isArray(n))y=n.map(v=>v.text||"").join("");else if(n instanceof Z){let v="";n.forEach(b=>{b.text&&(v+=b.text)}),y=v}else typeof n=="object"&&n&&n.text?y=n.text:y=n;s.insertText(y,f,p)}else y=c,s.replaceWith(f,p,y);r.updateSelection&&Cxe(s,s.steps.length-1,-1),r.applyInputRules&&s.setMeta("applyInputRules",{from:f,text:y}),r.applyPasteRules&&s.setMeta("applyPasteRules",{from:f,text:y})}return!0},Axe=()=>({state:t,dispatch:n})=>XB(t,n),Exe=()=>({state:t,dispatch:n})=>JB(t,n),Txe=()=>({state:t,dispatch:n})=>Sk(t,n),Mxe=()=>({state:t,dispatch:n})=>_k(t,n),Oxe=()=>({state:t,dispatch:n,tr:r})=>{try{const s=Wd(t.doc,t.selection.$from.pos,-1);return s==null?!1:(r.join(s,2),n&&n(r),!0)}catch{return!1}},Rxe=()=>({state:t,dispatch:n,tr:r})=>{try{const s=Wd(t.doc,t.selection.$from.pos,1);return s==null?!1:(r.join(s,2),n&&n(r),!0)}catch{return!1}},Ixe=()=>({state:t,dispatch:n})=>KB(t,n),Dxe=()=>({state:t,dispatch:n})=>qB(t,n);function e6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Lxe(t){const n=t.split(/-(?!$)/);let r=n[n.length-1];r==="Space"&&(r=" ");let s,a,i,l;for(let c=0;c<n.length-1;c+=1){const d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))Zk()||e6()?l=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(r=`Alt-${r}`),a&&(r=`Ctrl-${r}`),l&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}const $xe=t=>({editor:n,view:r,tr:s,dispatch:a})=>{const i=Lxe(t).split(/-(?!$)/),l=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),d=n.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,c))});return d==null||d.steps.forEach(u=>{const f=u.map(s.mapping);f&&a&&s.maybeStep(f)}),!0};function e2(t,n,r={}){const{from:s,to:a,empty:i}=t.selection,l=n?Kn(n,t.schema):null,c=[];t.doc.nodesBetween(s,a,(p,h)=>{if(p.isText)return;const m=Math.max(s,h),g=Math.min(a,h+p.nodeSize);c.push({node:p,from:m,to:g})});const d=a-s,u=c.filter(p=>l?l.name===p.node.type.name:!0).filter(p=>zx(p.node.attrs,r,{strict:!1}));return i?!!u.length:u.reduce((p,h)=>p+h.to-h.from,0)>=d}const Fxe=(t,n={})=>({state:r,dispatch:s})=>{const a=Kn(t,r.schema);return e2(r,a,n)?QB(r,s):!1},Bxe=()=>({state:t,dispatch:n})=>Ok(t,n),zxe=t=>({state:n,dispatch:r})=>{const s=Kn(t,n.schema);return oz(s)(n,r)},Vxe=()=>({state:t,dispatch:n})=>Ek(t,n);function t6(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function zT(t,n){const r=typeof n=="string"?[n]:n;return Object.keys(t).reduce((s,a)=>(r.includes(a)||(s[a]=t[a]),s),{})}const Uxe=(t,n)=>({tr:r,state:s,dispatch:a})=>{let i=null,l=null;const c=t6(typeof t=="string"?t:t.name,s.schema);return c?(c==="node"&&(i=Kn(t,s.schema)),c==="mark"&&(l=Mo(t,s.schema)),a&&r.selection.ranges.forEach(d=>{s.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{i&&i===u.type&&r.setNodeMarkup(f,void 0,zT(u.attrs,n)),l&&u.marks.length&&u.marks.forEach(p=>{l===p.type&&r.addMark(f,f+u.nodeSize,l.create(zT(p.attrs,n)))})})}),!0):!1},Hxe=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),Wxe=()=>({tr:t,dispatch:n})=>{if(n){const r=new br(t.doc);t.setSelection(r)}return!0},Kxe=()=>({state:t,dispatch:n})=>kk(t,n),qxe=()=>({state:t,dispatch:n})=>Pk(t,n),Gxe=()=>({state:t,dispatch:n})=>ez(t,n),Yxe=()=>({state:t,dispatch:n})=>sz(t,n),Xxe=()=>({state:t,dispatch:n})=>rz(t,n);function Jxe(t,n,r={},s={}){return Wf(t,n,{slice:!1,parseOptions:r,errorOnInvalidContent:s.errorOnInvalidContent})}const Qxe=(t,n=!1,r={},s={})=>({editor:a,tr:i,dispatch:l,commands:c})=>{var d,u;const{doc:f}=i;if(r.preserveWhitespace!=="full"){const p=Jxe(t,a.schema,r,{errorOnInvalidContent:(d=s.errorOnInvalidContent)!==null&&d!==void 0?d:a.options.enableContentCheck});return l&&i.replaceWith(0,f.content.size,p).setMeta("preventUpdate",!n),!0}return l&&i.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:f.content.size},t,{parseOptions:r,errorOnInvalidContent:(u=s.errorOnInvalidContent)!==null&&u!==void 0?u:a.options.enableContentCheck})};function Zxe(t,n){const r=Mo(n,t.schema),{from:s,to:a,empty:i}=t.selection,l=[];i?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(s,a,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===r.name);return c?{...c.attrs}:{}}function ege(t){for(let n=0;n<t.edgeCount;n+=1){const{type:r}=t.edge(n);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function tge(t,n){for(let r=t.depth;r>0;r-=1){const s=t.node(r);if(n(s))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:s}}}function t2(t){return n=>tge(n.$from,t)}function n6(t,n,r){const s=[];return t===n?r.resolve(t).marks().forEach(a=>{const i=r.resolve(t),l=Qk(i,a.type);l&&s.push({mark:a,...l})}):r.nodesBetween(t,n,(a,i)=>{!a||(a==null?void 0:a.nodeSize)===void 0||s.push(...a.marks.map(l=>({from:i,to:i+a.nodeSize,mark:l})))}),s}function Tm(t,n,r){return Object.fromEntries(Object.entries(r).filter(([s])=>{const a=t.find(i=>i.type===n&&i.name===s);return a?a.attribute.keepOnSplit:!1}))}function nge(t,n,r={}){const{empty:s,ranges:a}=t.selection,i=n?Mo(n,t.schema):null;if(s)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>i?i.name===p.type.name:!0).find(p=>zx(p.attrs,r,{strict:!1}));let l=0;const c=[];if(a.forEach(({$from:p,$to:h})=>{const m=p.pos,g=h.pos;t.doc.nodesBetween(m,g,(y,v)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,v),w=Math.min(g,v+y.nodeSize),j=w-b;l+=j,c.push(...y.marks.map(N=>({mark:N,from:b,to:w})))})}),l===0)return!1;const d=c.filter(p=>i?i.name===p.mark.type.name:!0).filter(p=>zx(p.mark.attrs,r,{strict:!1})).reduce((p,h)=>p+h.to-h.from,0),u=c.filter(p=>i?p.mark.type!==i&&p.mark.type.excludes(i):!0).reduce((p,h)=>p+h.to-h.from,0);return(d>0?d+u:d)>=l}function VT(t,n){const{nodeExtensions:r}=exe(n),s=r.find(l=>l.name===t);if(!s)return!1;const a={name:s.name,options:s.options,storage:s.storage},i=rn(Bn(s,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function r6(t,{checkChildren:n=!0,ignoreWhitespace:r=!1}={}){var s;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((s=t.text)!==null&&s!==void 0?s:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(n){let a=!0;return t.content.forEach(i=>{a!==!1&&(r6(i,{ignoreWhitespace:r,checkChildren:n})||(a=!1))}),a}return!1}function rge(t){return t instanceof ke}function sge(t,n,r){var s;const{selection:a}=n;let i=null;if(Qz(a)&&(i=a.$cursor),i){const c=(s=t.storedMarks)!==null&&s!==void 0?s:i.marks();return!!r.isInSet(c)||!c.some(d=>d.type.excludes(r))}const{ranges:l}=a;return l.some(({$from:c,$to:d})=>{let u=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(c.pos,d.pos,(f,p,h)=>{if(u)return!1;if(f.isInline){const m=!h||h.type.allowsMarkType(r),g=!!r.isInSet(f.marks)||!f.marks.some(y=>y.type.excludes(r));u=m&&g}return!u}),u})}const age=(t,n={})=>({tr:r,state:s,dispatch:a})=>{const{selection:i}=r,{empty:l,ranges:c}=i,d=Mo(t,s.schema);if(a)if(l){const u=Zxe(s,d);r.addStoredMark(d.create({...u,...n}))}else c.forEach(u=>{const f=u.$from.pos,p=u.$to.pos;s.doc.nodesBetween(f,p,(h,m)=>{const g=Math.max(m,f),y=Math.min(m+h.nodeSize,p);h.marks.find(b=>b.type===d)?h.marks.forEach(b=>{d===b.type&&r.addMark(g,y,d.create({...b.attrs,...n}))}):r.addMark(g,y,d.create(n))})});return sge(s,r,d)},ige=(t,n)=>({tr:r})=>(r.setMeta(t,n),!0),oge=(t,n={})=>({state:r,dispatch:s,chain:a})=>{const i=Kn(t,r.schema);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:c})=>Ox(i,{...l,...n})(r)?!0:c.clearNodes()).command(({state:c})=>Ox(i,{...l,...n})(c,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lge=t=>({tr:n,dispatch:r})=>{if(r){const{doc:s}=n,a=tl(t,0,s.content.size),i=ke.create(s,a);n.setSelection(i)}return!0},cge=t=>({tr:n,dispatch:r})=>{if(r){const{doc:s}=n,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,l=ve.atStart(s).from,c=ve.atEnd(s).to,d=tl(a,l,c),u=tl(i,l,c),f=ve.create(s,d,u);n.setSelection(f)}return!0},dge=t=>({state:n,dispatch:r})=>{const s=Kn(t,n.schema);return lz(s)(n,r)};function UT(t,n){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const s=r.filter(a=>n==null?void 0:n.includes(a.type.name));t.tr.ensureMarks(s)}}const uge=({keepMarks:t=!0}={})=>({tr:n,state:r,dispatch:s,editor:a})=>{const{selection:i,doc:l}=n,{$from:c,$to:d}=i,u=a.extensionManager.attributes,f=Tm(u,c.node().type.name,c.node().attrs);if(i instanceof ke&&i.node.isBlock)return!c.parentOffset||!Lr(l,c.pos)?!1:(s&&(t&&UT(r,a.extensionManager.splittableMarks),n.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const p=d.parentOffset===d.parent.content.size,h=c.depth===0?void 0:ege(c.node(-1).contentMatchAt(c.indexAfter(-1)));let m=p&&h?[{type:h,attrs:f}]:void 0,g=Lr(n.doc,n.mapping.map(c.pos),1,m);if(!m&&!g&&Lr(n.doc,n.mapping.map(c.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:f}]:void 0),s){if(g&&(i instanceof ve&&n.deleteSelection(),n.split(n.mapping.map(c.pos),1,m),h&&!p&&!c.parentOffset&&c.parent.type!==h)){const y=n.mapping.map(c.before()),v=n.doc.resolve(y);c.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&n.setNodeMarkup(n.mapping.map(c.before()),h)}t&&UT(r,a.extensionManager.splittableMarks),n.scrollIntoView()}return g},fge=(t,n={})=>({tr:r,state:s,dispatch:a,editor:i})=>{var l;const c=Kn(t,s.schema),{$from:d,$to:u}=s.selection,f=s.selection.node;if(f&&f.isBlock||d.depth<2||!d.sameParent(u))return!1;const p=d.node(-1);if(p.type!==c)return!1;const h=i.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(a){let b=Z.empty;const w=d.index(-1)?1:d.index(-2)?2:3;for(let C=d.depth-w;C>=d.depth-3;C-=1)b=Z.from(d.node(C).copy(b));const j=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,N={...Tm(h,d.node().type.name,d.node().attrs),...n},S=((l=c.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(N))||void 0;b=b.append(Z.from(c.createAndFill(null,S)||void 0));const _=d.before(d.depth-(w-1));r.replace(_,d.after(-j),new de(b,4-w,0));let k=-1;r.doc.nodesBetween(_,r.doc.content.size,(C,P)=>{if(k>-1)return!1;C.isTextblock&&C.content.size===0&&(k=P+1)}),k>-1&&r.setSelection(ve.near(r.doc.resolve(k))),r.scrollIntoView()}return!0}const m=u.pos===d.end()?p.contentMatchAt(0).defaultType:null,g={...Tm(h,p.type.name,p.attrs),...n},y={...Tm(h,d.node().type.name,d.node().attrs),...n};r.delete(d.pos,u.pos);const v=m?[{type:c,attrs:g},{type:m,attrs:y}]:[{type:c,attrs:g}];if(!Lr(r.doc,d.pos,2))return!1;if(a){const{selection:b,storedMarks:w}=s,{splittableMarks:j}=i.extensionManager,N=w||b.$to.parentOffset&&b.$from.marks();if(r.split(d.pos,2,v).scrollIntoView(),!N||!a)return!0;const S=N.filter(_=>j.includes(_.type.name));r.ensureMarks(S)}return!0},mb=(t,n)=>{const r=t2(l=>l.type===n)(t.selection);if(!r)return!0;const s=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(s===void 0)return!0;const a=t.doc.nodeAt(s);return r.node.type===(a==null?void 0:a.type)&&_a(t.doc,r.pos)&&t.join(r.pos),!0},xb=(t,n)=>{const r=t2(l=>l.type===n)(t.selection);if(!r)return!0;const s=t.doc.resolve(r.start).after(r.depth);if(s===void 0)return!0;const a=t.doc.nodeAt(s);return r.node.type===(a==null?void 0:a.type)&&_a(t.doc,s)&&t.join(s),!0},pge=(t,n,r,s={})=>({editor:a,tr:i,state:l,dispatch:c,chain:d,commands:u,can:f})=>{const{extensions:p,splittableMarks:h}=a.extensionManager,m=Kn(t,l.schema),g=Kn(n,l.schema),{selection:y,storedMarks:v}=l,{$from:b,$to:w}=y,j=b.blockRange(w),N=v||y.$to.parentOffset&&y.$from.marks();if(!j)return!1;const S=t2(_=>VT(_.type.name,p))(y);if(j.depth>=1&&S&&j.depth-S.depth<=1){if(S.node.type===m)return u.liftListItem(g);if(VT(S.node.type.name,p)&&m.validContent(S.node.content)&&c)return d().command(()=>(i.setNodeMarkup(S.pos,m),!0)).command(()=>mb(i,m)).command(()=>xb(i,m)).run()}return!r||!N||!c?d().command(()=>f().wrapInList(m,s)?!0:u.clearNodes()).wrapInList(m,s).command(()=>mb(i,m)).command(()=>xb(i,m)).run():d().command(()=>{const _=f().wrapInList(m,s),k=N.filter(C=>h.includes(C.type.name));return i.ensureMarks(k),_?!0:u.clearNodes()}).wrapInList(m,s).command(()=>mb(i,m)).command(()=>xb(i,m)).run()},hge=(t,n={},r={})=>({state:s,commands:a})=>{const{extendEmptyMarkRange:i=!1}=r,l=Mo(t,s.schema);return nge(s,l,n)?a.unsetMark(l,{extendEmptyMarkRange:i}):a.setMark(l,n)},mge=(t,n,r={})=>({state:s,commands:a})=>{const i=Kn(t,s.schema),l=Kn(n,s.schema),c=e2(s,i,r);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),c?a.setNode(l,d):a.setNode(i,{...d,...r})},xge=(t,n={})=>({state:r,commands:s})=>{const a=Kn(t,r.schema);return e2(r,a,n)?s.lift(a):s.wrapIn(a,n)},gge=()=>({state:t,dispatch:n})=>{const r=t.plugins;for(let s=0;s<r.length;s+=1){const a=r[s];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(n){const l=t.tr,c=i.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(i.text){const d=l.doc.resolve(i.from).marks();l.replaceWith(i.from,i.to,t.schema.text(i.text,d))}else l.delete(i.from,i.to)}return!0}}return!1},yge=()=>({tr:t,dispatch:n})=>{const{selection:r}=t,{empty:s,ranges:a}=r;return s||n&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},vge=(t,n={})=>({tr:r,state:s,dispatch:a})=>{var i;const{extendEmptyMarkRange:l=!1}=n,{selection:c}=r,d=Mo(t,s.schema),{$from:u,empty:f,ranges:p}=c;if(!a)return!0;if(f&&l){let{from:h,to:m}=c;const g=(i=u.marks().find(v=>v.type===d))===null||i===void 0?void 0:i.attrs,y=Qk(u,d,g);y&&(h=y.from,m=y.to),r.removeMark(h,m,d)}else p.forEach(h=>{r.removeMark(h.$from.pos,h.$to.pos,d)});return r.removeStoredMark(d),!0},bge=(t,n={})=>({tr:r,state:s,dispatch:a})=>{let i=null,l=null;const c=t6(typeof t=="string"?t:t.name,s.schema);return c?(c==="node"&&(i=Kn(t,s.schema)),c==="mark"&&(l=Mo(t,s.schema)),a&&r.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let p,h,m,g;r.selection.empty?s.doc.nodesBetween(u,f,(y,v)=>{i&&i===y.type&&(m=Math.max(v,u),g=Math.min(v+y.nodeSize,f),p=v,h=y)}):s.doc.nodesBetween(u,f,(y,v)=>{v<u&&i&&i===y.type&&(m=Math.max(v,u),g=Math.min(v+y.nodeSize,f),p=v,h=y),v>=u&&v<=f&&(i&&i===y.type&&r.setNodeMarkup(v,void 0,{...y.attrs,...n}),l&&y.marks.length&&y.marks.forEach(b=>{if(l===b.type){const w=Math.max(v,u),j=Math.min(v+y.nodeSize,f);r.addMark(w,j,l.create({...b.attrs,...n}))}}))}),h&&(p!==void 0&&r.setNodeMarkup(p,void 0,{...h.attrs,...n}),l&&h.marks.length&&h.marks.forEach(y=>{l===y.type&&r.addMark(m,g,l.create({...y.attrs,...n}))}))}),!0):!1},wge=(t,n={})=>({state:r,dispatch:s})=>{const a=Kn(t,r.schema);return az(a,n)(r,s)},jge=(t,n={})=>({state:r,dispatch:s})=>{const a=Kn(t,r.schema);return iz(a,n)(r,s)};var Nge=Object.freeze({__proto__:null,blur:oxe,clearContent:lxe,clearNodes:cxe,command:dxe,createParagraphNear:uxe,cut:fxe,deleteCurrentNode:pxe,deleteNode:hxe,deleteRange:mxe,deleteSelection:xxe,enter:gxe,exitCode:yxe,extendMarkRange:vxe,first:bxe,focus:Nxe,forEach:Sxe,insertContent:kxe,insertContentAt:Pxe,joinBackward:Txe,joinDown:Exe,joinForward:Mxe,joinItemBackward:Oxe,joinItemForward:Rxe,joinTextblockBackward:Ixe,joinTextblockForward:Dxe,joinUp:Axe,keyboardShortcut:$xe,lift:Fxe,liftEmptyBlock:Bxe,liftListItem:zxe,newlineInCode:Vxe,resetAttributes:Uxe,scrollIntoView:Hxe,selectAll:Wxe,selectNodeBackward:Kxe,selectNodeForward:qxe,selectParentNode:Gxe,selectTextblockEnd:Yxe,selectTextblockStart:Xxe,setContent:Qxe,setMark:age,setMeta:ige,setNode:oge,setNodeSelection:lge,setTextSelection:cge,sinkListItem:dge,splitBlock:uge,splitListItem:fge,toggleList:pge,toggleMark:hge,toggleNode:mge,toggleWrap:xge,undoInputRule:gge,unsetAllMarks:yge,unsetMark:vge,updateAttributes:bge,wrapIn:wge,wrapInList:jge});rr.create({name:"commands",addCommands(){return{...Nge}}});rr.create({name:"drop",addProseMirrorPlugins(){return[new qt({key:new Gt("tiptapDrop"),props:{handleDrop:(t,n,r,s)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:r,moved:s})}}})]}});rr.create({name:"editable",addProseMirrorPlugins(){return[new qt({key:new Gt("editable"),props:{editable:()=>this.editor.options.editable}})]}});const Sge=new Gt("focusEvents");rr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qt({key:Sge,props:{handleDOMEvents:{focus:(n,r)=>{t.isFocused=!0;const s=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return n.dispatch(s),!1},blur:(n,r)=>{t.isFocused=!1;const s=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return n.dispatch(s),!1}}}})]}});rr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:u}=c,{empty:f,$anchor:p}=d,{pos:h,parent:m}=p,g=p.parent.isTextblock&&h>0?c.doc.resolve(h-1):p,y=g.parent.type.spec.isolating,v=p.pos-p.parentOffset,b=y&&g.parent.childCount===1?v===p.pos:Ae.atStart(u).from===h;return!f||!m.type.isTextblock||m.textContent.length||!b||b&&p.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},a={...s},i={...s,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Zk()||e6()?i:a},addProseMirrorPlugins(){return[new qt({key:new Gt("clearDocument"),appendTransaction:(t,n,r)=>{if(t.some(y=>y.getMeta("composition")))return;const s=t.some(y=>y.docChanged)&&!n.doc.eq(r.doc),a=t.some(y=>y.getMeta("preventClearDocument"));if(!s||a)return;const{empty:i,from:l,to:c}=n.selection,d=Ae.atStart(n.doc).from,u=Ae.atEnd(n.doc).to;if(i||!(l===d&&c===u)||!r6(r.doc))return;const h=r.tr,m=Xz({state:r,transaction:h}),{commands:g}=new Zme({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}});rr.create({name:"paste",addProseMirrorPlugins(){return[new qt({key:new Gt("tiptapPaste"),props:{handlePaste:(t,n,r)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:r})}}})]}});rr.create({name:"tabindex",addProseMirrorPlugins(){return[new qt({key:new Gt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function gd(t){return new zy({find:t.find,handler:({state:n,range:r,match:s})=>{const a=rn(t.getAttributes,void 0,s);if(a===!1||a===null)return null;const{tr:i}=n,l=s[s.length-1],c=s[0];if(l){const d=c.search(/\S/),u=r.from+c.indexOf(l),f=u+l.length;if(n6(r.from,r.to,n.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;f<r.to&&i.delete(f,r.to),u>r.from&&i.delete(r.from+d,u);const h=r.from+d+l.length;i.addMark(r.from+d,h,t.type.create(a||{})),i.removeStoredMark(t.type)}}})}function kge(t){return new zy({find:t.find,handler:({state:n,range:r,match:s})=>{const a=rn(t.getAttributes,void 0,s)||{},{tr:i}=n,l=r.from;let c=r.to;const d=t.type.create(a);if(s[1]){const u=s[0].lastIndexOf(s[1]);let f=l+u;f>c?f=c:c=f+s[1].length;const p=s[0][s[0].length-1];i.insertText(p,l+s[0].length-1),i.replaceWith(f,c,d)}else if(s[0]){const u=t.type.isInline?l:l-1;i.insert(u,t.type.create(a)).delete(i.mapping.map(l),i.mapping.map(c))}i.scrollIntoView()}})}function Gj(t){return new zy({find:t.find,handler:({state:n,range:r,match:s})=>{const a=n.doc.resolve(r.from),i=rn(t.getAttributes,void 0,s)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,i)}})}function Kf(t){return new zy({find:t.find,handler:({state:n,range:r,match:s,chain:a})=>{const i=rn(t.getAttributes,void 0,s)||{},l=n.tr.delete(r.from,r.to),d=l.doc.resolve(r.from).blockRange(),u=d&&jk(d,t.type,i);if(!u)return null;if(l.wrap(d,u),t.keepMarks&&t.editor){const{selection:p,storedMarks:h}=n,{splittableMarks:m}=t.editor.extensionManager,g=h||p.$to.parentOffset&&p.$from.marks();if(g){const y=g.filter(v=>m.includes(v.type.name));l.ensureMarks(y)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(p,i).run()}const f=l.doc.resolve(r.from-1).nodeBefore;f&&f.type===t.type&&_a(l.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(s,f))&&l.join(r.from-1)}})}let Ks=class Yj{constructor(n={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rn(Bn(this,"addOptions",{name:this.name}))),this.storage=rn(Bn(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new Yj(n)}configure(n={}){const r=this.extend({...this.config,addOptions:()=>Vy(this.options,n)});return r.name=this.name,r.parent=this.parent,r}extend(n={}){const r=new Yj(n);return r.parent=this,this.child=r,r.name=n.name?n.name:r.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=rn(Bn(r,"addOptions",{name:r.name})),r.storage=rn(Bn(r,"addStorage",{name:r.name,options:r.options})),r}};function yd(t){return new sxe({find:t.find,handler:({state:n,range:r,match:s,pasteEvent:a})=>{const i=rn(t.getAttributes,void 0,s,a);if(i===!1||i===null)return null;const{tr:l}=n,c=s[s.length-1],d=s[0];let u=r.to;if(c){const f=d.search(/\S/),p=r.from+d.indexOf(c),h=p+c.length;if(n6(r.from,r.to,n.doc).filter(g=>g.mark.type.excluded.find(v=>v===t.type&&v!==g.mark.type)).filter(g=>g.to>p).length)return null;h<r.to&&l.delete(h,r.to),p>r.from&&l.delete(r.from+f,p),u=r.from+f+c.length,l.addMark(r.from+f,u,t.type.create(i||{})),l.removeStoredMark(t.type)}}})}function Cge(t,n){const{selection:r}=t,{$from:s}=r;if(r instanceof ke){const i=s.index();return s.parent.canReplaceWith(i,i+1,n)}let a=s.depth;for(;a>=0;){const i=s.index(a);if(s.node(a).contentMatchAt(i).matchType(n))return!0;a-=1}return!1}const _ge=/^\s*>\s$/,Pge=Ks.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Kf({find:_ge,type:this.type})]}}),Age=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ege=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Tge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Mge=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Oge=Ol.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[gd({find:Age,type:this.type}),gd({find:Tge,type:this.type})]},addPasteRules(){return[yd({find:Ege,type:this.type}),yd({find:Mge,type:this.type})]}}),Rge="listItem",HT="textStyle",WT=/^\s*([-+*])\s$/,Ige=Ks.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rge,this.editor.getAttributes(HT)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Kf({find:WT,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kf({find:WT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(HT),editor:this.editor})),[t]}}),Dge=/(^|[^`])`([^`]+)`(?!`)/,Lge=/(^|[^`])`([^`]+)`(?!`)/g,$ge=Ol.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[gd({find:Dge,type:this.type})]},addPasteRules(){return[yd({find:Lge,type:this.type})]}}),Fge=/^```([a-z]+)?[\s\n]$/,Bge=/^~~~([a-z]+)?[\s\n]$/,zge=Ks.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var n;const{languageClassPrefix:r}=this.options,i=[...((n=t.firstElementChild)===null||n===void 0?void 0:n.classList)||[]].filter(l=>l.startsWith(r)).map(l=>l.replace(r,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:n}){return["pre",wr(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:n})=>n.setNode(this.name,t),toggleCodeBlock:t=>({commands:n})=>n.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:n}=this.editor.state.selection,r=n.pos===1;return!t||n.parent.type.name!==this.name?!1:r||!n.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:n}=t,{selection:r}=n,{$from:s,empty:a}=r;if(!a||s.parent.type!==this.type)return!1;const i=s.parentOffset===s.parent.nodeSize-2,l=s.parent.textContent.endsWith(`

`);return!i||!l?!1:t.chain().command(({tr:c})=>(c.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:n}=t,{selection:r,doc:s}=n,{$from:a,empty:i}=r;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const c=a.after();return c===void 0?!1:s.nodeAt(c)?t.commands.command(({tr:u})=>(u.setSelection(Ae.near(s.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[Gj({find:Fge,type:this.type,getAttributes:t=>({language:t[1]})}),Gj({find:Bge,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qt({key:new Gt("codeBlockVSCodeHandler"),props:{handlePaste:(t,n)=>{if(!n.clipboardData||this.editor.isActive(this.type.name))return!1;const r=n.clipboardData.getData("text/plain"),s=n.clipboardData.getData("vscode-editor-data"),a=s?JSON.parse(s):void 0,i=a==null?void 0:a.mode;if(!r||!i)return!1;const{tr:l,schema:c}=t.state,d=c.text(r.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:i},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(ve.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),Vge=Ks.create({name:"doc",topNode:!0,content:"block+"});function Uge(t={}){return new qt({view(n){return new Hge(n,t)}})}class Hge{constructor(n,r){var s;this.editorView=n,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=r.width)!==null&&s!==void 0?s:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=l=>{this[a](l)};return n.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:n,handler:r})=>this.editorView.dom.removeEventListener(n,r))}update(n,r){this.cursorPos!=null&&r.doc!=n.state.doc&&(this.cursorPos>n.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(n){n!=this.cursorPos&&(this.cursorPos=n,n==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let n=this.editorView.state.doc.resolve(this.cursorPos),r=!n.parent.inlineContent,s,a=this.editorView.dom,i=a.getBoundingClientRect(),l=i.width/a.offsetWidth,c=i.height/a.offsetHeight;if(r){let p=n.nodeBefore,h=n.nodeAfter;if(p||h){let m=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(m){let g=m.getBoundingClientRect(),y=p?g.bottom:g.top;p&&h&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*c;s={left:g.left,right:g.right,top:y-v,bottom:y+v}}}}if(!s){let p=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*l;s={left:p.left-h,right:p.left+h,top:p.top,bottom:p.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,f;if(!d||d==document.body&&getComputedStyle(d).position=="static")u=-pageXOffset,f=-pageYOffset;else{let p=d.getBoundingClientRect(),h=p.width/d.offsetWidth,m=p.height/d.offsetHeight;u=p.left-d.scrollLeft*h,f=p.top-d.scrollTop*m}this.element.style.left=(s.left-u)/l+"px",this.element.style.top=(s.top-f)/c+"px",this.element.style.width=(s.right-s.left)/l+"px",this.element.style.height=(s.bottom-s.top)/c+"px"}scheduleRemoval(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),n)}dragover(n){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:n.clientX,top:n.clientY}),s=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),a=s&&s.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,r,n):a;if(r&&!i){let l=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=DB(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(n){this.editorView.dom.contains(n.relatedTarget)||this.setCursor(null)}}const Wge=rr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Uge(this.options)]}});class Mt extends Ae{constructor(n){super(n,n)}map(n,r){let s=n.resolve(r.map(this.head));return Mt.valid(s)?new Mt(s):Ae.near(s)}content(){return de.empty}eq(n){return n instanceof Mt&&n.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(n,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mt(n.resolve(r.pos))}getBookmark(){return new n2(this.anchor)}static valid(n){let r=n.parent;if(r.isTextblock||!Kge(n)||!qge(n))return!1;let s=r.type.spec.allowGapCursor;if(s!=null)return s;let a=r.contentMatchAt(n.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(n,r,s=!1){e:for(;;){if(!s&&Mt.valid(n))return n;let a=n.pos,i=null;for(let l=n.depth;;l--){let c=n.node(l);if(r>0?n.indexAfter(l)<c.childCount:n.index(l)>0){i=c.child(r>0?n.indexAfter(l):n.index(l)-1);break}else if(l==0)return null;a+=r;let d=n.doc.resolve(a);if(Mt.valid(d))return d}for(;;){let l=r>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!ke.isSelectable(i)){n=n.doc.resolve(a+i.nodeSize*r),s=!1;continue e}break}i=l,a+=r;let c=n.doc.resolve(a);if(Mt.valid(c))return c}return null}}}Mt.prototype.visible=!1;Mt.findFrom=Mt.findGapCursorFrom;Ae.jsonID("gapcursor",Mt);class n2{constructor(n){this.pos=n}map(n){return new n2(n.map(this.pos))}resolve(n){let r=n.resolve(this.pos);return Mt.valid(r)?new Mt(r):Ae.near(r)}}function s6(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Kge(t){for(let n=t.depth;n>=0;n--){let r=t.index(n),s=t.node(n);if(r==0){if(s.type.spec.isolating)return!0;continue}for(let a=s.child(r-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||s6(a.type))return!0;if(a.inlineContent)return!1}}return!0}function qge(t){for(let n=t.depth;n>=0;n--){let r=t.indexAfter(n),s=t.node(n);if(r==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let a=s.child(r);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||s6(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Gge(){return new qt({props:{decorations:Qge,createSelectionBetween(t,n,r){return n.pos==r.pos&&Mt.valid(r)?new Mt(r):null},handleClick:Xge,handleKeyDown:Yge,handleDOMEvents:{beforeinput:Jge}}})}const Yge=Oz({ArrowLeft:$h("horiz",-1),ArrowRight:$h("horiz",1),ArrowUp:$h("vert",-1),ArrowDown:$h("vert",1)});function $h(t,n){const r=t=="vert"?n>0?"down":"up":n>0?"right":"left";return function(s,a,i){let l=s.selection,c=n>0?l.$to:l.$from,d=l.empty;if(l instanceof ve){if(!i.endOfTextblock(r)||c.depth==0)return!1;d=!1,c=s.doc.resolve(n>0?c.after():c.before())}let u=Mt.findGapCursorFrom(c,n,d);return u?(a&&a(s.tr.setSelection(new Mt(u))),!0):!1}}function Xge(t,n,r){if(!t||!t.editable)return!1;let s=t.state.doc.resolve(n);if(!Mt.valid(s))return!1;let a=t.posAtCoords({left:r.clientX,top:r.clientY});return a&&a.inside>-1&&ke.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Mt(s))),!0)}function Jge(t,n){if(n.inputType!="insertCompositionText"||!(t.state.selection instanceof Mt))return!1;let{$from:r}=t.state.selection,s=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!s)return!1;let a=Z.empty;for(let l=s.length-1;l>=0;l--)a=Z.from(s[l].createAndFill(null,a));let i=t.state.tr.replace(r.pos,r.pos,new de(a,0,0));return i.setSelection(ve.near(i.doc.resolve(r.pos+1))),t.dispatch(i),!1}function Qge(t){if(!(t.selection instanceof Mt))return null;let n=document.createElement("div");return n.className="ProseMirror-gapcursor",Dt.create(t.doc,[Rr.widget(t.selection.head,n,{key:"gapcursor"})])}const Zge=rr.create({name:"gapCursor",addProseMirrorPlugins(){return[Gge()]},extendNodeSchema(t){var n;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(n=rn(Bn(t,"allowGapCursor",r)))!==null&&n!==void 0?n:null}}}),eye=Ks.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",wr(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:n,state:r,editor:s})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=r;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=s.extensionManager,d=i||a.$to.parentOffset&&a.$from.marks();return n().insertContent({type:this.name}).command(({tr:u,dispatch:f})=>{if(f&&d&&l){const p=d.filter(h=>c.includes(h.type.name));u.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tye=Ks.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:n}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,wr(this.options.HTMLAttributes,n),0]},addCommands(){return{setHeading:t=>({commands:n})=>this.options.levels.includes(t.level)?n.setNode(this.name,t):!1,toggleHeading:t=>({commands:n})=>this.options.levels.includes(t.level)?n.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,n)=>({...t,[`Mod-Alt-${n}`]:()=>this.editor.commands.toggleHeading({level:n})}),{})},addInputRules(){return this.options.levels.map(t=>Gj({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Vx=200,hn=function(){};hn.prototype.append=function(n){return n.length?(n=hn.from(n),!this.length&&n||n.length<Vx&&this.leafAppend(n)||this.length<Vx&&n.leafPrepend(this)||this.appendInner(n)):this};hn.prototype.prepend=function(n){return n.length?hn.from(n).append(this):this};hn.prototype.appendInner=function(n){return new nye(this,n)};hn.prototype.slice=function(n,r){return n===void 0&&(n=0),r===void 0&&(r=this.length),n>=r?hn.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,r))};hn.prototype.get=function(n){if(!(n<0||n>=this.length))return this.getInner(n)};hn.prototype.forEach=function(n,r,s){r===void 0&&(r=0),s===void 0&&(s=this.length),r<=s?this.forEachInner(n,r,s,0):this.forEachInvertedInner(n,r,s,0)};hn.prototype.map=function(n,r,s){r===void 0&&(r=0),s===void 0&&(s=this.length);var a=[];return this.forEach(function(i,l){return a.push(n(i,l))},r,s),a};hn.from=function(n){return n instanceof hn?n:n&&n.length?new a6(n):hn.empty};var a6=function(t){function n(s){t.call(this),this.values=s}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new n(this.values.slice(a,i))},n.prototype.getInner=function(a){return this.values[a]},n.prototype.forEachInner=function(a,i,l,c){for(var d=i;d<l;d++)if(a(this.values[d],c+d)===!1)return!1},n.prototype.forEachInvertedInner=function(a,i,l,c){for(var d=i-1;d>=l;d--)if(a(this.values[d],c+d)===!1)return!1},n.prototype.leafAppend=function(a){if(this.length+a.length<=Vx)return new n(this.values.concat(a.flatten()))},n.prototype.leafPrepend=function(a){if(this.length+a.length<=Vx)return new n(a.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(n.prototype,r),n}(hn);hn.empty=new a6([]);var nye=function(t){function n(r,s){t.call(this),this.left=r,this.right=s,this.length=r.length+s.length,this.depth=Math.max(r.depth,s.depth)+1}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},n.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},n.prototype.forEachInner=function(s,a,i,l){var c=this.left.length;if(a<c&&this.left.forEachInner(s,a,Math.min(i,c),l)===!1||i>c&&this.right.forEachInner(s,Math.max(a-c,0),Math.min(this.length,i)-c,l+c)===!1)return!1},n.prototype.forEachInvertedInner=function(s,a,i,l){var c=this.left.length;if(a>c&&this.right.forEachInvertedInner(s,a-c,Math.max(i,c)-c,l+c)===!1||i<c&&this.left.forEachInvertedInner(s,Math.min(a,c),i,l)===!1)return!1},n.prototype.sliceInner=function(s,a){if(s==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(s,a):s>=i?this.right.slice(s-i,a-i):this.left.slice(s,i).append(this.right.slice(0,a-i))},n.prototype.leafAppend=function(s){var a=this.right.leafAppend(s);if(a)return new n(this.left,a)},n.prototype.leafPrepend=function(s){var a=this.left.leafPrepend(s);if(a)return new n(a,this.right)},n.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new n(this.left,new n(this.right,s)):new n(this,s)},n}(hn);const rye=500;class ks{constructor(n,r){this.items=n,this.eventCount=r}popEvent(n,r){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let a,i;r&&(a=this.remapping(s,this.items.length),i=a.maps.length);let l=n.tr,c,d,u=[],f=[];return this.items.forEach((p,h)=>{if(!p.step){a||(a=this.remapping(s,h+1),i=a.maps.length),i--,f.push(p);return}if(a){f.push(new Zs(p.map));let m=p.step.map(a.slice(i)),g;m&&l.maybeStep(m).doc&&(g=l.mapping.maps[l.mapping.maps.length-1],u.push(new Zs(g,void 0,void 0,u.length+f.length))),i--,g&&a.appendMap(g,i)}else l.maybeStep(p.step);if(p.selection)return c=a?p.selection.map(a.slice(i)):p.selection,d=new ks(this.items.slice(0,s).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:c}}addTransform(n,r,s,a){let i=[],l=this.eventCount,c=this.items,d=!a&&c.length?c.get(c.length-1):null;for(let f=0;f<n.steps.length;f++){let p=n.steps[f].invert(n.docs[f]),h=new Zs(n.mapping.maps[f],p,r),m;(m=d&&d.merge(h))&&(h=m,f?i.pop():c=c.slice(0,c.length-1)),i.push(h),r&&(l++,r=void 0),a||(d=h)}let u=l-s.depth;return u>aye&&(c=sye(c,u),l-=u),new ks(c.append(i),l)}remapping(n,r){let s=new Bf;return this.items.forEach((a,i)=>{let l=a.mirrorOffset!=null&&i-a.mirrorOffset>=n?s.maps.length-a.mirrorOffset:void 0;s.appendMap(a.map,l)},n,r),s}addMaps(n){return this.eventCount==0?this:new ks(this.items.append(n.map(r=>new Zs(r))),this.eventCount)}rebased(n,r){if(!this.eventCount)return this;let s=[],a=Math.max(0,this.items.length-r),i=n.mapping,l=n.steps.length,c=this.eventCount;this.items.forEach(h=>{h.selection&&c--},a);let d=r;this.items.forEach(h=>{let m=i.getMirror(--d);if(m==null)return;l=Math.min(l,m);let g=i.maps[m];if(h.step){let y=n.steps[m].invert(n.docs[m]),v=h.selection&&h.selection.map(i.slice(d+1,m));v&&c++,s.push(new Zs(g,y,v))}else s.push(new Zs(g))},a);let u=[];for(let h=r;h<l;h++)u.push(new Zs(i.maps[h]));let f=this.items.slice(0,a).append(u).append(s),p=new ks(f,c);return p.emptyItemCount()>rye&&(p=p.compress(this.items.length-s.length)),p}emptyItemCount(){let n=0;return this.items.forEach(r=>{r.step||n++}),n}compress(n=this.items.length){let r=this.remapping(0,n),s=r.maps.length,a=[],i=0;return this.items.forEach((l,c)=>{if(c>=n)a.push(l),l.selection&&i++;else if(l.step){let d=l.step.map(r.slice(s)),u=d&&d.getMap();if(s--,u&&r.appendMap(u,s),d){let f=l.selection&&l.selection.map(r.slice(s));f&&i++;let p=new Zs(u.invert(),d,f),h,m=a.length-1;(h=a.length&&a[m].merge(p))?a[m]=h:a.push(p)}}else l.map&&s--},this.items.length,0),new ks(hn.from(a.reverse()),i)}}ks.empty=new ks(hn.empty,0);function sye(t,n){let r;return t.forEach((s,a)=>{if(s.selection&&n--==0)return r=a,!1}),t.slice(r)}class Zs{constructor(n,r,s,a){this.map=n,this.step=r,this.selection=s,this.mirrorOffset=a}merge(n){if(this.step&&n.step&&!n.selection){let r=n.step.merge(this.step);if(r)return new Zs(r.getMap().invert(),r,this.selection)}}}class Mi{constructor(n,r,s,a,i){this.done=n,this.undone=r,this.prevRanges=s,this.prevTime=a,this.prevComposition=i}}const aye=20;function iye(t,n,r,s){let a=r.getMeta(hl),i;if(a)return a.historyState;r.getMeta(cye)&&(t=new Mi(t.done,t.undone,null,0,-1));let l=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(l&&l.getMeta(hl))return l.getMeta(hl).redo?new Mi(t.done.addTransform(r,void 0,s,Mm(n)),t.undone,KT(r.mapping.maps),t.prevTime,t.prevComposition):new Mi(t.done,t.undone.addTransform(r,void 0,s,Mm(n)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=r.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(r.time||0)-s.newGroupDelay||!oye(r,t.prevRanges)),u=l?gb(t.prevRanges,r.mapping):KT(r.mapping.maps);return new Mi(t.done.addTransform(r,d?n.selection.getBookmark():void 0,s,Mm(n)),ks.empty,u,r.time,c??t.prevComposition)}else return(i=r.getMeta("rebased"))?new Mi(t.done.rebased(r,i),t.undone.rebased(r,i),gb(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Mi(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),gb(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function oye(t,n){if(!n)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((s,a)=>{for(let i=0;i<n.length;i+=2)s<=n[i+1]&&a>=n[i]&&(r=!0)}),r}function KT(t){let n=[];for(let r=t.length-1;r>=0&&n.length==0;r--)t[r].forEach((s,a,i,l)=>n.push(i,l));return n}function gb(t,n){if(!t)return null;let r=[];for(let s=0;s<t.length;s+=2){let a=n.map(t[s],1),i=n.map(t[s+1],-1);a<=i&&r.push(a,i)}return r}function lye(t,n,r){let s=Mm(n),a=hl.get(n).spec.config,i=(r?t.undone:t.done).popEvent(n,s);if(!i)return null;let l=i.selection.resolve(i.transform.doc),c=(r?t.done:t.undone).addTransform(i.transform,n.selection.getBookmark(),a,s),d=new Mi(r?c:i.remaining,r?i.remaining:c,null,0,-1);return i.transform.setSelection(l).setMeta(hl,{redo:r,historyState:d})}let yb=!1,qT=null;function Mm(t){let n=t.plugins;if(qT!=n){yb=!1,qT=n;for(let r=0;r<n.length;r++)if(n[r].spec.historyPreserveItems){yb=!0;break}}return yb}const hl=new Gt("history"),cye=new Gt("closeHistory");function dye(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qt({key:hl,state:{init(){return new Mi(ks.empty,ks.empty,null,0,-1)},apply(n,r,s){return iye(r,s,n,t)}},config:t,props:{handleDOMEvents:{beforeinput(n,r){let s=r.inputType,a=s=="historyUndo"?o6:s=="historyRedo"?l6:null;return a?(r.preventDefault(),a(n.state,n.dispatch)):!1}}}})}function i6(t,n){return(r,s)=>{let a=hl.getState(r);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(s){let i=lye(a,r,t);i&&s(n?i.scrollIntoView():i)}return!0}}const o6=i6(!1,!0),l6=i6(!0,!0),uye=rr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:n})=>o6(t,n),redo:()=>({state:t,dispatch:n})=>l6(t,n)}},addProseMirrorPlugins(){return[dye(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),fye=Ks.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",wr(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:n})=>{if(!Cge(n,n.schema.nodes[this.name]))return!1;const{selection:r}=n,{$from:s,$to:a}=r,i=t();return s.parentOffset===0?i.insertContentAt({from:Math.max(s.pos-1,0),to:a.pos},{type:this.name}):rge(r)?i.insertContentAt(a.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:l,dispatch:c})=>{var d;if(c){const{$to:u}=l.selection,f=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?l.setSelection(ve.create(l.doc,u.pos+1)):u.nodeAfter.isBlock?l.setSelection(ke.create(l.doc,u.pos)):l.setSelection(ve.create(l.doc,u.pos));else{const p=(d=u.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();p&&(l.insert(f,p),l.setSelection(ve.create(l.doc,f+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[kge({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),pye=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,hye=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,mye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,xye=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,gye=Ol.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[gd({find:pye,type:this.type}),gd({find:mye,type:this.type})]},addPasteRules(){return[yd({find:hye,type:this.type}),yd({find:xye,type:this.type})]}}),yye=Ks.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",wr(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vye="listItem",GT="textStyle",YT=/^(\d+)\.\s$/,bye=Ks.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:n,...r}=t;return n===1?["ol",wr(this.options.HTMLAttributes,r),0]:["ol",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vye,this.editor.getAttributes(GT)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Kf({find:YT,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,r)=>r.childCount+r.attrs.start===+n[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kf({find:YT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:n=>({start:+n[1],...this.editor.getAttributes(GT)}),joinPredicate:(n,r)=>r.childCount+r.attrs.start===+n[1],editor:this.editor})),[t]}}),wye=Ks.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),jye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Nye=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Sye=Ol.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[gd({find:jye,type:this.type})]},addPasteRules(){return[yd({find:Nye,type:this.type})]}}),kye=Ks.create({name:"text",group:"inline"});rr.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(Oge.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Pge.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(Ige.configure(this.options.bulletList)),this.options.code!==!1&&t.push($ge.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(zge.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(Vge.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(Wge.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(Zge.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(eye.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(tye.configure(this.options.heading)),this.options.history!==!1&&t.push(uye.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(fye.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(gye.configure(this.options.italic)),this.options.listItem!==!1&&t.push(yye.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(bye.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(wye.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(Sye.configure(this.options.strike)),this.options.text!==!1&&t.push(kye.configure(this.options.text)),t}});var Cye=20,c6=(t,n=0)=>{const r=[];return!t.children.length||n>Cye||Array.from(t.children).forEach(s=>{s.tagName==="SPAN"?r.push(s):s.children.length&&r.push(...c6(s,n+1))}),r},_ye=t=>{if(!t.children.length)return;const n=c6(t);n&&n.forEach(r=>{var s,a;const i=r.getAttribute("style"),l=(a=(s=r.parentElement)==null?void 0:s.closest("span"))==null?void 0:a.getAttribute("style");r.setAttribute("style",`${l};${i}`)})},Pye=Yk.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&_ye(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",To(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:n})=>n.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:n}=t;return t.doc.nodesBetween(n.from,n.to,(r,s)=>{if(r.isTextblock)return!0;r.marks.filter(a=>a.type===this.type).some(a=>Object.values(a.attrs).some(i=>!!i))||t.removeMark(s,s+r.nodeSize,this.type)}),!0}}}}),Aye=Tn.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var n;const r=t.getAttribute("style");if(r){const s=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=s.length-1;a>=0;a-=1){const i=s[a].split(":");if(i.length>=2){const l=i[0].trim().toLowerCase(),c=i.slice(1).join(":").trim();if(l==="background-color")return c.replace(/['"]+/g,"")}}}return(n=t.style.backgroundColor)==null?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:n})=>n().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Eye=Tn.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var n;const r=t.getAttribute("style");if(r){const s=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=s.length-1;a>=0;a-=1){const i=s[a].split(":");if(i.length>=2){const l=i[0].trim().toLowerCase(),c=i.slice(1).join(":").trim();if(l==="color")return c.replace(/['"]+/g,"")}}}return(n=t.style.color)==null?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:n})=>n().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Tye=Tn.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:n})=>n().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Mye=Tn.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:n})=>n().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Oye=Tn.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:n})=>n().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Tn.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(Aye.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(Eye.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(Tye.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Mye.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(Oye.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(Pye.configure(this.options.textStyle)),t}});Yk.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",To(this.options.HTMLAttributes,t),0]},parseMarkdown(t,n){return n.applyMark(this.name||"underline",n.parseInline(t.tokens||[]))},renderMarkdown(t,n){return`++${n.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,n,r){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const i=a[2].trim();return{type:"underline",raw:a[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var Rye=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Iye=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g;Yk.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",To(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,n)=>`==${n.renderChildren(t)}==`,parseMarkdown:(t,n)=>n.applyMark("highlight",n.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,n,r){const a=/^(==)([^=]+)(==)/.exec(t);if(a){const i=a[2].trim(),l=r.inlineTokens(i);return{type:"highlight",raw:a[0],text:i,tokens:l}}}},addCommands(){return{setHighlight:t=>({commands:n})=>n.setMark(this.name,t),toggleHighlight:t=>({commands:n})=>n.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Bme({find:Rye,type:this.type})]},addPasteRules(){return[Qme({find:Iye,type:this.type})]}});Tn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const n=t.style.textAlign;return this.options.alignments.includes(n)?n:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:n})=>this.options.alignments.includes(t)?this.options.types.map(r=>n.updateAttributes(r,{textAlign:t})).every(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(n=>t.resetAttributes(n,"textAlign")).every(n=>n),toggleTextAlign:t=>({editor:n,commands:r})=>this.options.alignments.includes(t)?n.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var Dye=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/;kp.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",To(this.options.HTMLAttributes,t)]},parseMarkdown:(t,n)=>n.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var n,r,s,a,i,l;const c=(r=(n=t.attrs)==null?void 0:n.src)!=null?r:"",d=(a=(s=t.attrs)==null?void 0:s.alt)!=null?a:"",u=(l=(i=t.attrs)==null?void 0:i.title)!=null?l:"";return u?`![${d}](${c} "${u}")`:`![${d}](${c})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:t,minWidth:n,minHeight:r,alwaysPreserveAspectRatio:s}=this.options.resize;return({node:a,getPos:i,HTMLAttributes:l})=>{const c=document.createElement("img");Object.entries(l).forEach(([f,p])=>{if(p!=null)switch(f){case"width":case"height":break;default:c.setAttribute(f,p);break}}),c.src=l.src;const d=new Ume({element:c,node:a,getPos:i,onResize:(f,p)=>{c.style.width=`${f}px`,c.style.height=`${p}px`},onCommit:(f,p)=>{const h=i();h!==void 0&&this.editor.chain().setNodeSelection(h).updateAttributes(this.name,{width:f,height:p}).run()},onUpdate:(f,p,h)=>f.type===a.type,options:{directions:t,min:{width:n,height:r},preserveAspectRatio:s===!0}}),u=d.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",c.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},d}},addCommands(){return{setImage:t=>({commands:n})=>n.insertContent({type:this.name,attrs:t})}},addInputRules(){return[zme({find:Dye,type:this.type,getAttributes:t=>{const[,,n,r,s]=t;return{src:r,alt:n,title:s}}})]}});var Xj,Jj;if(typeof WeakMap<"u"){let t=new WeakMap;Xj=n=>t.get(n),Jj=(n,r)=>(t.set(n,r),r)}else{const t=[];let r=0;Xj=s=>{for(let a=0;a<t.length;a+=2)if(t[a]==s)return t[a+1]},Jj=(s,a)=>(r==10&&(r=0),t[r++]=s,t[r++]=a)}var Ot=class{constructor(t,n,r,s){this.width=t,this.height=n,this.map=r,this.problems=s}findCell(t){for(let n=0;n<this.map.length;n++){const r=this.map[n];if(r!=t)continue;const s=n%this.width,a=n/this.width|0;let i=s+1,l=a+1;for(let c=1;i<this.width&&this.map[n+c]==r;c++)i++;for(let c=1;l<this.height&&this.map[n+this.width*c]==r;c++)l++;return{left:s,top:a,right:i,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,n,r){const{left:s,right:a,top:i,bottom:l}=this.findCell(t);return n=="horiz"?(r<0?s==0:a==this.width)?null:this.map[i*this.width+(r<0?s-1:a)]:(r<0?i==0:l==this.height)?null:this.map[s+this.width*(r<0?i-1:l)]}rectBetween(t,n){const{left:r,right:s,top:a,bottom:i}=this.findCell(t),{left:l,right:c,top:d,bottom:u}=this.findCell(n);return{left:Math.min(r,l),top:Math.min(a,d),right:Math.max(s,c),bottom:Math.max(i,u)}}cellsInRect(t){const n=[],r={};for(let s=t.top;s<t.bottom;s++)for(let a=t.left;a<t.right;a++){const i=s*this.width+a,l=this.map[i];r[l]||(r[l]=!0,!(a==t.left&&a&&this.map[i-1]==l||s==t.top&&s&&this.map[i-this.width]==l)&&n.push(l))}return n}positionAt(t,n,r){for(let s=0,a=0;;s++){const i=a+r.child(s).nodeSize;if(s==t){let l=n+t*this.width;const c=(t+1)*this.width;for(;l<c&&this.map[l]<a;)l++;return l==c?i-1:this.map[l]}a=i}}static get(t){return Xj(t)||Jj(t,Lye(t))}};function Lye(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const n=$ye(t),r=t.childCount,s=[];let a=0,i=null;const l=[];for(let u=0,f=n*r;u<f;u++)s[u]=0;for(let u=0,f=0;u<r;u++){const p=t.child(u);f++;for(let g=0;;g++){for(;a<s.length&&s[a]!=0;)a++;if(g==p.childCount)break;const y=p.child(g),{colspan:v,rowspan:b,colwidth:w}=y.attrs;for(let j=0;j<b;j++){if(j+u>=r){(i||(i=[])).push({type:"overlong_rowspan",pos:f,n:b-j});break}const N=a+j*n;for(let S=0;S<v;S++){s[N+S]==0?s[N+S]=f:(i||(i=[])).push({type:"collision",row:u,pos:f,n:v-S});const _=w&&w[S];if(_){const k=(N+S)%n*2,C=l[k];C==null||C!=_&&l[k+1]==1?(l[k]=_,l[k+1]=1):C==_&&l[k+1]++}}}a+=v,f+=y.nodeSize}const h=(u+1)*n;let m=0;for(;a<h;)s[a++]==0&&m++;m&&(i||(i=[])).push({type:"missing",row:u,n:m}),f++}(n===0||r===0)&&(i||(i=[])).push({type:"zero_sized"});const c=new Ot(n,r,s,i);let d=!1;for(let u=0;!d&&u<l.length;u+=2)l[u]!=null&&l[u+1]<r&&(d=!0);return d&&Fye(c,l,t),c}function $ye(t){let n=-1,r=!1;for(let s=0;s<t.childCount;s++){const a=t.child(s);let i=0;if(r)for(let l=0;l<s;l++){const c=t.child(l);for(let d=0;d<c.childCount;d++){const u=c.child(d);l+u.attrs.rowspan>s&&(i+=u.attrs.colspan)}}for(let l=0;l<a.childCount;l++){const c=a.child(l);i+=c.attrs.colspan,c.attrs.rowspan>1&&(r=!0)}n==-1?n=i:n!=i&&(n=Math.max(n,i))}return n}function Fye(t,n,r){t.problems||(t.problems=[]);const s={};for(let a=0;a<t.map.length;a++){const i=t.map[a];if(s[i])continue;s[i]=!0;const l=r.nodeAt(i);if(!l)throw new RangeError(`No cell with offset ${i} found`);let c=null;const d=l.attrs;for(let u=0;u<d.colspan;u++){const f=(a+u)%t.width,p=n[f*2];p!=null&&(!d.colwidth||d.colwidth[u]!=p)&&((c||(c=Bye(d)))[u]=p)}c&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:c})}}function Bye(t){if(t.colwidth)return t.colwidth.slice();const n=[];for(let r=0;r<t.colspan;r++)n.push(0);return n}function qn(t){let n=t.cached.tableNodeTypes;if(!n){n=t.cached.tableNodeTypes={};for(const r in t.nodes){const s=t.nodes[r],a=s.spec.tableRole;a&&(n[a]=s)}}return n}var Li=new Gt("selectingCells");function Kd(t){for(let n=t.depth-1;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return t.node(0).resolve(t.before(n+1));return null}function zye(t){for(let n=t.depth;n>0;n--){const r=t.node(n).type.spec.tableRole;if(r==="cell"||r==="header_cell")return t.node(n)}return null}function qs(t){const n=t.selection.$head;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="row")return!0;return!1}function Uy(t){const n=t.selection;if("$anchorCell"in n&&n.$anchorCell)return n.$anchorCell.pos>n.$headCell.pos?n.$anchorCell:n.$headCell;if("node"in n&&n.node&&n.node.type.spec.tableRole=="cell")return n.$anchor;const r=Kd(n.$head)||Vye(n.$head);if(r)return r;throw new RangeError(`No cell found around position ${n.head}`)}function Vye(t){for(let n=t.nodeAfter,r=t.pos;n;n=n.firstChild,r++){const s=n.type.spec.tableRole;if(s=="cell"||s=="header_cell")return t.doc.resolve(r)}for(let n=t.nodeBefore,r=t.pos;n;n=n.lastChild,r--){const s=n.type.spec.tableRole;if(s=="cell"||s=="header_cell")return t.doc.resolve(r-n.nodeSize)}}function Qj(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Uye(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function r2(t,n){return t.depth==n.depth&&t.pos>=n.start(-1)&&t.pos<=n.end(-1)}function d6(t,n,r){const s=t.node(-1),a=Ot.get(s),i=t.start(-1),l=a.nextCell(t.pos-i,n,r);return l==null?null:t.node(0).resolve(i+l)}function Rl(t,n,r=1){const s={...t,colspan:t.colspan-r};return s.colwidth&&(s.colwidth=s.colwidth.slice(),s.colwidth.splice(n,r),s.colwidth.some(a=>a>0)||(s.colwidth=null)),s}function u6(t,n,r=1){const s={...t,colspan:t.colspan+r};if(s.colwidth){s.colwidth=s.colwidth.slice();for(let a=0;a<r;a++)s.colwidth.splice(n,0,0)}return s}function Hye(t,n,r){const s=qn(n.type.schema).header_cell;for(let a=0;a<t.height;a++)if(n.nodeAt(t.map[r+a*t.width]).type!=s)return!1;return!0}var at=class Ra extends Ae{constructor(n,r=n){const s=n.node(-1),a=Ot.get(s),i=n.start(-1),l=a.rectBetween(n.pos-i,r.pos-i),c=n.node(0),d=a.cellsInRect(l).filter(f=>f!=r.pos-i);d.unshift(r.pos-i);const u=d.map(f=>{const p=s.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const h=i+f+1;return new VB(c.resolve(h),c.resolve(h+p.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=n,this.$headCell=r}map(n,r){const s=n.resolve(r.map(this.$anchorCell.pos)),a=n.resolve(r.map(this.$headCell.pos));if(Qj(s)&&Qj(a)&&r2(s,a)){const i=this.$anchorCell.node(-1)!=s.node(-1);return i&&this.isRowSelection()?Ra.rowSelection(s,a):i&&this.isColSelection()?Ra.colSelection(s,a):new Ra(s,a)}return ve.between(s,a)}content(){const n=this.$anchorCell.node(-1),r=Ot.get(n),s=this.$anchorCell.start(-1),a=r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s),i={},l=[];for(let d=a.top;d<a.bottom;d++){const u=[];for(let f=d*r.width+a.left,p=a.left;p<a.right;p++,f++){const h=r.map[f];if(i[h])continue;i[h]=!0;const m=r.findCell(h);let g=n.nodeAt(h);if(!g)throw RangeError(`No cell with offset ${h} found`);const y=a.left-m.left,v=m.right-a.right;if(y>0||v>0){let b=g.attrs;if(y>0&&(b=Rl(b,0,y)),v>0&&(b=Rl(b,b.colspan-v,v)),m.left<a.left){if(g=g.type.createAndFill(b),!g)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else g=g.type.create(b,g.content)}if(m.top<a.top||m.bottom>a.bottom){const b={...g.attrs,rowspan:Math.min(m.bottom,a.bottom)-Math.max(m.top,a.top)};m.top<a.top?g=g.type.createAndFill(b):g=g.type.create(b,g.content)}u.push(g)}l.push(n.child(d).copy(Z.from(u)))}const c=this.isColSelection()&&this.isRowSelection()?n:l;return new de(Z.from(c),1,1)}replace(n,r=de.empty){const s=n.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){const{$from:c,$to:d}=a[l],u=n.mapping.slice(s);n.replace(u.map(c.pos),u.map(d.pos),l?de.empty:r)}const i=Ae.findFrom(n.doc.resolve(n.mapping.slice(s).map(this.to)),-1);i&&n.setSelection(i)}replaceWith(n,r){this.replace(n,new de(Z.from(r),0,0))}forEachCell(n){const r=this.$anchorCell.node(-1),s=Ot.get(r),a=this.$anchorCell.start(-1),i=s.cellsInRect(s.rectBetween(this.$anchorCell.pos-a,this.$headCell.pos-a));for(let l=0;l<i.length;l++)n(r.nodeAt(i[l]),a+i[l])}isColSelection(){const n=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(n,r)>0)return!1;const s=n+this.$anchorCell.nodeAfter.attrs.rowspan,a=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(s,a)==this.$headCell.node(-1).childCount}static colSelection(n,r=n){const s=n.node(-1),a=Ot.get(s),i=n.start(-1),l=a.findCell(n.pos-i),c=a.findCell(r.pos-i),d=n.node(0);return l.top<=c.top?(l.top>0&&(n=d.resolve(i+a.map[l.left])),c.bottom<a.height&&(r=d.resolve(i+a.map[a.width*(a.height-1)+c.right-1]))):(c.top>0&&(r=d.resolve(i+a.map[c.left])),l.bottom<a.height&&(n=d.resolve(i+a.map[a.width*(a.height-1)+l.right-1]))),new Ra(n,r)}isRowSelection(){const n=this.$anchorCell.node(-1),r=Ot.get(n),s=this.$anchorCell.start(-1),a=r.colCount(this.$anchorCell.pos-s),i=r.colCount(this.$headCell.pos-s);if(Math.min(a,i)>0)return!1;const l=a+this.$anchorCell.nodeAfter.attrs.colspan,c=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,c)==r.width}eq(n){return n instanceof Ra&&n.$anchorCell.pos==this.$anchorCell.pos&&n.$headCell.pos==this.$headCell.pos}static rowSelection(n,r=n){const s=n.node(-1),a=Ot.get(s),i=n.start(-1),l=a.findCell(n.pos-i),c=a.findCell(r.pos-i),d=n.node(0);return l.left<=c.left?(l.left>0&&(n=d.resolve(i+a.map[l.top*a.width])),c.right<a.width&&(r=d.resolve(i+a.map[a.width*(c.top+1)-1]))):(c.left>0&&(r=d.resolve(i+a.map[c.top*a.width])),l.right<a.width&&(n=d.resolve(i+a.map[a.width*(l.top+1)-1]))),new Ra(n,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(n,r){return new Ra(n.resolve(r.anchor),n.resolve(r.head))}static create(n,r,s=r){return new Ra(n.resolve(r),n.resolve(s))}getBookmark(){return new Wye(this.$anchorCell.pos,this.$headCell.pos)}};at.prototype.visible=!1;Ae.jsonID("cell",at);var Wye=class f6{constructor(n,r){this.anchor=n,this.head=r}map(n){return new f6(n.map(this.anchor),n.map(this.head))}resolve(n){const r=n.resolve(this.anchor),s=n.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&s.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&s.index()<s.parent.childCount&&r2(r,s)?new at(r,s):Ae.near(s,1)}};function Kye(t){if(!(t.selection instanceof at))return null;const n=[];return t.selection.forEachCell((r,s)=>{n.push(Rr.node(s,s+r.nodeSize,{class:"selectedCell"}))}),Dt.create(t.doc,n)}function qye({$from:t,$to:n}){if(t.pos==n.pos||t.pos<n.pos-6)return!1;let r=t.pos,s=n.pos,a=t.depth;for(;a>=0&&!(t.after(a+1)<t.end(a));a--,r++);for(let i=n.depth;i>=0&&!(n.before(i+1)>n.start(i));i--,s--);return r==s&&/row|table/.test(t.node(a).type.spec.tableRole)}function Gye({$from:t,$to:n}){let r,s;for(let a=t.depth;a>0;a--){const i=t.node(a);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}for(let a=n.depth;a>0;a--){const i=n.node(a);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){s=i;break}}return r!==s&&n.parentOffset===0}function Yye(t,n,r){const s=(n||t).selection,a=(n||t).doc;let i,l;if(s instanceof ke&&(l=s.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")i=at.create(a,s.from);else if(l=="row"){const c=a.resolve(s.from+1);i=at.rowSelection(c,c)}else if(!r){const c=Ot.get(s.node),d=s.from+1,u=d+c.map[c.width*c.height-1];i=at.create(a,d+1,u)}}else s instanceof ve&&qye(s)?i=ve.create(a,s.from):s instanceof ve&&Gye(s)&&(i=ve.create(a,s.$from.start(),s.$from.end()));return i&&(n||(n=t.tr)).setSelection(i),n}var Xye=new Gt("fix-tables");function p6(t,n,r,s){const a=t.childCount,i=n.childCount;e:for(let l=0,c=0;l<i;l++){const d=n.child(l);for(let u=c,f=Math.min(a,l+3);u<f;u++)if(t.child(u)==d){c=u+1,r+=d.nodeSize;continue e}s(d,r),c<a&&t.child(c).sameMarkup(d)?p6(t.child(c),d,r+1,s):d.nodesBetween(0,d.content.size,s,r+1),r+=d.nodeSize}}function h6(t,n){let r;const s=(a,i)=>{a.type.spec.tableRole=="table"&&(r=Jye(t,a,i,r))};return n?n.doc!=t.doc&&p6(n.doc,t.doc,0,s):t.doc.descendants(s),r}function Jye(t,n,r,s){const a=Ot.get(n);if(!a.problems)return s;s||(s=t.tr);const i=[];for(let d=0;d<a.height;d++)i.push(0);for(let d=0;d<a.problems.length;d++){const u=a.problems[d];if(u.type=="collision"){const f=n.nodeAt(u.pos);if(!f)continue;const p=f.attrs;for(let h=0;h<p.rowspan;h++)i[u.row+h]+=u.n;s.setNodeMarkup(s.mapping.map(r+1+u.pos),null,Rl(p,p.colspan-u.n,u.n))}else if(u.type=="missing")i[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const f=n.nodeAt(u.pos);if(!f)continue;s.setNodeMarkup(s.mapping.map(r+1+u.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const f=n.nodeAt(u.pos);if(!f)continue;s.setNodeMarkup(s.mapping.map(r+1+u.pos),null,{...f.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const f=s.mapping.map(r);s.delete(f,f+n.nodeSize)}}let l,c;for(let d=0;d<i.length;d++)i[d]&&(l==null&&(l=d),c=d);for(let d=0,u=r+1;d<a.height;d++){const f=n.child(d),p=u+f.nodeSize,h=i[d];if(h>0){let m="cell";f.firstChild&&(m=f.firstChild.type.spec.tableRole);const g=[];for(let v=0;v<h;v++){const b=qn(t.schema)[m].createAndFill();b&&g.push(b)}const y=(d==0||l==d-1)&&c==d?u+1:p-1;s.insert(s.mapping.map(y),g)}u=p}return s.setMeta(Xye,{fixTables:!0})}function Pa(t){const n=t.selection,r=Uy(t),s=r.node(-1),a=r.start(-1),i=Ot.get(s);return{...n instanceof at?i.rectBetween(n.$anchorCell.pos-a,n.$headCell.pos-a):i.findCell(r.pos-a),tableStart:a,map:i,table:s}}function m6(t,{map:n,tableStart:r,table:s},a){let i=a>0?-1:0;Hye(n,s,a+i)&&(i=a==0||a==n.width?null:0);for(let l=0;l<n.height;l++){const c=l*n.width+a;if(a>0&&a<n.width&&n.map[c-1]==n.map[c]){const d=n.map[c],u=s.nodeAt(d);t.setNodeMarkup(t.mapping.map(r+d),null,u6(u.attrs,a-n.colCount(d))),l+=u.attrs.rowspan-1}else{const d=i==null?qn(s.type.schema).cell:s.nodeAt(n.map[c+i]).type,u=n.positionAt(l,a,s);t.insert(t.mapping.map(r+u),d.createAndFill())}}return t}function Qye(t,n){if(!qs(t))return!1;if(n){const r=Pa(t);n(m6(t.tr,r,r.left))}return!0}function Zye(t,n){if(!qs(t))return!1;if(n){const r=Pa(t);n(m6(t.tr,r,r.right))}return!0}function eve(t,{map:n,table:r,tableStart:s},a){const i=t.mapping.maps.length;for(let l=0;l<n.height;){const c=l*n.width+a,d=n.map[c],u=r.nodeAt(d),f=u.attrs;if(a>0&&n.map[c-1]==d||a<n.width-1&&n.map[c+1]==d)t.setNodeMarkup(t.mapping.slice(i).map(s+d),null,Rl(f,a-n.colCount(d)));else{const p=t.mapping.slice(i).map(s+d);t.delete(p,p+u.nodeSize)}l+=f.rowspan}}function tve(t,n){if(!qs(t))return!1;if(n){const r=Pa(t),s=t.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let a=r.right-1;eve(s,r,a),a!=r.left;a--){const i=r.tableStart?s.doc.nodeAt(r.tableStart-1):s.doc;if(!i)throw RangeError("No table found");r.table=i,r.map=Ot.get(i)}n(s)}return!0}function nve(t,n,r){var s;const a=qn(n.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((s=n.nodeAt(t.map[i+r*t.width]))==null?void 0:s.type)!=a)return!1;return!0}function x6(t,{map:n,tableStart:r,table:s},a){var i;let l=r;for(let u=0;u<a;u++)l+=s.child(u).nodeSize;const c=[];let d=a>0?-1:0;nve(n,s,a+d)&&(d=a==0||a==n.height?null:0);for(let u=0,f=n.width*a;u<n.width;u++,f++)if(a>0&&a<n.height&&n.map[f]==n.map[f-n.width]){const p=n.map[f],h=s.nodeAt(p).attrs;t.setNodeMarkup(r+p,null,{...h,rowspan:h.rowspan+1}),u+=h.colspan-1}else{const p=d==null?qn(s.type.schema).cell:(i=s.nodeAt(n.map[f+d*n.width]))==null?void 0:i.type,h=p==null?void 0:p.createAndFill();h&&c.push(h)}return t.insert(l,qn(s.type.schema).row.create(null,c)),t}function rve(t,n){if(!qs(t))return!1;if(n){const r=Pa(t);n(x6(t.tr,r,r.top))}return!0}function sve(t,n){if(!qs(t))return!1;if(n){const r=Pa(t);n(x6(t.tr,r,r.bottom))}return!0}function ave(t,{map:n,table:r,tableStart:s},a){let i=0;for(let u=0;u<a;u++)i+=r.child(u).nodeSize;const l=i+r.child(a).nodeSize,c=t.mapping.maps.length;t.delete(i+s,l+s);const d=new Set;for(let u=0,f=a*n.width;u<n.width;u++,f++){const p=n.map[f];if(!d.has(p)){if(d.add(p),a>0&&p==n.map[f-n.width]){const h=r.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(c).map(p+s),null,{...h,rowspan:h.rowspan-1}),u+=h.colspan-1}else if(a<n.height&&p==n.map[f+n.width]){const h=r.nodeAt(p),m=h.attrs,g=h.type.create({...m,rowspan:h.attrs.rowspan-1},h.content),y=n.positionAt(a+1,u,r);t.insert(t.mapping.slice(c).map(s+y),g),u+=m.colspan-1}}}}function ive(t,n){if(!qs(t))return!1;if(n){const r=Pa(t),s=t.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let a=r.bottom-1;ave(s,r,a),a!=r.top;a--){const i=r.tableStart?s.doc.nodeAt(r.tableStart-1):s.doc;if(!i)throw RangeError("No table found");r.table=i,r.map=Ot.get(r.table)}n(s)}return!0}function XT(t){const n=t.content;return n.childCount==1&&n.child(0).isTextblock&&n.child(0).childCount==0}function ove({width:t,height:n,map:r},s){let a=s.top*t+s.left,i=a,l=(s.bottom-1)*t+s.left,c=a+(s.right-s.left-1);for(let d=s.top;d<s.bottom;d++){if(s.left>0&&r[i]==r[i-1]||s.right<t&&r[c]==r[c+1])return!0;i+=t,c+=t}for(let d=s.left;d<s.right;d++){if(s.top>0&&r[a]==r[a-t]||s.bottom<n&&r[l]==r[l+t])return!0;a++,l++}return!1}function JT(t,n){const r=t.selection;if(!(r instanceof at)||r.$anchorCell.pos==r.$headCell.pos)return!1;const s=Pa(t),{map:a}=s;if(ove(a,s))return!1;if(n){const i=t.tr,l={};let c=Z.empty,d,u;for(let f=s.top;f<s.bottom;f++)for(let p=s.left;p<s.right;p++){const h=a.map[f*a.width+p],m=s.table.nodeAt(h);if(!(l[h]||!m))if(l[h]=!0,d==null)d=h,u=m;else{XT(m)||(c=c.append(m.content));const g=i.mapping.map(h+s.tableStart);i.delete(g,g+m.nodeSize)}}if(d==null||u==null)return!0;if(i.setNodeMarkup(d+s.tableStart,null,{...u6(u.attrs,u.attrs.colspan,s.right-s.left-u.attrs.colspan),rowspan:s.bottom-s.top}),c.size){const f=d+1+u.content.size,p=XT(u)?d+1:f;i.replaceWith(p+s.tableStart,f+s.tableStart,c)}i.setSelection(new at(i.doc.resolve(d+s.tableStart))),n(i)}return!0}function QT(t,n){const r=qn(t.schema);return lve(({node:s})=>r[s.type.spec.tableRole])(t,n)}function lve(t){return(n,r)=>{var s;const a=n.selection;let i,l;if(a instanceof at){if(a.$anchorCell.pos!=a.$headCell.pos)return!1;i=a.$anchorCell.nodeAfter,l=a.$anchorCell.pos}else{if(i=zye(a.$from),!i)return!1;l=(s=Kd(a.$from))==null?void 0:s.pos}if(i==null||l==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(r){let c=i.attrs;const d=[],u=c.colwidth;c.rowspan>1&&(c={...c,rowspan:1}),c.colspan>1&&(c={...c,colspan:1});const f=Pa(n),p=n.tr;for(let m=0;m<f.right-f.left;m++)d.push(u?{...c,colwidth:u&&u[m]?[u[m]]:null}:c);let h;for(let m=f.top;m<f.bottom;m++){let g=f.map.positionAt(m,f.left,f.table);m==f.top&&(g+=i.nodeSize);for(let y=f.left,v=0;y<f.right;y++,v++)y==f.left&&m==f.top||p.insert(h=p.mapping.map(g+f.tableStart,1),t({node:i,row:m,col:y}).createAndFill(d[v]))}p.setNodeMarkup(l,t({node:i,row:f.top,col:f.left}),d[0]),a instanceof at&&p.setSelection(new at(p.doc.resolve(a.$anchorCell.pos),h?p.doc.resolve(h):void 0)),r(p)}return!0}}function cve(t,n){return function(r,s){if(!qs(r))return!1;const a=Uy(r);if(a.nodeAfter.attrs[t]===n)return!1;if(s){const i=r.tr;r.selection instanceof at?r.selection.forEachCell((l,c)=>{l.attrs[t]!==n&&i.setNodeMarkup(c,null,{...l.attrs,[t]:n})}):i.setNodeMarkup(a.pos,null,{...a.nodeAfter.attrs,[t]:n}),s(i)}return!0}}function dve(t){return function(n,r){if(!qs(n))return!1;if(r){const s=qn(n.schema),a=Pa(n),i=n.tr,l=a.map.cellsInRect(t=="column"?{left:a.left,top:0,right:a.right,bottom:a.map.height}:t=="row"?{left:0,top:a.top,right:a.map.width,bottom:a.bottom}:a),c=l.map(d=>a.table.nodeAt(d));for(let d=0;d<l.length;d++)c[d].type==s.header_cell&&i.setNodeMarkup(a.tableStart+l[d],s.cell,c[d].attrs);if(i.steps.length==0)for(let d=0;d<l.length;d++)i.setNodeMarkup(a.tableStart+l[d],s.header_cell,c[d].attrs);r(i)}return!0}}function ZT(t,n,r){const s=n.map.cellsInRect({left:0,top:0,right:t=="row"?n.map.width:1,bottom:t=="column"?n.map.height:1});for(let a=0;a<s.length;a++){const i=n.table.nodeAt(s[a]);if(i&&i.type!==r.header_cell)return!1}return!0}function qf(t,n){return n=n||{useDeprecatedLogic:!1},n.useDeprecatedLogic?dve(t):function(r,s){if(!qs(r))return!1;if(s){const a=qn(r.schema),i=Pa(r),l=r.tr,c=ZT("row",i,a),d=ZT("column",i,a),f=(t==="column"?c:t==="row"?d:!1)?1:0,p=t=="column"?{left:0,top:f,right:1,bottom:i.map.height}:t=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,h=t=="column"?d?a.cell:a.header_cell:t=="row"?c?a.cell:a.header_cell:a.cell;i.map.cellsInRect(p).forEach(m=>{const g=m+i.tableStart,y=l.doc.nodeAt(g);y&&l.setNodeMarkup(g,h,y.attrs)}),s(l)}return!0}}qf("row",{useDeprecatedLogic:!0});qf("column",{useDeprecatedLogic:!0});var uve=qf("cell",{useDeprecatedLogic:!0});function fve(t,n){if(n<0){const r=t.nodeBefore;if(r)return t.pos-r.nodeSize;for(let s=t.index(-1)-1,a=t.before();s>=0;s--){const i=t.node(-1).child(s),l=i.lastChild;if(l)return a-1-l.nodeSize;a-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const r=t.node(-1);for(let s=t.indexAfter(-1),a=t.after();s<r.childCount;s++){const i=r.child(s);if(i.childCount)return a+1;a+=i.nodeSize}}return null}function eM(t){return function(n,r){if(!qs(n))return!1;const s=fve(Uy(n),t);if(s==null)return!1;if(r){const a=n.doc.resolve(s);r(n.tr.setSelection(ve.between(a,Uye(a))).scrollIntoView())}return!0}}function pve(t,n){const r=t.selection.$anchor;for(let s=r.depth;s>0;s--)if(r.node(s).type.spec.tableRole=="table")return n&&n(t.tr.delete(r.before(s),r.after(s)).scrollIntoView()),!0;return!1}function Fh(t,n){const r=t.selection;if(!(r instanceof at))return!1;if(n){const s=t.tr,a=qn(t.schema).cell.createAndFill().content;r.forEachCell((i,l)=>{i.content.eq(a)||s.replace(s.mapping.map(l+1),s.mapping.map(l+i.nodeSize-1),new de(a,0,0))}),s.docChanged&&n(s)}return!0}function hve(t){if(!t.size)return null;let{content:n,openStart:r,openEnd:s}=t;for(;n.childCount==1&&(r>0&&s>0||n.child(0).type.spec.tableRole=="table");)r--,s--,n=n.child(0).content;const a=n.child(0),i=a.type.spec.tableRole,l=a.type.schema,c=[];if(i=="row")for(let d=0;d<n.childCount;d++){let u=n.child(d).content;const f=d?0:Math.max(0,r-1),p=d<n.childCount-1?0:Math.max(0,s-1);(f||p)&&(u=Zj(qn(l).row,new de(u,f,p)).content),c.push(u)}else if(i=="cell"||i=="header_cell")c.push(r||s?Zj(qn(l).row,new de(n,r,s)).content:n);else return null;return mve(l,c)}function mve(t,n){const r=[];for(let a=0;a<n.length;a++){const i=n[a];for(let l=i.childCount-1;l>=0;l--){const{rowspan:c,colspan:d}=i.child(l).attrs;for(let u=a;u<a+c;u++)r[u]=(r[u]||0)+d}}let s=0;for(let a=0;a<r.length;a++)s=Math.max(s,r[a]);for(let a=0;a<r.length;a++)if(a>=n.length&&n.push(Z.empty),r[a]<s){const i=qn(t).cell.createAndFill(),l=[];for(let c=r[a];c<s;c++)l.push(i);n[a]=n[a].append(Z.from(l))}return{height:n.length,width:s,rows:n}}function Zj(t,n){const r=t.createAndFill();return new zB(r).replace(0,r.content.size,n).doc}function xve({width:t,height:n,rows:r},s,a){if(t!=s){const i=[],l=[];for(let c=0;c<r.length;c++){const d=r[c],u=[];for(let f=i[c]||0,p=0;f<s;p++){let h=d.child(p%d.childCount);f+h.attrs.colspan>s&&(h=h.type.createChecked(Rl(h.attrs,h.attrs.colspan,f+h.attrs.colspan-s),h.content)),u.push(h),f+=h.attrs.colspan;for(let m=1;m<h.attrs.rowspan;m++)i[c+m]=(i[c+m]||0)+h.attrs.colspan}l.push(Z.from(u))}r=l,t=s}if(n!=a){const i=[];for(let l=0,c=0;l<a;l++,c++){const d=[],u=r[c%n];for(let f=0;f<u.childCount;f++){let p=u.child(f);l+p.attrs.rowspan>a&&(p=p.type.create({...p.attrs,rowspan:Math.max(1,a-p.attrs.rowspan)},p.content)),d.push(p)}i.push(Z.from(d))}r=i,n=a}return{width:t,height:n,rows:r}}function gve(t,n,r,s,a,i,l){const c=t.doc.type.schema,d=qn(c);let u,f;if(a>n.width)for(let p=0,h=0;p<n.height;p++){const m=r.child(p);h+=m.nodeSize;const g=[];let y;m.lastChild==null||m.lastChild.type==d.cell?y=u||(u=d.cell.createAndFill()):y=f||(f=d.header_cell.createAndFill());for(let v=n.width;v<a;v++)g.push(y);t.insert(t.mapping.slice(l).map(h-1+s),g)}if(i>n.height){const p=[];for(let g=0,y=(n.height-1)*n.width;g<Math.max(n.width,a);g++){const v=g>=n.width?!1:r.nodeAt(n.map[y+g]).type==d.header_cell;p.push(v?f||(f=d.header_cell.createAndFill()):u||(u=d.cell.createAndFill()))}const h=d.row.create(null,Z.from(p)),m=[];for(let g=n.height;g<i;g++)m.push(h);t.insert(t.mapping.slice(l).map(s+r.nodeSize-2),m)}return!!(u||f)}function tM(t,n,r,s,a,i,l,c){if(l==0||l==n.height)return!1;let d=!1;for(let u=a;u<i;u++){const f=l*n.width+u,p=n.map[f];if(n.map[f-n.width]==p){d=!0;const h=r.nodeAt(p),{top:m,left:g}=n.findCell(p);t.setNodeMarkup(t.mapping.slice(c).map(p+s),null,{...h.attrs,rowspan:l-m}),t.insert(t.mapping.slice(c).map(n.positionAt(l,g,r)),h.type.createAndFill({...h.attrs,rowspan:m+h.attrs.rowspan-l})),u+=h.attrs.colspan-1}}return d}function nM(t,n,r,s,a,i,l,c){if(l==0||l==n.width)return!1;let d=!1;for(let u=a;u<i;u++){const f=u*n.width+l,p=n.map[f];if(n.map[f-1]==p){d=!0;const h=r.nodeAt(p),m=n.colCount(p),g=t.mapping.slice(c).map(p+s);t.setNodeMarkup(g,null,Rl(h.attrs,l-m,h.attrs.colspan-(l-m))),t.insert(g+h.nodeSize,h.type.createAndFill(Rl(h.attrs,0,l-m))),u+=h.attrs.rowspan-1}}return d}function rM(t,n,r,s,a){let i=r?t.doc.nodeAt(r-1):t.doc;if(!i)throw new Error("No table found");let l=Ot.get(i);const{top:c,left:d}=s,u=d+a.width,f=c+a.height,p=t.tr;let h=0;function m(){if(i=r?p.doc.nodeAt(r-1):p.doc,!i)throw new Error("No table found");l=Ot.get(i),h=p.mapping.maps.length}gve(p,l,i,r,u,f,h)&&m(),tM(p,l,i,r,d,u,c,h)&&m(),tM(p,l,i,r,d,u,f,h)&&m(),nM(p,l,i,r,c,f,d,h)&&m(),nM(p,l,i,r,c,f,u,h)&&m();for(let g=c;g<f;g++){const y=l.positionAt(g,d,i),v=l.positionAt(g,u,i);p.replace(p.mapping.slice(h).map(y+r),p.mapping.slice(h).map(v+r),new de(a.rows[g-c],0,0))}m(),p.setSelection(new at(p.doc.resolve(r+l.positionAt(c,d,i)),p.doc.resolve(r+l.positionAt(f-1,u-1,i)))),n(p)}var yve=Oz({ArrowLeft:Bh("horiz",-1),ArrowRight:Bh("horiz",1),ArrowUp:Bh("vert",-1),ArrowDown:Bh("vert",1),"Shift-ArrowLeft":zh("horiz",-1),"Shift-ArrowRight":zh("horiz",1),"Shift-ArrowUp":zh("vert",-1),"Shift-ArrowDown":zh("vert",1),Backspace:Fh,"Mod-Backspace":Fh,Delete:Fh,"Mod-Delete":Fh});function Om(t,n,r){return r.eq(t.selection)?!1:(n&&n(t.tr.setSelection(r).scrollIntoView()),!0)}function Bh(t,n){return(r,s,a)=>{if(!a)return!1;const i=r.selection;if(i instanceof at)return Om(r,s,Ae.near(i.$headCell,n));if(t!="horiz"&&!i.empty)return!1;const l=g6(a,t,n);if(l==null)return!1;if(t=="horiz")return Om(r,s,Ae.near(r.doc.resolve(i.head+n),n));{const c=r.doc.resolve(l),d=d6(c,t,n);let u;return d?u=Ae.near(d,1):n<0?u=Ae.near(r.doc.resolve(c.before(-1)),-1):u=Ae.near(r.doc.resolve(c.after(-1)),1),Om(r,s,u)}}}function zh(t,n){return(r,s,a)=>{if(!a)return!1;const i=r.selection;let l;if(i instanceof at)l=i;else{const d=g6(a,t,n);if(d==null)return!1;l=new at(r.doc.resolve(d))}const c=d6(l.$headCell,t,n);return c?Om(r,s,new at(l.$anchorCell,c)):!1}}function vve(t,n){const r=t.state.doc,s=Kd(r.resolve(n));return s?(t.dispatch(t.state.tr.setSelection(new at(s))),!0):!1}function bve(t,n,r){if(!qs(t.state))return!1;let s=hve(r);const a=t.state.selection;if(a instanceof at){s||(s={width:1,height:1,rows:[Z.from(Zj(qn(t.state.schema).cell,r))]});const i=a.$anchorCell.node(-1),l=a.$anchorCell.start(-1),c=Ot.get(i).rectBetween(a.$anchorCell.pos-l,a.$headCell.pos-l);return s=xve(s,c.right-c.left,c.bottom-c.top),rM(t.state,t.dispatch,l,c,s),!0}else if(s){const i=Uy(t.state),l=i.start(-1);return rM(t.state,t.dispatch,l,Ot.get(i.node(-1)).findCell(i.pos-l),s),!0}else return!1}function wve(t,n){var r;if(n.ctrlKey||n.metaKey)return;const s=sM(t,n.target);let a;if(n.shiftKey&&t.state.selection instanceof at)i(t.state.selection.$anchorCell,n),n.preventDefault();else if(n.shiftKey&&s&&(a=Kd(t.state.selection.$anchor))!=null&&((r=vb(t,n))==null?void 0:r.pos)!=a.pos)i(a,n),n.preventDefault();else if(!s)return;function i(d,u){let f=vb(t,u);const p=Li.getState(t.state)==null;if(!f||!r2(d,f))if(p)f=d;else return;const h=new at(d,f);if(p||!t.state.selection.eq(h)){const m=t.state.tr.setSelection(h);p&&m.setMeta(Li,d.pos),t.dispatch(m)}}function l(){t.root.removeEventListener("mouseup",l),t.root.removeEventListener("dragstart",l),t.root.removeEventListener("mousemove",c),Li.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Li,-1))}function c(d){const u=d,f=Li.getState(t.state);let p;if(f!=null)p=t.state.doc.resolve(f);else if(sM(t,u.target)!=s&&(p=vb(t,n),!p))return l();p&&i(p,u)}t.root.addEventListener("mouseup",l),t.root.addEventListener("dragstart",l),t.root.addEventListener("mousemove",c)}function g6(t,n,r){if(!(t.state.selection instanceof ve))return null;const{$head:s}=t.state.selection;for(let a=s.depth-1;a>=0;a--){const i=s.node(a);if((r<0?s.index(a):s.indexAfter(a))!=(r<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const c=s.before(a),d=n=="vert"?r>0?"down":"up":r>0?"right":"left";return t.endOfTextblock(d)?c:null}}return null}function sM(t,n){for(;n&&n!=t.dom;n=n.parentNode)if(n.nodeName=="TD"||n.nodeName=="TH")return n;return null}function vb(t,n){const r=t.posAtCoords({left:n.clientX,top:n.clientY});return r&&r?Kd(t.state.doc.resolve(r.pos)):null}var jve=class{constructor(n,r){this.node=n,this.defaultCellMinWidth=r,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${r}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),e1(n,this.colgroup,this.table,r),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,e1(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function e1(t,n,r,s,a,i){var l;let c=0,d=!0,u=n.firstChild;const f=t.firstChild;if(f){for(let p=0,h=0;p<f.childCount;p++){const{colspan:m,colwidth:g}=f.child(p).attrs;for(let y=0;y<m;y++,h++){const v=a==h?i:g&&g[y],b=v?v+"px":"";if(c+=v||s,v||(d=!1),u)u.style.width!=b&&(u.style.width=b),u=u.nextSibling;else{const w=document.createElement("col");w.style.width=b,n.appendChild(w)}}}for(;u;){const p=u.nextSibling;(l=u.parentNode)==null||l.removeChild(u),u=p}d?(r.style.width=c+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=c+"px")}}var Tr=new Gt("tableColumnResizing");function Nve({handleWidth:t=5,cellMinWidth:n=25,defaultCellMinWidth:r=100,View:s=jve,lastColumnResizable:a=!0}={}){const i=new qt({key:Tr,state:{init(l,c){var d,u;const f=(u=(d=i.spec)==null?void 0:d.props)==null?void 0:u.nodeViews,p=qn(c.schema).table.name;return s&&f&&(f[p]=(h,m)=>new s(h,r,m)),new Sve(-1,!1)},apply(l,c){return c.apply(l)}},props:{attributes:l=>{const c=Tr.getState(l);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,c)=>{kve(l,c,t,a)},mouseleave:l=>{Cve(l)},mousedown:(l,c)=>{_ve(l,c,n,r)}},decorations:l=>{const c=Tr.getState(l);if(c&&c.activeHandle>-1)return Mve(l,c.activeHandle)},nodeViews:{}}});return i}var Sve=class Rm{constructor(n,r){this.activeHandle=n,this.dragging=r}apply(n){const r=this,s=n.getMeta(Tr);if(s&&s.setHandle!=null)return new Rm(s.setHandle,!1);if(s&&s.setDragging!==void 0)return new Rm(r.activeHandle,s.setDragging);if(r.activeHandle>-1&&n.docChanged){let a=n.mapping.map(r.activeHandle,-1);return Qj(n.doc.resolve(a))||(a=-1),new Rm(a,r.dragging)}return r}};function kve(t,n,r,s){if(!t.editable)return;const a=Tr.getState(t.state);if(a&&!a.dragging){const i=Ave(n.target);let l=-1;if(i){const{left:c,right:d}=i.getBoundingClientRect();n.clientX-c<=r?l=aM(t,n,"left",r):d-n.clientX<=r&&(l=aM(t,n,"right",r))}if(l!=a.activeHandle){if(!s&&l!==-1){const c=t.state.doc.resolve(l),d=c.node(-1),u=Ot.get(d),f=c.start(-1);if(u.colCount(c.pos-f)+c.nodeAfter.attrs.colspan-1==u.width-1)return}y6(t,l)}}}function Cve(t){if(!t.editable)return;const n=Tr.getState(t.state);n&&n.activeHandle>-1&&!n.dragging&&y6(t,-1)}function _ve(t,n,r,s){var a;if(!t.editable)return!1;const i=(a=t.dom.ownerDocument.defaultView)!=null?a:window,l=Tr.getState(t.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const c=t.state.doc.nodeAt(l.activeHandle),d=Pve(t,l.activeHandle,c.attrs);t.dispatch(t.state.tr.setMeta(Tr,{setDragging:{startX:n.clientX,startWidth:d}}));function u(p){i.removeEventListener("mouseup",u),i.removeEventListener("mousemove",f);const h=Tr.getState(t.state);h!=null&&h.dragging&&(Eve(t,h.activeHandle,iM(h.dragging,p,r)),t.dispatch(t.state.tr.setMeta(Tr,{setDragging:null})))}function f(p){if(!p.which)return u(p);const h=Tr.getState(t.state);if(h&&h.dragging){const m=iM(h.dragging,p,r);oM(t,h.activeHandle,m,s)}}return oM(t,l.activeHandle,d,s),i.addEventListener("mouseup",u),i.addEventListener("mousemove",f),n.preventDefault(),!0}function Pve(t,n,{colspan:r,colwidth:s}){const a=s&&s[s.length-1];if(a)return a;const i=t.domAtPos(n);let c=i.node.childNodes[i.offset].offsetWidth,d=r;if(s)for(let u=0;u<r;u++)s[u]&&(c-=s[u],d--);return c/d}function Ave(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function aM(t,n,r,s){const a=r=="right"?-s:s,i=t.posAtCoords({left:n.clientX+a,top:n.clientY});if(!i)return-1;const{pos:l}=i,c=Kd(t.state.doc.resolve(l));if(!c)return-1;if(r=="right")return c.pos;const d=Ot.get(c.node(-1)),u=c.start(-1),f=d.map.indexOf(c.pos-u);return f%d.width==0?-1:u+d.map[f-1]}function iM(t,n,r){const s=n.clientX-t.startX;return Math.max(r,t.startWidth+s)}function y6(t,n){t.dispatch(t.state.tr.setMeta(Tr,{setHandle:n}))}function Eve(t,n,r){const s=t.state.doc.resolve(n),a=s.node(-1),i=Ot.get(a),l=s.start(-1),c=i.colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1,d=t.state.tr;for(let u=0;u<i.height;u++){const f=u*i.width+c;if(u&&i.map[f]==i.map[f-i.width])continue;const p=i.map[f],h=a.nodeAt(p).attrs,m=h.colspan==1?0:c-i.colCount(p);if(h.colwidth&&h.colwidth[m]==r)continue;const g=h.colwidth?h.colwidth.slice():Tve(h.colspan);g[m]=r,d.setNodeMarkup(l+p,null,{...h,colwidth:g})}d.docChanged&&t.dispatch(d)}function oM(t,n,r,s){const a=t.state.doc.resolve(n),i=a.node(-1),l=a.start(-1),c=Ot.get(i).colCount(a.pos-l)+a.nodeAfter.attrs.colspan-1;let d=t.domAtPos(a.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&e1(i,d.firstChild,d,s,c,r)}function Tve(t){return Array(t).fill(0)}function Mve(t,n){var r;const s=[],a=t.doc.resolve(n),i=a.node(-1);if(!i)return Dt.empty;const l=Ot.get(i),c=a.start(-1),d=l.colCount(a.pos-c)+a.nodeAfter.attrs.colspan-1;for(let u=0;u<l.height;u++){const f=d+u*l.width;if((d==l.width-1||l.map[f]!=l.map[f+1])&&(u==0||l.map[f]!=l.map[f-l.width])){const p=l.map[f],h=c+p+i.nodeAt(p).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(r=Tr.getState(t))!=null&&r.dragging&&s.push(Rr.node(c+p,c+p+i.nodeAt(p).nodeSize,{class:"column-resize-dragging"})),s.push(Rr.widget(h,m))}}return Dt.create(t.doc,s)}function Ove({allowTableNodeSelection:t=!1}={}){return new qt({key:Li,state:{init(){return null},apply(n,r){const s=n.getMeta(Li);if(s!=null)return s==-1?null:s;if(r==null||!n.docChanged)return r;const{deleted:a,pos:i}=n.mapping.mapResult(r);return a?null:i}},props:{decorations:Kye,handleDOMEvents:{mousedown:wve},createSelectionBetween(n){return Li.getState(n.state)!=null?n.state.selection:null},handleTripleClick:vve,handleKeyDown:yve,handlePaste:bve},appendTransaction(n,r,s){return Yye(s,h6(s,r),t)}})}var v6=kp.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var n,r;const s=t.getAttribute("colwidth"),a=s?s.split(",").map(i=>parseInt(i,10)):null;if(!a){const i=(n=t.closest("table"))==null?void 0:n.querySelectorAll("colgroup > col"),l=Array.from(((r=t.parentElement)==null?void 0:r.children)||[]).indexOf(t);if(l&&l>-1&&i&&i[l]){const c=i[l].getAttribute("width");return c?[parseInt(c,10)]:null}}return a}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",To(this.options.HTMLAttributes,t),0]}}),Rve=kp.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const n=t.getAttribute("colwidth");return n?n.split(",").map(s=>parseInt(s,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",To(this.options.HTMLAttributes,t),0]}}),Ive=kp.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",To(this.options.HTMLAttributes,t),0]}});function t1(t,n){return n?["width",`${Math.max(n,t)}px`]:["min-width",`${t}px`]}function lM(t,n,r,s,a,i){var l;let c=0,d=!0,u=n.firstChild;const f=t.firstChild;if(f!==null)for(let h=0,m=0;h<f.childCount;h+=1){const{colspan:g,colwidth:y}=f.child(h).attrs;for(let v=0;v<g;v+=1,m+=1){const b=a===m?i:y&&y[v],w=b?`${b}px`:"";if(c+=b||s,b||(d=!1),u){if(u.style.width!==w){const[j,N]=t1(s,b);u.style.setProperty(j,N)}u=u.nextSibling}else{const j=document.createElement("col"),[N,S]=t1(s,b);j.style.setProperty(N,S),n.appendChild(j)}}}for(;u;){const h=u.nextSibling;(l=u.parentNode)==null||l.removeChild(u),u=h}const p=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);d&&!p?(r.style.width=`${c}px`,r.style.minWidth=""):(r.style.width="",r.style.minWidth=`${c}px`)}var Dve=class{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),lM(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,lM(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const n=t.target,r=this.dom.contains(n),s=this.contentDOM.contains(n);return!!(r&&!s&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function Lve(t,n,r,s){let a=0,i=!0;const l=[],c=t.firstChild;if(!c)return{};for(let p=0,h=0;p<c.childCount;p+=1){const{colspan:m,colwidth:g}=c.child(p).attrs;for(let y=0;y<m;y+=1,h+=1){const v=r===h?s:g&&g[y];a+=v||n,v||(i=!1);const[b,w]=t1(n,v);l.push(["col",{style:`${b}: ${w}`}])}}const d=i?`${a}px`:"",u=i?"":`${a}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:u}}function cM(t,n){return t.createAndFill()}function $ve(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const n={};return Object.keys(t.nodes).forEach(r=>{const s=t.nodes[r];s.spec.tableRole&&(n[s.spec.tableRole]=s)}),t.cached.tableNodeTypes=n,n}function Fve(t,n,r,s,a){const i=$ve(t),l=[],c=[];for(let u=0;u<r;u+=1){const f=cM(i.cell);if(f&&c.push(f),s){const p=cM(i.header_cell);p&&l.push(p)}}const d=[];for(let u=0;u<n;u+=1)d.push(i.row.createChecked(null,s&&u===0?l:c));return i.table.createChecked(null,d)}function Bve(t){return t instanceof at}var Vh=({editor:t})=>{const{selection:n}=t.state;if(!Bve(n))return!1;let r=0;const s=zz(n.ranges[0].$from,i=>i.type.name==="table");return s==null||s.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(r+=1)}),r===n.ranges.length?(t.commands.deleteTable(),!0):!1},zve="";function Vve(t){return(t||"").replace(/\s+/g," ").trim()}function Uve(t,n,r={}){var s;const a=(s=r.cellLineSeparator)!=null?s:zve;if(!t||!t.content||t.content.length===0)return"";const i=[];t.content.forEach(g=>{const y=[];g.content&&g.content.forEach(v=>{let b="";v.content&&Array.isArray(v.content)&&v.content.length>1?b=v.content.map(S=>n.renderChildren(S)).join(a):b=v.content?n.renderChildren(v.content):"";const w=Vve(b),j=v.type==="tableHeader";y.push({text:w,isHeader:j})}),i.push(y)});const l=i.reduce((g,y)=>Math.max(g,y.length),0);if(l===0)return"";const c=new Array(l).fill(0);i.forEach(g=>{var y;for(let v=0;v<l;v+=1){const w=(((y=g[v])==null?void 0:y.text)||"").length;w>c[v]&&(c[v]=w),c[v]<3&&(c[v]=3)}});const d=(g,y)=>g+" ".repeat(Math.max(0,y-g.length)),u=i[0],f=u.some(g=>g.isHeader);let p=`
`;const h=new Array(l).fill(0).map((g,y)=>f&&u[y]&&u[y].text||"");return p+=`| ${h.map((g,y)=>d(g,c[y])).join(" | ")} |
`,p+=`| ${c.map(g=>"-".repeat(Math.max(3,g))).join(" | ")} |
`,(f?i.slice(1):i).forEach(g=>{p+=`| ${new Array(l).fill(0).map((y,v)=>d(g[v]&&g[v].text||"",c[v])).join(" | ")} |
`}),p}var Hve=Uve,b6=kp.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:Dve,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:n}){const{colgroup:r,tableWidth:s,tableMinWidth:a}=Lve(t,this.options.cellMinWidth),i=n.style;function l(){return i||(s?`width: ${s}`:`min-width: ${a}`)}const c=["table",To(this.options.HTMLAttributes,n,{style:l()}),r,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},c]:c},parseMarkdown:(t,n)=>{const r=[];if(t.header){const s=[];t.header.forEach(a=>{s.push(n.createNode("tableHeader",{},[{type:"paragraph",content:n.parseInline(a.tokens)}]))}),r.push(n.createNode("tableRow",{},s))}return t.rows&&t.rows.forEach(s=>{const a=[];s.forEach(i=>{a.push(n.createNode("tableCell",{},[{type:"paragraph",content:n.parseInline(i.tokens)}]))}),r.push(n.createNode("tableRow",{},a))}),n.createNode("table",void 0,r)},renderMarkdown:(t,n)=>Hve(t,n),addCommands(){return{insertTable:({rows:t=3,cols:n=3,withHeaderRow:r=!0}={})=>({tr:s,dispatch:a,editor:i})=>{const l=Fve(i.schema,t,n,r);if(a){const c=s.selection.from+1;s.replaceSelectionWith(l).scrollIntoView().setSelection(ve.near(s.doc.resolve(c)))}return!0},addColumnBefore:()=>({state:t,dispatch:n})=>Qye(t,n),addColumnAfter:()=>({state:t,dispatch:n})=>Zye(t,n),deleteColumn:()=>({state:t,dispatch:n})=>tve(t,n),addRowBefore:()=>({state:t,dispatch:n})=>rve(t,n),addRowAfter:()=>({state:t,dispatch:n})=>sve(t,n),deleteRow:()=>({state:t,dispatch:n})=>ive(t,n),deleteTable:()=>({state:t,dispatch:n})=>pve(t,n),mergeCells:()=>({state:t,dispatch:n})=>JT(t,n),splitCell:()=>({state:t,dispatch:n})=>QT(t,n),toggleHeaderColumn:()=>({state:t,dispatch:n})=>qf("column")(t,n),toggleHeaderRow:()=>({state:t,dispatch:n})=>qf("row")(t,n),toggleHeaderCell:()=>({state:t,dispatch:n})=>uve(t,n),mergeOrSplit:()=>({state:t,dispatch:n})=>JT(t,n)?!0:QT(t,n),setCellAttribute:(t,n)=>({state:r,dispatch:s})=>cve(t,n)(r,s),goToNextCell:()=>({state:t,dispatch:n})=>eM(1)(t,n),goToPreviousCell:()=>({state:t,dispatch:n})=>eM(-1)(t,n),fixTables:()=>({state:t,dispatch:n})=>(n&&h6(t),!0),setCellSelection:t=>({tr:n,dispatch:r})=>{if(r){const s=at.create(n.doc,t.anchorCell,t.headCell);n.setSelection(s)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Vh,"Mod-Backspace":Vh,Delete:Vh,"Mod-Delete":Vh}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Nve({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Ove({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const n={name:t.name,options:t.options,storage:t.storage};return{tableRole:Ml(xd(t,"tableRole",n))}}});Tn.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(b6.configure(this.options.table)),this.options.tableCell!==!1&&t.push(v6.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(Rve.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(Ive.configure(this.options.tableRow)),t}});b6.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),borderPreset:{default:null,parseHTML:n=>{const r=n.getAttribute("class")||"";return/\btbl-border-all\b/.test(r)?"all":/\btbl-border-h\b/.test(r)?"h":/\btbl-border-v\b/.test(r)?"v":/\btbl-border-none\b/.test(r)?"none":null},renderHTML:n=>({class:n.borderPreset?`tbl-border-${n.borderPreset}`:null,style:"border-collapse:collapse;"})}}}}).configure({resizable:!0});v6.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),backgroundColor:{default:null,parseHTML:n=>n.style.backgroundColor||n.getAttribute("data-bg")||null,renderHTML:n=>{const r={};return n.backgroundColor&&(r.style=`background-color:${n.backgroundColor}`),{...r,"data-bg":n.backgroundColor||null}}}}}});const bb={Patient:[{label:"UHID",token:"{{ patient.uhid }}"},{label:"Name",token:"{{ patient.name }}"},{label:"Gender",token:"{{ patient.gender }}"},{label:"DOB",token:'{{ patient.dob | datefmt("%d-%b-%Y") }}'},{label:"Phone",token:"{{ patient.phone }}"},{label:"Email",token:"{{ patient.email }}"},{label:"Address",token:"{{ patient.address }}"}],"Clinical  Last Visit":[{label:"Visit Date",token:'{{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}'},{label:"Doctor",token:"{{ clinical.last_visit.doctor }}"},{label:"Department",token:"{{ clinical.last_visit.department }}"},{label:"Chief Complaints",token:"{{ clinical.last_visit.chief_complaints }}"},{label:"Diagnosis",token:"{{ clinical.last_visit.diagnosis }}"}],"Clinical  Lab Results (loop)":[{label:"Lab Results Table",token:`<table border="1" cellspacing="0" cellpadding="6">
  <tr><th>Test</th><th>Code</th><th>Status</th><th>Result</th><th>Units</th></tr>
  {% for r in clinical.lab_results %}
    <tr>
      <td>{{ r.test }}</td><td>{{ r.code }}</td>
      <td>{{ r.status }}</td><td>{{ r.result }}</td><td>{{ r.units }}</td>
    </tr>
  {% endfor %}
</table>`}],Billing:[{label:"Invoices Count",token:"{{ billing.summary.invoices_count }}"},{label:"Total",token:"{{ billing.summary.total_net }}"},{label:"Paid",token:"{{ billing.summary.total_paid }}"},{label:"Balance",token:"{{ billing.summary.balance }}"}]};function Wve({onInsert:t}){const[n,r]=x.useState(()=>new Set(Object.keys(bb))),[s,a]=x.useState(""),i=x.useMemo(()=>{const d=s.trim().toLowerCase();return Object.entries(bb).filter(([f])=>n.has(f)).map(([f,p])=>{const h=d?p.filter(m=>m.label.toLowerCase().includes(d)||m.token.toLowerCase().includes(d)):p;return{group:f,items:h}}).filter(f=>f.items.length>0)},[n,s]),l=d=>{const u=new Set(n);u.has(d)?u.delete(d):u.add(d),r(u)},c=(d,u)=>{d.dataTransfer.setData("text/x-token",u),d.dataTransfer.setData("text/plain",u)};return o.jsxs("div",{className:"border rounded-lg p-3 bg-white space-y-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Field Catalog"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(bb).map(d=>o.jsxs("label",{className:"inline-flex items-center gap-1 text-xs border rounded px-2 py-1 bg-gray-50",children:[o.jsx("input",{type:"checkbox",checked:n.has(d),onChange:()=>l(d)}),d]},d))}),o.jsx("input",{value:s,onChange:d=>a(d.target.value),placeholder:"Search fields",className:"w-full border rounded px-2 py-1 text-sm"}),o.jsx("div",{className:"space-y-4",children:i.map(({group:d,items:u})=>o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1",children:d}),o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((f,p)=>o.jsx("div",{draggable:!0,onDragStart:h=>c(h,f.token),onDoubleClick:()=>t&&t(f.token),className:"cursor-grab active:cursor-grabbing text-[11px] px-2 py-1 rounded-md bg-gray-50 hover:bg-gray-100 border",title:"Drag into editor or double-click to insert",children:f.label},p))})]},d))}),o.jsxs("div",{className:"pt-2 border-t",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Custom token"}),o.jsxs("form",{onSubmit:d=>{d.preventDefault();const u=d.target.elements.token.value.trim();u&&(t&&t(u),d.target.reset())},children:[o.jsx("input",{name:"token",placeholder:"e.g. {{ my.custom }}",className:"border rounded px-2 py-1 text-sm w-full"}),o.jsx("button",{className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:"Insert"})]})]})]})}const Im=`@page {
  size: A4;
  margin: 18mm 16mm 18mm 16mm;
}
header.tpl-header { position: running(doc-header); }
footer.tpl-footer { position: running(doc-footer); }
@page {
  @top-center { content: element(doc-header); }
  @bottom-center { content: element(doc-footer); }
}
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-size: 12px; }
h1,h2,h3 { margin: 0 0 8px 0; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 6px; }`,Qr={HeaderMinimal:`
<header class="tpl-header" style="font-size:12px;border-bottom:1px solid #ccc;padding-bottom:6px;display:flex;justify-content:space-between;align-items:center;">
  <div>
    <div style="font-weight:700">Hospital Name</div>
    <div style="font-size:11px;">Address line 1, City</div>
  </div>
  <img src="/media/uploads/sample/hospital_logo.png" alt="Logo" style="height:28px"/>
</header>`.trim(),FooterMinimal:`
<footer class="tpl-footer" style="font-size:11px;border-top:1px solid #ccc;padding-top:6px;display:flex;justify-content:space-between;">
  <div>UHID: {{ patient.uhid }} | {{ patient.name }}</div>
  <div>Page: counter(page) / counter(pages)</div>
</footer>`.trim(),SignatureBlock:`
<div style="margin-top:60px;display:flex;gap:40px;">
  <div>Patient/Guardian Signature: __________________</div>
  <div>Doctor: __________________</div>
  <div>Witness: __________________</div>
</div>`.trim(),CoverPage:`
<section style="display:flex;flex-direction:column;min-height:240mm;justify-content:center;align-items:center;text-align:center;gap:8px;">
  <img src="/media/uploads/sample/hospital_logo.png" alt="Logo" style="height:64px;opacity:0.8"/>
  <h1 style="font-size:28px;">Patient Clinical Summary</h1>
  <div style="font-size:14px">UHID: {{ patient.uhid }} &nbsp; | &nbsp; {{ patient.name }}</div>
  <div style="margin-top:40px;font-size:12px;color:#666">Generated on {{ now }}</div>
</section>`.trim()},Kve=[{key:"clinical_summary_v2",title:"Clinical Summary  Header/Footer + Tables",category:"report",html:`
<h1>Clinical Summary</h1>
<p><b>UHID:</b> {{ patient.uhid }}<br/>
<b>Name:</b> {{ patient.name }}<br/>
<b>Gender:</b> {{ patient.gender }}<br/>
<b>DOB:</b> {{ patient.dob | datefmt("%d-%b-%Y") }}</p>

{% if clinical.last_visit.date %}
<h3>Last Visit</h3>
<p><b>Date:</b> {{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}<br/>
<b>Doctor:</b> {{ clinical.last_visit.doctor }}<br/>
<b>Department:</b> {{ clinical.last_visit.department }}<br/>
<b>Chief Complaints:</b> {{ clinical.last_visit.chief_complaints }}<br/>
<b>Diagnosis:</b> {{ clinical.last_visit.diagnosis }}</p>
{% endif %}

{% if clinical.lab_results %}
<h3>Recent Lab Results</h3>
<table border="1" cellspacing="0" cellpadding="6">
  <tr><th>Test</th><th>Code</th><th>Status</th><th>Result</th><th>Units</th></tr>
  {% for r in clinical.lab_results %}
    <tr>
      <td>{{ r.test }}</td><td>{{ r.code }}</td><td>{{ r.status }}</td><td>{{ r.result }}</td><td>{{ r.units }}</td>
    </tr>
  {% endfor %}
</table>
{% endif %}

{% if billing.summary %}
<h3>Billing Summary</h3>
<p>
<b>Invoices:</b> {{ billing.summary.invoices_count }} |
<b>Total:</b> {{ billing.summary.total_net }} |
<b>Paid:</b> {{ billing.summary.total_paid }} |
<b>Balance:</b> {{ billing.summary.balance }}
</p>
{% endif %}
`.trim(),css:Im,header:Qr.HeaderMinimal,footer:Qr.FooterMinimal},{key:"general_consent_v2",title:"General Consent  with Signature",category:"consent",html:`
<h2 style="text-align:center;">General Consent for Treatment</h2>
<p><b>UHID:</b> {{ patient.uhid }}<br/>
<b>Patient Name:</b> {{ patient.name }}<br/>
<b>Date:</b> {{ now }}</p>

<p>
I, {{ patient.name }}, hereby give consent for the proposed {{ data.procedure_name }}
under the care of {{ data.doctor_name }}.
</p>

<p><b>Risks explained:</b> {{ data.risks_text }}</p>

${Qr.SignatureBlock}
`.trim(),css:Im,header:Qr.HeaderMinimal,footer:Qr.FooterMinimal},{key:"cover_plus_clinical",title:"Cover Page + Clinical",category:"report",html:`${Qr.CoverPage}
<div style="page-break-before:always;"></div>
<h1>Clinical Details</h1>
<p><b>UHID:</b> {{ patient.uhid }} &nbsp; <b>Name:</b> {{ patient.name }}</p>
{% if clinical.last_visit.date %}
<p><b>Last Visit:</b> {{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}  {{ clinical.last_visit.doctor }}</p>
{% endif %}
`.trim(),css:Im,header:Qr.HeaderMinimal,footer:Qr.FooterMinimal}];function qve({onUseLayout:t,onInsertBlock:n}){const r=x.useMemo(()=>[{key:"HeaderMinimal",title:"Header  Minimal",html:Qr.HeaderMinimal},{key:"FooterMinimal",title:"Footer  Minimal",html:Qr.FooterMinimal},{key:"SignatureBlock",title:"Signature Block",html:Qr.SignatureBlock},{key:"CoverPage",title:"Cover Page",html:Qr.CoverPage}],[]);return o.jsxs("div",{className:"border rounded-lg p-3 bg-white space-y-3",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Template Gallery"}),o.jsx("div",{className:"space-y-2",children:Kve.map(s=>o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-sm font-medium",children:s.title}),o.jsxs("div",{className:"text-[11px] text-gray-500 mb-2",children:["Category: ",s.category]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{className:"px-2 py-1 rounded text-sm border",onClick:()=>t&&t(s),children:"Use Layout"})})]},s.key))}),o.jsxs("div",{className:"pt-2 border-t",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Blocks"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(s=>o.jsxs("button",{className:"border rounded p-2 text-left hover:bg-gray-50",onClick:()=>n&&n(s.html),title:"Insert into current editor",children:[o.jsx("div",{className:"text-xs font-medium",children:s.title}),o.jsx("div",{className:"text-[10px] text-gray-500",children:"Click to insert"})]},s.key))})]})]})}const Gve=[{key:"A4",label:"A4 (210297 mm)"},{key:"A5",label:"A5 (148210 mm)"},{key:"Letter",label:"Letter (8.511 in)"},{key:"Legal",label:"Legal (8.514 in)"}];function Yve({css:t="",onApply:n,onClose:r}){const[s,a]=x.useState("A4"),[i,l]=x.useState("portrait"),[c,d]=x.useState(18),[u,f]=x.useState(16),[p,h]=x.useState(18),[m,g]=x.useState(16),[y,v]=x.useState(!0);x.useEffect(()=>{const w=t.match(/@page\s*{([\s\S]*?)}/);if(!w)return;const j=w[1],N=k=>(j.match(k)||[,""])[1],S=N(/size:\s*([^;]+);/i);if(S){const k=S.trim().split(/\s+/);a(k[0]),k[1]&&l(k[1])}const _=(k,C)=>{const P=N(k);return P?parseInt(P,10):C};d(_(/margin-top:\s*([0-9]+)mm/i,c)),f(_(/margin-right:\s*([0-9]+)mm/i,u)),h(_(/margin-bottom:\s*([0-9]+)mm/i,p)),g(_(/margin-left:\s*([0-9]+)mm/i,m))},[]);const b=()=>`@page {
  size: ${s} ${i};
  margin-top: ${c}mm;
  margin-right: ${u}mm;
  margin-bottom: ${p}mm;
  margin-left: ${m}mm;
  ${y?'@bottom-right { content: "Page " counter(page) " of " counter(pages); font-size:10px; }':""}
}`;return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xl",children:[o.jsx("div",{className:"px-4 py-3 border-b font-semibold",children:"Page Setup"}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"text-sm",children:["Size",o.jsx("select",{className:"w-full border rounded px-2 py-1",value:s,onChange:w=>a(w.target.value),children:Gve.map(w=>o.jsx("option",{value:w.key,children:w.label},w.key))})]}),o.jsxs("label",{className:"text-sm",children:["Orientation",o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:i,onChange:w=>l(w.target.value),children:[o.jsx("option",{value:"portrait",children:"Portrait"}),o.jsx("option",{value:"landscape",children:"Landscape"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[o.jsxs("label",{className:"text-sm",children:["Top (mm)",o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:c,onChange:w=>d(+w.target.value)})]}),o.jsxs("label",{className:"text-sm",children:["Right (mm)",o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:u,onChange:w=>f(+w.target.value)})]}),o.jsxs("label",{className:"text-sm",children:["Bottom (mm)",o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:p,onChange:w=>h(+w.target.value)})]}),o.jsxs("label",{className:"text-sm",children:["Left (mm)",o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:m,onChange:w=>g(+w.target.value)})]})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:w=>v(w.target.checked)}),"Show page numbers (WeasyPrint)"]}),o.jsx("pre",{className:"text-xs bg-gray-50 border rounded p-2 overflow-auto",children:b()})]}),o.jsxs("div",{className:"px-4 py-3 border-t flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 border rounded",onClick:r,children:"Cancel"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>n&&n(b()),children:"Apply"})]})]})})}const wb=Im;function dM({mode:t="create"}){var C;const{id:n}=Wl(),r=jr(),a=((C=ps().state)==null?void 0:C.preset)||null,[i,l]=x.useState({name:"",code:"",category:"report",subcategory:"",description:"",css:wb,is_active:!0}),[c,d]=x.useState(""),[u,f]=x.useState("<h1>New Template</h1><p>Use the Field Catalog or Gallery.</p>"),[p,h]=x.useState(""),[m,g]=x.useState("body"),y=t==="edit";x.useEffect(()=>{!y||!n||(async()=>{const E=(await tfe(n)).data;l({name:E.name,code:E.code,category:E.category,subcategory:E.subcategory||"",description:E.description||"",css:E.css||wb,is_active:!!E.is_active});const M=E.html||"",T=M.match(/<header[^>]*class="[^"]*tpl-header[^"]*"[^>]*>[\s\S]*?<\/header>/i),A=M.match(/<footer[^>]*class="[^"]*tpl-footer[^"]*"[^>]*>[\s\S]*?<\/footer>/i);d(T?T[0]:""),h(A?A[0]:"");let R=M;T&&(R=R.replace(T[0],"")),A&&(R=R.replace(A[0],"")),f(R.trim()||"")})()},[y,n]),x.useEffect(()=>{!a||y||(l(P=>({...P,category:a.category||"report",name:P.name||a.title||"Untitled",code:P.code||(a.key?`${a.key}-${Date.now()}`:""),css:a.css||wb})),d(a.header||""),h(a.footer||""),f(a.html||""))},[a,y]);const v=x.useMemo(()=>[c,u,p].filter(Boolean).join(`
`),[c,u,p]),b=async()=>{if(!i.name.trim()||!i.code.trim()){V.error("Name and unique code are required");return}const P={...i,html:v,placeholders:{header:!!c,footer:!!p}};try{y?(await rfe(n,P),V.success("Template updated")):(await nfe(P),V.success("Template created")),r("/templates")}catch{}},w=P=>{l(E=>({...E,category:P.category||E.category,css:P.css||E.css,name:E.name||P.title,code:E.code||(P.key?`${P.key}-${Date.now()}`:"")})),d(P.header||""),h(P.footer||""),f(P.html||""),V.success("Layout applied")},j=P=>{m==="header"?d(E=>`${E}
${P}`):m==="footer"?h(E=>`${E}
${P}`):f(E=>`${E}
${P}`)},N=P=>{j(P)},[S,_]=x.useState(!1),k=P=>{l(E=>{const M=/@page\s*{[\s\S]*?}/.test(E.css||"");return{...E,css:M?E.css.replace(/@page\s*{[\s\S]*?}/,P):P+`
`+(E.css||"")}}),_(!1)};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>_(!0),className:"px-3 py-2 rounded border",children:"Page Setup"}),o.jsx("button",{onClick:b,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"}),S&&o.jsx(Yve,{css:i.css,onApply:k,onClose:()=>_(!1)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-xl font-semibold",children:y?"Edit Template":"Create Template"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:b,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{value:i.name,onChange:P=>l({...i,name:P.target.value}),className:"border rounded px-3 py-2",placeholder:"Template Name"}),o.jsx("input",{value:i.code,onChange:P=>l({...i,code:P.target.value}),className:"border rounded px-3 py-2",placeholder:"Unique Code (e.g., clinical_summary_v2)",disabled:y}),o.jsxs("select",{value:i.category,onChange:P=>l({...i,category:P.target.value}),className:"border rounded px-3 py-2",children:[o.jsx("option",{value:"report",children:"Report"}),o.jsx("option",{value:"consent",children:"Consent"})]}),o.jsx("input",{value:i.subcategory,onChange:P=>l({...i,subcategory:P.target.value}),className:"border rounded px-3 py-2",placeholder:"Subcategory (optional)"}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:i.is_active,onChange:P=>l({...i,is_active:P.target.checked})}),"Active"]})]}),o.jsx("textarea",{value:i.description,onChange:P=>l({...i,description:P.target.value}),placeholder:"Description (optional)",className:"border rounded px-3 py-2 w-full min-h-[80px]"}),o.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[o.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-3",children:[o.jsx("div",{className:"flex gap-2",children:["header","body","footer"].map(P=>o.jsx("button",{onClick:()=>g(P),className:["px-3 py-1 rounded border text-sm",m===P?"bg-blue-600 text-white border-blue-600":"bg-white"].join(" "),children:P.toUpperCase()},P))}),m==="header"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Header (running top)"}),o.jsx(tb,{value:c,onChange:d})]}),m==="body"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Body"}),o.jsx(tb,{value:u,onChange:f})]}),m==="footer"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Footer (running bottom)"}),o.jsx(tb,{value:p,onChange:h})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"CSS (print styles)"}),o.jsx("textarea",{value:i.css,onChange:P=>l({...i,css:P.target.value}),className:"border rounded px-3 py-2 w-full min-h-[160px] font-mono text-xs"})]})]}),o.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-3",children:[o.jsx(Wve,{onInsert:N}),o.jsx(qve,{onUseLayout:w,onInsertBlock:j}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:[o.jsx("b",{children:"Note:"})," Save the template to use server-side merged preview & PDF."]})]})]})]})}function Xve(t,n){const r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=n||"download",document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}function w6({value:t,onChange:n,onSelect:r}){const[s,a]=x.useState(""),[i,l]=x.useState([]),[c,d]=x.useState(!1);x.useEffect(()=>{const p=setTimeout(async()=>{const h=(s||"").trim();if(h.length<2){l([]);return}d(!0);try{const{data:m}=await lB(h),g=(m==null?void 0:m.results)||(m==null?void 0:m.items)||m||[];l(g)}catch(m){console.error("lookupPatients failed",m),l([])}finally{d(!1)}},300);return()=>clearTimeout(p)},[s]);function u(f){const p=n||r;p&&p(f.id,f)}return o.jsxs("div",{className:"space-y-1",children:[o.jsx("input",{value:s,onChange:f=>a(f.target.value),placeholder:"Search patient (UHID / Name / Phone)",className:"w-full rounded-md border border-slate-300 px-2.5 py-1.5 text-xs md:text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),o.jsxs("div",{className:"mt-1 max-h-56 overflow-auto rounded-xl border border-slate-200 bg-white shadow-sm",children:[c&&o.jsx("div",{className:"px-3 py-2 text-[11px] text-slate-400",children:"Searching"}),!c&&i.length===0&&o.jsx("div",{className:"px-3 py-2 text-[11px] text-slate-400",children:"Type at least 2 characters to search."}),i.map(f=>{const p=f.uhid||`NH-${String(f.id??"").toString().padStart(6,"0")}`,h=f.name||[f.first_name,f.last_name].filter(Boolean).join(" ")||"Unnamed";return o.jsxs("button",{type:"button",onClick:()=>u(f),className:"w-full text-left px-3 py-2 text-xs md:text-sm hover:bg-indigo-50 flex flex-col gap-0.5",children:[o.jsxs("span",{className:"font-medium text-slate-800",children:[p,"  ",h]}),o.jsxs("span",{className:"text-[11px] text-slate-500",children:[f.gender?`${f.gender}  `:"",f.phone||"No phone"]})]},f.id)})]}),t&&o.jsxs("div",{className:"text-[11px] text-slate-500",children:["Selected patient ID:"," ",o.jsx("span",{className:"font-semibold text-slate-800",children:t})]})]})}function Jve(){const[t,n]=x.useState("saved"),[r,s]=x.useState(null),[a,i]=x.useState([]),[l,c]=x.useState(""),[d,u]=x.useState(""),[f,p]=x.useState(1),[h,m]=x.useState("");x.useEffect(()=>{(async()=>{const v=await vk({category:"report",active:!0});i(v.data||[])})()},[]);const g=async()=>{if(!r||!l)return V.info("Select template and patient");try{const v=await cB(Number(l),Number(r));u(v.data.html||"")}catch{}},y=async()=>{if(!r||!l)return V.info("Select template and patient");try{const v=h?await ife(Number(l),{patient_id:Number(r),inline:!1,engine:h}):await afe(Number(l),Number(r));Xve(v,`patient-${r}.pdf`)}catch{}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Generate Patient Reports"}),o.jsx("div",{className:"flex gap-2",children:["saved","predefined","customized"].map(v=>o.jsx("button",{onClick:()=>n(v),className:["px-3 py-1 rounded border text-sm",t===v?"bg-blue-600 text-white border-blue-600":"bg-white"].join(" "),children:v==="saved"?"Saved Formats":v==="predefined"?"Predefined":"Customized"},v))}),t==="saved"&&o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-1 border rounded-lg p-3 bg-white space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"1) Select Template"}),o.jsxs("select",{value:l,onChange:v=>c(v.target.value),className:"border rounded px-3 py-2 w-full",children:[o.jsx("option",{value:"",children:"-- choose report template --"}),a.map(v=>o.jsxs("option",{value:v.id,children:[v.name," (",v.code,")"]},v.id))]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"2) Choose Patient"}),o.jsx(w6,{value:r,onSelect:s})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Engine"}),o.jsxs("select",{value:h,onChange:v=>m(v.target.value),className:"border rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:"Auto"}),o.jsx("option",{value:"weasyprint",children:"WeasyPrint"}),o.jsx("option",{value:"xhtml2pdf",children:"xhtml2pdf (fallback)"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:g,className:"px-3 py-2 border rounded",children:"Preview"}),o.jsx("button",{onClick:y,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Download PDF"})]})]})]}),o.jsxs("div",{className:"md:col-span-2 border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Preview"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:()=>p(v=>Math.max(.5,+(v-.1).toFixed(2))),children:""}),o.jsxs("div",{className:"text-xs w-12 text-center",children:[Math.round(f*100),"%"]}),o.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:()=>p(v=>Math.min(2,+(v+.1).toFixed(2))),children:"+"})]})]}),o.jsx("div",{className:"w-full",style:{transform:`scale(${f})`,transformOrigin:"0 0"},children:o.jsx("iframe",{title:"report-preview",className:"w-full min-h-[900px]",srcDoc:d||""})})]})]}),t==="predefined"&&o.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[o.jsx("div",{className:"md:col-span-1",children:o.jsx(TemplateGallery,{onUseLayout:v=>window.location.assign("/templates/new"),onInsertBlock:()=>{}})}),o.jsx("div",{className:"md:col-span-2 border rounded-lg p-4 bg-white text-sm text-gray-600",children:'Pick a layout from the left to open the editor pre-filled. Save it, then return to "Saved Formats".'})]}),t==="customized"&&o.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[o.jsx("div",{className:"text-sm mb-2",children:"Create your own template with header/footer, drag-drop fields and blocks."}),o.jsx("a",{href:"/templates/new",className:"px-3 py-2 rounded bg-blue-600 text-white inline-block",children:"Open Template Builder"})]})]})}function Qve(){const[t,n]=x.useState(""),[r,s]=x.useState([]),[a,i]=x.useState(""),[l,c]=x.useState({procedure_name:"",doctor_name:"",risks_text:"",witness_name:""}),[d,u]=x.useState(""),[f,p]=x.useState([]),h=async y=>{if(!y){p([]);return}try{const v=await lfe(Number(y));p(v.data||[])}catch{}};x.useEffect(()=>{(async()=>{const y=await vk({category:"consent",active:!0});s(y.data||[])})()},[]);const m=async()=>{if(!t||!a){V.info("Select consent template and enter Patient ID");return}const y={data:{...l}},v=await cB(Number(a),Number(t),y);u(v.data.html||"")},g=async()=>{if(!t||!a){V.info("Select consent template and enter Patient ID");return}try{await ofe(Number(t),{template_id:Number(a),data:{...l},finalize:!0,signed_by:l.doctor_name||void 0,witness_name:l.witness_name||void 0}),V.success("Consent saved"),h(t)}catch{}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Patient Consents"}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-1 border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Consent Template"}),o.jsxs("select",{value:a,onChange:y=>i(y.target.value),className:"border rounded px-3 py-2 w-full",children:[o.jsx("option",{value:"",children:"-- choose consent template --"}),r.map(y=>o.jsxs("option",{value:y.id,children:[y.name," (",y.code,")"]},y.id))]}),o.jsx("div",{className:"mt-3 text-sm font-semibold",children:"Patient"}),o.jsx("input",{value:t,onChange:y=>n(y.target.value),className:"border rounded px-3 py-2 w-full",placeholder:"Patient ID",onBlur:()=>h(e.target.value)}),o.jsx("div",{className:"mt-3 text-sm font-semibold",children:"Extra Fields"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{value:l.procedure_name,onChange:y=>c({...l,procedure_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Procedure name"}),o.jsx("input",{value:l.doctor_name,onChange:y=>c({...l,doctor_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Doctor name"}),o.jsx("textarea",{value:l.risks_text,onChange:y=>c({...l,risks_text:y.target.value}),className:"border rounded px-3 py-2 w-full min-h-[80px]",placeholder:"Risks explained..."}),o.jsx("input",{value:l.witness_name,onChange:y=>c({...l,witness_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Witness name"})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:m,className:"px-3 py-2 border rounded",children:"Preview"}),o.jsx("button",{onClick:g,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save PDF"})]})]}),o.jsxs("div",{className:"md:col-span-2 space-y-3",children:[o.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:o.jsx("iframe",{title:"consent-preview",className:"w-full min-h-[400px]",srcDoc:d||""})}),o.jsxs("div",{className:"border rounded-lg bg-white",children:[o.jsxs("div",{className:"px-3 py-2 border-b text-sm font-semibold",children:["Existing Consents (Patient #",t||"-",")"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Template"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"PDF"})]})}),o.jsxs("tbody",{children:[f.map(y=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:y.id}),o.jsx("td",{className:"px-3 py-2",children:y.template_id}),o.jsx("td",{className:"px-3 py-2",children:y.status}),o.jsx("td",{className:"px-3 py-2",children:y.pdf_path?o.jsx("a",{href:y.pdf_path,target:"_blank",rel:"noreferrer",className:"text-blue-700 underline",children:"Open"}):o.jsx("span",{className:"text-gray-400",children:"-"})})]},y.id)),f.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-3 py-6 text-center text-gray-500",children:"No consents"})})]})]})})]})]})]})]})}function Zve(t={}){return B.get("/dashboard/data",{params:t})}var e0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function s2(t){if(typeof t!="string")return!1;var n=e0e;return n.includes(t)}var t0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function j6(t){if(typeof t!="string")return!1;var n=t0e;return n.includes(t)}function N6(t){return typeof t=="string"&&t.startsWith("data-")}function ya(t){var n=Object.entries(t).filter(r=>{var[s]=r;return j6(s)||N6(s)});return Object.fromEntries(n)}function Gf(t){if(t==null)return null;if(x.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var n=t.props;return ya(n)}return typeof t=="object"&&!Array.isArray(t)?ya(t):null}function ds(t){var n=Object.entries(t).filter(r=>{var[s]=r;return j6(s)||N6(s)||s2(s)});return Object.fromEntries(n)}var n0e=["children","width","height","viewBox","className","style","title","desc"];function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},n1.apply(null,arguments)}function r0e(t,n){if(t==null)return{};var r,s,a=s0e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function s0e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var S6=x.forwardRef((t,n)=>{var{children:r,width:s,height:a,viewBox:i,className:l,style:c,title:d,desc:u}=t,f=r0e(t,n0e),p=i||{width:s,height:a,x:0,y:0},h=Xe("recharts-surface",l);return x.createElement("svg",n1({},ds(f),{className:h,width:s,height:a,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:n}),x.createElement("title",null,d),x.createElement("desc",null,u),r)}),a0e=["children","className"];function r1(){return r1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},r1.apply(null,arguments)}function i0e(t,n){if(t==null)return{};var r,s,a=o0e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function o0e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var sr=x.forwardRef((t,n)=>{var{children:r,className:s}=t,a=i0e(t,a0e),i=Xe("recharts-layer",s);return x.createElement("g",r1({className:i},ds(a),{ref:n}),r)}),l0e=x.createContext(null);function rt(t){return function(){return t}}const k6=Math.cos,Ux=Math.sin,Gs=Math.sqrt,Hx=Math.PI,Hy=2*Hx,s1=Math.PI,a1=2*s1,Ho=1e-6,c0e=a1-Ho;function C6(t){this._+=t[0];for(let n=1,r=t.length;n<r;++n)this._+=arguments[n]+t[n]}function d0e(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return C6;const r=10**n;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class u0e{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?C6:d0e(n)}moveTo(n,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,r){this._append`L${this._x1=+n},${this._y1=+r}`}quadraticCurveTo(n,r,s,a){this._append`Q${+n},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(n,r,s,a,i,l){this._append`C${+n},${+r},${+s},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(n,r,s,a,i){if(n=+n,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,c=this._y1,d=s-n,u=a-r,f=l-n,p=c-r,h=f*f+p*p;if(this._x1===null)this._append`M${this._x1=n},${this._y1=r}`;else if(h>Ho)if(!(Math.abs(p*d-u*f)>Ho)||!i)this._append`L${this._x1=n},${this._y1=r}`;else{let m=s-l,g=a-c,y=d*d+u*u,v=m*m+g*g,b=Math.sqrt(y),w=Math.sqrt(h),j=i*Math.tan((s1-Math.acos((y+h-v)/(2*b*w)))/2),N=j/w,S=j/b;Math.abs(N-1)>Ho&&this._append`L${n+N*f},${r+N*p}`,this._append`A${i},${i},0,0,${+(p*m>f*g)},${this._x1=n+S*d},${this._y1=r+S*u}`}}arc(n,r,s,a,i,l){if(n=+n,r=+r,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(a),d=s*Math.sin(a),u=n+c,f=r+d,p=1^l,h=l?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ho||Math.abs(this._y1-f)>Ho)&&this._append`L${u},${f}`,s&&(h<0&&(h=h%a1+a1),h>c0e?this._append`A${s},${s},0,1,${p},${n-c},${r-d}A${s},${s},0,1,${p},${this._x1=u},${this._y1=f}`:h>Ho&&this._append`A${s},${s},0,${+(h>=s1)},${p},${this._x1=n+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(n,r,s,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function a2(t){let n=3;return t.digits=function(r){if(!arguments.length)return n;if(r==null)n=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);n=s}return t},()=>new u0e(n)}function i2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _6(t){this._context=t}_6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Wy(t){return new _6(t)}function P6(t){return t[0]}function A6(t){return t[1]}function E6(t,n){var r=rt(!0),s=null,a=Wy,i=null,l=a2(c);t=typeof t=="function"?t:t===void 0?P6:rt(t),n=typeof n=="function"?n:n===void 0?A6:rt(n);function c(d){var u,f=(d=i2(d)).length,p,h=!1,m;for(s==null&&(i=a(m=l())),u=0;u<=f;++u)!(u<f&&r(p=d[u],u,d))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(p,u,d),+n(p,u,d));if(m)return i=null,m+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:rt(+d),c):t},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:rt(+d),c):n},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:rt(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,s!=null&&(i=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=i=null:i=a(s=d),c):s},c}function Uh(t,n,r){var s=null,a=rt(!0),i=null,l=Wy,c=null,d=a2(u);t=typeof t=="function"?t:t===void 0?P6:rt(+t),n=typeof n=="function"?n:rt(n===void 0?0:+n),r=typeof r=="function"?r:r===void 0?A6:rt(+r);function u(p){var h,m,g,y=(p=i2(p)).length,v,b=!1,w,j=new Array(y),N=new Array(y);for(i==null&&(c=l(w=d())),h=0;h<=y;++h){if(!(h<y&&a(v=p[h],h,p))===b)if(b=!b)m=h,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),g=h-1;g>=m;--g)c.point(j[g],N[g]);c.lineEnd(),c.areaEnd()}b&&(j[h]=+t(v,h,p),N[h]=+n(v,h,p),c.point(s?+s(v,h,p):j[h],r?+r(v,h,p):N[h]))}if(w)return c=null,w+""||null}function f(){return E6().defined(a).curve(l).context(i)}return u.x=function(p){return arguments.length?(t=typeof p=="function"?p:rt(+p),s=null,u):t},u.x0=function(p){return arguments.length?(t=typeof p=="function"?p:rt(+p),u):t},u.x1=function(p){return arguments.length?(s=p==null?null:typeof p=="function"?p:rt(+p),u):s},u.y=function(p){return arguments.length?(n=typeof p=="function"?p:rt(+p),r=null,u):n},u.y0=function(p){return arguments.length?(n=typeof p=="function"?p:rt(+p),u):n},u.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:rt(+p),u):r},u.lineX0=u.lineY0=function(){return f().x(t).y(n)},u.lineY1=function(){return f().x(t).y(r)},u.lineX1=function(){return f().x(s).y(n)},u.defined=function(p){return arguments.length?(a=typeof p=="function"?p:rt(!!p),u):a},u.curve=function(p){return arguments.length?(l=p,i!=null&&(c=l(i)),u):l},u.context=function(p){return arguments.length?(p==null?i=c=null:c=l(i=p),u):i},u}class T6{constructor(n,r){this._context=n,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,r){switch(n=+n,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,r,n,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,n,this._y0,n,r);break}}this._x0=n,this._y0=r}}function f0e(t){return new T6(t,!0)}function p0e(t){return new T6(t,!1)}const o2={draw(t,n){const r=Gs(n/Hx);t.moveTo(r,0),t.arc(0,0,r,0,Hy)}},h0e={draw(t,n){const r=Gs(n/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},M6=Gs(1/3),m0e=M6*2,x0e={draw(t,n){const r=Gs(n/m0e),s=r*M6;t.moveTo(0,-r),t.lineTo(s,0),t.lineTo(0,r),t.lineTo(-s,0),t.closePath()}},g0e={draw(t,n){const r=Gs(n),s=-r/2;t.rect(s,s,r,r)}},y0e=.8908130915292852,O6=Ux(Hx/10)/Ux(7*Hx/10),v0e=Ux(Hy/10)*O6,b0e=-k6(Hy/10)*O6,w0e={draw(t,n){const r=Gs(n*y0e),s=v0e*r,a=b0e*r;t.moveTo(0,-r),t.lineTo(s,a);for(let i=1;i<5;++i){const l=Hy*i/5,c=k6(l),d=Ux(l);t.lineTo(d*r,-c*r),t.lineTo(c*s-d*a,d*s+c*a)}t.closePath()}},jb=Gs(3),j0e={draw(t,n){const r=-Gs(n/(jb*3));t.moveTo(0,r*2),t.lineTo(-jb*r,-r),t.lineTo(jb*r,-r),t.closePath()}},Gr=-.5,Yr=Gs(3)/2,i1=1/Gs(12),N0e=(i1/2+1)*3,S0e={draw(t,n){const r=Gs(n/N0e),s=r/2,a=r*i1,i=s,l=r*i1+r,c=-i,d=l;t.moveTo(s,a),t.lineTo(i,l),t.lineTo(c,d),t.lineTo(Gr*s-Yr*a,Yr*s+Gr*a),t.lineTo(Gr*i-Yr*l,Yr*i+Gr*l),t.lineTo(Gr*c-Yr*d,Yr*c+Gr*d),t.lineTo(Gr*s+Yr*a,Gr*a-Yr*s),t.lineTo(Gr*i+Yr*l,Gr*l-Yr*i),t.lineTo(Gr*c+Yr*d,Gr*d-Yr*c),t.closePath()}};function k0e(t,n){let r=null,s=a2(a);t=typeof t=="function"?t:rt(t||o2),n=typeof n=="function"?n:rt(n===void 0?64:+n);function a(){let i;if(r||(r=i=s()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:rt(i),a):t},a.size=function(i){return arguments.length?(n=typeof i=="function"?i:rt(+i),a):n},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Wx(){}function Kx(t,n,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+r)/6)}function R6(t){this._context=t}R6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Kx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Kx(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function C0e(t){return new R6(t)}function I6(t){this._context=t}I6.prototype={areaStart:Wx,areaEnd:Wx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Kx(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function _0e(t){return new I6(t)}function D6(t){this._context=t}D6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Kx(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function P0e(t){return new D6(t)}function L6(t){this._context=t}L6.prototype={areaStart:Wx,areaEnd:Wx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function A0e(t){return new L6(t)}function uM(t){return t<0?-1:1}function fM(t,n,r){var s=t._x1-t._x0,a=n-t._x1,i=(t._y1-t._y0)/(s||a<0&&-0),l=(r-t._y1)/(a||s<0&&-0),c=(i*a+l*s)/(s+a);return(uM(i)+uM(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(c))||0}function pM(t,n){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-n)/2:n}function Nb(t,n,r){var s=t._x0,a=t._y0,i=t._x1,l=t._y1,c=(i-s)/3;t._context.bezierCurveTo(s+c,a+c*n,i-c,l-c*r,i,l)}function qx(t){this._context=t}qx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nb(this,this._t0,pM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var r=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Nb(this,pM(this,r=fM(this,t,n)),r);break;default:Nb(this,this._t0,r=fM(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=r}}};function $6(t){this._context=new F6(t)}($6.prototype=Object.create(qx.prototype)).point=function(t,n){qx.prototype.point.call(this,n,t)};function F6(t){this._context=t}F6.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,r,s,a,i){this._context.bezierCurveTo(n,t,s,r,i,a)}};function E0e(t){return new qx(t)}function T0e(t){return new $6(t)}function B6(t){this._context=t}B6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),r===2)this._context.lineTo(t[1],n[1]);else for(var s=hM(t),a=hM(n),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],t[l],n[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function hM(t){var n,r=t.length-1,s,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],n=1;n<r-1;++n)a[n]=1,i[n]=4,l[n]=4*t[n]+2*t[n+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)s=a[n]/i[n-1],i[n]-=s,l[n]-=s*l[n-1];for(a[r-1]=l[r-1]/i[r-1],n=r-2;n>=0;--n)a[n]=(l[n]-a[n+1])/i[n];for(i[r-1]=(t[r]+a[r-1])/2,n=0;n<r-1;++n)i[n]=2*t[n+1]-a[n+1];return[a,i]}function M0e(t){return new B6(t)}function Ky(t,n){this._context=t,this._t=n}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=t,this._y=n}};function O0e(t){return new Ky(t,.5)}function R0e(t){return new Ky(t,0)}function I0e(t){return new Ky(t,1)}function vd(t,n){if((l=t.length)>1)for(var r=1,s,a,i=t[n[0]],l,c=i.length;r<l;++r)for(a=i,i=t[n[r]],s=0;s<c;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function o1(t){for(var n=t.length,r=new Array(n);--n>=0;)r[n]=n;return r}function D0e(t,n){return t[n]}function L0e(t){const n=[];return n.key=t,n}function $0e(){var t=rt([]),n=o1,r=vd,s=D0e;function a(i){var l=Array.from(t.apply(this,arguments),L0e),c,d=l.length,u=-1,f;for(const p of i)for(c=0,++u;c<d;++c)(l[c][u]=[0,+s(p,l[c].key,u,i)]).data=p;for(c=0,f=i2(n(l));c<d;++c)l[f[c]].index=c;return r(l,f),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:rt(Array.from(i)),a):t},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:rt(+i),a):s},a.order=function(i){return arguments.length?(n=i==null?o1:typeof i=="function"?i:rt(Array.from(i)),a):n},a.offset=function(i){return arguments.length?(r=i??vd,a):r},a}function F0e(t,n){if((s=t.length)>0){for(var r,s,a=0,i=t[0].length,l;a<i;++a){for(l=r=0;r<s;++r)l+=t[r][a][1]||0;if(l)for(r=0;r<s;++r)t[r][a][1]/=l}vd(t,n)}}function B0e(t,n){if((a=t.length)>0){for(var r=0,s=t[n[0]],a,i=s.length;r<i;++r){for(var l=0,c=0;l<a;++l)c+=t[l][r][1]||0;s[r][1]+=s[r][0]=-c/2}vd(t,n)}}function z0e(t,n){if(!(!((l=t.length)>0)||!((i=(a=t[n[0]]).length)>0))){for(var r=0,s=1,a,i,l;s<i;++s){for(var c=0,d=0,u=0;c<l;++c){for(var f=t[n[c]],p=f[s][1]||0,h=f[s-1][1]||0,m=(p-h)/2,g=0;g<c;++g){var y=t[n[g]],v=y[s][1]||0,b=y[s-1][1]||0;m+=v-b}d+=p,u+=m*p}a[s-1][1]+=a[s-1][0]=r,d&&(r-=u/d)}a[s-1][1]+=a[s-1][0]=r,vd(t,n)}}var qy={},z6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r==="__proto__"}t.isUnsafeProperty=n})(z6);var l2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=n})(l2);var Gy={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){var s;return typeof r=="string"||typeof r=="symbol"?r:Object.is((s=r==null?void 0:r.valueOf)==null?void 0:s.call(r),-0)?"-0":String(r)}t.toKey=n})(Gy);var Yy={},V6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(n).join(",");const s=String(r);return s==="0"&&Object.is(Number(r),-0)?"-0":s}t.toString=n})(V6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=V6,r=Gy;function s(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=n.toString(a);const i=[],l=a.length;if(l===0)return i;let c=0,d="",u="",f=!1;for(a.charCodeAt(0)===46&&(i.push(""),c++);c<l;){const p=a[c];u?p==="\\"&&c+1<l?(c++,d+=a[c]):p===u?u="":d+=p:f?p==='"'||p==="'"?u=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,c++}return d&&i.push(d),i}t.toPath=s})(Yy);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=z6,r=l2,s=Gy,a=Yy;function i(c,d,u){if(c==null)return u;switch(typeof d){case"string":{if(n.isUnsafeProperty(d))return u;const f=c[d];return f===void 0?r.isDeepKey(d)?i(c,a.toPath(d),u):u:f}case"number":case"symbol":{typeof d=="number"&&(d=s.toKey(d));const f=c[d];return f===void 0?u:f}default:{if(Array.isArray(d))return l(c,d,u);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),n.isUnsafeProperty(d))return u;const f=c[d];return f===void 0?u:f}}}function l(c,d,u){if(d.length===0)return u;let f=c;for(let p=0;p<d.length;p++){if(f==null||n.isUnsafeProperty(d[p]))return u;f=f[d[p]]}return f===void 0?u:f}t.get=i})(qy);var V0e=qy.get;const Il=Vs(V0e);var Cn=t=>t===0?0:t>0?1:-1,va=t=>typeof t=="number"&&t!=+t,si=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Pe=t=>(typeof t=="number"||t instanceof Number)&&!va(t),ba=t=>Pe(t)||typeof t=="string",U0e=0,Yf=t=>{var n=++U0e;return"".concat(t||"").concat(n)},Un=function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(n)&&typeof n!="string")return s;var i;if(si(n)){if(r==null)return s;var l=n.indexOf("%");i=r*parseFloat(n.slice(0,l))/100}else i=+n;return va(i)&&(i=s),a&&r!=null&&i>r&&(i=r),i},U6=t=>{if(!Array.isArray(t))return!1;for(var n=t.length,r={},s=0;s<n;s++)if(!r[t[s]])r[t[s]]=!0;else return!0;return!1};function Qt(t,n,r){return Pe(t)&&Pe(n)?t+r*(n-t):n}function H0e(t,n,r){if(!(!t||!t.length))return t.find(s=>s&&(typeof n=="function"?n(s):Il(s,n))===r)}var xn=t=>t===null||typeof t>"u",Cp=t=>xn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function W0e(t){return t!=null}function Xl(){}var K0e=["type","size","sizeType"];function l1(){return l1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},l1.apply(null,arguments)}function mM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function xM(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?mM(Object(r),!0).forEach(function(s){q0e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function q0e(t,n,r){return(n=G0e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function G0e(t){var n=Y0e(t,"string");return typeof n=="symbol"?n:n+""}function Y0e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function X0e(t,n){if(t==null)return{};var r,s,a=J0e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function J0e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var H6={symbolCircle:o2,symbolCross:h0e,symbolDiamond:x0e,symbolSquare:g0e,symbolStar:w0e,symbolTriangle:j0e,symbolWye:S0e},Q0e=Math.PI/180,Z0e=t=>{var n="symbol".concat(Cp(t));return H6[n]||o2},ebe=(t,n,r)=>{if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*Q0e;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},tbe=(t,n)=>{H6["symbol".concat(Cp(t))]=n},W6=t=>{var{type:n="circle",size:r=64,sizeType:s="area"}=t,a=X0e(t,K0e),i=xM(xM({},a),{},{type:n,size:r,sizeType:s}),l="circle";typeof n=="string"&&(l=n);var c=()=>{var h=Z0e(l),m=k0e().type(h).size(ebe(r,s,l)),g=m();if(g!==null)return g},{className:d,cx:u,cy:f}=i,p=ds(i);return Pe(u)&&Pe(f)&&Pe(r)?x.createElement("path",l1({},p,{className:Xe("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(f,")"),d:c()})):null};W6.registerSymbol=tbe;var K6=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,nbe=(t,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(a=>{s2(a)&&(s[a]=i=>r[a](r,i))}),s},rbe=(t,n,r)=>s=>(t(n,r,s),null),Xy=(t,n,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var s=null;return Object.keys(t).forEach(a=>{var i=t[a];s2(a)&&typeof i=="function"&&(s||(s={}),s[a]=rbe(i,n,r))}),s};function gM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function sbe(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?gM(Object(r),!0).forEach(function(s){abe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function abe(t,n,r){return(n=ibe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ibe(t){var n=obe(t,"string");return typeof n=="symbol"?n:n+""}function obe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function or(t,n){var r=sbe({},t),s=n,a=Object.keys(n),i=a.reduce((l,c)=>(l[c]===void 0&&s[c]!==void 0&&(l[c]=s[c]),l),r);return i}var q6={},G6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r,s){const a=new Map;for(let i=0;i<r.length;i++){const l=r[i],c=s(l);a.has(c)||a.set(c,l)}return Array.from(a.values())}t.uniqBy=n})(G6);var c2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r}t.identity=n})(c2);var Y6={},Jy={},X6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=n})(X6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=X6;function r(s){return s!=null&&typeof s!="function"&&n.isLength(s.length)}t.isArrayLike=r})(Jy);var J6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return typeof r=="object"&&r!==null}t.isObjectLike=n})(J6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=Jy,r=J6;function s(a){return r.isObjectLike(a)&&n.isArrayLike(a)}t.isArrayLikeObject=s})(Y6);var Q6={},Z6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=qy;function r(s){return function(a){return n.get(a,s)}}t.property=r})(Z6);var e8={},d2={},t8={},u2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=n})(u2);var f2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=n})(f2);var p2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r,s){return r===s||Number.isNaN(r)&&Number.isNaN(s)}t.eq=n})(p2);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=u2,r=f2,s=p2;function a(f,p,h){return typeof h!="function"?a(f,p,()=>{}):i(f,p,function m(g,y,v,b,w,j){const N=h(g,y,v,b,w,j);return N!==void 0?!!N:i(g,y,m,j)},new Map)}function i(f,p,h,m){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,h,m);case"function":return Object.keys(p).length>0?i(f,{...p},h,m):s.eq(f,p);default:return n.isObject(f)?typeof p=="string"?p==="":!0:s.eq(f,p)}}function l(f,p,h,m){if(p==null)return!0;if(Array.isArray(p))return d(f,p,h,m);if(p instanceof Map)return c(f,p,h,m);if(p instanceof Set)return u(f,p,h,m);const g=Object.keys(p);if(f==null)return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(p))return m.get(p)===f;m==null||m.set(p,f);try{for(let y=0;y<g.length;y++){const v=g[y];if(!r.isPrimitive(f)&&!(v in f)||p[v]===void 0&&f[v]!==void 0||p[v]===null&&f[v]!==null||!h(f[v],p[v],v,f,p,m))return!1}return!0}finally{m==null||m.delete(p)}}function c(f,p,h,m){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,y]of p.entries()){const v=f.get(g);if(h(v,y,g,f,p,m)===!1)return!1}return!0}function d(f,p,h,m){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let y=0;y<p.length;y++){const v=p[y];let b=!1;for(let w=0;w<f.length;w++){if(g.has(w))continue;const j=f[w];let N=!1;if(h(j,v,y,f,p,m)&&(N=!0),N){g.add(w),b=!0;break}}if(!b)return!1}return!0}function u(f,p,h,m){return p.size===0?!0:f instanceof Set?d([...f],[...p],h,m):!1}t.isMatchWith=a,t.isSetMatch=u})(t8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=t8;function r(s,a){return n.isMatchWith(s,a,()=>{})}t.isMatch=r})(d2);var n8={},h2={},r8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return Object.getOwnPropertySymbols(r).filter(s=>Object.prototype.propertyIsEnumerable.call(r,s))}t.getSymbols=n})(r8);var m2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=n})(m2);var x2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n="[object RegExp]",r="[object String]",s="[object Number]",a="[object Boolean]",i="[object Arguments]",l="[object Symbol]",c="[object Date]",d="[object Map]",u="[object Set]",f="[object Array]",p="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",v="[object Uint8Array]",b="[object Uint8ClampedArray]",w="[object Uint16Array]",j="[object Uint32Array]",N="[object BigUint64Array]",S="[object Int8Array]",_="[object Int16Array]",k="[object Int32Array]",C="[object BigInt64Array]",P="[object Float32Array]",E="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=h,t.arrayTag=f,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=N,t.booleanTag=a,t.dataViewTag=y,t.dateTag=c,t.errorTag=g,t.float32ArrayTag=P,t.float64ArrayTag=E,t.functionTag=p,t.int16ArrayTag=_,t.int32ArrayTag=k,t.int8ArrayTag=S,t.mapTag=d,t.numberTag=s,t.objectTag=m,t.regexpTag=n,t.setTag=u,t.stringTag=r,t.symbolTag=l,t.uint16ArrayTag=w,t.uint32ArrayTag=j,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=b})(x2);var s8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=n})(s8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r8,r=m2,s=x2,a=f2,i=s8;function l(f,p){return c(f,void 0,f,new Map,p)}function c(f,p,h,m=new Map,g=void 0){const y=g==null?void 0:g(f,p,h,m);if(y!==void 0)return y;if(a.isPrimitive(f))return f;if(m.has(f))return m.get(f);if(Array.isArray(f)){const v=new Array(f.length);m.set(f,v);for(let b=0;b<f.length;b++)v[b]=c(f[b],b,h,m,g);return Object.hasOwn(f,"index")&&(v.index=f.index),Object.hasOwn(f,"input")&&(v.input=f.input),v}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const v=new RegExp(f.source,f.flags);return v.lastIndex=f.lastIndex,v}if(f instanceof Map){const v=new Map;m.set(f,v);for(const[b,w]of f)v.set(b,c(w,b,h,m,g));return v}if(f instanceof Set){const v=new Set;m.set(f,v);for(const b of f)v.add(c(b,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const v=new(Object.getPrototypeOf(f)).constructor(f.length);m.set(f,v);for(let b=0;b<f.length;b++)v[b]=c(f[b],b,h,m,g);return v}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const v=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return m.set(f,v),d(v,f,h,m,g),v}if(typeof File<"u"&&f instanceof File){const v=new File([f],f.name,{type:f.type});return m.set(f,v),d(v,f,h,m,g),v}if(typeof Blob<"u"&&f instanceof Blob){const v=new Blob([f],{type:f.type});return m.set(f,v),d(v,f,h,m,g),v}if(f instanceof Error){const v=new f.constructor;return m.set(f,v),v.message=f.message,v.name=f.name,v.stack=f.stack,v.cause=f.cause,d(v,f,h,m,g),v}if(f instanceof Boolean){const v=new Boolean(f.valueOf());return m.set(f,v),d(v,f,h,m,g),v}if(f instanceof Number){const v=new Number(f.valueOf());return m.set(f,v),d(v,f,h,m,g),v}if(f instanceof String){const v=new String(f.valueOf());return m.set(f,v),d(v,f,h,m,g),v}if(typeof f=="object"&&u(f)){const v=Object.create(Object.getPrototypeOf(f));return m.set(f,v),d(v,f,h,m,g),v}return f}function d(f,p,h=f,m,g){const y=[...Object.keys(p),...n.getSymbols(p)];for(let v=0;v<y.length;v++){const b=y[v],w=Object.getOwnPropertyDescriptor(f,b);(w==null||w.writable)&&(f[b]=c(p[b],b,h,m,g))}}function u(f){switch(r.getTag(f)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=c,t.copyProperties=d})(h2);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=h2;function r(s){return n.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}t.cloneDeep=r})(n8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=d2,r=n8;function s(a){return a=r.cloneDeep(a),i=>n.isMatch(i,a)}t.matches=s})(e8);var a8={},i8={},o8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=h2,r=x2;function s(a,i){return n.cloneDeepWith(a,(l,c,d,u)=>{const f=i==null?void 0:i(l,c,d,u);if(f!==void 0)return f;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return n.copyProperties(p,a),p}case r.argumentsTag:{const p={};return n.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}t.cloneDeepWith=s})(o8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=o8;function r(s){return n.cloneDeepWith(s)}t.cloneDeep=r})(i8);var l8={},g2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;function r(s,a=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<a;case"symbol":return!1;case"string":return n.test(s)}}t.isIndex=r})(g2);var c8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=m2;function r(s){return s!==null&&typeof s=="object"&&n.getTag(s)==="[object Arguments]"}t.isArguments=r})(c8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=l2,r=g2,s=c8,a=Yy;function i(l,c){let d;if(Array.isArray(c)?d=c:typeof c=="string"&&n.isDeepKey(c)&&(l==null?void 0:l[c])==null?d=a.toPath(c):d=[c],d.length===0)return!1;let u=l;for(let f=0;f<d.length;f++){const p=d[f];if((u==null||!Object.hasOwn(u,p))&&!((Array.isArray(u)||s.isArguments(u))&&r.isIndex(p)&&p<u.length))return!1;u=u[p]}return!0}t.has=i})(l8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=d2,r=Gy,s=i8,a=qy,i=l8;function l(c,d){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return d=s.cloneDeep(d),function(u){const f=a.get(u,c);return f===void 0?i.has(u,c):d===void 0?f===void 0:n.isMatch(f,d)}}t.matchesProperty=l})(a8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=c2,r=Z6,s=e8,a=a8;function i(l){if(l==null)return n.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):s.matches(l);case"string":case"symbol":case"number":return r.property(l)}}t.iteratee=i})(Q6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=G6,r=c2,s=Y6,a=Q6;function i(l,c=r.identity){return s.isArrayLikeObject(l)?n.uniqBy(Array.from(l),a.iteratee(c)):[]}t.uniqBy=i})(q6);var lbe=q6.uniqBy;const yM=Vs(lbe);function cbe(t,n,r){return n===!0?yM(t,r):typeof n=="function"?yM(t,n):t}var y2=x.createContext(null),dbe=t=>t,gt=()=>{var t=x.useContext(y2);return t?t.store.dispatch:dbe},Dm=()=>{},ube=()=>Dm,fbe=(t,n)=>t===n;function Ne(t){var n=x.useContext(y2);return DD.useSyncExternalStoreWithSelector(n?n.subscription.addNestedSub:ube,n?n.store.getState:Dm,n?n.store.getState:Dm,n?t:Dm,fbe)}function pbe(t,n=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(n)}function hbe(t,n=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(n)}function mbe(t,n="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${n}[${r}]`)}}var vM=t=>Array.isArray(t)?t:[t];function xbe(t){const n=Array.isArray(t[0])?t[0]:t;return mbe(n,"createSelector expects all input-selectors to be functions, but received the following types: "),n}function gbe(t,n){const r=[],{length:s}=t;for(let a=0;a<s;a++)r.push(t[a].apply(null,n));return r}var ybe=class{constructor(t){this.value=t}deref(){return this.value}},vbe=typeof WeakRef<"u"?WeakRef:ybe,bbe=0,bM=1;function Hh(){return{s:bbe,v:void 0,o:null,p:null}}function d8(t,n={}){let r=Hh();const{resultEqualityCheck:s}=n;let a,i=0;function l(){var p;let c=r;const{length:d}=arguments;for(let h=0,m=d;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=c.o;y===null&&(c.o=y=new WeakMap);const v=y.get(g);v===void 0?(c=Hh(),y.set(g,c)):c=v}else{let y=c.p;y===null&&(c.p=y=new Map);const v=y.get(g);v===void 0?(c=Hh(),y.set(g,c)):c=v}}const u=c;let f;if(c.s===bM)f=c.v;else if(f=t.apply(null,arguments),i++,s){const h=((p=a==null?void 0:a.deref)==null?void 0:p.call(a))??a;h!=null&&s(h,f)&&(f=h,i!==0&&i--),a=typeof f=="object"&&f!==null||typeof f=="function"?new vbe(f):f}return u.s=bM,u.v=f,f}return l.clearCache=()=>{r=Hh(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function wbe(t,...n){const r=typeof t=="function"?{memoize:t,memoizeOptions:n}:t,s=(...a)=>{let i=0,l=0,c,d={},u=a.pop();typeof u=="object"&&(d=u,u=a.pop()),pbe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...r,...d},{memoize:p,memoizeOptions:h=[],argsMemoize:m=d8,argsMemoizeOptions:g=[]}=f,y=vM(h),v=vM(g),b=xbe(a),w=p(function(){return i++,u.apply(null,arguments)},...y),j=m(function(){l++;const S=gbe(b,arguments);return c=w.apply(null,S),c},...v);return Object.assign(j,{resultFunc:u,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:m})};return Object.assign(s,{withTypes:()=>s}),s}var U=wbe(d8),jbe=Object.assign((t,n=U)=>{hbe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),s=r.map(i=>t[i]);return n(s,(...i)=>i.reduce((l,c,d)=>(l[r[d]]=c,l),{}))},{withTypes:()=>jbe}),u8={},f8={},p8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const r=(s,a,i)=>{if(s!==a){const l=n(s),c=n(a);if(l===c&&l===0){if(s<a)return i==="desc"?1:-1;if(s>a)return i==="desc"?-1:1}return i==="desc"?c-l:l-c}return 0};t.compareValues=r})(p8);var h8={},v2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=n})(v2);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=v2,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||n.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}t.isKey=a})(h8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=p8,r=h8,s=Yy;function a(i,l,c,d){if(i==null)return[];c=d?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(m=>String(m));const u=(m,g)=>{let y=m;for(let v=0;v<g.length&&y!=null;++v)y=y[g[v]];return y},f=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,p=l.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:s.toPath(m)}));return i.map(m=>({original:m,criteria:p.map(g=>f(g,m))})).slice().sort((m,g)=>{for(let y=0;y<p.length;y++){const v=n.compareValues(m.criteria[y],g.criteria[y],c[y]);if(v!==0)return v}return 0}).map(m=>m.original)}t.orderBy=a})(f8);var m8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r,s=1){const a=[],i=Math.floor(s),l=(c,d)=>{for(let u=0;u<c.length;u++){const f=c[u];Array.isArray(f)&&d<i?l(f,d+1):a.push(f)}};return l(r,0),a}t.flatten=n})(m8);var b2={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=g2,r=Jy,s=u2,a=p2;function i(l,c,d){return s.isObject(d)&&(typeof c=="number"&&r.isArrayLike(d)&&n.isIndex(c)&&c<d.length||typeof c=="string"&&c in d)?a.eq(d[c],l):!1}t.isIterateeCall=i})(b2);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=f8,r=m8,s=b2;function a(i,...l){const c=l.length;return c>1&&s.isIterateeCall(i,l[0],l[1])?l=[]:c>2&&s.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),n.orderBy(i,r.flatten(l),["asc"])}t.sortBy=a})(u8);var Nbe=u8.sortBy;const Qy=Vs(Nbe);var x8=t=>t.legend.settings,Sbe=t=>t.legend.size,kbe=t=>t.legend.payload;U([kbe,x8],(t,n)=>{var{itemSorter:r}=n,s=t.flat(1);return r?Qy(s,r):s});var Wh=1;function Cbe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[n,r]=x.useState({height:0,left:0,top:0,width:0}),s=x.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-n.height)>Wh||Math.abs(l.left-n.left)>Wh||Math.abs(l.top-n.top)>Wh||Math.abs(l.width-n.width)>Wh)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[n.width,n.height,n.top,n.left,...t]);return[n,s]}function wn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var _be=typeof Symbol=="function"&&Symbol.observable||"@@observable",wM=_be,Sb=()=>Math.random().toString(36).substring(7).split("").join("."),Pbe={INIT:`@@redux/INIT${Sb()}`,REPLACE:`@@redux/REPLACE${Sb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Sb()}`},Gx=Pbe;function w2(t){if(typeof t!="object"||t===null)return!1;let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n||Object.getPrototypeOf(t)===null}function g8(t,n,r){if(typeof t!="function")throw new Error(wn(2));if(typeof n=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(wn(0));if(typeof n=="function"&&typeof r>"u"&&(r=n,n=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(wn(1));return r(g8)(t,n)}let s=t,a=n,i=new Map,l=i,c=0,d=!1;function u(){l===i&&(l=new Map,i.forEach((v,b)=>{l.set(b,v)}))}function f(){if(d)throw new Error(wn(3));return a}function p(v){if(typeof v!="function")throw new Error(wn(4));if(d)throw new Error(wn(5));let b=!0;u();const w=c++;return l.set(w,v),function(){if(b){if(d)throw new Error(wn(6));b=!1,u(),l.delete(w),i=null}}}function h(v){if(!w2(v))throw new Error(wn(7));if(typeof v.type>"u")throw new Error(wn(8));if(typeof v.type!="string")throw new Error(wn(17));if(d)throw new Error(wn(9));try{d=!0,a=s(a,v)}finally{d=!1}return(i=l).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(wn(10));s=v,h({type:Gx.REPLACE})}function g(){const v=p;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(wn(11));function w(){const N=b;N.next&&N.next(f())}return w(),{unsubscribe:v(w)}},[wM](){return this}}}return h({type:Gx.INIT}),{dispatch:h,subscribe:p,getState:f,replaceReducer:m,[wM]:g}}function Abe(t){Object.keys(t).forEach(n=>{const r=t[n];if(typeof r(void 0,{type:Gx.INIT})>"u")throw new Error(wn(12));if(typeof r(void 0,{type:Gx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wn(13))})}function y8(t){const n=Object.keys(t),r={};for(let i=0;i<n.length;i++){const l=n[i];typeof t[l]=="function"&&(r[l]=t[l])}const s=Object.keys(r);let a;try{Abe(r)}catch(i){a=i}return function(l={},c){if(a)throw a;let d=!1;const u={};for(let f=0;f<s.length;f++){const p=s[f],h=r[p],m=l[p],g=h(m,c);if(typeof g>"u")throw c&&c.type,new Error(wn(14));u[p]=g,d=d||g!==m}return d=d||s.length!==Object.keys(l).length,d?u:l}}function Yx(...t){return t.length===0?n=>n:t.length===1?t[0]:t.reduce((n,r)=>(...s)=>n(r(...s)))}function Ebe(...t){return n=>(r,s)=>{const a=n(r,s);let i=()=>{throw new Error(wn(15))};const l={getState:a.getState,dispatch:(d,...u)=>i(d,...u)},c=t.map(d=>d(l));return i=Yx(...c)(a.dispatch),{...a,dispatch:i}}}function v8(t){return w2(t)&&"type"in t&&typeof t.type=="string"}var b8=Symbol.for("immer-nothing"),jM=Symbol.for("immer-draftable"),zr=Symbol.for("immer-state");function Cs(t,...n){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xf=Object.getPrototypeOf;function Dl(t){return!!t&&!!t[zr]}function ai(t){var n;return t?w8(t)||Array.isArray(t)||!!t[jM]||!!((n=t.constructor)!=null&&n[jM])||_p(t)||ev(t):!1}var Tbe=Object.prototype.constructor.toString(),NM=new WeakMap;function w8(t){if(!t||typeof t!="object")return!1;const n=Object.getPrototypeOf(t);if(n===null||n===Object.prototype)return!0;const r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let s=NM.get(r);return s===void 0&&(s=Function.toString.call(r),NM.set(r,s)),s===Tbe}function Xx(t,n,r=!0){Zy(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{n(a,t[a],t)}):t.forEach((s,a)=>n(a,s,t))}function Zy(t){const n=t[zr];return n?n.type_:Array.isArray(t)?1:_p(t)?2:ev(t)?3:0}function c1(t,n){return Zy(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function j8(t,n,r){const s=Zy(t);s===2?t.set(n,r):s===3?t.add(r):t[n]=r}function Mbe(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}function _p(t){return t instanceof Map}function ev(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function d1(t,n){if(_p(t))return new Map(t);if(ev(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=w8(t);if(n===!0||n==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[zr];let a=Reflect.ownKeys(s);for(let i=0;i<a.length;i++){const l=a[i],c=s[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(s[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[l]})}return Object.create(Xf(t),s)}else{const s=Xf(t);if(s!==null&&r)return{...t};const a=Object.create(s);return Object.assign(a,t)}}function j2(t,n=!1){return tv(t)||Dl(t)||!ai(t)||(Zy(t)>1&&Object.defineProperties(t,{set:Kh,add:Kh,clear:Kh,delete:Kh}),Object.freeze(t),n&&Object.values(t).forEach(r=>j2(r,!0))),t}function Obe(){Cs(2)}var Kh={value:Obe};function tv(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Rbe={};function Ll(t){const n=Rbe[t];return n||Cs(0,t),n}var Jf;function N8(){return Jf}function Ibe(t,n){return{drafts_:[],parent_:t,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SM(t,n){n&&(Ll("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function u1(t){f1(t),t.drafts_.forEach(Dbe),t.drafts_=null}function f1(t){t===Jf&&(Jf=t.parent_)}function kM(t){return Jf=Ibe(Jf,t)}function Dbe(t){const n=t[zr];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function CM(t,n){n.unfinalizedDrafts_=n.drafts_.length;const r=n.drafts_[0];return t!==void 0&&t!==r?(r[zr].modified_&&(u1(n),Cs(4)),ai(t)&&(t=Jx(n,t),n.parent_||Qx(n,t)),n.patches_&&Ll("Patches").generateReplacementPatches_(r[zr].base_,t,n.patches_,n.inversePatches_)):t=Jx(n,r,[]),u1(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==b8?t:void 0}function Jx(t,n,r){if(tv(n))return n;const s=t.immer_.shouldUseStrictIteration(),a=n[zr];if(!a)return Xx(n,(i,l)=>_M(t,a,n,i,l,r),s),n;if(a.scope_!==t)return n;if(!a.modified_)return Qx(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let l=i,c=!1;a.type_===3&&(l=new Set(i),i.clear(),c=!0),Xx(l,(d,u)=>_M(t,a,i,d,u,r,c),s),Qx(t,i,!1),r&&t.patches_&&Ll("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function _M(t,n,r,s,a,i,l){if(a==null||typeof a!="object"&&!l)return;const c=tv(a);if(!(c&&!l)){if(Dl(a)){const d=i&&n&&n.type_!==3&&!c1(n.assigned_,s)?i.concat(s):void 0,u=Jx(t,a,d);if(j8(r,s,u),Dl(u))t.canAutoFreeze_=!1;else return}else l&&r.add(a);if(ai(a)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||n&&n.base_&&n.base_[s]===a&&c)return;Jx(t,a),(!n||!n.scope_.parent_)&&typeof s!="symbol"&&(_p(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&Qx(t,a)}}}function Qx(t,n,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&j2(n,r)}function Lbe(t,n){const r=Array.isArray(t),s={type_:r?1:0,scope_:n?n.scope_:N8(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,i=N2;r&&(a=[s],i=Qf);const{revoke:l,proxy:c}=Proxy.revocable(a,i);return s.draft_=c,s.revoke_=l,c}var N2={get(t,n){if(n===zr)return t;const r=Wo(t);if(!c1(r,n))return $be(t,r,n);const s=r[n];return t.finalized_||!ai(s)?s:s===kb(t.base_,n)?(Cb(t),t.copy_[n]=h1(s,t)):s},has(t,n){return n in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,n,r){const s=S8(Wo(t),n);if(s!=null&&s.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const a=kb(Wo(t),n),i=a==null?void 0:a[zr];if(i&&i.base_===r)return t.copy_[n]=r,t.assigned_[n]=!1,!0;if(Mbe(r,a)&&(r!==void 0||c1(t.base_,n)))return!0;Cb(t),p1(t)}return t.copy_[n]===r&&(r!==void 0||n in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=r,t.assigned_[n]=!0),!0},deleteProperty(t,n){return kb(t.base_,n)!==void 0||n in t.base_?(t.assigned_[n]=!1,Cb(t),p1(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0},getOwnPropertyDescriptor(t,n){const r=Wo(t),s=Reflect.getOwnPropertyDescriptor(r,n);return s&&{writable:!0,configurable:t.type_!==1||n!=="length",enumerable:s.enumerable,value:r[n]}},defineProperty(){Cs(11)},getPrototypeOf(t){return Xf(t.base_)},setPrototypeOf(){Cs(12)}},Qf={};Xx(N2,(t,n)=>{Qf[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Qf.deleteProperty=function(t,n){return Qf.set.call(this,t,n,void 0)};Qf.set=function(t,n,r){return N2.set.call(this,t[0],n,r,t[0])};function kb(t,n){const r=t[zr];return(r?Wo(r):t)[n]}function $be(t,n,r){var a;const s=S8(n,r);return s?"value"in s?s.value:(a=s.get)==null?void 0:a.call(t.draft_):void 0}function S8(t,n){if(!(n in t))return;let r=Xf(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,n);if(s)return s;r=Xf(r)}}function p1(t){t.modified_||(t.modified_=!0,t.parent_&&p1(t.parent_))}function Cb(t){t.copy_||(t.copy_=d1(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Fbe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,r,s)=>{if(typeof n=="function"&&typeof r!="function"){const i=r;r=n;const l=this;return function(d=i,...u){return l.produce(d,f=>r.call(this,f,...u))}}typeof r!="function"&&Cs(6),s!==void 0&&typeof s!="function"&&Cs(7);let a;if(ai(n)){const i=kM(this),l=h1(n,void 0);let c=!0;try{a=r(l),c=!1}finally{c?u1(i):f1(i)}return SM(i,s),CM(a,i)}else if(!n||typeof n!="object"){if(a=r(n),a===void 0&&(a=n),a===b8&&(a=void 0),this.autoFreeze_&&j2(a,!0),s){const i=[],l=[];Ll("Patches").generateReplacementPatches_(n,a,i,l),s(i,l)}return a}else Cs(1,n)},this.produceWithPatches=(n,r)=>{if(typeof n=="function")return(l,...c)=>this.produceWithPatches(l,d=>n(d,...c));let s,a;return[this.produce(n,r,(l,c)=>{s=l,a=c}),s,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ai(t)||Cs(8),Dl(t)&&(t=Ha(t));const n=kM(this),r=h1(t,void 0);return r[zr].isManual_=!0,f1(n),r}finishDraft(t,n){const r=t&&t[zr];(!r||!r.isManual_)&&Cs(9);const{scope_:s}=r;return SM(s,n),CM(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const s=Ll("Patches").applyPatches_;return Dl(t)?s(t,n):this.produce(t,a=>s(a,n))}};function h1(t,n){const r=_p(t)?Ll("MapSet").proxyMap_(t,n):ev(t)?Ll("MapSet").proxySet_(t,n):Lbe(t,n);return(n?n.scope_:N8()).drafts_.push(r),r}function Ha(t){return Dl(t)||Cs(10,t),k8(t)}function k8(t){if(!ai(t)||tv(t))return t;const n=t[zr];let r,s=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=d1(t,n.scope_.immer_.useStrictShallowCopy_),s=n.scope_.immer_.shouldUseStrictIteration()}else r=d1(t,!0);return Xx(r,(a,i)=>{j8(r,a,k8(i))},s),n&&(n.finalized_=!1),r}var m1=new Fbe,C8=m1.produce,Bbe=m1.setUseStrictIteration.bind(m1);function _8(t){return({dispatch:r,getState:s})=>a=>i=>typeof i=="function"?i(r,s,t):a(i)}var zbe=_8(),Vbe=_8,Ube=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yx:Yx.apply(null,arguments)};function us(t,n){function r(...s){if(n){let a=n(...s);if(!a)throw new Error($r(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:s[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=s=>v8(s)&&s.type===t,r}var P8=class $u extends Array{constructor(...n){super(...n),Object.setPrototypeOf(this,$u.prototype)}static get[Symbol.species](){return $u}concat(...n){return super.concat.apply(this,n)}prepend(...n){return n.length===1&&Array.isArray(n[0])?new $u(...n[0].concat(this)):new $u(...n.concat(this))}};function PM(t){return ai(t)?C8(t,()=>{}):t}function qh(t,n,r){return t.has(n)?t.get(n):t.set(n,r(n)).get(n)}function Hbe(t){return typeof t=="boolean"}var Wbe=()=>function(n){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=n??{};let l=new P8;return r&&(Hbe(r)?l.push(zbe):l.push(Vbe(r.extraArgument))),l},A8="RTK_autoBatch",tn=()=>t=>({payload:t,meta:{[A8]:!0}}),AM=t=>n=>{setTimeout(n,t)},E8=(t={type:"raf"})=>n=>(...r)=>{const s=n(...r);let a=!0,i=!1,l=!1;const c=new Set,d=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AM(10):t.type==="callback"?t.queueNotification:AM(t.timeout),u=()=>{l=!1,i&&(i=!1,c.forEach(f=>f()))};return Object.assign({},s,{subscribe(f){const p=()=>a&&f(),h=s.subscribe(p);return c.add(f),()=>{h(),c.delete(f)}},dispatch(f){var p;try{return a=!((p=f==null?void 0:f.meta)!=null&&p[A8]),i=!a,i&&(l||(l=!0,d(u))),s.dispatch(f)}finally{a=!0}}})},Kbe=t=>function(r){const{autoBatch:s=!0}=r??{};let a=new P8(t);return s&&a.push(E8(typeof s=="object"?s:void 0)),a};function qbe(t){const n=Wbe(),{reducer:r=void 0,middleware:s,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(w2(r))c=y8(r);else throw new Error($r(1));let d;typeof s=="function"?d=s(n):d=n();let u=Yx;a&&(u=Ube({trace:!1,...typeof a=="object"&&a}));const f=Ebe(...d),p=Kbe(f);let h=typeof l=="function"?l(p):p();const m=u(...h);return g8(c,i,m)}function T8(t){const n={},r=[];let s;const a={addCase(i,l){const c=typeof i=="string"?i:i.type;if(!c)throw new Error($r(28));if(c in n)throw new Error($r(29));return n[c]=l,a},addAsyncThunk(i,l){return l.pending&&(n[i.pending.type]=l.pending),l.rejected&&(n[i.rejected.type]=l.rejected),l.fulfilled&&(n[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),a},addMatcher(i,l){return r.push({matcher:i,reducer:l}),a},addDefaultCase(i){return s=i,a}};return t(a),[n,r,s]}Bbe(!1);function Gbe(t){return typeof t=="function"}function Ybe(t,n){let[r,s,a]=T8(n),i;if(Gbe(t))i=()=>PM(t());else{const c=PM(t);i=()=>c}function l(c=i(),d){let u=[r[d.type],...s.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[a]),u.reduce((f,p)=>{if(p)if(Dl(f)){const m=p(f,d);return m===void 0?f:m}else{if(ai(f))return C8(f,h=>p(h,d));{const h=p(f,d);if(h===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return f},c)}return l.getInitialState=i,l}var Xbe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Jbe=(t=21)=>{let n="",r=t;for(;r--;)n+=Xbe[Math.random()*64|0];return n},Qbe=Symbol.for("rtk-slice-createasyncthunk");function Zbe(t,n){return`${t}/${n}`}function ewe({creators:t}={}){var r;const n=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[Qbe];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error($r(11));const c=(typeof a.reducers=="function"?a.reducers(nwe()):a.reducers)||{},d=Object.keys(c),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(N,S){const _=typeof N=="string"?N:N.type;if(!_)throw new Error($r(12));if(_ in u.sliceCaseReducersByType)throw new Error($r(13));return u.sliceCaseReducersByType[_]=S,f},addMatcher(N,S){return u.sliceMatchers.push({matcher:N,reducer:S}),f},exposeAction(N,S){return u.actionCreators[N]=S,f},exposeCaseReducer(N,S){return u.sliceCaseReducersByName[N]=S,f}};d.forEach(N=>{const S=c[N],_={reducerName:N,type:Zbe(i,N),createNotation:typeof a.reducers=="function"};swe(S)?iwe(_,S,f,n):rwe(_,S,f)});function p(){const[N={},S=[],_=void 0]=typeof a.extraReducers=="function"?T8(a.extraReducers):[a.extraReducers],k={...N,...u.sliceCaseReducersByType};return Ybe(a.initialState,C=>{for(let P in k)C.addCase(P,k[P]);for(let P of u.sliceMatchers)C.addMatcher(P.matcher,P.reducer);for(let P of S)C.addMatcher(P.matcher,P.reducer);_&&C.addDefaultCase(_)})}const h=N=>N,m=new Map,g=new WeakMap;let y;function v(N,S){return y||(y=p()),y(N,S)}function b(){return y||(y=p()),y.getInitialState()}function w(N,S=!1){function _(C){let P=C[N];return typeof P>"u"&&S&&(P=qh(g,_,b)),P}function k(C=h){const P=qh(m,S,()=>new WeakMap);return qh(P,C,()=>{const E={};for(const[M,T]of Object.entries(a.selectors??{}))E[M]=twe(T,C,()=>qh(g,C,b),S);return E})}return{reducerPath:N,getSelectors:k,get selectors(){return k(_)},selectSlice:_}}const j={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...w(l),injectInto(N,{reducerPath:S,..._}={}){const k=S??l;return N.inject({reducerPath:k,reducer:v},_),{...j,...w(k,!0)}}};return j}}function twe(t,n,r,s){function a(i,...l){let c=n(i);return typeof c>"u"&&s&&(c=r()),t(c,...l)}return a.unwrapped=t,a}var Nr=ewe();function nwe(){function t(n,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:n,...r}}return t.withTypes=()=>t,{reducer(n){return Object.assign({[n.name](...r){return n(...r)}}[n.name],{_reducerDefinitionType:"reducer"})},preparedReducer(n,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:n,reducer:r}},asyncThunk:t}}function rwe({type:t,reducerName:n,createNotation:r},s,a){let i,l;if("reducer"in s){if(r&&!awe(s))throw new Error($r(17));i=s.reducer,l=s.prepare}else i=s;a.addCase(t,i).exposeCaseReducer(n,i).exposeAction(n,l?us(t,l):us(t))}function swe(t){return t._reducerDefinitionType==="asyncThunk"}function awe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function iwe({type:t,reducerName:n},r,s,a){if(!a)throw new Error($r(18));const{payloadCreator:i,fulfilled:l,pending:c,rejected:d,settled:u,options:f}=r,p=a(t,i,f);s.exposeAction(n,p),l&&s.addCase(p.fulfilled,l),c&&s.addCase(p.pending,c),d&&s.addCase(p.rejected,d),u&&s.addMatcher(p.settled,u),s.exposeCaseReducer(n,{fulfilled:l||Gh,pending:c||Gh,rejected:d||Gh,settled:u||Gh})}function Gh(){}var owe="task",M8="listener",O8="completed",S2="cancelled",lwe=`task-${S2}`,cwe=`task-${O8}`,x1=`${M8}-${S2}`,dwe=`${M8}-${O8}`,nv=class{constructor(t){Wv(this,"name","TaskAbortError");Wv(this,"message");this.code=t,this.message=`${owe} ${S2} (reason: ${t})`}},k2=(t,n)=>{if(typeof t!="function")throw new TypeError($r(32))},Zx=()=>{},R8=(t,n=Zx)=>(t.catch(n),t),I8=(t,n)=>(t.addEventListener("abort",n,{once:!0}),()=>t.removeEventListener("abort",n)),ml=(t,n)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:n,configurable:!0,writable:!0}),t.abort(n))},xl=t=>{if(t.aborted){const{reason:n}=t;throw new nv(n)}};function D8(t,n){let r=Zx;return new Promise((s,a)=>{const i=()=>a(new nv(t.reason));if(t.aborted){i();return}r=I8(t,i),n.finally(()=>r()).then(s,a)}).finally(()=>{r=Zx})}var uwe=async(t,n)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof nv?"cancelled":"rejected",error:r}}finally{n==null||n()}},eg=t=>n=>R8(D8(t,n).then(r=>(xl(t),r))),L8=t=>{const n=eg(t);return r=>n(new Promise(s=>setTimeout(s,r)))},{assign:Yc}=Object,EM={},rv="listenerMiddleware",fwe=(t,n)=>{const r=s=>I8(t,()=>ml(s,t.reason));return(s,a)=>{k2(s);const i=new AbortController;r(i);const l=uwe(async()=>{xl(t),xl(i.signal);const c=await s({pause:eg(i.signal),delay:L8(i.signal),signal:i.signal});return xl(i.signal),c},()=>ml(i,cwe));return a!=null&&a.autoJoin&&n.push(l.catch(Zx)),{result:eg(t)(l),cancel(){ml(i,lwe)}}}},pwe=(t,n)=>{const r=async(s,a)=>{xl(n);let i=()=>{};const c=[new Promise((d,u)=>{let f=t({predicate:s,effect:(p,h)=>{h.unsubscribe(),d([p,h.getState(),h.getOriginalState()])}});i=()=>{f(),u()}})];a!=null&&c.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await D8(n,Promise.race(c));return xl(n),d}finally{i()}};return(s,a)=>R8(r(s,a))},$8=t=>{let{type:n,actionCreator:r,matcher:s,predicate:a,effect:i}=t;if(n)a=us(n).match;else if(r)n=r.type,a=r.match;else if(s)a=s;else if(!a)throw new Error($r(21));return k2(i),{predicate:a,type:n,effect:i}},F8=Yc(t=>{const{type:n,predicate:r,effect:s}=$8(t);return{id:Jbe(),effect:s,type:n,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error($r(22))}}},{withTypes:()=>F8}),TM=(t,n)=>{const{type:r,effect:s,predicate:a}=$8(n);return Array.from(t.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===s)},g1=t=>{t.pending.forEach(n=>{ml(n,x1)})},hwe=(t,n)=>()=>{for(const r of n.keys())g1(r);t.clear()},MM=(t,n,r)=>{try{t(n,r)}catch(s){setTimeout(()=>{throw s},0)}},B8=Yc(us(`${rv}/add`),{withTypes:()=>B8}),mwe=us(`${rv}/removeAll`),z8=Yc(us(`${rv}/remove`),{withTypes:()=>z8}),xwe=(...t)=>{console.error(`${rv}/error`,...t)},Pp=(t={})=>{const n=new Map,r=new Map,s=m=>{const g=r.get(m)??0;r.set(m,g+1)},a=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:l=xwe}=t;k2(l);const c=m=>(m.unsubscribe=()=>n.delete(m.id),n.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&g1(m)}),d=m=>{const g=TM(n,m)??F8(m);return c(g)};Yc(d,{withTypes:()=>d});const u=m=>{const g=TM(n,m);return g&&(g.unsubscribe(),m.cancelActive&&g1(g)),!!g};Yc(u,{withTypes:()=>u});const f=async(m,g,y,v)=>{const b=new AbortController,w=pwe(d,b.signal),j=[];try{m.pending.add(b),s(m),await Promise.resolve(m.effect(g,Yc({},y,{getOriginalState:v,condition:(N,S)=>w(N,S).then(Boolean),take:w,delay:L8(b.signal),pause:eg(b.signal),extra:i,signal:b.signal,fork:fwe(b.signal,j),unsubscribe:m.unsubscribe,subscribe:()=>{n.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,S,_)=>{N!==b&&(ml(N,x1),_.delete(N))})},cancel:()=>{ml(b,x1),m.pending.delete(b)},throwIfCancelled:()=>{xl(b.signal)}})))}catch(N){N instanceof nv||MM(l,N,{raisedBy:"effect"})}finally{await Promise.all(j),ml(b,dwe),a(m),m.pending.delete(b)}},p=hwe(n,r);return{middleware:m=>g=>y=>{if(!v8(y))return g(y);if(B8.match(y))return d(y.payload);if(mwe.match(y)){p();return}if(z8.match(y))return u(y.payload);let v=m.getState();const b=()=>{if(v===EM)throw new Error($r(23));return v};let w;try{if(w=g(y),n.size>0){const j=m.getState(),N=Array.from(n.values());for(const S of N){let _=!1;try{_=S.predicate(y,j,v)}catch(k){_=!1,MM(l,k,{raisedBy:"predicate"})}_&&f(S,y,m,b)}}}finally{v=EM}return w},startListening:d,stopListening:u,clearListeners:p}};function $r(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var gwe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},V8=Nr({name:"chartLayout",initialState:gwe,reducers:{setLayout(t,n){t.layoutType=n.payload},setChartSize(t,n){t.width=n.payload.width,t.height=n.payload.height},setMargin(t,n){var r,s,a,i;t.margin.top=(r=n.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(s=n.payload.right)!==null&&s!==void 0?s:0,t.margin.bottom=(a=n.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(i=n.payload.left)!==null&&i!==void 0?i:0},setScale(t,n){t.scale=n.payload}}}),{setMargin:ywe,setLayout:vwe,setChartSize:bwe,setScale:wwe}=V8.actions,jwe=V8.reducer;function U8(t,n,r){return Array.isArray(t)&&t&&n+r!==0?t.slice(n,r+1):t}function OM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Tc(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?OM(Object(r),!0).forEach(function(s){Nwe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Nwe(t,n,r){return(n=Swe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Swe(t){var n=kwe(t,"string");return typeof n=="symbol"?n:n+""}function kwe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function St(t,n,r){return xn(t)||xn(n)?r:ba(n)?Il(t,n,r):typeof n=="function"?n(t):r}var Cwe=(t,n,r)=>{if(n&&r){var{width:s,height:a}=r,{align:i,verticalAlign:l,layout:c}=n;if((c==="vertical"||c==="horizontal"&&l==="middle")&&i!=="center"&&Pe(t[i]))return Tc(Tc({},t),{},{[i]:t[i]+(s||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&l!=="middle"&&Pe(t[l]))return Tc(Tc({},t),{},{[l]:t[l]+(a||0)})}return t},Jl=(t,n)=>t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis",RM=1e-4,_we=t=>{var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,s=t.range(),a=Math.min(s[0],s[1])-RM,i=Math.max(s[0],s[1])+RM,l=t(n[0]),c=t(n[r-1]);(l<a||l>i||c<a||c>i)&&t.domain([n[0],n[r-1]])}},Pwe=(t,n)=>{if(!n||n.length!==2||!Pe(n[0])||!Pe(n[1]))return t;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!Pe(t[0])||t[0]<r)&&(a[0]=r),(!Pe(t[1])||t[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a},Awe=t=>{var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var a=0,i=0,l=0;l<n;++l){var c=va(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=a,t[l][r][1]=a+c,a=t[l][r][1]):(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1])}},Ewe=t=>{var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var a=0,i=0;i<n;++i){var l=va(t[i][r][1])?t[i][r][0]:t[i][r][1];l>=0?(t[i][r][0]=a,t[i][r][1]=a+l,a=t[i][r][1]):(t[i][r][0]=0,t[i][r][1]=0)}},Twe={sign:Awe,expand:F0e,none:vd,silhouette:B0e,wiggle:z0e,positive:Ewe},Mwe=(t,n,r)=>{var s=Twe[r],a=$0e().keys(n).value((i,l)=>Number(St(i,l,0))).order(o1).offset(s);return a(t)};function Owe(t){return t==null?void 0:String(t)}var IM=t=>{var{axis:n,ticks:r,offset:s,bandSize:a,entry:i,index:l}=t;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=St(i,n.dataKey,n.scale.domain()[l]);return xn(c)?null:n.scale(c)-a/2+s},Rwe=t=>{var{numericAxis:n}=t,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]},Iwe=t=>{var n=t.flat(2).filter(Pe);return[Math.min(...n),Math.max(...n)]},Dwe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Lwe=(t,n,r)=>{if(t!=null)return Dwe(Object.keys(t).reduce((s,a)=>{var i=t[a],{stackedData:l}=i,c=l.reduce((d,u)=>{var f=U8(u,n,r),p=Iwe(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]))},DM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tg=(t,n,r)=>{if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!r||s>0)return s}if(t&&n&&n.length>=2){for(var a=Qy(n,f=>f.coordinate),i=1/0,l=1,c=a.length;l<c;l++){var d=a[l],u=a[l-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function $M(t){var{tooltipEntrySettings:n,dataKey:r,payload:s,value:a,name:i}=t;return Tc(Tc({},n),{},{dataKey:r,payload:s,value:a,name:i})}function sv(t,n){if(t)return String(t);if(typeof n=="string")return n}var $we=(t,n)=>{if(n==="horizontal")return t.chartX;if(n==="vertical")return t.chartY},Fwe=(t,n)=>n==="centric"?t.angle:t.radius,hi=t=>t.layout.width,mi=t=>t.layout.height,Bwe=t=>t.layout.scale,H8=t=>t.layout.margin,av=U(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),iv=U(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),W8="data-recharts-item-index",K8="data-recharts-item-data-key",Ap=60;function FM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Yh(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?FM(Object(r),!0).forEach(function(s){zwe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function zwe(t,n,r){return(n=Vwe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Vwe(t){var n=Uwe(t,"string");return typeof n=="symbol"?n:n+""}function Uwe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var Hwe=t=>t.brush.height;function Wwe(t){var n=iv(t);return n.reduce((r,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var a=typeof s.width=="number"?s.width:Ap;return r+a}return r},0)}function Kwe(t){var n=iv(t);return n.reduce((r,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var a=typeof s.width=="number"?s.width:Ap;return r+a}return r},0)}function qwe(t){var n=av(t);return n.reduce((r,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?r+s.height:r,0)}function Gwe(t){var n=av(t);return n.reduce((r,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?r+s.height:r,0)}var an=U([hi,mi,H8,Hwe,Wwe,Kwe,qwe,Gwe,x8,Sbe],(t,n,r,s,a,i,l,c,d,u)=>{var f={left:(r.left||0)+a,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+c},h=Yh(Yh({},p),f),m=h.bottom;h.bottom+=s,h=Cwe(h,d,u);var g=t-h.left-h.right,y=n-h.top-h.bottom;return Yh(Yh({brushBottom:m},h),{},{width:Math.max(g,0),height:Math.max(y,0)})}),Ywe=U(an,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),C2=U(hi,mi,(t,n)=>({x:0,y:0,width:t,height:n})),Xwe=x.createContext(null),Hr=()=>x.useContext(Xwe)!=null,ov=t=>t.brush,lv=U([ov,an,H8],(t,n,r)=>({height:t.height,x:Pe(t.x)?t.x:n.left,y:Pe(t.y)?t.y:n.top+n.height+n.brushBottom-((r==null?void 0:r.bottom)||0),width:Pe(t.width)?t.width:n.width})),q8={},G8={},Y8={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r,s,{signal:a,edges:i}={}){let l,c=null;const d=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),f=()=>{c!==null&&(r.apply(l,c),l=void 0,c=null)},p=()=>{u&&f(),y()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,p()},s)},g=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{g(),l=void 0,c=null},v=()=>{f()},b=function(...w){if(a!=null&&a.aborted)return;l=this,c=w;const j=h==null;m(),d&&j&&f()};return b.schedule=m,b.cancel=y,b.flush=v,a==null||a.addEventListener("abort",y,{once:!0}),b}t.debounce=n})(Y8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=Y8;function r(s,a=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:c=!0,maxWait:d}=i,u=Array(2);l&&(u[0]="leading"),c&&(u[1]="trailing");let f,p=null;const h=n.debounce(function(...y){f=s.apply(this,y),p=null},a,{edges:u}),m=function(...y){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=s.apply(this,y),p=Date.now(),h.cancel(),h.schedule(),f):(h.apply(this,y),f)},g=()=>(h.flush(),f);return m.cancel=h.cancel,m.flush=g,m}t.debounce=r})(G8);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=G8;function r(s,a=0,i={}){const{leading:l=!0,trailing:c=!0}=i;return n.debounce(s,a,{leading:l,maxWait:a,trailing:c})}t.throttle=r})(q8);var Jwe=q8.throttle;const Qwe=Vs(Jwe);var BM=function(n,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]},X8=(t,n,r)=>{var{width:s="100%",height:a="100%",aspect:i,maxHeight:l}=r,c=si(s)?t:Number(s),d=si(a)?n:Number(a);return i&&i>0&&(c?d=c/i:d&&(c=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:c,calculatedHeight:d}},Zwe={width:0,height:0,overflow:"visible"},eje={width:0,overflowX:"visible"},tje={height:0,overflowY:"visible"},nje={},rje=t=>{var{width:n,height:r}=t,s=si(n),a=si(r);return s&&a?Zwe:s?eje:a?tje:nje};function sje(t){var{width:n,height:r,aspect:s}=t,a=n,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:a,height:i}}function Bt(t){return Number.isFinite(t)}function go(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},y1.apply(null,arguments)}function zM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function VM(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zM(Object(r),!0).forEach(function(s){aje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function aje(t,n,r){return(n=ije(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ije(t){var n=oje(t,"string");return typeof n=="symbol"?n:n+""}function oje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var J8=x.createContext({width:-1,height:-1});function lje(t){return go(t.width)&&go(t.height)}function Q8(t){var{children:n,width:r,height:s}=t,a=x.useMemo(()=>({width:r,height:s}),[r,s]);return lje(a)?x.createElement(J8.Provider,{value:a},n):null}var _2=()=>x.useContext(J8),cje=x.forwardRef((t,n)=>{var{aspect:r,initialDimension:s={width:-1,height:-1},width:a,height:i,minWidth:l=0,minHeight:c,maxHeight:d,children:u,debounce:f=0,id:p,className:h,onResize:m,style:g={}}=t,y=x.useRef(null),v=x.useRef();v.current=m,x.useImperativeHandle(n,()=>y.current);var[b,w]=x.useState({containerWidth:s.width,containerHeight:s.height}),j=x.useCallback((C,P)=>{w(E=>{var M=Math.round(C),T=Math.round(P);return E.containerWidth===M&&E.containerHeight===T?E:{containerWidth:M,containerHeight:T}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return Xl;var C=T=>{var A,{width:R,height:O}=T[0].contentRect;j(R,O),(A=v.current)===null||A===void 0||A.call(v,R,O)};f>0&&(C=Qwe(C,f,{trailing:!0,leading:!1}));var P=new ResizeObserver(C),{width:E,height:M}=y.current.getBoundingClientRect();return j(E,M),P.observe(y.current),()=>{P.disconnect()}},[j,f]);var{containerWidth:N,containerHeight:S}=b;BM(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:_,calculatedHeight:k}=X8(N,S,{width:a,height:i,aspect:r,maxHeight:d});return BM(_!=null&&_>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,k,a,i,l,c,r),x.createElement("div",{id:p?"".concat(p):void 0,className:Xe("recharts-responsive-container",h),style:VM(VM({},g),{},{width:a,height:i,minWidth:l,minHeight:c,maxHeight:d}),ref:y},x.createElement("div",{style:rje({width:a,height:i})},x.createElement(Q8,{width:_,height:k},u)))}),Mc=x.forwardRef((t,n)=>{var r=_2();if(go(r.width)&&go(r.height))return t.children;var{width:s,height:a}=sje({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:i,calculatedHeight:l}=X8(void 0,void 0,{width:s,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Pe(i)&&Pe(l)?x.createElement(Q8,{width:i,height:l},t.children):x.createElement(cje,y1({},t,{width:s,height:a,ref:n}))});function Z8(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var cv=()=>{var t,n=Hr(),r=Ne(Ywe),s=Ne(lv),a=(t=Ne(ov))===null||t===void 0?void 0:t.padding;return!n||!s||!a?r:{width:s.width-a.left-a.right,height:s.height-a.top-a.bottom,x:a.left,y:a.top}},dje={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},uje=()=>{var t;return(t=Ne(an))!==null&&t!==void 0?t:dje},fje=()=>Ne(hi),pje=()=>Ne(mi),Ye=t=>t.layout.layoutType,dv=()=>Ne(Ye),hje=()=>{var t=dv();return t!==void 0},uv=t=>{var n=gt(),r=Hr(),{width:s,height:a}=t,i=_2(),l=s,c=a;return i&&(l=i.width>0?i.width:s,c=i.height>0?i.height:a),x.useEffect(()=>{!r&&go(l)&&go(c)&&n(bwe({width:l,height:c}))},[n,r,l,c]),null},mje={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},eV=Nr({name:"legend",initialState:mje,reducers:{setLegendSize(t,n){t.size.width=n.payload.width,t.size.height=n.payload.height},setLegendSettings(t,n){t.settings.align=n.payload.align,t.settings.layout=n.payload.layout,t.settings.verticalAlign=n.payload.verticalAlign,t.settings.itemSorter=n.payload.itemSorter},addLegendPayload:{reducer(t,n){t.payload.push(n.payload)},prepare:tn()},removeLegendPayload:{reducer(t,n){var r=Ha(t).payload.indexOf(n.payload);r>-1&&t.payload.splice(r,1)},prepare:tn()}}}),{setLegendSize:ZRe,setLegendSettings:e5e,addLegendPayload:tV,removeLegendPayload:nV}=eV.actions,xje=eV.reducer;function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},v1.apply(null,arguments)}function UM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function _b(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?UM(Object(r),!0).forEach(function(s){gje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function gje(t,n,r){return(n=yje(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function yje(t){var n=vje(t,"string");return typeof n=="symbol"?n:n+""}function vje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function bje(t){return Array.isArray(t)&&ba(t[0])&&ba(t[1])?t.join(" ~ "):t}var wje=t=>{var{separator:n=" : ",contentStyle:r={},itemStyle:s={},labelStyle:a={},payload:i,formatter:l,itemSorter:c,wrapperClassName:d,labelClassName:u,label:f,labelFormatter:p,accessibilityLayer:h=!1}=t,m=()=>{if(i&&i.length){var S={padding:0,margin:0},_=(c?Qy(i,c):i).map((k,C)=>{if(k.type==="none")return null;var P=k.formatter||l||bje,{value:E,name:M}=k,T=E,A=M;if(P){var R=P(E,M,k,C,i);if(Array.isArray(R))[T,A]=R;else if(R!=null)T=R;else return null}var O=_b({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},s);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:O},ba(A)?x.createElement("span",{className:"recharts-tooltip-item-name"},A):null,ba(A)?x.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,x.createElement("span",{className:"recharts-tooltip-item-value"},T),x.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:S},_)}return null},g=_b({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=_b({margin:0},a),v=!xn(f),b=v?f:"",w=Xe("recharts-default-tooltip",d),j=Xe("recharts-tooltip-label",u);v&&p&&i!==void 0&&i!==null&&(b=p(f,i));var N=h?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",v1({className:w,style:g},N),x.createElement("p",{className:j,style:y},x.isValidElement(b)?b:"".concat(b)),m())},gu="recharts-tooltip-wrapper",jje={visibility:"hidden"};function Nje(t){var{coordinate:n,translateX:r,translateY:s}=t;return Xe(gu,{["".concat(gu,"-right")]:Pe(r)&&n&&Pe(n.x)&&r>=n.x,["".concat(gu,"-left")]:Pe(r)&&n&&Pe(n.x)&&r<n.x,["".concat(gu,"-bottom")]:Pe(s)&&n&&Pe(n.y)&&s>=n.y,["".concat(gu,"-top")]:Pe(s)&&n&&Pe(n.y)&&s<n.y})}function HM(t){var{allowEscapeViewBox:n,coordinate:r,key:s,offsetTopLeft:a,position:i,reverseDirection:l,tooltipDimension:c,viewBox:d,viewBoxDimension:u}=t;if(i&&Pe(i[s]))return i[s];var f=r[s]-c-(a>0?a:0),p=r[s]+a;if(n[s])return l[s]?f:p;var h=d[s];if(h==null)return 0;if(l[s]){var m=f,g=h;return m<g?Math.max(p,h):Math.max(f,h)}if(u==null)return 0;var y=p+c,v=h+u;return y>v?Math.max(f,h):Math.max(p,h)}function Sje(t){var{translateX:n,translateY:r,useTranslate3d:s}=t;return{transform:s?"translate3d(".concat(n,"px, ").concat(r,"px, 0)"):"translate(".concat(n,"px, ").concat(r,"px)")}}function kje(t){var{allowEscapeViewBox:n,coordinate:r,offsetTopLeft:s,position:a,reverseDirection:i,tooltipBox:l,useTranslate3d:c,viewBox:d}=t,u,f,p;return l.height>0&&l.width>0&&r?(f=HM({allowEscapeViewBox:n,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=HM({allowEscapeViewBox:n,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),u=Sje({translateX:f,translateY:p,useTranslate3d:c})):u=jje,{cssProperties:u,cssClasses:Nje({translateX:f,translateY:p,coordinate:r})}}function WM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Xh(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?WM(Object(r),!0).forEach(function(s){b1(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function b1(t,n,r){return(n=Cje(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Cje(t){var n=_je(t,"string");return typeof n=="symbol"?n:n+""}function _je(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}class Pje extends x.PureComponent{constructor(){super(...arguments),b1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),b1(this,"handleKeyDown",n=>{if(n.key==="Escape"){var r,s,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var n,r;this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:n,allowEscapeViewBox:r,animationDuration:s,animationEasing:a,children:i,coordinate:l,hasPayload:c,isAnimationActive:d,offset:u,position:f,reverseDirection:p,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:v,hasPortalFromProps:b}=this.props,{cssClasses:w,cssProperties:j}=kje({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:u,position:f,reverseDirection:p,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:m}),N=b?{}:Xh(Xh({transition:d&&n?"transform ".concat(s,"ms ").concat(a):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0}),S=Xh(Xh({},N),{},{visibility:!this.state.dismissed&&n&&c?"visible":"hidden"},g);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:S,ref:v},i)}}var Aje=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ql={devToolsEnabled:!1,isSsr:Aje()},rV=()=>{var t;return(t=Ne(n=>n.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},w1.apply(null,arguments)}function KM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function qM(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?KM(Object(r),!0).forEach(function(s){Eje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Eje(t,n,r){return(n=Tje(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Tje(t){var n=Mje(t,"string");return typeof n=="symbol"?n:n+""}function Mje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var GM={curveBasisClosed:_0e,curveBasisOpen:P0e,curveBasis:C0e,curveBumpX:f0e,curveBumpY:p0e,curveLinearClosed:A0e,curveLinear:Wy,curveMonotoneX:E0e,curveMonotoneY:T0e,curveNatural:M0e,curveStep:O0e,curveStepAfter:I0e,curveStepBefore:R0e},ng=t=>Bt(t.x)&&Bt(t.y),YM=t=>t.base!=null&&ng(t.base)&&ng(t),yu=t=>t.x,vu=t=>t.y,Oje=(t,n)=>{if(typeof t=="function")return t;var r="curve".concat(Cp(t));return(r==="curveMonotone"||r==="curveBump")&&n?GM["".concat(r).concat(n==="vertical"?"Y":"X")]:GM[r]||Wy},Rje=t=>{var{type:n="linear",points:r=[],baseLine:s,layout:a,connectNulls:i=!1}=t,l=Oje(n,a),c=i?r.filter(ng):r,d;if(Array.isArray(s)){var u=r.map((m,g)=>qM(qM({},m),{},{base:s[g]}));a==="vertical"?d=Uh().y(vu).x1(yu).x0(m=>m.base.x):d=Uh().x(yu).y1(vu).y0(m=>m.base.y);var f=d.defined(YM).curve(l),p=i?u.filter(YM):u;return f(p)}a==="vertical"&&Pe(s)?d=Uh().y(vu).x1(yu).x0(s):Pe(s)?d=Uh().x(yu).y1(vu).y0(s):d=E6().x(yu).y(vu);var h=d.defined(ng).curve(l);return h(c)},P2=t=>{var{className:n,points:r,path:s,pathRef:a}=t;if((!r||!r.length)&&!s)return null;var i=r&&r.length?Rje(t):s;return x.createElement("path",w1({},ya(t),nbe(t),{className:Xe("recharts-curve",n),d:i===null?void 0:i,ref:a}))},Ije=["x","y","top","left","width","height","className"];function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},j1.apply(null,arguments)}function XM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Dje(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?XM(Object(r),!0).forEach(function(s){Lje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Lje(t,n,r){return(n=$je(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function $je(t){var n=Fje(t,"string");return typeof n=="symbol"?n:n+""}function Fje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Bje(t,n){if(t==null)return{};var r,s,a=zje(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zje(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Vje=(t,n,r,s,a,i)=>"M".concat(t,",").concat(a,"v").concat(s,"M").concat(i,",").concat(n,"h").concat(r),Uje=t=>{var{x:n=0,y:r=0,top:s=0,left:a=0,width:i=0,height:l=0,className:c}=t,d=Bje(t,Ije),u=Dje({x:n,y:r,top:s,left:a,width:i,height:l},d);return!Pe(n)||!Pe(r)||!Pe(i)||!Pe(l)||!Pe(s)||!Pe(a)?null:x.createElement("path",j1({},ds(u),{className:Xe("recharts-cross",c),d:Vje(n,r,i,l,s,a)}))};function Hje(t,n,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?n.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:n.y-a,width:t==="horizontal"?s:r.width-1,height:t==="horizontal"?r.height-1:s}}function JM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function QM(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?JM(Object(r),!0).forEach(function(s){Wje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Wje(t,n,r){return(n=Kje(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Kje(t){var n=qje(t,"string");return typeof n=="symbol"?n:n+""}function qje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var Gje=t=>t.replace(/([A-Z])/g,n=>"-".concat(n.toLowerCase())),sV=(t,n,r)=>t.map(s=>"".concat(Gje(s)," ").concat(n,"ms ").concat(r)).join(","),Yje=(t,n)=>[Object.keys(t),Object.keys(n)].reduce((r,s)=>r.filter(a=>s.includes(a))),Zf=(t,n)=>Object.keys(n).reduce((r,s)=>QM(QM({},r),{},{[s]:t(s,n[s])}),{});function ZM(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Zt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ZM(Object(r),!0).forEach(function(s){Xje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Xje(t,n,r){return(n=Jje(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Jje(t){var n=Qje(t,"string");return typeof n=="symbol"?n:n+""}function Qje(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var rg=(t,n,r)=>t+(n-t)*r,N1=t=>{var{from:n,to:r}=t;return n!==r},aV=(t,n,r)=>{var s=Zf((a,i)=>{if(N1(i)){var[l,c]=t(i.from,i.to,i.velocity);return Zt(Zt({},i),{},{from:l,velocity:c})}return i},n);return r<1?Zf((a,i)=>N1(i)?Zt(Zt({},i),{},{velocity:rg(i.velocity,s[a].velocity,r),from:rg(i.from,s[a].from,r)}):i,n):aV(t,s,r-1)};function Zje(t,n,r,s,a,i){var l,c=s.reduce((h,m)=>Zt(Zt({},h),{},{[m]:{from:t[m],velocity:0,to:n[m]}}),{}),d=()=>Zf((h,m)=>m.from,c),u=()=>!Object.values(c).filter(N1).length,f=null,p=h=>{l||(l=h);var m=h-l,g=m/r.dt;c=aV(r,c,g),a(Zt(Zt(Zt({},t),n),d())),l=h,u()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var h;(h=f)===null||h===void 0||h()})}function e1e(t,n,r,s,a,i,l){var c=null,d=a.reduce((p,h)=>Zt(Zt({},p),{},{[h]:[t[h],n[h]]}),{}),u,f=p=>{u||(u=p);var h=(p-u)/s,m=Zf((y,v)=>rg(...v,r(h)),d);if(i(Zt(Zt(Zt({},t),n),m)),h<1)c=l.setTimeout(f);else{var g=Zf((y,v)=>rg(...v,r(1)),d);i(Zt(Zt(Zt({},t),n),g))}};return()=>(c=l.setTimeout(f),()=>{var p;(p=c)===null||p===void 0||p()})}const t1e=(t,n,r,s,a,i)=>{var l=Yje(t,n);return r==null?()=>(a(Zt(Zt({},t),n)),()=>{}):r.isStepper===!0?Zje(t,n,r,l,a,i):e1e(t,n,r,s,l,a,i)};var sg=1e-4,iV=(t,n)=>[0,3*t,3*n-6*t,3*t-3*n+1],oV=(t,n)=>t.map((r,s)=>r*n**s).reduce((r,s)=>r+s),eO=(t,n)=>r=>{var s=iV(t,n);return oV(s,r)},n1e=(t,n)=>r=>{var s=iV(t,n),a=[...s.map((i,l)=>i*l).slice(1),0];return oV(a,r)},r1e=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((a=i[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(c=>parseFloat(c));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},s1e=(t,n,r,s)=>{var a=eO(t,r),i=eO(n,s),l=n1e(t,r),c=u=>u>1?1:u<0?0:u,d=u=>{for(var f=u>1?1:u,p=f,h=0;h<8;++h){var m=a(p)-f,g=l(p);if(Math.abs(m-f)<sg||g<sg)return i(p);p=c(p-m/g)}return i(p)};return d.isStepper=!1,d},tO=function(){return s1e(...r1e(...arguments))},a1e=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:s=8,dt:a=17}=n,i=(l,c,d)=>{var u=-(l-c)*r,f=d*s,p=d+(u-f)*a/1e3,h=d*a/1e3+l;return Math.abs(h-c)<sg&&Math.abs(p)<sg?[c,0]:[h,p]};return i.isStepper=!0,i.dt=a,i},i1e=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tO(t);case"spring":return a1e();default:if(t.split("(")[0]==="cubic-bezier")return tO(t)}return typeof t=="function"?t:null};function o1e(t){var n,r=()=>null,s=!1,a=null,i=l=>{if(!s){if(Array.isArray(l)){if(!l.length)return;var c=l,[d,...u]=c;if(typeof d=="number"){a=t.setTimeout(i.bind(null,u),d);return}i(d),a=t.setTimeout(i.bind(null,u));return}typeof l=="string"&&(n=l,r(n)),typeof l=="object"&&(n=l,r(n)),typeof l=="function"&&l()}};return{stop:()=>{s=!0},start:l=>{s=!1,a&&(a(),a=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>t}}class l1e{setTimeout(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),a=null,i=l=>{l-s>=r?n(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function c1e(){return o1e(new l1e)}var d1e=x.createContext(c1e);function u1e(t,n){var r=x.useContext(d1e);return x.useMemo(()=>n??r(t),[t,n,r])}var f1e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nO={t:0},Pb={t:1};function fv(t){var n=or(t,f1e),{isActive:r,canBegin:s,duration:a,easing:i,begin:l,onAnimationEnd:c,onAnimationStart:d,children:u}=n,f=u1e(n.animationId,n.animationManager),[p,h]=x.useState(r?nO:Pb),m=x.useRef(null);return x.useEffect(()=>{r||h(Pb)},[r]),x.useEffect(()=>{if(!r||!s)return Xl;var g=t1e(nO,Pb,i1e(i),a,h,f.getTimeoutController()),y=()=>{m.current=g()};return f.start([d,l,y,a,c]),()=>{f.stop(),m.current&&m.current(),c()}},[r,s,a,i,l,d,c,f]),u(p.t)}function pv(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(Yf(n)),s=x.useRef(t);return s.current!==t&&(r.current=Yf(n),s.current=t),r.current}var p1e=["radius"],h1e=["radius"];function rO(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function sO(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?rO(Object(r),!0).forEach(function(s){m1e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function m1e(t,n,r){return(n=x1e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function x1e(t){var n=g1e(t,"string");return typeof n=="symbol"?n:n+""}function g1e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function ag(){return ag=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ag.apply(null,arguments)}function aO(t,n){if(t==null)return{};var r,s,a=y1e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function y1e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var iO=(t,n,r,s,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,d=s>=0&&r>=0||s<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=a[p]>i?i:a[p];u="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(n)),u+="L ".concat(t+r-c*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+r,",").concat(n+l*f[1])),u+="L ".concat(t+r,",").concat(n+s-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+r-c*f[2],",").concat(n+s)),u+="L ".concat(t+c*f[3],",").concat(n+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+s-l*f[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);u="M ".concat(t,",").concat(n+l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+c*m,",").concat(n,`
            L `).concat(t+r-c*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+r,",").concat(n+l*m,`
            L `).concat(t+r,",").concat(n+s-l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+r-c*m,",").concat(n+s,`
            L `).concat(t+c*m,",").concat(n+s,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t,",").concat(n+s-l*m," Z")}else u="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return u},oO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lV=t=>{var n=or(t,oO),r=x.useRef(null),[s,a]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var L=r.current.getTotalLength();L&&a(L)}catch{}},[]);var{x:i,y:l,width:c,height:d,radius:u,className:f}=n,{animationEasing:p,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=n,v=x.useRef(c),b=x.useRef(d),w=x.useRef(i),j=x.useRef(l),N=x.useMemo(()=>({x:i,y:l,width:c,height:d,radius:u}),[i,l,c,d,u]),S=pv(N,"rectangle-");if(i!==+i||l!==+l||c!==+c||d!==+d||c===0||d===0)return null;var _=Xe("recharts-rectangle",f);if(!y){var k=ds(n),{radius:C}=k,P=aO(k,p1e);return x.createElement("path",ag({},P,{radius:typeof u=="number"?u:void 0,className:_,d:iO(i,l,c,d,u)}))}var E=v.current,M=b.current,T=w.current,A=j.current,R="0px ".concat(s===-1?1:s,"px"),O="".concat(s,"px 0px"),I=sV(["strokeDasharray"],h,typeof p=="string"?p:oO.animationEasing);return x.createElement(fv,{animationId:S,key:S,canBegin:s>0,duration:h,easing:p,isActive:y,begin:m},L=>{var D=Qt(E,c,L),$=Qt(M,d,L),F=Qt(T,i,L),K=Qt(A,l,L);r.current&&(v.current=D,b.current=$,w.current=F,j.current=K);var J;g?L>0?J={transition:I,strokeDasharray:O}:J={strokeDasharray:R}:J={strokeDasharray:O};var Y=ds(n),{radius:ee}=Y,Q=aO(Y,h1e);return x.createElement("path",ag({},Q,{radius:typeof u=="number"?u:void 0,className:_,d:iO(F,K,D,$,u),ref:r,style:sO(sO({},J),n.style)}))})};function lO(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function cO(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lO(Object(r),!0).forEach(function(s){v1e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function v1e(t,n,r){return(n=b1e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function b1e(t){var n=w1e(t,"string");return typeof n=="symbol"?n:n+""}function w1e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var ig=Math.PI/180,j1e=t=>t*180/Math.PI,Wt=(t,n,r,s)=>({x:t+Math.cos(-ig*s)*r,y:n+Math.sin(-ig*s)*r}),cV=function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(n-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},N1e=(t,n)=>{var{x:r,y:s}=t,{x:a,y:i}=n;return Math.sqrt((r-a)**2+(s-i)**2)},S1e=(t,n)=>{var{x:r,y:s}=t,{cx:a,cy:i}=n,l=N1e({x:r,y:s},{x:a,y:i});if(l<=0)return{radius:l,angle:0};var c=(r-a)/l,d=Math.acos(c);return s>i&&(d=2*Math.PI-d),{radius:l,angle:j1e(d),angleInRadian:d}},k1e=t=>{var{startAngle:n,endAngle:r}=t,s=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(s,a);return{startAngle:n-i*360,endAngle:r-i*360}},C1e=(t,n)=>{var{startAngle:r,endAngle:s}=n,a=Math.floor(r/360),i=Math.floor(s/360),l=Math.min(a,i);return t+l*360},_1e=(t,n)=>{var{chartX:r,chartY:s}=t,{radius:a,angle:i}=S1e({x:r,y:s},n),{innerRadius:l,outerRadius:c}=n;if(a<l||a>c||a===0)return null;var{startAngle:d,endAngle:u}=k1e(n),f=i,p;if(d<=u){for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}else{for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}return p?cO(cO({},n),{},{radius:a,angle:C1e(f,n)}):null};function dV(t){var{cx:n,cy:r,radius:s,startAngle:a,endAngle:i}=t,l=Wt(n,r,s,a),c=Wt(n,r,s,i);return{points:[l,c],cx:n,cy:r,radius:s,startAngle:a,endAngle:i}}function S1(){return S1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},S1.apply(null,arguments)}var P1e=(t,n)=>{var r=Cn(n-t),s=Math.min(Math.abs(n-t),359.999);return r*s},Jh=t=>{var{cx:n,cy:r,radius:s,angle:a,sign:i,isExternal:l,cornerRadius:c,cornerIsExternal:d}=t,u=c*(l?1:-1)+s,f=Math.asin(c/u)/ig,p=d?a:a+i*f,h=Wt(n,r,u,p),m=Wt(n,r,s,p),g=d?a-i*f:a,y=Wt(n,r,u*Math.cos(f*ig),g);return{center:h,circleTangency:m,lineTangency:y,theta:f}},uV=t=>{var{cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:i,endAngle:l}=t,c=P1e(i,l),d=i+c,u=Wt(n,r,a,i),f=Wt(n,r,a,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var h=Wt(n,r,s,i),m=Wt(n,r,s,d);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},A1e=t=>{var{cx:n,cy:r,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}=t,f=Cn(u-d),{circleTangency:p,lineTangency:h,theta:m}=Jh({cx:n,cy:r,radius:a,angle:d,sign:f,cornerRadius:i,cornerIsExternal:c}),{circleTangency:g,lineTangency:y,theta:v}=Jh({cx:n,cy:r,radius:a,angle:u,sign:-f,cornerRadius:i,cornerIsExternal:c}),b=c?Math.abs(d-u):Math.abs(d-u)-m-v;if(b<0)return l?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):uV({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:d,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(b>180),",").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var{circleTangency:j,lineTangency:N,theta:S}=Jh({cx:n,cy:r,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:_,lineTangency:k,theta:C}=Jh({cx:n,cy:r,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),P=c?Math.abs(d-u):Math.abs(d-u)-S-C;if(P<0&&i===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},E1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},fV=t=>{var n=or(t,E1e),{cx:r,cy:s,innerRadius:a,outerRadius:i,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f,className:p}=n;if(i<a||u===f)return null;var h=Xe("recharts-sector",p),m=i-a,g=Un(l,m,0,!0),y;return g>0&&Math.abs(u-f)<360?y=A1e({cx:r,cy:s,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):y=uV({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f}),x.createElement("path",S1({},ds(n),{className:h,d:y}))};function T1e(t,n,r){if(t==="horizontal")return[{x:n.x,y:r.top},{x:n.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:n.y},{x:r.left+r.width,y:n.y}];if(K6(n)){if(t==="centric"){var{cx:s,cy:a,innerRadius:i,outerRadius:l,angle:c}=n,d=Wt(s,a,i,c),u=Wt(s,a,l,c);return[{x:d.x,y:d.y},{x:u.x,y:u.y}]}return dV(n)}}var pV={},hV={},mV={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=v2;function r(s){return n.isSymbol(s)?NaN:Number(s)}t.toNumber=r})(mV);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=mV;function r(s){return s?(s=n.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}t.toFinite=r})(hV);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=b2,r=hV;function s(a,i,l){l&&typeof l!="number"&&n.isIterateeCall(a,i,l)&&(i=l=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),l=l===void 0?a<i?1:-1:r.toFinite(l);const c=Math.max(Math.ceil((i-a)/(l||1)),0),d=new Array(c);for(let u=0;u<c;u++)d[u]=a,a+=l;return d}t.range=s})(pV);var M1e=pV.range;const xV=Vs(M1e);function so(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function O1e(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function A2(t){let n,r,s;t.length!==2?(n=so,r=(c,d)=>so(t(c),d),s=(c,d)=>t(c)-d):(n=t===so||t===O1e?t:R1e,r=t,s=t);function a(c,d,u=0,f=c.length){if(u<f){if(n(d,d)!==0)return f;do{const p=u+f>>>1;r(c[p],d)<0?u=p+1:f=p}while(u<f)}return u}function i(c,d,u=0,f=c.length){if(u<f){if(n(d,d)!==0)return f;do{const p=u+f>>>1;r(c[p],d)<=0?u=p+1:f=p}while(u<f)}return u}function l(c,d,u=0,f=c.length){const p=a(c,d,u,f-1);return p>u&&s(c[p-1],d)>-s(c[p],d)?p-1:p}return{left:a,center:l,right:i}}function R1e(){return 0}function gV(t){return t===null?NaN:+t}function*I1e(t,n){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const D1e=A2(so),Ep=D1e.right;A2(gV).center;class dO extends Map{constructor(n,r=F1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[s,a]of n)this.set(s,a)}get(n){return super.get(uO(this,n))}has(n){return super.has(uO(this,n))}set(n,r){return super.set(L1e(this,n),r)}delete(n){return super.delete($1e(this,n))}}function uO({_intern:t,_key:n},r){const s=n(r);return t.has(s)?t.get(s):r}function L1e({_intern:t,_key:n},r){const s=n(r);return t.has(s)?t.get(s):(t.set(s,r),r)}function $1e({_intern:t,_key:n},r){const s=n(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r}function F1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function B1e(t=so){if(t===so)return yV;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,r)=>{const s=t(n,r);return s||s===0?s:(t(r,r)===0)-(t(n,n)===0)}}function yV(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}const z1e=Math.sqrt(50),V1e=Math.sqrt(10),U1e=Math.sqrt(2);function og(t,n,r){const s=(n-t)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),l=i>=z1e?10:i>=V1e?5:i>=U1e?2:1;let c,d,u;return a<0?(u=Math.pow(10,-a)/l,c=Math.round(t*u),d=Math.round(n*u),c/u<t&&++c,d/u>n&&--d,u=-u):(u=Math.pow(10,a)*l,c=Math.round(t/u),d=Math.round(n/u),c*u<t&&++c,d*u>n&&--d),d<c&&.5<=r&&r<2?og(t,n,r*2):[c,d,u]}function k1(t,n,r){if(n=+n,t=+t,r=+r,!(r>0))return[];if(t===n)return[t];const s=n<t,[a,i,l]=s?og(n,t,r):og(t,n,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(s)if(l<0)for(let u=0;u<c;++u)d[u]=(i-u)/-l;else for(let u=0;u<c;++u)d[u]=(i-u)*l;else if(l<0)for(let u=0;u<c;++u)d[u]=(a+u)/-l;else for(let u=0;u<c;++u)d[u]=(a+u)*l;return d}function C1(t,n,r){return n=+n,t=+t,r=+r,og(t,n,r)[2]}function _1(t,n,r){n=+n,t=+t,r=+r;const s=n<t,a=s?C1(n,t,r):C1(t,n,r);return(s?-1:1)*(a<0?1/-a:a)}function fO(t,n){let r;for(const s of t)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function pO(t,n){let r;for(const s of t)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function vV(t,n,r=0,s=1/0,a){if(n=Math.floor(n),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(t.length-1,s)),!(r<=n&&n<=s))return t;for(a=a===void 0?yV:B1e(a);s>r;){if(s-r>600){const d=s-r+1,u=n-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*p*(d-p)/d)*(u-d/2<0?-1:1),m=Math.max(r,Math.floor(n-u*p/d+h)),g=Math.min(s,Math.floor(n+(d-u)*p/d+h));vV(t,n,m,g,a)}const i=t[n];let l=r,c=s;for(bu(t,r,n),a(t[s],i)>0&&bu(t,r,s);l<c;){for(bu(t,l,c),++l,--c;a(t[l],i)<0;)++l;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?bu(t,r,c):(++c,bu(t,c,s)),c<=n&&(r=c+1),n<=c&&(s=c-1)}return t}function bu(t,n,r){const s=t[n];t[n]=t[r],t[r]=s}function H1e(t,n,r){if(t=Float64Array.from(I1e(t)),!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return pO(t);if(n>=1)return fO(t);var s,a=(s-1)*n,i=Math.floor(a),l=fO(vV(t,i).subarray(0,i+1)),c=pO(t.subarray(i+1));return l+(c-l)*(a-i)}}function W1e(t,n,r=gV){if(!(!(s=t.length)||isNaN(n=+n))){if(n<=0||s<2)return+r(t[0],0,t);if(n>=1)return+r(t[s-1],s-1,t);var s,a=(s-1)*n,i=Math.floor(a),l=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return l+(c-l)*(a-i)}}function K1e(t,n,r){t=+t,n=+n,r=(a=arguments.length)<2?(n=t,t=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((n-t)/r))|0,i=new Array(a);++s<a;)i[s]=t+s*r;return i}function ms(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function xi(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const P1=Symbol("implicit");function E2(){var t=new dO,n=[],r=[],s=P1;function a(i){let l=t.get(i);if(l===void 0){if(s!==P1)return s;t.set(i,l=n.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return n.slice();n=[],t=new dO;for(const l of i)t.has(l)||t.set(l,n.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return E2(n,r).unknown(s)},ms.apply(a,arguments),a}function T2(){var t=E2().unknown(void 0),n=t.domain,r=t.range,s=0,a=1,i,l,c=!1,d=0,u=0,f=.5;delete t.unknown;function p(){var h=n().length,m=a<s,g=m?a:s,y=m?s:a;i=(y-g)/Math.max(1,h-d+u*2),c&&(i=Math.floor(i)),g+=(y-g-i*(h-d))*f,l=i*(1-d),c&&(g=Math.round(g),l=Math.round(l));var v=K1e(h).map(function(b){return g+i*b});return r(m?v.reverse():v)}return t.domain=function(h){return arguments.length?(n(h),p()):n()},t.range=function(h){return arguments.length?([s,a]=h,s=+s,a=+a,p()):[s,a]},t.rangeRound=function(h){return[s,a]=h,s=+s,a=+a,c=!0,p()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(c=!!h,p()):c},t.padding=function(h){return arguments.length?(d=Math.min(1,u=+h),p()):d},t.paddingInner=function(h){return arguments.length?(d=Math.min(1,h),p()):d},t.paddingOuter=function(h){return arguments.length?(u=+h,p()):u},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),p()):f},t.copy=function(){return T2(n(),[s,a]).round(c).paddingInner(d).paddingOuter(u).align(f)},ms.apply(p(),arguments)}function bV(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return bV(n())},t}function q1e(){return bV(T2.apply(null,arguments).paddingInner(1))}function M2(t,n,r){t.prototype=n.prototype=r,r.constructor=t}function wV(t,n){var r=Object.create(t.prototype);for(var s in n)r[s]=n[s];return r}function Tp(){}var ep=.7,lg=1/ep,Xc="\\s*([+-]?\\d+)\\s*",tp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G1e=/^#([0-9a-f]{3,8})$/,Y1e=new RegExp(`^rgb\\(${Xc},${Xc},${Xc}\\)$`),X1e=new RegExp(`^rgb\\(${pa},${pa},${pa}\\)$`),J1e=new RegExp(`^rgba\\(${Xc},${Xc},${Xc},${tp}\\)$`),Q1e=new RegExp(`^rgba\\(${pa},${pa},${pa},${tp}\\)$`),Z1e=new RegExp(`^hsl\\(${tp},${pa},${pa}\\)$`),eNe=new RegExp(`^hsla\\(${tp},${pa},${pa},${tp}\\)$`),hO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M2(Tp,np,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mO,formatHex:mO,formatHex8:tNe,formatHsl:nNe,formatRgb:xO,toString:xO});function mO(){return this.rgb().formatHex()}function tNe(){return this.rgb().formatHex8()}function nNe(){return jV(this).formatHsl()}function xO(){return this.rgb().formatRgb()}function np(t){var n,r;return t=(t+"").trim().toLowerCase(),(n=G1e.exec(t))?(r=n[1].length,n=parseInt(n[1],16),r===6?gO(n):r===3?new hr(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Qh(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Qh(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Y1e.exec(t))?new hr(n[1],n[2],n[3],1):(n=X1e.exec(t))?new hr(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=J1e.exec(t))?Qh(n[1],n[2],n[3],n[4]):(n=Q1e.exec(t))?Qh(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Z1e.exec(t))?bO(n[1],n[2]/100,n[3]/100,1):(n=eNe.exec(t))?bO(n[1],n[2]/100,n[3]/100,n[4]):hO.hasOwnProperty(t)?gO(hO[t]):t==="transparent"?new hr(NaN,NaN,NaN,0):null}function gO(t){return new hr(t>>16&255,t>>8&255,t&255,1)}function Qh(t,n,r,s){return s<=0&&(t=n=r=NaN),new hr(t,n,r,s)}function rNe(t){return t instanceof Tp||(t=np(t)),t?(t=t.rgb(),new hr(t.r,t.g,t.b,t.opacity)):new hr}function A1(t,n,r,s){return arguments.length===1?rNe(t):new hr(t,n,r,s??1)}function hr(t,n,r,s){this.r=+t,this.g=+n,this.b=+r,this.opacity=+s}M2(hr,A1,wV(Tp,{brighter(t){return t=t==null?lg:Math.pow(lg,t),new hr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ep:Math.pow(ep,t),new hr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hr(gl(this.r),gl(this.g),gl(this.b),cg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yO,formatHex:yO,formatHex8:sNe,formatRgb:vO,toString:vO}));function yO(){return`#${nl(this.r)}${nl(this.g)}${nl(this.b)}`}function sNe(){return`#${nl(this.r)}${nl(this.g)}${nl(this.b)}${nl((isNaN(this.opacity)?1:this.opacity)*255)}`}function vO(){const t=cg(this.opacity);return`${t===1?"rgb(":"rgba("}${gl(this.r)}, ${gl(this.g)}, ${gl(this.b)}${t===1?")":`, ${t})`}`}function cg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nl(t){return t=gl(t),(t<16?"0":"")+t.toString(16)}function bO(t,n,r,s){return s<=0?t=n=r=NaN:r<=0||r>=1?t=n=NaN:n<=0&&(t=NaN),new _s(t,n,r,s)}function jV(t){if(t instanceof _s)return new _s(t.h,t.s,t.l,t.opacity);if(t instanceof Tp||(t=np(t)),!t)return new _s;if(t instanceof _s)return t;t=t.rgb();var n=t.r/255,r=t.g/255,s=t.b/255,a=Math.min(n,r,s),i=Math.max(n,r,s),l=NaN,c=i-a,d=(i+a)/2;return c?(n===i?l=(r-s)/c+(r<s)*6:r===i?l=(s-n)/c+2:l=(n-r)/c+4,c/=d<.5?i+a:2-i-a,l*=60):c=d>0&&d<1?0:l,new _s(l,c,d,t.opacity)}function aNe(t,n,r,s){return arguments.length===1?jV(t):new _s(t,n,r,s??1)}function _s(t,n,r,s){this.h=+t,this.s=+n,this.l=+r,this.opacity=+s}M2(_s,aNe,wV(Tp,{brighter(t){return t=t==null?lg:Math.pow(lg,t),new _s(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ep:Math.pow(ep,t),new _s(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*n,a=2*r-s;return new hr(Ab(t>=240?t-240:t+120,a,s),Ab(t,a,s),Ab(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new _s(wO(this.h),Zh(this.s),Zh(this.l),cg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cg(this.opacity);return`${t===1?"hsl(":"hsla("}${wO(this.h)}, ${Zh(this.s)*100}%, ${Zh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wO(t){return t=(t||0)%360,t<0?t+360:t}function Zh(t){return Math.max(0,Math.min(1,t||0))}function Ab(t,n,r){return(t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n)*255}const O2=t=>()=>t;function iNe(t,n){return function(r){return t+r*n}}function oNe(t,n,r){return t=Math.pow(t,r),n=Math.pow(n,r)-t,r=1/r,function(s){return Math.pow(t+s*n,r)}}function lNe(t){return(t=+t)==1?NV:function(n,r){return r-n?oNe(n,r,t):O2(isNaN(n)?r:n)}}function NV(t,n){var r=n-t;return r?iNe(t,r):O2(isNaN(t)?n:t)}const jO=function t(n){var r=lNe(n);function s(a,i){var l=r((a=A1(a)).r,(i=A1(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),u=NV(a.opacity,i.opacity);return function(f){return a.r=l(f),a.g=c(f),a.b=d(f),a.opacity=u(f),a+""}}return s.gamma=t,s}(1);function cNe(t,n){n||(n=[]);var r=t?Math.min(n.length,t.length):0,s=n.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=t[a]*(1-i)+n[a]*i;return s}}function dNe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uNe(t,n){var r=n?n.length:0,s=t?Math.min(r,t.length):0,a=new Array(s),i=new Array(r),l;for(l=0;l<s;++l)a[l]=qd(t[l],n[l]);for(;l<r;++l)i[l]=n[l];return function(c){for(l=0;l<s;++l)i[l]=a[l](c);return i}}function fNe(t,n){var r=new Date;return t=+t,n=+n,function(s){return r.setTime(t*(1-s)+n*s),r}}function dg(t,n){return t=+t,n=+n,function(r){return t*(1-r)+n*r}}function pNe(t,n){var r={},s={},a;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in t?r[a]=qd(t[a],n[a]):s[a]=n[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var E1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eb=new RegExp(E1.source,"g");function hNe(t){return function(){return t}}function mNe(t){return function(n){return t(n)+""}}function xNe(t,n){var r=E1.lastIndex=Eb.lastIndex=0,s,a,i,l=-1,c=[],d=[];for(t=t+"",n=n+"";(s=E1.exec(t))&&(a=Eb.exec(n));)(i=a.index)>r&&(i=n.slice(r,i),c[l]?c[l]+=i:c[++l]=i),(s=s[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,d.push({i:l,x:dg(s,a)})),r=Eb.lastIndex;return r<n.length&&(i=n.slice(r),c[l]?c[l]+=i:c[++l]=i),c.length<2?d[0]?mNe(d[0].x):hNe(n):(n=d.length,function(u){for(var f=0,p;f<n;++f)c[(p=d[f]).i]=p.x(u);return c.join("")})}function qd(t,n){var r=typeof n,s;return n==null||r==="boolean"?O2(n):(r==="number"?dg:r==="string"?(s=np(n))?(n=s,jO):xNe:n instanceof np?jO:n instanceof Date?fNe:dNe(n)?cNe:Array.isArray(n)?uNe:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?pNe:dg)(t,n)}function R2(t,n){return t=+t,n=+n,function(r){return Math.round(t*(1-r)+n*r)}}function gNe(t,n){n===void 0&&(n=t,t=qd);for(var r=0,s=n.length-1,a=n[0],i=new Array(s<0?0:s);r<s;)i[r]=t(a,a=n[++r]);return function(l){var c=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[c](l-c)}}function yNe(t){return function(){return t}}function ug(t){return+t}var NO=[0,1];function tr(t){return t}function T1(t,n){return(n-=t=+t)?function(r){return(r-t)/n}:yNe(isNaN(n)?NaN:.5)}function vNe(t,n){var r;return t>n&&(r=t,t=n,n=r),function(s){return Math.max(t,Math.min(n,s))}}function bNe(t,n,r){var s=t[0],a=t[1],i=n[0],l=n[1];return a<s?(s=T1(a,s),i=r(l,i)):(s=T1(s,a),i=r(i,l)),function(c){return i(s(c))}}function wNe(t,n,r){var s=Math.min(t.length,n.length)-1,a=new Array(s),i=new Array(s),l=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++l<s;)a[l]=T1(t[l],t[l+1]),i[l]=r(n[l],n[l+1]);return function(c){var d=Ep(t,c,1,s)-1;return i[d](a[d](c))}}function Mp(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hv(){var t=NO,n=NO,r=qd,s,a,i,l=tr,c,d,u;function f(){var h=Math.min(t.length,n.length);return l!==tr&&(l=vNe(t[0],t[h-1])),c=h>2?wNe:bNe,d=u=null,p}function p(h){return h==null||isNaN(h=+h)?i:(d||(d=c(t.map(s),n,r)))(s(l(h)))}return p.invert=function(h){return l(a((u||(u=c(n,t.map(s),dg)))(h)))},p.domain=function(h){return arguments.length?(t=Array.from(h,ug),f()):t.slice()},p.range=function(h){return arguments.length?(n=Array.from(h),f()):n.slice()},p.rangeRound=function(h){return n=Array.from(h),r=R2,f()},p.clamp=function(h){return arguments.length?(l=h?!0:tr,f()):l!==tr},p.interpolate=function(h){return arguments.length?(r=h,f()):r},p.unknown=function(h){return arguments.length?(i=h,p):i},function(h,m){return s=h,a=m,f()}}function I2(){return hv()(tr,tr)}function jNe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function fg(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function bd(t){return t=fg(Math.abs(t)),t?t[1]:NaN}function NNe(t,n){return function(r,s){for(var a=r.length,i=[],l=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>s&&(c=Math.max(1,s-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>s));)c=t[l=(l+1)%t.length];return i.reverse().join(n)}}function SNe(t){return function(n){return n.replace(/[0-9]/g,function(r){return t[+r]})}}var kNe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rp(t){if(!(n=kNe.exec(t)))throw new Error("invalid format: "+t);var n;return new D2({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}rp.prototype=D2.prototype;function D2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}D2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CNe(t){e:for(var n=t.length,r=1,s=-1,a;r<n;++r)switch(t[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+t[r])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(a+1):t}var SV;function _Ne(t,n){var r=fg(t,n);if(!r)return t+"";var s=r[0],a=r[1],i=a-(SV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+fg(t,Math.max(0,n+i-1))[0]}function SO(t,n){var r=fg(t,n);if(!r)return t+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const kO={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jNe,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>SO(t*100,n),r:SO,s:_Ne,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function CO(t){return t}var _O=Array.prototype.map,PO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function PNe(t){var n=t.grouping===void 0||t.thousands===void 0?CO:NNe(_O.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?CO:SNe(_O.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function u(p){p=rp(p);var h=p.fill,m=p.align,g=p.sign,y=p.symbol,v=p.zero,b=p.width,w=p.comma,j=p.precision,N=p.trim,S=p.type;S==="n"?(w=!0,S="g"):kO[S]||(j===void 0&&(j=12),N=!0,S="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var _=y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=y==="$"?s:/[%p]/.test(S)?l:"",C=kO[S],P=/[defgprs%]/.test(S);j=j===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function E(M){var T=_,A=k,R,O,I;if(S==="c")A=C(M)+A,M="";else{M=+M;var L=M<0||1/M<0;if(M=isNaN(M)?d:C(Math.abs(M),j),N&&(M=CNe(M)),L&&+M==0&&g!=="+"&&(L=!1),T=(L?g==="("?g:c:g==="-"||g==="("?"":g)+T,A=(S==="s"?PO[8+SV/3]:"")+A+(L&&g==="("?")":""),P){for(R=-1,O=M.length;++R<O;)if(I=M.charCodeAt(R),48>I||I>57){A=(I===46?a+M.slice(R+1):M.slice(R))+A,M=M.slice(0,R);break}}}w&&!v&&(M=n(M,1/0));var D=T.length+M.length+A.length,$=D<b?new Array(b-D+1).join(h):"";switch(w&&v&&(M=n($+M,$.length?b-A.length:1/0),$=""),m){case"<":M=T+M+A+$;break;case"=":M=T+$+M+A;break;case"^":M=$.slice(0,D=$.length>>1)+T+M+A+$.slice(D);break;default:M=$+T+M+A;break}return i(M)}return E.toString=function(){return p+""},E}function f(p,h){var m=u((p=rp(p),p.type="f",p)),g=Math.max(-8,Math.min(8,Math.floor(bd(h)/3)))*3,y=Math.pow(10,-g),v=PO[8+g/3];return function(b){return m(y*b)+v}}return{format:u,formatPrefix:f}}var em,L2,kV;ANe({thousands:",",grouping:[3],currency:["$",""]});function ANe(t){return em=PNe(t),L2=em.format,kV=em.formatPrefix,em}function ENe(t){return Math.max(0,-bd(Math.abs(t)))}function TNe(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bd(n)/3)))*3-bd(Math.abs(t)))}function MNe(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,bd(n)-bd(t))+1}function CV(t,n,r,s){var a=_1(t,n,r),i;switch(s=rp(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(n));return s.precision==null&&!isNaN(i=TNe(a,l))&&(s.precision=i),kV(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=MNe(a,Math.max(Math.abs(t),Math.abs(n))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=ENe(a))&&(s.precision=i-(s.type==="%")*2);break}}return L2(s)}function Oo(t){var n=t.domain;return t.ticks=function(r){var s=n();return k1(s[0],s[s.length-1],r??10)},t.tickFormat=function(r,s){var a=n();return CV(a[0],a[a.length-1],r??10,s)},t.nice=function(r){r==null&&(r=10);var s=n(),a=0,i=s.length-1,l=s[a],c=s[i],d,u,f=10;for(c<l&&(u=l,l=c,c=u,u=a,a=i,i=u);f-- >0;){if(u=C1(l,c,r),u===d)return s[a]=l,s[i]=c,n(s);if(u>0)l=Math.floor(l/u)*u,c=Math.ceil(c/u)*u;else if(u<0)l=Math.ceil(l*u)/u,c=Math.floor(c*u)/u;else break;d=u}return t},t}function _V(){var t=I2();return t.copy=function(){return Mp(t,_V())},ms.apply(t,arguments),Oo(t)}function PV(t){var n;function r(s){return s==null||isNaN(s=+s)?n:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(t=Array.from(s,ug),r):t.slice()},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return PV(t).unknown(n)},t=arguments.length?Array.from(t,ug):[0,1],Oo(r)}function AV(t,n){t=t.slice();var r=0,s=t.length-1,a=t[r],i=t[s],l;return i<a&&(l=r,r=s,s=l,l=a,a=i,i=l),t[r]=n.floor(a),t[s]=n.ceil(i),t}function AO(t){return Math.log(t)}function EO(t){return Math.exp(t)}function ONe(t){return-Math.log(-t)}function RNe(t){return-Math.exp(-t)}function INe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function DNe(t){return t===10?INe:t===Math.E?Math.exp:n=>Math.pow(t,n)}function LNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function TO(t){return(n,r)=>-t(-n,r)}function $2(t){const n=t(AO,EO),r=n.domain;let s=10,a,i;function l(){return a=LNe(s),i=DNe(s),r()[0]<0?(a=TO(a),i=TO(i),t(ONe,RNe)):t(AO,EO),n}return n.base=function(c){return arguments.length?(s=+c,l()):s},n.domain=function(c){return arguments.length?(r(c),l()):r()},n.ticks=c=>{const d=r();let u=d[0],f=d[d.length-1];const p=f<u;p&&([u,f]=[f,u]);let h=a(u),m=a(f),g,y;const v=c==null?10:+c;let b=[];if(!(s%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<s;++g)if(y=h<0?g/i(-h):g*i(h),!(y<u)){if(y>f)break;b.push(y)}}else for(;h<=m;++h)for(g=s-1;g>=1;--g)if(y=h>0?g/i(-h):g*i(h),!(y<u)){if(y>f)break;b.push(y)}b.length*2<v&&(b=k1(u,f,v))}else b=k1(h,m,Math.min(m-h,v)).map(i);return p?b.reverse():b},n.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=s===10?"s":","),typeof d!="function"&&(!(s%1)&&(d=rp(d)).precision==null&&(d.trim=!0),d=L2(d)),c===1/0)return d;const u=Math.max(1,s*c/n.ticks().length);return f=>{let p=f/i(Math.round(a(f)));return p*s<s-.5&&(p*=s),p<=u?d(f):""}},n.nice=()=>r(AV(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),n}function EV(){const t=$2(hv()).domain([1,10]);return t.copy=()=>Mp(t,EV()).base(t.base()),ms.apply(t,arguments),t}function MO(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function OO(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function F2(t){var n=1,r=t(MO(n),OO(n));return r.constant=function(s){return arguments.length?t(MO(n=+s),OO(n)):n},Oo(r)}function TV(){var t=F2(hv());return t.copy=function(){return Mp(t,TV()).constant(t.constant())},ms.apply(t,arguments)}function RO(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function $Ne(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function FNe(t){return t<0?-t*t:t*t}function B2(t){var n=t(tr,tr),r=1;function s(){return r===1?t(tr,tr):r===.5?t($Ne,FNe):t(RO(r),RO(1/r))}return n.exponent=function(a){return arguments.length?(r=+a,s()):r},Oo(n)}function z2(){var t=B2(hv());return t.copy=function(){return Mp(t,z2()).exponent(t.exponent())},ms.apply(t,arguments),t}function BNe(){return z2.apply(null,arguments).exponent(.5)}function IO(t){return Math.sign(t)*t*t}function zNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function MV(){var t=I2(),n=[0,1],r=!1,s;function a(i){var l=zNe(t(i));return isNaN(l)?s:r?Math.round(l):l}return a.invert=function(i){return t.invert(IO(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((n=Array.from(i,ug)).map(IO)),a):n.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return MV(t.domain(),n).round(r).clamp(t.clamp()).unknown(s)},ms.apply(a,arguments),Oo(a)}function OV(){var t=[],n=[],r=[],s;function a(){var l=0,c=Math.max(1,n.length);for(r=new Array(c-1);++l<c;)r[l-1]=W1e(t,l/c);return i}function i(l){return l==null||isNaN(l=+l)?s:n[Ep(r,l)]}return i.invertExtent=function(l){var c=n.indexOf(l);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let c of l)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(so),a()},i.range=function(l){return arguments.length?(n=Array.from(l),a()):n.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return OV().domain(t).range(n).unknown(s)},ms.apply(i,arguments)}function RV(){var t=0,n=1,r=1,s=[.5],a=[0,1],i;function l(d){return d!=null&&d<=d?a[Ep(s,d,0,r)]:i}function c(){var d=-1;for(s=new Array(r);++d<r;)s[d]=((d+1)*n-(d-r)*t)/(r+1);return l}return l.domain=function(d){return arguments.length?([t,n]=d,t=+t,n=+n,c()):[t,n]},l.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},l.invertExtent=function(d){var u=a.indexOf(d);return u<0?[NaN,NaN]:u<1?[t,s[0]]:u>=r?[s[r-1],n]:[s[u-1],s[u]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return s.slice()},l.copy=function(){return RV().domain([t,n]).range(a).unknown(i)},ms.apply(Oo(l),arguments)}function IV(){var t=[.5],n=[0,1],r,s=1;function a(i){return i!=null&&i<=i?n[Ep(t,i,0,s)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),s=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(i){return arguments.length?(n=Array.from(i),s=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(i){var l=n.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return IV().domain(t).range(n).unknown(r)},ms.apply(a,arguments)}const Tb=new Date,Mb=new Date;function on(t,n,r,s){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),n(i,1),t(i),i),a.round=i=>{const l=a(i),c=a.ceil(i);return i-l<c-i?l:c},a.offset=(i,l)=>(n(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<l)||!(c>0))return d;let u;do d.push(u=new Date(+i)),n(i,c),t(i);while(u<i&&i<l);return d},a.filter=i=>on(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;n(l,-1),!i(l););else for(;--c>=0;)for(;n(l,1),!i(l););}),r&&(a.count=(i,l)=>(Tb.setTime(+i),Mb.setTime(+l),t(Tb),t(Mb),Math.floor(r(Tb,Mb))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?l=>s(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const pg=on(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);pg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?on(n=>{n.setTime(Math.floor(n/t)*t)},(n,r)=>{n.setTime(+n+r*t)},(n,r)=>(r-n)/t):pg);pg.range;const za=1e3,ss=za*60,Va=ss*60,ii=Va*24,V2=ii*7,DO=ii*30,Ob=ii*365,rl=on(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*za)},(t,n)=>(n-t)/za,t=>t.getUTCSeconds());rl.range;const U2=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*za)},(t,n)=>{t.setTime(+t+n*ss)},(t,n)=>(n-t)/ss,t=>t.getMinutes());U2.range;const H2=on(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*ss)},(t,n)=>(n-t)/ss,t=>t.getUTCMinutes());H2.range;const W2=on(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*za-t.getMinutes()*ss)},(t,n)=>{t.setTime(+t+n*Va)},(t,n)=>(n-t)/Va,t=>t.getHours());W2.range;const K2=on(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*Va)},(t,n)=>(n-t)/Va,t=>t.getUTCHours());K2.range;const Op=on(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ss)/ii,t=>t.getDate()-1);Op.range;const mv=on(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ii,t=>t.getUTCDate()-1);mv.range;const DV=on(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/ii,t=>Math.floor(t/ii));DV.range;function Zl(t){return on(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*ss)/V2)}const xv=Zl(0),hg=Zl(1),VNe=Zl(2),UNe=Zl(3),wd=Zl(4),HNe=Zl(5),WNe=Zl(6);xv.range;hg.range;VNe.range;UNe.range;wd.range;HNe.range;WNe.range;function ec(t){return on(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/V2)}const gv=ec(0),mg=ec(1),KNe=ec(2),qNe=ec(3),jd=ec(4),GNe=ec(5),YNe=ec(6);gv.range;mg.range;KNe.range;qNe.range;jd.range;GNe.range;YNe.range;const q2=on(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());q2.range;const G2=on(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());G2.range;const oi=on(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());oi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*t)});oi.range;const li=on(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());li.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:on(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*t)});li.range;function LV(t,n,r,s,a,i){const l=[[rl,1,za],[rl,5,5*za],[rl,15,15*za],[rl,30,30*za],[i,1,ss],[i,5,5*ss],[i,15,15*ss],[i,30,30*ss],[a,1,Va],[a,3,3*Va],[a,6,6*Va],[a,12,12*Va],[s,1,ii],[s,2,2*ii],[r,1,V2],[n,1,DO],[n,3,3*DO],[t,1,Ob]];function c(u,f,p){const h=f<u;h&&([u,f]=[f,u]);const m=p&&typeof p.range=="function"?p:d(u,f,p),g=m?m.range(u,+f+1):[];return h?g.reverse():g}function d(u,f,p){const h=Math.abs(f-u)/p,m=A2(([,,v])=>v).right(l,h);if(m===l.length)return t.every(_1(u/Ob,f/Ob,p));if(m===0)return pg.every(Math.max(_1(u,f,p),1));const[g,y]=l[h/l[m-1][2]<l[m][2]/h?m-1:m];return g.every(y)}return[c,d]}const[XNe,JNe]=LV(li,G2,gv,DV,K2,H2),[QNe,ZNe]=LV(oi,q2,xv,Op,W2,U2);function Rb(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ib(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wu(t,n,r){return{y:t,m:n,d:r,H:0,M:0,S:0,L:0}}function eSe(t){var n=t.dateTime,r=t.date,s=t.time,a=t.periods,i=t.days,l=t.shortDays,c=t.months,d=t.shortMonths,u=ju(a),f=Nu(a),p=ju(i),h=Nu(i),m=ju(l),g=Nu(l),y=ju(c),v=Nu(c),b=ju(d),w=Nu(d),j={a:L,A:D,b:$,B:F,c:null,d:VO,e:VO,f:NSe,g:OSe,G:ISe,H:bSe,I:wSe,j:jSe,L:$V,m:SSe,M:kSe,p:K,q:J,Q:WO,s:KO,S:CSe,u:_Se,U:PSe,V:ASe,w:ESe,W:TSe,x:null,X:null,y:MSe,Y:RSe,Z:DSe,"%":HO},N={a:Y,A:ee,b:Q,B:ue,c:null,d:UO,e:UO,f:BSe,g:XSe,G:QSe,H:LSe,I:$Se,j:FSe,L:BV,m:zSe,M:VSe,p:G,q:ne,Q:WO,s:KO,S:USe,u:HSe,U:WSe,V:KSe,w:qSe,W:GSe,x:null,X:null,y:YSe,Y:JSe,Z:ZSe,"%":HO},S={a:E,A:M,b:T,B:A,c:R,d:BO,e:BO,f:xSe,g:FO,G:$O,H:zO,I:zO,j:fSe,L:mSe,m:uSe,M:pSe,p:P,q:dSe,Q:ySe,s:vSe,S:hSe,u:aSe,U:iSe,V:oSe,w:sSe,W:lSe,x:O,X:I,y:FO,Y:$O,Z:cSe,"%":gSe};j.x=_(r,j),j.X=_(s,j),j.c=_(n,j),N.x=_(r,N),N.X=_(s,N),N.c=_(n,N);function _(z,te){return function(oe){var H=[],Fe=-1,Te=0,X=z.length,je,_e,it;for(oe instanceof Date||(oe=new Date(+oe));++Fe<X;)z.charCodeAt(Fe)===37&&(H.push(z.slice(Te,Fe)),(_e=LO[je=z.charAt(++Fe)])!=null?je=z.charAt(++Fe):_e=je==="e"?" ":"0",(it=te[je])&&(je=it(oe,_e)),H.push(je),Te=Fe+1);return H.push(z.slice(Te,Fe)),H.join("")}}function k(z,te){return function(oe){var H=wu(1900,void 0,1),Fe=C(H,z,oe+="",0),Te,X;if(Fe!=oe.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(te&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(Te=Ib(wu(H.y,0,1)),X=Te.getUTCDay(),Te=X>4||X===0?mg.ceil(Te):mg(Te),Te=mv.offset(Te,(H.V-1)*7),H.y=Te.getUTCFullYear(),H.m=Te.getUTCMonth(),H.d=Te.getUTCDate()+(H.w+6)%7):(Te=Rb(wu(H.y,0,1)),X=Te.getDay(),Te=X>4||X===0?hg.ceil(Te):hg(Te),Te=Op.offset(Te,(H.V-1)*7),H.y=Te.getFullYear(),H.m=Te.getMonth(),H.d=Te.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),X="Z"in H?Ib(wu(H.y,0,1)).getUTCDay():Rb(wu(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(X+5)%7:H.w+H.U*7-(X+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,Ib(H)):Rb(H)}}function C(z,te,oe,H){for(var Fe=0,Te=te.length,X=oe.length,je,_e;Fe<Te;){if(H>=X)return-1;if(je=te.charCodeAt(Fe++),je===37){if(je=te.charAt(Fe++),_e=S[je in LO?te.charAt(Fe++):je],!_e||(H=_e(z,oe,H))<0)return-1}else if(je!=oe.charCodeAt(H++))return-1}return H}function P(z,te,oe){var H=u.exec(te.slice(oe));return H?(z.p=f.get(H[0].toLowerCase()),oe+H[0].length):-1}function E(z,te,oe){var H=m.exec(te.slice(oe));return H?(z.w=g.get(H[0].toLowerCase()),oe+H[0].length):-1}function M(z,te,oe){var H=p.exec(te.slice(oe));return H?(z.w=h.get(H[0].toLowerCase()),oe+H[0].length):-1}function T(z,te,oe){var H=b.exec(te.slice(oe));return H?(z.m=w.get(H[0].toLowerCase()),oe+H[0].length):-1}function A(z,te,oe){var H=y.exec(te.slice(oe));return H?(z.m=v.get(H[0].toLowerCase()),oe+H[0].length):-1}function R(z,te,oe){return C(z,n,te,oe)}function O(z,te,oe){return C(z,r,te,oe)}function I(z,te,oe){return C(z,s,te,oe)}function L(z){return l[z.getDay()]}function D(z){return i[z.getDay()]}function $(z){return d[z.getMonth()]}function F(z){return c[z.getMonth()]}function K(z){return a[+(z.getHours()>=12)]}function J(z){return 1+~~(z.getMonth()/3)}function Y(z){return l[z.getUTCDay()]}function ee(z){return i[z.getUTCDay()]}function Q(z){return d[z.getUTCMonth()]}function ue(z){return c[z.getUTCMonth()]}function G(z){return a[+(z.getUTCHours()>=12)]}function ne(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var te=_(z+="",j);return te.toString=function(){return z},te},parse:function(z){var te=k(z+="",!1);return te.toString=function(){return z},te},utcFormat:function(z){var te=_(z+="",N);return te.toString=function(){return z},te},utcParse:function(z){var te=k(z+="",!0);return te.toString=function(){return z},te}}}var LO={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,tSe=/^%/,nSe=/[\\^$*+?|[\]().{}]/g;function Ge(t,n,r){var s=t<0?"-":"",a=(s?-t:t)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(n)+a:a)}function rSe(t){return t.replace(nSe,"\\$&")}function ju(t){return new RegExp("^(?:"+t.map(rSe).join("|")+")","i")}function Nu(t){return new Map(t.map((n,r)=>[n.toLowerCase(),r]))}function sSe(t,n,r){var s=gn.exec(n.slice(r,r+1));return s?(t.w=+s[0],r+s[0].length):-1}function aSe(t,n,r){var s=gn.exec(n.slice(r,r+1));return s?(t.u=+s[0],r+s[0].length):-1}function iSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.U=+s[0],r+s[0].length):-1}function oSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.V=+s[0],r+s[0].length):-1}function lSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.W=+s[0],r+s[0].length):-1}function $O(t,n,r){var s=gn.exec(n.slice(r,r+4));return s?(t.y=+s[0],r+s[0].length):-1}function FO(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function cSe(t,n,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function dSe(t,n,r){var s=gn.exec(n.slice(r,r+1));return s?(t.q=s[0]*3-3,r+s[0].length):-1}function uSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.m=s[0]-1,r+s[0].length):-1}function BO(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.d=+s[0],r+s[0].length):-1}function fSe(t,n,r){var s=gn.exec(n.slice(r,r+3));return s?(t.m=0,t.d=+s[0],r+s[0].length):-1}function zO(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.H=+s[0],r+s[0].length):-1}function pSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.M=+s[0],r+s[0].length):-1}function hSe(t,n,r){var s=gn.exec(n.slice(r,r+2));return s?(t.S=+s[0],r+s[0].length):-1}function mSe(t,n,r){var s=gn.exec(n.slice(r,r+3));return s?(t.L=+s[0],r+s[0].length):-1}function xSe(t,n,r){var s=gn.exec(n.slice(r,r+6));return s?(t.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function gSe(t,n,r){var s=tSe.exec(n.slice(r,r+1));return s?r+s[0].length:-1}function ySe(t,n,r){var s=gn.exec(n.slice(r));return s?(t.Q=+s[0],r+s[0].length):-1}function vSe(t,n,r){var s=gn.exec(n.slice(r));return s?(t.s=+s[0],r+s[0].length):-1}function VO(t,n){return Ge(t.getDate(),n,2)}function bSe(t,n){return Ge(t.getHours(),n,2)}function wSe(t,n){return Ge(t.getHours()%12||12,n,2)}function jSe(t,n){return Ge(1+Op.count(oi(t),t),n,3)}function $V(t,n){return Ge(t.getMilliseconds(),n,3)}function NSe(t,n){return $V(t,n)+"000"}function SSe(t,n){return Ge(t.getMonth()+1,n,2)}function kSe(t,n){return Ge(t.getMinutes(),n,2)}function CSe(t,n){return Ge(t.getSeconds(),n,2)}function _Se(t){var n=t.getDay();return n===0?7:n}function PSe(t,n){return Ge(xv.count(oi(t)-1,t),n,2)}function FV(t){var n=t.getDay();return n>=4||n===0?wd(t):wd.ceil(t)}function ASe(t,n){return t=FV(t),Ge(wd.count(oi(t),t)+(oi(t).getDay()===4),n,2)}function ESe(t){return t.getDay()}function TSe(t,n){return Ge(hg.count(oi(t)-1,t),n,2)}function MSe(t,n){return Ge(t.getFullYear()%100,n,2)}function OSe(t,n){return t=FV(t),Ge(t.getFullYear()%100,n,2)}function RSe(t,n){return Ge(t.getFullYear()%1e4,n,4)}function ISe(t,n){var r=t.getDay();return t=r>=4||r===0?wd(t):wd.ceil(t),Ge(t.getFullYear()%1e4,n,4)}function DSe(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Ge(n/60|0,"0",2)+Ge(n%60,"0",2)}function UO(t,n){return Ge(t.getUTCDate(),n,2)}function LSe(t,n){return Ge(t.getUTCHours(),n,2)}function $Se(t,n){return Ge(t.getUTCHours()%12||12,n,2)}function FSe(t,n){return Ge(1+mv.count(li(t),t),n,3)}function BV(t,n){return Ge(t.getUTCMilliseconds(),n,3)}function BSe(t,n){return BV(t,n)+"000"}function zSe(t,n){return Ge(t.getUTCMonth()+1,n,2)}function VSe(t,n){return Ge(t.getUTCMinutes(),n,2)}function USe(t,n){return Ge(t.getUTCSeconds(),n,2)}function HSe(t){var n=t.getUTCDay();return n===0?7:n}function WSe(t,n){return Ge(gv.count(li(t)-1,t),n,2)}function zV(t){var n=t.getUTCDay();return n>=4||n===0?jd(t):jd.ceil(t)}function KSe(t,n){return t=zV(t),Ge(jd.count(li(t),t)+(li(t).getUTCDay()===4),n,2)}function qSe(t){return t.getUTCDay()}function GSe(t,n){return Ge(mg.count(li(t)-1,t),n,2)}function YSe(t,n){return Ge(t.getUTCFullYear()%100,n,2)}function XSe(t,n){return t=zV(t),Ge(t.getUTCFullYear()%100,n,2)}function JSe(t,n){return Ge(t.getUTCFullYear()%1e4,n,4)}function QSe(t,n){var r=t.getUTCDay();return t=r>=4||r===0?jd(t):jd.ceil(t),Ge(t.getUTCFullYear()%1e4,n,4)}function ZSe(){return"+0000"}function HO(){return"%"}function WO(t){return+t}function KO(t){return Math.floor(+t/1e3)}var lc,VV,UV;eke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eke(t){return lc=eSe(t),VV=lc.format,lc.parse,UV=lc.utcFormat,lc.utcParse,lc}function tke(t){return new Date(t)}function nke(t){return t instanceof Date?+t:+new Date(+t)}function Y2(t,n,r,s,a,i,l,c,d,u){var f=I2(),p=f.invert,h=f.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),w=u("%b %d"),j=u("%B"),N=u("%Y");function S(_){return(d(_)<_?m:c(_)<_?g:l(_)<_?y:i(_)<_?v:s(_)<_?a(_)<_?b:w:r(_)<_?j:N)(_)}return f.invert=function(_){return new Date(p(_))},f.domain=function(_){return arguments.length?h(Array.from(_,nke)):h().map(tke)},f.ticks=function(_){var k=h();return t(k[0],k[k.length-1],_??10)},f.tickFormat=function(_,k){return k==null?S:u(k)},f.nice=function(_){var k=h();return(!_||typeof _.range!="function")&&(_=n(k[0],k[k.length-1],_??10)),_?h(AV(k,_)):f},f.copy=function(){return Mp(f,Y2(t,n,r,s,a,i,l,c,d,u))},f}function rke(){return ms.apply(Y2(QNe,ZNe,oi,q2,xv,Op,W2,U2,rl,VV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ske(){return ms.apply(Y2(XNe,JNe,li,G2,gv,mv,K2,H2,rl,UV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yv(){var t=0,n=1,r,s,a,i,l=tr,c=!1,d;function u(p){return p==null||isNaN(p=+p)?d:l(a===0?.5:(p=(i(p)-r)*a,c?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([t,n]=p,r=i(t=+t),s=i(n=+n),a=r===s?0:1/(s-r),u):[t,n]},u.clamp=function(p){return arguments.length?(c=!!p,u):c},u.interpolator=function(p){return arguments.length?(l=p,u):l};function f(p){return function(h){var m,g;return arguments.length?([m,g]=h,l=p(m,g),u):[l(0),l(1)]}}return u.range=f(qd),u.rangeRound=f(R2),u.unknown=function(p){return arguments.length?(d=p,u):d},function(p){return i=p,r=p(t),s=p(n),a=r===s?0:1/(s-r),u}}function Ro(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function HV(){var t=Oo(yv()(tr));return t.copy=function(){return Ro(t,HV())},xi.apply(t,arguments)}function WV(){var t=$2(yv()).domain([1,10]);return t.copy=function(){return Ro(t,WV()).base(t.base())},xi.apply(t,arguments)}function KV(){var t=F2(yv());return t.copy=function(){return Ro(t,KV()).constant(t.constant())},xi.apply(t,arguments)}function X2(){var t=B2(yv());return t.copy=function(){return Ro(t,X2()).exponent(t.exponent())},xi.apply(t,arguments)}function ake(){return X2.apply(null,arguments).exponent(.5)}function qV(){var t=[],n=tr;function r(s){if(s!=null&&!isNaN(s=+s))return n((Ep(t,s,1)-1)/(t.length-1))}return r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(so),r},r.interpolator=function(s){return arguments.length?(n=s,r):n},r.range=function(){return t.map((s,a)=>n(a/(t.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>H1e(t,i/s))},r.copy=function(){return qV(n).domain(t)},xi.apply(r,arguments)}function vv(){var t=0,n=.5,r=1,s=1,a,i,l,c,d,u=tr,f,p=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-i)*(s*y<s*i?c:d),u(p?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,n,r]=y,a=f(t=+t),i=f(n=+n),l=f(r=+r),c=a===i?0:.5/(i-a),d=i===l?0:.5/(l-i),s=i<a?-1:1,m):[t,n,r]},m.clamp=function(y){return arguments.length?(p=!!y,m):p},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(v){var b,w,j;return arguments.length?([b,w,j]=v,u=gNe(y,[b,w,j]),m):[u(0),u(.5),u(1)]}}return m.range=g(qd),m.rangeRound=g(R2),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return f=y,a=y(t),i=y(n),l=y(r),c=a===i?0:.5/(i-a),d=i===l?0:.5/(l-i),s=i<a?-1:1,m}}function GV(){var t=Oo(vv()(tr));return t.copy=function(){return Ro(t,GV())},xi.apply(t,arguments)}function YV(){var t=$2(vv()).domain([.1,1,10]);return t.copy=function(){return Ro(t,YV()).base(t.base())},xi.apply(t,arguments)}function XV(){var t=F2(vv());return t.copy=function(){return Ro(t,XV()).constant(t.constant())},xi.apply(t,arguments)}function J2(){var t=B2(vv());return t.copy=function(){return Ro(t,J2()).exponent(t.exponent())},xi.apply(t,arguments)}function ike(){return J2.apply(null,arguments).exponent(.5)}const Fu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:T2,scaleDiverging:GV,scaleDivergingLog:YV,scaleDivergingPow:J2,scaleDivergingSqrt:ike,scaleDivergingSymlog:XV,scaleIdentity:PV,scaleImplicit:P1,scaleLinear:_V,scaleLog:EV,scaleOrdinal:E2,scalePoint:q1e,scalePow:z2,scaleQuantile:OV,scaleQuantize:RV,scaleRadial:MV,scaleSequential:HV,scaleSequentialLog:WV,scaleSequentialPow:X2,scaleSequentialQuantile:qV,scaleSequentialSqrt:ake,scaleSequentialSymlog:KV,scaleSqrt:BNe,scaleSymlog:TV,scaleThreshold:IV,scaleTime:rke,scaleUtc:ske,tickFormat:CV},Symbol.toStringTag,{value:"Module"}));var Io=t=>t.chartData,Q2=U([Io],t=>{var n=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:n,dataStartIndex:0}}),Z2=(t,n,r,s)=>s?Q2(t):Io(t);function $l(t){if(Array.isArray(t)&&t.length===2){var[n,r]=t;if(Bt(n)&&Bt(r))return!0}return!1}function qO(t,n,r){return r?t:[Math.min(t[0],n[0]),Math.max(t[1],n[1])]}function JV(t,n){if(n&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,s]=t,a,i;if(Bt(r))a=r;else if(typeof r=="function")return;if(Bt(s))i=s;else if(typeof s=="function")return;var l=[a,i];if($l(l))return l}}function oke(t,n,r){if(!(!r&&n==null)){if(typeof t=="function"&&n!=null)try{var s=t(n,r);if($l(s))return qO(s,n,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,i]=t,l,c;if(a==="auto")n!=null&&(l=Math.min(...n));else if(Pe(a))l=a;else if(typeof a=="function")try{n!=null&&(l=a(n==null?void 0:n[0]))}catch{}else if(typeof a=="string"&&DM.test(a)){var d=DM.exec(a);if(d==null||n==null)l=void 0;else{var u=+d[1];l=n[0]-u}}else l=n==null?void 0:n[0];if(i==="auto")n!=null&&(c=Math.max(...n));else if(Pe(i))c=i;else if(typeof i=="function")try{n!=null&&(c=i(n==null?void 0:n[1]))}catch{}else if(typeof i=="string"&&LM.test(i)){var f=LM.exec(i);if(f==null||n==null)c=void 0;else{var p=+f[1];c=n[1]+p}}else c=n==null?void 0:n[1];var h=[l,c];if($l(h))return n==null?h:qO(h,n,r)}}}var Gd=1e9,lke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tC,xt=!0,fs="[DecimalError] ",yl=fs+"Invalid argument: ",eC=fs+"Exponent out of range: ",Yd=Math.floor,Ko=Math.pow,cke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mr,un=1e7,lt=7,QV=9007199254740991,xg=Yd(QV/lt),he={};he.absoluteValue=he.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};he.comparedTo=he.cmp=function(t){var n,r,s,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(s=i.d.length,a=t.d.length,n=0,r=s<a?s:a;n<r;++n)if(i.d[n]!==t.d[n])return i.d[n]>t.d[n]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};he.decimalPlaces=he.dp=function(){var t=this,n=t.d.length-1,r=(n-t.e)*lt;if(n=t.d[n],n)for(;n%10==0;n/=10)r--;return r<0?0:r};he.dividedBy=he.div=function(t){return Wa(this,new this.constructor(t))};he.dividedToIntegerBy=he.idiv=function(t){var n=this,r=n.constructor;return nt(Wa(n,new r(t),0,1),r.precision)};he.equals=he.eq=function(t){return!this.cmp(t)};he.exponent=function(){return Kt(this)};he.greaterThan=he.gt=function(t){return this.cmp(t)>0};he.greaterThanOrEqualTo=he.gte=function(t){return this.cmp(t)>=0};he.isInteger=he.isint=function(){return this.e>this.d.length-2};he.isNegative=he.isneg=function(){return this.s<0};he.isPositive=he.ispos=function(){return this.s>0};he.isZero=function(){return this.s===0};he.lessThan=he.lt=function(t){return this.cmp(t)<0};he.lessThanOrEqualTo=he.lte=function(t){return this.cmp(t)<1};he.logarithm=he.log=function(t){var n,r=this,s=r.constructor,a=s.precision,i=a+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(Mr))throw Error(fs+"NaN");if(r.s<1)throw Error(fs+(r.s?"NaN":"-Infinity"));return r.eq(Mr)?new s(0):(xt=!1,n=Wa(sp(r,i),sp(t,i),i),xt=!0,nt(n,a))};he.minus=he.sub=function(t){var n=this;return t=new n.constructor(t),n.s==t.s?t7(n,t):ZV(n,(t.s=-t.s,t))};he.modulo=he.mod=function(t){var n,r=this,s=r.constructor,a=s.precision;if(t=new s(t),!t.s)throw Error(fs+"NaN");return r.s?(xt=!1,n=Wa(r,t,0,1).times(t),xt=!0,r.minus(n)):nt(new s(r),a)};he.naturalExponential=he.exp=function(){return e7(this)};he.naturalLogarithm=he.ln=function(){return sp(this)};he.negated=he.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};he.plus=he.add=function(t){var n=this;return t=new n.constructor(t),n.s==t.s?ZV(n,t):t7(n,(t.s=-t.s,t))};he.precision=he.sd=function(t){var n,r,s,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yl+t);if(n=Kt(a)+1,s=a.d.length-1,r=s*lt+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return t&&n>r?n:r};he.squareRoot=he.sqrt=function(){var t,n,r,s,a,i,l,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(fs+"NaN")}for(t=Kt(c),xt=!1,a=Math.sqrt(+c),a==0||a==1/0?(n=aa(c.d),(n.length+t)%2==0&&(n+="0"),a=Math.sqrt(n),t=Yd((t+1)/2)-(t<0||t%2),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),s=new d(n)):s=new d(a.toString()),r=d.precision,a=l=r+3;;)if(i=s,s=i.plus(Wa(c,i,l+2)).times(.5),aa(i.d).slice(0,l)===(n=aa(s.d)).slice(0,l)){if(n=n.slice(l-3,l+1),a==l&&n=="4999"){if(nt(i,r+1,0),i.times(i).eq(c)){s=i;break}}else if(n!="9999")break;l+=4}return xt=!0,nt(s,r)};he.times=he.mul=function(t){var n,r,s,a,i,l,c,d,u,f=this,p=f.constructor,h=f.d,m=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,r=f.e+t.e,d=h.length,u=m.length,d<u&&(i=h,h=m,m=i,l=d,d=u,u=l),i=[],l=d+u,s=l;s--;)i.push(0);for(s=u;--s>=0;){for(n=0,a=d+s;a>s;)c=i[a]+m[s]*h[a-s-1]+n,i[a--]=c%un|0,n=c/un|0;i[a]=(i[a]+n)%un|0}for(;!i[--l];)i.pop();return n?++r:i.shift(),t.d=i,t.e=r,xt?nt(t,p.precision):t};he.toDecimalPlaces=he.todp=function(t,n){var r=this,s=r.constructor;return r=new s(r),t===void 0?r:(wa(t,0,Gd),n===void 0?n=s.rounding:wa(n,0,8),nt(r,t+Kt(r)+1,n))};he.toExponential=function(t,n){var r,s=this,a=s.constructor;return t===void 0?r=Fl(s,!0):(wa(t,0,Gd),n===void 0?n=a.rounding:wa(n,0,8),s=nt(new a(s),t+1,n),r=Fl(s,!0,t+1)),r};he.toFixed=function(t,n){var r,s,a=this,i=a.constructor;return t===void 0?Fl(a):(wa(t,0,Gd),n===void 0?n=i.rounding:wa(n,0,8),s=nt(new i(a),t+Kt(a)+1,n),r=Fl(s.abs(),!1,t+Kt(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};he.toInteger=he.toint=function(){var t=this,n=t.constructor;return nt(new n(t),Kt(t)+1,n.rounding)};he.toNumber=function(){return+this};he.toPower=he.pow=function(t){var n,r,s,a,i,l,c=this,d=c.constructor,u=12,f=+(t=new d(t));if(!t.s)return new d(Mr);if(c=new d(c),!c.s){if(t.s<1)throw Error(fs+"Infinity");return c}if(c.eq(Mr))return c;if(s=d.precision,t.eq(Mr))return nt(c,s);if(n=t.e,r=t.d.length-1,l=n>=r,i=c.s,l){if((r=f<0?-f:f)<=QV){for(a=new d(Mr),n=Math.ceil(s/lt+4),xt=!1;r%2&&(a=a.times(c),YO(a.d,n)),r=Yd(r/2),r!==0;)c=c.times(c),YO(c.d,n);return xt=!0,t.s<0?new d(Mr).div(a):nt(a,s)}}else if(i<0)throw Error(fs+"NaN");return i=i<0&&t.d[Math.max(n,r)]&1?-1:1,c.s=1,xt=!1,a=t.times(sp(c,s+u)),xt=!0,a=e7(a),a.s=i,a};he.toPrecision=function(t,n){var r,s,a=this,i=a.constructor;return t===void 0?(r=Kt(a),s=Fl(a,r<=i.toExpNeg||r>=i.toExpPos)):(wa(t,1,Gd),n===void 0?n=i.rounding:wa(n,0,8),a=nt(new i(a),t,n),r=Kt(a),s=Fl(a,t<=r||r<=i.toExpNeg,t)),s};he.toSignificantDigits=he.tosd=function(t,n){var r=this,s=r.constructor;return t===void 0?(t=s.precision,n=s.rounding):(wa(t,1,Gd),n===void 0?n=s.rounding:wa(n,0,8)),nt(new s(r),t,n)};he.toString=he.valueOf=he.val=he.toJSON=he[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,n=Kt(t),r=t.constructor;return Fl(t,n<=r.toExpNeg||n>=r.toExpPos)};function ZV(t,n){var r,s,a,i,l,c,d,u,f=t.constructor,p=f.precision;if(!t.s||!n.s)return n.s||(n=new f(t)),xt?nt(n,p):n;if(d=t.d,u=n.d,l=t.e,a=n.e,d=d.slice(),i=l-a,i){for(i<0?(s=d,i=-i,c=u.length):(s=u,a=l,c=d.length),l=Math.ceil(p/lt),c=l>c?l+1:c+1,i>c&&(i=c,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(c=d.length,i=u.length,c-i<0&&(i=c,s=u,u=d,d=s),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/un|0,d[i]%=un;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return n.d=d,n.e=a,xt?nt(n,p):n}function wa(t,n,r){if(t!==~~t||t<n||t>r)throw Error(yl+t)}function aa(t){var n,r,s,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,n=1;n<a;n++)s=t[n]+"",r=lt-s.length,r&&(i+=Oi(r)),i+=s;l=t[n],s=l+"",r=lt-s.length,r&&(i+=Oi(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Wa=function(){function t(s,a){var i,l=0,c=s.length;for(s=s.slice();c--;)i=s[c]*a+l,s[c]=i%un|0,l=i/un|0;return l&&s.unshift(l),s}function n(s,a,i,l){var c,d;if(i!=l)d=i>l?1:-1;else for(c=d=0;c<i;c++)if(s[c]!=a[c]){d=s[c]>a[c]?1:-1;break}return d}function r(s,a,i){for(var l=0;i--;)s[i]-=l,l=s[i]<a[i]?1:0,s[i]=l*un+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,l){var c,d,u,f,p,h,m,g,y,v,b,w,j,N,S,_,k,C,P=s.constructor,E=s.s==a.s?1:-1,M=s.d,T=a.d;if(!s.s)return new P(s);if(!a.s)throw Error(fs+"Division by zero");for(d=s.e-a.e,k=T.length,S=M.length,m=new P(E),g=m.d=[],u=0;T[u]==(M[u]||0);)++u;if(T[u]>(M[u]||0)&&--d,i==null?w=i=P.precision:l?w=i+(Kt(s)-Kt(a))+1:w=i,w<0)return new P(0);if(w=w/lt+2|0,u=0,k==1)for(f=0,T=T[0],w++;(u<S||f)&&w--;u++)j=f*un+(M[u]||0),g[u]=j/T|0,f=j%T|0;else{for(f=un/(T[0]+1)|0,f>1&&(T=t(T,f),M=t(M,f),k=T.length,S=M.length),N=k,y=M.slice(0,k),v=y.length;v<k;)y[v++]=0;C=T.slice(),C.unshift(0),_=T[0],T[1]>=un/2&&++_;do f=0,c=n(T,y,k,v),c<0?(b=y[0],k!=v&&(b=b*un+(y[1]||0)),f=b/_|0,f>1?(f>=un&&(f=un-1),p=t(T,f),h=p.length,v=y.length,c=n(p,y,h,v),c==1&&(f--,r(p,k<h?C:T,h))):(f==0&&(c=f=1),p=T.slice()),h=p.length,h<v&&p.unshift(0),r(y,p,v),c==-1&&(v=y.length,c=n(T,y,k,v),c<1&&(f++,r(y,k<v?C:T,v))),v=y.length):c===0&&(f++,y=[0]),g[u++]=f,c&&y[0]?y[v++]=M[N]||0:(y=[M[N]],v=1);while((N++<S||y[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=d,nt(m,l?i+Kt(m)+1:i)}}();function e7(t,n){var r,s,a,i,l,c,d=0,u=0,f=t.constructor,p=f.precision;if(Kt(t)>16)throw Error(eC+Kt(t));if(!t.s)return new f(Mr);for(xt=!1,c=p,l=new f(.03125);t.abs().gte(.1);)t=t.times(l),u+=5;for(s=Math.log(Ko(2,u))/Math.LN10*2+5|0,c+=s,r=a=i=new f(Mr),f.precision=c;;){if(a=nt(a.times(t),c),r=r.times(++d),l=i.plus(Wa(a,r,c)),aa(l.d).slice(0,c)===aa(i.d).slice(0,c)){for(;u--;)i=nt(i.times(i),c);return f.precision=p,n==null?(xt=!0,nt(i,p)):i}i=l}}function Kt(t){for(var n=t.e*lt,r=t.d[0];r>=10;r/=10)n++;return n}function Db(t,n,r){if(n>t.LN10.sd())throw xt=!0,r&&(t.precision=r),Error(fs+"LN10 precision limit exceeded");return nt(new t(t.LN10),n)}function Oi(t){for(var n="";t--;)n+="0";return n}function sp(t,n){var r,s,a,i,l,c,d,u,f,p=1,h=10,m=t,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(fs+(m.s?"NaN":"-Infinity"));if(m.eq(Mr))return new y(0);if(n==null?(xt=!1,u=v):u=n,m.eq(10))return n==null&&(xt=!0),Db(y,u);if(u+=h,y.precision=u,r=aa(g),s=r.charAt(0),i=Kt(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)m=m.times(t),r=aa(m.d),s=r.charAt(0),p++;i=Kt(m),s>1?(m=new y("0."+r),i++):m=new y(s+"."+r.slice(1))}else return d=Db(y,u+2,v).times(i+""),m=sp(new y(s+"."+r.slice(1)),u-h).plus(d),y.precision=v,n==null?(xt=!0,nt(m,v)):m;for(c=l=m=Wa(m.minus(Mr),m.plus(Mr),u),f=nt(m.times(m),u),a=3;;){if(l=nt(l.times(f),u),d=c.plus(Wa(l,new y(a),u)),aa(d.d).slice(0,u)===aa(c.d).slice(0,u))return c=c.times(2),i!==0&&(c=c.plus(Db(y,u+2,v).times(i+""))),c=Wa(c,new y(p),u),y.precision=v,n==null?(xt=!0,nt(c,v)):c;c=d,a+=2}}function GO(t,n){var r,s,a;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(s=n.search(/e/i))>0?(r<0&&(r=s),r+=+n.slice(s+1),n=n.substring(0,s)):r<0&&(r=n.length),s=0;n.charCodeAt(s)===48;)++s;for(a=n.length;n.charCodeAt(a-1)===48;)--a;if(n=n.slice(s,a),n){if(a-=s,r=r-s-1,t.e=Yd(r/lt),t.d=[],s=(r+1)%lt,r<0&&(s+=lt),s<a){for(s&&t.d.push(+n.slice(0,s)),a-=lt;s<a;)t.d.push(+n.slice(s,s+=lt));n=n.slice(s),s=lt-n.length}else s-=a;for(;s--;)n+="0";if(t.d.push(+n),xt&&(t.e>xg||t.e<-xg))throw Error(eC+r)}else t.s=0,t.e=0,t.d=[0];return t}function nt(t,n,r){var s,a,i,l,c,d,u,f,p=t.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(s=n-l,s<0)s+=lt,a=n,u=p[f=0];else{if(f=Math.ceil((s+1)/lt),i=p.length,f>=i)return t;for(u=i=p[f],l=1;i>=10;i/=10)l++;s%=lt,a=s-lt+l}if(r!==void 0&&(i=Ko(10,l-a-1),c=u/i%10|0,d=n<0||p[f+1]!==void 0||u%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(s>0?a>0?u/Ko(10,l-a):0:p[f-1])%10&1||r==(t.s<0?8:7))),n<1||!p[0])return d?(i=Kt(t),p.length=1,n=n-i-1,p[0]=Ko(10,(lt-n%lt)%lt),t.e=Yd(-n/lt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(s==0?(p.length=f,i=1,f--):(p.length=f+1,i=Ko(10,lt-s),p[f]=a>0?(u/Ko(10,l-a)%Ko(10,a)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==un&&(p[0]=1,++t.e);break}else{if(p[f]+=i,p[f]!=un)break;p[f--]=0,i=1}for(s=p.length;p[--s]===0;)p.pop();if(xt&&(t.e>xg||t.e<-xg))throw Error(eC+Kt(t));return t}function t7(t,n){var r,s,a,i,l,c,d,u,f,p,h=t.constructor,m=h.precision;if(!t.s||!n.s)return n.s?n.s=-n.s:n=new h(t),xt?nt(n,m):n;if(d=t.d,p=n.d,s=n.e,u=t.e,d=d.slice(),l=u-s,l){for(f=l<0,f?(r=d,l=-l,c=p.length):(r=p,s=u,c=d.length),a=Math.max(Math.ceil(m/lt),c)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=p.length,f=a<c,f&&(c=a),a=0;a<c;a++)if(d[a]!=p[a]){f=d[a]<p[a];break}l=0}for(f&&(r=d,d=p,p=r,n.s=-n.s),c=d.length,a=p.length-c;a>0;--a)d[c++]=0;for(a=p.length;a>l;){if(d[--a]<p[a]){for(i=a;i&&d[--i]===0;)d[i]=un-1;--d[i],d[a]+=un}d[a]-=p[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--s;return d[0]?(n.d=d,n.e=s,xt?nt(n,m):n):new h(0)}function Fl(t,n,r){var s,a=Kt(t),i=aa(t.d),l=i.length;return n?(r&&(s=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Oi(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Oi(-a-1)+i,r&&(s=r-l)>0&&(i+=Oi(s))):a>=l?(i+=Oi(a+1-l),r&&(s=r-a-1)>0&&(i=i+"."+Oi(s))):((s=a+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-l)>0&&(a+1===l&&(i+="."),i+=Oi(s))),t.s<0?"-"+i:i}function YO(t,n){if(t.length>n)return t.length=n,!0}function n7(t){var n,r,s;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(yl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return GO(l,i.toString())}else if(typeof i!="string")throw Error(yl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,cke.test(i))GO(l,i);else throw Error(yl+i)}if(a.prototype=he,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=n7,a.config=a.set=dke,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<s.length;)t.hasOwnProperty(r=s[n++])||(t[r]=this[r]);return a.config(t),a}function dke(t){if(!t||typeof t!="object")throw Error(fs+"Object expected");var n,r,s,a=["precision",1,Gd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(n=0;n<a.length;n+=3)if((s=t[r=a[n]])!==void 0)if(Yd(s)===s&&s>=a[n+1]&&s<=a[n+2])this[r]=s;else throw Error(yl+r+": "+s);if((s=t[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(yl+r+": "+s);return this}var tC=n7(lke);Mr=new tC(1);const Qe=tC;var uke=t=>t,r7={},s7=t=>t===r7,XO=t=>function n(){return arguments.length===0||arguments.length===1&&s7(arguments.length<=0?void 0:arguments[0])?n:t(...arguments)},a7=(t,n)=>t===1?n:XO(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var i=s.filter(l=>l!==r7).length;return i>=t?n(...s):a7(t-i,XO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(f=>s7(f)?c.shift():f);return n(...u,...c)}))}),bv=t=>a7(t.length,t),M1=(t,n)=>{for(var r=[],s=t;s<n;++s)r[s-t]=s;return r},fke=bv((t,n)=>Array.isArray(n)?n.map(t):Object.keys(n).map(r=>n[r]).map(t)),pke=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(!r.length)return uke;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce((c,d)=>d(c),i(...arguments))}},O1=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),i7=t=>{var n=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n&&a.every((l,c)=>{var d;return l===((d=n)===null||d===void 0?void 0:d[c])})||(n=a,r=t(...a)),r}};function o7(t){var n;return t===0?n=1:n=Math.floor(new Qe(t).abs().log(10).toNumber())+1,n}function l7(t,n,r){for(var s=new Qe(t),a=0,i=[];s.lt(n)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}bv((t,n,r)=>{var s=+t,a=+n;return s+r*(a-s)});bv((t,n,r)=>{var s=n-+t;return s=s||1/0,(r-t)/s});bv((t,n,r)=>{var s=n-+t;return s=s||1/0,Math.max(0,Math.min(1,(r-t)/s))});var c7=t=>{var[n,r]=t,[s,a]=[n,r];return n>r&&([s,a]=[r,n]),[s,a]},d7=(t,n,r)=>{if(t.lte(0))return new Qe(0);var s=o7(t.toNumber()),a=new Qe(10).pow(s),i=t.div(a),l=s!==1?.05:.1,c=new Qe(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=c.mul(a);return n?new Qe(d.toNumber()):new Qe(Math.ceil(d.toNumber()))},hke=(t,n,r)=>{var s=new Qe(1),a=new Qe(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(s=new Qe(10).pow(o7(t)-1),a=new Qe(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Qe(Math.floor(t)))}else t===0?a=new Qe(Math.floor((n-1)/2)):r||(a=new Qe(Math.floor(t)));var l=Math.floor((n-1)/2),c=pke(fke(d=>a.add(new Qe(d-l).mul(s)).toNumber()),M1);return c(0,n)},u7=function(n,r,s,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-n)/(s-1)))return{step:new Qe(0),tickMin:new Qe(0),tickMax:new Qe(0)};var l=d7(new Qe(r).sub(n).div(s-1),a,i),c;n<=0&&r>=0?c=new Qe(0):(c=new Qe(n).add(r).div(2),c=c.sub(new Qe(c).mod(l)));var d=Math.ceil(c.sub(n).div(l).toNumber()),u=Math.ceil(new Qe(r).sub(c).div(l).toNumber()),f=d+u+1;return f>s?u7(n,r,s,a,i+1):(f<s&&(u=r>0?u+(s-f):u,d=r>0?d:d+(s-f)),{step:l,tickMin:c.sub(new Qe(d).mul(l)),tickMax:c.add(new Qe(u).mul(l))})};function mke(t){var[n,r]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),[l,c]=c7([n,r]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...M1(0,s-1).map(()=>1/0)]:[...M1(0,s-1).map(()=>-1/0),c];return n>r?O1(d):d}if(l===c)return hke(l,s,a);var{step:u,tickMin:f,tickMax:p}=u7(l,c,i,a,0),h=l7(f,p.add(new Qe(.1).mul(u)),u);return n>r?O1(h):h}function xke(t,n){var[r,s]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=c7([r,s]);if(i===-1/0||l===1/0)return[r,s];if(i===l)return[i];var c=Math.max(n,2),d=d7(new Qe(l).sub(i).div(c-1),a,0),u=[...l7(new Qe(i),new Qe(l),d),l];return a===!1&&(u=u.map(f=>Math.round(f))),r>s?O1(u):u}var gke=i7(mke),yke=i7(xke),f7=t=>t.rootProps.maxBarSize,vke=t=>t.rootProps.barGap,p7=t=>t.rootProps.barCategoryGap,bke=t=>t.rootProps.barSize,Rp=t=>t.rootProps.stackOffset,nC=t=>t.options.chartName,rC=t=>t.rootProps.syncId,h7=t=>t.rootProps.syncMethod,sC=t=>t.options.eventEmitter,zn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},La={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Pr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},wv=(t,n)=>{if(!(!t||!n))return t!=null&&t.reversed?[n[1],n[0]]:n},wke={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:La.reversed,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:La.type,unit:void 0},jke={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:Pr.type,unit:void 0},Nke={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:La.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Ske={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:"category",unit:void 0},aC=(t,n)=>t.polarAxis.angleAxis[n]!=null?t.polarAxis.angleAxis[n]:t.layout.layoutType==="radial"?Nke:wke,iC=(t,n)=>t.polarAxis.radiusAxis[n]!=null?t.polarAxis.radiusAxis[n]:t.layout.layoutType==="radial"?Ske:jke,jv=t=>t.polarOptions,oC=U([hi,mi,an],cV),m7=U([jv,oC],(t,n)=>{if(t!=null)return Un(t.innerRadius,n,0)}),x7=U([jv,oC],(t,n)=>{if(t!=null)return Un(t.outerRadius,n,n*.8)}),kke=t=>{if(t==null)return[0,0];var{startAngle:n,endAngle:r}=t;return[n,r]},g7=U([jv],kke);U([aC,g7],wv);var y7=U([oC,m7,x7],(t,n,r)=>{if(!(t==null||n==null||r==null))return[n,r]});U([iC,y7],wv);var v7=U([Ye,jv,m7,x7,hi,mi],(t,n,r,s,a,i)=>{if(!(t!=="centric"&&t!=="radial"||n==null||r==null||s==null)){var{cx:l,cy:c,startAngle:d,endAngle:u}=n;return{cx:Un(l,a,a/2),cy:Un(c,i,i/2),innerRadius:r,outerRadius:s,startAngle:d,endAngle:u,clockWise:!1}}}),yt=(t,n)=>n,Ip=(t,n,r)=>r;function lC(t){return t==null?void 0:t.id}function b7(t,n,r){var{chartData:s=[]}=n,{allowDuplicatedCategory:a,dataKey:i}=r,l=new Map;return t.forEach(c=>{var d,u=(d=c.data)!==null&&d!==void 0?d:s;if(!(u==null||u.length===0)){var f=lC(c);u.forEach((p,h)=>{var m=i==null||a?h:String(St(p,i,null)),g=St(p,c.dataKey,0),y;l.has(m)?y=l.get(m):y={},Object.assign(y,{[f]:g}),l.set(m,y)})}}),Array.from(l.values())}function Nv(t){return t.stackId!=null&&t.dataKey!=null}var Sv=(t,n)=>t===n?!0:t==null||n==null?!1:t[0]===n[0]&&t[1]===n[1];function kv(t,n){return Array.isArray(t)&&Array.isArray(n)&&t.length===0&&n.length===0?!0:t===n}function Cke(t,n){if(t.length===n.length){for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}return!1}var ln=t=>{var n=Ye(t);return n==="horizontal"?"xAxis":n==="vertical"?"yAxis":n==="centric"?"angleAxis":"radiusAxis"},Xd=t=>t.tooltip.settings.axisId;function JO(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function gg(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?JO(Object(r),!0).forEach(function(s){_ke(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function _ke(t,n,r){return(n=Pke(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Pke(t){var n=Ake(t,"string");return typeof n=="symbol"?n:n+""}function Ake(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var R1=[0,"auto"],kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},w7=(t,n)=>t.cartesianAxis.xAxis[n],gi=(t,n)=>{var r=w7(t,n);return r??kr},Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:R1,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ap},j7=(t,n)=>t.cartesianAxis.yAxis[n],yi=(t,n)=>{var r=j7(t,n);return r??Cr},Eke={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},cC=(t,n)=>{var r=t.cartesianAxis.zAxis[n];return r??Eke},Pt=(t,n,r)=>{switch(n){case"xAxis":return gi(t,r);case"yAxis":return yi(t,r);case"zAxis":return cC(t,r);case"angleAxis":return aC(t,r);case"radiusAxis":return iC(t,r);default:throw new Error("Unexpected axis type: ".concat(n))}},Tke=(t,n,r)=>{switch(n){case"xAxis":return gi(t,r);case"yAxis":return yi(t,r);default:throw new Error("Unexpected axis type: ".concat(n))}},Dp=(t,n,r)=>{switch(n){case"xAxis":return gi(t,r);case"yAxis":return yi(t,r);case"angleAxis":return aC(t,r);case"radiusAxis":return iC(t,r);default:throw new Error("Unexpected axis type: ".concat(n))}},N7=t=>t.graphicalItems.cartesianItems.some(n=>n.type==="bar")||t.graphicalItems.polarItems.some(n=>n.type==="radialBar");function dC(t,n){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===n;case"yAxis":return"yAxisId"in r&&r.yAxisId===n;case"zAxis":return"zAxisId"in r&&r.zAxisId===n;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===n;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===n;default:return!1}}}var uC=t=>t.graphicalItems.cartesianItems,Mke=U([yt,Ip],dC),fC=(t,n,r)=>t.filter(r).filter(s=>(n==null?void 0:n.includeHidden)===!0?!0:!s.hide),Lp=U([uC,Pt,Mke],fC,{memoizeOptions:{resultEqualityCheck:kv}}),S7=U([Lp],t=>t.filter(n=>n.type==="area"||n.type==="bar").filter(Nv)),k7=t=>t.filter(n=>!("stackId"in n)||n.stackId===void 0),Oke=U([Lp],k7),pC=t=>t.map(n=>n.data).filter(Boolean).flat(1),Rke=U([Lp],pC,{memoizeOptions:{resultEqualityCheck:kv}}),hC=(t,n)=>{var{chartData:r=[],dataStartIndex:s,dataEndIndex:a}=n;return t.length>0?t:r.slice(s,a+1)},mC=U([Rke,Z2],hC),xC=(t,n,r)=>(n==null?void 0:n.dataKey)!=null?t.map(s=>({value:St(s,n.dataKey)})):r.length>0?r.map(s=>s.dataKey).flatMap(s=>t.map(a=>({value:St(a,s)}))):t.map(s=>({value:s})),Cv=U([mC,Pt,Lp],xC);function C7(t,n){switch(t){case"xAxis":return n.direction==="x";case"yAxis":return n.direction==="y";default:return!1}}function Lm(t){if(ba(t)||t instanceof Date){var n=Number(t);if(Bt(n))return n}}function QO(t){if(Array.isArray(t)){var n=[Lm(t[0]),Lm(t[1])];return $l(n)?n:void 0}var r=Lm(t);if(r!=null)return[r,r]}function ci(t){return t.map(Lm).filter(W0e)}function Ike(t,n,r){return!r||typeof n!="number"||va(n)?[]:r.length?ci(r.flatMap(s=>{var a=St(t,s.dataKey),i,l;if(Array.isArray(a)?[i,l]=a:i=l=a,!(!Bt(i)||!Bt(l)))return[n-i,n+l]})):[]}var cn=t=>{var n=ln(t),r=Xd(t);return Dp(t,n,r)},_7=U([cn],t=>t==null?void 0:t.dataKey),Dke=U([S7,Z2,cn],b7),P7=(t,n,r)=>{var s={},a=n.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),s);return Object.fromEntries(Object.entries(a).map(i=>{var[l,c]=i,d=c.map(lC);return[l,{stackedData:Mwe(t,d,r),graphicalItems:c}]}))},I1=U([Dke,S7,Rp],P7),A7=(t,n,r,s)=>{var{dataStartIndex:a,dataEndIndex:i}=n;if(s==null&&r!=="zAxis"){var l=Lwe(t,a,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Lke=U([Pt],t=>t.allowDataOverflow),gC=t=>{var n;if(t==null||!("domain"in t))return R1;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=ci(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(n=t==null?void 0:t.domain)!==null&&n!==void 0?n:R1},yC=U([Pt],gC),vC=U([yC,Lke],JV),$ke=U([I1,Io,yt,vC],A7,{memoizeOptions:{resultEqualityCheck:Sv}}),_v=t=>t.errorBars,Fke=(t,n,r)=>t.flatMap(s=>n[s.id]).filter(Boolean).filter(s=>C7(r,s)),yg=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),l=Math.min(...i),c=Math.max(...i);return[l,c]}},bC=(t,n,r,s,a)=>{var i,l;if(r.length>0&&t.forEach(c=>{r.forEach(d=>{var u,f,p=(u=s[d.id])===null||u===void 0?void 0:u.filter(b=>C7(a,b)),h=St(c,(f=n.dataKey)!==null&&f!==void 0?f:d.dataKey),m=Ike(c,h,p);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(l==null||y>l)&&(l=y)}var v=QO(h);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),l=l==null?v[1]:Math.max(l,v[1]))})}),(n==null?void 0:n.dataKey)!=null&&t.forEach(c=>{var d=QO(St(c,n.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),Bt(i)&&Bt(l))return[i,l]},Bke=U([mC,Pt,Oke,_v,yt],bC,{memoizeOptions:{resultEqualityCheck:Sv}});function zke(t){var{value:n}=t;if(ba(n)||n instanceof Date)return n}var Vke=(t,n,r)=>{var s=t.map(zke).filter(a=>a!=null);return r&&(n.dataKey==null||n.allowDuplicatedCategory&&U6(s))?xV(0,t.length):n.allowDuplicatedCategory?s:Array.from(new Set(s))},E7=t=>t.referenceElements.dots,Jd=(t,n,r)=>t.filter(s=>s.ifOverflow==="extendDomain").filter(s=>n==="xAxis"?s.xAxisId===r:s.yAxisId===r),Uke=U([E7,yt,Ip],Jd),T7=t=>t.referenceElements.areas,Hke=U([T7,yt,Ip],Jd),M7=t=>t.referenceElements.lines,Wke=U([M7,yt,Ip],Jd),O7=(t,n)=>{var r=ci(t.map(s=>n==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Kke=U(Uke,yt,O7),R7=(t,n)=>{var r=ci(t.flatMap(s=>[n==="xAxis"?s.x1:s.y1,n==="xAxis"?s.x2:s.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qke=U([Hke,yt],R7);function Gke(t){var n;if(t.x!=null)return ci([t.x]);var r=(n=t.segment)===null||n===void 0?void 0:n.map(s=>s.x);return r==null||r.length===0?[]:ci(r)}function Yke(t){var n;if(t.y!=null)return ci([t.y]);var r=(n=t.segment)===null||n===void 0?void 0:n.map(s=>s.y);return r==null||r.length===0?[]:ci(r)}var I7=(t,n)=>{var r=t.flatMap(s=>n==="xAxis"?Gke(s):Yke(s));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Xke=U([Wke,yt],I7),Jke=U(Kke,Xke,qke,(t,n,r)=>yg(t,r,n)),wC=(t,n,r,s,a,i,l,c)=>{if(r!=null)return r;var d=l==="vertical"&&c==="xAxis"||l==="horizontal"&&c==="yAxis",u=d?yg(s,i,a):yg(i,a);return oke(n,u,t.allowDataOverflow)},Qke=U([Pt,yC,vC,$ke,Bke,Jke,Ye,yt],wC,{memoizeOptions:{resultEqualityCheck:Sv}}),Zke=[0,1],jC=(t,n,r,s,a,i,l)=>{if(!((t==null||r==null||r.length===0)&&l===void 0)){var{dataKey:c,type:d}=t,u=Jl(n,i);if(u&&c==null){var f;return xV(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?Vke(s,t,u):a==="expand"?Zke:l}},NC=U([Pt,Ye,mC,Cv,Rp,yt,Qke],jC),D7=(t,n,r,s,a)=>{if(t!=null){var{scale:i,type:l}=t;if(i==="auto")return n==="radial"&&a==="radiusAxis"?"band":n==="radial"&&a==="angleAxis"?"linear":l==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var c="scale".concat(Cp(i));return c in Fu?c:"point"}}},Qd=U([Pt,Ye,N7,nC,yt],D7);function e2e(t){if(t!=null){if(t in Fu)return Fu[t]();var n="scale".concat(Cp(t));if(n in Fu)return Fu[n]()}}function SC(t,n,r,s){if(!(r==null||s==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(s);var a=e2e(n);if(a!=null){var i=a.domain(r).range(s);return _we(i),i}}}var kC=(t,n,r)=>{var s=gC(n);if(!(r!=="auto"&&r!=="linear")){if(n!=null&&n.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&$l(t))return gke(t,n.tickCount,n.allowDecimals);if(n!=null&&n.tickCount&&n.type==="number"&&$l(t))return yke(t,n.tickCount,n.allowDecimals)}},CC=U([NC,Dp,Qd],kC),_C=(t,n,r,s)=>{if(s!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&$l(n)&&Array.isArray(r)&&r.length>0){var a=n[0],i=r[0],l=n[1],c=r[r.length-1];return[Math.min(a,i),Math.max(l,c)]}return n},t2e=U([Pt,NC,CC,yt],_C),n2e=U(Cv,Pt,(t,n)=>{if(!(!n||n.type!=="number")){var r=1/0,s=Array.from(ci(t.map(c=>c.value))).sort((c,d)=>c-d);if(s.length<2)return 1/0;var a=s[s.length-1]-s[0];if(a===0)return 1/0;for(var i=0;i<s.length-1;i++){var l=s[i+1]-s[i];r=Math.min(r,l)}return r/a}}),L7=U(n2e,Ye,p7,an,(t,n,r,s)=>s,(t,n,r,s,a)=>{if(!Bt(t))return 0;var i=n==="vertical"?s.height:s.width;if(a==="gap")return t*i/2;if(a==="no-gap"){var l=Un(r,t*i),c=t*i/2;return c-l-(c-l)/i*l}return 0}),r2e=(t,n)=>{var r=gi(t,n);return r==null||typeof r.padding!="string"?0:L7(t,"xAxis",n,r.padding)},s2e=(t,n)=>{var r=yi(t,n);return r==null||typeof r.padding!="string"?0:L7(t,"yAxis",n,r.padding)},a2e=U(gi,r2e,(t,n)=>{var r,s;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:n,right:n}:{left:((r=a.left)!==null&&r!==void 0?r:0)+n,right:((s=a.right)!==null&&s!==void 0?s:0)+n}}),i2e=U(yi,s2e,(t,n)=>{var r,s;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:n,bottom:n}:{top:((r=a.top)!==null&&r!==void 0?r:0)+n,bottom:((s=a.bottom)!==null&&s!==void 0?s:0)+n}}),o2e=U([an,a2e,lv,ov,(t,n,r)=>r],(t,n,r,s,a)=>{var{padding:i}=s;return a?[i.left,r.width-i.right]:[t.left+n.left,t.left+t.width-n.right]}),l2e=U([an,Ye,i2e,lv,ov,(t,n,r)=>r],(t,n,r,s,a,i)=>{var{padding:l}=a;return i?[s.height-l.bottom,l.top]:n==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),$p=(t,n,r,s)=>{var a;switch(n){case"xAxis":return o2e(t,r,s);case"yAxis":return l2e(t,r,s);case"zAxis":return(a=cC(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return g7(t);case"radiusAxis":return y7(t,r);default:return}},$7=U([Pt,$p],wv),Zd=U([Pt,Qd,t2e,$7],SC);U([Lp,_v,yt],Fke);function F7(t,n){return t.id<n.id?-1:t.id>n.id?1:0}var Pv=(t,n)=>n,Av=(t,n,r)=>r,c2e=U(av,Pv,Av,(t,n,r)=>t.filter(s=>s.orientation===n).filter(s=>s.mirror===r).sort(F7)),d2e=U(iv,Pv,Av,(t,n,r)=>t.filter(s=>s.orientation===n).filter(s=>s.mirror===r).sort(F7)),B7=(t,n)=>({width:t.width,height:n.height}),u2e=(t,n)=>{var r=typeof n.width=="number"?n.width:Ap;return{width:r,height:t.height}},z7=U(an,gi,B7),f2e=(t,n,r)=>{switch(n){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},p2e=(t,n,r)=>{switch(n){case"left":return t.left;case"right":return r-t.right;default:return 0}},h2e=U(mi,an,c2e,Pv,Av,(t,n,r,s,a)=>{var i={},l;return r.forEach(c=>{var d=B7(n,c);l==null&&(l=f2e(n,s,t));var u=s==="top"&&!a||s==="bottom"&&a;i[c.id]=l-Number(u)*d.height,l+=(u?-1:1)*d.height}),i}),m2e=U(hi,an,d2e,Pv,Av,(t,n,r,s,a)=>{var i={},l;return r.forEach(c=>{var d=u2e(n,c);l==null&&(l=p2e(n,s,t));var u=s==="left"&&!a||s==="right"&&a;i[c.id]=l-Number(u)*d.width,l+=(u?-1:1)*d.width}),i}),x2e=(t,n)=>{var r=gi(t,n);if(r!=null)return h2e(t,r.orientation,r.mirror)},g2e=U([an,gi,x2e,(t,n)=>n],(t,n,r,s)=>{if(n!=null){var a=r==null?void 0:r[s];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),y2e=(t,n)=>{var r=yi(t,n);if(r!=null)return m2e(t,r.orientation,r.mirror)},v2e=U([an,yi,y2e,(t,n)=>n],(t,n,r,s)=>{if(n!=null){var a=r==null?void 0:r[s];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),V7=U(an,yi,(t,n)=>{var r=typeof n.width=="number"?n.width:Ap;return{width:r,height:t.height}}),ZO=(t,n,r)=>{switch(n){case"xAxis":return z7(t,r).width;case"yAxis":return V7(t,r).height;default:return}},U7=(t,n,r,s)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:l}=r,c=Jl(t,s),d=n.map(u=>u.value);if(l&&c&&i==="category"&&a&&U6(d))return d}},PC=U([Ye,Cv,Pt,yt],U7),H7=(t,n,r,s)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,l=Jl(t,s);if(l&&(a==="number"||i!=="auto"))return n.map(c=>c.value)}},AC=U([Ye,Cv,Dp,yt],H7);U([Ye,Tke,Qd,Zd,PC,AC,$p,CC,yt],(t,n,r,s,a,i,l,c,d)=>{if(n!=null){var u=Jl(t,d);return{angle:n.angle,interval:n.interval,minTickGap:n.minTickGap,orientation:n.orientation,tick:n.tick,tickCount:n.tickCount,tickFormatter:n.tickFormatter,ticks:n.ticks,type:n.type,unit:n.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:c,range:l,realScaleType:r,scale:s}}});var b2e=(t,n,r,s,a,i,l,c,d)=>{if(!(n==null||s==null)){var u=Jl(t,d),{type:f,ticks:p,tickCount:h}=n,m=r==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,g=f==="category"&&s.bandwidth?s.bandwidth()/m:0;g=d==="angleAxis"&&i!=null&&i.length>=2?Cn(i[0]-i[1])*2*g:g;var y=p||a;if(y){var v=y.map((b,w)=>{var j=l?l.indexOf(b):b;return{index:w,coordinate:s(j)+g,value:b,offset:g}});return v.filter(b=>Bt(b.coordinate))}return u&&c?c.map((b,w)=>({coordinate:s(b)+g,value:b,index:w,offset:g})).filter(b=>Bt(b.coordinate)):s.ticks?s.ticks(h).map(b=>({coordinate:s(b)+g,value:b,offset:g})):s.domain().map((b,w)=>({coordinate:s(b)+g,value:l?l[b]:b,index:w,offset:g}))}},W7=U([Ye,Dp,Qd,Zd,CC,$p,PC,AC,yt],b2e),w2e=(t,n,r,s,a,i,l)=>{if(!(n==null||r==null||s==null||s[0]===s[1])){var c=Jl(t,l),{tickCount:d}=n,u=0;return u=l==="angleAxis"&&(s==null?void 0:s.length)>=2?Cn(s[0]-s[1])*2*u:u,c&&i?i.map((f,p)=>({coordinate:r(f)+u,value:f,index:p,offset:u})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+u,value:f,offset:u})):r.domain().map((f,p)=>({coordinate:r(f)+u,value:a?a[f]:f,index:p,offset:u}))}},Nd=U([Ye,Dp,Zd,$p,PC,AC,yt],w2e),Sd=U(Pt,Zd,(t,n)=>{if(!(t==null||n==null))return gg(gg({},t),{},{scale:n})}),j2e=U([Pt,Qd,NC,$7],SC);U((t,n,r)=>cC(t,r),j2e,(t,n)=>{if(!(t==null||n==null))return gg(gg({},t),{},{scale:n})});var N2e=U([Ye,av,iv],(t,n,r)=>{switch(t){case"horizontal":return n.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),K7=t=>t.options.defaultTooltipEventType,q7=t=>t.options.validateTooltipEventTypes;function G7(t,n,r){if(t==null)return n;var s=t?"axis":"item";return r==null?n:r.includes(s)?s:n}function EC(t,n){var r=K7(t),s=q7(t);return G7(n,r,s)}function S2e(t){return Ne(n=>EC(n,t))}var Y7=(t,n)=>{var r,s=Number(n);if(!(va(s)||n==null))return s>=0?t==null||(r=t[s])===null||r===void 0?void 0:r.value:void 0},k2e=t=>t.tooltip.settings,$i={active:!1,index:null,dataKey:void 0,coordinate:void 0},C2e={itemInteraction:{click:$i,hover:$i},axisInteraction:{click:$i,hover:$i},keyboardInteraction:$i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},X7=Nr({name:"tooltip",initialState:C2e,reducers:{addTooltipEntrySettings:{reducer(t,n){t.tooltipItemPayloads.push(n.payload)},prepare:tn()},removeTooltipEntrySettings:{reducer(t,n){var r=Ha(t).tooltipItemPayloads.indexOf(n.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:tn()},setTooltipSettingsState(t,n){t.settings=n.payload},setActiveMouseOverItemIndex(t,n){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=n.payload.activeIndex,t.itemInteraction.hover.dataKey=n.payload.activeDataKey,t.itemInteraction.hover.coordinate=n.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,n){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=n.payload.activeIndex,t.itemInteraction.click.dataKey=n.payload.activeDataKey,t.itemInteraction.click.coordinate=n.payload.activeCoordinate},setMouseOverAxisIndex(t,n){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=n.payload.activeIndex,t.axisInteraction.hover.dataKey=n.payload.activeDataKey,t.axisInteraction.hover.coordinate=n.payload.activeCoordinate},setMouseClickAxisIndex(t,n){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=n.payload.activeIndex,t.axisInteraction.click.dataKey=n.payload.activeDataKey,t.axisInteraction.click.coordinate=n.payload.activeCoordinate},setSyncInteraction(t,n){t.syncInteraction=n.payload},setKeyboardInteraction(t,n){t.keyboardInteraction.active=n.payload.active,t.keyboardInteraction.index=n.payload.activeIndex,t.keyboardInteraction.coordinate=n.payload.activeCoordinate,t.keyboardInteraction.dataKey=n.payload.activeDataKey}}}),{addTooltipEntrySettings:_2e,removeTooltipEntrySettings:P2e,setTooltipSettingsState:A2e,setActiveMouseOverItemIndex:J7,mouseLeaveItem:E2e,mouseLeaveChart:Q7,setActiveClickItemIndex:T2e,setMouseOverAxisIndex:Z7,setMouseClickAxisIndex:M2e,setSyncInteraction:D1,setKeyboardInteraction:L1}=X7.actions,O2e=X7.reducer;function eR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function tm(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?eR(Object(r),!0).forEach(function(s){R2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function R2e(t,n,r){return(n=I2e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function I2e(t){var n=D2e(t,"string");return typeof n=="symbol"?n:n+""}function D2e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function L2e(t,n,r){return n==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $2e(t){return t.index!=null}var eU=(t,n,r,s)=>{if(n==null)return $i;var a=L2e(t,n,r);if(a==null)return $i;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if($2e(a)){if(i)return tm(tm({},a),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return tm(tm({},$i),{},{coordinate:a.coordinate})},TC=(t,n)=>{var r=t==null?void 0:t.index;if(r==null)return null;var s=Number(r);if(!Bt(s))return r;var a=0,i=1/0;return n.length>0&&(i=n.length-1),String(Math.max(a,Math.min(s,i)))},tU=(t,n,r,s,a,i,l,c)=>{if(!(i==null||c==null)){var d=l[0],u=d==null?void 0:c(d.positions,i);if(u!=null)return u;var f=a==null?void 0:a[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(s.top+n)/2};default:return{x:(s.left+t)/2,y:f.coordinate}}}},nU=(t,n,r,s)=>{if(n==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&s!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===a})},Fp=t=>t.options.tooltipPayloadSearcher,eu=t=>t.tooltip;function tR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function nR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?tR(Object(r),!0).forEach(function(s){F2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function F2e(t,n,r){return(n=B2e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function B2e(t){var n=z2e(t,"string");return typeof n=="symbol"?n:n+""}function z2e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function V2e(t,n){return t??n}var rU=(t,n,r,s,a,i,l)=>{if(!(n==null||i==null)){var{chartData:c,computedData:d,dataStartIndex:u,dataEndIndex:f}=r,p=[];return t.reduce((h,m)=>{var g,{dataDefinedOnItem:y,settings:v}=m,b=V2e(y,c),w=Array.isArray(b)?U8(b,u,f):b,j=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:s,N=v==null?void 0:v.nameKey,S;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&l==="axis"?S=H0e(w,s,a):S=i(w,n,d,N),Array.isArray(S))S.forEach(k=>{var C=nR(nR({},v),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});h.push($M({tooltipEntrySettings:C,dataKey:k.dataKey,payload:k.payload,value:St(k.payload,k.dataKey),name:k.name}))});else{var _;h.push($M({tooltipEntrySettings:v,dataKey:j,payload:S,value:St(S,j),name:(_=St(S,N))!==null&&_!==void 0?_:v==null?void 0:v.name}))}return h},p)}},MC=U([cn,Ye,N7,nC,ln],D7),U2e=U([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,n)=>[...t,...n]),H2e=U([ln,Xd],dC),Bp=U([U2e,cn,H2e],fC,{memoizeOptions:{resultEqualityCheck:kv}}),W2e=U([Bp],t=>t.filter(Nv)),K2e=U([Bp],pC,{memoizeOptions:{resultEqualityCheck:kv}}),tu=U([K2e,Io],hC),q2e=U([W2e,Io,cn],b7),OC=U([tu,cn,Bp],xC),sU=U([cn],gC),G2e=U([cn],t=>t.allowDataOverflow),aU=U([sU,G2e],JV),Y2e=U([Bp],t=>t.filter(Nv)),X2e=U([q2e,Y2e,Rp],P7),J2e=U([X2e,Io,ln,aU],A7),Q2e=U([Bp],k7),Z2e=U([tu,cn,Q2e,_v,ln],bC,{memoizeOptions:{resultEqualityCheck:Sv}}),eCe=U([E7,ln,Xd],Jd),tCe=U([eCe,ln],O7),nCe=U([T7,ln,Xd],Jd),rCe=U([nCe,ln],R7),sCe=U([M7,ln,Xd],Jd),aCe=U([sCe,ln],I7),iCe=U([tCe,aCe,rCe],yg),oCe=U([cn,sU,aU,J2e,Z2e,iCe,Ye,ln],wC),iU=U([cn,Ye,tu,OC,Rp,ln,oCe],jC),lCe=U([iU,cn,MC],kC),cCe=U([cn,iU,lCe,ln],_C),oU=t=>{var n=ln(t),r=Xd(t),s=!1;return $p(t,n,r,s)},lU=U([cn,oU],wv),cU=U([cn,MC,cCe,lU],SC),dCe=U([Ye,OC,cn,ln],U7),uCe=U([Ye,OC,cn,ln],H7),fCe=(t,n,r,s,a,i,l,c)=>{if(n){var{type:d}=n,u=Jl(t,c);if(s){var f=r==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,p=d==="category"&&s.bandwidth?s.bandwidth()/f:0;return p=c==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Cn(a[0]-a[1])*2*p:p,u&&l?l.map((h,m)=>({coordinate:s(h)+p,value:h,index:m,offset:p})):s.domain().map((h,m)=>({coordinate:s(h)+p,value:i?i[h]:h,index:m,offset:p}))}}},vi=U([Ye,cn,MC,cU,oU,dCe,uCe,ln],fCe),RC=U([K7,q7,k2e],(t,n,r)=>G7(r.shared,t,n)),dU=t=>t.tooltip.settings.trigger,IC=t=>t.tooltip.settings.defaultIndex,Ev=U([eu,RC,dU,IC],eU),Bl=U([Ev,tu],TC),uU=U([vi,Bl],Y7),fU=U([Ev],t=>{if(t)return t.dataKey}),pU=U([eu,RC,dU,IC],nU),pCe=U([hi,mi,Ye,an,vi,IC,pU,Fp],tU),hCe=U([Ev,pCe],(t,n)=>t!=null&&t.coordinate?t.coordinate:n),mCe=U([Ev],t=>t.active),xCe=U([pU,Bl,Io,_7,uU,Fp,RC],rU);U([xCe],t=>{if(t!=null){var n=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(n))}});function rR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function sR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?rR(Object(r),!0).forEach(function(s){gCe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function gCe(t,n,r){return(n=yCe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function yCe(t){var n=vCe(t,"string");return typeof n=="symbol"?n:n+""}function vCe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var bCe=()=>Ne(cn),wCe=()=>{var t=bCe(),n=Ne(vi),r=Ne(cU);return tg(!t||!r?void 0:sR(sR({},t),{},{scale:r}),n)};function aR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function cc(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?aR(Object(r),!0).forEach(function(s){jCe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function jCe(t,n,r){return(n=NCe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function NCe(t){var n=SCe(t,"string");return typeof n=="symbol"?n:n+""}function SCe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var kCe=(t,n,r,s)=>{var a=n.find(i=>i&&i.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:s.chartY};if(t==="vertical")return{x:s.chartX,y:a.coordinate}}return{x:0,y:0}},CCe=(t,n,r,s)=>{var a=n.find(u=>u&&u.index===r);if(a){if(t==="centric"){var i=a.coordinate,{radius:l}=s;return cc(cc(cc({},s),Wt(s.cx,s.cy,l,i)),{},{angle:i,radius:l})}var c=a.coordinate,{angle:d}=s;return cc(cc(cc({},s),Wt(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function _Ce(t,n){var{chartX:r,chartY:s}=t;return r>=n.left&&r<=n.left+n.width&&s>=n.top&&s<=n.top+n.height}var hU=(t,n,r,s,a)=>{var i,l=-1,c=(i=n==null?void 0:n.length)!==null&&i!==void 0?i:0;if(c<=1||t==null)return 0;if(s==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<c;d++){var u=d>0?r[d-1].coordinate:r[c-1].coordinate,f=r[d].coordinate,p=d>=c-1?r[0].coordinate:r[d+1].coordinate,h=void 0;if(Cn(f-u)!==Cn(p-f)){var m=[];if(Cn(p-f)===Cn(a[1]-a[0])){h=p;var g=f+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var y=p+a[1]-a[0];m[0]=Math.min(f,(y+f)/2),m[1]=Math.max(f,(y+f)/2)}var v=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>v[0]&&t<=v[1]||t>=m[0]&&t<=m[1]){({index:l}=r[d]);break}}else{var b=Math.min(u,p),w=Math.max(u,p);if(t>(b+f)/2&&t<=(w+f)/2){({index:l}=r[d]);break}}}else if(n){for(var j=0;j<c;j++)if(j===0&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<c-1&&t>(n[j].coordinate+n[j-1].coordinate)/2&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j===c-1&&t>(n[j].coordinate+n[j-1].coordinate)/2){({index:l}=n[j]);break}}return l},PCe=()=>Ne(nC),DC=(t,n)=>n,mU=(t,n,r)=>r,LC=(t,n,r,s)=>s,ACe=U(vi,t=>Qy(t,n=>n.coordinate)),$C=U([eu,DC,mU,LC],eU),xU=U([$C,tu],TC),ECe=(t,n,r)=>{if(n!=null){var s=eu(t);return n==="axis"?r==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:r==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},gU=U([eu,DC,mU,LC],nU),vg=U([hi,mi,Ye,an,vi,LC,gU,Fp],tU),TCe=U([$C,vg],(t,n)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:n}),yU=U([vi,xU],Y7),MCe=U([gU,xU,Io,_7,yU,Fp,DC],rU),OCe=U([$C],t=>({isActive:t.active,activeIndex:t.index})),RCe=(t,n,r,s,a,i,l)=>{if(!(!t||!r||!s||!a)&&_Ce(t,l)){var c=$we(t,n),d=hU(c,i,a,r,s),u=kCe(n,a,d,t);return{activeIndex:String(d),activeCoordinate:u}}},ICe=(t,n,r,s,a,i,l)=>{if(!(!t||!s||!a||!i||!r)){var c=_1e(t,r);if(c){var d=Fwe(c,n),u=hU(d,l,i,s,a),f=CCe(n,i,u,c);return{activeIndex:String(u),activeCoordinate:f}}}},DCe=(t,n,r,s,a,i,l,c)=>{if(!(!t||!n||!s||!a||!i))return n==="horizontal"||n==="vertical"?RCe(t,n,s,a,i,l,c):ICe(t,n,r,s,a,i,l)},LCe=U(t=>t.zIndex.zIndexMap,(t,n)=>n,(t,n,r)=>r,(t,n,r)=>{if(n!=null){var s=t[n];if(s!=null)return r?s.panoramaElementId:s.elementId}}),$Ce=U(t=>t.zIndex.zIndexMap,t=>{var n=Object.keys(t).map(s=>parseInt(s,10)).concat(Object.values(zn)),r=Array.from(new Set(n));return r.sort((s,a)=>s-a)},{memoizeOptions:{resultEqualityCheck:Cke}});function iR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function oR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?iR(Object(r),!0).forEach(function(s){FCe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function FCe(t,n,r){return(n=BCe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function BCe(t){var n=zCe(t,"string");return typeof n=="symbol"?n:n+""}function zCe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var VCe={},UCe={zIndexMap:Object.values(zn).reduce((t,n)=>oR(oR({},t),{},{[n]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),VCe)},HCe=new Set(Object.values(zn));function WCe(t){return HCe.has(t)}var vU=Nr({name:"zIndex",initialState:UCe,reducers:{registerZIndexPortal:{reducer:(t,n)=>{var{zIndex:r}=n.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:tn()},unregisterZIndexPortal:{reducer:(t,n)=>{var{zIndex:r}=n.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!WCe(r)&&delete t.zIndexMap[r])},prepare:tn()},registerZIndexPortalId:{reducer:(t,n)=>{var{zIndex:r,elementId:s,isPanorama:a}=n.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElementId=s:t.zIndexMap[r].elementId=s:t.zIndexMap[r]={consumers:0,elementId:a?void 0:s,panoramaElementId:a?s:void 0}},prepare:tn()},unregisterZIndexPortalId:{reducer:(t,n)=>{var{zIndex:r}=n.payload;t.zIndexMap[r]&&(n.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:tn()}}}),{registerZIndexPortal:KCe,unregisterZIndexPortal:qCe,registerZIndexPortalId:GCe,unregisterZIndexPortalId:YCe}=vU.actions,XCe=vU.reducer;function Aa(t){var{zIndex:n,children:r}=t,s=hje(),a=s&&n!==void 0&&n!==0,i=Hr(),l=gt();x.useLayoutEffect(()=>a?(l(KCe({zIndex:n})),()=>{l(qCe({zIndex:n}))}):Xl,[l,n,a]);var c=Ne(u=>LCe(u,n,i));if(!a)return r;if(!c)return null;var d=document.getElementById(c);return d?jo.createPortal(r,d):null}function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$1.apply(null,arguments)}function lR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function nm(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lR(Object(r),!0).forEach(function(s){JCe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function JCe(t,n,r){return(n=QCe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function QCe(t){var n=ZCe(t,"string");return typeof n=="symbol"?n:n+""}function ZCe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function e_e(t){var{cursor:n,cursorComp:r,cursorProps:s}=t;return x.isValidElement(n)?x.cloneElement(n,s):x.createElement(r,s)}function t_e(t){var n,{coordinate:r,payload:s,index:a,offset:i,tooltipAxisBandSize:l,layout:c,cursor:d,tooltipEventType:u,chartName:f}=t,p=r,h=s,m=a;if(!d||!p||f!=="ScatterChart"&&u!=="axis")return null;var g,y,v;if(f==="ScatterChart")g=p,y=Uje,v=zn.cursorLine;else if(f==="BarChart")g=Hje(c,p,i,l),y=lV,v=zn.cursorRectangle;else if(c==="radial"&&K6(p)){var{cx:b,cy:w,radius:j,startAngle:N,endAngle:S}=dV(p);g={cx:b,cy:w,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},y=fV,v=zn.cursorLine}else g={points:T1e(c,p,i)},y=P2,v=zn.cursorLine;var _=typeof d=="object"&&"className"in d?d.className:void 0,k=nm(nm(nm(nm({stroke:"#ccc",pointerEvents:"none"},i),g),Gf(d)),{},{payload:h,payloadIndex:m,className:Xe("recharts-tooltip-cursor",_)});return x.createElement(Aa,{zIndex:(n=t.zIndex)!==null&&n!==void 0?n:v},x.createElement(e_e,{cursor:d,cursorComp:y,cursorProps:k}))}function n_e(t){var n=wCe(),r=uje(),s=dv(),a=PCe();return n==null||r==null||s==null||a==null?null:x.createElement(t_e,$1({},t,{offset:r,layout:s,tooltipAxisBandSize:n,chartName:a}))}var bU=x.createContext(null),r_e=()=>x.useContext(bU),wU={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,p,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,p||d,h),g=r?r+u:u;return d._events[g]?d._events[g].fn?d._events[g]=[d._events[g],m]:d._events[g].push(m):(d._events[g]=m,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new s:delete d._events[u]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)n.call(f,p)&&u.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u){var f=r?r+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,m=p.length,g=new Array(m);h<m;h++)g[h]=p[h].fn;return g},c.prototype.listenerCount=function(u){var f=r?r+u:u,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(u,f,p,h,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],b=arguments.length,w,j;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,p),!0;case 4:return v.fn.call(v.context,f,p,h),!0;case 5:return v.fn.call(v.context,f,p,h,m),!0;case 6:return v.fn.call(v.context,f,p,h,m,g),!0}for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];v.fn.apply(v.context,w)}else{var N=v.length,S;for(j=0;j<N;j++)switch(v[j].once&&this.removeListener(u,v[j].fn,void 0,!0),b){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,f);break;case 3:v[j].fn.call(v[j].context,f,p);break;case 4:v[j].fn.call(v[j].context,f,p,h);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];v[j].fn.apply(v[j].context,w)}}return!0},c.prototype.on=function(u,f,p){return i(this,u,f,p,!1)},c.prototype.once=function(u,f,p){return i(this,u,f,p,!0)},c.prototype.removeListener=function(u,f,p,h){var m=r?r+u:u;if(!this._events[m])return this;if(!f)return l(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!h||g.once)&&(!p||g.context===p)&&l(this,m);else{for(var y=0,v=[],b=g.length;y<b;y++)(g[y].fn!==f||h&&!g[y].once||p&&g[y].context!==p)&&v.push(g[y]);v.length?this._events[m]=v.length===1?v[0]:v:l(this,m)}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&l(this,f)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(wU);var s_e=wU.exports;const a_e=Vs(s_e);var ap=new a_e,F1="recharts.syncEvent.tooltip",cR="recharts.syncEvent.brush";function jU(t,n){if(n){var r=Number.parseInt(n,10);if(!va(r))return t==null?void 0:t[r]}}var i_e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},NU=Nr({name:"options",initialState:i_e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),o_e=NU.reducer,{createEventEmitter:l_e}=NU.actions;function c_e(t){return t.tooltip.syncInteraction}var d_e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},SU=Nr({name:"chartData",initialState:d_e,reducers:{setChartData(t,n){if(t.chartData=n.payload,n.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}n.payload.length>0&&t.dataEndIndex!==n.payload.length-1&&(t.dataEndIndex=n.payload.length-1)},setComputedData(t,n){t.computedData=n.payload},setDataStartEndIndexes(t,n){var{startIndex:r,endIndex:s}=n.payload;r!=null&&(t.dataStartIndex=r),s!=null&&(t.dataEndIndex=s)}}}),{setChartData:dR,setDataStartEndIndexes:u_e,setComputedData:t5e}=SU.actions,f_e=SU.reducer,p_e=["x","y"];function uR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function dc(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?uR(Object(r),!0).forEach(function(s){h_e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function h_e(t,n,r){return(n=m_e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function m_e(t){var n=x_e(t,"string");return typeof n=="symbol"?n:n+""}function x_e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function g_e(t,n){if(t==null)return{};var r,s,a=y_e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function y_e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function v_e(){var t=Ne(rC),n=Ne(sC),r=gt(),s=Ne(h7),a=Ne(vi),i=dv(),l=cv(),c=Ne(d=>d.rootProps.className);x.useEffect(()=>{if(t==null)return Xl;var d=(u,f,p)=>{if(n!==p&&t===u){if(s==="index"){var h;if(l&&f!==null&&f!==void 0&&(h=f.payload)!==null&&h!==void 0&&h.coordinate&&f.payload.sourceViewBox){var m=f.payload.coordinate,{x:g,y}=m,v=g_e(m,p_e),{x:b,y:w,width:j,height:N}=f.payload.sourceViewBox,S=dc(dc({},v),{},{x:l.x+(j?(g-b)/j:0)*l.width,y:l.y+(N?(y-w)/N:0)*l.height});r(dc(dc({},f),{},{payload:dc(dc({},f.payload),{},{coordinate:S})}))}else r(f);return}if(a!=null){var _;if(typeof s=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},C=s(a,k);_=a[C]}else s==="value"&&(_=a.find(I=>String(I.value)===f.payload.label));var{coordinate:P}=f.payload;if(_==null||f.payload.active===!1||P==null||l==null){r(D1({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:E,y:M}=P,T=Math.min(E,l.x+l.width),A=Math.min(M,l.y+l.height),R={x:i==="horizontal"?_.coordinate:T,y:i==="horizontal"?A:_.coordinate},O=D1({active:f.payload.active,coordinate:R,dataKey:f.payload.dataKey,index:String(_.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(O)}}};return ap.on(F1,d),()=>{ap.off(F1,d)}},[c,r,n,t,s,a,i,l])}function b_e(){var t=Ne(rC),n=Ne(sC),r=gt();x.useEffect(()=>{if(t==null)return Xl;var s=(a,i,l)=>{n!==l&&t===a&&r(u_e(i))};return ap.on(cR,s),()=>{ap.off(cR,s)}},[r,n,t])}function w_e(){var t=gt();x.useEffect(()=>{t(l_e())},[t]),v_e(),b_e()}function j_e(t,n,r,s,a,i){var l=Ne(m=>ECe(m,t,n)),c=Ne(sC),d=Ne(rC),u=Ne(h7),f=Ne(c_e),p=f==null?void 0:f.active,h=cv();x.useEffect(()=>{if(!p&&d!=null&&c!=null){var m=D1({active:i,coordinate:r,dataKey:l,index:a,label:typeof s=="number"?String(s):s,sourceViewBox:h});ap.emit(F1,d,m,c)}},[p,r,l,a,s,c,d,u,i,h])}function fR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function pR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?fR(Object(r),!0).forEach(function(s){N_e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function N_e(t,n,r){return(n=S_e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function S_e(t){var n=k_e(t,"string");return typeof n=="symbol"?n:n+""}function k_e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function C_e(t){return t.dataKey}function __e(t,n){return x.isValidElement(t)?x.cloneElement(t,n):typeof t=="function"?x.createElement(t,n):x.createElement(wje,n)}var hR=[],P_e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ql.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Oc(t){var n,r,s=or(t,P_e),{active:a,allowEscapeViewBox:i,animationDuration:l,animationEasing:c,content:d,filterNull:u,isAnimationActive:f,offset:p,payloadUniqBy:h,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:b,shared:w,trigger:j,defaultIndex:N,portal:S,axisId:_}=s,k=gt(),C=typeof N=="number"?String(N):N;x.useEffect(()=>{k(A2e({shared:w,trigger:j,axisId:_,active:a,defaultIndex:C}))},[k,w,j,_,a,C]);var P=cv(),E=rV(),M=S2e(w),{activeIndex:T,isActive:A}=(n=Ne(G=>OCe(G,M,j,C)))!==null&&n!==void 0?n:{},R=Ne(G=>MCe(G,M,j,C)),O=Ne(G=>yU(G,M,j,C)),I=Ne(G=>TCe(G,M,j,C)),L=R,D=r_e(),$=(r=a??A)!==null&&r!==void 0?r:!1,[F,K]=Cbe([L,$]),J=M==="axis"?O:void 0;j_e(M,j,I,J,T,$);var Y=S??D;if(Y==null||P==null||M==null)return null;var ee=L??hR;$||(ee=hR),u&&ee.length&&(ee=cbe(ee.filter(G=>G.value!=null&&(G.hide!==!0||s.includeHidden)),h,C_e));var Q=ee.length>0,ue=x.createElement(Pje,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:f,active:$,coordinate:I,hasPayload:Q,offset:p,position:m,reverseDirection:g,useTranslate3d:y,viewBox:P,wrapperStyle:v,lastBoundingBox:F,innerRef:K,hasPortalFromProps:!!S},__e(d,pR(pR({},s),{},{payload:ee,label:J,active:$,activeIndex:T,coordinate:I,accessibilityLayer:E})));return x.createElement(x.Fragment,null,jo.createPortal(ue,Y),$&&x.createElement(n_e,{cursor:b,tooltipEventType:M,coordinate:I,payload:ee,index:T}))}var ia=t=>null;ia.displayName="Cell";function A_e(t,n,r){return(n=E_e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function E_e(t){var n=T_e(t,"string");return typeof n=="symbol"?n:n+""}function T_e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}class M_e{constructor(n){A_e(this,"cache",new Map),this.maxSize=n}get(n){var r=this.cache.get(n);return r!==void 0&&(this.cache.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(n,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function mR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function O_e(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?mR(Object(r),!0).forEach(function(s){R_e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function R_e(t,n,r){return(n=I_e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function I_e(t){var n=D_e(t,"string");return typeof n=="symbol"?n:n+""}function D_e(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var L_e={cacheSize:2e3,enableCache:!0},kU=O_e({},L_e),xR=new M_e(kU.cacheSize),$_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gR="recharts_measurement_span";function F_e(t,n){var r=n.fontSize||"",s=n.fontFamily||"",a=n.fontWeight||"",i=n.fontStyle||"",l=n.letterSpacing||"",c=n.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(l,"|").concat(c)}var yR=(t,n)=>{try{var r=document.getElementById(gR);r||(r=document.createElement("span"),r.setAttribute("id",gR),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,$_e,n),r.textContent="".concat(t);var s=r.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},lf=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n==null||Ql.isSsr)return{width:0,height:0};if(!kU.enableCache)return yR(n,r);var s=F_e(n,r),a=xR.get(s);if(a)return a;var i=yR(n,r);return xR.set(s,i),i},vR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,z_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},V_e=Object.keys(CU),Rc="NaN";function U_e(t,n){return t*CU[n]}class cr{static parse(n){var r,[,s,a]=(r=z_e.exec(n))!==null&&r!==void 0?r:[];return new cr(parseFloat(s),a??"")}constructor(n,r){this.num=n,this.unit=r,this.num=n,this.unit=r,va(n)&&(this.unit=""),r!==""&&!B_e.test(r)&&(this.num=NaN,this.unit=""),V_e.includes(r)&&(this.num=U_e(n,r),this.unit="px")}add(n){return this.unit!==n.unit?new cr(NaN,""):new cr(this.num+n.num,this.unit)}subtract(n){return this.unit!==n.unit?new cr(NaN,""):new cr(this.num-n.num,this.unit)}multiply(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new cr(NaN,""):new cr(this.num*n.num,this.unit||n.unit)}divide(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new cr(NaN,""):new cr(this.num/n.num,this.unit||n.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return va(this.num)}}function _U(t){if(t.includes(Rc))return Rc;for(var n=t;n.includes("*")||n.includes("/");){var r,[,s,a,i]=(r=vR.exec(n))!==null&&r!==void 0?r:[],l=cr.parse(s??""),c=cr.parse(i??""),d=a==="*"?l.multiply(c):l.divide(c);if(d.isNaN())return Rc;n=n.replace(vR,d.toString())}for(;n.includes("+")||/.-\d+(?:\.\d+)?/.test(n);){var u,[,f,p,h]=(u=bR.exec(n))!==null&&u!==void 0?u:[],m=cr.parse(f??""),g=cr.parse(h??""),y=p==="+"?m.add(g):m.subtract(g);if(y.isNaN())return Rc;n=n.replace(bR,y.toString())}return n}var wR=/\(([^()]*)\)/;function H_e(t){for(var n=t,r;(r=wR.exec(n))!=null;){var[,s]=r;n=n.replace(wR,_U(s))}return n}function W_e(t){var n=t.replace(/\s+/g,"");return n=H_e(n),n=_U(n),n}function K_e(t){try{return W_e(t)}catch{return Rc}}function Lb(t){var n=K_e(t.slice(5,-1));return n===Rc?"":n}var q_e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],G_e=["dx","dy","angle","className","breakAll"];function B1(){return B1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},B1.apply(null,arguments)}function jR(t,n){if(t==null)return{};var r,s,a=Y_e(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Y_e(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var PU=/[ \f\n\r\t\v\u2028\u2029]+/,AU=t=>{var{children:n,breakAll:r,style:s}=t;try{var a=[];xn(n)||(r?a=n.toString().split(""):a=n.toString().split(PU));var i=a.map(c=>({word:c,width:lf(c,s).width})),l=r?0:lf("",s).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function X_e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var EU=(t,n,r,s)=>t.reduce((a,i)=>{var{word:l,width:c}=i,d=a[a.length-1];if(d&&c!=null&&(n==null||s||d.width+c+r<Number(n)))d.words.push(l),d.width+=c+r;else{var u={words:[l],width:c};a.push(u)}return a},[]),TU=t=>t.reduce((n,r)=>n.width>r.width?n:r),J_e="",NR=(t,n,r,s,a,i,l,c)=>{var d=t.slice(0,n),u=AU({breakAll:r,style:s,children:d+J_e});if(!u)return[!1,[]];var f=EU(u.wordsWithComputedWidth,i,l,c),p=f.length>a||TU(f).width>Number(i);return[p,f]},Q_e=(t,n,r,s,a)=>{var{maxLines:i,children:l,style:c,breakAll:d}=t,u=Pe(i),f=String(l),p=EU(n,s,r,a);if(!u||a)return p;var h=p.length>i||TU(p).width>Number(s);if(!h)return p;for(var m=0,g=f.length-1,y=0,v;m<=g&&y<=f.length-1;){var b=Math.floor((m+g)/2),w=b-1,[j,N]=NR(f,w,d,c,i,s,r,a),[S]=NR(f,b,d,c,i,s,r,a);if(!j&&!S&&(m=b+1),j&&S&&(g=b-1),!j&&S){v=N;break}y++}return v||p},SR=t=>{var n=xn(t)?[]:t.toString().split(PU);return[{words:n,width:void 0}]},Z_e=t=>{var{width:n,scaleToFit:r,children:s,style:a,breakAll:i,maxLines:l}=t;if((n||r)&&!Ql.isSsr){var c,d,u=AU({breakAll:i,children:s,style:a});if(u){var{wordsWithComputedWidth:f,spaceWidth:p}=u;c=f,d=p}else return SR(s);return Q_e({breakAll:i,children:s,maxLines:l,style:a},c,d,n,!!r)}return SR(s)},MU="#808080",ePe={breakAll:!1,capHeight:"0.71em",fill:MU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Tv=x.forwardRef((t,n)=>{var r=or(t,ePe),{x:s,y:a,lineHeight:i,capHeight:l,fill:c,scaleToFit:d,textAnchor:u,verticalAnchor:f}=r,p=jR(r,q_e),h=x.useMemo(()=>Z_e({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:m,dy:g,angle:y,className:v,breakAll:b}=p,w=jR(p,G_e);if(!ba(s)||!ba(a)||h.length===0)return null;var j=Number(s)+(Pe(m)?m:0),N=Number(a)+(Pe(g)?g:0);if(!Bt(j)||!Bt(N))return null;var S;switch(f){case"start":S=Lb("calc(".concat(l,")"));break;case"middle":S=Lb("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:S=Lb("calc(".concat(h.length-1," * -").concat(i,")"));break}var _=[];if(d){var k=h[0].width,{width:C}=p;_.push("scale(".concat(Pe(C)&&Pe(k)?C/k:1,")"))}return y&&_.push("rotate(".concat(y,", ").concat(j,", ").concat(N,")")),_.length&&(w.transform=_.join(" ")),x.createElement("text",B1({},ds(w),{ref:n,x:j,y:N,className:Xe("recharts-text",v),textAnchor:u,fill:c.includes("url")?MU:c}),h.map((P,E)=>{var M=P.words.join(b?"":" ");return x.createElement("tspan",{x:j,dy:E===0?S:i,key:"".concat(M,"-").concat(E)},M)}))});Tv.displayName="Text";var tPe=["labelRef"];function nPe(t,n){if(t==null)return{};var r,s,a=rPe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rPe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function kR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Rt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kR(Object(r),!0).forEach(function(s){sPe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function sPe(t,n,r){return(n=aPe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function aPe(t){var n=iPe(t,"string");return typeof n=="symbol"?n:n+""}function iPe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$a.apply(null,arguments)}var OU=x.createContext(null),oPe=t=>{var{x:n,y:r,upperWidth:s,lowerWidth:a,width:i,height:l,children:c}=t,d=x.useMemo(()=>({x:n,y:r,upperWidth:s,lowerWidth:a,width:i,height:l}),[n,r,s,a,i,l]);return x.createElement(OU.Provider,{value:d},c)},RU=()=>{var t=x.useContext(OU),n=cv();return t||Z8(n)},lPe=x.createContext(null),cPe=()=>{var t=x.useContext(lPe),n=Ne(v7);return t||n},dPe=t=>{var{value:n,formatter:r}=t,s=xn(t.children)?n:t.children;return typeof r=="function"?r(s):s},FC=t=>t!=null&&typeof t=="function",uPe=(t,n)=>{var r=Cn(n-t),s=Math.min(Math.abs(n-t),360);return r*s},fPe=(t,n,r,s,a)=>{var{offset:i,className:l}=t,{cx:c,cy:d,innerRadius:u,outerRadius:f,startAngle:p,endAngle:h,clockWise:m}=a,g=(u+f)/2,y=uPe(p,h),v=y>=0?1:-1,b,w;switch(n){case"insideStart":b=p+v*i,w=m;break;case"insideEnd":b=h-v*i,w=!m;break;case"end":b=h+v*i,w=m;break;default:throw new Error("Unsupported position ".concat(n))}w=y<=0?w:!w;var j=Wt(c,d,g,b),N=Wt(c,d,g,b+(w?1:-1)*359),S="M".concat(j.x,",").concat(j.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(N.x,",").concat(N.y),_=xn(t.id)?Yf("recharts-radial-line-"):t.id;return x.createElement("text",$a({},s,{dominantBaseline:"central",className:Xe("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:_,d:S})),x.createElement("textPath",{xlinkHref:"#".concat(_)},r))},pPe=(t,n,r)=>{var{cx:s,cy:a,innerRadius:i,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(r==="outside"){var{x:f,y:p}=Wt(s,a,l+n,u);return{x:f,y:p,textAnchor:f>=s?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+l)/2,{x:m,y:g}=Wt(s,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},z1=t=>"cx"in t&&Pe(t.cx),hPe=(t,n)=>{var{parentViewBox:r,offset:s,position:a}=t,i;r!=null&&!z1(r)&&(i=r);var{x:l,y:c,upperWidth:d,lowerWidth:u,height:f}=n,p=l,h=l+(d-u)/2,m=(p+h)/2,g=(d+u)/2,y=p+d/2,v=f>=0?1:-1,b=v*s,w=v>0?"end":"start",j=v>0?"start":"end",N=d>=0?1:-1,S=N*s,_=N>0?"end":"start",k=N>0?"start":"end";if(a==="top"){var C={x:p+d/2,y:c-b,textAnchor:"middle",verticalAnchor:w};return Rt(Rt({},C),i?{height:Math.max(c-i.y,0),width:d}:{})}if(a==="bottom"){var P={x:h+u/2,y:c+f+b,textAnchor:"middle",verticalAnchor:j};return Rt(Rt({},P),i?{height:Math.max(i.y+i.height-(c+f),0),width:u}:{})}if(a==="left"){var E={x:m-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Rt(Rt({},E),i?{width:Math.max(E.x-i.x,0),height:f}:{})}if(a==="right"){var M={x:m+g+S,y:c+f/2,textAnchor:k,verticalAnchor:"middle"};return Rt(Rt({},M),i?{width:Math.max(i.x+i.width-M.x,0),height:f}:{})}var T=i?{width:g,height:f}:{};return a==="insideLeft"?Rt({x:m+S,y:c+f/2,textAnchor:k,verticalAnchor:"middle"},T):a==="insideRight"?Rt({x:m+g-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},T):a==="insideTop"?Rt({x:p+d/2,y:c+b,textAnchor:"middle",verticalAnchor:j},T):a==="insideBottom"?Rt({x:h+u/2,y:c+f-b,textAnchor:"middle",verticalAnchor:w},T):a==="insideTopLeft"?Rt({x:p+S,y:c+b,textAnchor:k,verticalAnchor:j},T):a==="insideTopRight"?Rt({x:p+d-S,y:c+b,textAnchor:_,verticalAnchor:j},T):a==="insideBottomLeft"?Rt({x:h+S,y:c+f-b,textAnchor:k,verticalAnchor:w},T):a==="insideBottomRight"?Rt({x:h+u-S,y:c+f-b,textAnchor:_,verticalAnchor:w},T):a&&typeof a=="object"&&(Pe(a.x)||si(a.x))&&(Pe(a.y)||si(a.y))?Rt({x:l+Un(a.x,g),y:c+Un(a.y,f),textAnchor:"end",verticalAnchor:"end"},T):Rt({x:y,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},T)},mPe={offset:5,zIndex:zn.label};function Ri(t){var n=or(t,mPe),{viewBox:r,position:s,value:a,children:i,content:l,className:c="",textBreakAll:d,labelRef:u}=n,f=cPe(),p=RU(),h=s==="center"?p:f??p,m,g,y;if(r==null?m=h:z1(r)?m=r:m=Z8(r),!m||xn(a)&&xn(i)&&!x.isValidElement(l)&&typeof l!="function")return null;var v=Rt(Rt({},n),{},{viewBox:m});if(x.isValidElement(l)){var{labelRef:b}=v,w=nPe(v,tPe);return x.cloneElement(l,w)}if(typeof l=="function"){if(g=x.createElement(l,v),x.isValidElement(g))return g}else g=dPe(n);var j=ds(n);if(z1(m)){if(s==="insideStart"||s==="insideEnd"||s==="end")return fPe(n,s,g,j,m);y=pPe(m,n.offset,n.position)}else y=hPe(n,m);return x.createElement(Aa,{zIndex:n.zIndex},x.createElement(Tv,$a({ref:u,className:Xe("recharts-label",c)},j,y,{textAnchor:X_e(j.textAnchor)?j.textAnchor:y.textAnchor,breakAll:d}),g))}Ri.displayName="Label";var xPe=(t,n,r)=>{if(!t)return null;var s={viewBox:n,labelRef:r};return t===!0?x.createElement(Ri,$a({key:"label-implicit"},s)):ba(t)?x.createElement(Ri,$a({key:"label-implicit",value:t},s)):x.isValidElement(t)?t.type===Ri?x.cloneElement(t,Rt({key:"label-implicit"},s)):x.createElement(Ri,$a({key:"label-implicit",content:t},s)):FC(t)?x.createElement(Ri,$a({key:"label-implicit",content:t},s)):t&&typeof t=="object"?x.createElement(Ri,$a({},t,{key:"label-implicit"},s)):null};function gPe(t){var{label:n,labelRef:r}=t,s=RU();return xPe(n,s,r)||null}var IU={},DU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return r[r.length-1]}t.last=n})(DU);var LU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=n})(LU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=DU,r=LU,s=Jy;function a(i){if(s.isArrayLike(i))return n.last(r.toArray(i))}t.last=a})(IU);var yPe=IU.last;const vPe=Vs(yPe);var bPe=["valueAccessor"],wPe=["dataKey","clockWise","id","textBreakAll","zIndex"];function bg(){return bg=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},bg.apply(null,arguments)}function CR(t,n){if(t==null)return{};var r,s,a=jPe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jPe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var NPe=t=>Array.isArray(t.value)?vPe(t.value):t.value,$U=x.createContext(void 0),SPe=$U.Provider,FU=x.createContext(void 0),kPe=FU.Provider;function CPe(){return x.useContext($U)}function _Pe(){return x.useContext(FU)}function $m(t){var{valueAccessor:n=NPe}=t,r=CR(t,bPe),{dataKey:s,clockWise:a,id:i,textBreakAll:l,zIndex:c}=r,d=CR(r,wPe),u=CPe(),f=_Pe(),p=u||f;return!p||!p.length?null:x.createElement(Aa,{zIndex:c??zn.label},x.createElement(sr,{className:"recharts-label-list"},p.map((h,m)=>{var g,y=xn(s)?n(h,m):St(h&&h.payload,s),v=xn(i)?{}:{id:"".concat(i,"-").concat(m)};return x.createElement(Ri,bg({key:"label-".concat(m)},ds(h),d,v,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:l,viewBox:h.viewBox,index:m,zIndex:0}))})))}$m.displayName="LabelList";function BU(t){var{label:n}=t;return n?n===!0?x.createElement($m,{key:"labelList-implicit"}):x.isValidElement(n)||FC(n)?x.createElement($m,{key:"labelList-implicit",content:n}):typeof n=="object"?x.createElement($m,bg({key:"labelList-implicit"},n,{type:String(n.type)})):null:null}var zU=t=>t.graphicalItems.polarItems,PPe=U([yt,Ip],dC),Mv=U([zU,Pt,PPe],fC),APe=U([Mv],pC),Ov=U([APe,Q2],hC),EPe=U([Ov,Pt,Mv],xC);U([Ov,Pt,Mv],(t,n,r)=>r.length>0?t.flatMap(s=>r.flatMap(a=>{var i,l=St(s,(i=n.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(n==null?void 0:n.dataKey)!=null?t.map(s=>({value:St(s,n.dataKey),errorDomain:[]})):t.map(s=>({value:s,errorDomain:[]})));var _R=()=>{},TPe=U([Ov,Pt,Mv,_v,yt],bC),MPe=U([Pt,yC,vC,_R,TPe,_R,Ye,yt],wC),VU=U([Pt,Ye,Ov,EPe,Rp,yt,MPe],jC),OPe=U([VU,Pt,Qd],kC);U([Pt,VU,OPe,yt],_C);var RPe={radiusAxis:{},angleAxis:{}},UU=Nr({name:"polarAxis",initialState:RPe,reducers:{addRadiusAxis(t,n){t.radiusAxis[n.payload.id]=n.payload},removeRadiusAxis(t,n){delete t.radiusAxis[n.payload.id]},addAngleAxis(t,n){t.angleAxis[n.payload.id]=n.payload},removeAngleAxis(t,n){delete t.angleAxis[n.payload.id]}}}),{addRadiusAxis:n5e,removeRadiusAxis:r5e,addAngleAxis:s5e,removeAngleAxis:a5e}=UU.actions,IPe=UU.reducer;function PR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function AR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?PR(Object(r),!0).forEach(function(s){DPe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function DPe(t,n,r){return(n=LPe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function LPe(t){var n=$Pe(t,"string");return typeof n=="symbol"?n:n+""}function $Pe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var FPe=(t,n)=>n,BC=U([zU,FPe],(t,n)=>t.filter(r=>r.type==="pie").find(r=>r.id===n)),BPe=[],zC=(t,n,r)=>(r==null?void 0:r.length)===0?BPe:r,HU=U([Q2,BC,zC],(t,n,r)=>{var{chartData:s}=t;if(n!=null){var a;if((n==null?void 0:n.data)!=null&&n.data.length>0?a=n.data:a=s,(!a||!a.length)&&r!=null&&(a=r.map(i=>AR(AR({},n.presentationProps),i.props))),a!=null)return a}}),zPe=U([HU,BC,zC],(t,n,r)=>{if(!(t==null||n==null))return t.map((s,a)=>{var i,l=St(s,n.nameKey,n.name),c;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[a].props.fill:typeof s=="object"&&s!=null&&"fill"in s?c=s.fill:c=n.fill,{value:sv(l,n.dataKey),color:c,payload:s,type:n.legendType}})}),VPe=U([HU,BC,zC,an],(t,n,r,s)=>{if(!(n==null||t==null))return HAe({offset:s,pieSettings:n,displayedData:t,cells:r})}),WU={exports:{}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=typeof Symbol=="function"&&Symbol.for,VC=yn?Symbol.for("react.element"):60103,UC=yn?Symbol.for("react.portal"):60106,Rv=yn?Symbol.for("react.fragment"):60107,Iv=yn?Symbol.for("react.strict_mode"):60108,Dv=yn?Symbol.for("react.profiler"):60114,Lv=yn?Symbol.for("react.provider"):60109,$v=yn?Symbol.for("react.context"):60110,HC=yn?Symbol.for("react.async_mode"):60111,Fv=yn?Symbol.for("react.concurrent_mode"):60111,Bv=yn?Symbol.for("react.forward_ref"):60112,zv=yn?Symbol.for("react.suspense"):60113,UPe=yn?Symbol.for("react.suspense_list"):60120,Vv=yn?Symbol.for("react.memo"):60115,Uv=yn?Symbol.for("react.lazy"):60116,HPe=yn?Symbol.for("react.block"):60121,WPe=yn?Symbol.for("react.fundamental"):60117,KPe=yn?Symbol.for("react.responder"):60118,qPe=yn?Symbol.for("react.scope"):60119;function Wr(t){if(typeof t=="object"&&t!==null){var n=t.$$typeof;switch(n){case VC:switch(t=t.type,t){case HC:case Fv:case Rv:case Dv:case Iv:case zv:return t;default:switch(t=t&&t.$$typeof,t){case $v:case Bv:case Uv:case Vv:case Lv:return t;default:return n}}case UC:return n}}}function KU(t){return Wr(t)===Fv}et.AsyncMode=HC;et.ConcurrentMode=Fv;et.ContextConsumer=$v;et.ContextProvider=Lv;et.Element=VC;et.ForwardRef=Bv;et.Fragment=Rv;et.Lazy=Uv;et.Memo=Vv;et.Portal=UC;et.Profiler=Dv;et.StrictMode=Iv;et.Suspense=zv;et.isAsyncMode=function(t){return KU(t)||Wr(t)===HC};et.isConcurrentMode=KU;et.isContextConsumer=function(t){return Wr(t)===$v};et.isContextProvider=function(t){return Wr(t)===Lv};et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===VC};et.isForwardRef=function(t){return Wr(t)===Bv};et.isFragment=function(t){return Wr(t)===Rv};et.isLazy=function(t){return Wr(t)===Uv};et.isMemo=function(t){return Wr(t)===Vv};et.isPortal=function(t){return Wr(t)===UC};et.isProfiler=function(t){return Wr(t)===Dv};et.isStrictMode=function(t){return Wr(t)===Iv};et.isSuspense=function(t){return Wr(t)===zv};et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rv||t===Fv||t===Dv||t===Iv||t===zv||t===UPe||typeof t=="object"&&t!==null&&(t.$$typeof===Uv||t.$$typeof===Vv||t.$$typeof===Lv||t.$$typeof===$v||t.$$typeof===Bv||t.$$typeof===WPe||t.$$typeof===KPe||t.$$typeof===qPe||t.$$typeof===HPe)};et.typeOf=Wr;WU.exports=et;var GPe=WU.exports,ER=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",TR=null,$b=null,qU=t=>{if(t===TR&&Array.isArray($b))return $b;var n=[];return x.Children.forEach(t,r=>{xn(r)||(GPe.isFragment(r)?n=n.concat(qU(r.props.children)):n.push(r))}),$b=n,TR=t,n};function WC(t,n){var r=[],s=[];return Array.isArray(n)?s=n.map(a=>ER(a)):s=[ER(n)],qU(t).forEach(a=>{var i=Il(a,"type.displayName")||Il(a,"type.name");i&&s.indexOf(i)!==-1&&r.push(a)}),r}var GU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function n(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}t.isPlainObject=n})(GU);var YPe=GU.isPlainObject;const XPe=Vs(YPe);function MR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function OR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?MR(Object(r),!0).forEach(function(s){JPe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function JPe(t,n,r){return(n=QPe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function QPe(t){var n=ZPe(t,"string");return typeof n=="symbol"?n:n+""}function ZPe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function wg(){return wg=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},wg.apply(null,arguments)}var RR=(t,n,r,s,a)=>{var i=r-s,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-i/2,",").concat(n+a),l+="L ".concat(t+r-i/2-s,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},eAe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tAe=t=>{var n=or(t,eAe),{x:r,y:s,upperWidth:a,lowerWidth:i,height:l,className:c}=n,{animationEasing:d,animationDuration:u,animationBegin:f,isUpdateAnimationActive:p}=n,h=x.useRef(null),[m,g]=x.useState(-1),y=x.useRef(a),v=x.useRef(i),b=x.useRef(l),w=x.useRef(r),j=x.useRef(s),N=pv(t,"trapezoid-");if(x.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var R=h.current.getTotalLength();R&&g(R)}catch{}},[]),r!==+r||s!==+s||a!==+a||i!==+i||l!==+l||a===0&&i===0||l===0)return null;var S=Xe("recharts-trapezoid",c);if(!p)return x.createElement("g",null,x.createElement("path",wg({},ds(n),{className:S,d:RR(r,s,a,i,l)})));var _=y.current,k=v.current,C=b.current,P=w.current,E=j.current,M="0px ".concat(m===-1?1:m,"px"),T="".concat(m,"px 0px"),A=sV(["strokeDasharray"],u,d);return x.createElement(fv,{animationId:N,key:N,canBegin:m>0,duration:u,easing:d,isActive:p,begin:f},R=>{var O=Qt(_,a,R),I=Qt(k,i,R),L=Qt(C,l,R),D=Qt(P,r,R),$=Qt(E,s,R);h.current&&(y.current=O,v.current=I,b.current=L,w.current=D,j.current=$);var F=R>0?{transition:A,strokeDasharray:T}:{strokeDasharray:M};return x.createElement("path",wg({},ds(n),{className:S,d:RR(D,$,O,I,L),ref:h,style:OR(OR({},F),n.style)}))})},nAe=["option","shapeType","propTransformer","activeClassName","isActive"];function rAe(t,n){if(t==null)return{};var r,s,a=sAe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function sAe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function IR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function jg(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?IR(Object(r),!0).forEach(function(s){aAe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function aAe(t,n,r){return(n=iAe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function iAe(t){var n=oAe(t,"string");return typeof n=="symbol"?n:n+""}function oAe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function lAe(t,n){return jg(jg({},n),t)}function cAe(t,n){return t==="symbols"}function DR(t){var{shapeType:n,elementProps:r}=t;switch(n){case"rectangle":return x.createElement(lV,r);case"trapezoid":return x.createElement(tAe,r);case"sector":return x.createElement(fV,r);case"symbols":if(cAe(n))return x.createElement(W6,r);break;case"curve":return x.createElement(P2,r);default:return null}}function dAe(t){return x.isValidElement(t)?t.props:t}function YU(t){var{option:n,shapeType:r,propTransformer:s=lAe,activeClassName:a="recharts-active-shape",isActive:i}=t,l=rAe(t,nAe),c;if(x.isValidElement(n))c=x.cloneElement(n,jg(jg({},l),dAe(n)));else if(typeof n=="function")c=n(l);else if(XPe(n)&&typeof n!="boolean"){var d=s(n,l);c=x.createElement(DR,{shapeType:r,elementProps:d})}else{var u=l;c=x.createElement(DR,{shapeType:r,elementProps:u})}return i?x.createElement(sr,{className:a},c):c}var KC=(t,n)=>{var r=gt();return(s,a)=>i=>{t==null||t(s,a,i),r(J7({activeIndex:String(a),activeDataKey:n,activeCoordinate:s.tooltipPosition}))}},qC=t=>{var n=gt();return(r,s)=>a=>{t==null||t(r,s,a),n(E2e())}},GC=(t,n)=>{var r=gt();return(s,a)=>i=>{t==null||t(s,a,i),r(T2e({activeIndex:String(a),activeDataKey:n,activeCoordinate:s.tooltipPosition}))}};function XU(t){var{fn:n,args:r}=t,s=gt(),a=Hr();return x.useLayoutEffect(()=>{if(!a){var i=n(r);return s(_2e(i)),()=>{s(P2e(i))}}},[n,r,s,a]),null}function uAe(t){var{legendPayload:n}=t,r=gt(),s=Hr();return x.useLayoutEffect(()=>s?Xl:(r(tV(n)),()=>{r(nV(n))}),[r,s,n]),null}function fAe(t){var{legendPayload:n}=t,r=gt(),s=Ne(Ye);return x.useLayoutEffect(()=>s!=="centric"&&s!=="radial"?Xl:(r(tV(n)),()=>{r(nV(n))}),[r,s,n]),null}var Fb,pAe=()=>{var[t]=x.useState(()=>Yf("uid-"));return t},hAe=(Fb=Ig.useId)!==null&&Fb!==void 0?Fb:pAe;function JU(t,n){var r=hAe();return n||(t?"".concat(t,"-").concat(r):r)}var mAe=x.createContext(void 0),QU=t=>{var{id:n,type:r,children:s}=t,a=JU("recharts-".concat(r),n);return x.createElement(mAe.Provider,{value:a},s(a))},xAe={cartesianItems:[],polarItems:[]},ZU=Nr({name:"graphicalItems",initialState:xAe,reducers:{addCartesianGraphicalItem:{reducer(t,n){t.cartesianItems.push(n.payload)},prepare:tn()},replaceCartesianGraphicalItem:{reducer(t,n){var{prev:r,next:s}=n.payload,a=Ha(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=s)},prepare:tn()},removeCartesianGraphicalItem:{reducer(t,n){var r=Ha(t).cartesianItems.indexOf(n.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:tn()},addPolarGraphicalItem:{reducer(t,n){t.polarItems.push(n.payload)},prepare:tn()},removePolarGraphicalItem:{reducer(t,n){var r=Ha(t).polarItems.indexOf(n.payload);r>-1&&t.polarItems.splice(r,1)},prepare:tn()}}}),{addCartesianGraphicalItem:gAe,replaceCartesianGraphicalItem:yAe,removeCartesianGraphicalItem:vAe,addPolarGraphicalItem:bAe,removePolarGraphicalItem:wAe}=ZU.actions,jAe=ZU.reducer;function NAe(t){var n=gt(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?n(gAe(t)):r.current!==t&&n(yAe({prev:r.current,next:t})),r.current=t},[n,t]),x.useLayoutEffect(()=>()=>{r.current&&(n(vAe(r.current)),r.current=null)},[n]),null}function SAe(t){var n=gt();return x.useLayoutEffect(()=>(n(bAe(t)),()=>{n(wAe(t))}),[n,t]),null}var kAe=["onMouseEnter","onClick","onMouseLeave"],CAe=["id"],_Ae=["id"];function YC(t,n){if(t==null)return{};var r,s,a=PAe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PAe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function LR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function dt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?LR(Object(r),!0).forEach(function(s){AAe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function AAe(t,n,r){return(n=EAe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function EAe(t){var n=TAe(t,"string");return typeof n=="symbol"?n:n+""}function TAe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yo.apply(null,arguments)}function MAe(t){var n=x.useMemo(()=>WC(t.children,ia),[t.children]),r=Ne(s=>zPe(s,t.id,n));return r==null?null:x.createElement(fAe,{legendPayload:r})}function OAe(t){var{dataKey:n,nameKey:r,sectors:s,stroke:a,strokeWidth:i,fill:l,name:c,hide:d,tooltipType:u}=t;return{dataDefinedOnItem:s.map(f=>f.tooltipPayload),positions:s.map(f=>f.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:l,dataKey:n,nameKey:r,name:sv(c,n),hide:d,type:u,color:l,unit:""}}}var RAe=(t,n)=>t>n?"start":t<n?"end":"middle",IAe=(t,n,r)=>Un(typeof n=="function"?n(t):n,r,r*.8),DAe=(t,n,r)=>{var{top:s,left:a,width:i,height:l}=n,c=cV(i,l),d=a+Un(t.cx,i,i/2),u=s+Un(t.cy,l,l/2),f=Un(t.innerRadius,c,0),p=IAe(r,t.outerRadius,c),h=t.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:d,cy:u,innerRadius:f,outerRadius:p,maxRadius:h}},LAe=(t,n)=>{var r=Cn(n-t),s=Math.min(Math.abs(n-t),360);return r*s};function $Ae(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var FAe=(t,n)=>{if(x.isValidElement(t))return x.cloneElement(t,n);if(typeof t=="function")return t(n);var r=Xe("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return x.createElement(P2,yo({},n,{type:"linear",className:r}))},BAe=(t,n,r)=>{if(x.isValidElement(t))return x.cloneElement(t,n);var s=r;if(typeof t=="function"&&(s=t(n),x.isValidElement(s)))return s;var a=Xe("recharts-pie-label-text",$Ae(t));return x.createElement(Tv,yo({},n,{alignmentBaseline:"middle",className:a}),s)};function zAe(t){var{sectors:n,props:r,showLabels:s}=t,{label:a,labelLine:i,dataKey:l}=r;if(!s||!a||!n)return null;var c=ya(r),d=Gf(a),u=Gf(i),f=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,p=n.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,y=Wt(h.cx,h.cy,h.outerRadius+f,g),v=dt(dt(dt(dt({},c),h),{},{stroke:"none"},d),{},{index:m,textAnchor:RAe(y.x,h.cx)},y),b=dt(dt(dt(dt({},c),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[Wt(h.cx,h.cy,h.outerRadius,g),y],key:"line"});return x.createElement(Aa,{zIndex:zn.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},x.createElement(sr,null,i&&FAe(i,b),BAe(a,v,St(h,l))))});return x.createElement(sr,{className:"recharts-pie-labels"},p)}function VAe(t){var{sectors:n,props:r,showLabels:s}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?x.createElement(BU,{label:a}):x.createElement(zAe,{sectors:n,props:r,showLabels:s})}function UAe(t){var{sectors:n,activeShape:r,inactiveShape:s,allOtherPieProps:a}=t,i=Ne(Bl),{onMouseEnter:l,onClick:c,onMouseLeave:d}=a,u=YC(a,kAe),f=KC(l,a.dataKey),p=qC(d),h=GC(c,a.dataKey);return n==null||n.length===0?null:x.createElement(x.Fragment,null,n.map((m,g)=>{if((m==null?void 0:m.startAngle)===0&&(m==null?void 0:m.endAngle)===0&&n.length!==1)return null;var y=r&&String(g)===i,v=i?s:null,b=y?r:v,w=dt(dt({},m),{},{stroke:m.stroke,tabIndex:-1,[W8]:g,[K8]:a.dataKey});return x.createElement(sr,yo({key:"sector-".concat(m==null?void 0:m.startAngle,"-").concat(m==null?void 0:m.endAngle,"-").concat(m.midAngle,"-").concat(g),tabIndex:-1,className:"recharts-pie-sector"},Xy(u,m,g),{onMouseEnter:f(m,g),onMouseLeave:p(m,g),onClick:h(m,g)}),x.createElement(YU,yo({option:b,isActive:y,shapeType:"sector"},w)))}))}function HAe(t){var n,{pieSettings:r,displayedData:s,cells:a,offset:i}=t,{cornerRadius:l,startAngle:c,endAngle:d,dataKey:u,nameKey:f,tooltipType:p}=r,h=Math.abs(r.minAngle),m=LAe(c,d),g=Math.abs(m),y=s.length<=1?0:(n=r.paddingAngle)!==null&&n!==void 0?n:0,v=s.filter(_=>St(_,u,0)!==0).length,b=(g>=360?v:v-1)*y,w=g-v*h-b,j=s.reduce((_,k)=>{var C=St(k,u,0);return _+(Pe(C)?C:0)},0),N;if(j>0){var S;N=s.map((_,k)=>{var C=St(_,u,0),P=St(_,f,k),E=DAe(r,i,_),M=(Pe(C)?C:0)/j,T,A=dt(dt({},_),a&&a[k]&&a[k].props);k?T=S.endAngle+Cn(m)*y*(C!==0?1:0):T=c;var R=T+Cn(m)*((C!==0?h:0)+M*w),O=(T+R)/2,I=(E.innerRadius+E.outerRadius)/2,L=[{name:P,value:C,payload:A,dataKey:u,type:p}],D=Wt(E.cx,E.cy,I,O);return S=dt(dt(dt(dt({},r.presentationProps),{},{percent:M,cornerRadius:typeof l=="string"?parseFloat(l):l,name:P,tooltipPayload:L,midAngle:O,middleRadius:I,tooltipPosition:D},A),E),{},{value:C,startAngle:T,endAngle:R,payload:A,paddingAngle:Cn(m)*y}),S})}return N}function WAe(t){var{showLabels:n,sectors:r,children:s}=t,a=x.useMemo(()=>!n||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,n]);return x.createElement(kPe,{value:n?a:void 0},s)}function KAe(t){var{props:n,previousSectorsRef:r}=t,{sectors:s,isAnimationActive:a,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=n,h=pv(n,"recharts-pie-"),m=r.current,[g,y]=x.useState(!1),v=x.useCallback(()=>{typeof p=="function"&&p(),y(!1)},[p]),b=x.useCallback(()=>{typeof f=="function"&&f(),y(!0)},[f]);return x.createElement(WAe,{showLabels:!g,sectors:s},x.createElement(fv,{animationId:h,begin:i,duration:l,isActive:a,easing:c,onAnimationStart:b,onAnimationEnd:v,key:h},w=>{var j=[],N=s&&s[0],S=N==null?void 0:N.startAngle;return s==null||s.forEach((_,k)=>{var C=m&&m[k],P=k>0?Il(_,"paddingAngle",0):0;if(C){var E=Qt(C.endAngle-C.startAngle,_.endAngle-_.startAngle,w),M=dt(dt({},_),{},{startAngle:S+P,endAngle:S+E+P});j.push(M),S=M.endAngle}else{var{endAngle:T,startAngle:A}=_,R=Qt(0,T-A,w),O=dt(dt({},_),{},{startAngle:S+P,endAngle:S+R+P});j.push(O),S=O.endAngle}}),r.current=j,x.createElement(sr,null,x.createElement(UAe,{sectors:j,activeShape:d,inactiveShape:u,allOtherPieProps:n}))}),x.createElement(VAe,{showLabels:!g,sectors:s,props:n}),n.children)}var qAe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ql.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:zn.area};function GAe(t){var{id:n}=t,r=YC(t,CAe),{hide:s,className:a,rootTabIndex:i}=t,l=x.useMemo(()=>WC(t.children,ia),[t.children]),c=Ne(f=>VPe(f,n,l)),d=x.useRef(null),u=Xe("recharts-pie",a);return s||c==null?(d.current=null,x.createElement(sr,{tabIndex:i,className:u})):x.createElement(Aa,{zIndex:t.zIndex},x.createElement(XU,{fn:OAe,args:dt(dt({},t),{},{sectors:c})}),x.createElement(sr,{tabIndex:i,className:u},x.createElement(KAe,{props:dt(dt({},r),{},{sectors:c}),previousSectorsRef:d})))}function Ng(t){var n=or(t,qAe),{id:r}=n,s=YC(n,_Ae),a=ya(s);return x.createElement(QU,{id:r,type:"pie"},i=>x.createElement(x.Fragment,null,x.createElement(SAe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:a,maxRadius:n.maxRadius}),x.createElement(MAe,yo({},s,{id:i})),x.createElement(GAe,yo({},s,{id:i}))))}Ng.displayName="Pie";function $R(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function FR(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?$R(Object(r),!0).forEach(function(s){YAe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$R(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function YAe(t,n,r){return(n=XAe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function XAe(t){var n=JAe(t,"string");return typeof n=="symbol"?n:n+""}function JAe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var QAe={xAxis:{},yAxis:{},zAxis:{}},eH=Nr({name:"cartesianAxis",initialState:QAe,reducers:{addXAxis:{reducer(t,n){t.xAxis[n.payload.id]=n.payload},prepare:tn()},removeXAxis:{reducer(t,n){delete t.xAxis[n.payload.id]},prepare:tn()},addYAxis:{reducer(t,n){t.yAxis[n.payload.id]=n.payload},prepare:tn()},removeYAxis:{reducer(t,n){delete t.yAxis[n.payload.id]},prepare:tn()},addZAxis:{reducer(t,n){t.zAxis[n.payload.id]=n.payload},prepare:tn()},removeZAxis:{reducer(t,n){delete t.zAxis[n.payload.id]},prepare:tn()},updateYAxisWidth(t,n){var{id:r,width:s}=n.payload,a=t.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==a.width&&Math.abs(s-i[0])<=1)return;var l=[...i,s].slice(-3);t.yAxis[r]=FR(FR({},t.yAxis[r]),{},{width:s,widthHistory:l})}}}}),{addXAxis:ZAe,removeXAxis:eEe,addYAxis:tEe,removeYAxis:nEe,addZAxis:i5e,removeZAxis:o5e,updateYAxisWidth:rEe}=eH.actions,sEe=eH.reducer,aEe=U([an],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),iEe=U([aEe,hi,mi],(t,n,r)=>{if(!(!t||n==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,n-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),tH=()=>Ne(iEe),oEe="Invariant failed";function lEe(t,n){throw new Error(oEe)}var cEe=["x","y"];function V1(){return V1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},V1.apply(null,arguments)}function BR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Su(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?BR(Object(r),!0).forEach(function(s){dEe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function dEe(t,n,r){return(n=uEe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function uEe(t){var n=fEe(t,"string");return typeof n=="symbol"?n:n+""}function fEe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function pEe(t,n){if(t==null)return{};var r,s,a=hEe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function hEe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function mEe(t,n){var{x:r,y:s}=t,a=pEe(t,cEe),i="".concat(r),l=parseInt(i,10),c="".concat(s),d=parseInt(c,10),u="".concat(n.height||a.height),f=parseInt(u,10),p="".concat(n.width||a.width),h=parseInt(p,10);return Su(Su(Su(Su(Su({},n),a),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:h,name:n.name,radius:n.radius})}function Sg(t){return x.createElement(YU,V1({shapeType:"rectangle",propTransformer:mEe,activeClassName:"recharts-active-bar"},t))}var xEe=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,a)=>{if(Pe(n))return n;var i=Pe(s)||xn(s);return i?n(s,a):(i||lEe(),r)}},gEe={},nH=Nr({name:"errorBars",initialState:gEe,reducers:{addErrorBar:(t,n)=>{var{itemId:r,errorBar:s}=n.payload;t[r]||(t[r]=[]),t[r].push(s)},replaceErrorBar:(t,n)=>{var{itemId:r,prev:s,next:a}=n.payload;t[r]&&(t[r]=t[r].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?a:i))},removeErrorBar:(t,n)=>{var{itemId:r,errorBar:s}=n.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==s.dataKey||a.direction!==s.direction))}}}),{addErrorBar:l5e,replaceErrorBar:c5e,removeErrorBar:d5e}=nH.actions,yEe=nH.reducer,vEe=["children"];function bEe(t,n){if(t==null)return{};var r,s,a=wEe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wEe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var jEe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},NEe=x.createContext(jEe);function SEe(t){var{children:n}=t,r=bEe(t,vEe);return x.createElement(NEe.Provider,{value:r},n)}function rH(t,n){var r,s,a=Ne(u=>gi(u,t)),i=Ne(u=>yi(u,n)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:kr.allowDataOverflow,c=(s=i==null?void 0:i.allowDataOverflow)!==null&&s!==void 0?s:Cr.allowDataOverflow,d=l||c;return{needClip:d,needClipX:l,needClipY:c}}function kEe(t){var{xAxisId:n,yAxisId:r,clipPathId:s}=t,a=tH(),{needClipX:i,needClipY:l,needClip:c}=rH(n,r);if(!c||!a)return null;var{x:d,y:u,width:f,height:p}=a;return x.createElement("clipPath",{id:"clipPath-".concat(s)},x.createElement("rect",{x:i?d:d-f/2,y:l?u:u-p/2,width:i?f:f*2,height:l?p:p*2}))}function CEe(t,n){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Bt(t.zIndex)?t.zIndex:n}var _Ee=["onMouseEnter","onMouseLeave","onClick"],PEe=["value","background","tooltipPosition"],AEe=["id"],EEe=["onMouseEnter","onClick","onMouseLeave"];function di(){return di=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},di.apply(null,arguments)}function zR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Qn(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zR(Object(r),!0).forEach(function(s){TEe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function TEe(t,n,r){return(n=MEe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function MEe(t){var n=OEe(t,"string");return typeof n=="symbol"?n:n+""}function OEe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function kg(t,n){if(t==null)return{};var r,s,a=REe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function REe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var IEe=t=>{var{dataKey:n,name:r,fill:s,legendType:a,hide:i}=t;return[{inactive:i,dataKey:n,type:a,color:s,value:sv(r,n),payload:t}]};function DEe(t){var{dataKey:n,stroke:r,strokeWidth:s,fill:a,name:i,hide:l,unit:c}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:a,dataKey:n,nameKey:void 0,name:sv(i,n),hide:l,type:t.tooltipType,color:t.fill,unit:c}}}function LEe(t){var n=Ne(Bl),{data:r,dataKey:s,background:a,allOtherBarProps:i}=t,{onMouseEnter:l,onMouseLeave:c,onClick:d}=i,u=kg(i,_Ee),f=KC(l,s),p=qC(c),h=GC(d,s);if(!a||r==null)return null;var m=Gf(a);return x.createElement(Aa,{zIndex:CEe(a,zn.barBackground)},r.map((g,y)=>{var{value:v,background:b,tooltipPosition:w}=g,j=kg(g,PEe);if(!b)return null;var N=f(g,y),S=p(g,y),_=h(g,y),k=Qn(Qn(Qn(Qn(Qn({option:a,isActive:String(y)===n},j),{},{fill:"#eee"},b),m),Xy(u,g,y)),{},{onMouseEnter:N,onMouseLeave:S,onClick:_,dataKey:s,index:y,className:"recharts-bar-background-rectangle"});return x.createElement(Sg,di({key:"background-bar-".concat(y)},k))}))}function $Ee(t){var{showLabels:n,children:r,rects:s}=t,a=s==null?void 0:s.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Qn(Qn({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return x.createElement(SPe,{value:n?a:void 0},r)}function FEe(t){var{shape:n,activeBar:r,baseProps:s,entry:a,index:i,dataKey:l}=t,c=Ne(Bl),d=Ne(fU),u=r&&String(i)===c&&(d==null||l===d),f=u?r:n;return u?x.createElement(Aa,{zIndex:zn.activeBar},x.createElement(Sg,di({},s,{name:String(s.name)},a,{isActive:u,option:f,index:i,dataKey:l}))):x.createElement(Sg,di({},s,{name:String(s.name)},a,{isActive:u,option:f,index:i,dataKey:l}))}function BEe(t){var{shape:n,baseProps:r,entry:s,index:a,dataKey:i}=t;return x.createElement(Sg,di({},r,{name:String(r.name)},s,{isActive:!1,option:n,index:a,dataKey:i}))}function zEe(t){var n,{data:r,props:s}=t,a=(n=ya(s))!==null&&n!==void 0?n:{},{id:i}=a,l=kg(a,AEe),{shape:c,dataKey:d,activeBar:u}=s,{onMouseEnter:f,onClick:p,onMouseLeave:h}=s,m=kg(s,EEe),g=KC(f,d),y=qC(h),v=GC(p,d);return r?x.createElement(x.Fragment,null,r.map((b,w)=>x.createElement(sr,di({key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(w),className:"recharts-bar-rectangle"},Xy(m,b,w),{onMouseEnter:g(b,w),onMouseLeave:y(b,w),onClick:v(b,w)}),u?x.createElement(FEe,{shape:c,activeBar:u,baseProps:l,entry:b,index:w,dataKey:d}):x.createElement(BEe,{shape:c,baseProps:l,entry:b,index:w,dataKey:d})))):null}function VEe(t){var{props:n,previousRectanglesRef:r}=t,{data:s,layout:a,isAnimationActive:i,animationBegin:l,animationDuration:c,animationEasing:d,onAnimationEnd:u,onAnimationStart:f}=n,p=r.current,h=pv(n,"recharts-bar-"),[m,g]=x.useState(!1),y=!m,v=x.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=x.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return x.createElement($Ee,{showLabels:y,rects:s},x.createElement(fv,{animationId:h,begin:l,duration:c,isActive:i,easing:d,onAnimationEnd:v,onAnimationStart:b,key:h},w=>{var j=w===1?s:s==null?void 0:s.map((N,S)=>{var _=p&&p[S];if(_)return Qn(Qn({},N),{},{x:Qt(_.x,N.x,w),y:Qt(_.y,N.y,w),width:Qt(_.width,N.width,w),height:Qt(_.height,N.height,w)});if(a==="horizontal"){var k=Qt(0,N.height,w),C=Qt(N.stackedBarStart,N.y,w);return Qn(Qn({},N),{},{y:C,height:k})}var P=Qt(0,N.width,w),E=Qt(N.stackedBarStart,N.x,w);return Qn(Qn({},N),{},{width:P,x:E})});return w>0&&(r.current=j??null),j==null?null:x.createElement(sr,null,x.createElement(zEe,{props:n,data:j}))}),x.createElement(BU,{label:n.label}),n.children)}function UEe(t){var n=x.useRef(null);return x.createElement(VEe,{previousRectanglesRef:n,props:t})}var sH=0,HEe=(t,n)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:St(t,n)}};class WEe extends x.PureComponent{render(){var{hide:n,data:r,dataKey:s,className:a,xAxisId:i,yAxisId:l,needClip:c,background:d,id:u}=this.props;if(n||r==null)return null;var f=Xe("recharts-bar",a),p=u;return x.createElement(sr,{className:f,id:u},c&&x.createElement("defs",null,x.createElement(kEe,{clipPathId:p,xAxisId:i,yAxisId:l})),x.createElement(sr,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},x.createElement(LEe,{data:r,dataKey:s,background:d,allOtherBarProps:this.props}),x.createElement(UEe,this.props)))}}var KEe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ql.isSsr,legendType:"rect",minPointSize:sH,xAxisId:0,yAxisId:0,zIndex:zn.bar};function qEe(t){var{xAxisId:n,yAxisId:r,hide:s,legendType:a,minPointSize:i,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:f}=t,{needClip:p}=rH(n,r),h=dv(),m=Hr(),g=WC(t.children,ia),y=Ne(w=>wTe(w,n,r,m,t.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,b=y==null?void 0:y[0];return b==null||b.height==null||b.width==null?v=0:v=h==="vertical"?b.height/2:b.width/2,x.createElement(SEe,{xAxisId:n,yAxisId:r,data:y,dataPointFormatter:HEe,errorBarOffset:v},x.createElement(WEe,di({},t,{layout:h,needClip:p,data:y,xAxisId:n,yAxisId:r,hide:s,legendType:a,minPointSize:i,activeBar:l,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:f})))}function GEe(t){var{layout:n,barSettings:{dataKey:r,minPointSize:s},pos:a,bandSize:i,xAxis:l,yAxis:c,xAxisTicks:d,yAxisTicks:u,stackedData:f,displayedData:p,offset:h,cells:m,parentViewBox:g,dataStartIndex:y}=t,v=n==="horizontal"?c:l,b=f?v.scale.domain():null,w=Rwe({numericAxis:v}),j=v.scale(w);return p.map((N,S)=>{var _,k,C,P,E,M;f?_=Pwe(f[S+y],b):(_=St(N,r),Array.isArray(_)||(_=[w,_]));var T=xEe(s,sH)(_[1],S);if(n==="horizontal"){var A,[R,O]=[c.scale(_[0]),c.scale(_[1])];k=IM({axis:l,ticks:d,bandSize:i,offset:a.offset,entry:N,index:S}),C=(A=O??R)!==null&&A!==void 0?A:void 0,P=a.size;var I=R-O;if(E=va(I)?0:I,M={x:k,y:h.top,width:P,height:h.height},Math.abs(T)>0&&Math.abs(E)<Math.abs(T)){var L=Cn(E||T)*(Math.abs(T)-Math.abs(E));C-=L,E+=L}}else{var[D,$]=[l.scale(_[0]),l.scale(_[1])];if(k=D,C=IM({axis:c,ticks:u,bandSize:i,offset:a.offset,entry:N,index:S}),P=$-D,E=a.size,M={x:h.left,y:C,width:h.width,height:E},Math.abs(T)>0&&Math.abs(P)<Math.abs(T)){var F=Cn(P||T)*(Math.abs(T)-Math.abs(P));P+=F}}if(k==null||C==null||P==null||E==null)return null;var K=Qn(Qn({},N),{},{stackedBarStart:j,x:k,y:C,width:P,height:E,value:f?_:_[1],payload:N,background:M,tooltipPosition:{x:k+P/2,y:C+E/2},parentViewBox:g},m&&m[S]&&m[S].props);return K}).filter(Boolean)}function YEe(t){var n=or(t,KEe),r=Hr();return x.createElement(QU,{id:n.id,type:"bar"},s=>x.createElement(x.Fragment,null,x.createElement(uAe,{legendPayload:IEe(n)}),x.createElement(XU,{fn:DEe,args:n}),x.createElement(NAe,{type:"bar",id:s,data:void 0,xAxisId:n.xAxisId,yAxisId:n.yAxisId,zAxisId:0,dataKey:n.dataKey,stackId:Owe(n.stackId),hide:n.hide,barSize:n.barSize,minPointSize:n.minPointSize,maxBarSize:n.maxBarSize,isPanorama:r}),x.createElement(Aa,{zIndex:n.zIndex},x.createElement(qEe,di({},n,{id:s})))))}var Cg=x.memo(YEe);Cg.displayName="Bar";function VR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function rm(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?VR(Object(r),!0).forEach(function(s){XEe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function XEe(t,n,r){return(n=JEe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function JEe(t){var n=QEe(t,"string");return typeof n=="symbol"?n:n+""}function QEe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var ZEe=(t,n)=>n,eTe=(t,n,r)=>r,tTe=(t,n,r,s)=>s,nTe=(t,n,r,s,a)=>a,zp=U([uC,nTe],(t,n)=>t.filter(r=>r.type==="bar").find(r=>r.id===n)),rTe=U([zp],t=>t==null?void 0:t.maxBarSize),sTe=(t,n,r,s,a,i)=>i,UR=(t,n,r)=>{var s=r??t;if(!xn(s))return Un(s,n,0)},aTe=U([Ye,uC,ZEe,eTe,tTe],(t,n,r,s,a)=>n.filter(i=>t==="horizontal"?i.xAxisId===r:i.yAxisId===s).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),iTe=(t,n,r,s)=>{var a=Ye(t);return a==="horizontal"?I1(t,"yAxis",r,s):I1(t,"xAxis",n,s)},oTe=(t,n,r)=>{var s=Ye(t);return s==="horizontal"?ZO(t,"xAxis",n):ZO(t,"yAxis",r)},lTe=(t,n,r)=>{var s={},a=t.filter(Nv),i=t.filter(u=>u.stackId==null),l=a.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),s),c=Object.entries(l).map(u=>{var[f,p]=u,h=p.map(g=>g.dataKey),m=UR(n,r,p[0].barSize);return{stackId:f,dataKeys:h,barSize:m}}),d=i.map(u=>{var f=[u.dataKey].filter(h=>h!=null),p=UR(n,r,u.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...c,...d]},cTe=U([aTe,bke,oTe],lTe),dTe=(t,n,r,s,a)=>{var i,l,c=zp(t,n,r,s,a);if(c!=null){var d=Ye(t),u=f7(t),{maxBarSize:f}=c,p=xn(f)?u:f,h,m;return d==="horizontal"?(h=Sd(t,"xAxis",n,s),m=Nd(t,"xAxis",n,s)):(h=Sd(t,"yAxis",r,s),m=Nd(t,"yAxis",r,s)),(i=(l=tg(h,m,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},aH=(t,n,r,s)=>{var a=Ye(t),i,l;return a==="horizontal"?(i=Sd(t,"xAxis",n,s),l=Nd(t,"xAxis",n,s)):(i=Sd(t,"yAxis",r,s),l=Nd(t,"yAxis",r,s)),tg(i,l)};function uTe(t,n,r,s,a){var i=s.length;if(!(i<1)){var l=Un(t,r,0,!0),c,d=[];if(Bt(s[0].barSize)){var u=!1,f=r/i,p=s.reduce((b,w)=>b+(w.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(u=!0,f*=.9,p=i*f);var h=(r-p)/2>>0,m={offset:h-l,size:0};c=s.reduce((b,w)=>{var j,N={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+l,size:u?f:(j=w.barSize)!==null&&j!==void 0?j:0}},S=[...b,N];return m=S[S.length-1].position,S},d)}else{var g=Un(n,r,0,!0);r-2*g-(i-1)*l<=0&&(l=0);var y=(r-2*g-(i-1)*l)/i;y>1&&(y>>=0);var v=Bt(a)?Math.min(y,a):y;c=s.reduce((b,w,j)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(y+l)*j+(y-v)/2,size:v}}],d)}return c}}var fTe=(t,n,r,s,a,i,l)=>{var c=xn(l)?n:l,d=uTe(r,s,a!==i?a:i,t,c);return a!==i&&d!=null&&(d=d.map(u=>rm(rm({},u),{},{position:rm(rm({},u.position),{},{offset:u.position.offset-a/2})}))),d},pTe=U([cTe,f7,vke,p7,dTe,aH,rTe],fTe),hTe=(t,n,r,s)=>Sd(t,"xAxis",n,s),mTe=(t,n,r,s)=>Sd(t,"yAxis",r,s),xTe=(t,n,r,s)=>Nd(t,"xAxis",n,s),gTe=(t,n,r,s)=>Nd(t,"yAxis",r,s),yTe=U([pTe,zp],(t,n)=>{if(!(t==null||n==null)){var r=t.find(s=>s.stackId===n.stackId&&n.dataKey!=null&&s.dataKeys.includes(n.dataKey));if(r!=null)return r.position}}),vTe=(t,n)=>{var r=lC(n);if(!(!t||r==null||n==null)){var{stackId:s}=n;if(s!=null){var a=t[s];if(a){var{stackedData:i}=a;if(i)return i.find(l=>l.key===r)}}}},bTe=U([iTe,zp],vTe),wTe=U([an,C2,hTe,mTe,xTe,gTe,yTe,Ye,Z2,aH,bTe,zp,sTe],(t,n,r,s,a,i,l,c,d,u,f,p,h)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=d;if(!(p==null||l==null||n==null||c!=="horizontal"&&c!=="vertical"||r==null||s==null||a==null||i==null||u==null)){var{data:v}=p,b;if(v!=null&&v.length>0?b=v:b=m==null?void 0:m.slice(g,y+1),b!=null)return GEe({layout:c,barSettings:p,pos:l,parentViewBox:n,bandSize:u,xAxis:r,yAxis:s,xAxisTicks:a,yAxisTicks:i,stackedData:f,displayedData:b,offset:t,cells:h,dataStartIndex:g})}}),iH=t=>{var{chartData:n}=t,r=gt(),s=Hr();return x.useEffect(()=>s?()=>{}:(r(dR(n)),()=>{r(dR(void 0))}),[n,r,s]),null},HR={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},oH=Nr({name:"brush",initialState:HR,reducers:{setBrushSettings(t,n){return n.payload==null?HR:n.payload}}}),{setBrushSettings:u5e}=oH.actions,jTe=oH.reducer;function NTe(t,n,r){return(n=STe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function STe(t){var n=kTe(t,"string");return typeof n=="symbol"?n:n+""}function kTe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}class XC{static create(n){return new XC(n)}constructor(n){this.scale=n}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(n){var{bandAware:r,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(n)+i}default:return this.scale(n)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}isInRange(n){var r=this.range(),s=r[0],a=r[r.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}NTe(XC,"EPS",1e-4);function CTe(t){return(t%180+180)%180}var _Te=function(n){var{width:r,height:s}=n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=CTe(a),l=i*Math.PI/180,c=Math.atan(s/r),d=l>c&&l<Math.PI-c?s/Math.sin(l):r/Math.cos(l);return Math.abs(d)},PTe={dots:[],areas:[],lines:[]},lH=Nr({name:"referenceElements",initialState:PTe,reducers:{addDot:(t,n)=>{t.dots.push(n.payload)},removeDot:(t,n)=>{var r=Ha(t).dots.findIndex(s=>s===n.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,n)=>{t.areas.push(n.payload)},removeArea:(t,n)=>{var r=Ha(t).areas.findIndex(s=>s===n.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,n)=>{t.lines.push(n.payload)},removeLine:(t,n)=>{var r=Ha(t).lines.findIndex(s=>s===n.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:f5e,removeDot:p5e,addArea:h5e,removeArea:m5e,addLine:x5e,removeLine:g5e}=lH.actions,ATe=lH.reducer,ETe=x.createContext(void 0),TTe=t=>{var{children:n}=t,[r]=x.useState("".concat(Yf("recharts"),"-clip")),s=tH();if(s==null)return null;var{x:a,y:i,width:l,height:c}=s;return x.createElement(ETe.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:a,y:i,height:c,width:l}))),n)};function kd(t,n){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(n,r)||t[r]!==n[r]))return!1;for(var s in n)if({}.hasOwnProperty.call(n,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function cH(t,n){if(n<1)return[];if(n===1)return t;for(var r=[],s=0;s<t.length;s+=n)r.push(t[s]);return r}function MTe(t,n,r){var s={width:t.width+n.width,height:t.height+n.height};return _Te(s,r)}function OTe(t,n,r){var s=r==="width",{x:a,y:i,width:l,height:c}=t;return n===1?{start:s?a:i,end:s?a+l:i+c}:{start:s?a+l:i+c,end:s?a:i}}function _g(t,n,r,s,a){if(t*n<t*s||t*n>t*a)return!1;var i=r();return t*(n-t*i/2-s)>=0&&t*(n+t*i/2-a)<=0}function RTe(t,n){return cH(t,n+1)}function ITe(t,n,r,s,a){for(var i=(s||[]).slice(),{start:l,end:c}=n,d=0,u=1,f=l,p=function(){var g=s==null?void 0:s[d];if(g===void 0)return{v:cH(s,u)};var y=d,v,b=()=>(v===void 0&&(v=r(g,y)),v),w=g.coordinate,j=d===0||_g(t,w,b,f,c);j||(d=0,f=l,u+=1),j&&(f=w+t*(b()/2+a),d+=u)},h;u<=i.length;)if(h=p(),h)return h.v;return[]}function WR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function In(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?WR(Object(r),!0).forEach(function(s){DTe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function DTe(t,n,r){return(n=LTe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function LTe(t){var n=$Te(t,"string");return typeof n=="symbol"?n:n+""}function $Te(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function FTe(t,n,r,s,a){for(var i=(s||[]).slice(),l=i.length,{start:c}=n,{end:d}=n,u=function(h){var m=i[h],g,y=()=>(g===void 0&&(g=r(m,h)),g);if(h===l-1){var v=t*(m.coordinate+t*y()/2-d);i[h]=m=In(In({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else i[h]=m=In(In({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var b=_g(t,m.tickCoord,y,c,d);b&&(d=m.tickCoord-t*(y()/2+a),i[h]=In(In({},m),{},{isShow:!0}))}},f=l-1;f>=0;f--)u(f);return i}function BTe(t,n,r,s,a,i){var l=(s||[]).slice(),c=l.length,{start:d,end:u}=n;if(i){var f=s[c-1],p=r(f,c-1),h=t*(f.coordinate+t*p/2-u);if(l[c-1]=f=In(In({},f),{},{tickCoord:h>0?f.coordinate-h*t:f.coordinate}),f.tickCoord!=null){var m=_g(t,f.tickCoord,()=>p,d,u);m&&(u=f.tickCoord-t*(p/2+a),l[c-1]=In(In({},f),{},{isShow:!0}))}}for(var g=i?c-1:c,y=function(w){var j=l[w],N,S=()=>(N===void 0&&(N=r(j,w)),N);if(w===0){var _=t*(j.coordinate-t*S()/2-d);l[w]=j=In(In({},j),{},{tickCoord:_<0?j.coordinate-_*t:j.coordinate})}else l[w]=j=In(In({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var k=_g(t,j.tickCoord,S,d,u);k&&(d=j.tickCoord+t*(S()/2+a),l[w]=In(In({},j),{},{isShow:!0}))}},v=0;v<g;v++)y(v);return l}function zTe(t,n,r){var{tick:s,ticks:a,viewBox:i,minTickGap:l,orientation:c,interval:d,tickFormatter:u,unit:f,angle:p}=t;if(!a||!a.length||!s)return[];if(Pe(d)||Ql.isSsr){var h;return(h=RTe(a,Pe(d)?d:0))!==null&&h!==void 0?h:[]}var m=[],g=c==="top"||c==="bottom"?"width":"height",y=f&&g==="width"?lf(f,{fontSize:n,letterSpacing:r}):{width:0,height:0},v=(j,N)=>{var S=typeof u=="function"?u(j.value,N):j.value;return g==="width"?MTe(lf(S,{fontSize:n,letterSpacing:r}),y,p):lf(S,{fontSize:n,letterSpacing:r})[g]},b=a.length>=2?Cn(a[1].coordinate-a[0].coordinate):1,w=OTe(i,b,g);return d==="equidistantPreserveStart"?ITe(b,w,v,a,l):(d==="preserveStart"||d==="preserveStartEnd"?m=BTe(b,w,v,a,l,d==="preserveStartEnd"):m=FTe(b,w,v,a,l),m.filter(j=>j.isShow))}var VTe=t=>{var{ticks:n,label:r,labelGapWithTick:s=5,tickSize:a=0,tickMargin:i=0}=t,l=0;if(n){Array.from(n).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var c=r?r.getBoundingClientRect().width:0,d=a+i,u=l+d+c+(r?s:0);return Math.round(u)}return 0},UTe=["axisLine","width","height","className","hide","ticks","axisType"],HTe=["viewBox"],WTe=["viewBox"];function U1(t,n){if(t==null)return{};var r,s,a=KTe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function KTe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},zl.apply(null,arguments)}function KR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Vt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?KR(Object(r),!0).forEach(function(s){qTe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function qTe(t,n,r){return(n=GTe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function GTe(t){var n=YTe(t,"string");return typeof n=="symbol"?n:n+""}function YTe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}var XTe={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:zn.axis};function JTe(t){var{x:n,y:r,width:s,height:a,orientation:i,mirror:l,axisLine:c,otherSvgProps:d}=t;if(!c)return null;var u=Vt(Vt(Vt({},d),ya(c)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);u=Vt(Vt({},u),{},{x1:n,y1:r+f*a,x2:n+s,y2:r+f*a})}else{var p=+(i==="left"&&!l||i==="right"&&l);u=Vt(Vt({},u),{},{x1:n+p*s,y1:r,x2:n+p*s,y2:r+a})}return x.createElement("line",zl({},u,{className:Xe("recharts-cartesian-axis-line",Il(c,"className"))}))}function QTe(t,n,r,s,a,i,l,c,d){var u,f,p,h,m,g,y=c?-1:1,v=t.tickSize||l,b=Pe(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":u=f=t.coordinate,h=r+ +!c*a,p=h-y*v,g=p-y*d,m=b;break;case"left":p=h=t.coordinate,f=n+ +!c*s,u=f-y*v,m=u-y*d,g=b;break;case"right":p=h=t.coordinate,f=n+ +c*s,u=f+y*v,m=u+y*d,g=b;break;default:u=f=t.coordinate,h=r+ +c*a,p=h+y*v,g=p+y*d,m=b;break}return{line:{x1:u,y1:p,x2:f,y2:h},tick:{x:m,y:g}}}function ZTe(t,n){switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}function eMe(t,n){switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}function tMe(t){var{option:n,tickProps:r,value:s}=t,a,i=Xe(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(n))a=x.cloneElement(n,Vt(Vt({},r),{},{className:i}));else if(typeof n=="function")a=n(Vt(Vt({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof n!="boolean"&&(l=Xe(l,n==null?void 0:n.className)),a=x.createElement(Tv,zl({},r,{className:l}),s)}return a}var nMe=x.forwardRef((t,n)=>{var{ticks:r=[],tick:s,tickLine:a,stroke:i,tickFormatter:l,unit:c,padding:d,tickTextProps:u,orientation:f,mirror:p,x:h,y:m,width:g,height:y,tickSize:v,tickMargin:b,fontSize:w,letterSpacing:j,getTicksConfig:N,events:S,axisType:_}=t,k=zTe(Vt(Vt({},N),{},{ticks:r}),w,j),C=ZTe(f,p),P=eMe(f,p),E=ya(N),M=Gf(s),T={};typeof a=="object"&&(T=a);var A=Vt(Vt({},E),{},{fill:"none"},T),R=k.map(L=>Vt({entry:L},QTe(L,h,m,g,y,f,v,p,b))),O=R.map(L=>{var{entry:D,line:$}=L;return x.createElement(sr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},a&&x.createElement("line",zl({},A,$,{className:Xe("recharts-cartesian-axis-tick-line",Il(a,"className"))})))}),I=R.map((L,D)=>{var{entry:$,tick:F}=L,K=Vt(Vt(Vt(Vt({textAnchor:C,verticalAnchor:P},E),{},{stroke:"none",fill:i},M),F),{},{index:D,payload:$,visibleTicksCount:k.length,tickFormatter:l,padding:d},u);return x.createElement(sr,zl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},Xy(S,$,D)),s&&x.createElement(tMe,{option:s,tickProps:K,value:"".concat(typeof l=="function"?l($.value,D):$.value).concat(c||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},I.length>0&&x.createElement(Aa,{zIndex:zn.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:n},I)),O.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},O))}),rMe=x.forwardRef((t,n)=>{var{axisLine:r,width:s,height:a,className:i,hide:l,ticks:c,axisType:d}=t,u=U1(t,UTe),[f,p]=x.useState(""),[h,m]=x.useState(""),g=x.useRef(null);x.useImperativeHandle(n,()=>({getCalculatedWidth:()=>{var v;return VTe({ticks:g.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=x.useCallback(v=>{if(v){var b=v.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=b;var w=b[0];if(w){var j=window.getComputedStyle(w),N=j.fontSize,S=j.letterSpacing;(N!==f||S!==h)&&(p(N),m(S))}}},[f,h]);return l||s!=null&&s<=0||a!=null&&a<=0?null:x.createElement(Aa,{zIndex:t.zIndex},x.createElement(sr,{className:Xe("recharts-cartesian-axis",i)},x.createElement(JTe,{x:t.x,y:t.y,width:s,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:ya(t)}),x.createElement(nMe,{ref:y,axisType:d,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),x.createElement(oPe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},x.createElement(gPe,{label:t.label,labelRef:t.labelRef}),t.children)))}),sMe=x.memo(rMe,(t,n)=>{var{viewBox:r}=t,s=U1(t,HTe),{viewBox:a}=n,i=U1(n,WTe);return kd(r,a)&&kd(s,i)}),JC=x.forwardRef((t,n)=>{var r=or(t,XTe);return x.createElement(sMe,zl({},r,{ref:n}))});JC.displayName="CartesianAxis";var aMe=["dangerouslySetInnerHTML","ticks"],iMe=["id"],oMe=["domain"],lMe=["domain"];function H1(){return H1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},H1.apply(null,arguments)}function Pg(t,n){if(t==null)return{};var r,s,a=cMe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cMe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function dMe(t){var n=gt();return x.useLayoutEffect(()=>(n(ZAe(t)),()=>{n(eEe(t))}),[t,n]),null}var uMe=t=>{var{xAxisId:n,className:r}=t,s=Ne(C2),a=Hr(),i="xAxis",l=Ne(v=>Zd(v,i,n,a)),c=Ne(v=>W7(v,i,n,a)),d=Ne(v=>z7(v,n)),u=Ne(v=>g2e(v,n)),f=Ne(v=>w7(v,n));if(d==null||u==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:h}=t,m=Pg(t,aMe),{id:g}=f,y=Pg(f,iMe);return x.createElement(JC,H1({},m,y,{scale:l,x:u.x,y:u.y,width:d.width,height:d.height,className:Xe("recharts-".concat(i," ").concat(i),r),viewBox:s,ticks:c,axisType:i}))},fMe={allowDataOverflow:kr.allowDataOverflow,allowDecimals:kr.allowDecimals,allowDuplicatedCategory:kr.allowDuplicatedCategory,height:kr.height,hide:!1,mirror:kr.mirror,orientation:kr.orientation,padding:kr.padding,reversed:kr.reversed,scale:kr.scale,tickCount:kr.tickCount,type:kr.type,xAxisId:0},pMe=t=>{var n,r,s,a,i,l=or(t,fMe);return x.createElement(x.Fragment,null,x.createElement(dMe,{interval:(n=l.interval)!==null&&n!==void 0?n:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(s=l.angle)!==null&&s!==void 0?s:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),x.createElement(uMe,l))},hMe=(t,n)=>{var{domain:r}=t,s=Pg(t,oMe),{domain:a}=n,i=Pg(n,lMe);return kd(s,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:kd({domain:r},{domain:a}):!1},Ag=x.memo(pMe,hMe);Ag.displayName="XAxis";var mMe=["dangerouslySetInnerHTML","ticks"],xMe=["id"],gMe=["domain"],yMe=["domain"];function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},W1.apply(null,arguments)}function Eg(t,n){if(t==null)return{};var r,s,a=vMe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vMe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function bMe(t){var n=gt();return x.useLayoutEffect(()=>(n(tEe(t)),()=>{n(nEe(t))}),[t,n]),null}var wMe=t=>{var{yAxisId:n,className:r,width:s,label:a}=t,i=x.useRef(null),l=x.useRef(null),c=Ne(C2),d=Hr(),u=gt(),f="yAxis",p=Ne(S=>Zd(S,f,n,d)),h=Ne(S=>V7(S,n)),m=Ne(S=>v2e(S,n)),g=Ne(S=>W7(S,f,n,d)),y=Ne(S=>j7(S,n));if(x.useLayoutEffect(()=>{if(!(s!=="auto"||!h||FC(a)||x.isValidElement(a)||y==null)){var S=i.current;if(S){var _=S.getCalculatedWidth();Math.round(h.width)!==Math.round(_)&&u(rEe({id:n,width:_}))}}},[g,h,u,a,n,s,y]),h==null||m==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:b}=t,w=Eg(t,mMe),{id:j}=y,N=Eg(y,xMe);return x.createElement(JC,W1({},w,N,{ref:i,labelRef:l,scale:p,x:m.x,y:m.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:h.width,height:h.height,className:Xe("recharts-".concat(f," ").concat(f),r),viewBox:c,ticks:g,axisType:f}))},jMe={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,hide:!1,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tickCount:Cr.tickCount,type:Cr.type,width:Cr.width,yAxisId:0},NMe=t=>{var n,r,s,a,i,l=or(t,jMe);return x.createElement(x.Fragment,null,x.createElement(bMe,{interval:(n=l.interval)!==null&&n!==void 0?n:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(s=l.angle)!==null&&s!==void 0?s:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),x.createElement(wMe,l))},SMe=(t,n)=>{var{domain:r}=t,s=Eg(t,gMe),{domain:a}=n,i=Eg(n,yMe);return kd(s,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:kd({domain:r},{domain:a}):!1},Tg=x.memo(NMe,SMe);Tg.displayName="YAxis";var kMe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=x;function CMe(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var _Me=typeof Object.is=="function"?Object.is:CMe,PMe=Vp.useSyncExternalStore,AMe=Vp.useRef,EMe=Vp.useEffect,TMe=Vp.useMemo,MMe=Vp.useDebugValue;kMe.useSyncExternalStoreWithSelector=function(t,n,r,s,a){var i=AMe(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=TMe(function(){function d(m){if(!u){if(u=!0,f=m,m=s(m),a!==void 0&&l.hasValue){var g=l.value;if(a(g,m))return p=g}return p=m}if(g=p,_Me(f,m))return g;var y=s(m);return a!==void 0&&a(g,y)?(f=m,g):(f=m,p=y)}var u=!1,f,p,h=r===void 0?null:r;return[function(){return d(n())},h===null?void 0:function(){return d(h())}]},[n,r,s,a]);var c=PMe(t,i[0],i[1]);return EMe(function(){l.hasValue=!0,l.value=c},[c]),MMe(c),c};function OMe(t){t()}function RMe(){let t=null,n=null;return{clear(){t=null,n=null},notify(){OMe(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=t;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const a=n={callback:r,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var qR={notify(){},get:()=>[]};function IMe(t,n){let r,s=qR,a=0,i=!1;function l(y){f();const v=s.subscribe(y);let b=!1;return()=>{b||(b=!0,v(),p())}}function c(){s.notify()}function d(){g.onStateChange&&g.onStateChange()}function u(){return i}function f(){a++,r||(r=t.subscribe(d),s=RMe())}function p(){a--,r&&a===0&&(r(),r=void 0,s.clear(),s=qR)}function h(){i||(i=!0,f())}function m(){i&&(i=!1,p())}const g={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>s};return g}var DMe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LMe=DMe(),$Me=()=>typeof navigator<"u"&&navigator.product==="ReactNative",FMe=$Me(),BMe=()=>LMe||FMe?x.useLayoutEffect:x.useEffect,zMe=BMe(),Bb=Symbol.for("react-redux-context"),zb=typeof globalThis<"u"?globalThis:{};function VMe(){if(!x.createContext)return{};const t=zb[Bb]??(zb[Bb]=new Map);let n=t.get(x.createContext);return n||(n=x.createContext(null),t.set(x.createContext,n)),n}var UMe=VMe();function HMe(t){const{children:n,context:r,serverState:s,store:a}=t,i=x.useMemo(()=>{const d=IMe(a);return{store:a,subscription:d,getServerState:s?()=>s:void 0}},[a,s]),l=x.useMemo(()=>a.getState(),[a]);zMe(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const c=r||UMe;return x.createElement(c.Provider,{value:i},n)}var WMe=HMe,KMe=(t,n)=>n,QC=U([KMe,Ye,v7,ln,lU,vi,ACe,an],DCe),ZC=t=>{var n=t.currentTarget.getBoundingClientRect(),r=n.width/t.currentTarget.offsetWidth,s=n.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-n.left)/r),chartY:Math.round((t.clientY-n.top)/s)}},dH=us("mouseClick"),uH=Pp();uH.startListening({actionCreator:dH,effect:(t,n)=>{var r=t.payload,s=QC(n.getState(),ZC(r));(s==null?void 0:s.activeIndex)!=null&&n.dispatch(M2e({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var K1=us("mouseMove"),fH=Pp();fH.startListening({actionCreator:K1,effect:(t,n)=>{var r=t.payload,s=n.getState(),a=EC(s,s.tooltip.settings.shared),i=QC(s,ZC(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?n.dispatch(Z7({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):n.dispatch(Q7()))}});var GR={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},pH=Nr({name:"rootProps",initialState:GR,reducers:{updateOptions:(t,n)=>{var r;t.accessibilityLayer=n.payload.accessibilityLayer,t.barCategoryGap=n.payload.barCategoryGap,t.barGap=(r=n.payload.barGap)!==null&&r!==void 0?r:GR.barGap,t.barSize=n.payload.barSize,t.maxBarSize=n.payload.maxBarSize,t.stackOffset=n.payload.stackOffset,t.syncId=n.payload.syncId,t.syncMethod=n.payload.syncMethod,t.className=n.payload.className,t.baseValue=n.payload.baseValue}}}),qMe=pH.reducer,{updateOptions:GMe}=pH.actions,hH=Nr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,n)=>n.payload}}),{updatePolarOptions:YMe}=hH.actions,XMe=hH.reducer,mH=us("keyDown"),xH=us("focus"),e_=Pp();e_.startListening({actionCreator:mH,effect:(t,n)=>{var r=n.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:a}=r.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(TC(a,tu(r))),c=vi(r);if(i==="Enter"){var d=vg(r,"axis","hover",String(a.index));n.dispatch(L1({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var u=N2e(r),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,h=l+p*f;if(!(c==null||h>=c.length||h<0)){var m=vg(r,"axis","hover",String(h));n.dispatch(L1({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});e_.startListening({actionCreator:xH,effect:(t,n)=>{var r=n.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",l=vg(r,"axis","hover",String(i));n.dispatch(L1({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Xr=us("externalEvent"),gH=Pp();gH.startListening({actionCreator:Xr,effect:(t,n)=>{if(t.payload.handler!=null){var r=n.getState(),s={activeCoordinate:hCe(r),activeDataKey:fU(r),activeIndex:Bl(r),activeLabel:uU(r),activeTooltipIndex:Bl(r),isTooltipActive:mCe(r)};t.payload.handler(s,t.payload.reactEvent)}}});var JMe=U([eu],t=>t.tooltipItemPayloads),QMe=U([JMe,Fp,(t,n,r)=>n,(t,n,r)=>r],(t,n,r,s)=>{var a=t.find(c=>c.settings.dataKey===s);if(a!=null){var{positions:i}=a;if(i!=null){var l=n(i,r);return l}}}),yH=us("touchMove"),vH=Pp();vH.startListening({actionCreator:yH,effect:(t,n)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var s=n.getState(),a=EC(s,s.tooltip.settings.shared);if(a==="axis"){var i=QC(s,ZC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&n.dispatch(Z7({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(W8),f=(l=d.getAttribute(K8))!==null&&l!==void 0?l:void 0,p=QMe(n.getState(),u,f);n.dispatch(J7({activeDataKey:f,activeIndex:u,activeCoordinate:p}))}}}});var ZMe=y8({brush:jTe,cartesianAxis:sEe,chartData:f_e,errorBars:yEe,graphicalItems:jAe,layout:jwe,legend:xje,options:o_e,polarAxis:IPe,polarOptions:XMe,referenceElements:ATe,rootProps:qMe,tooltip:O2e,zIndex:XCe}),eOe=function(n){return qbe({reducer:ZMe,preloadedState:n,middleware:r=>r({serializableCheck:!1}).concat([uH.middleware,fH.middleware,e_.middleware,gH.middleware,vH.middleware]),enhancers:r=>{var s=r;return typeof r=="function"&&(s=r()),s.concat(E8({type:"raf"}))},devTools:Ql.devToolsEnabled})};function bH(t){var{preloadedState:n,children:r,reduxStoreName:s}=t,a=Hr(),i=x.useRef(null);if(a)return r;i.current==null&&(i.current=eOe(n));var l=y2;return x.createElement(WMe,{context:l,store:i.current},r)}function wH(t){var{layout:n,margin:r}=t,s=gt(),a=Hr();return x.useEffect(()=>{a||(s(vwe(n)),s(ywe(r)))},[s,a,n,r]),null}function jH(t){var n=gt();return x.useEffect(()=>{n(GMe(t))},[n,t]),null}function YR(t){var{zIndex:n,isPanorama:r}=t,s=r?"recharts-zindex-panorama-":"recharts-zindex-",a=JU("".concat(s).concat(n)),i=gt();return x.useLayoutEffect(()=>(i(GCe({zIndex:n,elementId:a,isPanorama:r})),()=>{i(YCe({zIndex:n,isPanorama:r}))}),[i,n,a,r]),x.createElement("g",{id:a})}function XR(t){var{children:n,isPanorama:r}=t,s=Ne($Ce);if(!s||s.length===0)return n;var a=s.filter(l=>l<0),i=s.filter(l=>l>0);return x.createElement(x.Fragment,null,a.map(l=>x.createElement(YR,{key:l,zIndex:l,isPanorama:r})),n,i.map(l=>x.createElement(YR,{key:l,zIndex:l,isPanorama:r})))}var tOe=["children"];function nOe(t,n){if(t==null)return{};var r,s,a=rOe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rOe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Mg(){return Mg=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Mg.apply(null,arguments)}var sOe={width:"100%",height:"100%",display:"block"},aOe=x.forwardRef((t,n)=>{var r=fje(),s=pje(),a=rV();if(!go(r)||!go(s))return null;var{children:i,otherAttributes:l,title:c,desc:d}=t,u,f;return l!=null&&(typeof l.tabIndex=="number"?u=l.tabIndex:u=a?0:void 0,typeof l.role=="string"?f=l.role:f=a?"application":void 0),x.createElement(S6,Mg({},l,{title:c,desc:d,role:f,tabIndex:u,width:r,height:s,style:sOe,ref:n}),i)}),iOe=t=>{var{children:n}=t,r=Ne(lv);if(!r)return null;var{width:s,height:a,y:i,x:l}=r;return x.createElement(S6,{width:s,height:a,x:l,y:i},n)},JR=x.forwardRef((t,n)=>{var{children:r}=t,s=nOe(t,tOe),a=Hr();return a?x.createElement(iOe,null,x.createElement(XR,{isPanorama:!0},r)):x.createElement(aOe,Mg({ref:n},s),x.createElement(XR,{isPanorama:!1},r))});function oOe(){var t=gt(),[n,r]=x.useState(null),s=Ne(Bwe);return x.useEffect(()=>{if(n!=null){var a=n.getBoundingClientRect(),i=a.width/n.offsetWidth;Bt(i)&&i!==s&&t(wwe(i))}},[n,t,s]),r}function QR(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function lOe(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?QR(Object(r),!0).forEach(function(s){cOe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function cOe(t,n,r){return(n=dOe(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function dOe(t){var n=uOe(t,"string");return typeof n=="symbol"?n:n+""}function uOe(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vl.apply(null,arguments)}var fOe=()=>(w_e(),null);function Og(t){if(typeof t=="number")return t;if(typeof t=="string"){var n=parseFloat(t);if(!Number.isNaN(n))return n}return 0}var pOe=x.forwardRef((t,n)=>{var r,s,a=x.useRef(null),[i,l]=x.useState({containerWidth:Og((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:Og((s=t.style)===null||s===void 0?void 0:s.height)}),c=x.useCallback((u,f)=>{l(p=>{var h=Math.round(u),m=Math.round(f);return p.containerWidth===h&&p.containerHeight===m?p:{containerWidth:h,containerHeight:m}})},[]),d=x.useCallback(u=>{if(typeof n=="function"&&n(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=u.getBoundingClientRect();c(f,p);var h=g=>{var{width:y,height:v}=g[0].contentRect;c(y,v)},m=new ResizeObserver(h);m.observe(u),a.current=m}},[n,c]);return x.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[c]),x.createElement(x.Fragment,null,x.createElement(uv,{width:i.containerWidth,height:i.containerHeight}),x.createElement("div",Vl({ref:d},t)))}),hOe=x.forwardRef((t,n)=>{var{width:r,height:s}=t,[a,i]=x.useState({containerWidth:Og(r),containerHeight:Og(s)}),l=x.useCallback((d,u)=>{i(f=>{var p=Math.round(d),h=Math.round(u);return f.containerWidth===p&&f.containerHeight===h?f:{containerWidth:p,containerHeight:h}})},[]),c=x.useCallback(d=>{if(typeof n=="function"&&n(d),d!=null){var{width:u,height:f}=d.getBoundingClientRect();l(u,f)}},[n,l]);return x.createElement(x.Fragment,null,x.createElement(uv,{width:a.containerWidth,height:a.containerHeight}),x.createElement("div",Vl({ref:c},t)))}),mOe=x.forwardRef((t,n)=>{var{width:r,height:s}=t;return x.createElement(x.Fragment,null,x.createElement(uv,{width:r,height:s}),x.createElement("div",Vl({ref:n},t)))}),xOe=x.forwardRef((t,n)=>{var{width:r,height:s}=t;return si(r)||si(s)?x.createElement(hOe,Vl({},t,{ref:n})):x.createElement(mOe,Vl({},t,{ref:n}))});function gOe(t){return t===!0?pOe:xOe}var yOe=x.forwardRef((t,n)=>{var{children:r,className:s,height:a,onClick:i,onContextMenu:l,onDoubleClick:c,onMouseDown:d,onMouseEnter:u,onMouseLeave:f,onMouseMove:p,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:v,width:b,responsive:w,dispatchTouchEvents:j=!0}=t,N=x.useRef(null),S=gt(),[_,k]=x.useState(null),[C,P]=x.useState(null),E=oOe(),M=_2(),T=(M==null?void 0:M.width)>0?M.width:b,A=(M==null?void 0:M.height)>0?M.height:a,R=x.useCallback(z=>{E(z),typeof n=="function"&&n(z),k(z),P(z),z!=null&&(N.current=z)},[E,n,k,P]),O=x.useCallback(z=>{S(dH(z)),S(Xr({handler:i,reactEvent:z}))},[S,i]),I=x.useCallback(z=>{S(K1(z)),S(Xr({handler:u,reactEvent:z}))},[S,u]),L=x.useCallback(z=>{S(Q7()),S(Xr({handler:f,reactEvent:z}))},[S,f]),D=x.useCallback(z=>{S(K1(z)),S(Xr({handler:p,reactEvent:z}))},[S,p]),$=x.useCallback(()=>{S(xH())},[S]),F=x.useCallback(z=>{S(mH(z.key))},[S]),K=x.useCallback(z=>{S(Xr({handler:l,reactEvent:z}))},[S,l]),J=x.useCallback(z=>{S(Xr({handler:c,reactEvent:z}))},[S,c]),Y=x.useCallback(z=>{S(Xr({handler:d,reactEvent:z}))},[S,d]),ee=x.useCallback(z=>{S(Xr({handler:h,reactEvent:z}))},[S,h]),Q=x.useCallback(z=>{S(Xr({handler:y,reactEvent:z}))},[S,y]),ue=x.useCallback(z=>{j&&S(yH(z)),S(Xr({handler:g,reactEvent:z}))},[S,j,g]),G=x.useCallback(z=>{S(Xr({handler:m,reactEvent:z}))},[S,m]),ne=gOe(w);return x.createElement(bU.Provider,{value:_},x.createElement(l0e.Provider,{value:C},x.createElement(ne,{width:T??(v==null?void 0:v.width),height:A??(v==null?void 0:v.height),className:Xe("recharts-wrapper",s),style:lOe({position:"relative",cursor:"default",width:T,height:A},v),onClick:O,onContextMenu:K,onDoubleClick:J,onFocus:$,onKeyDown:F,onMouseDown:Y,onMouseEnter:I,onMouseLeave:L,onMouseMove:D,onMouseUp:ee,onTouchEnd:G,onTouchMove:ue,onTouchStart:Q,ref:R},x.createElement(fOe,null),r)))}),vOe=["width","height","responsive","children","className","style","compact","title","desc"];function bOe(t,n){if(t==null)return{};var r,s,a=wOe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wOe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var NH=x.forwardRef((t,n)=>{var{width:r,height:s,responsive:a,children:i,className:l,style:c,compact:d,title:u,desc:f}=t,p=bOe(t,vOe),h=ya(p);return d?x.createElement(x.Fragment,null,x.createElement(uv,{width:r,height:s}),x.createElement(JR,{otherAttributes:h,title:u,desc:f},i)):x.createElement(yOe,{className:l,style:c,width:r,height:s,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(JR,{otherAttributes:h,title:u,desc:f,ref:n},x.createElement(TTe,null,i)))});function q1(){return q1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},q1.apply(null,arguments)}var jOe={top:5,right:5,bottom:5,left:5},NOe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:jOe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},SOe=x.forwardRef(function(n,r){var s,a=or(n.categoricalChartProps,NOe),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,categoricalChartProps:u}=n,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return x.createElement(bH,{preloadedState:{options:f},reduxStoreName:(s=u.id)!==null&&s!==void 0?s:i},x.createElement(iH,{chartData:u.data}),x.createElement(wH,{layout:a.layout,margin:a.margin}),x.createElement(jH,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),x.createElement(NH,q1({},a,{ref:r})))}),kOe=["axis","item"],G1=x.forwardRef((t,n)=>x.createElement(SOe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kOe,tooltipPayloadSearcher:jU,categoricalChartProps:t,ref:n}));function COe(t){var n=gt();return x.useEffect(()=>{n(YMe(t))},[n,t]),null}var _Oe=["layout"];function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Y1.apply(null,arguments)}function POe(t,n){if(t==null)return{};var r,s,a=AOe(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function AOe(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var EOe={top:5,right:5,bottom:5,left:5},TOe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:EOe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},MOe=x.forwardRef(function(n,r){var s,a=or(n.categoricalChartProps,TOe),{layout:i}=a,l=POe(a,_Oe),{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=n,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(bH,{preloadedState:{options:p},reduxStoreName:(s=a.id)!==null&&s!==void 0?s:c},x.createElement(iH,{chartData:a.data}),x.createElement(wH,{layout:i,margin:a.margin}),x.createElement(jH,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),x.createElement(COe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),x.createElement(NH,Y1({},l,{ref:r})))}),OOe=["item"],ROe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},X1=x.forwardRef((t,n)=>{var r=or(t,ROe);return x.createElement(MOe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:OOe,tooltipPayloadSearcher:jU,categoricalChartProps:r,ref:n})});const ki=["#0f172a","#0284c7","#22c55e","#e11d48","#6366f1"];function Ma(t){return t.toISOString().slice(0,10)}function ZR(t,n){const r=new Date(t);return r.setDate(r.getDate()+n),r}const IOe={hidden:{opacity:0,y:8},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},Vb={hidden:{},visible:{transition:{staggerChildren:.08,delayChildren:.05}}},Ub={hidden:{opacity:0,y:10,scale:.97},visible:{opacity:1,y:0,scale:1,transition:{duration:.25,ease:"easeOut"}}},e5={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.25,ease:"easeOut"}}};function t5(){var ne;const t=new Date,[n,r]=x.useState(()=>Ma(t)),[s,a]=x.useState(()=>Ma(t)),[i,l]=x.useState("today"),[c,d]=x.useState("overview"),[u,f]=x.useState(null),[p,h]=x.useState(null),[m,g]=x.useState(!0),[y,v]=x.useState(""),[b,w]=x.useState(0),j=!!(n&&s);x.useEffect(()=>{if(!j){g(!1),v(""),f(null);return}(async()=>{var te,oe;g(!0),v("");try{const Fe=await Zve({date_from:n,date_to:s});console.log("DASHBOARD DATA >>>",Fe.data),f(Fe.data),h(new Date)}catch(H){console.error(H),v(((oe=(te=H==null?void 0:H.response)==null?void 0:te.data)==null?void 0:oe.detail)||"Failed to load dashboard data. Please try again."),f(null)}finally{g(!1)}})()},[n,s,b,j]);const N=((ne=u==null?void 0:u.filters)==null?void 0:ne.caps)||{},S=Object.keys(N).length>0,_=x.useMemo(()=>{if(!S)return[];const z=[];return N.can_patients&&z.push({key:"patients",label:"Patients",icon:Ts}),N.can_opd&&z.push({key:"opd",label:"OPD",icon:ur}),N.can_ipd&&z.push({key:"ipd",label:"IPD / Beds",icon:zc}),N.can_lab&&z.push({key:"lab",label:"Lab",icon:od}),N.can_radiology&&z.push({key:"radiology",label:"Radiology",icon:QP}),N.can_pharmacy&&z.push({key:"pharmacy",label:"Pharmacy",icon:Uc}),N.can_billing&&z.push({key:"billing",label:"Billing",icon:qP}),N.can_ot&&z.push({key:"ot",label:"OT",icon:Ts}),z},[S,N]),k=x.useMemo(()=>{var z;return((z=u==null?void 0:u.widgets)==null?void 0:z.filter(te=>te.widget_type==="metric"))||[]},[u]),C=x.useMemo(()=>{var z;return((z=u==null?void 0:u.widgets)==null?void 0:z.filter(te=>te.widget_type==="table"))||[]},[u]),P=x.useMemo(()=>{var z;return((z=u==null?void 0:u.widgets)==null?void 0:z.filter(te=>te.widget_type==="chart"))||[]},[u]),E=P.find(z=>z.code==="patient_flow"),M=P.find(z=>z.code==="ipd_bed_occupancy"),T=P.find(z=>z.code==="revenue_by_stream"),A=P.find(z=>z.code==="appointment_status"),R=P.find(z=>z.code==="ipd_status"),O=P.find(z=>z.code==="payment_modes"),I=P.find(z=>z.code==="top_lab_tests"),L=P.find(z=>z.code==="top_radiology_tests"),D=P.find(z=>z.code==="billing_summary"),$=P.find(z=>z.code==="top_medicines"),F=C.find(z=>z.code==="recent_ipd_admissions"),K=k.filter(z=>z.code.startsWith("revenue_")),J=k.filter(z=>!z.code.startsWith("revenue_")),Y=()=>w(z=>z+1),ee=z=>{l(z);const te=new Date;if(z==="today"){const oe=Ma(te);r(oe),a(oe)}else if(z==="7d"){const oe=Ma(ZR(te,-6)),H=Ma(te);r(oe),a(H)}else if(z==="30d"){const oe=Ma(ZR(te,-29)),H=Ma(te);r(oe),a(H)}else if(z==="month"){const oe=new Date(te.getFullYear(),te.getMonth(),1),H=Ma(oe),Fe=Ma(te);r(H),a(Fe)}},Q=z=>te=>{l("custom"),z(te.target.value)},ue=x.useMemo(()=>{if(!u)return[];const z=it=>{var tt;return((tt=k.find(bi=>bi.code===it))==null?void 0:tt.data)??0},te=Number(z("metric_new_patients"))||0,oe=Number(z("metric_opd_visits"))||0,H=Number(z("metric_ipd_admissions"))||0,Te=((M==null?void 0:M.data)||{}).occupancy_pct??0,X=(T==null?void 0:T.data)||[],je=Array.isArray(X)&&X.length?[...X].sort((it,tt)=>(tt.value||0)-(it.value||0))[0]:null,_e=[];return N.can_patients&&k.length&&_e.push({key:"patients",label:"New Patients",value:te,helper:"Registered in period",icon:Ts,tone:"sky"}),N.can_opd&&k.length&&_e.push({key:"opd",label:"OPD Visits",value:oe,helper:"Completed consults",icon:ur,tone:"emerald"}),N.can_ipd&&k.length&&_e.push({key:"ipd",label:"IPD Admissions",value:H,helper:"Admitted cases",icon:zc,tone:"violet"}),N.can_ipd&&M&&_e.push({key:"beds",label:"Bed Occupancy",value:Te,suffix:"%",helper:"Across all wards",icon:zc,tone:"amber"}),je&&(N.can_billing||N.can_pharmacy||N.can_lab||N.can_radiology)&&_e.push({key:"revenue",label:"Top Revenue Stream",value:je.value||0,helper:je.label||"",icon:je.label==="Pharmacy"?Uc:je.label==="Lab"?od:je.label==="Radiology"?QP:qP,tone:"rose"}),_e.filter(Boolean)},[u,k,M,T,N.can_patients,N.can_opd,N.can_ipd,N.can_billing,N.can_pharmacy,N.can_lab,N.can_radiology]),G=x.useMemo(()=>[{key:"overview",label:"Overview",show:!0},{key:"clinical",label:"Clinical",show:N.can_patients||N.can_opd||N.can_ipd},{key:"revenue",label:"Revenue",show:N.can_billing||N.can_pharmacy||N.can_lab||N.can_radiology},{key:"operations",label:"Operations",show:N.can_ipd||N.can_pharmacy||N.can_lab||N.can_radiology}].filter(te=>te.show),[N]);return x.useEffect(()=>{G.find(z=>z.key===c)||G.length>0&&d(G[0].key)},[G,c]),o.jsxs(ge.div,{className:"relative min-h-[calc(100vh-4rem)] bg-slate-50 px-3 py-3 md:px-6 md:py-6",variants:IOe,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute -top-24 right-0 h-40 w-40 rounded-full bg-sky-200/40 blur-3xl"}),o.jsx("div",{className:"absolute -bottom-24 left-4 h-40 w-40 rounded-full bg-emerald-200/40 blur-3xl"})]}),o.jsxs("div",{className:"mx-auto w-full max-w-6xl space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs(ge.div,{className:Ce("flex flex-col md:flex-row md:items-start md:justify-between gap-3","rounded-2xl border border-slate-200/70 bg-white/90 backdrop-blur-sm p-3 md:p-5 shadow-sm"),children:[o.jsxs("div",{className:"space-y-2 md:max-w-md",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200 bg-sky-50 px-3 py-1 text-[10px] md:text-[11px] font-medium text-sky-700",children:[o.jsxs("span",{className:"relative flex h-2 w-2",children:[o.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-emerald-400 opacity-75"}),o.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-emerald-500"})]}),"Live operations & clinical overview"]}),o.jsxs("h1",{className:"text-xl md:text-3xl font-semibold tracking-tight text-slate-900 flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex h-8 w-8 md:h-9 md:w-9 items-center justify-center rounded-xl bg-sky-100 text-sky-600 border border-sky-200",children:o.jsx(Tu,{className:"w-4 h-4 md:w-5 md:h-5"})}),"Dashboard"]}),o.jsx("p",{className:"text-xs md:text-sm text-slate-600",children:"Monitor patients, beds, diagnostics, pharmacy and revenue in one live dashboard designed for hospital admins & clinical teams."}),S&&_.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:_.map(z=>o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 border border-slate-200 px-2 py-0.5 text-[10px] text-slate-700",children:[o.jsx("span",{className:"flex h-4 w-4 items-center justify-center rounded-full bg-white shadow-inner",children:o.jsx(z.icon,{className:"w-3 h-3"})}),o.jsx("span",{className:"font-medium",children:z.label})]},z.key))}),p&&o.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-full bg-slate-100 px-2.5 py-1 mt-1 text-[10px] text-slate-600",children:[o.jsx(Vc,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"Last updated:"}),o.jsx("span",{children:p.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]}),o.jsxs("div",{className:"flex flex-col gap-2 w-full md:w-auto",children:[o.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{key:"today",label:"Today"},{key:"7d",label:"Last 7 days"},{key:"30d",label:"Last 30 days"},{key:"month",label:"This month"},{key:"custom",label:"Custom"}].map(z=>o.jsx("button",{type:"button",onClick:()=>ee(z.key),className:Ce("px-2.5 py-1 rounded-full text-[10px] font-medium border transition-colors",i===z.key?"bg-sky-600 text-white border-sky-600 shadow-sm":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"),children:z.label},z.key))}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[o.jsxs("div",{className:"flex flex-1 items-center gap-2 rounded-xl border border-slate-200 bg-white px-2.5 py-2 shadow-inner",children:[o.jsx(fx,{className:"w-4 h-4 text-slate-500 shrink-0"}),o.jsxs("div",{className:"flex flex-col gap-1 w-full text-[11px] text-slate-700 sm:flex-row sm:items-center",children:[o.jsxs("div",{className:"flex items-center gap-1 w-full",children:[o.jsx("span",{className:"hidden sm:inline",children:"From"}),o.jsx("input",{type:"date",value:n,onChange:Q(r),className:"w-full border border-slate-200 bg-slate-50 rounded px-1.5 py-0.5 text-[11px] text-slate-800 focus:outline-none focus:ring-1 focus:ring-sky-500"})]}),o.jsxs("div",{className:"flex items-center gap-1 w-full",children:[o.jsx("span",{className:"hidden sm:inline",children:"To"}),o.jsx("input",{type:"date",value:s,onChange:Q(a),className:"w-full border border-slate-200 bg-slate-50 rounded px-1.5 py-0.5 text-[11px] text-slate-800 focus:outline-none focus:ring-1 focus:ring-sky-500"})]})]})]}),o.jsxs(ge.button,{onClick:Y,whileTap:{scale:.96},className:Ce("inline-flex items-center justify-center gap-2 rounded-xl","border border-sky-600 bg-sky-600 text-white shadow-sm","px-3 py-2 text-xs sm:text-sm font-medium w-full sm:w-auto","hover:bg-sky-500 hover:border-sky-500 transition-colors"),children:[o.jsx(Qw,{className:"w-4 h-4"}),"Refresh"]})]})]})]}),o.jsx(Ds,{children:y&&o.jsx(ge.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},children:o.jsxs(co,{variant:"destructive",children:[o.jsx(f3,{className:"h-4 w-4 mt-0.5"}),o.jsxs("div",{children:[o.jsx(uo,{children:"Dashboard error"}),o.jsx(fo,{children:y})]})]})})}),!m&&u&&ue.length>0&&o.jsxs(ge.div,{className:"rounded-2xl border border-slate-200 bg-white px-2.5 py-3 shadow-sm",variants:e5,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 px-1",children:[o.jsx("h2",{className:"text-xs font-semibold text-slate-700",children:"At a glance"}),o.jsx("span",{className:"h-px flex-1 bg-slate-200"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map(z=>o.jsx(DOe,{pill:z},z.key))})]})]}),!j&&!m&&!y&&o.jsx(Se,{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50/70",children:o.jsxs(Ee,{className:"py-6 flex flex-col items-center text-center gap-2",children:[o.jsx(fx,{className:"w-8 h-8 text-slate-400 mb-1"}),o.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Select a date range to see live dashboard data."}),o.jsxs("p",{className:"text-xs text-slate-500 max-w-xs",children:["Choose both ",o.jsx("span",{className:"font-semibold",children:"From"})," and"," ",o.jsx("span",{className:"font-semibold",children:"To"})," dates above. Well show patient, revenue, pharmacy and diagnostics insights."]})]})}),m&&j&&!u&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[o.jsx(He,{className:"h-20 rounded-2xl"}),o.jsx(He,{className:"h-20 rounded-2xl"}),o.jsx(He,{className:"h-20 rounded-2xl"}),o.jsx(He,{className:"h-20 rounded-2xl"})]}),o.jsx(He,{className:"h-56 rounded-2xl"}),o.jsx(He,{className:"h-56 rounded-2xl"})]}),!m&&j&&u&&o.jsx(ge.div,{variants:e5,initial:"hidden",animate:"visible",className:"pb-4",children:o.jsxs(dk,{value:c,onValueChange:d,className:"w-full",children:[o.jsx("div",{className:"flex justify-between items-center mb-2",children:o.jsx(Ay,{className:"flex flex-nowrap overflow-x-auto gap-1 rounded-full bg-slate-100/80 p-1",children:G.map(z=>o.jsx(cl,{value:z.key,className:"px-3 py-1.5 text-xs sm:text-sm rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm",children:z.label},z.key))})}),o.jsxs(sa,{value:"overview",className:"space-y-4 mt-2",children:[k.length>0&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Key metrics"}),o.jsx(ge.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",variants:Vb,initial:"hidden",animate:"visible",children:k.map(z=>o.jsx(ge.div,{variants:Ub,whileHover:{y:-2,scale:1.01,boxShadow:"0 18px 35px rgba(15, 23, 42, 0.12)"},transition:{type:"spring",stiffness:220,damping:20},children:o.jsx(Hb,{widget:z})},z.code))})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Activity & revenue mix"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[E&&o.jsx(bn,{widget:E}),T&&o.jsx(bn,{widget:T})]})]})]}),o.jsxs(sa,{value:"clinical",className:"space-y-4 mt-2",children:[J.length>0&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Clinical metrics"}),o.jsx(ge.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",variants:Vb,initial:"hidden",animate:"visible",children:J.map(z=>o.jsx(ge.div,{variants:Ub,whileHover:{y:-2,scale:1.01,boxShadow:"0 18px 35px rgba(15, 23, 42, 0.12)"},transition:{type:"spring",stiffness:220,damping:20},children:o.jsx(Hb,{widget:z})},z.code))})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Patient flow & statuses"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[E&&o.jsx(bn,{widget:E}),A&&o.jsx(bn,{widget:A})]})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"IPD beds & admissions"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[M&&o.jsx(bn,{widget:M}),R&&o.jsx(bn,{widget:R})]})]}),F&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Recent IPD admissions"}),o.jsx(n5,{widget:F})]})]}),o.jsxs(sa,{value:"revenue",className:"space-y-4 mt-2",children:[K.length>0&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Revenue KPIs"}),o.jsx(ge.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",variants:Vb,initial:"hidden",animate:"visible",children:K.map(z=>o.jsx(ge.div,{variants:Ub,whileHover:{y:-2,scale:1.01,boxShadow:"0 18px 35px rgba(15, 23, 42, 0.12)"},transition:{type:"spring",stiffness:220,damping:20},children:o.jsx(Hb,{widget:z})},z.code))})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Revenue & payment mix"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[T&&o.jsx(bn,{widget:T}),O&&o.jsx(bn,{widget:O})]})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Billed vs pending & top tests"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-3 md:gap-4",children:[D&&o.jsx(bn,{widget:D}),I&&o.jsx(bn,{widget:I}),L&&o.jsx(bn,{widget:L})]})]}),$&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Top 10 medicines (by quantity)"}),o.jsx(bn,{widget:$})]})]}),o.jsxs(sa,{value:"operations",className:"space-y-4 mt-2",children:[o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Capacity & utilization"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4",children:[M&&o.jsx(bn,{widget:M}),E&&o.jsx(bn,{widget:E})]})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Pharmacy & diagnostics focus"}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-3 md:gap-4",children:[$&&o.jsx(bn,{widget:$}),I&&o.jsx(bn,{widget:I}),L&&o.jsx(bn,{widget:L})]})]}),F&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-700",children:"Latest IPD activity"}),o.jsx(n5,{widget:F})]})]})]})})]})]})}function DOe({pill:t}){const{label:n,value:r,helper:s,icon:a,tone:i,suffix:l}=t,c={sky:"bg-sky-50 border-sky-100 text-sky-800",emerald:"bg-emerald-50 border-emerald-100 text-emerald-800",violet:"bg-violet-50 border-violet-100 text-violet-800",amber:"bg-amber-50 border-amber-100 text-amber-800",rose:"bg-rose-50 border-rose-100 text-rose-800"}[i||"sky"];return o.jsxs(ge.div,{whileHover:{y:-2,scale:1.01},transition:{type:"spring",stiffness:260,damping:18},className:Ce("flex-1 min-w-[140px] sm:min-w-[160px] rounded-2xl border px-2.5 py-2","flex items-center gap-2 sm:gap-3 shadow-[0_8px_18px_rgba(15,23,42,0.04)]",c),children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-xl bg-white/70 text-slate-700 shadow-sm shrink-0",children:a&&o.jsx(a,{className:"w-4 h-4"})}),o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("div",{className:"text-[10px] uppercase tracking-wide font-semibold opacity-90",children:n}),o.jsxs("div",{className:"text-base sm:text-lg font-semibold leading-tight",children:[typeof r=="number"?r.toLocaleString("en-IN",{maximumFractionDigits:l==="%"?1:0}):r,l&&o.jsx("span",{className:"ml-0.5 text-[10px]",children:l})]}),s&&o.jsx("div",{className:"text-[10px] leading-tight opacity-80",children:s})]})]})}function Hb({widget:t}){const n=t.data,r=typeof n=="number"||typeof n=="string"?n:typeof n=="object"&&n!==null?n.value??n.total??n.amount??0:0,s=typeof r=="number"?r.toLocaleString("en-IN",{maximumFractionDigits:(t.code.includes("revenue"),0)}):r;return o.jsxs(Se,{className:Ce("rounded-2xl shadow-sm overflow-hidden border border-slate-200 bg-white","hover:border-sky-200 transition-colors"),children:[o.jsxs(De,{className:"flex flex-row items-start justify-between space-y-0 pb-1",children:[o.jsxs(Le,{className:"text-sm font-medium text-slate-800 flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-400 shadow-[0_0_0_3px_rgba(52,211,153,0.35)]"}),t.title]}),o.jsx(Vn,{variant:"outline",className:"text-[9px] uppercase tracking-wide border-slate-200 text-slate-500",children:t.code})]}),o.jsxs(Ee,{className:"pt-0",children:[o.jsx("div",{className:"text-2xl md:text-3xl font-semibold tracking-tight mt-1 text-slate-900",children:s}),t.description&&o.jsx("p",{className:"text-[11px] text-slate-500 mt-1",children:t.description})]})]})}function bn({widget:t}){var a,i,l;const n=((a=t.config)==null?void 0:a.chart_type)||"bar";if(n==="donut"){const c=t.data||{},d=[{label:"Occupied",value:c.occupied||0},{label:"Available",value:c.available||0}];return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-800",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-500",children:"Snapshot"})]}),o.jsxs(Ee,{className:"h-56 sm:h-64",children:[o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(X1,{children:[o.jsx(Ng,{dataKey:"value",data:d,innerRadius:50,outerRadius:80,paddingAngle:3,children:d.map((u,f)=>o.jsx(ia,{fill:ki[f%ki.length]},`cell-${f}`))}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12}})]})}),typeof c.occupancy_pct=="number"&&o.jsxs("p",{className:"text-xs text-slate-600 text-center mt-2",children:["Occupancy:"," ",o.jsxs("span",{className:"font-medium text-emerald-600",children:[c.occupancy_pct,"%"]})," ",o.jsxs("span",{className:"opacity-80",children:["(",c.occupied,"/",c.total," beds)"]})]})]})]})}if(n==="pie"){const c=Array.isArray(t.data)?t.data:[];return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-800",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-500",children:"Distribution"})]}),o.jsx(Ee,{className:"h-56 sm:h-64",children:c.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No data to display."}):o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(X1,{children:[o.jsx(Ng,{data:c,dataKey:"value",nameKey:"label",outerRadius:80,paddingAngle:3,labelLine:!1,label:d=>`${d.label}: ${d.value??0}`,children:c.map((d,u)=>o.jsx(ia,{fill:ki[u%ki.length]},`cell-${u}`))}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12}})]})})})]})}if(n==="multi_bar"){const c=Array.isArray(t.data)?t.data:[],d=((i=t.config)==null?void 0:i.series)||[],u=((l=t.config)==null?void 0:l.x_key)||"label";return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsx(De,{className:"pb-2",children:o.jsx(Le,{className:"text-base font-semibold text-slate-800",children:t.title})}),o.jsx(Ee,{className:"h-56 sm:h-64",children:c.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No data to display."}):o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(G1,{data:c,margin:{left:8,right:8,top:8,bottom:8},children:[o.jsx(Ag,{dataKey:u,stroke:"#6b7280",fontSize:11}),o.jsx(Tg,{stroke:"#6b7280",fontSize:11}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12}}),d.map((f,p)=>o.jsx(Cg,{dataKey:f.key,name:f.label,radius:[4,4,0,0],children:c.map((h,m)=>o.jsx(ia,{fill:ki[(p+m)%ki.length]},`cell-${f.key}-${m}`))},f.key))]})})})]})}const r=Array.isArray(t.data)?t.data:[],s=r.length>0?r.map((c,d)=>({label:c.label??c.name??`Item ${d+1}`,value:c.value??c.amount??0})):[];return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-800",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-500",children:t.description?"Insight":"Summary"})]}),o.jsx(Ee,{className:"h-56 sm:h-64",children:s.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No data to display."}):o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(G1,{data:s,margin:{left:8,right:8,top:8,bottom:8},children:[o.jsx(Ag,{dataKey:"label",stroke:"#6b7280",fontSize:11}),o.jsx(Tg,{stroke:"#6b7280",fontSize:11}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12}}),o.jsx(Cg,{dataKey:"value",radius:[4,4,0,0],children:s.map((c,d)=>o.jsx(ia,{fill:ki[d%ki.length]},`cell-${d}`))})]})})})]})}function n5({widget:t}){var s;const n=Array.isArray(t.data)?t.data:[],r=((s=t.config)==null?void 0:s.columns)||(n[0]?Object.keys(n[0]):[]);return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-800",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-500",children:"Latest records"})]}),o.jsx(Ee,{className:"space-y-2",children:n.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No records found."}):o.jsx("div",{className:"flex flex-col gap-2",children:n.map((a,i)=>o.jsx("div",{className:Ce("rounded-xl border border-slate-200 bg-slate-50/60 px-3 py-2.5","flex flex-col gap-1 text-xs md:text-sm"),children:r.map((l,c)=>o.jsxs("div",{className:Ce("flex justify-between gap-2",c===0?"font-semibold text-slate-900":"text-slate-700"),children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:l.replace(/_/g," ")}),o.jsx("span",{className:"text-right",children:LOe(a[l])})]},l))},i))})})]})}function LOe(t){return t==null?"-":typeof t=="number"?t.toLocaleString("en-IN",{maximumFractionDigits:1}):typeof t=="string"&&t.length>40?t.slice(0,40)+"":String(t)}function $Oe(){return B.get("/mis/definitions")}function FOe(t,n){return B.post(`/mis/reports/${t}`,n)}const sm=["#0f172a","#1e293b","#475569","#64748b","#94a3b8"];function Oa(t){return t.toISOString().slice(0,10)}function r5(t,n){const r=new Date(t);return r.setDate(r.getDate()+n),r}function BOe(t){if(!t)return"";const n=t.value!==null&&t.value!==void 0?t.value:0;return`${t.label}: ${n}`}const zOe={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.35,ease:"easeOut"}}},ku={hidden:{opacity:0,y:8},visible:(t=0)=>({opacity:1,y:0,transition:{duration:.3,ease:"easeOut",delay:t}})},s5={hidden:{},visible:{transition:{staggerChildren:.06}}},Wb={hidden:{opacity:0,y:6,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.25,ease:"easeOut"}}};function VOe(){const t=new Date,[n,r]=x.useState(()=>Oa(t)),[s,a]=x.useState(()=>Oa(t)),[i,l]=x.useState([]),[c,d]=x.useState(!0),[u,f]=x.useState(""),[p,h]=x.useState({}),[m,g]=x.useState("today"),[y,v]=x.useState(null),[b,w]=x.useState(!1),[j,N]=x.useState(""),S=!!(n&&s);x.useEffect(()=>{let $=!0;return(async()=>{var K,J;d(!0),N("");try{const Y=await $Oe();if(!$)return;const ee=(Y==null?void 0:Y.data)||[];l(ee),ee.length>0&&f(ee[0].code)}catch(Y){if(console.error(Y),!$)return;N(((J=(K=Y==null?void 0:Y.response)==null?void 0:K.data)==null?void 0:J.detail)||"Failed to load MIS report definitions.")}finally{$&&d(!1)}})(),()=>{$=!1}},[]);const _=x.useMemo(()=>i.find($=>$.code===u)||null,[i,u]),k=$=>{g($);const F=new Date;if($==="today"){const K=Oa(F);r(K),a(K)}else if($==="7d")r(Oa(r5(F,-6))),a(Oa(F));else if($==="30d")r(Oa(r5(F,-29))),a(Oa(F));else if($==="month"){const K=new Date(F.getFullYear(),F.getMonth(),1);r(Oa(K)),a(Oa(F))}},C=$=>F=>{g("custom"),$(F.target.value)},P=($,F)=>{h(K=>({...K,[$]:F}))},E=async()=>{var $,F;if(!u||!S){N("Please select a report and valid date range.");return}w(!0),N(""),v(null);try{const J=await FOe(u,{date_from:n,date_to:s,filters:p});v((J==null?void 0:J.data)||null)}catch(K){console.error(K),N(((F=($=K==null?void 0:K.response)==null?void 0:$.data)==null?void 0:F.detail)||"Failed to run MIS report. Please check filters and try again.")}finally{w(!1)}},M=x.useMemo(()=>y!=null&&y.cards&&Array.isArray(y.cards)?y.cards:[],[y]),T=x.useMemo(()=>y!=null&&y.charts&&Array.isArray(y.charts)?y.charts:[],[y]),A=(_==null?void 0:_.category)||"MIS",R=T.filter($=>$.type==="bar"),O=T.filter($=>$.type==="pie"),I=(_==null?void 0:_.name)||"No report selected",L=S?`${n}  ${s}`:"Select a date range",D=b?"Running report":y?"Showing latest results":"Awaiting first run";return o.jsx(ge.div,{className:"relative min-h-[calc(100vh-4rem)] bg-slate-50 px-2.5 py-3 sm:px-3 sm:py-4 md:px-6 md:py-6 lg:px-8",variants:zOe,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"mx-auto w-full max-w-6xl space-y-4 md:space-y-5 lg:space-y-6",children:[o.jsxs(ge.div,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-[10px] md:text-[11px]",custom:0,variants:ku,initial:"hidden",animate:"visible",children:[o.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-full border border-slate-200 bg-white px-2.5 py-1 text-slate-800 shadow-sm",children:[o.jsx(EX,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:"MIS  Management Information System"})]}),o.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[o.jsx("span",{className:"inline-flex h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"inline-flex md:hidden rounded-full bg-white px-2 py-0.5 text-[9px] uppercase tracking-wide border border-slate-200",children:"Mobile view"}),o.jsx("span",{className:"hidden md:inline-flex lg:hidden rounded-full bg-white px-2 py-0.5 text-[9px] uppercase tracking-wide border border-slate-200",children:"Tablet / Laptop"}),o.jsx("span",{className:"hidden lg:inline-flex rounded-full bg-white px-2 py-0.5 text-[9px] uppercase tracking-wide border border-slate-200",children:"Desktop workspace"})]})]}),o.jsx(ge.div,{variants:ku,custom:.05,initial:"hidden",animate:"visible",children:o.jsx(Se,{className:"rounded-3xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:o.jsxs(Ee,{className:"p-4 sm:p-5 md:p-6 lg:p-7 flex flex-col gap-4 md:gap-5 lg:gap-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{className:"space-y-3 max-w-xl",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-[10px] md:text-[11px] font-medium text-slate-700",children:[o.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 text-white text-[10px]",children:"MIS"}),"Clean, light-weight analytics console"]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"inline-flex h-10 w-10 md:h-11 md:w-11 items-center justify-center rounded-3xl bg-slate-900 text-slate-50 shadow-sm",children:o.jsx(Tu,{className:"w-5 h-5"})}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("h1",{className:"text-[20px] md:text-[24px] lg:text-[28px] font-semibold tracking-tight text-slate-900",children:"MIS Reports Console"}),o.jsxs("p",{className:"text-[11px] md:text-[12px] text-slate-600 leading-relaxed",children:["Generate"," ",o.jsx("span",{className:"font-medium text-slate-900",children:"clinical, operational and financial"})," ","MIS reports for your hospital in a simple, distraction-free, light theme workspace."]})]})]}),_&&o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx(Vn,{variant:"outline",className:"border-slate-200 text-slate-700 bg-slate-50 text-[10px] px-2 py-0.5",children:A}),Array.isArray(_.tags)&&_.tags.map($=>o.jsx(Vn,{variant:"outline",className:"border-slate-200 text-slate-600 bg-white text-[10px] px-2 py-0.5",children:$},$))]})]}),o.jsx("div",{className:"w-full md:w-auto",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 md:gap-3 text-[11px]",children:[o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2.5 flex flex-col gap-1 shadow-xs",children:[o.jsx("span",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wide",children:"Active report"}),o.jsx("span",{className:"text-[11px] font-semibold text-slate-900 line-clamp-2",children:I})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2.5 flex flex-col gap-1 shadow-xs",children:[o.jsx("span",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wide",children:"Date range"}),o.jsx("span",{className:"text-[11px] font-semibold text-slate-900",children:L})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2.5 flex flex-col gap-1 shadow-xs",children:[o.jsx("span",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wide",children:"Status"}),o.jsxs("span",{className:"text-[11px] font-semibold text-slate-900 flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),D]})]})]})})]}),(_==null?void 0:_.description)&&o.jsx("div",{className:"pt-2 border-t border-slate-100 text-[11px] text-slate-600",children:_.description})]})})}),o.jsx(Ds,{children:j&&o.jsx(ge.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},children:o.jsxs(co,{variant:"destructive",className:"bg-rose-50 border-rose-300 text-rose-900",children:[o.jsx(f3,{className:"h-4 w-4 mt-0.5"}),o.jsxs("div",{children:[o.jsx(uo,{className:"text-rose-900",children:"MIS error"}),o.jsx(fo,{className:"text-rose-800/90",children:j})]})]})})}),o.jsxs(ge.div,{variants:ku,custom:.1,initial:"hidden",animate:"visible",className:"grid gap-4 lg:gap-5 lg:grid-cols-[minmax(0,320px)_minmax(0,1fr)] xl:grid-cols-[minmax(0,340px)_minmax(0,1fr)]",children:[o.jsxs("div",{className:"space-y-3 lg:space-y-4 lg:sticky lg:top-20 self-start",children:[o.jsxs(Se,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[o.jsx(De,{className:"pb-2 flex flex-row items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-7 w-7 rounded-xl bg-slate-900 text-white flex items-center justify-center",children:o.jsx(Tu,{className:"w-4 h-4"})}),o.jsxs("div",{children:[o.jsx(Le,{className:"text-sm font-semibold text-slate-900",children:"Report & Date"}),o.jsx("p",{className:"text-[10px] text-slate-500",children:"Choose MIS view and time window"})]})]})}),o.jsxs(Ee,{className:"space-y-3 pb-3",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-[11px] font-medium text-slate-800",children:"Report"}),o.jsxs("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[o.jsx(Pf,{className:"w-3 h-3"}),"MIS group"]})]}),c?o.jsx(He,{className:"h-9 rounded-xl bg-slate-100"}):o.jsxs(jt,{value:u,onValueChange:$=>{f($),v(null)},children:[o.jsx(ht,{className:"h-9 rounded-xl border-slate-200 bg-white text-xs text-slate-900 focus:ring-slate-400",children:o.jsx(Nt,{placeholder:"Select report"})}),o.jsx(mt,{className:"bg-white border-slate-200 text-slate-900 max-h-72",children:i.map($=>o.jsx(Ue,{value:String($.code),className:"text-xs",children:$.name},$.code))})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("span",{className:"text-[11px] font-medium text-slate-800",children:"Quick ranges"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{key:"today",label:"Today"},{key:"7d",label:"Last 7 days"},{key:"30d",label:"Last 30 days"},{key:"month",label:"This month"},{key:"custom",label:"Custom"}].map($=>o.jsx("button",{type:"button",onClick:()=>k($.key),className:Ce("px-2.5 py-1 rounded-full text-[10px] font-medium border transition-colors",m===$.key?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-200 hover:bg-slate-50"),children:$.label},$.key))})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("span",{className:"text-[11px] font-medium text-slate-800",children:"Custom date range"}),o.jsx("div",{className:"flex flex-col gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2.5 py-2",children:[o.jsx(fx,{className:"w-4 h-4 text-slate-500 shrink-0"}),o.jsxs("div",{className:"flex flex-col gap-1 w-full text-[11px] text-slate-800",children:[o.jsxs("div",{className:"flex items-center gap-1 w-full",children:[o.jsx("span",{className:"w-10 text-[10px] text-slate-500",children:"From"}),o.jsx(fe,{type:"date",value:n,onChange:C(r),className:"h-7 w-full border-slate-200 bg-slate-50 text-[11px] text-slate-900"})]}),o.jsxs("div",{className:"flex items-center gap-1 w-full",children:[o.jsx("span",{className:"w-10 text-[10px] text-slate-500",children:"To"}),o.jsx(fe,{type:"date",value:s,onChange:C(a),className:"h-7 w-full border-slate-200 bg-slate-50 text-[11px] text-slate-900"})]})]})]})})]}),o.jsx("div",{className:"pt-1",children:o.jsx(ce,{size:"sm",className:"h-9 w-full rounded-xl inline-flex items-center justify-center gap-2 bg-slate-900 hover:bg-slate-800 text-white",onClick:E,disabled:b||!u||!S,children:b?o.jsxs(o.Fragment,{children:[o.jsx(Qw,{className:"w-4 h-4 animate-spin"}),"Running report"]}):o.jsxs(o.Fragment,{children:[o.jsx(Qw,{className:"w-4 h-4"}),"Run MIS report"]})})})]})]}),_&&Array.isArray(_.filters)&&_.filters.length>0&&o.jsxs(Se,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between gap-2",children:[o.jsxs(Le,{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[o.jsx(Pf,{className:"w-4 h-4 text-slate-500"}),"Advanced filters"]}),o.jsx("span",{className:"text-[10px] text-slate-500",children:"Tailor output for this report"})]}),o.jsx(Ee,{className:"pb-3",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:_.filters.map($=>$.type==="select"&&Array.isArray($.options)?o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-[11px] font-medium text-slate-800",children:$.label}),$.required&&o.jsx("span",{className:"text-[10px] text-rose-500",children:"*"})]}),o.jsxs(jt,{value:p[$.key]!==void 0?String(p[$.key]):"",onValueChange:F=>P($.key,F),children:[o.jsx(ht,{className:"h-8 rounded-xl border-slate-200 bg-slate-50 text-xs text-slate-900",children:o.jsx(Nt,{placeholder:`All ${$.label}`})}),o.jsxs(mt,{className:"bg-white border-slate-200 text-slate-900 max-h-64",children:[o.jsx(Ue,{value:"__ALL__",className:"text-xs text-slate-500",children:"All"}),$.options.map(F=>o.jsx(Ue,{value:String(F.value),className:"text-xs",children:F.label},F.value))]})]})]},$.key):o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"text-[11px] font-medium text-slate-800",children:$.label}),$.required&&o.jsx("span",{className:"text-[10px] text-rose-500",children:"*"})]}),o.jsx(fe,{value:p[$.key]??"",onChange:F=>P($.key,F.target.value),placeholder:`Filter by ${$.label}`,className:"h-8 rounded-xl border-slate-200 bg-slate-50 text-xs text-slate-900 placeholder:text-slate-400"})]},$.key))})})]})]}),o.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[!b&&!y&&o.jsx(Se,{className:"rounded-2xl border border-dashed border-slate-300 bg-white shadow-none",children:o.jsxs(Ee,{className:"py-10 px-4 sm:px-8 flex flex-col items-center justify-center text-center gap-3",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center border border-slate-200 mb-1",children:o.jsx(Tu,{className:"w-6 h-6 text-slate-700"})}),o.jsx("h2",{className:"text-sm md:text-base font-semibold text-slate-900",children:"Run your first MIS report"}),o.jsxs("p",{className:"text-[11px] md:text-[12px] text-slate-600 max-w-md",children:["Select a report on the left, choose a date range, add filters if needed and click"," ",o.jsx("span",{className:"font-medium text-slate-900",children:"Run MIS report"})," ","to see KPIs, charts and detailed records."]})]})}),b&&o.jsxs(ge.div,{className:"space-y-4",variants:ku,custom:.15,initial:"hidden",animate:"visible",children:[o.jsx(He,{className:"h-16 rounded-2xl bg-white/80"}),o.jsx(He,{className:"h-64 rounded-2xl bg-white/80"}),o.jsx(He,{className:"h-64 rounded-2xl bg-white/80"})]}),!b&&y&&o.jsx(ge.div,{variants:ku,custom:.15,initial:"hidden",animate:"visible",children:o.jsxs(dk,{defaultValue:"summary",className:"w-full",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[o.jsxs(Ay,{className:"flex flex-nowrap overflow-x-auto gap-1 rounded-full bg-slate-100 p-1 border border-slate-200",children:[o.jsx(cl,{value:"summary",className:"px-3 py-1.5 text-xs sm:text-sm rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Summary"}),o.jsx(cl,{value:"charts",className:"px-3 py-1.5 text-xs sm:text-sm rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Charts"}),y.table&&o.jsx(cl,{value:"details",className:"px-3 py-1.5 text-xs sm:text-sm rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",children:"Detailed view"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-2 text-[10px] text-slate-500",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsxs("span",{children:["Generated for"," ",o.jsx("span",{className:"font-medium text-slate-800",children:y.name})]})]})]}),o.jsxs(sa,{value:"summary",className:"space-y-4 mt-2",children:[M.length>0&&o.jsxs("section",{className:"space-y-2",children:[o.jsxs("h2",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-100 text-slate-700 border border-slate-200",children:o.jsx(Tu,{className:"w-3 h-3"})}),"Key indicators"]}),o.jsx(ge.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4",variants:s5,initial:"hidden",animate:"visible",children:M.map(($,F)=>o.jsx(ge.div,{variants:Wb,children:o.jsx(UOe,{card:$})},F))})]}),R[0]&&o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Primary trend"}),o.jsx(Kb,{chart:R[0]})]})]}),o.jsx(sa,{value:"charts",className:"space-y-4 mt-2",children:o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Chart views"}),o.jsxs(ge.div,{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-3 md:gap-4",variants:s5,initial:"hidden",animate:"visible",children:[R.map($=>o.jsx(ge.div,{variants:Wb,children:o.jsx(Kb,{chart:$})},$.code)),O.map($=>o.jsx(ge.div,{variants:Wb,children:o.jsx(Kb,{chart:$})},$.code))]})]})}),y.table&&o.jsx(sa,{value:"details",className:"space-y-4 mt-2",children:o.jsxs("section",{className:"space-y-2",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Detailed records"}),o.jsx(HOe,{table:y.table})]})})]})})]})]})]})})}function UOe({card:t}){return o.jsxs(ge.div,{whileHover:{y:-2,scale:1.01},transition:{type:"spring",stiffness:240,damping:22},className:Ce("rounded-2xl border border-slate-200 bg-white px-3 py-2.5 shadow-sm","flex flex-col gap-1"),children:[o.jsx("div",{className:"text-[10px] uppercase tracking-wide font-semibold text-slate-500",children:t.label}),o.jsx("div",{className:"text-xl md:text-2xl font-semibold leading-tight text-slate-900",children:typeof t.value=="number"?t.value.toLocaleString("en-IN",{maximumFractionDigits:1}):t.value}),t.helper&&o.jsx("div",{className:"text-[11px] text-slate-500",children:t.helper})]})}function Kb({chart:t}){const n=t.type||"bar",r=Array.isArray(t.data)?t.data:[],s=t.config||{};if(n==="pie"){const i=r.length>0?r.map((l,c)=>({label:l.label??l.name??`Item ${c+1}`,value:l.value??l.amount??0})):[];return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-900",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-600 border border-slate-200",children:"Distribution"})]}),o.jsx(Ee,{className:"h-56 sm:h-64",children:i.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No data to display."}):o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(X1,{children:[o.jsx(Ng,{data:i,dataKey:"value",nameKey:"label",outerRadius:80,paddingAngle:3,labelLine:!1,label:BOe,children:i.map((l,c)=>o.jsx(ia,{fill:sm[c%sm.length]},`cell-${c}`))}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12,color:"#111827"}})]})})})]})}const a=r.length>0?r.map((i,l)=>({label:i.label??i.name??`Item ${l+1}`,value:i.value??i.amount??0})):[];return o.jsxs(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:[o.jsxs(De,{className:"pb-2 flex flex-row items-center justify-between",children:[o.jsx(Le,{className:"text-base font-semibold text-slate-900",children:t.title}),o.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-600 border border-slate-200",children:(s==null?void 0:s.label)||"Trend"})]}),o.jsx(Ee,{className:"h-56 sm:h-64",children:a.length===0?o.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No data to display."}):o.jsx(Mc,{width:"100%",height:"100%",children:o.jsxs(G1,{data:a,margin:{left:8,right:8,top:8,bottom:8},children:[o.jsx(Ag,{dataKey:"label",stroke:"#9ca3af",fontSize:11,tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),o.jsx(Tg,{stroke:"#9ca3af",fontSize:11,tickLine:!1,axisLine:{stroke:"#e5e7eb"}}),o.jsx(Oc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12,color:"#111827"}}),o.jsx(Cg,{dataKey:"value",radius:[4,4,0,0],children:a.map((i,l)=>o.jsx(ia,{fill:sm[l%sm.length]},`cell-${l}`))})]})})})]})}function HOe({table:t}){const n=Array.isArray(t.rows)?t.rows:[],r=t.columns&&t.columns.length>0?t.columns:n[0]?Object.keys(n[0]):[];return n.length===0?o.jsx(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:o.jsx(Ee,{className:"py-6 flex items-center justify-center",children:o.jsx("p",{className:"text-sm text-slate-500",children:"No records found."})})}):o.jsx(Se,{className:"rounded-2xl shadow-sm border border-slate-200 bg-white",children:o.jsx(Ee,{className:"py-3 flex flex-col gap-2 max-h-[480px] overflow-y-auto pr-1",children:o.jsx(Ds,{children:n.map((s,a)=>o.jsx(ge.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.2,ease:"easeOut"},className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 flex flex-col gap-1 text-xs md:text-sm",children:r.map((i,l)=>o.jsxs("div",{className:Ce("flex justify-between gap-2",l===0?"font-semibold text-slate-900":"text-slate-700"),children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:i.replace(/_/g," ")}),o.jsx("span",{className:"text-right truncate max-w-[60%]",children:WOe(s[i])})]},i))},a))})})})}function WOe(t){return t==null?"-":typeof t=="number"?t.toLocaleString("en-IN",{maximumFractionDigits:1}):typeof t=="string"&&t.length>60?t.slice(0,60)+"":String(t)}function KOe(t=""){const n=t?{q:t}:{};return B.get("/patients",{params:n})}function qOe(t){return B.get(`/patients/${t}`)}function GOe(t){return B.post("/patients",t)}function YOe(t,n){return B.put(`/patients/${t}`,n)}function XOe(t){return B.patch(`/patients/${t}/deactivate`)}function JOe(t,{type:n,file:r}){const s=new FormData;return s.append("type",n||"other"),s.append("file",r),B.post(`/patients/${t}/documents`,s,{headers:{"Content-Type":"multipart/form-data"}})}function QOe(t){return B.get(`/patients/${t}/documents`)}function ZOe(t){return B.get(`/patients/${t}/consents`)}function eRe(t,n){return B.post(`/patients/${t}/consents`,n)}async function tRe(t){const n=await B.get(`/patients/${t}/print-info`,{responseType:"blob"}),r=n.headers["content-type"]||"application/octet-stream",s=new Blob([n.data],{type:r}),a=URL.createObjectURL(s);window.open(a,"_blank")}function nRe(){return B.get("/patient-masters/all")}function rRe({name:t,dob:n,mobile:r}){return B.post("/abha/generate",{},{params:{name:t,dob:n,mobile:r}})}function sRe({txnId:t,otp:n,patientId:r}){return B.post("/abha/verify-otp",{},{params:{txnId:t,otp:n,patient_id:r}})}const aRe=["","A+","A-","B+","B-","O+","O-","AB+","AB-"],iRe=["","Single","Married","Widowed","Divorced"],oRe=["none","camp","corporate","insurance"],lRe=["","insurance","corporate","govt","other"],cRe={first_name:"",last_name:"",gender:"",dob:"",phone:"",email:"",aadhar_last4:"",blood_group:"",marital_status:"",ref_source:"",ref_doctor_id:"",ref_details:"",id_proof_type:"",id_proof_no:"",guardian_name:"",guardian_phone:"",guardian_relation:"",patient_type:"none",tag:"",religion:"",occupation:"",file_number:"",file_location:"",credit_type:"",credit_payer_id:"",credit_tpa_id:"",credit_plan_id:"",principal_member_name:"",principal_member_address:"",policy_number:"",policy_name:"",family_id:"",address:{type:"current",line1:"",line2:"",city:"",state:"",pincode:"",country:"India"}};function J1(){return JSON.parse(JSON.stringify(cRe))}function dRe(t){if(!t)return J1();const n=t.addresses&&t.addresses[0]||null;return{first_name:t.first_name||"",last_name:t.last_name||"",gender:t.gender||"",dob:t.dob||"",phone:t.phone||"",email:t.email||"",aadhar_last4:t.aadhar_last4||"",blood_group:t.blood_group||"",marital_status:t.marital_status||"",ref_source:t.ref_source||"",ref_doctor_id:t.ref_doctor_id||"",ref_details:t.ref_details||"",id_proof_type:t.id_proof_type||"",id_proof_no:t.id_proof_no||"",guardian_name:t.guardian_name||"",guardian_phone:t.guardian_phone||"",guardian_relation:t.guardian_relation||"",patient_type:t.patient_type||"none",tag:t.tag||"",religion:t.religion||"",occupation:t.occupation||"",file_number:t.file_number||"",file_location:t.file_location||"",credit_type:t.credit_type||"",credit_payer_id:t.credit_payer_id||"",credit_tpa_id:t.credit_tpa_id||"",credit_plan_id:t.credit_plan_id||"",principal_member_name:t.principal_member_name||"",principal_member_address:t.principal_member_address||"",policy_number:t.policy_number||"",policy_name:t.policy_name||"",family_id:t.family_id||"",address:{type:(n==null?void 0:n.type)||"current",line1:(n==null?void 0:n.line1)||"",line2:(n==null?void 0:n.line2)||"",city:(n==null?void 0:n.city)||"",state:(n==null?void 0:n.state)||"",pincode:(n==null?void 0:n.pincode)||"",country:(n==null?void 0:n.country)||"India"}}}function uRe({open:t,onClose:n,onSaved:r,initialPatient:s,lookups:a}){const[i,l]=x.useState(J1),[c,d]=x.useState(!1),[u,f]=x.useState(""),p=x.useMemo(()=>s?"edit":"create",[s]);if(x.useEffect(()=>{t&&(f(""),l(s?dRe(s):J1()))},[t,s]),!t)return null;const h=N=>S=>{const _=S.target.value;l(k=>({...k,[N]:_}))},m=N=>S=>{const _=S.target.value;l(k=>({...k,address:{...k.address,[N]:_}}))},g=async N=>{var S,_;N.preventDefault(),f(""),d(!0);try{const k={...i,ref_doctor_id:i.ref_doctor_id||null,credit_payer_id:i.credit_payer_id||null,credit_tpa_id:i.credit_tpa_id||null,credit_plan_id:i.credit_plan_id||null,family_id:i.family_id||null};let C;p==="create"?C=await GOe(k):C=await YOe(s.id,k),r&&r(C.data),n&&n()}catch(k){const C=((_=(S=k==null?void 0:k.response)==null?void 0:S.data)==null?void 0:_.detail)||(k==null?void 0:k.message)||"Failed to save patient";f(C)}finally{d(!1)}},{refSources:y,doctors:v,payers:b,tpas:w,creditPlans:j}=a||{};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:o.jsxs("div",{className:"w-full max-w-3xl mx-3 bg-white rounded-xl shadow-lg max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:p==="create"?"New Patient":"Edit Patient"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Fill basic details, address and credit / insurance."})]}),o.jsx("button",{type:"button",onClick:n,className:"text-gray-500 hover:text-gray-800 text-xl leading-none",children:""})]}),o.jsxs("form",{onSubmit:g,className:"flex-1 overflow-y-auto px-4 py-3 space-y-6",children:[u&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md px-3 py-2",children:u}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Basic Information"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["First Name",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm focus:outline-none focus:ring focus:ring-indigo-200",value:i.first_name,onChange:h("first_name"),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Last Name"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.last_name,onChange:h("last_name")})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Gender",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.gender,onChange:h("gender"),required:!0,children:[o.jsx("option",{value:"",children:"Select"}),o.jsx("option",{value:"male",children:"Male"}),o.jsx("option",{value:"female",children:"Female"}),o.jsx("option",{value:"other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date of Birth"}),o.jsx("input",{type:"date",className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.dob||"",onChange:h("dob")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Blood Group"}),o.jsx("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.blood_group,onChange:h("blood_group"),children:aRe.map(N=>o.jsx("option",{value:N,children:N||"Select"},N))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Marital Status"}),o.jsx("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.marital_status,onChange:h("marital_status"),children:iRe.map(N=>o.jsx("option",{value:N,children:N||"Select"},N))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Mobile"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.phone,onChange:h("phone")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.email,onChange:h("email")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Aadhaar Last 4"}),o.jsx("input",{maxLength:4,className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.aadhar_last4,onChange:h("aadhar_last4")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Patient Type"}),o.jsx("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.patient_type,onChange:h("patient_type"),children:oRe.map(N=>o.jsx("option",{value:N,children:N||"Select"},N))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tag"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.tag,onChange:h("tag")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Religion"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.religion,onChange:h("religion")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Occupation"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.occupation,onChange:h("occupation")})]})]})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Reference & Guardian"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reference Source"}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.ref_source,onChange:h("ref_source"),children:[o.jsx("option",{value:"",children:"Select"}),y==null?void 0:y.map(N=>o.jsx("option",{value:N.code,children:N.label},N.code))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Referring Doctor"}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.ref_doctor_id||"",onChange:h("ref_doctor_id"),children:[o.jsx("option",{value:"",children:"Select"}),v==null?void 0:v.map(N=>o.jsxs("option",{value:N.id,children:[N.name,N.department_name?` (${N.department_name})`:""]},N.id))]})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Reference Details"}),o.jsx("textarea",{rows:2,className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.ref_details,onChange:h("ref_details")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Guardian Name"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.guardian_name,onChange:h("guardian_name")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Guardian Phone"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.guardian_phone,onChange:h("guardian_phone")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Guardian Relation"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.guardian_relation,onChange:h("guardian_relation")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"ID Proof Type"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.id_proof_type,onChange:h("id_proof_type")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"ID Proof No"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.id_proof_no,onChange:h("id_proof_no")})]})]})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Address"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Address Line 1"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.line1,onChange:m("line1")})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Address Line 2"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.line2,onChange:m("line2")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"City"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.city,onChange:m("city")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"State"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.state,onChange:m("state")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Pincode"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.pincode,onChange:m("pincode")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Country"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.address.country,onChange:m("country")})]})]})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"File & Credit / Insurance"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"File Number"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.file_number,onChange:h("file_number")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"File Location"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.file_location,onChange:h("file_location")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Credit Type"}),o.jsx("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.credit_type,onChange:h("credit_type"),children:lRe.map(N=>o.jsx("option",{value:N,children:N||"Select"},N))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Payer"}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.credit_payer_id||"",onChange:h("credit_payer_id"),children:[o.jsx("option",{value:"",children:"Select"}),b==null?void 0:b.map(N=>o.jsx("option",{value:N.id,children:N.display_name||N.name},N.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"TPA"}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.credit_tpa_id||"",onChange:h("credit_tpa_id"),children:[o.jsx("option",{value:"",children:"Select"}),w==null?void 0:w.map(N=>o.jsx("option",{value:N.id,children:N.display_name||N.name},N.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Credit Plan"}),o.jsxs("select",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.credit_plan_id||"",onChange:h("credit_plan_id"),children:[o.jsx("option",{value:"",children:"Select"}),j==null?void 0:j.map(N=>o.jsx("option",{value:N.id,children:N.name},N.id))]})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Principal Member Name"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.principal_member_name,onChange:h("principal_member_name")})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Principal Member Address"}),o.jsx("textarea",{rows:2,className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.principal_member_address,onChange:h("principal_member_address")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Policy Number"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.policy_number,onChange:h("policy_number")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Policy Name"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.policy_name,onChange:h("policy_name")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Family ID"}),o.jsx("input",{className:"w-full border rounded-md px-2.5 py-2 text-sm",value:i.family_id,onChange:h("family_id")})]})]})]}),o.jsxs("div",{className:"pt-2 pb-1 flex justify-end gap-2 sticky bottom-0 bg-white",children:[o.jsx("button",{type:"button",onClick:n,className:"px-3 py-1.5 text-sm border rounded-md text-gray-700 hover:bg-gray-50",disabled:c,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-1.5 text-sm rounded-md bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",disabled:c,children:c?p==="create"?"Creating...":"Saving...":p==="create"?"Create Patient":"Save Changes"})]})]})]})})}function vt(t){return t||""}function fRe(t){return t?{doctor:"Doctor",google:"Google",social_media:"Social Media",ads:"Advertisements",other:"Other"}[t]||t:""}function pRe({open:t,onClose:n,patient:r,onUpdated:s}){const[a,i]=x.useState(null),[l,c]=x.useState([]),[d,u]=x.useState([]),[f,p]=x.useState(!1),[h,m]=x.useState(!1),[g,y]=x.useState(!1),[v,b]=x.useState(""),[w,j]=x.useState(null),[N,S]=x.useState("other"),[_,k]=x.useState(""),[C,P]=x.useState(""),[E,M]=x.useState(""),[T,A]=x.useState(""),[R,O]=x.useState("idle");x.useEffect(()=>{t&&r&&I(r.id)},[t,r==null?void 0:r.id]);const I=async Q=>{var ue,G;p(!0),b("");try{const[ne,z,te]=await Promise.all([qOe(Q),QOe(Q),ZOe(Q)]);i(ne.data),c(z.data||[]),u(te.data||[]),s&&s(ne.data)}catch(ne){const z=((G=(ue=ne==null?void 0:ne.response)==null?void 0:ue.data)==null?void 0:G.detail)||(ne==null?void 0:ne.message)||"Failed to load patient details";b(z)}finally{p(!1)}};if(!t||!r)return null;const L=a||r,D=L.addresses&&L.addresses[0]||null,$=L.age_text||"",F=async Q=>{var ue,G;if(Q.preventDefault(),!!w){m(!0),b("");try{const ne=await JOe(L.id,{type:N,file:w});c(z=>[ne.data,...z]),j(null),S("other")}catch(ne){const z=((G=(ue=ne==null?void 0:ne.response)==null?void 0:ue.data)==null?void 0:G.detail)||(ne==null?void 0:ne.message)||"Failed to upload document";b(z)}finally{m(!1)}}},K=async Q=>{var ue,G;if(Q.preventDefault(),!(!_||!C)){y(!0),b("");try{const ne=await eRe(L.id,{type:_,text:C});u(z=>[ne.data,...z]),k(""),P("")}catch(ne){const z=((G=(ue=ne==null?void 0:ne.response)==null?void 0:ue.data)==null?void 0:G.detail)||(ne==null?void 0:ne.message)||"Failed to save consent";b(z)}finally{y(!1)}}},J=async()=>{var Q,ue;try{await tRe(L.id)}catch(G){const ne=((ue=(Q=G==null?void 0:G.response)==null?void 0:Q.data)==null?void 0:ue.detail)||(G==null?void 0:G.message)||"Failed to open print view";b(ne)}},Y=async()=>{var Q,ue;if(!L.phone||!L.dob){b("Need mobile and DOB to generate ABHA (demo).");return}b("");try{const G=await rRe({name:`${L.first_name} ${L.last_name||""}`.trim(),dob:L.dob,mobile:L.phone});M(G.data.txnId),O("otp")}catch(G){const ne=((ue=(Q=G==null?void 0:G.response)==null?void 0:Q.data)==null?void 0:ue.detail)||(G==null?void 0:G.message)||"Failed to generate ABHA OTP";b(ne)}},ee=async()=>{var Q,ue;if(!(!E||!T)){b("");try{await sRe({txnId:E,otp:T,patientId:L.id}),O("idle"),A(""),M(""),await I(L.id)}catch(G){const ne=((ue=(Q=G==null?void 0:G.response)==null?void 0:Q.data)==null?void 0:ue.detail)||(G==null?void 0:G.message)||"ABHA OTP verification failed";b(ne)}}};return o.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[o.jsx("div",{className:"flex-1 bg-black/40",onClick:n,"aria-hidden":"true"}),o.jsxs("div",{className:"w-full max-w-md bg-white shadow-xl flex flex-col max-h-screen",children:[o.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-base font-semibold",children:[L.first_name," ",L.last_name||""]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["UHID: ",L.uhid,"  Age: ",$||""]})]}),o.jsx("button",{type:"button",onClick:n,className:"text-gray-500 hover:text-gray-800 text-xl leading-none",children:""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:[f&&o.jsx("div",{className:"text-xs text-gray-500",children:"Loading details"}),v&&o.jsx("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 rounded-md px-2 py-1.5",children:v}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",onClick:J,className:"px-3 py-1.5 text-xs rounded-md border text-gray-700 hover:bg-gray-50",children:"Print Info / PDF"}),!L.abha_number&&o.jsx("button",{type:"button",onClick:Y,className:"px-3 py-1.5 text-xs rounded-md bg-emerald-600 text-white hover:bg-emerald-700",children:"Generate ABHA (Demo)"}),L.abha_number&&o.jsxs("span",{className:"px-3 py-1.5 text-xs rounded-md bg-emerald-50 text-emerald-700 border border-emerald-100",children:["ABHA: ",L.abha_number]})]}),R==="otp"&&o.jsxs("div",{className:"border border-emerald-200 bg-emerald-50 rounded-md p-3 space-y-2",children:[o.jsx("p",{className:"text-xs text-emerald-800 font-medium",children:"Enter demo OTP (check debug_otp in response while developing)."}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{className:"flex-1 border rounded-md px-2 py-1 text-sm",placeholder:"Enter OTP",value:T,onChange:Q=>A(Q.target.value)}),o.jsx("button",{type:"button",onClick:ee,className:"px-3 py-1.5 text-xs rounded-md bg-emerald-600 text-white hover:bg-emerald-700",children:"Verify"})]})]}),o.jsxs("section",{className:"border rounded-lg p-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"Patient Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Gender: "}),o.jsx("span",{children:vt(L.gender)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"DOB: "}),o.jsx("span",{children:L.dob||""})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Age: "}),o.jsx("span",{children:$||""})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Blood Group:"," "]}),o.jsx("span",{children:vt(L.blood_group)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Marital Status:"," "]}),o.jsx("span",{children:vt(L.marital_status)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Mobile: "}),o.jsx("span",{children:vt(L.phone)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Email: "}),o.jsx("span",{children:vt(L.email)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Patient Type: "}),o.jsx("span",{children:vt(L.patient_type)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Tag: "}),o.jsx("span",{children:vt(L.tag)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Religion:"," "]}),o.jsx("span",{children:vt(L.religion)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Occupation:"," "]}),o.jsx("span",{children:vt(L.occupation)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["File No:"," "]}),o.jsx("span",{children:vt(L.file_number)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["File Location:"," "]}),o.jsx("span",{children:vt(L.file_location)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Guardian:"," "]}),o.jsx("span",{children:vt(L.guardian_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Guardian Phone:"," "]}),o.jsx("span",{children:vt(L.guardian_phone)})]})]})]}),o.jsxs("section",{className:"border rounded-lg p-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"Reference & Credit / Insurance"}),o.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Reference Source:"," "]}),o.jsx("span",{children:fRe(L.ref_source)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Referring Doctor:"," "]}),o.jsx("span",{children:vt(L.ref_doctor_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Credit Type:"," "]}),o.jsx("span",{children:vt(L.credit_type)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Payer:"," "]}),o.jsx("span",{children:vt(L.credit_payer_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["TPA:"," "]}),o.jsx("span",{children:vt(L.credit_tpa_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Credit Plan:"," "]}),o.jsx("span",{children:vt(L.credit_plan_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Policy Number:"," "]}),o.jsx("span",{children:vt(L.policy_number)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Policy Name:"," "]}),o.jsx("span",{children:vt(L.policy_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Principal Member:"," "]}),o.jsx("span",{children:vt(L.principal_member_name)})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Family ID:"," "]}),o.jsx("span",{children:vt(L.family_id)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsxs("span",{className:"font-medium text-gray-600",children:["Principal Member Address:"," "]}),o.jsx("span",{children:vt(L.principal_member_address)})]})]})]}),o.jsxs("section",{className:"border rounded-lg p-3",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"Address"}),o.jsx("p",{className:"text-xs text-gray-700",children:D?o.jsxs(o.Fragment,{children:[D.line1,o.jsx("br",{}),D.line2&&o.jsxs(o.Fragment,{children:[D.line2,o.jsx("br",{})]}),[D.city,D.state,D.pincode].filter(Boolean).join(", "),o.jsx("br",{}),D.country]}):""})]}),o.jsxs("section",{className:"border rounded-lg p-3 space-y-2",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Attachments"})}),o.jsxs("form",{onSubmit:F,className:"flex items-center gap-2 text-xs",children:[o.jsxs("select",{className:"border rounded-md px-1.5 py-1 text-xs",value:N,onChange:Q=>S(Q.target.value),children:[o.jsx("option",{value:"other",children:"Other"}),o.jsx("option",{value:"id_proof",children:"ID Proof"}),o.jsx("option",{value:"report",children:"Report"}),o.jsx("option",{value:"photo",children:"Photo"})]}),o.jsx("input",{type:"file",className:"flex-1 text-xs",onChange:Q=>j(Q.target.files[0]||null)}),o.jsx("button",{type:"submit",disabled:h||!w,className:"px-2 py-1 rounded-md bg-indigo-600 text-white disabled:opacity-60",children:h?"Uploading":"Upload"})]}),o.jsxs("ul",{className:"divide-y border rounded-md",children:[l.length===0&&o.jsx("li",{className:"text-xs text-gray-500 px-2 py-2",children:"No attachments yet."}),l.map(Q=>o.jsx("li",{className:"px-2 py-1.5 text-xs flex justify-between",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-700",children:Q.filename}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[Q.type||"other","  ",(Q.size/1024).toFixed(1)," KB"]})]})},Q.id))]})]}),o.jsxs("section",{className:"border rounded-lg p-3 space-y-2",children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Consents"}),o.jsxs("form",{onSubmit:K,className:"space-y-1.5 text-xs",children:[o.jsx("div",{className:"flex gap-2",children:o.jsx("input",{className:"flex-1 border rounded-md px-2 py-1 text-xs",placeholder:"Consent type (eg. General, Surgery)",value:_,onChange:Q=>k(Q.target.value)})}),o.jsx("textarea",{rows:2,className:"w-full border rounded-md px-2 py-1 text-xs",placeholder:"Consent text",value:C,onChange:Q=>P(Q.target.value)}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:g||!_||!C,className:"px-3 py-1 rounded-md bg-indigo-600 text-white disabled:opacity-60",children:g?"Saving":"Add Consent"})})]}),o.jsxs("ul",{className:"divide-y border rounded-md",children:[d.length===0&&o.jsx("li",{className:"text-xs text-gray-500 px-2 py-2",children:"No consents captured yet."}),d.map(Q=>o.jsxs("li",{className:"px-2 py-1.5 text-xs",children:[o.jsx("div",{className:"font-medium text-gray-700",children:Q.type}),o.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:new Date(Q.captured_at).toLocaleString()}),o.jsx("div",{className:"text-xs text-gray-800 whitespace-pre-line",children:Q.text})]},Q.id))]})]})]})]})]})}function hRe(){const[t,n]=x.useState([]),[r,s]=x.useState(!1),[a,i]=x.useState(""),[l,c]=x.useState(!1),[d,u]=x.useState(!1),[f,p]=x.useState(null),[h,m]=x.useState(null),[g,y]=x.useState({refSources:[],doctors:[],payers:[],tpas:[],creditPlans:[]}),[v,b]=x.useState("");x.useEffect(()=>{w(),j()},[]);const w=async(E=a)=>{var M,T;s(!0),b("");try{const A=await KOe(E);n(A.data||[])}catch(A){const R=((T=(M=A==null?void 0:A.response)==null?void 0:M.data)==null?void 0:T.detail)||(A==null?void 0:A.message)||"Failed to load patients";b(R)}finally{s(!1)}},j=async()=>{try{const M=(await nRe()).data||{};y({refSources:M.reference_sources||[],doctors:M.doctors||[],payers:M.payers||[],tpas:M.tpas||[],creditPlans:M.credit_plans||[]})}catch{}},N=E=>{E.preventDefault(),w(a)},S=()=>{m(null),c(!0)},_=E=>{m(E),c(!0)},k=E=>{p(E),u(!0)},C=async E=>{var M,T;if(window.confirm(`Deactivate patient ${E.first_name}?`))try{await XOe(E.id),await w()}catch(A){const R=((T=(M=A==null?void 0:A.response)==null?void 0:M.data)==null?void 0:T.detail)||(A==null?void 0:A.message)||"Failed to deactivate patient";alert(R)}},P=E=>{n(M=>{const T=M.findIndex(R=>R.id===E.id);if(T===-1)return M;const A=[...M];return A[T]=E,A})};return o.jsxs("div",{className:"px-3 py-3 sm:px-5 sm:py-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Patient Management"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Register patients, manage profiles, attachments, consents and ABHA."})]}),o.jsx("button",{type:"button",onClick:S,className:"self-start px-3 py-1.5 text-sm rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"+ New Patient"})]}),o.jsxs("form",{onSubmit:N,className:"flex flex-col sm:flex-row gap-2 mb-3",children:[o.jsx("input",{className:"flex-1 border rounded-md px-3 py-1.5 text-sm focus:outline-none focus:ring focus:ring-indigo-200",placeholder:"Search by UHID, name, mobile, email...",value:a,onChange:E=>i(E.target.value)}),o.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm rounded-md border bg-white text-gray-700 hover:bg-gray-50",children:"Search"})]}),v&&o.jsx("div",{className:"mb-2 text-xs text-red-600 bg-red-50 border border-red-200 rounded-md px-3 py-2",children:v}),o.jsx("div",{className:"hidden md:block border rounded-lg overflow-hidden bg-white",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"UHID / Name"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Demographics"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Contact"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Tags"}),o.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-600",children:"Actions"})]})}),o.jsxs("tbody",{children:[r&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-3 py-3 text-center text-xs text-gray-500",children:"Loading patients"})}),!r&&t.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-3 py-3 text-center text-xs text-gray-500",children:"No patients found."})}),t.map(E=>o.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[o.jsxs("td",{className:"px-3 py-2 align-top",children:[o.jsxs("div",{className:"font-medium text-gray-800",children:[E.first_name," ",E.last_name||""]}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:["UHID: ",E.uhid]}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:["Age: ",E.age_text||""]})]}),o.jsxs("td",{className:"px-3 py-2 align-top text-xs text-gray-700",children:[o.jsxs("div",{children:["Gender: ",E.gender]}),o.jsxs("div",{children:["Blood: ",E.blood_group||""]}),o.jsxs("div",{children:["Marital: ",E.marital_status||""]})]}),o.jsxs("td",{className:"px-3 py-2 align-top text-xs text-gray-700",children:[o.jsxs("div",{children:["Mobile: ",E.phone||""]}),o.jsxs("div",{children:["Email: ",E.email||""]})]}),o.jsxs("td",{className:"px-3 py-2 align-top text-xs text-gray-700",children:[o.jsxs("div",{children:["Type: ",E.patient_type||""]}),o.jsxs("div",{children:["Tag: ",E.tag||""]})]}),o.jsx("td",{className:"px-3 py-2 align-top text-right text-xs",children:o.jsxs("div",{className:"flex justify-end gap-1",children:[o.jsx("button",{type:"button",onClick:()=>k(E),className:"px-2 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:"View"}),o.jsx("button",{type:"button",onClick:()=>_(E),className:"px-2 py-1 rounded-md border text-gray-700 hover:bg-gray-50",children:"Edit"}),o.jsx("button",{type:"button",onClick:()=>C(E),className:"px-2 py-1 rounded-md border border-red-300 text-red-600 hover:bg-red-50",children:"Deactivate"})]})})]},E.id))]})]})}),o.jsxs("div",{className:"md:hidden space-y-2 mt-2",children:[r&&o.jsx("div",{className:"text-xs text-gray-500",children:"Loading patients"}),!r&&t.length===0&&o.jsx("div",{className:"text-xs text-gray-500",children:"No patients found."}),t.map(E=>o.jsxs("div",{className:"bg-white border rounded-lg px-3 py-2 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[E.first_name," ",E.last_name||""]}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:["UHID: ",E.uhid,"  Age: ",E.age_text||""]}),o.jsxs("div",{className:"text-[11px] text-gray-500",children:[E.gender,"  Blood: ",E.blood_group||""]}),o.jsx("div",{className:"text-[11px] text-gray-500",children:E.phone||"No mobile"})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("button",{type:"button",onClick:()=>k(E),className:"px-2 py-1 text-[11px] rounded-md border text-gray-700",children:"View"}),o.jsx("button",{type:"button",onClick:()=>_(E),className:"px-2 py-1 text-[11px] rounded-md border text-gray-700",children:"Edit"}),o.jsx("button",{type:"button",onClick:()=>C(E),className:"px-2 py-1 text-[11px] rounded-md border border-red-300 text-red-600",children:"Deactivate"})]})]}),o.jsxs("div",{className:"mt-1.5 flex flex-wrap gap-1 text-[10px] text-gray-600",children:[E.patient_type&&o.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-indigo-50 text-indigo-700 border border-indigo-100",children:E.patient_type}),E.tag&&o.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100",children:E.tag})]})]},E.id))]}),o.jsx(uRe,{open:l,onClose:()=>c(!1),onSaved:()=>w(),initialPatient:h,lookups:g}),o.jsx(pRe,{open:d,onClose:()=>u(!1),patient:f,onUpdated:P})]})}const mRe=[{value:"insurance",label:"Insurance"},{value:"corporate",label:"Corporate"},{value:"govt",label:"Govt Scheme"},{value:"other",label:"Other"}];function xRe(){const[t,n]=x.useState("payers");return ha("patients.masters.view")?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(JN,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Patient Masters"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Configure payers, TPAs and credit plans used in patient registration & billing."})]})]})}),o.jsxs("div",{className:"flex flex-wrap gap-2 border-b",children:[o.jsx(qb,{label:"Payers",active:t==="payers",onClick:()=>n("payers")}),o.jsx(qb,{label:"TPAs",active:t==="tpas",onClick:()=>n("tpas")}),o.jsx(qb,{label:"Credit Plans",active:t==="plans",onClick:()=>n("plans")})]}),o.jsxs("div",{children:[t==="payers"&&o.jsx(gRe,{}),t==="tpas"&&o.jsx(vRe,{}),t==="plans"&&o.jsx(wRe,{})]})]}):o.jsx("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-4 text-sm text-yellow-800",children:"You do not have permission to view patient masters."})}function qb({label:t,active:n,onClick:r}){return o.jsx("button",{onClick:r,className:`px-3 py-2 text-sm transition ${n?"border-b-2 border-blue-600 font-medium text-blue-700":"text-gray-600 hover:text-gray-800"}`,children:t})}function gRe(){const t=ha("patients.masters.view"),n=ha("patients.masters.manage"),[r,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState(""),[d,u]=x.useState(""),[f,p]=x.useState(!1),[h,m]=x.useState(null),g=x.useCallback(async()=>{var N,S;if(t){i(!0),c("");try{const{data:_}=await B.get("/patient-masters/payers");s(_||[])}catch(_){c(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load payers")}finally{i(!1)}}},[t]);x.useEffect(()=>{g()},[g]);const y=x.useMemo(()=>{if(!d)return r;const N=d.toLowerCase();return r.filter(S=>{var _,k,C;return((_=S.name)==null?void 0:_.toLowerCase().includes(N))||((k=S.code)==null?void 0:k.toLowerCase().includes(N))||((C=S.payer_type)==null?void 0:C.toLowerCase().includes(N))})},[r,d]),v=()=>{m(null),p(!0)},b=N=>{n&&(m(N),p(!0))},w=()=>{p(!1),m(null),g()},j=()=>{g()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(No,{className:"h-4 w-4"}),o.jsx("span",{children:"Payers (Insurance / Corporate / Govt schemes)"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{value:d,onChange:N=>u(N.target.value),placeholder:"Search code, name, type",className:"w-52 max-w-full rounded-xl border px-8 py-1.5 text-sm"}),o.jsx(En,{className:"pointer-events-none absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"})]}),n&&o.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 active:scale-95",children:[o.jsx(mn,{className:"h-4 w-4"}),"New Payer"]})]})]}),l&&o.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l}),o.jsxs("div",{className:"grid gap-3 sm:hidden",children:[a&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"Loading"}),!a&&y.map(N=>o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm transition hover:shadow-md",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-semibold",children:[N.name," ",N.code&&o.jsx("span",{className:"ml-1 rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-mono text-gray-600",children:N.code})]}),o.jsx("div",{className:"mt-1 text-xs text-gray-500 capitalize",children:N.payer_type||""})]}),n&&o.jsxs("button",{onClick:()=>b(N),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-xs hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})]}),o.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-600",children:[N.contact_person&&o.jsxs("div",{children:["Contact: ",N.contact_person]}),N.phone&&o.jsxs("div",{children:["Phone: ",N.phone]}),N.email&&o.jsxs("div",{children:["Email: ",N.email]}),N.address&&o.jsxs("div",{className:"line-clamp-2",children:["Address: ",N.address]})]})]},N.id)),!a&&y.length===0&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"No payers found."})]}),o.jsx("div",{className:"hidden overflow-x-auto rounded-2xl border bg-white sm:block",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{className:"text-left text-xs font-medium text-gray-600",children:[o.jsx("th",{className:"p-2",children:"#"}),o.jsx("th",{className:"p-2",children:"Code"}),o.jsx("th",{className:"p-2",children:"Name"}),o.jsx("th",{className:"p-2",children:"Type"}),o.jsx("th",{className:"p-2",children:"Contact"}),o.jsx("th",{className:"p-2",children:"Phone / Email"}),o.jsx("th",{className:"p-2",children:"Address"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[a&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-sm text-gray-500",children:"Loading"})}),!a&&y.map((N,S)=>o.jsxs("tr",{className:"border-t text-xs",children:[o.jsx("td",{className:"p-2",children:S+1}),o.jsx("td",{className:"p-2 font-mono text-[11px]",children:N.code}),o.jsx("td",{className:"p-2",children:N.name}),o.jsx("td",{className:"p-2 capitalize",children:N.payer_type||""}),o.jsx("td",{className:"p-2",children:N.contact_person||""}),o.jsxs("td",{className:"p-2",children:[o.jsx("div",{children:N.phone||""}),o.jsx("div",{className:"text-[11px] text-gray-500",children:N.email||""})]}),o.jsx("td",{className:"p-2 max-w-xs",children:o.jsx("div",{className:"line-clamp-2 text-[11px] text-gray-600",children:N.address||""})}),o.jsx("td",{className:"p-2 text-right",children:n&&o.jsxs("button",{onClick:()=>b(N),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-[11px] hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})})]},N.id)),!a&&y.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"No payers found."})})]})]})}),f&&o.jsx(yRe,{onClose:()=>{p(!1),m(null)},existing:h,onSaved:w,onDeleted:j})]})}function yRe({existing:t,onClose:n,onSaved:r,onDeleted:s}){const a=ha("patients.masters.manage"),[i,l]=x.useState(()=>({code:(t==null?void 0:t.code)||"",name:(t==null?void 0:t.name)||"",payer_type:(t==null?void 0:t.payer_type)||"insurance",contact_person:(t==null?void 0:t.contact_person)||"",phone:(t==null?void 0:t.phone)||"",email:(t==null?void 0:t.email)||"",address:(t==null?void 0:t.address)||""})),[c,d]=x.useState(!1),[u,f]=x.useState(""),p=async m=>{var g,y;if(m.preventDefault(),!!a){d(!0),f("");try{t?await B.put(`/patient-masters/payers/${t.id}`,i):await B.post("/patient-masters/payers",i),r&&r()}catch(v){f(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to save payer")}finally{d(!1)}}},h=async()=>{var m,g;if(!(!t||!a)&&window.confirm("Deactivate this payer?")){d(!0),f("");try{await B.delete(`/patient-masters/payers/${t.id}`),s&&s(),n&&n()}catch(y){f(((g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.detail)||"Failed to deactivate payer")}finally{d(!1)}}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:o.jsxs("div",{className:"max-h-[90vh] w-full max-w-xl overflow-y-auto rounded-2xl bg-white p-5 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit Payer":"New Payer"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Master record used for credit / insurance patients."})]}),o.jsx("button",{onClick:n,className:"rounded-xl p-2 hover:bg-gray-100",children:o.jsx(Is,{className:"h-5 w-5"})})]}),u&&o.jsx("div",{className:"mb-3 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:u}),o.jsxs("form",{onSubmit:p,className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Code"}),o.jsx("input",{className:"input",value:i.code,onChange:m=>l({...i,code:m.target.value.toUpperCase()}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Name"}),o.jsx("input",{className:"input",value:i.name,onChange:m=>l({...i,name:m.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Type"}),o.jsx("select",{className:"input",value:i.payer_type,onChange:m=>l({...i,payer_type:m.target.value}),children:mRe.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Contact Person"}),o.jsx("input",{className:"input",value:i.contact_person,onChange:m=>l({...i,contact_person:m.target.value})})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Phone"}),o.jsx("input",{className:"input",value:i.phone,onChange:m=>l({...i,phone:m.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Email"}),o.jsx("input",{className:"input",type:"email",value:i.email,onChange:m=>l({...i,email:m.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Address"}),o.jsx("textarea",{className:"input min-h-[80px]",value:i.address,onChange:m=>l({...i,address:m.target.value})})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[t&&o.jsxs("button",{type:"button",onClick:h,className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-700 hover:bg-rose-50",children:[o.jsx(Na,{className:"h-3.5 w-3.5"}),"Deactivate"]}),o.jsxs("div",{className:"ml-auto flex gap-2",children:[o.jsx("button",{type:"button",onClick:n,className:"rounded-xl border px-4 py-1.5 text-xs hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{className:"btn",disabled:c||!a,children:c?"Saving":"Save"})]})]})]})]})})}function vRe(){const t=ha("patients.masters.view"),n=ha("patients.masters.manage"),[r,s]=x.useState([]),[a,i]=x.useState([]),[l,c]=x.useState(!1),[d,u]=x.useState(""),[f,p]=x.useState(""),[h,m]=x.useState(!1),[g,y]=x.useState(null),v=x.useCallback(async()=>{var k,C;if(t){c(!0),u("");try{const[P,E]=await Promise.all([B.get("/patient-masters/tpas"),B.get("/patient-masters/payers")]);s(P.data||[]),i(E.data||[])}catch(P){u(((C=(k=P==null?void 0:P.response)==null?void 0:k.data)==null?void 0:C.detail)||"Failed to load TPAs")}finally{c(!1)}}},[t]);x.useEffect(()=>{v()},[v]);const b=x.useMemo(()=>{const k={};for(const C of a)k[C.id]=C;return k},[a]),w=x.useMemo(()=>{if(!f)return r;const k=f.toLowerCase();return r.filter(C=>{var P,E,M,T;return((P=C.name)==null?void 0:P.toLowerCase().includes(k))||((E=C.code)==null?void 0:E.toLowerCase().includes(k))||((T=(M=b[C.payer_id])==null?void 0:M.name)==null?void 0:T.toLowerCase().includes(k))})},[r,f,b]),j=()=>{y(null),m(!0)},N=k=>{n&&(y(k),m(!0))},S=()=>{m(!1),y(null),v()},_=()=>{v()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(No,{className:"h-4 w-4"}),o.jsx("span",{children:"Third-party administrators (TPAs) linked to payers."})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{value:f,onChange:k=>p(k.target.value),placeholder:"Search code, name, payer",className:"w-52 max-w-full rounded-xl border px-8 py-1.5 text-sm"}),o.jsx(En,{className:"pointer-events-none absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"})]}),n&&o.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 active:scale-95",children:[o.jsx(mn,{className:"h-4 w-4"}),"New TPA"]})]})]}),d&&o.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:d}),o.jsxs("div",{className:"grid gap-3 sm:hidden",children:[l&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"Loading"}),!l&&w.map(k=>{var C;return o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm transition hover:shadow-md",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-semibold",children:[k.name," ",k.code&&o.jsx("span",{className:"ml-1 rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-mono text-gray-600",children:k.code})]}),o.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Payer: ",((C=b[k.payer_id])==null?void 0:C.name)||""]})]}),n&&o.jsxs("button",{onClick:()=>N(k),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-xs hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})]}),o.jsxs("div",{className:"mt-2 space-y-1 text-xs text-gray-600",children:[k.contact_person&&o.jsxs("div",{children:["Contact: ",k.contact_person]}),k.phone&&o.jsxs("div",{children:["Phone: ",k.phone]}),k.email&&o.jsxs("div",{children:["Email: ",k.email]})]})]},k.id)}),!l&&w.length===0&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"No TPAs found."})]}),o.jsx("div",{className:"hidden overflow-x-auto rounded-2xl border bg-white sm:block",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{className:"text-left text-xs font-medium text-gray-600",children:[o.jsx("th",{className:"p-2",children:"#"}),o.jsx("th",{className:"p-2",children:"Code"}),o.jsx("th",{className:"p-2",children:"Name"}),o.jsx("th",{className:"p-2",children:"Payer"}),o.jsx("th",{className:"p-2",children:"Contact"}),o.jsx("th",{className:"p-2",children:"Phone / Email"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[l&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-sm text-gray-500",children:"Loading"})}),!l&&w.map((k,C)=>{var P;return o.jsxs("tr",{className:"border-t text-xs",children:[o.jsx("td",{className:"p-2",children:C+1}),o.jsx("td",{className:"p-2 font-mono text-[11px]",children:k.code}),o.jsx("td",{className:"p-2",children:k.name}),o.jsx("td",{className:"p-2",children:((P=b[k.payer_id])==null?void 0:P.name)||""}),o.jsx("td",{className:"p-2",children:k.contact_person||""}),o.jsxs("td",{className:"p-2",children:[o.jsx("div",{children:k.phone||""}),o.jsx("div",{className:"text-[11px] text-gray-500",children:k.email||""})]}),o.jsx("td",{className:"p-2 text-right",children:n&&o.jsxs("button",{onClick:()=>N(k),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-[11px] hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})})]},k.id)}),!l&&w.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-6 text-center text-sm text-gray-500",children:"No TPAs found."})})]})]})}),h&&o.jsx(bRe,{existing:g,onClose:()=>{m(!1),y(null)},payers:a,onSaved:S,onDeleted:_})]})}function bRe({existing:t,payers:n,onClose:r,onSaved:s,onDeleted:a}){const i=ha("patients.masters.manage"),[l,c]=x.useState(()=>({code:(t==null?void 0:t.code)||"",name:(t==null?void 0:t.name)||"",payer_id:(t==null?void 0:t.payer_id)||"",contact_person:(t==null?void 0:t.contact_person)||"",phone:(t==null?void 0:t.phone)||"",email:(t==null?void 0:t.email)||""})),[d,u]=x.useState(!1),[f,p]=x.useState(""),h=async g=>{var y,v;if(g.preventDefault(),!!i){u(!0),p("");try{const b={...l,payer_id:l.payer_id?Number(l.payer_id):null};t?await B.put(`/patient-masters/tpas/${t.id}`,b):await B.post("/patient-masters/tpas",b),s&&s()}catch(b){p(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to save TPA")}finally{u(!1)}}},m=async()=>{var g,y;if(!(!t||!i)&&window.confirm("Deactivate this TPA?")){u(!0),p("");try{await B.delete(`/patient-masters/tpas/${t.id}`),a&&a(),r&&r()}catch(v){p(((y=(g=v==null?void 0:v.response)==null?void 0:g.data)==null?void 0:y.detail)||"Failed to deactivate TPA")}finally{u(!1)}}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:o.jsxs("div",{className:"max-h-[90vh] w-full max-w-xl overflow-y-auto rounded-2xl bg-white p-5 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit TPA":"New TPA"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Third-party administrator master, mapped to payer."})]}),o.jsx("button",{onClick:r,className:"rounded-xl p-2 hover:bg-gray-100",children:o.jsx(Is,{className:"h-5 w-5"})})]}),f&&o.jsx("div",{className:"mb-3 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:f}),o.jsxs("form",{onSubmit:h,className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Code"}),o.jsx("input",{className:"input",value:l.code,onChange:g=>c({...l,code:g.target.value.toUpperCase()}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Name"}),o.jsx("input",{className:"input",value:l.name,onChange:g=>c({...l,name:g.target.value}),required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Payer"}),o.jsxs("select",{className:"input",value:l.payer_id||"",onChange:g=>c({...l,payer_id:g.target.value||""}),required:!0,children:[o.jsx("option",{value:"",children:"Select payer"}),n.map(g=>o.jsx("option",{value:g.id,children:g.name},g.id))]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Contact Person"}),o.jsx("input",{className:"input",value:l.contact_person,onChange:g=>c({...l,contact_person:g.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Phone"}),o.jsx("input",{className:"input",value:l.phone,onChange:g=>c({...l,phone:g.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Email"}),o.jsx("input",{className:"input",type:"email",value:l.email,onChange:g=>c({...l,email:g.target.value})})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[t&&o.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-700 hover:bg-rose-50",children:[o.jsx(Na,{className:"h-3.5 w-3.5"}),"Deactivate"]}),o.jsxs("div",{className:"ml-auto flex gap-2",children:[o.jsx("button",{type:"button",onClick:r,className:"rounded-xl border px-4 py-1.5 text-xs hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{className:"btn",disabled:d||!i,children:d?"Saving":"Save"})]})]})]})]})})}function wRe(){const t=ha("patients.masters.view"),n=ha("patients.masters.manage"),[r,s]=x.useState([]),[a,i]=x.useState([]),[l,c]=x.useState([]),[d,u]=x.useState(!1),[f,p]=x.useState(""),[h,m]=x.useState(""),[g,y]=x.useState(!1),[v,b]=x.useState(null),w=x.useCallback(async()=>{var E,M;if(t){u(!0),p("");try{const[T,A,R]=await Promise.all([B.get("/patient-masters/credit-plans"),B.get("/patient-masters/payers"),B.get("/patient-masters/tpas")]);s(T.data||[]),i(A.data||[]),c(R.data||[])}catch(T){p(((M=(E=T==null?void 0:T.response)==null?void 0:E.data)==null?void 0:M.detail)||"Failed to load credit plans")}finally{u(!1)}}},[t]);x.useEffect(()=>{w()},[w]);const j=x.useMemo(()=>{const E={};for(const M of a)E[M.id]=M;return E},[a]),N=x.useMemo(()=>{const E={};for(const M of l)E[M.id]=M;return E},[l]),S=x.useMemo(()=>{if(!h)return r;const E=h.toLowerCase();return r.filter(M=>{var T,A,R,O,I,L;return((T=M.name)==null?void 0:T.toLowerCase().includes(E))||((A=M.code)==null?void 0:A.toLowerCase().includes(E))||((O=(R=j[M.payer_id])==null?void 0:R.name)==null?void 0:O.toLowerCase().includes(E))||((L=(I=N[M.tpa_id])==null?void 0:I.name)==null?void 0:L.toLowerCase().includes(E))})},[r,h,j,N]),_=()=>{b(null),y(!0)},k=E=>{n&&(b(E),y(!0))},C=()=>{y(!1),b(null),w()},P=()=>{w()};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(HX,{className:"h-4 w-4"}),o.jsx("span",{children:"Credit / insurance plans used for IPD/OPD billing & authorization."})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{value:h,onChange:E=>m(E.target.value),placeholder:"Search code, name, payer, TPA",className:"w-60 max-w-full rounded-xl border px-8 py-1.5 text-sm"}),o.jsx(En,{className:"pointer-events-none absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"})]}),n&&o.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 active:scale-95",children:[o.jsx(mn,{className:"h-4 w-4"}),"New Plan"]})]})]}),f&&o.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:f}),o.jsxs("div",{className:"grid gap-3 sm:hidden",children:[d&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"Loading"}),!d&&S.map(E=>{var M,T;return o.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm transition hover:shadow-md",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-semibold",children:[E.name," ",E.code&&o.jsx("span",{className:"ml-1 rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-mono text-gray-600",children:E.code})]}),o.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Payer: ",((M=j[E.payer_id])==null?void 0:M.name)||""]}),o.jsxs("div",{className:"mt-0.5 text-xs text-gray-500",children:["TPA: ",((T=N[E.tpa_id])==null?void 0:T.name)||""]})]}),n&&o.jsxs("button",{onClick:()=>k(E),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-xs hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})]}),E.description&&o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:E.description})]},E.id)}),!d&&S.length===0&&o.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-sm text-gray-500",children:"No credit plans found."})]}),o.jsx("div",{className:"hidden overflow-x-auto rounded-2xl border bg-white sm:block",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{className:"text-left text-xs font-medium text-gray-600",children:[o.jsx("th",{className:"p-2",children:"#"}),o.jsx("th",{className:"p-2",children:"Code"}),o.jsx("th",{className:"p-2",children:"Name"}),o.jsx("th",{className:"p-2",children:"Payer"}),o.jsx("th",{className:"p-2",children:"TPA"}),o.jsx("th",{className:"p-2",children:"Description"}),o.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),o.jsxs("tbody",{children:[d&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-sm text-gray-500",children:"Loading"})}),!d&&S.map((E,M)=>{var T,A;return o.jsxs("tr",{className:"border-t text-xs",children:[o.jsx("td",{className:"p-2",children:M+1}),o.jsx("td",{className:"p-2 font-mono text-[11px]",children:E.code}),o.jsx("td",{className:"p-2",children:E.name}),o.jsx("td",{className:"p-2",children:((T=j[E.payer_id])==null?void 0:T.name)||""}),o.jsx("td",{className:"p-2",children:((A=N[E.tpa_id])==null?void 0:A.name)||""}),o.jsx("td",{className:"p-2 max-w-xs",children:o.jsx("div",{className:"line-clamp-2 text-[11px] text-gray-600",children:E.description||""})}),o.jsx("td",{className:"p-2 text-right",children:n&&o.jsxs("button",{onClick:()=>k(E),className:"inline-flex items-center gap-1 rounded-xl border px-2 py-1 text-[11px] hover:bg-gray-50",children:[o.jsx(Rs,{className:"h-3.5 w-3.5"}),"Edit"]})})]},E.id)}),!d&&S.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-6 text-center text-sm text-gray-500",children:"No credit plans found."})})]})]})}),g&&o.jsx(jRe,{existing:v,payers:a,tpas:l,onClose:()=>{y(!1),b(null)},onSaved:C,onDeleted:P})]})}function jRe({existing:t,payers:n,tpas:r,onClose:s,onSaved:a,onDeleted:i}){const l=ha("patients.masters.manage"),[c,d]=x.useState(()=>({code:(t==null?void 0:t.code)||"",name:(t==null?void 0:t.name)||"",payer_id:(t==null?void 0:t.payer_id)||"",tpa_id:(t==null?void 0:t.tpa_id)||"",description:(t==null?void 0:t.description)||""})),[u,f]=x.useState(!1),[p,h]=x.useState(""),m=async y=>{var v,b;if(y.preventDefault(),!!l){f(!0),h("");try{const w={...c,payer_id:c.payer_id?Number(c.payer_id):null,tpa_id:c.tpa_id?Number(c.tpa_id):null};t?await B.put(`/patient-masters/credit-plans/${t.id}`,w):await B.post("/patient-masters/credit-plans",w),a&&a()}catch(w){h(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to save credit plan")}finally{f(!1)}}},g=async()=>{var y,v;if(!(!t||!l)&&window.confirm("Deactivate this credit plan?")){f(!0),h("");try{await B.delete(`/patient-masters/credit-plans/${t.id}`),i&&i(),s&&s()}catch(b){h(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to deactivate credit plan")}finally{f(!1)}}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:o.jsxs("div",{className:"max-h-[90vh] w-full max-w-xl overflow-y-auto rounded-2xl bg-white p-5 shadow-xl",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:t?"Edit Credit Plan":"New Credit Plan"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Map plan to payer & optional TPA for billing workflows."})]}),o.jsx("button",{onClick:s,className:"rounded-xl p-2 hover:bg-gray-100",children:o.jsx(Is,{className:"h-5 w-5"})})]}),p&&o.jsx("div",{className:"mb-3 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:p}),o.jsxs("form",{onSubmit:m,className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Code"}),o.jsx("input",{className:"input",value:c.code,onChange:y=>d({...c,code:y.target.value.toUpperCase()}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Name"}),o.jsx("input",{className:"input",value:c.name,onChange:y=>d({...c,name:y.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Payer"}),o.jsxs("select",{className:"input",value:c.payer_id||"",onChange:y=>d({...c,payer_id:y.target.value||""}),required:!0,children:[o.jsx("option",{value:"",children:"Select payer"}),n.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"TPA (optional)"}),o.jsxs("select",{className:"input",value:c.tpa_id||"",onChange:y=>d({...c,tpa_id:y.target.value||""}),children:[o.jsx("option",{value:"",children:"No TPA"}),r.map(y=>o.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"mb-1 block text-xs font-medium",children:"Description / Notes"}),o.jsx("textarea",{className:"input min-h-[80px]",value:c.description,onChange:y=>d({...c,description:y.target.value})})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[t&&o.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-700 hover:bg-rose-50",children:[o.jsx(Na,{className:"h-3.5 w-3.5"}),"Deactivate"]}),o.jsxs("div",{className:"ml-auto flex gap-2",children:[o.jsx("button",{type:"button",onClick:s,className:"rounded-xl border px-4 py-1.5 text-xs hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{className:"btn",disabled:u||!l,children:u?"Saving":"Save"})]})]})]})]})})}const a5=[{key:"all",label:"All"},{key:"op_billing",label:"OP Billing"},{key:"ip_billing",label:"IP Billing"},{key:"lab",label:"Lab"},{key:"pharmacy",label:"Pharmacy"},{key:"radiology",label:"Radiology"},{key:"general",label:"General"}],NRe={draft:"bg-yellow-100 text-yellow-800",finalized:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},Cu=10;function Gb(t){return Number(t||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}function SRe(){var R;const[t,n]=x.useState("all"),[r,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState({doctors:[],credit_providers:[],packages:[],payers:[],tpas:[],credit_plans:[]}),[d,u]=x.useState(!1),[f,p]=x.useState(""),[h,m]=x.useState(1),[g,y]=x.useState({patient_id:null,billing_type:"op_billing",context_type:"opd",context_id:"",remarks:""}),v=jr();x.useEffect(()=>{b()},[]),x.useEffect(()=>{w()},[t]);async function b(){try{const{data:O}=await oB();c({doctors:(O==null?void 0:O.doctors)||[],credit_providers:(O==null?void 0:O.credit_providers)||[],packages:(O==null?void 0:O.packages)||[],payers:(O==null?void 0:O.payers)||[],tpas:(O==null?void 0:O.tpas)||[],credit_plans:(O==null?void 0:O.credit_plans)||[]})}catch(O){console.error("Failed to load billing masters",O)}}async function w(){i(!0),p("");try{const O={};t!=="all"&&(O.billing_type=t);const{data:I}=await Tue(O);s(I||[]),m(1)}catch(O){console.error("Failed to load invoices",O),p("Unable to load invoices. Please try again.")}finally{i(!1)}}function j(O){v(`/billing/invoices/${O}`)}function N(O){n(O)}function S(O){const{name:I,value:L}=O.target;y(D=>({...D,[I]:L}))}function _(O){y(typeof O=="number"?I=>({...I,patient_id:O}):O&&typeof O=="object"?I=>({...I,patient_id:O.id}):I=>({...I,patient_id:null}))}async function k(O){if(O.preventDefault(),p(""),!g.patient_id){p("Please select a patient to create an invoice.");return}try{const I={patient_id:Number(g.patient_id),billing_type:g.billing_type||null,context_type:g.context_type||null,context_id:g.context_id?Number(g.context_id):null,remarks:g.remarks||null},{data:L}=await Aue(I);u(!1),y({patient_id:null,billing_type:"op_billing",context_type:"opd",context_id:"",remarks:""}),v(`/billing/invoices/${L.id}`)}catch(I){console.error("Create invoice failed",I),p("Unable to create invoice. Please check details and try again.")}}const C=x.useMemo(()=>Math.max(1,Math.ceil(r.length/Cu)),[r.length]),P=x.useMemo(()=>{const O=(h-1)*Cu;return r.slice(O,O+Cu)},[r,h]);function E(){m(O=>Math.max(1,O-1))}function M(){m(O=>Math.min(C,O+1))}const T=r.length===0?0:(h-1)*Cu+1,A=r.length===0?0:Math.min(h*Cu,r.length);return o.jsxs("div",{className:"min-h-[calc(100vh-4rem)] bg-gradient-to-b from-slate-50 via-slate-100 to-slate-50 py-4 px-3 md:px-6",children:[o.jsxs("div",{className:"max-w-6xl mx-auto space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-slate-900",children:"Billing Console"}),o.jsx("p",{className:"text-xs md:text-sm text-slate-500",children:"One place to manage OP / IP / Lab / Pharmacy billing, refunds and credit tracking."})]}),o.jsx("button",{type:"button",onClick:()=>u(!0),className:"inline-flex items-center justify-center rounded-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 px-4 py-2 text-xs md:text-sm font-medium text-white shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"+ New Invoice"})]}),o.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-50 via-sky-50 to-purple-50 p-2 shadow-sm border border-slate-100",children:o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:a5.map(O=>{const I=t===O.key;return o.jsx("button",{type:"button",onClick:()=>N(O.key),className:`whitespace-nowrap rounded-full px-3.5 py-1.5 text-xs md:text-[13px] font-medium transition-all ${I?"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 text-white shadow-md":"bg-white/70 text-slate-700 hover:bg-white hover:text-slate-900 border border-slate-200"}`,children:O.label},O.key)})})}),o.jsxs("div",{className:"rounded-2xl bg-white shadow-sm border border-slate-200 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 md:px-4 py-2 border-b border-slate-100",children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("span",{className:"text-xs font-semibold text-slate-800",children:"Invoices"}),o.jsx("span",{className:"text-[11px] text-slate-400",children:t==="all"?"All billing types":`Filtered by ${((R=a5.find(O=>O.key===t))==null?void 0:R.label)||""}`})]}),o.jsx("button",{type:"button",onClick:w,className:"text-[11px] text-indigo-600 hover:text-indigo-800",children:"Refresh"})]}),f&&o.jsx("div",{className:"px-3 md:px-4 py-2 bg-red-50 text-[11px] text-red-700",children:f}),a?o.jsx("div",{className:"px-3 md:px-4 py-8 text-center text-xs text-slate-500",children:"Loading invoices..."}):r.length===0?o.jsx("div",{className:"px-3 md:px-4 py-8 text-center text-xs text-slate-500",children:"No invoices found for this filter."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto text-xs",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[o.jsx("thead",{className:"bg-slate-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 md:px-4 py-2 text-left font-medium text-slate-500",children:"Inv #"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-left font-medium text-slate-500",children:"Billing Type"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-left font-medium text-slate-500",children:"Patient"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-right font-medium text-slate-500",children:"Net"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-right font-medium text-slate-500",children:"Paid"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-right font-medium text-slate-500",children:"Balance"}),o.jsx("th",{className:"px-3 md:px-4 py-2 text-left font-medium text-slate-500",children:"Status"}),o.jsx("th",{className:"px-3 md:px-4 py-2"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:P.map(O=>o.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>j(O.id),children:[o.jsx("td",{className:"px-3 md:px-4 py-2 text-slate-800 whitespace-nowrap",children:O.invoice_number||O.id}),o.jsx("td",{className:"px-3 md:px-4 py-2 text-slate-600 whitespace-nowrap",children:O.billing_type||"general"}),o.jsxs("td",{className:"px-3 md:px-4 py-2 text-slate-500 whitespace-nowrap",children:["#",O.patient_id]}),o.jsxs("td",{className:"px-3 md:px-4 py-2 text-right text-slate-800 whitespace-nowrap",children:[" ",Gb(O.net_total)]}),o.jsxs("td",{className:"px-3 md:px-4 py-2 text-right text-slate-600 whitespace-nowrap",children:[" ",Gb(O.amount_paid)]}),o.jsxs("td",{className:"px-3 md:px-4 py-2 text-right text-slate-800 whitespace-nowrap",children:[" ",Gb(O.balance_due)]}),o.jsx("td",{className:"px-3 md:px-4 py-2 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-[10px] font-medium ${NRe[O.status]||"bg-slate-100 text-slate-700"}`,children:O.status})}),o.jsx("td",{className:"px-3 md:px-4 py-2 text-right whitespace-nowrap",children:o.jsx("span",{className:"text-[11px] text-indigo-600 hover:text-indigo-800",children:"Open "})})]},O.id))})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 px-3 md:px-4 py-3 border-t border-slate-100 text-[11px]",children:[o.jsxs("div",{className:"text-slate-500",children:["Showing ",o.jsx("span",{className:"font-medium",children:T}),"",o.jsx("span",{className:"font-medium",children:A})," of"," ",o.jsx("span",{className:"font-medium",children:r.length})," ","invoices"]}),o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:E,disabled:h===1,className:`px-2.5 py-1 rounded-md border text-[11px] ${h===1?"border-slate-200 text-slate-300 cursor-not-allowed":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:"Prev"}),o.jsxs("span",{className:"text-slate-500",children:["Page"," ",o.jsx("span",{className:"font-semibold text-slate-800",children:h})," ","/ ",C]}),o.jsx("button",{type:"button",onClick:M,disabled:h===C,className:`px-2.5 py-1 rounded-md border text-[11px] ${h===C?"border-slate-200 text-slate-300 cursor-not-allowed":"border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:"Next"})]})]})]})]})]}),d&&o.jsx("div",{className:"fixed inset-0 z-30 flex items-end sm:items-center justify-center bg-black/40",children:o.jsxs("div",{className:"w-full sm:max-w-md bg-white rounded-t-2xl sm:rounded-2xl shadow-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"New Invoice"}),o.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-xs text-slate-400 hover:text-slate-600",children:""})]}),o.jsxs("form",{className:"space-y-3",onSubmit:k,children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Patient"}),o.jsx(w6,{value:g.patient_id,onChange:_}),o.jsx("p",{className:"text-[10px] text-slate-400",children:"Search by name / UHID / phone and pick the patient for billing."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Billing Type"}),o.jsxs("select",{name:"billing_type",value:g.billing_type,onChange:S,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[o.jsx("option",{value:"op_billing",children:"OP Billing"}),o.jsx("option",{value:"ip_billing",children:"IP Billing"}),o.jsx("option",{value:"lab",children:"Lab"}),o.jsx("option",{value:"pharmacy",children:"Pharmacy"}),o.jsx("option",{value:"radiology",children:"Radiology"}),o.jsx("option",{value:"general",children:"General"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Context Type (optional)"}),o.jsxs("select",{name:"context_type",value:g.context_type,onChange:S,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"opd",children:"OPD"}),o.jsx("option",{value:"ipd",children:"IPD"}),o.jsx("option",{value:"lab",children:"Lab"}),o.jsx("option",{value:"radiology",children:"Radiology"}),o.jsx("option",{value:"pharmacy",children:"Pharmacy"}),o.jsx("option",{value:"other",children:"Other"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Context ID (optional)"}),o.jsx("input",{type:"number",name:"context_id",value:g.context_id,onChange:S,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Visit / admission / order id"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-medium text-slate-700",children:"Remarks (optional)"}),o.jsx("input",{type:"text",name:"remarks",value:g.remarks,onChange:S,className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Any note for this invoice"})]})]}),f&&o.jsx("p",{className:"text-[11px] text-red-600",children:f}),o.jsxs("div",{className:"flex gap-2 justify-end pt-1",children:[o.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-3 py-1.5 rounded-md border border-slate-300 text-xs text-slate-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-3 py-1.5 rounded-md bg-indigo-600 text-xs font-medium text-white hover:bg-indigo-700",children:"Create & Open"})]})]})]})})]})}function kRe(){return o.jsxs(o.Fragment,{children:[o.jsxs(qK,{children:[o.jsx(be,{path:"/auth/login",element:o.jsx(JJ,{})}),o.jsx(be,{path:"/auth/register-admin",element:o.jsx(QJ,{})}),o.jsx(be,{path:"/auth/verify",element:o.jsx(ZJ,{})}),o.jsx(be,{element:o.jsx(Rre,{}),children:o.jsxs(be,{element:o.jsx(Ore,{}),children:[o.jsx(be,{path:"/admin",element:o.jsx(t5,{})}),o.jsx(be,{path:"/dashboard",element:o.jsx(t5,{})}),o.jsx(be,{path:"/admin/roles",element:o.jsx(kre,{})}),o.jsx(be,{path:"/admin/permissions",element:o.jsx(Cre,{})}),o.jsx(be,{path:"/admin/users",element:o.jsx(_re,{})}),o.jsx(be,{path:"/admin/departments",element:o.jsx(Nre,{})}),o.jsx(be,{path:"/patients",element:o.jsx(hRe,{})}),o.jsx(be,{path:"/opd/schedules",element:o.jsx(Qre,{})}),o.jsx(be,{path:"/opd/appointments",element:o.jsx(ase,{})}),o.jsx(be,{path:"/opd/queue",element:o.jsx(ise,{})}),o.jsx(be,{path:"/opd/triage",element:o.jsx(lse,{})}),o.jsx(be,{path:"/opd/visit/:id",element:o.jsx(dse,{})}),o.jsx(be,{path:"/opd/masters",element:o.jsx(hse,{})}),o.jsx(be,{path:"/ipd/admissions",element:o.jsx(uae,{})}),o.jsx(be,{path:"/ipd/admission/:id",element:o.jsx(jae,{})}),o.jsx(be,{path:"/ipd/tracking",element:o.jsx(Nae,{})}),o.jsx(be,{path:"/ipd/my",element:o.jsx(Sae,{})}),o.jsx(be,{path:"/ipd/discharged",element:o.jsx(kae,{})}),o.jsx(be,{path:"/ipd/bedboard",element:o.jsx(Cae,{})}),o.jsx(be,{path:"/ipd/masters",element:o.jsx(aae,{})}),o.jsx(be,{path:"/pharmacy/medicines",element:o.jsx(cde,{})}),o.jsx(be,{path:"/pharmacy/suppliers",element:o.jsx(ude,{})}),o.jsx(be,{path:"/pharmacy/locations",element:o.jsx(fde,{})}),o.jsx(be,{path:"/pharmacy/inventory",element:o.jsx(pde,{})}),o.jsx(be,{path:"/pharmacy/transactions",element:o.jsx(mde,{})}),o.jsx(be,{path:"/pharmacy/po",element:o.jsx(gde,{})}),o.jsx(be,{path:"/pharmacy/grn",element:o.jsx(yde,{})}),o.jsx(be,{path:"/pharmacy/alerts",element:o.jsx(vde,{})}),o.jsx(be,{path:"/pharmacy/dispense",element:o.jsx(bde,{})}),o.jsx(be,{path:"/pharmacy/returns",element:o.jsx(wde,{})}),o.jsx(be,{path:"/pharmacy/prescriptions",element:o.jsx(Nde,{})}),o.jsx(be,{path:"/pharmacy/prescriptions/new",element:o.jsx(Ade,{})}),o.jsx(be,{path:"/pharmacy",element:o.jsx(Sde,{})}),o.jsx(be,{path:"/lab/orders",element:o.jsx(Ude,{})}),o.jsx(be,{path:"/lab/orders/:id",element:o.jsx(Wde,{})}),o.jsx(be,{path:"/lab/masters",element:o.jsx(Kde,{})}),o.jsx(be,{path:"/ris/orders",element:o.jsx(lue,{})}),o.jsx(be,{path:"/ris/orders/:id",element:o.jsx(uue,{})}),o.jsx(be,{path:"/ris/masters",element:o.jsx(due,{})}),o.jsx(be,{path:"/ot/orders",element:o.jsx(kue,{})}),o.jsx(be,{path:"/ot/orders/:id",element:o.jsx(_ue,{})}),o.jsx(be,{path:"/ot/masters",element:o.jsx(Pue,{})}),o.jsx(be,{path:"/billing",element:o.jsx(SRe,{})}),o.jsx(be,{path:"/billing/invoices/:invoiceId",element:o.jsx(Uue,{})}),o.jsx(be,{path:"/emr",element:o.jsx(efe,{})}),o.jsx(be,{path:"/templates",element:o.jsx(dfe,{})}),o.jsx(be,{path:"/templates/new",element:o.jsx(dM,{mode:"create"})}),o.jsx(be,{path:"/templates/:id/edit",element:o.jsx(dM,{mode:"edit"})}),o.jsx(be,{path:"/templates/generate",element:o.jsx(Jve,{})}),o.jsx(be,{path:"/templates/consents",element:o.jsx(Qve,{})}),o.jsx(be,{path:"/mis",element:o.jsx(VOe,{})}),o.jsx(be,{path:"/patients/masters",element:o.jsx(xRe,{})})]})}),o.jsx(be,{path:"*",element:o.jsx(AD,{to:"/auth/login",replace:!0})})]}),o.jsx(pi,{position:"top-right",richColors:!0,closeButton:!0})]})}Yb.createRoot(document.getElementById("root")).render(o.jsx(ae.StrictMode,{children:o.jsx(Zre,{children:o.jsx(tq,{children:o.jsx(kRe,{})})})}));
