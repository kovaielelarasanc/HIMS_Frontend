function OR(t,n){for(var s=0;s<n.length;s++){const r=n[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function Rx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tS={exports:{}},Of={},nS={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=Symbol.for("react.element"),DR=Symbol.for("react.portal"),IR=Symbol.for("react.fragment"),LR=Symbol.for("react.strict_mode"),$R=Symbol.for("react.profiler"),FR=Symbol.for("react.provider"),zR=Symbol.for("react.context"),BR=Symbol.for("react.forward_ref"),VR=Symbol.for("react.suspense"),HR=Symbol.for("react.memo"),UR=Symbol.for("react.lazy"),G0=Symbol.iterator;function WR(t){return t===null||typeof t!="object"?null:(t=G0&&t[G0]||t["@@iterator"],typeof t=="function"?t:null)}var sS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rS=Object.assign,iS={};function Do(t,n,s){this.props=t,this.context=n,this.refs=iS,this.updater=s||sS}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aS(){}aS.prototype=Do.prototype;function Ox(t,n,s){this.props=t,this.context=n,this.refs=iS,this.updater=s||sS}var Dx=Ox.prototype=new aS;Dx.constructor=Ox;rS(Dx,Do.prototype);Dx.isPureReactComponent=!0;var Y0=Array.isArray,oS=Object.prototype.hasOwnProperty,Ix={current:null},lS={key:!0,ref:!0,__self:!0,__source:!0};function cS(t,n,s){var r,i={},o=null,l=null;if(n!=null)for(r in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(o=""+n.key),n)oS.call(n,r)&&!lS.hasOwnProperty(r)&&(i[r]=n[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Dc,type:t,key:o,ref:l,props:i,_owner:Ix.current}}function qR(t,n){return{$$typeof:Dc,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function Lx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dc}function KR(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return n[s]})}var X0=/\/+/g;function qh(t,n){return typeof t=="object"&&t!==null&&t.key!=null?KR(""+t.key):n.toString(36)}function Qd(t,n,s,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Dc:case DR:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+qh(l,0):r,Y0(i)?(s="",t!=null&&(s=t.replace(X0,"$&/")+"/"),Qd(i,n,s,"",function(u){return u})):i!=null&&(Lx(i)&&(i=qR(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(X0,"$&/")+"/")+t)),n.push(i)),1;if(l=0,r=r===""?".":r+":",Y0(t))for(var c=0;c<t.length;c++){o=t[c];var d=r+qh(o,c);l+=Qd(o,n,s,d,i)}else if(d=WR(t),typeof d=="function")for(t=d.call(t),c=0;!(o=t.next()).done;)o=o.value,d=r+qh(o,c++),l+=Qd(o,n,s,d,i);else if(o==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function od(t,n,s){if(t==null)return t;var r=[],i=0;return Qd(t,r,"","",function(o){return n.call(s,o,i++)}),r}function GR(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},Zd={transition:null},YR={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:Ix};function dS(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:od,forEach:function(t,n,s){od(t,function(){n.apply(this,arguments)},s)},count:function(t){var n=0;return od(t,function(){n++}),n},toArray:function(t){return od(t,function(n){return n})||[]},only:function(t){if(!Lx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Do;Ce.Fragment=IR;Ce.Profiler=$R;Ce.PureComponent=Ox;Ce.StrictMode=LR;Ce.Suspense=VR;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YR;Ce.act=dS;Ce.cloneElement=function(t,n,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rS({},t.props),i=t.key,o=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(o=n.ref,l=Ix.current),n.key!==void 0&&(i=""+n.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in n)oS.call(n,d)&&!lS.hasOwnProperty(d)&&(r[d]=n[d]===void 0&&c!==void 0?c[d]:n[d])}var d=arguments.length-2;if(d===1)r.children=s;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:Dc,type:t.type,key:i,ref:o,props:r,_owner:l}};Ce.createContext=function(t){return t={$$typeof:zR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FR,_context:t},t.Consumer=t};Ce.createElement=cS;Ce.createFactory=function(t){var n=cS.bind(null,t);return n.type=t,n};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:BR,render:t}};Ce.isValidElement=Lx;Ce.lazy=function(t){return{$$typeof:UR,_payload:{_status:-1,_result:t},_init:GR}};Ce.memo=function(t,n){return{$$typeof:HR,type:t,compare:n===void 0?null:n}};Ce.startTransition=function(t){var n=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=n}};Ce.unstable_act=dS;Ce.useCallback=function(t,n){return on.current.useCallback(t,n)};Ce.useContext=function(t){return on.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Ce.useEffect=function(t,n){return on.current.useEffect(t,n)};Ce.useId=function(){return on.current.useId()};Ce.useImperativeHandle=function(t,n,s){return on.current.useImperativeHandle(t,n,s)};Ce.useInsertionEffect=function(t,n){return on.current.useInsertionEffect(t,n)};Ce.useLayoutEffect=function(t,n){return on.current.useLayoutEffect(t,n)};Ce.useMemo=function(t,n){return on.current.useMemo(t,n)};Ce.useReducer=function(t,n,s){return on.current.useReducer(t,n,s)};Ce.useRef=function(t){return on.current.useRef(t)};Ce.useState=function(t){return on.current.useState(t)};Ce.useSyncExternalStore=function(t,n,s){return on.current.useSyncExternalStore(t,n,s)};Ce.useTransition=function(){return on.current.useTransition()};Ce.version="18.3.1";nS.exports=Ce;var g=nS.exports;const G=Rx(g),$x=OR({__proto__:null,default:G},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR=g,JR=Symbol.for("react.element"),QR=Symbol.for("react.fragment"),ZR=Object.prototype.hasOwnProperty,eO=XR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tO={key:!0,ref:!0,__self:!0,__source:!0};function uS(t,n,s){var r,i={},o=null,l=null;s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(l=n.ref);for(r in n)ZR.call(n,r)&&!tO.hasOwnProperty(r)&&(i[r]=n[r]);if(t&&t.defaultProps)for(r in n=t.defaultProps,n)i[r]===void 0&&(i[r]=n[r]);return{$$typeof:JR,type:t,key:o,ref:l,props:i,_owner:eO.current}}Of.Fragment=QR;Of.jsx=uS;Of.jsxs=uS;tS.exports=Of;var a=tS.exports,jm={},fS={exports:{}},Ln={},hS={exports:{}},pS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(A,O){var z=A.length;A.push(O);e:for(;0<z;){var H=z-1>>>1,X=A[H];if(0<i(X,O))A[H]=O,A[z]=X,z=H;else break e}}function s(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var O=A[0],z=A.pop();if(z!==O){A[0]=z;e:for(var H=0,X=A.length,Q=X>>>1;H<Q;){var ie=2*(H+1)-1,oe=A[ie],je=ie+1,Z=A[je];if(0>i(oe,z))je<X&&0>i(Z,oe)?(A[H]=Z,A[je]=z,H=je):(A[H]=oe,A[ie]=z,H=ie);else if(je<X&&0>i(Z,z))A[H]=Z,A[je]=z,H=je;else break e}}return O}function i(A,O){var z=A.sortIndex-O.sortIndex;return z!==0?z:A.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],u=[],f=1,h=null,p=3,m=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(A){for(var O=s(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=A)r(u),O.sortIndex=O.expirationTime,n(d,O);else break;O=s(u)}}function N(A){if(y=!1,j(A),!x)if(s(d)!==null)x=!0,F(S);else{var O=s(u);O!==null&&B(N,O.startTime-A)}}function S(A,O){x=!1,y&&(y=!1,b(k),k=-1),m=!0;var z=p;try{for(j(O),h=s(d);h!==null&&(!(h.expirationTime>O)||A&&!D());){var H=h.callback;if(typeof H=="function"){h.callback=null,p=h.priorityLevel;var X=H(h.expirationTime<=O);O=t.unstable_now(),typeof X=="function"?h.callback=X:h===s(d)&&r(d),j(O)}else r(d);h=s(d)}if(h!==null)var Q=!0;else{var ie=s(u);ie!==null&&B(N,ie.startTime-O),Q=!1}return Q}finally{h=null,p=z,m=!1}}var _=!1,C=null,k=-1,E=5,M=-1;function D(){return!(t.unstable_now()-M<E)}function R(){if(C!==null){var A=t.unstable_now();M=A;var O=!0;try{O=C(!0,A)}finally{O?T():(_=!1,C=null)}}else _=!1}var T;if(typeof w=="function")T=function(){w(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,T=function(){L.postMessage(null)}}else T=function(){v(R,0)};function F(A){C=A,_||(_=!0,T())}function B(A,O){k=v(function(){A(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,F(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(A){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return A()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,O){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var z=p;p=A;try{return O()}finally{p=z}},t.unstable_scheduleCallback=function(A,O,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,A){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,A={id:f++,callback:O,priorityLevel:A,startTime:z,expirationTime:X,sortIndex:-1},z>H?(A.sortIndex=z,n(u,A),s(d)===null&&A===s(u)&&(y?(b(k),k=-1):y=!0,B(N,z-H))):(A.sortIndex=X,n(d,A),x||m||(x=!0,F(S))),A},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(A){var O=p;return function(){var z=p;p=O;try{return A.apply(this,arguments)}finally{p=z}}}})(pS);hS.exports=pS;var nO=hS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sO=g,On=nO;function K(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mS=new Set,Yl={};function ha(t,n){ho(t,n),ho(t+"Capture",n)}function ho(t,n){for(Yl[t]=n,t=0;t<n.length;t++)mS.add(n[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nm=Object.prototype.hasOwnProperty,rO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J0={},Q0={};function iO(t){return Nm.call(Q0,t)?!0:Nm.call(J0,t)?!1:rO.test(t)?Q0[t]=!0:(J0[t]=!0,!1)}function aO(t,n,s,r){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oO(t,n,s,r){if(n===null||typeof n>"u"||aO(t,n,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ln(t,n,s,r,i,o,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=n,this.sanitizeURL=o,this.removeEmptyString=l}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Ot[n]=new ln(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fx=/[\-:]([a-z])/g;function zx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Fx,zx);Ot[n]=new ln(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Fx,zx);Ot[n]=new ln(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Fx,zx);Ot[n]=new ln(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bx(t,n,s,r){var i=Ot.hasOwnProperty(n)?Ot[n]:null;(i!==null?i.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(oO(n,s,i,r)&&(s=null),r||i===null?iO(n)&&(s===null?t.removeAttribute(n):t.setAttribute(n,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(n=i.attributeName,r=i.attributeNamespace,s===null?t.removeAttribute(n):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?t.setAttributeNS(r,n,s):t.setAttribute(n,s))))}var vr=sO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),La=Symbol.for("react.fragment"),Vx=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),Cm=Symbol.for("react.suspense_list"),Ux=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),Z0=Symbol.iterator;function nl(t){return t===null||typeof t!="object"?null:(t=Z0&&t[Z0]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Kh;function vl(t){if(Kh===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Kh=n&&n[1]||""}return`
`+Kh+t}var Gh=!1;function Yh(t,n){if(!t||Gh)return"";Gh=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(t,[],n)}else{try{n.call()}catch(u){r=u}t.call(n.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,c=o.length-1;1<=l&&0<=c&&i[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==o[c]){var d=`
`+i[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{Gh=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?vl(t):""}function lO(t){switch(t.tag){case 5:return vl(t.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return t=Yh(t.type,!1),t;case 11:return t=Yh(t.type.render,!1),t;case 1:return t=Yh(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case La:return"Fragment";case Ia:return"Portal";case Sm:return"Profiler";case Vx:return"StrictMode";case km:return"Suspense";case Cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xS:return(t.displayName||"Context")+".Consumer";case gS:return(t._context.displayName||"Context")+".Provider";case Hx:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ux:return n=t.displayName||null,n!==null?n:_m(t.type)||"Memo";case Tr:n=t._payload,t=t._init;try{return _m(t(n))}catch{}}return null}function cO(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(n);case 8:return n===Vx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vS(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function dO(t){var n=vS(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),r=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,o=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function cd(t){t._valueTracker||(t._valueTracker=dO(t))}function bS(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),r="";return t&&(r=vS(t)?t.checked?"true":"false":t.value),t=r,t!==s?(n.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Em(t,n){var s=n.checked;return Ye({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function eb(t,n){var s=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;s=ti(n.value!=null?n.value:s),t._wrapperState={initialChecked:r,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function wS(t,n){n=n.checked,n!=null&&Bx(t,"checked",n,!1)}function Tm(t,n){wS(t,n);var s=ti(n.value),r=n.type;if(s!=null)r==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Mm(t,n.type,s):n.hasOwnProperty("defaultValue")&&Mm(t,n.type,ti(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function tb(t,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,s||n===t.value||(t.value=n),t.defaultValue=n}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Mm(t,n,s){(n!=="number"||Tu(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var bl=Array.isArray;function eo(t,n,s,r){if(t=t.options,n){n={};for(var i=0;i<s.length;i++)n["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=n.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&r&&(t[s].defaultSelected=!0)}else{for(s=""+ti(s),n=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}n!==null||t[i].disabled||(n=t[i])}n!==null&&(n.selected=!0)}}function Am(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ye({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nb(t,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(K(92));if(bl(s)){if(1<s.length)throw Error(K(93));s=s[0]}n=s}n==null&&(n=""),s=n}t._wrapperState={initialValue:ti(s)}}function jS(t,n){var s=ti(n.value),r=ti(n.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),n.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),r!=null&&(t.defaultValue=""+r)}function sb(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function NS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?NS(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dd,SS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,r,i){MSApp.execUnsafeLocalFunction(function(){return t(n,s,r,i)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=dd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Xl(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uO=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){uO.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Tl[n]=Tl[t]})});function kS(t,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+n).trim():n+"px"}function CS(t,n){t=t.style;for(var s in n)if(n.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=kS(s,n[s],r);s==="float"&&(s="cssFloat"),r?t.setProperty(s,i):t[s]=i}}var fO=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,n){if(n){if(fO[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(K(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(K(61))}if(n.style!=null&&typeof n.style!="object")throw Error(K(62))}}function Om(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=null;function Wx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Im=null,to=null,no=null;function rb(t){if(t=$c(t)){if(typeof Im!="function")throw Error(K(280));var n=t.stateNode;n&&(n=Ff(n),Im(t.stateNode,t.type,n))}}function _S(t){to?no?no.push(t):no=[t]:to=t}function ES(){if(to){var t=to,n=no;if(no=to=null,rb(t),n)for(t=0;t<n.length;t++)rb(n[t])}}function TS(t,n){return t(n)}function MS(){}var Xh=!1;function AS(t,n,s){if(Xh)return t(n,s);Xh=!0;try{return TS(t,n,s)}finally{Xh=!1,(to!==null||no!==null)&&(MS(),ES())}}function Jl(t,n){var s=t.stateNode;if(s===null)return null;var r=Ff(s);if(r===null)return null;s=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(K(231,n,typeof s));return s}var Lm=!1;if(lr)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Lm=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Lm=!1}function hO(t,n,s,r,i,o,l,c,d){var u=Array.prototype.slice.call(arguments,3);try{n.apply(s,u)}catch(f){this.onError(f)}}var Ml=!1,Mu=null,Au=!1,$m=null,pO={onError:function(t){Ml=!0,Mu=t}};function mO(t,n,s,r,i,o,l,c,d){Ml=!1,Mu=null,hO.apply(pO,arguments)}function gO(t,n,s,r,i,o,l,c,d){if(mO.apply(this,arguments),Ml){if(Ml){var u=Mu;Ml=!1,Mu=null}else throw Error(K(198));Au||(Au=!0,$m=u)}}function pa(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function PS(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function ib(t){if(pa(t)!==t)throw Error(K(188))}function xO(t){var n=t.alternate;if(!n){if(n=pa(t),n===null)throw Error(K(188));return n!==t?null:t}for(var s=t,r=n;;){var i=s.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===s)return ib(i),t;if(o===r)return ib(i),n;o=o.sibling}throw Error(K(188))}if(s.return!==r.return)s=i,r=o;else{for(var l=!1,c=i.child;c;){if(c===s){l=!0,s=i,r=o;break}if(c===r){l=!0,r=i,s=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===s){l=!0,s=o,r=i;break}if(c===r){l=!0,r=o,s=i;break}c=c.sibling}if(!l)throw Error(K(189))}}if(s.alternate!==r)throw Error(K(190))}if(s.tag!==3)throw Error(K(188));return s.stateNode.current===s?t:n}function RS(t){return t=xO(t),t!==null?OS(t):null}function OS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=OS(t);if(n!==null)return n;t=t.sibling}return null}var DS=On.unstable_scheduleCallback,ab=On.unstable_cancelCallback,yO=On.unstable_shouldYield,vO=On.unstable_requestPaint,it=On.unstable_now,bO=On.unstable_getCurrentPriorityLevel,qx=On.unstable_ImmediatePriority,IS=On.unstable_UserBlockingPriority,Pu=On.unstable_NormalPriority,wO=On.unstable_LowPriority,LS=On.unstable_IdlePriority,Df=null,Ds=null;function jO(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Df,t,void 0,(t.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:kO,NO=Math.log,SO=Math.LN2;function kO(t){return t>>>=0,t===0?32:31-(NO(t)/SO|0)|0}var ud=64,fd=4194304;function wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=s&268435455;if(l!==0){var c=l&~i;c!==0?r=wl(c):(o&=l,o!==0&&(r=wl(o)))}else l=s&~i,l!==0?r=wl(l):o!==0&&(r=wl(o));if(r===0)return 0;if(n!==0&&n!==r&&!(n&i)&&(i=r&-r,o=n&-n,i>=o||i===16&&(o&4194240)!==0))return n;if(r&4&&(r|=s&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=r;0<n;)s=31-fs(n),i=1<<s,r|=t[s],n&=~i;return r}function CO(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _O(t,n){for(var s=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-fs(o),c=1<<l,d=i[l];d===-1?(!(c&s)||c&r)&&(i[l]=CO(c,n)):d<=n&&(t.expiredLanes|=c),o&=~c}}function Fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $S(){var t=ud;return ud<<=1,!(ud&4194240)&&(ud=64),t}function Jh(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Ic(t,n,s){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-fs(n),t[n]=s}function EO(t,n){var s=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-fs(s),o=1<<i;n[i]=0,r[i]=-1,t[i]=-1,s&=~o}}function Kx(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var r=31-fs(s),i=1<<r;i&n|t[r]&n&&(t[r]|=n),s&=~i}}var De=0;function FS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zS,Gx,BS,VS,HS,zm=!1,hd=[],Vr=null,Hr=null,Ur=null,Ql=new Map,Zl=new Map,Rr=[],TO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(t,n){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":Ql.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(n.pointerId)}}function rl(t,n,s,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:n,domEventName:s,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},n!==null&&(n=$c(n),n!==null&&Gx(n)),t):(t.eventSystemFlags|=r,n=t.targetContainers,i!==null&&n.indexOf(i)===-1&&n.push(i),t)}function MO(t,n,s,r,i){switch(n){case"focusin":return Vr=rl(Vr,t,n,s,r,i),!0;case"dragenter":return Hr=rl(Hr,t,n,s,r,i),!0;case"mouseover":return Ur=rl(Ur,t,n,s,r,i),!0;case"pointerover":var o=i.pointerId;return Ql.set(o,rl(Ql.get(o)||null,t,n,s,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Zl.set(o,rl(Zl.get(o)||null,t,n,s,r,i)),!0}return!1}function US(t){var n=Ri(t.target);if(n!==null){var s=pa(n);if(s!==null){if(n=s.tag,n===13){if(n=PS(s),n!==null){t.blockedOn=n,HS(t.priority,function(){BS(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Bm(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);Dm=r,s.target.dispatchEvent(r),Dm=null}else return n=$c(s),n!==null&&Gx(n),t.blockedOn=s,!1;n.shift()}return!0}function lb(t,n,s){eu(t)&&s.delete(n)}function AO(){zm=!1,Vr!==null&&eu(Vr)&&(Vr=null),Hr!==null&&eu(Hr)&&(Hr=null),Ur!==null&&eu(Ur)&&(Ur=null),Ql.forEach(lb),Zl.forEach(lb)}function il(t,n){t.blockedOn===n&&(t.blockedOn=null,zm||(zm=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,AO)))}function ec(t){function n(i){return il(i,t)}if(0<hd.length){il(hd[0],t);for(var s=1;s<hd.length;s++){var r=hd[s];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&il(Vr,t),Hr!==null&&il(Hr,t),Ur!==null&&il(Ur,t),Ql.forEach(n),Zl.forEach(n),s=0;s<Rr.length;s++)r=Rr[s],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rr.length&&(s=Rr[0],s.blockedOn===null);)US(s),s.blockedOn===null&&Rr.shift()}var so=vr.ReactCurrentBatchConfig,Ou=!0;function PO(t,n,s,r){var i=De,o=so.transition;so.transition=null;try{De=1,Yx(t,n,s,r)}finally{De=i,so.transition=o}}function RO(t,n,s,r){var i=De,o=so.transition;so.transition=null;try{De=4,Yx(t,n,s,r)}finally{De=i,so.transition=o}}function Yx(t,n,s,r){if(Ou){var i=Bm(t,n,s,r);if(i===null)op(t,n,r,Du,s),ob(t,r);else if(MO(i,t,n,s,r))r.stopPropagation();else if(ob(t,r),n&4&&-1<TO.indexOf(t)){for(;i!==null;){var o=$c(i);if(o!==null&&zS(o),o=Bm(t,n,s,r),o===null&&op(t,n,r,Du,s),o===i)break;i=o}i!==null&&r.stopPropagation()}else op(t,n,r,null,s)}}var Du=null;function Bm(t,n,s,r){if(Du=null,t=Wx(r),t=Ri(t),t!==null)if(n=pa(t),n===null)t=null;else if(s=n.tag,s===13){if(t=PS(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Du=t,null}function WS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bO()){case qx:return 1;case IS:return 4;case Pu:case wO:return 16;case LS:return 536870912;default:return 16}default:return 16}}var Ir=null,Xx=null,tu=null;function qS(){if(tu)return tu;var t,n=Xx,s=n.length,r,i="value"in Ir?Ir.value:Ir.textContent,o=i.length;for(t=0;t<s&&n[t]===i[t];t++);var l=s-t;for(r=1;r<=l&&n[s-r]===i[o-r];r++);return tu=i.slice(t,1<r?1-r:void 0)}function nu(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function cb(){return!1}function $n(t){function n(s,r,i,o,l){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pd:cb,this.isPropagationStopped=cb,this}return Ye(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),n}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=$n(Io),Lc=Ye({},Io,{view:0,detail:0}),OO=$n(Lc),Qh,Zh,al,If=Ye({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?(Qh=t.screenX-al.screenX,Zh=t.screenY-al.screenY):Zh=Qh=0,al=t),Qh)},movementY:function(t){return"movementY"in t?t.movementY:Zh}}),db=$n(If),DO=Ye({},If,{dataTransfer:0}),IO=$n(DO),LO=Ye({},Lc,{relatedTarget:0}),ep=$n(LO),$O=Ye({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),FO=$n($O),zO=Ye({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BO=$n(zO),VO=Ye({},Io,{data:0}),ub=$n(VO),HO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qO(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=WO[t])?!!n[t]:!1}function Qx(){return qO}var KO=Ye({},Lc,{key:function(t){if(t.key){var n=HO[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qx,charCode:function(t){return t.type==="keypress"?nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GO=$n(KO),YO=Ye({},If,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fb=$n(YO),XO=Ye({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qx}),JO=$n(XO),QO=Ye({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZO=$n(QO),e3=Ye({},If,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t3=$n(e3),n3=[9,13,27,32],Zx=lr&&"CompositionEvent"in window,Al=null;lr&&"documentMode"in document&&(Al=document.documentMode);var s3=lr&&"TextEvent"in window&&!Al,KS=lr&&(!Zx||Al&&8<Al&&11>=Al),hb=" ",pb=!1;function GS(t,n){switch(t){case"keyup":return n3.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function r3(t,n){switch(t){case"compositionend":return YS(n);case"keypress":return n.which!==32?null:(pb=!0,hb);case"textInput":return t=n.data,t===hb&&pb?null:t;default:return null}}function i3(t,n){if($a)return t==="compositionend"||!Zx&&GS(t,n)?(t=qS(),tu=Xx=Ir=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return KS&&n.locale!=="ko"?null:n.data;default:return null}}var a3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!a3[t.type]:n==="textarea"}function XS(t,n,s,r){_S(r),n=Iu(n,"onChange"),0<n.length&&(s=new Jx("onChange","change",null,s,r),t.push({event:s,listeners:n}))}var Pl=null,tc=null;function o3(t){ok(t,0)}function Lf(t){var n=Ba(t);if(bS(n))return t}function l3(t,n){if(t==="change")return n}var JS=!1;if(lr){var tp;if(lr){var np="oninput"in document;if(!np){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),np=typeof gb.oninput=="function"}tp=np}else tp=!1;JS=tp&&(!document.documentMode||9<document.documentMode)}function xb(){Pl&&(Pl.detachEvent("onpropertychange",QS),tc=Pl=null)}function QS(t){if(t.propertyName==="value"&&Lf(tc)){var n=[];XS(n,tc,t,Wx(t)),AS(o3,n)}}function c3(t,n,s){t==="focusin"?(xb(),Pl=n,tc=s,Pl.attachEvent("onpropertychange",QS)):t==="focusout"&&xb()}function d3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lf(tc)}function u3(t,n){if(t==="click")return Lf(n)}function f3(t,n){if(t==="input"||t==="change")return Lf(n)}function h3(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ps=typeof Object.is=="function"?Object.is:h3;function nc(t,n){if(ps(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),r=Object.keys(n);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!Nm.call(n,i)||!ps(t[i],n[i]))return!1}return!0}function yb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vb(t,n){var s=yb(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=n&&r>=n)return{node:s,offset:n-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=yb(s)}}function ZS(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ZS(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ek(){for(var t=window,n=Tu();n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Tu(t.document)}return n}function ey(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function p3(t){var n=ek(),s=t.focusedElem,r=t.selectionRange;if(n!==s&&s&&s.ownerDocument&&ZS(s.ownerDocument.documentElement,s)){if(r!==null&&ey(s)){if(n=r.start,t=r.end,t===void 0&&(t=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(t,s.value.length);else if(t=(n=s.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=vb(s,o);var l=vb(s,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=s;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)t=n[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var m3=lr&&"documentMode"in document&&11>=document.documentMode,Fa=null,Vm=null,Rl=null,Hm=!1;function bb(t,n,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hm||Fa==null||Fa!==Tu(r)||(r=Fa,"selectionStart"in r&&ey(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rl&&nc(Rl,r)||(Rl=r,r=Iu(Vm,"onSelect"),0<r.length&&(n=new Jx("onSelect","select",null,n,s),t.push({event:n,listeners:r}),n.target=Fa)))}function md(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var za={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},sp={},tk={};lr&&(tk=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function $f(t){if(sp[t])return sp[t];if(!za[t])return t;var n=za[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in tk)return sp[t]=n[s];return t}var nk=$f("animationend"),sk=$f("animationiteration"),rk=$f("animationstart"),ik=$f("transitionend"),ak=new Map,wb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,n){ak.set(t,n),ha(n,[t])}for(var rp=0;rp<wb.length;rp++){var ip=wb[rp],g3=ip.toLowerCase(),x3=ip[0].toUpperCase()+ip.slice(1);hi(g3,"on"+x3)}hi(nk,"onAnimationEnd");hi(sk,"onAnimationIteration");hi(rk,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(ik,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y3=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function jb(t,n,s){var r=t.type||"unknown-event";t.currentTarget=s,gO(r,n,void 0,t),t.currentTarget=null}function ok(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],i=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==o&&i.isPropagationStopped())break e;jb(i,c,u),o=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,u=c.currentTarget,c=c.listener,d!==o&&i.isPropagationStopped())break e;jb(i,c,u),o=d}}}if(Au)throw t=$m,Au=!1,$m=null,t}function Fe(t,n){var s=n[Gm];s===void 0&&(s=n[Gm]=new Set);var r=t+"__bubble";s.has(r)||(lk(n,t,2,!1),s.add(r))}function ap(t,n,s){var r=0;n&&(r|=4),lk(s,t,r,n)}var gd="_reactListening"+Math.random().toString(36).slice(2);function sc(t){if(!t[gd]){t[gd]=!0,mS.forEach(function(s){s!=="selectionchange"&&(y3.has(s)||ap(s,!1,t),ap(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[gd]||(n[gd]=!0,ap("selectionchange",!1,n))}}function lk(t,n,s,r){switch(WS(n)){case 1:var i=PO;break;case 4:i=RO;break;default:i=Yx}s=i.bind(null,n,s,t),i=void 0,!Lm||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(n,s,{capture:!0,passive:i}):t.addEventListener(n,s,!0):i!==void 0?t.addEventListener(n,s,{passive:i}):t.addEventListener(n,s,!1)}function op(t,n,s,r,i){var o=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=Ri(c),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}c=c.parentNode}}r=r.return}AS(function(){var u=o,f=Wx(s),h=[];e:{var p=ak.get(t);if(p!==void 0){var m=Jx,x=t;switch(t){case"keypress":if(nu(s)===0)break e;case"keydown":case"keyup":m=GO;break;case"focusin":x="focus",m=ep;break;case"focusout":x="blur",m=ep;break;case"beforeblur":case"afterblur":m=ep;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=JO;break;case nk:case sk:case rk:m=FO;break;case ik:m=ZO;break;case"scroll":m=OO;break;case"wheel":m=t3;break;case"copy":case"cut":case"paste":m=BO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fb}var y=(n&4)!==0,v=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var w=u,j;w!==null;){j=w;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,b!==null&&(N=Jl(w,b),N!=null&&y.push(rc(w,N,j)))),v)break;w=w.return}0<y.length&&(p=new m(p,x,null,s,f),h.push({event:p,listeners:y}))}}if(!(n&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&s!==Dm&&(x=s.relatedTarget||s.fromElement)&&(Ri(x)||x[cr]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=s.relatedTarget||s.toElement,m=u,x=x?Ri(x):null,x!==null&&(v=pa(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(y=db,N="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=fb,N="onPointerLeave",b="onPointerEnter",w="pointer"),v=m==null?p:Ba(m),j=x==null?p:Ba(x),p=new y(N,w+"leave",m,s,f),p.target=v,p.relatedTarget=j,N=null,Ri(f)===u&&(y=new y(b,w+"enter",x,s,f),y.target=j,y.relatedTarget=v,N=y),v=N,m&&x)t:{for(y=m,b=x,w=0,j=y;j;j=Ca(j))w++;for(j=0,N=b;N;N=Ca(N))j++;for(;0<w-j;)y=Ca(y),w--;for(;0<j-w;)b=Ca(b),j--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=Ca(y),b=Ca(b)}y=null}else y=null;m!==null&&Nb(h,p,m,y,!1),x!==null&&v!==null&&Nb(h,v,x,y,!0)}}e:{if(p=u?Ba(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=l3;else if(mb(p))if(JS)S=f3;else{S=d3;var _=c3}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=u3);if(S&&(S=S(t,u))){XS(h,S,s,f);break e}_&&_(t,p,u),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Mm(p,"number",p.value)}switch(_=u?Ba(u):window,t){case"focusin":(mb(_)||_.contentEditable==="true")&&(Fa=_,Vm=u,Rl=null);break;case"focusout":Rl=Vm=Fa=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,bb(h,s,f);break;case"selectionchange":if(m3)break;case"keydown":case"keyup":bb(h,s,f)}var C;if(Zx)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else $a?GS(t,s)&&(k="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(k="onCompositionStart");k&&(KS&&s.locale!=="ko"&&($a||k!=="onCompositionStart"?k==="onCompositionEnd"&&$a&&(C=qS()):(Ir=f,Xx="value"in Ir?Ir.value:Ir.textContent,$a=!0)),_=Iu(u,k),0<_.length&&(k=new ub(k,t,null,s,f),h.push({event:k,listeners:_}),C?k.data=C:(C=YS(s),C!==null&&(k.data=C)))),(C=s3?r3(t,s):i3(t,s))&&(u=Iu(u,"onBeforeInput"),0<u.length&&(f=new ub("onBeforeInput","beforeinput",null,s,f),h.push({event:f,listeners:u}),f.data=C))}ok(h,n)})}function rc(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Iu(t,n){for(var s=n+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Jl(t,s),o!=null&&r.unshift(rc(t,o,i)),o=Jl(t,n),o!=null&&r.push(rc(t,o,i))),t=t.return}return r}function Ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nb(t,n,s,r,i){for(var o=n._reactName,l=[];s!==null&&s!==r;){var c=s,d=c.alternate,u=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&u!==null&&(c=u,i?(d=Jl(s,o),d!=null&&l.unshift(rc(s,d,c))):i||(d=Jl(s,o),d!=null&&l.push(rc(s,d,c)))),s=s.return}l.length!==0&&t.push({event:n,listeners:l})}var v3=/\r\n?/g,b3=/\u0000|\uFFFD/g;function Sb(t){return(typeof t=="string"?t:""+t).replace(v3,`
`).replace(b3,"")}function xd(t,n,s){if(n=Sb(n),Sb(t)!==n&&s)throw Error(K(425))}function Lu(){}var Um=null,Wm=null;function qm(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,w3=typeof clearTimeout=="function"?clearTimeout:void 0,kb=typeof Promise=="function"?Promise:void 0,j3=typeof queueMicrotask=="function"?queueMicrotask:typeof kb<"u"?function(t){return kb.resolve(null).then(t).catch(N3)}:Km;function N3(t){setTimeout(function(){throw t})}function lp(t,n){var s=n,r=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){t.removeChild(i),ec(n);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);ec(n)}function Wr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Cb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Ps="__reactFiber$"+Lo,ic="__reactProps$"+Lo,cr="__reactContainer$"+Lo,Gm="__reactEvents$"+Lo,S3="__reactListeners$"+Lo,k3="__reactHandles$"+Lo;function Ri(t){var n=t[Ps];if(n)return n;for(var s=t.parentNode;s;){if(n=s[cr]||s[Ps]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Cb(t);t!==null;){if(s=t[Ps])return s;t=Cb(t)}return n}t=s,s=t.parentNode}return null}function $c(t){return t=t[Ps]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ff(t){return t[ic]||null}var Ym=[],Va=-1;function pi(t){return{current:t}}function ze(t){0>Va||(t.current=Ym[Va],Ym[Va]=null,Va--)}function Ie(t,n){Va++,Ym[Va]=t.current,t.current=n}var ni={},Yt=pi(ni),mn=pi(!1),Ji=ni;function po(t,n){var s=t.type.contextTypes;if(!s)return ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in s)i[o]=n[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function $u(){ze(mn),ze(Yt)}function _b(t,n,s){if(Yt.current!==ni)throw Error(K(168));Ie(Yt,n),Ie(mn,s)}function ck(t,n,s){var r=t.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(K(108,cO(t)||"Unknown",i));return Ye({},s,r)}function Fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ni,Ji=Yt.current,Ie(Yt,t),Ie(mn,mn.current),!0}function Eb(t,n,s){var r=t.stateNode;if(!r)throw Error(K(169));s?(t=ck(t,n,Ji),r.__reactInternalMemoizedMergedChildContext=t,ze(mn),ze(Yt),Ie(Yt,t)):ze(mn),Ie(mn,s)}var tr=null,zf=!1,cp=!1;function dk(t){tr===null?tr=[t]:tr.push(t)}function C3(t){zf=!0,dk(t)}function mi(){if(!cp&&tr!==null){cp=!0;var t=0,n=De;try{var s=tr;for(De=1;t<s.length;t++){var r=s[t];do r=r(!0);while(r!==null)}tr=null,zf=!1}catch(i){throw tr!==null&&(tr=tr.slice(t+1)),DS(qx,mi),i}finally{De=n,cp=!1}}return null}var Ha=[],Ua=0,zu=null,Bu=0,Wn=[],qn=0,Qi=null,rr=1,ir="";function Ei(t,n){Ha[Ua++]=Bu,Ha[Ua++]=zu,zu=t,Bu=n}function uk(t,n,s){Wn[qn++]=rr,Wn[qn++]=ir,Wn[qn++]=Qi,Qi=t;var r=rr;t=ir;var i=32-fs(r)-1;r&=~(1<<i),s+=1;var o=32-fs(n)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,rr=1<<32-fs(n)+i|s<<i|r,ir=o+t}else rr=1<<o|s<<i|r,ir=t}function ty(t){t.return!==null&&(Ei(t,1),uk(t,1,0))}function ny(t){for(;t===zu;)zu=Ha[--Ua],Ha[Ua]=null,Bu=Ha[--Ua],Ha[Ua]=null;for(;t===Qi;)Qi=Wn[--qn],Wn[qn]=null,ir=Wn[--qn],Wn[qn]=null,rr=Wn[--qn],Wn[qn]=null}var An=null,Tn=null,Be=!1,cs=null;function fk(t,n){var s=Gn(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=t,n=t.deletions,n===null?(t.deletions=[s],t.flags|=16):n.push(s)}function Tb(t,n){switch(t.tag){case 5:var s=t.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,An=t,Tn=Wr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,An=t,Tn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Qi!==null?{id:rr,overflow:ir}:null,t.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Gn(18,null,null,0),s.stateNode=n,s.return=t,t.child=s,An=t,Tn=null,!0):!1;default:return!1}}function Xm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jm(t){if(Be){var n=Tn;if(n){var s=n;if(!Tb(t,n)){if(Xm(t))throw Error(K(418));n=Wr(s.nextSibling);var r=An;n&&Tb(t,n)?fk(r,s):(t.flags=t.flags&-4097|2,Be=!1,An=t)}}else{if(Xm(t))throw Error(K(418));t.flags=t.flags&-4097|2,Be=!1,An=t}}}function Mb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function yd(t){if(t!==An)return!1;if(!Be)return Mb(t),Be=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!qm(t.type,t.memoizedProps)),n&&(n=Tn)){if(Xm(t))throw hk(),Error(K(418));for(;n;)fk(t,n),n=Wr(n.nextSibling)}if(Mb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(n===0){Tn=Wr(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}t=t.nextSibling}Tn=null}}else Tn=An?Wr(t.stateNode.nextSibling):null;return!0}function hk(){for(var t=Tn;t;)t=Wr(t.nextSibling)}function mo(){Tn=An=null,Be=!1}function sy(t){cs===null?cs=[t]:cs.push(t)}var _3=vr.ReactCurrentBatchConfig;function ol(t,n,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(K(309));var r=s.stateNode}if(!r)throw Error(K(147,t));var i=r,o=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===o?n.ref:(n=function(l){var c=i.refs;l===null?delete c[o]:c[o]=l},n._stringRef=o,n)}if(typeof t!="string")throw Error(K(284));if(!s._owner)throw Error(K(290,t))}return t}function vd(t,n){throw t=Object.prototype.toString.call(n),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Ab(t){var n=t._init;return n(t._payload)}function pk(t){function n(b,w){if(t){var j=b.deletions;j===null?(b.deletions=[w],b.flags|=16):j.push(w)}}function s(b,w){if(!t)return null;for(;w!==null;)n(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Yr(b,w),b.index=0,b.sibling=null,b}function o(b,w,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<w?(b.flags|=2,w):j):(b.flags|=2,w)):(b.flags|=1048576,w)}function l(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,j,N){return w===null||w.tag!==6?(w=gp(j,b.mode,N),w.return=b,w):(w=i(w,j),w.return=b,w)}function d(b,w,j,N){var S=j.type;return S===La?f(b,w,j.props.children,N,j.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tr&&Ab(S)===w.type)?(N=i(w,j.props),N.ref=ol(b,w,j),N.return=b,N):(N=cu(j.type,j.key,j.props,null,b.mode,N),N.ref=ol(b,w,j),N.return=b,N)}function u(b,w,j,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=xp(j,b.mode,N),w.return=b,w):(w=i(w,j.children||[]),w.return=b,w)}function f(b,w,j,N,S){return w===null||w.tag!==7?(w=Vi(j,b.mode,N,S),w.return=b,w):(w=i(w,j),w.return=b,w)}function h(b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gp(""+w,b.mode,j),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ld:return j=cu(w.type,w.key,w.props,null,b.mode,j),j.ref=ol(b,null,w),j.return=b,j;case Ia:return w=xp(w,b.mode,j),w.return=b,w;case Tr:var N=w._init;return h(b,N(w._payload),j)}if(bl(w)||nl(w))return w=Vi(w,b.mode,j,null),w.return=b,w;vd(b,w)}return null}function p(b,w,j,N){var S=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:c(b,w,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ld:return j.key===S?d(b,w,j,N):null;case Ia:return j.key===S?u(b,w,j,N):null;case Tr:return S=j._init,p(b,w,S(j._payload),N)}if(bl(j)||nl(j))return S!==null?null:f(b,w,j,N,null);vd(b,j)}return null}function m(b,w,j,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(j)||null,c(w,b,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ld:return b=b.get(N.key===null?j:N.key)||null,d(w,b,N,S);case Ia:return b=b.get(N.key===null?j:N.key)||null,u(w,b,N,S);case Tr:var _=N._init;return m(b,w,j,_(N._payload),S)}if(bl(N)||nl(N))return b=b.get(j)||null,f(w,b,N,S,null);vd(w,N)}return null}function x(b,w,j,N){for(var S=null,_=null,C=w,k=w=0,E=null;C!==null&&k<j.length;k++){C.index>k?(E=C,C=null):E=C.sibling;var M=p(b,C,j[k],N);if(M===null){C===null&&(C=E);break}t&&C&&M.alternate===null&&n(b,C),w=o(M,w,k),_===null?S=M:_.sibling=M,_=M,C=E}if(k===j.length)return s(b,C),Be&&Ei(b,k),S;if(C===null){for(;k<j.length;k++)C=h(b,j[k],N),C!==null&&(w=o(C,w,k),_===null?S=C:_.sibling=C,_=C);return Be&&Ei(b,k),S}for(C=r(b,C);k<j.length;k++)E=m(C,b,k,j[k],N),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?k:E.key),w=o(E,w,k),_===null?S=E:_.sibling=E,_=E);return t&&C.forEach(function(D){return n(b,D)}),Be&&Ei(b,k),S}function y(b,w,j,N){var S=nl(j);if(typeof S!="function")throw Error(K(150));if(j=S.call(j),j==null)throw Error(K(151));for(var _=S=null,C=w,k=w=0,E=null,M=j.next();C!==null&&!M.done;k++,M=j.next()){C.index>k?(E=C,C=null):E=C.sibling;var D=p(b,C,M.value,N);if(D===null){C===null&&(C=E);break}t&&C&&D.alternate===null&&n(b,C),w=o(D,w,k),_===null?S=D:_.sibling=D,_=D,C=E}if(M.done)return s(b,C),Be&&Ei(b,k),S;if(C===null){for(;!M.done;k++,M=j.next())M=h(b,M.value,N),M!==null&&(w=o(M,w,k),_===null?S=M:_.sibling=M,_=M);return Be&&Ei(b,k),S}for(C=r(b,C);!M.done;k++,M=j.next())M=m(C,b,k,M.value,N),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?k:M.key),w=o(M,w,k),_===null?S=M:_.sibling=M,_=M);return t&&C.forEach(function(R){return n(b,R)}),Be&&Ei(b,k),S}function v(b,w,j,N){if(typeof j=="object"&&j!==null&&j.type===La&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ld:e:{for(var S=j.key,_=w;_!==null;){if(_.key===S){if(S=j.type,S===La){if(_.tag===7){s(b,_.sibling),w=i(_,j.props.children),w.return=b,b=w;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Tr&&Ab(S)===_.type){s(b,_.sibling),w=i(_,j.props),w.ref=ol(b,_,j),w.return=b,b=w;break e}s(b,_);break}else n(b,_);_=_.sibling}j.type===La?(w=Vi(j.props.children,b.mode,N,j.key),w.return=b,b=w):(N=cu(j.type,j.key,j.props,null,b.mode,N),N.ref=ol(b,w,j),N.return=b,b=N)}return l(b);case Ia:e:{for(_=j.key;w!==null;){if(w.key===_)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){s(b,w.sibling),w=i(w,j.children||[]),w.return=b,b=w;break e}else{s(b,w);break}else n(b,w);w=w.sibling}w=xp(j,b.mode,N),w.return=b,b=w}return l(b);case Tr:return _=j._init,v(b,w,_(j._payload),N)}if(bl(j))return x(b,w,j,N);if(nl(j))return y(b,w,j,N);vd(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(s(b,w.sibling),w=i(w,j),w.return=b,b=w):(s(b,w),w=gp(j,b.mode,N),w.return=b,b=w),l(b)):s(b,w)}return v}var go=pk(!0),mk=pk(!1),Vu=pi(null),Hu=null,Wa=null,ry=null;function iy(){ry=Wa=Hu=null}function ay(t){var n=Vu.current;ze(Vu),t._currentValue=n}function Qm(t,n,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),t===s)break;t=t.return}}function ro(t,n){Hu=t,ry=Wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(hn=!0),t.firstContext=null)}function Qn(t){var n=t._currentValue;if(ry!==t)if(t={context:t,memoizedValue:n,next:null},Wa===null){if(Hu===null)throw Error(K(308));Wa=t,Hu.dependencies={lanes:0,firstContext:t}}else Wa=Wa.next=t;return n}var Oi=null;function oy(t){Oi===null?Oi=[t]:Oi.push(t)}function gk(t,n,s,r){var i=n.interleaved;return i===null?(s.next=s,oy(n)):(s.next=i.next,i.next=s),n.interleaved=s,dr(t,r)}function dr(t,n){t.lanes|=n;var s=t.alternate;for(s!==null&&(s.lanes|=n),s=t,t=t.return;t!==null;)t.childLanes|=n,s=t.alternate,s!==null&&(s.childLanes|=n),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Mr=!1;function ly(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function qr(t,n,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var i=r.pending;return i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n,dr(t,s)}return i=r.interleaved,i===null?(n.next=n,oy(r)):(n.next=i.next,i.next=n),r.interleaved=n,dr(t,s)}function su(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var r=n.lanes;r&=t.pendingLanes,s|=r,n.lanes=s,Kx(t,s)}}function Pb(t,n){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?i=o=l:o=o.next=l,s=s.next}while(s!==null);o===null?i=o=n:o=o.next=n}else i=o=n;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}function Uu(t,n,s,r){var i=t.updateQueue;Mr=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,u=d.next;d.next=null,l===null?o=u:l.next=u,l=d;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==l&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(o!==null){var h=i.baseState;l=0,f=u=d=null,c=o;do{var p=c.lane,m=c.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=t,y=c;switch(p=n,m=s,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(m,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(m,h,p):x,p==null)break e;h=Ye({},h,p);break e;case 2:Mr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else m={eventTime:m,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=m,d=h):f=f.next=m,l|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(d=h),i.baseState=d,i.firstBaseUpdate=u,i.lastBaseUpdate=f,n=i.shared.interleaved,n!==null){i=n;do l|=i.lane,i=i.next;while(i!==n)}else o===null&&(i.shared.lanes=0);ea|=l,t.lanes=l,t.memoizedState=h}}function Rb(t,n,s){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var r=t[n],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var Fc={},Is=pi(Fc),ac=pi(Fc),oc=pi(Fc);function Di(t){if(t===Fc)throw Error(K(174));return t}function cy(t,n){switch(Ie(oc,n),Ie(ac,t),Ie(Is,Fc),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Pm(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Pm(n,t)}ze(Is),Ie(Is,n)}function xo(){ze(Is),ze(ac),ze(oc)}function yk(t){Di(oc.current);var n=Di(Is.current),s=Pm(n,t.type);n!==s&&(Ie(ac,t),Ie(Is,s))}function dy(t){ac.current===t&&(ze(Is),ze(ac))}var We=pi(0);function Wu(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var dp=[];function uy(){for(var t=0;t<dp.length;t++)dp[t]._workInProgressVersionPrimary=null;dp.length=0}var ru=vr.ReactCurrentDispatcher,up=vr.ReactCurrentBatchConfig,Zi=0,Ke=null,gt=null,St=null,qu=!1,Ol=!1,lc=0,E3=0;function Ft(){throw Error(K(321))}function fy(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!ps(t[s],n[s]))return!1;return!0}function hy(t,n,s,r,i,o){if(Zi=o,Ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ru.current=t===null||t.memoizedState===null?P3:R3,t=s(r,i),Ol){o=0;do{if(Ol=!1,lc=0,25<=o)throw Error(K(301));o+=1,St=gt=null,n.updateQueue=null,ru.current=O3,t=s(r,i)}while(Ol)}if(ru.current=Ku,n=gt!==null&&gt.next!==null,Zi=0,St=gt=Ke=null,qu=!1,n)throw Error(K(300));return t}function py(){var t=lc!==0;return lc=0,t}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ke.memoizedState=St=t:St=St.next=t,St}function Zn(){if(gt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var n=St===null?Ke.memoizedState:St.next;if(n!==null)St=n,gt=t;else{if(t===null)throw Error(K(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},St===null?Ke.memoizedState=St=t:St=St.next=t}return St}function cc(t,n){return typeof n=="function"?n(t):n}function fp(t){var n=Zn(),s=n.queue;if(s===null)throw Error(K(311));s.lastRenderedReducer=t;var r=gt,i=r.baseQueue,o=s.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,s.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=l=null,d=null,u=o;do{var f=u.lane;if((Zi&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=h,l=r):d=d.next=h,Ke.lanes|=f,ea|=f}u=u.next}while(u!==null&&u!==o);d===null?l=r:d.next=c,ps(r,n.memoizedState)||(hn=!0),n.memoizedState=r,n.baseState=l,n.baseQueue=d,s.lastRenderedState=r}if(t=s.interleaved,t!==null){i=t;do o=i.lane,Ke.lanes|=o,ea|=o,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function hp(t){var n=Zn(),s=n.queue;if(s===null)throw Error(K(311));s.lastRenderedReducer=t;var r=s.dispatch,i=s.pending,o=n.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);ps(o,n.memoizedState)||(hn=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),s.lastRenderedState=o}return[o,r]}function vk(){}function bk(t,n){var s=Ke,r=Zn(),i=n(),o=!ps(r.memoizedState,i);if(o&&(r.memoizedState=i,hn=!0),r=r.queue,my(Nk.bind(null,s,r,t),[t]),r.getSnapshot!==n||o||St!==null&&St.memoizedState.tag&1){if(s.flags|=2048,dc(9,jk.bind(null,s,r,i,n),void 0,null),kt===null)throw Error(K(349));Zi&30||wk(s,n,i)}return i}function wk(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Ke.updateQueue,n===null?(n={lastEffect:null,stores:null},Ke.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function jk(t,n,s,r){n.value=s,n.getSnapshot=r,Sk(n)&&kk(t)}function Nk(t,n,s){return s(function(){Sk(n)&&kk(t)})}function Sk(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!ps(t,s)}catch{return!0}}function kk(t){var n=dr(t,1);n!==null&&hs(n,t,1,-1)}function Ob(t){var n=Ms();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:t},n.queue=t,t=t.dispatch=A3.bind(null,Ke,t),[n.memoizedState,t]}function dc(t,n,s,r){return t={tag:t,create:n,destroy:s,deps:r,next:null},n=Ke.updateQueue,n===null?(n={lastEffect:null,stores:null},Ke.updateQueue=n,n.lastEffect=t.next=t):(s=n.lastEffect,s===null?n.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,n.lastEffect=t)),t}function Ck(){return Zn().memoizedState}function iu(t,n,s,r){var i=Ms();Ke.flags|=t,i.memoizedState=dc(1|n,s,void 0,r===void 0?null:r)}function Bf(t,n,s,r){var i=Zn();r=r===void 0?null:r;var o=void 0;if(gt!==null){var l=gt.memoizedState;if(o=l.destroy,r!==null&&fy(r,l.deps)){i.memoizedState=dc(n,s,o,r);return}}Ke.flags|=t,i.memoizedState=dc(1|n,s,o,r)}function Db(t,n){return iu(8390656,8,t,n)}function my(t,n){return Bf(2048,8,t,n)}function _k(t,n){return Bf(4,2,t,n)}function Ek(t,n){return Bf(4,4,t,n)}function Tk(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Mk(t,n,s){return s=s!=null?s.concat([t]):null,Bf(4,4,Tk.bind(null,n,t),s)}function gy(){}function Ak(t,n){var s=Zn();n=n===void 0?null:n;var r=s.memoizedState;return r!==null&&n!==null&&fy(n,r[1])?r[0]:(s.memoizedState=[t,n],t)}function Pk(t,n){var s=Zn();n=n===void 0?null:n;var r=s.memoizedState;return r!==null&&n!==null&&fy(n,r[1])?r[0]:(t=t(),s.memoizedState=[t,n],t)}function Rk(t,n,s){return Zi&21?(ps(s,n)||(s=$S(),Ke.lanes|=s,ea|=s,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=s)}function T3(t,n){var s=De;De=s!==0&&4>s?s:4,t(!0);var r=up.transition;up.transition={};try{t(!1),n()}finally{De=s,up.transition=r}}function Ok(){return Zn().memoizedState}function M3(t,n,s){var r=Gr(t);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Dk(t))Ik(n,s);else if(s=gk(t,n,s,r),s!==null){var i=rn();hs(s,t,r,i),Lk(s,n,r)}}function A3(t,n,s){var r=Gr(t),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Dk(t))Ik(n,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var l=n.lastRenderedState,c=o(l,s);if(i.hasEagerState=!0,i.eagerState=c,ps(c,l)){var d=n.interleaved;d===null?(i.next=i,oy(n)):(i.next=d.next,d.next=i),n.interleaved=i;return}}catch{}finally{}s=gk(t,n,i,r),s!==null&&(i=rn(),hs(s,t,r,i),Lk(s,n,r))}}function Dk(t){var n=t.alternate;return t===Ke||n!==null&&n===Ke}function Ik(t,n){Ol=qu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Lk(t,n,s){if(s&4194240){var r=n.lanes;r&=t.pendingLanes,s|=r,n.lanes=s,Kx(t,s)}}var Ku={readContext:Qn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},P3={readContext:Qn,useCallback:function(t,n){return Ms().memoizedState=[t,n===void 0?null:n],t},useContext:Qn,useEffect:Db,useImperativeHandle:function(t,n,s){return s=s!=null?s.concat([t]):null,iu(4194308,4,Tk.bind(null,n,t),s)},useLayoutEffect:function(t,n){return iu(4194308,4,t,n)},useInsertionEffect:function(t,n){return iu(4,2,t,n)},useMemo:function(t,n){var s=Ms();return n=n===void 0?null:n,t=t(),s.memoizedState=[t,n],t},useReducer:function(t,n,s){var r=Ms();return n=s!==void 0?s(n):n,r.memoizedState=r.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},r.queue=t,t=t.dispatch=M3.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var n=Ms();return t={current:t},n.memoizedState=t},useState:Ob,useDebugValue:gy,useDeferredValue:function(t){return Ms().memoizedState=t},useTransition:function(){var t=Ob(!1),n=t[0];return t=T3.bind(null,t[1]),Ms().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,s){var r=Ke,i=Ms();if(Be){if(s===void 0)throw Error(K(407));s=s()}else{if(s=n(),kt===null)throw Error(K(349));Zi&30||wk(r,n,s)}i.memoizedState=s;var o={value:s,getSnapshot:n};return i.queue=o,Db(Nk.bind(null,r,o,t),[t]),r.flags|=2048,dc(9,jk.bind(null,r,o,s,n),void 0,null),s},useId:function(){var t=Ms(),n=kt.identifierPrefix;if(Be){var s=ir,r=rr;s=(r&~(1<<32-fs(r)-1)).toString(32)+s,n=":"+n+"R"+s,s=lc++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=E3++,n=":"+n+"r"+s.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},R3={readContext:Qn,useCallback:Ak,useContext:Qn,useEffect:my,useImperativeHandle:Mk,useInsertionEffect:_k,useLayoutEffect:Ek,useMemo:Pk,useReducer:fp,useRef:Ck,useState:function(){return fp(cc)},useDebugValue:gy,useDeferredValue:function(t){var n=Zn();return Rk(n,gt.memoizedState,t)},useTransition:function(){var t=fp(cc)[0],n=Zn().memoizedState;return[t,n]},useMutableSource:vk,useSyncExternalStore:bk,useId:Ok,unstable_isNewReconciler:!1},O3={readContext:Qn,useCallback:Ak,useContext:Qn,useEffect:my,useImperativeHandle:Mk,useInsertionEffect:_k,useLayoutEffect:Ek,useMemo:Pk,useReducer:hp,useRef:Ck,useState:function(){return hp(cc)},useDebugValue:gy,useDeferredValue:function(t){var n=Zn();return gt===null?n.memoizedState=t:Rk(n,gt.memoizedState,t)},useTransition:function(){var t=hp(cc)[0],n=Zn().memoizedState;return[t,n]},useMutableSource:vk,useSyncExternalStore:bk,useId:Ok,unstable_isNewReconciler:!1};function as(t,n){if(t&&t.defaultProps){n=Ye({},n),t=t.defaultProps;for(var s in t)n[s]===void 0&&(n[s]=t[s]);return n}return n}function Zm(t,n,s,r){n=t.memoizedState,s=s(r,n),s=s==null?n:Ye({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Vf={isMounted:function(t){return(t=t._reactInternals)?pa(t)===t:!1},enqueueSetState:function(t,n,s){t=t._reactInternals;var r=rn(),i=Gr(t),o=ar(r,i);o.payload=n,s!=null&&(o.callback=s),n=qr(t,o,i),n!==null&&(hs(n,t,i,r),su(n,t,i))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var r=rn(),i=Gr(t),o=ar(r,i);o.tag=1,o.payload=n,s!=null&&(o.callback=s),n=qr(t,o,i),n!==null&&(hs(n,t,i,r),su(n,t,i))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=rn(),r=Gr(t),i=ar(s,r);i.tag=2,n!=null&&(i.callback=n),n=qr(t,i,r),n!==null&&(hs(n,t,r,s),su(n,t,r))}};function Ib(t,n,s,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):n.prototype&&n.prototype.isPureReactComponent?!nc(s,r)||!nc(i,o):!0}function $k(t,n,s){var r=!1,i=ni,o=n.contextType;return typeof o=="object"&&o!==null?o=Qn(o):(i=gn(n)?Ji:Yt.current,r=n.contextTypes,o=(r=r!=null)?po(t,i):ni),n=new n(s,o),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Vf,t.stateNode=n,n._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),n}function Lb(t,n,s,r){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,r),n.state!==t&&Vf.enqueueReplaceState(n,n.state,null)}function eg(t,n,s,r){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},ly(t);var o=n.contextType;typeof o=="object"&&o!==null?i.context=Qn(o):(o=gn(n)?Ji:Yt.current,i.context=po(t,o)),i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Zm(t,n,o,s),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(n=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),n!==i.state&&Vf.enqueueReplaceState(i,i.state,null),Uu(t,s,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,n){try{var s="",r=n;do s+=lO(r),r=r.return;while(r);var i=s}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:n,stack:i,digest:null}}function pp(t,n,s){return{value:t,source:null,stack:s??null,digest:n??null}}function tg(t,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var D3=typeof WeakMap=="function"?WeakMap:Map;function Fk(t,n,s){s=ar(-1,s),s.tag=3,s.payload={element:null};var r=n.value;return s.callback=function(){Yu||(Yu=!0,ug=r),tg(t,n)},s}function zk(t,n,s){s=ar(-1,s),s.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=n.value;s.payload=function(){return r(i)},s.callback=function(){tg(t,n)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){tg(t,n),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),s}function $b(t,n,s){var r=t.pingCache;if(r===null){r=t.pingCache=new D3;var i=new Set;r.set(n,i)}else i=r.get(n),i===void 0&&(i=new Set,r.set(n,i));i.has(s)||(i.add(s),t=Y3.bind(null,t,n,s),n.then(t,t))}function Fb(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function zb(t,n,s,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===n?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=ar(-1,1),n.tag=2,qr(s,n,1))),s.lanes|=1),t)}var I3=vr.ReactCurrentOwner,hn=!1;function tn(t,n,s,r){n.child=t===null?mk(n,null,s,r):go(n,t.child,s,r)}function Bb(t,n,s,r,i){s=s.render;var o=n.ref;return ro(n,i),r=hy(t,n,s,r,o,i),s=py(),t!==null&&!hn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,ur(t,n,i)):(Be&&s&&ty(n),n.flags|=1,tn(t,n,r,i),n.child)}function Vb(t,n,s,r,i){if(t===null){var o=s.type;return typeof o=="function"&&!Sy(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=o,Bk(t,n,o,r,i)):(t=cu(s.type,null,r,n,n.mode,i),t.ref=n.ref,t.return=n,n.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(s=s.compare,s=s!==null?s:nc,s(l,r)&&t.ref===n.ref)return ur(t,n,i)}return n.flags|=1,t=Yr(o,r),t.ref=n.ref,t.return=n,n.child=t}function Bk(t,n,s,r,i){if(t!==null){var o=t.memoizedProps;if(nc(o,r)&&t.ref===n.ref)if(hn=!1,n.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(hn=!0);else return n.lanes=t.lanes,ur(t,n,i)}return ng(t,n,s,r,i)}function Vk(t,n,s){var r=n.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ka,kn),kn|=s;else{if(!(s&1073741824))return t=o!==null?o.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Ie(Ka,kn),kn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:s,Ie(Ka,kn),kn|=r}else o!==null?(r=o.baseLanes|s,n.memoizedState=null):r=s,Ie(Ka,kn),kn|=r;return tn(t,n,i,s),n.child}function Hk(t,n){var s=n.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ng(t,n,s,r,i){var o=gn(s)?Ji:Yt.current;return o=po(n,o),ro(n,i),s=hy(t,n,s,r,o,i),r=py(),t!==null&&!hn?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,ur(t,n,i)):(Be&&r&&ty(n),n.flags|=1,tn(t,n,s,i),n.child)}function Hb(t,n,s,r,i){if(gn(s)){var o=!0;Fu(n)}else o=!1;if(ro(n,i),n.stateNode===null)au(t,n),$k(n,s,r),eg(n,s,r,i),r=!0;else if(t===null){var l=n.stateNode,c=n.memoizedProps;l.props=c;var d=l.context,u=s.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=gn(s)?Ji:Yt.current,u=po(n,u));var f=s.getDerivedStateFromProps,h=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==u)&&Lb(n,l,r,u),Mr=!1;var p=n.memoizedState;l.state=p,Uu(n,r,l,i),d=n.memoizedState,c!==r||p!==d||mn.current||Mr?(typeof f=="function"&&(Zm(n,s,f,r),d=n.memoizedState),(c=Mr||Ib(n,s,c,r,p,d,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=d),l.props=r,l.state=d,l.context=u,r=c):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{l=n.stateNode,xk(t,n),c=n.memoizedProps,u=n.type===n.elementType?c:as(n.type,c),l.props=u,h=n.pendingProps,p=l.context,d=s.contextType,typeof d=="object"&&d!==null?d=Qn(d):(d=gn(s)?Ji:Yt.current,d=po(n,d));var m=s.getDerivedStateFromProps;(f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||p!==d)&&Lb(n,l,r,d),Mr=!1,p=n.memoizedState,l.state=p,Uu(n,r,l,i);var x=n.memoizedState;c!==h||p!==x||mn.current||Mr?(typeof m=="function"&&(Zm(n,s,m,r),x=n.memoizedState),(u=Mr||Ib(n,s,u,r,p,x,d)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,x,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,x,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=x),l.props=r,l.state=x,l.context=d,r=u):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(n.flags|=1024),r=!1)}return sg(t,n,s,r,o,i)}function sg(t,n,s,r,i,o){Hk(t,n);var l=(n.flags&128)!==0;if(!r&&!l)return i&&Eb(n,s,!1),ur(t,n,o);r=n.stateNode,I3.current=n;var c=l&&typeof s.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,t!==null&&l?(n.child=go(n,t.child,null,o),n.child=go(n,null,c,o)):tn(t,n,c,o),n.memoizedState=r.state,i&&Eb(n,s,!0),n.child}function Uk(t){var n=t.stateNode;n.pendingContext?_b(t,n.pendingContext,n.pendingContext!==n.context):n.context&&_b(t,n.context,!1),cy(t,n.containerInfo)}function Ub(t,n,s,r,i){return mo(),sy(i),n.flags|=256,tn(t,n,s,r),n.child}var rg={dehydrated:null,treeContext:null,retryLane:0};function ig(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wk(t,n,s){var r=n.pendingProps,i=We.current,o=!1,l=(n.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(We,i&1),t===null)return Jm(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=r.children,t=r.fallback,o?(r=n.mode,o=n.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Wf(l,r,0,null),t=Vi(t,r,s,null),o.return=n,t.return=n,o.sibling=t,n.child=o,n.child.memoizedState=ig(s),n.memoizedState=rg,t):xy(n,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return L3(t,n,l,r,c,i,s);if(o){o=r.fallback,l=n.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&n.child!==i?(r=n.child,r.childLanes=0,r.pendingProps=d,n.deletions=null):(r=Yr(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Yr(c,o):(o=Vi(o,l,s,null),o.flags|=2),o.return=n,r.return=n,r.sibling=o,n.child=r,r=o,o=n.child,l=t.child.memoizedState,l=l===null?ig(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~s,n.memoizedState=rg,r}return o=t.child,t=o.sibling,r=Yr(o,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=s),r.return=n,r.sibling=null,t!==null&&(s=n.deletions,s===null?(n.deletions=[t],n.flags|=16):s.push(t)),n.child=r,n.memoizedState=null,r}function xy(t,n){return n=Wf({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function bd(t,n,s,r){return r!==null&&sy(r),go(n,t.child,null,s),t=xy(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function L3(t,n,s,r,i,o,l){if(s)return n.flags&256?(n.flags&=-257,r=pp(Error(K(422))),bd(t,n,l,r)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(o=r.fallback,i=n.mode,r=Wf({mode:"visible",children:r.children},i,0,null),o=Vi(o,i,l,null),o.flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,n.mode&1&&go(n,t.child,null,l),n.child.memoizedState=ig(l),n.memoizedState=rg,o);if(!(n.mode&1))return bd(t,n,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(K(419)),r=pp(o,r,void 0),bd(t,n,l,r)}if(c=(l&t.childLanes)!==0,hn||c){if(r=kt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,dr(t,i),hs(r,t,i,-1))}return Ny(),r=pp(Error(K(421))),bd(t,n,l,r)}return i.data==="$?"?(n.flags|=128,n.child=t.child,n=X3.bind(null,t),i._reactRetry=n,null):(t=o.treeContext,Tn=Wr(i.nextSibling),An=n,Be=!0,cs=null,t!==null&&(Wn[qn++]=rr,Wn[qn++]=ir,Wn[qn++]=Qi,rr=t.id,ir=t.overflow,Qi=n),n=xy(n,r.children),n.flags|=4096,n)}function Wb(t,n,s){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n),Qm(t.return,n,s)}function mp(t,n,s,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=s,o.tailMode=i)}function qk(t,n,s){var r=n.pendingProps,i=r.revealOrder,o=r.tail;if(tn(t,n,r.children,s),r=We.current,r&2)r=r&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wb(t,s,n);else if(t.tag===19)Wb(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(We,r),!(n.mode&1))n.memoizedState=null;else switch(i){case"forwards":for(s=n.child,i=null;s!==null;)t=s.alternate,t!==null&&Wu(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=n.child,n.child=null):(i=s.sibling,s.sibling=null),mp(n,!1,i,s,o);break;case"backwards":for(s=null,i=n.child,n.child=null;i!==null;){if(t=i.alternate,t!==null&&Wu(t)===null){n.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}mp(n,!0,s,null,o);break;case"together":mp(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function au(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ur(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),ea|=n.lanes,!(s&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(K(153));if(n.child!==null){for(t=n.child,s=Yr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Yr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function $3(t,n,s){switch(n.tag){case 3:Uk(n),mo();break;case 5:yk(n);break;case 1:gn(n.type)&&Fu(n);break;case 4:cy(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;Ie(Vu,r._currentValue),r._currentValue=i;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(Ie(We,We.current&1),n.flags|=128,null):s&n.child.childLanes?Wk(t,n,s):(Ie(We,We.current&1),t=ur(t,n,s),t!==null?t.sibling:null);Ie(We,We.current&1);break;case 19:if(r=(s&n.childLanes)!==0,t.flags&128){if(r)return qk(t,n,s);n.flags|=128}if(i=n.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(We,We.current),r)break;return null;case 22:case 23:return n.lanes=0,Vk(t,n,s)}return ur(t,n,s)}var Kk,ag,Gk,Yk;Kk=function(t,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ag=function(){};Gk=function(t,n,s,r){var i=t.memoizedProps;if(i!==r){t=n.stateNode,Di(Is.current);var o=null;switch(s){case"input":i=Em(t,i),r=Em(t,r),o=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),o=[];break;case"textarea":i=Am(t,i),r=Am(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lu)}Rm(s,r);var l;s=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var c=i[u];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yl.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var d=r[u];if(c=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(s||(s={}),s[l]=d[l])}else s||(o||(o=[]),o.push(u,s)),s=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yl.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Fe("scroll",t),o||c===d||(o=[])):(o=o||[]).push(u,d))}s&&(o=o||[]).push("style",s);var u=o;(n.updateQueue=u)&&(n.flags|=4)}};Yk=function(t,n,s,r){s!==r&&(n.flags|=4)};function ll(t,n){if(!Be)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zt(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(n)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=s,n}function F3(t,n,s){var r=n.pendingProps;switch(ny(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(n),null;case 1:return gn(n.type)&&$u(),zt(n),null;case 3:return r=n.stateNode,xo(),ze(mn),ze(Yt),uy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yd(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,cs!==null&&(pg(cs),cs=null))),ag(t,n),zt(n),null;case 5:dy(n);var i=Di(oc.current);if(s=n.type,t!==null&&n.stateNode!=null)Gk(t,n,s,r,i),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(K(166));return zt(n),null}if(t=Di(Is.current),yd(n)){r=n.stateNode,s=n.type;var o=n.memoizedProps;switch(r[Ps]=n,r[ic]=o,t=(n.mode&1)!==0,s){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<jl.length;i++)Fe(jl[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":eb(r,o),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",r);break;case"textarea":nb(r,o),Fe("invalid",r)}Rm(s,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&xd(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&xd(r.textContent,c,t),i=["children",""+c]):Yl.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Fe("scroll",r)}switch(s){case"input":cd(r),tb(r,o,!0);break;case"textarea":cd(r),sb(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Lu)}r=i,n.updateQueue=r,r!==null&&(n.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NS(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(s,{is:r.is}):(t=l.createElement(s),s==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,s),t[Ps]=n,t[ic]=r,Kk(t,n,!1,!1),n.stateNode=t;e:{switch(l=Om(s,r),s){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<jl.length;i++)Fe(jl[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":eb(t,r),i=Em(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":nb(t,r),i=Am(t,r),Fe("invalid",t);break;default:i=r}Rm(s,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?CS(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&SS(t,d)):o==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&Xl(t,d):typeof d=="number"&&Xl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Fe("scroll",t):d!=null&&Bx(t,o,d,l))}switch(s){case"input":cd(t),tb(t,r,!1);break;case"textarea":cd(t),sb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ti(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?eo(t,!!r.multiple,o,!1):r.defaultValue!=null&&eo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Lu)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return zt(n),null;case 6:if(t&&n.stateNode!=null)Yk(t,n,t.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(K(166));if(s=Di(oc.current),Di(Is.current),yd(n)){if(r=n.stateNode,s=n.memoizedProps,r[Ps]=n,(o=r.nodeValue!==s)&&(t=An,t!==null))switch(t.tag){case 3:xd(r.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xd(r.nodeValue,s,(t.mode&1)!==0)}o&&(n.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Ps]=n,n.stateNode=r}return zt(n),null;case 13:if(ze(We),r=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Tn!==null&&n.mode&1&&!(n.flags&128))hk(),mo(),n.flags|=98560,o=!1;else if(o=yd(n),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=n.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[Ps]=n}else mo(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;zt(n),o=!1}else cs!==null&&(pg(cs),cs=null),o=!0;if(!o)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(t===null||We.current&1?yt===0&&(yt=3):Ny())),n.updateQueue!==null&&(n.flags|=4),zt(n),null);case 4:return xo(),ag(t,n),t===null&&sc(n.stateNode.containerInfo),zt(n),null;case 10:return ay(n.type._context),zt(n),null;case 17:return gn(n.type)&&$u(),zt(n),null;case 19:if(ze(We),o=n.memoizedState,o===null)return zt(n),null;if(r=(n.flags&128)!==0,l=o.rendering,l===null)if(r)ll(o,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=Wu(t),l!==null){for(n.flags|=128,ll(o,!1),r=l.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=s,s=n.child;s!==null;)o=s,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ie(We,We.current&1|2),n.child}t=t.sibling}o.tail!==null&&it()>vo&&(n.flags|=128,r=!0,ll(o,!1),n.lanes=4194304)}else{if(!r)if(t=Wu(l),t!==null){if(n.flags|=128,r=!0,s=t.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ll(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Be)return zt(n),null}else 2*it()-o.renderingStartTime>vo&&s!==1073741824&&(n.flags|=128,r=!0,ll(o,!1),n.lanes=4194304);o.isBackwards?(l.sibling=n.child,n.child=l):(s=o.last,s!==null?s.sibling=l:n.child=l,o.last=l)}return o.tail!==null?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=it(),n.sibling=null,s=We.current,Ie(We,r?s&1|2:s&1),n):(zt(n),null);case 22:case 23:return jy(),r=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?kn&1073741824&&(zt(n),n.subtreeFlags&6&&(n.flags|=8192)):zt(n),null;case 24:return null;case 25:return null}throw Error(K(156,n.tag))}function z3(t,n){switch(ny(n),n.tag){case 1:return gn(n.type)&&$u(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return xo(),ze(mn),ze(Yt),uy(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return dy(n),null;case 13:if(ze(We),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(K(340));mo()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ze(We),null;case 4:return xo(),null;case 10:return ay(n.type._context),null;case 22:case 23:return jy(),null;case 24:return null;default:return null}}var wd=!1,Bt=!1,B3=typeof WeakSet=="function"?WeakSet:Set,ne=null;function qa(t,n){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Je(t,n,r)}else s.current=null}function og(t,n,s){try{s()}catch(r){Je(t,n,r)}}var qb=!1;function V3(t,n){if(Um=Ou,t=ek(),ey(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break e}var l=0,c=-1,d=-1,u=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==s||i!==0&&h.nodeType!==3||(c=l+i),h!==o||r!==0&&h.nodeType!==3||(d=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===s&&++u===i&&(c=l),p===o&&++f===r&&(d=l),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Wm={focusedElem:t,selectionRange:s},Ou=!1,ne=n;ne!==null;)if(n=ne,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ne=t;else for(;ne!==null;){n=ne;try{var x=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,v=x.memoizedState,b=n.stateNode,w=b.getSnapshotBeforeUpdate(n.elementType===n.type?y:as(n.type,y),v);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=n.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){Je(n,n.return,N)}if(t=n.sibling,t!==null){t.return=n.return,ne=t;break}ne=n.return}return x=qb,qb=!1,x}function Dl(t,n,s){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&og(n,s,o)}i=i.next}while(i!==r)}}function Hf(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var r=s.create;s.destroy=r()}s=s.next}while(s!==n)}}function lg(t){var n=t.ref;if(n!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof n=="function"?n(t):n.current=t}}function Xk(t){var n=t.alternate;n!==null&&(t.alternate=null,Xk(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Ps],delete n[ic],delete n[Gm],delete n[S3],delete n[k3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jk(t){return t.tag===5||t.tag===3||t.tag===4}function Kb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cg(t,n,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(t,n):s.insertBefore(t,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(t,s)):(n=s,n.appendChild(t)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Lu));else if(r!==4&&(t=t.child,t!==null))for(cg(t,n,s),t=t.sibling;t!==null;)cg(t,n,s),t=t.sibling}function dg(t,n,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dg(t,n,s),t=t.sibling;t!==null;)dg(t,n,s),t=t.sibling}var Tt=null,ls=!1;function Nr(t,n,s){for(s=s.child;s!==null;)Qk(t,n,s),s=s.sibling}function Qk(t,n,s){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Df,s)}catch{}switch(s.tag){case 5:Bt||qa(s,n);case 6:var r=Tt,i=ls;Tt=null,Nr(t,n,s),Tt=r,ls=i,Tt!==null&&(ls?(t=Tt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Tt.removeChild(s.stateNode));break;case 18:Tt!==null&&(ls?(t=Tt,s=s.stateNode,t.nodeType===8?lp(t.parentNode,s):t.nodeType===1&&lp(t,s),ec(t)):lp(Tt,s.stateNode));break;case 4:r=Tt,i=ls,Tt=s.stateNode.containerInfo,ls=!0,Nr(t,n,s),Tt=r,ls=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&og(s,n,l),i=i.next}while(i!==r)}Nr(t,n,s);break;case 1:if(!Bt&&(qa(s,n),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){Je(s,n,c)}Nr(t,n,s);break;case 21:Nr(t,n,s);break;case 22:s.mode&1?(Bt=(r=Bt)||s.memoizedState!==null,Nr(t,n,s),Bt=r):Nr(t,n,s);break;default:Nr(t,n,s)}}function Gb(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new B3),n.forEach(function(r){var i=J3.bind(null,t,r);s.has(r)||(s.add(r),r.then(i,i))})}}function ss(t,n){var s=n.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var o=t,l=n,c=l;e:for(;c!==null;){switch(c.tag){case 5:Tt=c.stateNode,ls=!1;break e;case 3:Tt=c.stateNode.containerInfo,ls=!0;break e;case 4:Tt=c.stateNode.containerInfo,ls=!0;break e}c=c.return}if(Tt===null)throw Error(K(160));Qk(o,l,i),Tt=null,ls=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(u){Je(i,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Zk(n,t),n=n.sibling}function Zk(t,n){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ss(n,t),_s(t),r&4){try{Dl(3,t,t.return),Hf(3,t)}catch(y){Je(t,t.return,y)}try{Dl(5,t,t.return)}catch(y){Je(t,t.return,y)}}break;case 1:ss(n,t),_s(t),r&512&&s!==null&&qa(s,s.return);break;case 5:if(ss(n,t),_s(t),r&512&&s!==null&&qa(s,s.return),t.flags&32){var i=t.stateNode;try{Xl(i,"")}catch(y){Je(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=s!==null?s.memoizedProps:o,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&wS(i,o),Om(c,l);var u=Om(c,o);for(l=0;l<d.length;l+=2){var f=d[l],h=d[l+1];f==="style"?CS(i,h):f==="dangerouslySetInnerHTML"?SS(i,h):f==="children"?Xl(i,h):Bx(i,f,h,u)}switch(c){case"input":Tm(i,o);break;case"textarea":jS(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?eo(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?eo(i,!!o.multiple,o.defaultValue,!0):eo(i,!!o.multiple,o.multiple?[]:"",!1))}i[ic]=o}catch(y){Je(t,t.return,y)}}break;case 6:if(ss(n,t),_s(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){Je(t,t.return,y)}}break;case 3:if(ss(n,t),_s(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{ec(n.containerInfo)}catch(y){Je(t,t.return,y)}break;case 4:ss(n,t),_s(t);break;case 13:ss(n,t),_s(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(by=it())),r&4&&Gb(t);break;case 22:if(f=s!==null&&s.memoizedState!==null,t.mode&1?(Bt=(u=Bt)||f,ss(n,t),Bt=u):ss(n,t),_s(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ne=t,f=t.child;f!==null;){for(h=ne=f;ne!==null;){switch(p=ne,m=p.child,p.tag){case 0:case 11:case 14:case 15:Dl(4,p,p.return);break;case 1:qa(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,s=p.return;try{n=r,x.props=n.memoizedProps,x.state=n.memoizedState,x.componentWillUnmount()}catch(y){Je(r,s,y)}}break;case 5:qa(p,p.return);break;case 22:if(p.memoizedState!==null){Xb(h);continue}}m!==null?(m.return=p,ne=m):Xb(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=h.stateNode,d=h.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=kS("display",l))}catch(y){Je(t,t.return,y)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Je(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ss(n,t),_s(t),r&4&&Gb(t);break;case 21:break;default:ss(n,t),_s(t)}}function _s(t){var n=t.flags;if(n&2){try{e:{for(var s=t.return;s!==null;){if(Jk(s)){var r=s;break e}s=s.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xl(i,""),r.flags&=-33);var o=Kb(t);dg(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=Kb(t);cg(t,c,l);break;default:throw Error(K(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function H3(t,n,s){ne=t,eC(t)}function eC(t,n,s){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||wd;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Bt;c=wd;var u=Bt;if(wd=l,(Bt=d)&&!u)for(ne=i;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?Jb(i):d!==null?(d.return=l,ne=d):Jb(i);for(;o!==null;)ne=o,eC(o),o=o.sibling;ne=i,wd=c,Bt=u}Yb(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ne=o):Yb(t)}}function Yb(t){for(;ne!==null;){var n=ne;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Bt||Hf(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!Bt)if(s===null)r.componentDidMount();else{var i=n.elementType===n.type?s.memoizedProps:as(n.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;o!==null&&Rb(n,o,r);break;case 3:var l=n.updateQueue;if(l!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Rb(n,l,s)}break;case 5:var c=n.stateNode;if(s===null&&n.flags&4){s=c;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Bt||n.flags&512&&lg(n)}catch(p){Je(n,n.return,p)}}if(n===t){ne=null;break}if(s=n.sibling,s!==null){s.return=n.return,ne=s;break}ne=n.return}}function Xb(t){for(;ne!==null;){var n=ne;if(n===t){ne=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ne=s;break}ne=n.return}}function Jb(t){for(;ne!==null;){var n=ne;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Hf(4,n)}catch(d){Je(n,s,d)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var i=n.return;try{r.componentDidMount()}catch(d){Je(n,i,d)}}var o=n.return;try{lg(n)}catch(d){Je(n,o,d)}break;case 5:var l=n.return;try{lg(n)}catch(d){Je(n,l,d)}}}catch(d){Je(n,n.return,d)}if(n===t){ne=null;break}var c=n.sibling;if(c!==null){c.return=n.return,ne=c;break}ne=n.return}}var U3=Math.ceil,Gu=vr.ReactCurrentDispatcher,yy=vr.ReactCurrentOwner,Xn=vr.ReactCurrentBatchConfig,Me=0,kt=null,ut=null,Rt=0,kn=0,Ka=pi(0),yt=0,uc=null,ea=0,Uf=0,vy=0,Il=null,fn=null,by=0,vo=1/0,er=null,Yu=!1,ug=null,Kr=null,jd=!1,Lr=null,Xu=0,Ll=0,fg=null,ou=-1,lu=0;function rn(){return Me&6?it():ou!==-1?ou:ou=it()}function Gr(t){return t.mode&1?Me&2&&Rt!==0?Rt&-Rt:_3.transition!==null?(lu===0&&(lu=$S()),lu):(t=De,t!==0||(t=window.event,t=t===void 0?16:WS(t.type)),t):1}function hs(t,n,s,r){if(50<Ll)throw Ll=0,fg=null,Error(K(185));Ic(t,s,r),(!(Me&2)||t!==kt)&&(t===kt&&(!(Me&2)&&(Uf|=s),yt===4&&Or(t,Rt)),xn(t,r),s===1&&Me===0&&!(n.mode&1)&&(vo=it()+500,zf&&mi()))}function xn(t,n){var s=t.callbackNode;_O(t,n);var r=Ru(t,t===kt?Rt:0);if(r===0)s!==null&&ab(s),t.callbackNode=null,t.callbackPriority=0;else if(n=r&-r,t.callbackPriority!==n){if(s!=null&&ab(s),n===1)t.tag===0?C3(Qb.bind(null,t)):dk(Qb.bind(null,t)),j3(function(){!(Me&6)&&mi()}),s=null;else{switch(FS(r)){case 1:s=qx;break;case 4:s=IS;break;case 16:s=Pu;break;case 536870912:s=LS;break;default:s=Pu}s=lC(s,tC.bind(null,t))}t.callbackPriority=n,t.callbackNode=s}}function tC(t,n){if(ou=-1,lu=0,Me&6)throw Error(K(327));var s=t.callbackNode;if(io()&&t.callbackNode!==s)return null;var r=Ru(t,t===kt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||n)n=Ju(t,r);else{n=r;var i=Me;Me|=2;var o=sC();(kt!==t||Rt!==n)&&(er=null,vo=it()+500,Bi(t,n));do try{K3();break}catch(c){nC(t,c)}while(!0);iy(),Gu.current=o,Me=i,ut!==null?n=0:(kt=null,Rt=0,n=yt)}if(n!==0){if(n===2&&(i=Fm(t),i!==0&&(r=i,n=hg(t,i))),n===1)throw s=uc,Bi(t,0),Or(t,r),xn(t,it()),s;if(n===6)Or(t,r);else{if(i=t.current.alternate,!(r&30)&&!W3(i)&&(n=Ju(t,r),n===2&&(o=Fm(t),o!==0&&(r=o,n=hg(t,o))),n===1))throw s=uc,Bi(t,0),Or(t,r),xn(t,it()),s;switch(t.finishedWork=i,t.finishedLanes=r,n){case 0:case 1:throw Error(K(345));case 2:Ti(t,fn,er);break;case 3:if(Or(t,r),(r&130023424)===r&&(n=by+500-it(),10<n)){if(Ru(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Km(Ti.bind(null,t,fn,er),n);break}Ti(t,fn,er);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(n=t.eventTimes,i=-1;0<r;){var l=31-fs(r);o=1<<l,l=n[l],l>i&&(i=l),r&=~o}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U3(r/1960))-r,10<r){t.timeoutHandle=Km(Ti.bind(null,t,fn,er),r);break}Ti(t,fn,er);break;case 5:Ti(t,fn,er);break;default:throw Error(K(329))}}}return xn(t,it()),t.callbackNode===s?tC.bind(null,t):null}function hg(t,n){var s=Il;return t.current.memoizedState.isDehydrated&&(Bi(t,n).flags|=256),t=Ju(t,n),t!==2&&(n=fn,fn=s,n!==null&&pg(n)),t}function pg(t){fn===null?fn=t:fn.push.apply(fn,t)}function W3(t){for(var n=t;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],o=i.getSnapshot;i=i.value;try{if(!ps(o(),i))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Or(t,n){for(n&=~vy,n&=~Uf,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var s=31-fs(n),r=1<<s;t[s]=-1,n&=~r}}function Qb(t){if(Me&6)throw Error(K(327));io();var n=Ru(t,0);if(!(n&1))return xn(t,it()),null;var s=Ju(t,n);if(t.tag!==0&&s===2){var r=Fm(t);r!==0&&(n=r,s=hg(t,r))}if(s===1)throw s=uc,Bi(t,0),Or(t,n),xn(t,it()),s;if(s===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ti(t,fn,er),xn(t,it()),null}function wy(t,n){var s=Me;Me|=1;try{return t(n)}finally{Me=s,Me===0&&(vo=it()+500,zf&&mi())}}function ta(t){Lr!==null&&Lr.tag===0&&!(Me&6)&&io();var n=Me;Me|=1;var s=Xn.transition,r=De;try{if(Xn.transition=null,De=1,t)return t()}finally{De=r,Xn.transition=s,Me=n,!(Me&6)&&mi()}}function jy(){kn=Ka.current,ze(Ka)}function Bi(t,n){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,w3(s)),ut!==null)for(s=ut.return;s!==null;){var r=s;switch(ny(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$u();break;case 3:xo(),ze(mn),ze(Yt),uy();break;case 5:dy(r);break;case 4:xo();break;case 13:ze(We);break;case 19:ze(We);break;case 10:ay(r.type._context);break;case 22:case 23:jy()}s=s.return}if(kt=t,ut=t=Yr(t.current,null),Rt=kn=n,yt=0,uc=null,vy=Uf=ea=0,fn=Il=null,Oi!==null){for(n=0;n<Oi.length;n++)if(s=Oi[n],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,o=s.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}s.pending=r}Oi=null}return t}function nC(t,n){do{var s=ut;try{if(iy(),ru.current=Ku,qu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qu=!1}if(Zi=0,St=gt=Ke=null,Ol=!1,lc=0,yy.current=null,s===null||s.return===null){yt=1,uc=n,ut=null;break}e:{var o=t,l=s.return,c=s,d=n;if(n=Rt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Fb(l);if(m!==null){m.flags&=-257,zb(m,l,c,o,n),m.mode&1&&$b(o,u,n),n=m,d=u;var x=n.updateQueue;if(x===null){var y=new Set;y.add(d),n.updateQueue=y}else x.add(d);break e}else{if(!(n&1)){$b(o,u,n),Ny();break e}d=Error(K(426))}}else if(Be&&c.mode&1){var v=Fb(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),zb(v,l,c,o,n),sy(yo(d,c));break e}}o=d=yo(d,c),yt!==4&&(yt=2),Il===null?Il=[o]:Il.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n;var b=Fk(o,d,n);Pb(o,b);break e;case 1:c=d;var w=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Kr===null||!Kr.has(j)))){o.flags|=65536,n&=-n,o.lanes|=n;var N=zk(o,c,n);Pb(o,N);break e}}o=o.return}while(o!==null)}iC(s)}catch(S){n=S,ut===s&&s!==null&&(ut=s=s.return);continue}break}while(!0)}function sC(){var t=Gu.current;return Gu.current=Ku,t===null?Ku:t}function Ny(){(yt===0||yt===3||yt===2)&&(yt=4),kt===null||!(ea&268435455)&&!(Uf&268435455)||Or(kt,Rt)}function Ju(t,n){var s=Me;Me|=2;var r=sC();(kt!==t||Rt!==n)&&(er=null,Bi(t,n));do try{q3();break}catch(i){nC(t,i)}while(!0);if(iy(),Me=s,Gu.current=r,ut!==null)throw Error(K(261));return kt=null,Rt=0,yt}function q3(){for(;ut!==null;)rC(ut)}function K3(){for(;ut!==null&&!yO();)rC(ut)}function rC(t){var n=oC(t.alternate,t,kn);t.memoizedProps=t.pendingProps,n===null?iC(t):ut=n,yy.current=null}function iC(t){var n=t;do{var s=n.alternate;if(t=n.return,n.flags&32768){if(s=z3(s,n),s!==null){s.flags&=32767,ut=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ut=null;return}}else if(s=F3(s,n,kn),s!==null){ut=s;return}if(n=n.sibling,n!==null){ut=n;return}ut=n=t}while(n!==null);yt===0&&(yt=5)}function Ti(t,n,s){var r=De,i=Xn.transition;try{Xn.transition=null,De=1,G3(t,n,s,r)}finally{Xn.transition=i,De=r}return null}function G3(t,n,s,r){do io();while(Lr!==null);if(Me&6)throw Error(K(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=s.lanes|s.childLanes;if(EO(t,o),t===kt&&(ut=kt=null,Rt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||jd||(jd=!0,lC(Pu,function(){return io(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=Xn.transition,Xn.transition=null;var l=De;De=1;var c=Me;Me|=4,yy.current=null,V3(t,s),Zk(s,t),p3(Wm),Ou=!!Um,Wm=Um=null,t.current=s,H3(s),vO(),Me=c,De=l,Xn.transition=o}else t.current=s;if(jd&&(jd=!1,Lr=t,Xu=i),o=t.pendingLanes,o===0&&(Kr=null),jO(s.stateNode),xn(t,it()),n!==null)for(r=t.onRecoverableError,s=0;s<n.length;s++)i=n[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yu)throw Yu=!1,t=ug,ug=null,t;return Xu&1&&t.tag!==0&&io(),o=t.pendingLanes,o&1?t===fg?Ll++:(Ll=0,fg=t):Ll=0,mi(),null}function io(){if(Lr!==null){var t=FS(Xu),n=Xn.transition,s=De;try{if(Xn.transition=null,De=16>t?16:t,Lr===null)var r=!1;else{if(t=Lr,Lr=null,Xu=0,Me&6)throw Error(K(331));var i=Me;for(Me|=4,ne=t.current;ne!==null;){var o=ne,l=o.child;if(ne.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(ne=u;ne!==null;){var f=ne;switch(f.tag){case 0:case 11:case 15:Dl(8,f,o)}var h=f.child;if(h!==null)h.return=f,ne=h;else for(;ne!==null;){f=ne;var p=f.sibling,m=f.return;if(Xk(f),f===u){ne=null;break}if(p!==null){p.return=m,ne=p;break}ne=m}}}var x=o.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ne=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ne=l;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Dl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ne=b;break e}ne=o.return}}var w=t.current;for(ne=w;ne!==null;){l=ne;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,ne=j;else e:for(l=w;ne!==null;){if(c=ne,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hf(9,c)}}catch(S){Je(c,c.return,S)}if(c===l){ne=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,ne=N;break e}ne=c.return}}if(Me=i,mi(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Df,t)}catch{}r=!0}return r}finally{De=s,Xn.transition=n}}return!1}function Zb(t,n,s){n=yo(s,n),n=Fk(t,n,1),t=qr(t,n,1),n=rn(),t!==null&&(Ic(t,1,n),xn(t,n))}function Je(t,n,s){if(t.tag===3)Zb(t,t,s);else for(;n!==null;){if(n.tag===3){Zb(n,t,s);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=yo(s,t),t=zk(n,t,1),n=qr(n,t,1),t=rn(),n!==null&&(Ic(n,1,t),xn(n,t));break}}n=n.return}}function Y3(t,n,s){var r=t.pingCache;r!==null&&r.delete(n),n=rn(),t.pingedLanes|=t.suspendedLanes&s,kt===t&&(Rt&s)===s&&(yt===4||yt===3&&(Rt&130023424)===Rt&&500>it()-by?Bi(t,0):vy|=s),xn(t,n)}function aC(t,n){n===0&&(t.mode&1?(n=fd,fd<<=1,!(fd&130023424)&&(fd=4194304)):n=1);var s=rn();t=dr(t,n),t!==null&&(Ic(t,n,s),xn(t,s))}function X3(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),aC(t,s)}function J3(t,n){var s=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(n),aC(t,s)}var oC;oC=function(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps||mn.current)hn=!0;else{if(!(t.lanes&s)&&!(n.flags&128))return hn=!1,$3(t,n,s);hn=!!(t.flags&131072)}else hn=!1,Be&&n.flags&1048576&&uk(n,Bu,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;au(t,n),t=n.pendingProps;var i=po(n,Yt.current);ro(n,s),i=hy(null,n,r,t,i,s);var o=py();return n.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,gn(r)?(o=!0,Fu(n)):o=!1,n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ly(n),i.updater=Vf,n.stateNode=i,i._reactInternals=n,eg(n,r,t,s),n=sg(null,n,r,!0,o,s)):(n.tag=0,Be&&o&&ty(n),tn(null,n,i,s),n=n.child),n;case 16:r=n.elementType;e:{switch(au(t,n),t=n.pendingProps,i=r._init,r=i(r._payload),n.type=r,i=n.tag=Z3(r),t=as(r,t),i){case 0:n=ng(null,n,r,t,s);break e;case 1:n=Hb(null,n,r,t,s);break e;case 11:n=Bb(null,n,r,t,s);break e;case 14:n=Vb(null,n,r,as(r.type,t),s);break e}throw Error(K(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:as(r,i),ng(t,n,r,i,s);case 1:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:as(r,i),Hb(t,n,r,i,s);case 3:e:{if(Uk(n),t===null)throw Error(K(387));r=n.pendingProps,o=n.memoizedState,i=o.element,xk(t,n),Uu(n,r,null,s);var l=n.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){i=yo(Error(K(423)),n),n=Ub(t,n,r,s,i);break e}else if(r!==i){i=yo(Error(K(424)),n),n=Ub(t,n,r,s,i);break e}else for(Tn=Wr(n.stateNode.containerInfo.firstChild),An=n,Be=!0,cs=null,s=mk(n,null,r,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(mo(),r===i){n=ur(t,n,s);break e}tn(t,n,r,s)}n=n.child}return n;case 5:return yk(n),t===null&&Jm(n),r=n.type,i=n.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,qm(r,i)?l=null:o!==null&&qm(r,o)&&(n.flags|=32),Hk(t,n),tn(t,n,l,s),n.child;case 6:return t===null&&Jm(n),null;case 13:return Wk(t,n,s);case 4:return cy(n,n.stateNode.containerInfo),r=n.pendingProps,t===null?n.child=go(n,null,r,s):tn(t,n,r,s),n.child;case 11:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:as(r,i),Bb(t,n,r,i,s);case 7:return tn(t,n,n.pendingProps,s),n.child;case 8:return tn(t,n,n.pendingProps.children,s),n.child;case 12:return tn(t,n,n.pendingProps.children,s),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,o=n.memoizedProps,l=i.value,Ie(Vu,r._currentValue),r._currentValue=l,o!==null)if(ps(o.value,l)){if(o.children===i.children&&!mn.current){n=ur(t,n,s);break e}}else for(o=n.child,o!==null&&(o.return=n);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=ar(-1,s&-s),d.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}o.lanes|=s,d=o.alternate,d!==null&&(d.lanes|=s),Qm(o.return,s,n),c.lanes|=s;break}d=d.next}}else if(o.tag===10)l=o.type===n.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(K(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Qm(l,s,n),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===n){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}tn(t,n,i.children,s),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,ro(n,s),i=Qn(i),r=r(i),n.flags|=1,tn(t,n,r,s),n.child;case 14:return r=n.type,i=as(r,n.pendingProps),i=as(r.type,i),Vb(t,n,r,i,s);case 15:return Bk(t,n,n.type,n.pendingProps,s);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:as(r,i),au(t,n),n.tag=1,gn(r)?(t=!0,Fu(n)):t=!1,ro(n,s),$k(n,r,i),eg(n,r,i,s),sg(null,n,r,!0,t,s);case 19:return qk(t,n,s);case 22:return Vk(t,n,s)}throw Error(K(156,n.tag))};function lC(t,n){return DS(t,n)}function Q3(t,n,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,n,s,r){return new Q3(t,n,s,r)}function Sy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z3(t){if(typeof t=="function")return Sy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hx)return 11;if(t===Ux)return 14}return 2}function Yr(t,n){var s=t.alternate;return s===null?(s=Gn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function cu(t,n,s,r,i,o){var l=2;if(r=t,typeof t=="function")Sy(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case La:return Vi(s.children,i,o,n);case Vx:l=8,i|=8;break;case Sm:return t=Gn(12,s,n,i|2),t.elementType=Sm,t.lanes=o,t;case km:return t=Gn(13,s,n,i),t.elementType=km,t.lanes=o,t;case Cm:return t=Gn(19,s,n,i),t.elementType=Cm,t.lanes=o,t;case yS:return Wf(s,i,o,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gS:l=10;break e;case xS:l=9;break e;case Hx:l=11;break e;case Ux:l=14;break e;case Tr:l=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return n=Gn(l,s,n,i),n.elementType=t,n.type=r,n.lanes=o,n}function Vi(t,n,s,r){return t=Gn(7,t,r,n),t.lanes=s,t}function Wf(t,n,s,r){return t=Gn(22,t,r,n),t.elementType=yS,t.lanes=s,t.stateNode={isHidden:!1},t}function gp(t,n,s){return t=Gn(6,t,null,n),t.lanes=s,t}function xp(t,n,s){return n=Gn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function eD(t,n,s,r,i){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jh(0),this.expirationTimes=Jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ky(t,n,s,r,i,o,l,c,d){return t=new eD(t,n,s,c,d),n===1?(n=1,o===!0&&(n|=8)):n=0,o=Gn(3,null,null,n),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ly(o),t}function tD(t,n,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:t,containerInfo:n,implementation:s}}function cC(t){if(!t)return ni;t=t._reactInternals;e:{if(pa(t)!==t||t.tag!==1)throw Error(K(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(gn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(K(171))}if(t.tag===1){var s=t.type;if(gn(s))return ck(t,s,n)}return n}function dC(t,n,s,r,i,o,l,c,d){return t=ky(s,r,!0,t,i,o,l,c,d),t.context=cC(null),s=t.current,r=rn(),i=Gr(s),o=ar(r,i),o.callback=n??null,qr(s,o,i),t.current.lanes=i,Ic(t,i,r),xn(t,r),t}function qf(t,n,s,r){var i=n.current,o=rn(),l=Gr(i);return s=cC(s),n.context===null?n.context=s:n.pendingContext=s,n=ar(o,l),n.payload={element:t},r=r===void 0?null:r,r!==null&&(n.callback=r),t=qr(i,n,l),t!==null&&(hs(t,i,l,o),su(t,i,l)),l}function Qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ew(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Cy(t,n){ew(t,n),(t=t.alternate)&&ew(t,n)}function nD(){return null}var uC=typeof reportError=="function"?reportError:function(t){console.error(t)};function _y(t){this._internalRoot=t}Kf.prototype.render=_y.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(K(409));qf(t,n,null,null)};Kf.prototype.unmount=_y.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ta(function(){qf(null,t,null,null)}),n[cr]=null}};function Kf(t){this._internalRoot=t}Kf.prototype.unstable_scheduleHydration=function(t){if(t){var n=VS();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Rr.length&&n!==0&&n<Rr[s].priority;s++);Rr.splice(s,0,t),s===0&&US(t)}};function Ey(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tw(){}function sD(t,n,s,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Qu(l);o.call(u)}}var l=dC(n,r,t,0,null,!1,!1,"",tw);return t._reactRootContainer=l,t[cr]=l.current,sc(t.nodeType===8?t.parentNode:t),ta(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var u=Qu(d);c.call(u)}}var d=ky(t,0,!1,null,null,!1,!1,"",tw);return t._reactRootContainer=d,t[cr]=d.current,sc(t.nodeType===8?t.parentNode:t),ta(function(){qf(n,d,s,r)}),d}function Yf(t,n,s,r,i){var o=s._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var c=i;i=function(){var d=Qu(l);c.call(d)}}qf(n,l,t,i)}else l=sD(s,n,t,i,r);return Qu(l)}zS=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var s=wl(n.pendingLanes);s!==0&&(Kx(n,s|1),xn(n,it()),!(Me&6)&&(vo=it()+500,mi()))}break;case 13:ta(function(){var r=dr(t,1);if(r!==null){var i=rn();hs(r,t,1,i)}}),Cy(t,1)}};Gx=function(t){if(t.tag===13){var n=dr(t,134217728);if(n!==null){var s=rn();hs(n,t,134217728,s)}Cy(t,134217728)}};BS=function(t){if(t.tag===13){var n=Gr(t),s=dr(t,n);if(s!==null){var r=rn();hs(s,t,n,r)}Cy(t,n)}};VS=function(){return De};HS=function(t,n){var s=De;try{return De=t,n()}finally{De=s}};Im=function(t,n,s){switch(n){case"input":if(Tm(t,s),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var r=s[n];if(r!==t&&r.form===t.form){var i=Ff(r);if(!i)throw Error(K(90));bS(r),Tm(r,i)}}}break;case"textarea":jS(t,s);break;case"select":n=s.value,n!=null&&eo(t,!!s.multiple,n,!1)}};TS=wy;MS=ta;var rD={usingClientEntryPoint:!1,Events:[$c,Ba,Ff,_S,ES,wy]},cl={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iD={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RS(t),t===null?null:t.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||nD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{Df=Nd.inject(iD),Ds=Nd}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rD;Ln.createPortal=function(t,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ey(n))throw Error(K(200));return tD(t,n,null,s)};Ln.createRoot=function(t,n){if(!Ey(t))throw Error(K(299));var s=!1,r="",i=uC;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),n=ky(t,1,!1,null,null,s,!1,r,i),t[cr]=n.current,sc(t.nodeType===8?t.parentNode:t),new _y(n)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=RS(n),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return ta(t)};Ln.hydrate=function(t,n,s){if(!Gf(n))throw Error(K(200));return Yf(null,t,n,!0,s)};Ln.hydrateRoot=function(t,n,s){if(!Ey(t))throw Error(K(405));var r=s!=null&&s.hydratedSources||null,i=!1,o="",l=uC;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),n=dC(n,null,t,1,s??null,i,!1,o,l),t[cr]=n.current,sc(t),r)for(t=0;t<r.length;t++)s=r[t],i=s._getVersion,i=i(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,i]:n.mutableSourceEagerHydrationData.push(s,i);return new Kf(n)};Ln.render=function(t,n,s){if(!Gf(n))throw Error(K(200));return Yf(null,t,n,!1,s)};Ln.unmountComponentAtNode=function(t){if(!Gf(t))throw Error(K(40));return t._reactRootContainer?(ta(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};Ln.unstable_batchedUpdates=wy;Ln.unstable_renderSubtreeIntoContainer=function(t,n,s,r){if(!Gf(s))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Yf(t,n,s,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(t){console.error(t)}}fC(),fS.exports=Ln;var $o=fS.exports;const hC=Rx($o);var nw=$o;jm.createRoot=nw.createRoot,jm.hydrateRoot=nw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},fc.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const sw="popstate";function aD(t){t===void 0&&(t={});function n(r,i){let{pathname:o,search:l,hash:c}=r.location;return mg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:Zu(i)}return lD(n,s,null,t)}function Ge(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function pC(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function oD(){return Math.random().toString(36).substr(2,8)}function rw(t,n){return{usr:t.state,key:t.key,idx:n}}function mg(t,n,s,r){return s===void 0&&(s=null),fc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?Fo(n):n,{state:s,key:n&&n.key||r||oD()})}function Zu(t){let{pathname:n="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Fo(t){let n={};if(t){let s=t.indexOf("#");s>=0&&(n.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}function lD(t,n,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=$r.Pop,d=null,u=f();u==null&&(u=0,l.replaceState(fc({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function h(){c=$r.Pop;let v=f(),b=v==null?null:v-u;u=v,d&&d({action:c,location:y.location,delta:b})}function p(v,b){c=$r.Push;let w=mg(y.location,v,b);u=f()+1;let j=rw(w,u),N=y.createHref(w);try{l.pushState(j,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(N)}o&&d&&d({action:c,location:y.location,delta:1})}function m(v,b){c=$r.Replace;let w=mg(y.location,v,b);u=f();let j=rw(w,u),N=y.createHref(w);l.replaceState(j,"",N),o&&d&&d({action:c,location:y.location,delta:0})}function x(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:Zu(v);return w=w.replace(/ $/,"%20"),Ge(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return c},get location(){return t(i,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(sw,h),d=v,()=>{i.removeEventListener(sw,h),d=null}},createHref(v){return n(i,v)},createURL:x,encodeLocation(v){let b=x(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(v){return l.go(v)}};return y}var iw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(iw||(iw={}));function cD(t,n,s){return s===void 0&&(s="/"),dD(t,n,s)}function dD(t,n,s,r){let i=typeof n=="string"?Fo(n):n,o=bo(i.pathname||"/",s);if(o==null)return null;let l=mC(t);uD(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let u=jD(o);c=bD(l[d],u)}return c}function mC(t,n,s,r){n===void 0&&(n=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(Ge(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=Xr([r,d.relativePath]),f=s.concat(d);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mC(o.children,n,f,u)),!(o.path==null&&!o.index)&&n.push({path:u,score:yD(u,o.index),routesMeta:f})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of gC(o.path))i(o,l,d)}),n}function gC(t){let n=t.split("/");if(n.length===0)return[];let[s,...r]=n,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=gC(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function uD(t){t.sort((n,s)=>n.score!==s.score?s.score-n.score:vD(n.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const fD=/^:[\w-]+$/,hD=3,pD=2,mD=1,gD=10,xD=-2,aw=t=>t==="*";function yD(t,n){let s=t.split("/"),r=s.length;return s.some(aw)&&(r+=xD),n&&(r+=pD),s.filter(i=>!aw(i)).reduce((i,o)=>i+(fD.test(o)?hD:o===""?mD:gD),r)}function vD(t,n){return t.length===n.length&&t.slice(0,-1).every((r,i)=>r===n[i])?t[t.length-1]-n[n.length-1]:0}function bD(t,n,s){let{routesMeta:r}=t,i={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],u=c===r.length-1,f=o==="/"?n:n.slice(o.length)||"/",h=gg({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),p=d.route;if(!h)return null;Object.assign(i,h.params),l.push({params:i,pathname:Xr([o,h.pathname]),pathnameBase:CD(Xr([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Xr([o,h.pathnameBase]))}return l}function gg(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=wD(t.path,t.caseSensitive,t.end),i=n.match(s);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((u,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let y=c[h]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const x=c[h];return m&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:t}}function wD(t,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),pC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function jD(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return pC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function bo(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function ND(t,n){n===void 0&&(n="/");let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Fo(t):t;return{pathname:s?s.startsWith("/")?s:SD(s,n):n,search:_D(r),hash:ED(i)}}function SD(t,n){let s=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function yp(t,n,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kD(t){return t.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Ty(t,n){let s=kD(t);return n?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function My(t,n,s,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fo(t):(i=fc({},t),Ge(!i.pathname||!i.pathname.includes("?"),yp("?","pathname","search",i)),Ge(!i.pathname||!i.pathname.includes("#"),yp("#","pathname","hash",i)),Ge(!i.search||!i.search.includes("#"),yp("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=s;else{let h=n.length-1;if(!r&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}c=h>=0?n[h]:"/"}let d=ND(i,c),u=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),CD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_D=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ED=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xC=["post","put","patch","delete"];new Set(xC);const MD=["get",...xC];new Set(MD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},hc.apply(this,arguments)}const Xf=g.createContext(null),yC=g.createContext(null),br=g.createContext(null),Jf=g.createContext(null),Us=g.createContext({outlet:null,matches:[],isDataRoute:!1}),vC=g.createContext(null);function AD(t,n){let{relative:s}=n===void 0?{}:n;zo()||Ge(!1);let{basename:r,navigator:i}=g.useContext(br),{hash:o,pathname:l,search:c}=Qf(t,{relative:s}),d=l;return r!=="/"&&(d=l==="/"?r:Xr([r,l])),i.createHref({pathname:d,search:c,hash:o})}function zo(){return g.useContext(Jf)!=null}function Fn(){return zo()||Ge(!1),g.useContext(Jf).location}function bC(t){g.useContext(br).static||g.useLayoutEffect(t)}function jn(){let{isDataRoute:t}=g.useContext(Us);return t?qD():PD()}function PD(){zo()||Ge(!1);let t=g.useContext(Xf),{basename:n,future:s,navigator:r}=g.useContext(br),{matches:i}=g.useContext(Us),{pathname:o}=Fn(),l=JSON.stringify(Ty(i,s.v7_relativeSplatPath)),c=g.useRef(!1);return bC(()=>{c.current=!0}),g.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let h=My(u,JSON.parse(l),o,f.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Xr([n,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[n,r,l,o,t])}const RD=g.createContext(null);function OD(t){let n=g.useContext(Us).outlet;return n&&g.createElement(RD.Provider,{value:t},n)}function ma(){let{matches:t}=g.useContext(Us),n=t[t.length-1];return n?n.params:{}}function Qf(t,n){let{relative:s}=n===void 0?{}:n,{future:r}=g.useContext(br),{matches:i}=g.useContext(Us),{pathname:o}=Fn(),l=JSON.stringify(Ty(i,r.v7_relativeSplatPath));return g.useMemo(()=>My(t,JSON.parse(l),o,s==="path"),[t,l,o,s])}function DD(t,n){return ID(t,n)}function ID(t,n,s,r){zo()||Ge(!1);let{navigator:i}=g.useContext(br),{matches:o}=g.useContext(Us),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let u=Fn(),f;if(n){var h;let v=typeof n=="string"?Fo(n):n;d==="/"||(h=v.pathname)!=null&&h.startsWith(d)||Ge(!1),f=v}else f=u;let p=f.pathname||"/",m=p;if(d!=="/"){let v=d.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=cD(t,{pathname:m}),y=BD(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Xr([d,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Xr([d,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,s,r);return n&&y?g.createElement(Jf.Provider,{value:{location:hc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:$r.Pop}},y):y}function LD(){let t=WD(),n=TD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},n),s?g.createElement("pre",{style:i},s):null,null)}const $D=g.createElement(LD,null);class FD extends g.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?g.createElement(Us.Provider,{value:this.props.routeContext},g.createElement(vC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zD(t){let{routeContext:n,match:s,children:r}=t,i=g.useContext(Xf);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),g.createElement(Us.Provider,{value:n},r)}function BD(t,n,s,r){var i;if(n===void 0&&(n=[]),s===void 0&&(s=null),r===void 0&&(r=null),t==null){var o;if(!s)return null;if(s.errors)t=s.matches;else if((o=r)!=null&&o.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,c=(i=s)==null?void 0:i.errors;if(c!=null){let f=l.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);f>=0||Ge(!1),l=l.slice(0,Math.min(l.length,f+1))}let d=!1,u=-1;if(s&&r&&r.v7_partialHydration)for(let f=0;f<l.length;f++){let h=l[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:p,errors:m}=s,x=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){d=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,h,p)=>{let m,x=!1,y=null,v=null;s&&(m=c&&h.route.id?c[h.route.id]:void 0,y=h.route.errorElement||$D,d&&(u<0&&p===0?(KD("route-fallback"),x=!0,v=null):u===p&&(x=!0,v=h.route.hydrateFallbackElement||null)));let b=n.concat(l.slice(0,p+1)),w=()=>{let j;return m?j=y:x?j=v:h.route.Component?j=g.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=f,g.createElement(zD,{match:h,routeContext:{outlet:f,matches:b,isDataRoute:s!=null},children:j})};return s&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?g.createElement(FD,{location:s.location,revalidation:s.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var wC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wC||{}),jC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jC||{});function VD(t){let n=g.useContext(Xf);return n||Ge(!1),n}function HD(t){let n=g.useContext(yC);return n||Ge(!1),n}function UD(t){let n=g.useContext(Us);return n||Ge(!1),n}function NC(t){let n=UD(),s=n.matches[n.matches.length-1];return s.route.id||Ge(!1),s.route.id}function WD(){var t;let n=g.useContext(vC),s=HD(),r=NC();return n!==void 0?n:(t=s.errors)==null?void 0:t[r]}function qD(){let{router:t}=VD(wC.UseNavigateStable),n=NC(jC.UseNavigateStable),s=g.useRef(!1);return bC(()=>{s.current=!0}),g.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hc({fromRouteId:n},o)))},[t,n])}const ow={};function KD(t,n,s){ow[t]||(ow[t]=!0)}function GD(t,n){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function SC(t){let{to:n,replace:s,state:r,relative:i}=t;zo()||Ge(!1);let{future:o,static:l}=g.useContext(br),{matches:c}=g.useContext(Us),{pathname:d}=Fn(),u=jn(),f=My(n,Ty(c,o.v7_relativeSplatPath),d,i==="path"),h=JSON.stringify(f);return g.useEffect(()=>u(JSON.parse(h),{replace:s,state:r,relative:i}),[u,h,i,s,r]),null}function kC(t){return OD(t.context)}function de(t){Ge(!1)}function YD(t){let{basename:n="/",children:s=null,location:r,navigationType:i=$r.Pop,navigator:o,static:l=!1,future:c}=t;zo()&&Ge(!1);let d=n.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:d,navigator:o,static:l,future:hc({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);typeof r=="string"&&(r=Fo(r));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:x="default"}=r,y=g.useMemo(()=>{let v=bo(f,d);return v==null?null:{location:{pathname:v,search:h,hash:p,state:m,key:x},navigationType:i}},[d,f,h,p,m,x,i]);return y==null?null:g.createElement(br.Provider,{value:u},g.createElement(Jf.Provider,{children:s,value:y}))}function XD(t){let{children:n,location:s}=t;return DD(xg(n),s)}new Promise(()=>{});function xg(t,n){n===void 0&&(n=[]);let s=[];return g.Children.forEach(t,(r,i)=>{if(!g.isValidElement(r))return;let o=[...n,i];if(r.type===g.Fragment){s.push.apply(s,xg(r.props.children,o));return}r.type!==de&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=xg(r.props.children,o)),s.push(l)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},ef.apply(this,arguments)}function CC(t,n){if(t==null)return{};var s={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(s[i]=t[i]);return s}function JD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QD(t,n){return t.button===0&&(!n||n==="_self")&&!JD(t)}function yg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((n,s)=>{let r=t[s];return n.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function ZD(t,n){let s=yg(t);return n&&n.forEach((r,i)=>{s.has(i)||n.getAll(i).forEach(o=>{s.append(i,o)})}),s}const e4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t4=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],n4="6";try{window.__reactRouterVersion=n4}catch{}const s4=g.createContext({isTransitioning:!1}),r4="startTransition",lw=$x[r4];function i4(t){let{basename:n,children:s,future:r,window:i}=t,o=g.useRef();o.current==null&&(o.current=aD({window:i,v5Compat:!0}));let l=o.current,[c,d]=g.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},f=g.useCallback(h=>{u&&lw?lw(()=>d(h)):d(h)},[d,u]);return g.useLayoutEffect(()=>l.listen(f),[l,f]),g.useEffect(()=>GD(r),[r]),g.createElement(YD,{basename:n,children:s,location:c.location,navigationType:c.action,navigator:l,future:r})}const a4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dn=g.forwardRef(function(n,s){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:d,to:u,preventScrollReset:f,viewTransition:h}=n,p=CC(n,e4),{basename:m}=g.useContext(br),x,y=!1;if(typeof u=="string"&&o4.test(u)&&(x=u,a4))try{let j=new URL(window.location.href),N=u.startsWith("//")?new URL(j.protocol+u):new URL(u),S=bo(N.pathname,m);N.origin===j.origin&&S!=null?u=S+N.search+N.hash:y=!0}catch{}let v=AD(u,{relative:i}),b=c4(u,{replace:l,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:h});function w(j){r&&r(j),j.defaultPrevented||b(j)}return g.createElement("a",ef({},p,{href:x||v,onClick:y||o?r:w,ref:s,target:d}))}),cw=g.forwardRef(function(n,s){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:c,to:d,viewTransition:u,children:f}=n,h=CC(n,t4),p=Qf(d,{relative:h.relative}),m=Fn(),x=g.useContext(yC),{navigator:y,basename:v}=g.useContext(br),b=x!=null&&u4(p)&&u===!0,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,j=m.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(j=j.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=bo(N,v)||N);const S=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let _=j===w||!l&&j.startsWith(w)&&j.charAt(S)==="/",C=N!=null&&(N===w||!l&&N.startsWith(w)&&N.charAt(w.length)==="/"),k={isActive:_,isPending:C,isTransitioning:b},E=_?r:void 0,M;typeof o=="function"?M=o(k):M=[o,_?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof c=="function"?c(k):c;return g.createElement(Dn,ef({},h,{"aria-current":E,className:M,ref:s,style:D,to:d,viewTransition:u}),typeof f=="function"?f(k):f)});var vg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vg||(vg={}));var dw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dw||(dw={}));function l4(t){let n=g.useContext(Xf);return n||Ge(!1),n}function c4(t,n){let{target:s,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=n===void 0?{}:n,d=jn(),u=Fn(),f=Qf(t,{relative:l});return g.useCallback(h=>{if(QD(h,s)){h.preventDefault();let p=r!==void 0?r:Zu(u)===Zu(f);d(t,{replace:p,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[u,d,f,r,i,s,t,o,l,c])}function d4(t){let n=g.useRef(yg(t)),s=g.useRef(!1),r=Fn(),i=g.useMemo(()=>ZD(r.search,s.current?null:n.current),[r.search]),o=jn(),l=g.useCallback((c,d)=>{const u=yg(typeof c=="function"?c(i):c);s.current=!0,o("?"+u,d)},[o,i]);return[i,l]}function u4(t,n){n===void 0&&(n={});let s=g.useContext(s4);s==null&&Ge(!1);let{basename:r}=l4(vg.useViewTransitionState),i=Qf(t,{relative:n.relative});if(!s.isTransitioning)return!1;let o=bo(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=bo(s.nextLocation.pathname,r)||s.nextLocation.pathname;return gg(i.pathname,l)!=null||gg(i.pathname,o)!=null}const f4={},uw=t=>{let n;const s=new Set,r=(f,h)=>{const p=typeof f=="function"?f(n):f;if(!Object.is(p,n)){const m=n;n=h??(typeof p!="object"||p===null)?p:Object.assign({},n,p),s.forEach(x=>x(n,m))}},i=()=>n,d={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(s.add(f),()=>s.delete(f)),destroy:()=>{(f4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=n=t(r,i,d);return d},h4=t=>t?uw(t):uw;var _C={exports:{}},EC={},TC={exports:{}},MC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=g;function p4(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var m4=typeof Object.is=="function"?Object.is:p4,g4=wo.useState,x4=wo.useEffect,y4=wo.useLayoutEffect,v4=wo.useDebugValue;function b4(t,n){var s=n(),r=g4({inst:{value:s,getSnapshot:n}}),i=r[0].inst,o=r[1];return y4(function(){i.value=s,i.getSnapshot=n,vp(i)&&o({inst:i})},[t,s,n]),x4(function(){return vp(i)&&o({inst:i}),t(function(){vp(i)&&o({inst:i})})},[t]),v4(s),s}function vp(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!m4(t,s)}catch{return!0}}function w4(t,n){return n()}var j4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w4:b4;MC.useSyncExternalStore=wo.useSyncExternalStore!==void 0?wo.useSyncExternalStore:j4;TC.exports=MC;var N4=TC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=g,S4=N4;function k4(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var C4=typeof Object.is=="function"?Object.is:k4,_4=S4.useSyncExternalStore,E4=Zf.useRef,T4=Zf.useEffect,M4=Zf.useMemo,A4=Zf.useDebugValue;EC.useSyncExternalStoreWithSelector=function(t,n,s,r,i){var o=E4(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=M4(function(){function d(m){if(!u){if(u=!0,f=m,m=r(m),i!==void 0&&l.hasValue){var x=l.value;if(i(x,m))return h=x}return h=m}if(x=h,C4(f,m))return x;var y=r(m);return i!==void 0&&i(x,y)?(f=m,x):(f=m,h=y)}var u=!1,f,h,p=s===void 0?null:s;return[function(){return d(n())},p===null?void 0:function(){return d(p())}]},[n,s,r,i]);var c=_4(t,o[0],o[1]);return T4(function(){l.hasValue=!0,l.value=c},[c]),A4(c),c};_C.exports=EC;var P4=_C.exports;const R4=Rx(P4),AC={},{useDebugValue:O4}=G,{useSyncExternalStoreWithSelector:D4}=R4;let fw=!1;const I4=t=>t;function L4(t,n=I4,s){(AC?"production":void 0)!=="production"&&s&&!fw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fw=!0);const r=D4(t.subscribe,t.getState,t.getServerState||t.getInitialState,n,s);return O4(r),r}const hw=t=>{(AC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof t=="function"?h4(t):t,s=(r,i)=>L4(n,r,i);return Object.assign(s,n),s},PC=t=>t?hw(t):hw;function RC(t,n){return function(){return t.apply(n,arguments)}}const{toString:$4}=Object.prototype,{getPrototypeOf:Ay}=Object,{iterator:eh,toStringTag:OC}=Symbol,th=(t=>n=>{const s=$4.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ws=t=>(t=t.toLowerCase(),n=>th(n)===t),nh=t=>n=>typeof n===t,{isArray:Bo}=Array,jo=nh("undefined");function zc(t){return t!==null&&!jo(t)&&t.constructor!==null&&!jo(t.constructor)&&yn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const DC=ws("ArrayBuffer");function F4(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&DC(t.buffer),n}const z4=nh("string"),yn=nh("function"),IC=nh("number"),Bc=t=>t!==null&&typeof t=="object",B4=t=>t===!0||t===!1,du=t=>{if(th(t)!=="object")return!1;const n=Ay(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(OC in t)&&!(eh in t)},V4=t=>{if(!Bc(t)||zc(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},H4=ws("Date"),U4=ws("File"),W4=ws("Blob"),q4=ws("FileList"),K4=t=>Bc(t)&&yn(t.pipe),G4=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||yn(t.append)&&((n=th(t))==="formdata"||n==="object"&&yn(t.toString)&&t.toString()==="[object FormData]"))},Y4=ws("URLSearchParams"),[X4,J4,Q4,Z4]=["ReadableStream","Request","Response","Headers"].map(ws),eI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vc(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Bo(t))for(r=0,i=t.length;r<i;r++)n.call(null,t[r],r,t);else{if(zc(t))return;const o=s?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let c;for(r=0;r<l;r++)c=o[r],n.call(null,t[c],c,t)}}function LC(t,n){if(zc(t))return null;n=n.toLowerCase();const s=Object.keys(t);let r=s.length,i;for(;r-- >0;)if(i=s[r],n===i.toLowerCase())return i;return null}const Ii=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$C=t=>!jo(t)&&t!==Ii;function bg(){const{caseless:t,skipUndefined:n}=$C(this)&&this||{},s={},r=(i,o)=>{const l=t&&LC(s,o)||o;du(s[l])&&du(i)?s[l]=bg(s[l],i):du(i)?s[l]=bg({},i):Bo(i)?s[l]=i.slice():(!n||!jo(i))&&(s[l]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Vc(arguments[i],r);return s}const tI=(t,n,s,{allOwnKeys:r}={})=>(Vc(n,(i,o)=>{s&&yn(i)?t[o]=RC(i,s):t[o]=i},{allOwnKeys:r}),t),nI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),sI=(t,n,s,r)=>{t.prototype=Object.create(n.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},rI=(t,n,s,r)=>{let i,o,l;const c={};if(n=n||{},t==null)return n;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)l=i[o],(!r||r(l,t,n))&&!c[l]&&(n[l]=t[l],c[l]=!0);t=s!==!1&&Ay(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},iI=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const r=t.indexOf(n,s);return r!==-1&&r===s},aI=t=>{if(!t)return null;if(Bo(t))return t;let n=t.length;if(!IC(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},oI=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Ay(Uint8Array)),lI=(t,n)=>{const r=(t&&t[eh]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;n.call(t,o[0],o[1])}},cI=(t,n)=>{let s;const r=[];for(;(s=t.exec(n))!==null;)r.push(s);return r},dI=ws("HTMLFormElement"),uI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,i){return r.toUpperCase()+i}),pw=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),fI=ws("RegExp"),FC=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),r={};Vc(s,(i,o)=>{let l;(l=n(i,o,t))!==!1&&(r[o]=l||i)}),Object.defineProperties(t,r)},hI=t=>{FC(t,(n,s)=>{if(yn(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(yn(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},pI=(t,n)=>{const s={},r=i=>{i.forEach(o=>{s[o]=!0})};return Bo(t)?r(t):r(String(t).split(n)),s},mI=()=>{},gI=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function xI(t){return!!(t&&yn(t.append)&&t[OC]==="FormData"&&t[eh])}const yI=t=>{const n=new Array(10),s=(r,i)=>{if(Bc(r)){if(n.indexOf(r)>=0)return;if(zc(r))return r;if(!("toJSON"in r)){n[i]=r;const o=Bo(r)?[]:{};return Vc(r,(l,c)=>{const d=s(l,i+1);!jo(d)&&(o[c]=d)}),n[i]=void 0,o}}return r};return s(t,0)},vI=ws("AsyncFunction"),bI=t=>t&&(Bc(t)||yn(t))&&yn(t.then)&&yn(t.catch),zC=((t,n)=>t?setImmediate:n?((s,r)=>(Ii.addEventListener("message",({source:i,data:o})=>{i===Ii&&o===s&&r.length&&r.shift()()},!1),i=>{r.push(i),Ii.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",yn(Ii.postMessage)),wI=typeof queueMicrotask<"u"?queueMicrotask.bind(Ii):typeof process<"u"&&process.nextTick||zC,jI=t=>t!=null&&yn(t[eh]),V={isArray:Bo,isArrayBuffer:DC,isBuffer:zc,isFormData:G4,isArrayBufferView:F4,isString:z4,isNumber:IC,isBoolean:B4,isObject:Bc,isPlainObject:du,isEmptyObject:V4,isReadableStream:X4,isRequest:J4,isResponse:Q4,isHeaders:Z4,isUndefined:jo,isDate:H4,isFile:U4,isBlob:W4,isRegExp:fI,isFunction:yn,isStream:K4,isURLSearchParams:Y4,isTypedArray:oI,isFileList:q4,forEach:Vc,merge:bg,extend:tI,trim:eI,stripBOM:nI,inherits:sI,toFlatObject:rI,kindOf:th,kindOfTest:ws,endsWith:iI,toArray:aI,forEachEntry:lI,matchAll:cI,isHTMLForm:dI,hasOwnProperty:pw,hasOwnProp:pw,reduceDescriptors:FC,freezeMethods:hI,toObjectSet:pI,toCamelCase:uI,noop:mI,toFiniteNumber:gI,findKey:LC,global:Ii,isContextDefined:$C,isSpecCompliantForm:xI,toJSONObject:yI,isAsyncFn:vI,isThenable:bI,setImmediate:zC,asap:wI,isIterable:jI};function ye(t,n,s,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const BC=ye.prototype,VC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{VC[t]={value:t}});Object.defineProperties(ye,VC);Object.defineProperty(BC,"isAxiosError",{value:!0});ye.from=(t,n,s,r,i,o)=>{const l=Object.create(BC);V.toFlatObject(t,l,function(f){return f!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",d=n==null&&t?t.code:n;return ye.call(l,c,d,s,r,i),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",o&&Object.assign(l,o),l};const NI=null;function wg(t){return V.isPlainObject(t)||V.isArray(t)}function HC(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function mw(t,n,s){return t?t.concat(n).map(function(i,o){return i=HC(i),!s&&o?"["+i+"]":i}).join(s?".":""):n}function SI(t){return V.isArray(t)&&!t.some(wg)}const kI=V.toFlatObject(V,{},null,function(n){return/^is[A-Z]/.test(n)});function sh(t,n,s){if(!V.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=V.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!V.isUndefined(v[y])});const r=s.metaTokens,i=s.visitor||f,o=s.dots,l=s.indexes,d=(s.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(n);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(V.isDate(x))return x.toISOString();if(V.isBoolean(x))return x.toString();if(!d&&V.isBlob(x))throw new ye("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(x)||V.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,y,v){let b=x;if(x&&!v&&typeof x=="object"){if(V.endsWith(y,"{}"))y=r?y:y.slice(0,-2),x=JSON.stringify(x);else if(V.isArray(x)&&SI(x)||(V.isFileList(x)||V.endsWith(y,"[]"))&&(b=V.toArray(x)))return y=HC(y),b.forEach(function(j,N){!(V.isUndefined(j)||j===null)&&n.append(l===!0?mw([y],N,o):l===null?y:y+"[]",u(j))}),!1}return wg(x)?!0:(n.append(mw(v,y,o),u(x)),!1)}const h=[],p=Object.assign(kI,{defaultVisitor:f,convertValue:u,isVisitable:wg});function m(x,y){if(!V.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(x),V.forEach(x,function(b,w){(!(V.isUndefined(b)||b===null)&&i.call(n,b,V.isString(w)?w.trim():w,y,p))===!0&&m(b,y?y.concat(w):[w])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return m(t),n}function gw(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function Py(t,n){this._pairs=[],t&&sh(t,this,n)}const UC=Py.prototype;UC.append=function(n,s){this._pairs.push([n,s])};UC.toString=function(n){const s=n?function(r){return n.call(this,r,gw)}:gw;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function CI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function WC(t,n,s){if(!n)return t;const r=s&&s.encode||CI;V.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let o;if(i?o=i(n,s):o=V.isURLSearchParams(n)?n.toString():new Py(n,s).toString(r),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class xw{constructor(){this.handlers=[]}use(n,s,r){return this.handlers.push({fulfilled:n,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){V.forEach(this.handlers,function(r){r!==null&&n(r)})}}const qC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_I=typeof URLSearchParams<"u"?URLSearchParams:Py,EI=typeof FormData<"u"?FormData:null,TI=typeof Blob<"u"?Blob:null,MI={isBrowser:!0,classes:{URLSearchParams:_I,FormData:EI,Blob:TI},protocols:["http","https","file","blob","url","data"]},Ry=typeof window<"u"&&typeof document<"u",jg=typeof navigator=="object"&&navigator||void 0,AI=Ry&&(!jg||["ReactNative","NativeScript","NS"].indexOf(jg.product)<0),PI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RI=Ry&&window.location.href||"http://localhost",OI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ry,hasStandardBrowserEnv:AI,hasStandardBrowserWebWorkerEnv:PI,navigator:jg,origin:RI},Symbol.toStringTag,{value:"Module"})),Vt={...OI,...MI};function DI(t,n){return sh(t,new Vt.classes.URLSearchParams,{visitor:function(s,r,i,o){return Vt.isNode&&V.isBuffer(s)?(this.append(r,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...n})}function II(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function LI(t){const n={},s=Object.keys(t);let r;const i=s.length;let o;for(r=0;r<i;r++)o=s[r],n[o]=t[o];return n}function KC(t){function n(s,r,i,o){let l=s[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=o>=s.length;return l=!l&&V.isArray(i)?i.length:l,d?(V.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!c):((!i[l]||!V.isObject(i[l]))&&(i[l]=[]),n(s,r,i[l],o)&&V.isArray(i[l])&&(i[l]=LI(i[l])),!c)}if(V.isFormData(t)&&V.isFunction(t.entries)){const s={};return V.forEachEntry(t,(r,i)=>{n(II(r),i,s,0)}),s}return null}function $I(t,n,s){if(V.isString(t))try{return(n||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const Hc={transitional:qC,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const r=s.getContentType()||"",i=r.indexOf("application/json")>-1,o=V.isObject(n);if(o&&V.isHTMLForm(n)&&(n=new FormData(n)),V.isFormData(n))return i?JSON.stringify(KC(n)):n;if(V.isArrayBuffer(n)||V.isBuffer(n)||V.isStream(n)||V.isFile(n)||V.isBlob(n)||V.isReadableStream(n))return n;if(V.isArrayBufferView(n))return n.buffer;if(V.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return DI(n,this.formSerializer).toString();if((c=V.isFileList(n))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return sh(c?{"files[]":n}:n,d&&new d,this.formSerializer)}}return o||i?(s.setContentType("application/json",!1),$I(n)):n}],transformResponse:[function(n){const s=this.transitional||Hc.transitional,r=s&&s.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(n)||V.isReadableStream(n))return n;if(n&&V.isString(n)&&(r&&!this.responseType||i)){const l=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(n,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?ye.from(c,ye.ERR_BAD_RESPONSE,this,null,this.response):c}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Hc.headers[t]={}});const FI=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zI=t=>{const n={};let s,r,i;return t&&t.split(`
`).forEach(function(l){i=l.indexOf(":"),s=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!s||n[s]&&FI[s])&&(s==="set-cookie"?n[s]?n[s].push(r):n[s]=[r]:n[s]=n[s]?n[s]+", "+r:r)}),n},yw=Symbol("internals");function dl(t){return t&&String(t).trim().toLowerCase()}function uu(t){return t===!1||t==null?t:V.isArray(t)?t.map(uu):String(t)}function BI(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)n[r[1]]=r[2];return n}const VI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bp(t,n,s,r,i){if(V.isFunction(r))return r.call(this,n,s);if(i&&(n=s),!!V.isString(n)){if(V.isString(r))return n.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(n)}}function HI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,r)=>s.toUpperCase()+r)}function UI(t,n){const s=V.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(i,o,l){return this[r].call(this,n,i,o,l)},configurable:!0})})}let vn=class{constructor(n){n&&this.set(n)}set(n,s,r){const i=this;function o(c,d,u){const f=dl(d);if(!f)throw new Error("header name must be a non-empty string");const h=V.findKey(i,f);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||d]=uu(c))}const l=(c,d)=>V.forEach(c,(u,f)=>o(u,f,d));if(V.isPlainObject(n)||n instanceof this.constructor)l(n,s);else if(V.isString(n)&&(n=n.trim())&&!VI(n))l(zI(n),s);else if(V.isObject(n)&&V.isIterable(n)){let c={},d,u;for(const f of n){if(!V.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[u=f[0]]=(d=c[u])?V.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(c,s)}else n!=null&&o(s,n,r);return this}get(n,s){if(n=dl(n),n){const r=V.findKey(this,n);if(r){const i=this[r];if(!s)return i;if(s===!0)return BI(i);if(V.isFunction(s))return s.call(this,i,r);if(V.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=dl(n),n){const r=V.findKey(this,n);return!!(r&&this[r]!==void 0&&(!s||bp(this,this[r],r,s)))}return!1}delete(n,s){const r=this;let i=!1;function o(l){if(l=dl(l),l){const c=V.findKey(r,l);c&&(!s||bp(r,r[c],c,s))&&(delete r[c],i=!0)}}return V.isArray(n)?n.forEach(o):o(n),i}clear(n){const s=Object.keys(this);let r=s.length,i=!1;for(;r--;){const o=s[r];(!n||bp(this,this[o],o,n,!0))&&(delete this[o],i=!0)}return i}normalize(n){const s=this,r={};return V.forEach(this,(i,o)=>{const l=V.findKey(r,o);if(l){s[l]=uu(i),delete s[o];return}const c=n?HI(o):String(o).trim();c!==o&&delete s[o],s[c]=uu(i),r[c]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return V.forEach(this,(r,i)=>{r!=null&&r!==!1&&(s[i]=n&&V.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const r=new this(n);return s.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[yw]=this[yw]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=dl(l);r[c]||(UI(i,l),r[c]=!0)}return V.isArray(n)?n.forEach(o):o(n),this}};vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(vn.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(r){this[s]=r}}});V.freezeMethods(vn);function wp(t,n){const s=this||Hc,r=n||s,i=vn.from(r.headers);let o=r.data;return V.forEach(t,function(c){o=c.call(s,o,i.normalize(),n?n.status:void 0)}),i.normalize(),o}function GC(t){return!!(t&&t.__CANCEL__)}function Vo(t,n,s){ye.call(this,t??"canceled",ye.ERR_CANCELED,n,s),this.name="CanceledError"}V.inherits(Vo,ye,{__CANCEL__:!0});function YC(t,n,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):n(new ye("Request failed with status code "+s.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function WI(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function qI(t,n){t=t||10;const s=new Array(t),r=new Array(t);let i=0,o=0,l;return n=n!==void 0?n:1e3,function(d){const u=Date.now(),f=r[o];l||(l=u),s[i]=d,r[i]=u;let h=o,p=0;for(;h!==i;)p+=s[h++],h=h%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),u-l<n)return;const m=f&&u-f;return m?Math.round(p*1e3/m):void 0}}function KI(t,n){let s=0,r=1e3/n,i,o;const l=(u,f=Date.now())=>{s=f,i=null,o&&(clearTimeout(o),o=null),t(...u)};return[(...u)=>{const f=Date.now(),h=f-s;h>=r?l(u,f):(i=u,o||(o=setTimeout(()=>{o=null,l(i)},r-h)))},()=>i&&l(i)]}const tf=(t,n,s=3)=>{let r=0;const i=qI(50,250);return KI(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,d=l-r,u=i(d),f=l<=c;r=l;const h={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&f?(c-l)/u:void 0,event:o,lengthComputable:c!=null,[n?"download":"upload"]:!0};t(h)},s)},vw=(t,n)=>{const s=t!=null;return[r=>n[0]({lengthComputable:s,total:t,loaded:r}),n[1]]},bw=t=>(...n)=>V.asap(()=>t(...n)),GI=Vt.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,Vt.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(Vt.origin),Vt.navigator&&/(msie|trident)/i.test(Vt.navigator.userAgent)):()=>!0,YI=Vt.hasStandardBrowserEnv?{write(t,n,s,r,i,o){const l=[t+"="+encodeURIComponent(n)];V.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),V.isString(r)&&l.push("path="+r),V.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JI(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function XC(t,n,s){let r=!XI(n);return t&&(r||s==!1)?JI(t,n):n}const ww=t=>t instanceof vn?{...t}:t;function na(t,n){n=n||{};const s={};function r(u,f,h,p){return V.isPlainObject(u)&&V.isPlainObject(f)?V.merge.call({caseless:p},u,f):V.isPlainObject(f)?V.merge({},f):V.isArray(f)?f.slice():f}function i(u,f,h,p){if(V.isUndefined(f)){if(!V.isUndefined(u))return r(void 0,u,h,p)}else return r(u,f,h,p)}function o(u,f){if(!V.isUndefined(f))return r(void 0,f)}function l(u,f){if(V.isUndefined(f)){if(!V.isUndefined(u))return r(void 0,u)}else return r(void 0,f)}function c(u,f,h){if(h in n)return r(u,f);if(h in t)return r(void 0,u)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(u,f,h)=>i(ww(u),ww(f),h,!0)};return V.forEach(Object.keys({...t,...n}),function(f){const h=d[f]||i,p=h(t[f],n[f],f);V.isUndefined(p)&&h!==c||(s[f]=p)}),s}const JC=t=>{const n=na({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=n;if(n.headers=l=vn.from(l),n.url=WC(XC(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),V.isFormData(s)){if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(V.isFunction(s.getHeaders)){const d=s.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([f,h])=>{u.includes(f.toLowerCase())&&l.set(f,h)})}}if(Vt.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(n)),r||r!==!1&&GI(n.url))){const d=i&&o&&YI.read(o);d&&l.set(i,d)}return n},QI=typeof XMLHttpRequest<"u",ZI=QI&&function(t){return new Promise(function(s,r){const i=JC(t);let o=i.data;const l=vn.from(i.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=i,f,h,p,m,x;function y(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function b(){if(!v)return;const j=vn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:j,config:t,request:v};YC(function(C){s(C),y()},function(C){r(C),y()},S),v=null}"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(b)},v.onabort=function(){v&&(r(new ye("Request aborted",ye.ECONNABORTED,t,v)),v=null)},v.onerror=function(N){const S=N&&N.message?N.message:"Network Error",_=new ye(S,ye.ERR_NETWORK,t,v);_.event=N||null,r(_),v=null},v.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||qC;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),r(new ye(N,S.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,t,v)),v=null},o===void 0&&l.setContentType(null),"setRequestHeader"in v&&V.forEach(l.toJSON(),function(N,S){v.setRequestHeader(S,N)}),V.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),c&&c!=="json"&&(v.responseType=i.responseType),u&&([p,x]=tf(u,!0),v.addEventListener("progress",p)),d&&v.upload&&([h,m]=tf(d),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=j=>{v&&(r(!j||j.type?new Vo(null,t,v):j),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const w=WI(i.url);if(w&&Vt.protocols.indexOf(w)===-1){r(new ye("Unsupported protocol "+w+":",ye.ERR_BAD_REQUEST,t));return}v.send(o||null)})},e5=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let r=new AbortController,i;const o=function(u){if(!i){i=!0,c();const f=u instanceof Error?u:this.reason;r.abort(f instanceof ye?f:new Vo(f instanceof Error?f.message:f))}};let l=n&&setTimeout(()=>{l=null,o(new ye(`timeout ${n} of ms exceeded`,ye.ETIMEDOUT))},n);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),t=null)};t.forEach(u=>u.addEventListener("abort",o));const{signal:d}=r;return d.unsubscribe=()=>V.asap(c),d}},t5=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let r=0,i;for(;r<s;)i=r+n,yield t.slice(r,i),r=i},n5=async function*(t,n){for await(const s of s5(t))yield*t5(s,n)},s5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:r}=await n.read();if(s)break;yield r}}finally{await n.cancel()}},jw=(t,n,s,r)=>{const i=n5(t,n);let o=0,l,c=d=>{l||(l=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:u,value:f}=await i.next();if(u){c(),d.close();return}let h=f.byteLength;if(s){let p=o+=h;s(p)}d.enqueue(new Uint8Array(f))}catch(u){throw c(u),u}},cancel(d){return c(d),i.return()}},{highWaterMark:2})},Nw=64*1024,{isFunction:Sd}=V,r5=(({Request:t,Response:n})=>({Request:t,Response:n}))(V.global),{ReadableStream:Sw,TextEncoder:kw}=V.global,Cw=(t,...n)=>{try{return!!t(...n)}catch{return!1}},i5=t=>{t=V.merge.call({skipUndefined:!0},r5,t);const{fetch:n,Request:s,Response:r}=t,i=n?Sd(n):typeof fetch=="function",o=Sd(s),l=Sd(r);if(!i)return!1;const c=i&&Sd(Sw),d=i&&(typeof kw=="function"?(x=>y=>x.encode(y))(new kw):async x=>new Uint8Array(await new s(x).arrayBuffer())),u=o&&c&&Cw(()=>{let x=!1;const y=new s(Vt.origin,{body:new Sw,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!y}),f=l&&c&&Cw(()=>V.isReadableStream(new r("").body)),h={stream:f&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!h[x]&&(h[x]=(y,v)=>{let b=y&&y[x];if(b)return b.call(y);throw new ye(`Response type '${x}' is not supported`,ye.ERR_NOT_SUPPORT,v)})});const p=async x=>{if(x==null)return 0;if(V.isBlob(x))return x.size;if(V.isSpecCompliantForm(x))return(await new s(Vt.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(V.isArrayBufferView(x)||V.isArrayBuffer(x))return x.byteLength;if(V.isURLSearchParams(x)&&(x=x+""),V.isString(x))return(await d(x)).byteLength},m=async(x,y)=>{const v=V.toFiniteNumber(x.getContentLength());return v??p(y)};return async x=>{let{url:y,method:v,data:b,signal:w,cancelToken:j,timeout:N,onDownloadProgress:S,onUploadProgress:_,responseType:C,headers:k,withCredentials:E="same-origin",fetchOptions:M}=JC(x),D=n||fetch;C=C?(C+"").toLowerCase():"text";let R=e5([w,j&&j.toAbortSignal()],N),T=null;const P=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let L;try{if(_&&u&&v!=="get"&&v!=="head"&&(L=await m(k,b))!==0){let H=new s(y,{method:"POST",body:b,duplex:"half"}),X;if(V.isFormData(b)&&(X=H.headers.get("content-type"))&&k.setContentType(X),H.body){const[Q,ie]=vw(L,tf(bw(_)));b=jw(H.body,Nw,Q,ie)}}V.isString(E)||(E=E?"include":"omit");const F=o&&"credentials"in s.prototype,B={...M,signal:R,method:v.toUpperCase(),headers:k.normalize().toJSON(),body:b,duplex:"half",credentials:F?E:void 0};T=o&&new s(y,B);let A=await(o?D(T,M):D(y,B));const O=f&&(C==="stream"||C==="response");if(f&&(S||O&&P)){const H={};["status","statusText","headers"].forEach(oe=>{H[oe]=A[oe]});const X=V.toFiniteNumber(A.headers.get("content-length")),[Q,ie]=S&&vw(X,tf(bw(S),!0))||[];A=new r(jw(A.body,Nw,Q,()=>{ie&&ie(),P&&P()}),H)}C=C||"text";let z=await h[V.findKey(h,C)||"text"](A,x);return!O&&P&&P(),await new Promise((H,X)=>{YC(H,X,{data:z,headers:vn.from(A.headers),status:A.status,statusText:A.statusText,config:x,request:T})})}catch(F){throw P&&P(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,x,T),{cause:F.cause||F}):ye.from(F,F&&F.code,x,T)}}},a5=new Map,QC=t=>{let n=t?t.env:{};const{fetch:s,Request:r,Response:i}=n,o=[r,i,s];let l=o.length,c=l,d,u,f=a5;for(;c--;)d=o[c],u=f.get(d),u===void 0&&f.set(d,u=c?new Map:i5(n)),f=u;return u};QC();const Ng={http:NI,xhr:ZI,fetch:{get:QC}};V.forEach(Ng,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const _w=t=>`- ${t}`,o5=t=>V.isFunction(t)||t===null||t===!1,ZC={getAdapter:(t,n)=>{t=V.isArray(t)?t:[t];const{length:s}=t;let r,i;const o={};for(let l=0;l<s;l++){r=t[l];let c;if(i=r,!o5(r)&&(i=Ng[(c=String(r)).toLowerCase()],i===void 0))throw new ye(`Unknown adapter '${c}'`);if(i&&(V.isFunction(i)||(i=i.get(n))))break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=s?l.length>1?`since :
`+l.map(_w).join(`
`):" "+_w(l[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Ng};function jp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vo(null,t)}function Ew(t){return jp(t),t.headers=vn.from(t.headers),t.data=wp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZC.getAdapter(t.adapter||Hc.adapter,t)(t).then(function(r){return jp(t),r.data=wp.call(t,t.transformResponse,r),r.headers=vn.from(r.headers),r},function(r){return GC(r)||(jp(t),r&&r.response&&(r.response.data=wp.call(t,t.transformResponse,r.response),r.response.headers=vn.from(r.response.headers))),Promise.reject(r)})}const e2="1.12.2",rh={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{rh[t]=function(r){return typeof r===t||"a"+(n<1?"n ":" ")+t}});const Tw={};rh.transitional=function(n,s,r){function i(o,l){return"[Axios v"+e2+"] Transitional option '"+o+"'"+l+(r?". "+r:"")}return(o,l,c)=>{if(n===!1)throw new ye(i(l," has been removed"+(s?" in "+s:"")),ye.ERR_DEPRECATED);return s&&!Tw[l]&&(Tw[l]=!0,console.warn(i(l," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(o,l,c):!0}};rh.spelling=function(n){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function l5(t,n,s){if(typeof t!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],l=n[o];if(l){const c=t[o],d=c===void 0||l(c,o,t);if(d!==!0)throw new ye("option "+o+" must be "+d,ye.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ye("Unknown option "+o,ye.ERR_BAD_OPTION)}}const fu={assertOptions:l5,validators:rh},Es=fu.validators;let Hi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new xw,response:new xw}}async request(n,s){try{return await this._request(n,s)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=na(this.defaults,s);const{transitional:r,paramsSerializer:i,headers:o}=s;r!==void 0&&fu.assertOptions(r,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),i!=null&&(V.isFunction(i)?s.paramsSerializer={serialize:i}:fu.assertOptions(i,{encode:Es.function,serialize:Es.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),fu.assertOptions(s,{baseUrl:Es.spelling("baseURL"),withXsrfToken:Es.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=o&&V.merge(o.common,o[s.method]);o&&V.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),s.headers=vn.concat(l,o);const c=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(d=d&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let f,h=0,p;if(!d){const x=[Ew.bind(this),void 0];for(x.unshift(...c),x.push(...u),p=x.length,f=Promise.resolve(s);h<p;)f=f.then(x[h++],x[h++]);return f}p=c.length;let m=s;for(;h<p;){const x=c[h++],y=c[h++];try{m=x(m)}catch(v){y.call(this,v);break}}try{f=Ew.call(this,m)}catch(x){return Promise.reject(x)}for(h=0,p=u.length;h<p;)f=f.then(u[h++],u[h++]);return f}getUri(n){n=na(this.defaults,n);const s=XC(n.baseURL,n.url,n.allowAbsoluteUrls);return WC(s,n.params,n.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(n){Hi.prototype[n]=function(s,r){return this.request(na(r||{},{method:n,url:s,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(n){function s(r){return function(o,l,c){return this.request(na(c||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Hi.prototype[n]=s(),Hi.prototype[n+"Form"]=s(!0)});let c5=class t2{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{r.subscribe(c),o=c}).then(i);return l.cancel=function(){r.unsubscribe(o)},l},n(function(o,l,c){r.reason||(r.reason=new Vo(o,l,c),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=r=>{n.abort(r)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new t2(function(i){n=i}),cancel:n}}};function d5(t){return function(s){return t.apply(null,s)}}function u5(t){return V.isObject(t)&&t.isAxiosError===!0}const Sg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sg).forEach(([t,n])=>{Sg[n]=t});function n2(t){const n=new Hi(t),s=RC(Hi.prototype.request,n);return V.extend(s,Hi.prototype,n,{allOwnKeys:!0}),V.extend(s,n,null,{allOwnKeys:!0}),s.create=function(i){return n2(na(t,i))},s}const ct=n2(Hc);ct.Axios=Hi;ct.CanceledError=Vo;ct.CancelToken=c5;ct.isCancel=GC;ct.VERSION=e2;ct.toFormData=sh;ct.AxiosError=ye;ct.Cancel=ct.CanceledError;ct.all=function(n){return Promise.all(n)};ct.spread=d5;ct.isAxiosError=u5;ct.mergeConfig=na;ct.AxiosHeaders=vn;ct.formToJSON=t=>KC(V.isHTMLForm(t)?new FormData(t):t);ct.getAdapter=ZC.getAdapter;ct.HttpStatusCode=Sg;ct.default=ct;const{Axios:_re,AxiosError:Ere,CanceledError:Tre,isCancel:Mre,CancelToken:Are,VERSION:Pre,all:Rre,Cancel:Ore,isAxiosError:Dre,spread:Ire,toFormData:Lre,AxiosHeaders:$re,HttpStatusCode:Fre,formToJSON:zre,getAdapter:Bre,mergeConfig:Vre}=ct;function f5(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const h5=t=>{switch(t){case"success":return g5;case"info":return y5;case"warning":return x5;case"error":return v5;default:return null}},p5=Array(12).fill(0),m5=({visible:t,className:n})=>G.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},p5.map((s,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),g5=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),x5=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),y5=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v5=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),b5=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),w5=()=>{const[t,n]=G.useState(document.hidden);return G.useEffect(()=>{const s=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let kg=1;class j5{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const s=this.subscribers.indexOf(n);this.subscribers.splice(s,1)}),this.publish=n=>{this.subscribers.forEach(s=>s(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var s;const{message:r,...i}=n,o=typeof(n==null?void 0:n.id)=="number"||((s=n.id)==null?void 0:s.length)>0?n.id:kg++,l=this.toasts.find(d=>d.id===o),c=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...n,id:o,title:r}),{...d,...n,id:o,dismissible:c,title:r}):d):this.addToast({title:r,...i,dismissible:c,id:o}),o},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:n,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),n),this.message=(n,s)=>this.create({...s,message:n}),this.error=(n,s)=>this.create({...s,message:n,type:"error"}),this.success=(n,s)=>this.create({...s,type:"success",message:n}),this.info=(n,s)=>this.create({...s,type:"info",message:n}),this.warning=(n,s)=>this.create({...s,type:"warning",message:n}),this.loading=(n,s)=>this.create({...s,type:"loading",message:n}),this.promise=(n,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:n,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const i=Promise.resolve(n instanceof Function?n():n);let o=r!==void 0,l;const c=i.then(async u=>{if(l=["resolve",u],G.isValidElement(u))o=!1,this.create({id:r,type:"default",message:u});else if(S5(u)&&!u.ok){o=!1;const h=typeof s.error=="function"?await s.error(`HTTP error! status: ${u.status}`):s.error,p=typeof s.description=="function"?await s.description(`HTTP error! status: ${u.status}`):s.description,x=typeof h=="object"&&!G.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...x})}else if(u instanceof Error){o=!1;const h=typeof s.error=="function"?await s.error(u):s.error,p=typeof s.description=="function"?await s.description(u):s.description,x=typeof h=="object"&&!G.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...x})}else if(s.success!==void 0){o=!1;const h=typeof s.success=="function"?await s.success(u):s.success,p=typeof s.description=="function"?await s.description(u):s.description,x=typeof h=="object"&&!G.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...x})}}).catch(async u=>{if(l=["reject",u],s.error!==void 0){o=!1;const f=typeof s.error=="function"?await s.error(u):s.error,h=typeof s.description=="function"?await s.description(u):s.description,m=typeof f=="object"&&!G.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...m})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),s.finally==null||s.finally.call(s)}),d=()=>new Promise((u,f)=>c.then(()=>l[0]==="reject"?f(l[1]):u(l[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(n,s)=>{const r=(s==null?void 0:s.id)||kg++;return this.create({jsx:n(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const un=new j5,N5=(t,n)=>{const s=(n==null?void 0:n.id)||kg++;return un.addToast({title:t,...n,id:s}),s},S5=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",k5=N5,C5=()=>un.toasts,_5=()=>un.getActiveToasts(),$=Object.assign(k5,{success:un.success,info:un.info,warning:un.warning,error:un.error,custom:un.custom,message:un.message,promise:un.promise,dismiss:un.dismiss,loading:un.loading},{getHistory:C5,getToasts:_5});f5("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kd(t){return t.label!==void 0}const E5=3,T5="24px",M5="16px",Mw=4e3,A5=356,P5=14,R5=45,O5=200;function Ts(...t){return t.filter(Boolean).join(" ")}function D5(t){const[n,s]=t.split("-"),r=[];return n&&r.push(n),s&&r.push(s),r}const I5=t=>{var n,s,r,i,o,l,c,d,u;const{invert:f,toast:h,unstyled:p,interacting:m,setHeights:x,visibleToasts:y,heights:v,index:b,toasts:w,expanded:j,removeToast:N,defaultRichColors:S,closeButton:_,style:C,cancelButtonStyle:k,actionButtonStyle:E,className:M="",descriptionClassName:D="",duration:R,position:T,gap:P,expandByDefault:L,classNames:F,icons:B,closeButtonAriaLabel:A="Close toast"}=t,[O,z]=G.useState(null),[H,X]=G.useState(null),[Q,ie]=G.useState(!1),[oe,je]=G.useState(!1),[Z,ae]=G.useState(!1),[Pe,ke]=G.useState(!1),[Ne,xe]=G.useState(!1),[jt,_t]=G.useState(0),[q,Ee]=G.useState(0),_e=G.useRef(h.duration||R||Mw),Lt=G.useRef(null),nt=G.useRef(null),nd=b===0,sd=b+1<=y,Nn=h.type,Na=h.dismissible!==!1,CR=h.className||"",_R=h.descriptionClassName||"",rd=G.useMemo(()=>v.findIndex(be=>be.toastId===h.id)||0,[v,h.id]),ER=G.useMemo(()=>{var be;return(be=h.closeButton)!=null?be:_},[h.closeButton,_]),B0=G.useMemo(()=>h.duration||R||Mw,[h.duration,R]),Uh=G.useRef(0),Sa=G.useRef(0),V0=G.useRef(0),ka=G.useRef(null),[TR,MR]=T.split("-"),H0=G.useMemo(()=>v.reduce((be,Nt,$t)=>$t>=rd?be:be+Nt.height,0),[v,rd]),U0=w5(),AR=h.invert||f,Wh=Nn==="loading";Sa.current=G.useMemo(()=>rd*P+H0,[rd,H0]),G.useEffect(()=>{_e.current=B0},[B0]),G.useEffect(()=>{ie(!0)},[]),G.useEffect(()=>{const be=nt.current;if(be){const Nt=be.getBoundingClientRect().height;return Ee(Nt),x($t=>[{toastId:h.id,height:Nt,position:h.position},...$t]),()=>x($t=>$t.filter(Sn=>Sn.toastId!==h.id))}},[x,h.id]),G.useLayoutEffect(()=>{if(!Q)return;const be=nt.current,Nt=be.style.height;be.style.height="auto";const $t=be.getBoundingClientRect().height;be.style.height=Nt,Ee($t),x(Sn=>Sn.find(Et=>Et.toastId===h.id)?Sn.map(Et=>Et.toastId===h.id?{...Et,height:$t}:Et):[{toastId:h.id,height:$t,position:h.position},...Sn])},[Q,h.title,h.description,x,h.id,h.jsx,h.action,h.cancel]);const jr=G.useCallback(()=>{je(!0),_t(Sa.current),x(be=>be.filter(Nt=>Nt.toastId!==h.id)),setTimeout(()=>{N(h)},O5)},[h,N,x,Sa]);G.useEffect(()=>{if(h.promise&&Nn==="loading"||h.duration===1/0||h.type==="loading")return;let be;return j||m||U0?(()=>{if(V0.current<Uh.current){const Sn=new Date().getTime()-Uh.current;_e.current=_e.current-Sn}V0.current=new Date().getTime()})():(()=>{_e.current!==1/0&&(Uh.current=new Date().getTime(),be=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),jr()},_e.current))})(),()=>clearTimeout(be)},[j,m,h,Nn,U0,jr]),G.useEffect(()=>{h.delete&&(jr(),h.onDismiss==null||h.onDismiss.call(h,h))},[jr,h.delete]);function PR(){var be;if(B!=null&&B.loading){var Nt;return G.createElement("div",{className:Ts(F==null?void 0:F.loader,h==null||(Nt=h.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Nn==="loading"},B.loading)}return G.createElement(m5,{className:Ts(F==null?void 0:F.loader,h==null||(be=h.classNames)==null?void 0:be.loader),visible:Nn==="loading"})}const RR=h.icon||(B==null?void 0:B[Nn])||h5(Nn);var W0,q0;return G.createElement("li",{tabIndex:0,ref:nt,className:Ts(M,CR,F==null?void 0:F.toast,h==null||(n=h.classNames)==null?void 0:n.toast,F==null?void 0:F.default,F==null?void 0:F[Nn],h==null||(s=h.classNames)==null?void 0:s[Nn]),"data-sonner-toast":"","data-rich-colors":(W0=h.richColors)!=null?W0:S,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":Q,"data-promise":!!h.promise,"data-swiped":Ne,"data-removed":oe,"data-visible":sd,"data-y-position":TR,"data-x-position":MR,"data-index":b,"data-front":nd,"data-swiping":Z,"data-dismissible":Na,"data-type":Nn,"data-invert":AR,"data-swipe-out":Pe,"data-swipe-direction":H,"data-expanded":!!(j||L&&Q),"data-testid":h.testId,style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${oe?jt:Sa.current}px`,"--initial-height":L?"auto":`${q}px`,...C,...h.style},onDragEnd:()=>{ae(!1),z(null),ka.current=null},onPointerDown:be=>{be.button!==2&&(Wh||!Na||(Lt.current=new Date,_t(Sa.current),be.target.setPointerCapture(be.pointerId),be.target.tagName!=="BUTTON"&&(ae(!0),ka.current={x:be.clientX,y:be.clientY})))},onPointerUp:()=>{var be,Nt,$t;if(Pe||!Na)return;ka.current=null;const Sn=Number(((be=nt.current)==null?void 0:be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),id=Number(((Nt=nt.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Et=new Date().getTime()-(($t=Lt.current)==null?void 0:$t.getTime()),zn=O==="x"?Sn:id,ad=Math.abs(zn)/Et;if(Math.abs(zn)>=R5||ad>.11){_t(Sa.current),h.onDismiss==null||h.onDismiss.call(h,h),X(O==="x"?Sn>0?"right":"left":id>0?"down":"up"),jr(),ke(!0);return}else{var ts,ns;(ts=nt.current)==null||ts.style.setProperty("--swipe-amount-x","0px"),(ns=nt.current)==null||ns.style.setProperty("--swipe-amount-y","0px")}xe(!1),ae(!1),z(null)},onPointerMove:be=>{var Nt,$t,Sn;if(!ka.current||!Na||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;const Et=be.clientY-ka.current.y,zn=be.clientX-ka.current.x;var ad;const ts=(ad=t.swipeDirections)!=null?ad:D5(T);!O&&(Math.abs(zn)>1||Math.abs(Et)>1)&&z(Math.abs(zn)>Math.abs(Et)?"x":"y");let ns={x:0,y:0};const K0=ki=>1/(1.5+Math.abs(ki)/20);if(O==="y"){if(ts.includes("top")||ts.includes("bottom"))if(ts.includes("top")&&Et<0||ts.includes("bottom")&&Et>0)ns.y=Et;else{const ki=Et*K0(Et);ns.y=Math.abs(ki)<Math.abs(Et)?ki:Et}}else if(O==="x"&&(ts.includes("left")||ts.includes("right")))if(ts.includes("left")&&zn<0||ts.includes("right")&&zn>0)ns.x=zn;else{const ki=zn*K0(zn);ns.x=Math.abs(ki)<Math.abs(zn)?ki:zn}(Math.abs(ns.x)>0||Math.abs(ns.y)>0)&&xe(!0),($t=nt.current)==null||$t.style.setProperty("--swipe-amount-x",`${ns.x}px`),(Sn=nt.current)==null||Sn.style.setProperty("--swipe-amount-y",`${ns.y}px`)}},ER&&!h.jsx&&Nn!=="loading"?G.createElement("button",{"aria-label":A,"data-disabled":Wh,"data-close-button":!0,onClick:Wh||!Na?()=>{}:()=>{jr(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Ts(F==null?void 0:F.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(q0=B==null?void 0:B.close)!=null?q0:b5):null,(Nn||h.icon||h.promise)&&h.icon!==null&&((B==null?void 0:B[Nn])!==null||h.icon)?G.createElement("div",{"data-icon":"",className:Ts(F==null?void 0:F.icon,h==null||(i=h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||PR():null,h.type!=="loading"?RR:null):null,G.createElement("div",{"data-content":"",className:Ts(F==null?void 0:F.content,h==null||(o=h.classNames)==null?void 0:o.content)},G.createElement("div",{"data-title":"",className:Ts(F==null?void 0:F.title,h==null||(l=h.classNames)==null?void 0:l.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?G.createElement("div",{"data-description":"",className:Ts(D,_R,F==null?void 0:F.description,h==null||(c=h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),G.isValidElement(h.cancel)?h.cancel:h.cancel&&kd(h.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:be=>{kd(h.cancel)&&Na&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,be),jr())},className:Ts(F==null?void 0:F.cancelButton,h==null||(d=h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,G.isValidElement(h.action)?h.action:h.action&&kd(h.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||E,onClick:be=>{kd(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,be),!be.defaultPrevented&&jr())},className:Ts(F==null?void 0:F.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function Aw(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function L5(t,n){const s={};return[t,n].forEach((r,i)=>{const o=i===1,l=o?"--mobile-offset":"--offset",c=o?M5:T5;function d(u){["top","right","bottom","left"].forEach(f=>{s[`${l}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?s[`${l}-${u}`]=c:s[`${l}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):d(c)}),s}const wr=G.forwardRef(function(n,s){const{id:r,invert:i,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:u,offset:f,mobileOffset:h,theme:p="light",richColors:m,duration:x,style:y,visibleToasts:v=E5,toastOptions:b,dir:w=Aw(),gap:j=P5,icons:N,containerAriaLabel:S="Notifications"}=n,[_,C]=G.useState([]),k=G.useMemo(()=>r?_.filter(Q=>Q.toasterId===r):_.filter(Q=>!Q.toasterId),[_,r]),E=G.useMemo(()=>Array.from(new Set([o].concat(k.filter(Q=>Q.position).map(Q=>Q.position)))),[k,o]),[M,D]=G.useState([]),[R,T]=G.useState(!1),[P,L]=G.useState(!1),[F,B]=G.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=G.useRef(null),O=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=G.useRef(null),H=G.useRef(!1),X=G.useCallback(Q=>{C(ie=>{var oe;return(oe=ie.find(je=>je.id===Q.id))!=null&&oe.delete||un.dismiss(Q.id),ie.filter(({id:je})=>je!==Q.id)})},[]);return G.useEffect(()=>un.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{C(ie=>ie.map(oe=>oe.id===Q.id?{...oe,delete:!0}:oe))});return}setTimeout(()=>{hC.flushSync(()=>{C(ie=>{const oe=ie.findIndex(je=>je.id===Q.id);return oe!==-1?[...ie.slice(0,oe),{...ie[oe],...Q},...ie.slice(oe+1)]:[Q,...ie]})})})}),[_]),G.useEffect(()=>{if(p!=="system"){B(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:ie})=>{B(ie?"dark":"light")})}catch{Q.addListener(({matches:oe})=>{try{B(oe?"dark":"light")}catch(je){console.error(je)}})}},[p]),G.useEffect(()=>{_.length<=1&&T(!1)},[_]),G.useEffect(()=>{const Q=ie=>{var oe;if(l.every(ae=>ie[ae]||ie.code===ae)){var Z;T(!0),(Z=A.current)==null||Z.focus()}ie.code==="Escape"&&(document.activeElement===A.current||(oe=A.current)!=null&&oe.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[l]),G.useEffect(()=>{if(A.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,H.current=!1)}},[A.current]),G.createElement("section",{ref:s,"aria-label":`${S} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((Q,ie)=>{var oe;const[je,Z]=Q.split("-");return k.length?G.createElement("ol",{key:Q,dir:w==="auto"?Aw():w,tabIndex:-1,ref:A,className:u,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":je,"data-x-position":Z,style:{"--front-toast-height":`${((oe=M[0])==null?void 0:oe.height)||0}px`,"--width":`${A5}px`,"--gap":`${j}px`,...y,...L5(f,h)},onBlur:ae=>{H.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(H.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||H.current||(H.current=!0,z.current=ae.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{P||T(!1)},onDragEnd:()=>T(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},k.filter(ae=>!ae.position&&ie===0||ae.position===Q).map((ae,Pe)=>{var ke,Ne;return G.createElement(I5,{key:ae.id,icons:N,index:Pe,toast:ae,defaultRichColors:m,duration:(ke=b==null?void 0:b.duration)!=null?ke:x,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:i,visibleToasts:v,closeButton:(Ne=b==null?void 0:b.closeButton)!=null?Ne:d,interacting:P,position:Q,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,closeButtonAriaLabel:b==null?void 0:b.closeButtonAriaLabel,removeToast:X,toasts:k.filter(xe=>xe.position==ae.position),heights:M.filter(xe=>xe.position==ae.position),setHeights:D,expandByDefault:c,gap:j,expanded:R,swipeDirections:n.swipeDirections})})):null}))}),I=ct.create({baseURL:"https://api.nutryah.com/api",withCredentials:!0});I.interceptors.request.use(t=>{const n=localStorage.getItem("access_token");return n&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${n}`),t});I.interceptors.response.use(t=>t,t=>{var s,r,i,o;const n=((r=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:r.detail)||((o=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:o.message)||(t==null?void 0:t.message)||"Unexpected error";return $.error(n),Promise.reject(t)});I.interceptors.response.use(t=>t,t=>{var s;return((s=t==null?void 0:t.response)==null?void 0:s.status)===401&&(localStorage.clear(),delete I.defaults.headers.common.Authorization),Promise.reject(t)});const lt=PC(t=>({user:null,modules:{},loading:!1,registerAdmin:async n=>I.post("/auth/register-admin",n),login:async({email:n,password:s})=>{const{data:r}=await I.post("/auth/login",{email:n,password:s});return r},verifyOtp:async({email:n,otp:s})=>{const{data:r}=await I.post("/auth/verify-otp",{email:n,otp:s});return localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token),I.defaults.headers.common.Authorization=`Bearer ${r.access_token}`,r},fetchProfile:async()=>{try{t({loading:!0});const n=await I.get("/auth/me"),s=await I.get("/auth/me/permissions");t({user:n.data,modules:s.data.modules})}finally{t({loading:!1})}},logout:()=>{localStorage.clear(),delete I.defaults.headers.common.Authorization,t({user:null,modules:{}})}}));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,r)=>r?r.toUpperCase():s.toLowerCase()),Pw=t=>{const n=F5(t);return n.charAt(0).toUpperCase()+n.slice(1)},s2=(...t)=>t.filter((n,s,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===s).join(" ").trim(),z5=t=>{for(const n in t)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=g.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...c},d)=>g.createElement("svg",{ref:d,...B5,width:n,height:n,stroke:t,strokeWidth:r?Number(s)*24/Number(n):s,className:s2("lucide",i),...!o&&!z5(c)&&{"aria-hidden":"true"},...c},[...l.map(([u,f])=>g.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,n)=>{const s=g.forwardRef(({className:r,...i},o)=>g.createElement(V5,{ref:o,iconNode:n,className:s2(`lucide-${$5(Pw(t))}`,`lucide-${t}`,r),...i}));return s.displayName=Pw(t),s};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],si=Y("activity",H5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],W5=Y("arrow-left-right",U5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],r2=Y("arrow-left",q5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G5=Y("ban",K5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],Cg=Y("bed-double",Y5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],J5=Y("boxes",X5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],i2=Y("building-2",Q5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],ih=Y("calendar-clock",Z5);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],tL=Y("calendar-days",eL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Rw=Y("calendar-range",nL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rL=Y("calendar",sL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ho=Y("check",iL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oy=Y("chevron-down",aL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],a2=Y("chevron-left",oL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],o2=Y("chevron-right",lL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dL=Y("chevron-up",cL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ga=Y("circle-check",uL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Uc=Y("circle-x",fL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ao=Y("clipboard-list",hL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$l=Y("clock-3",pL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],l2=Y("clock",mL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],xL=Y("credit-card",gL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],Cd=Y("dot",yL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Dy=Y("download",vL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],wL=Y("droplet",bL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],NL=Y("droplets",jL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kL=Y("earth",SL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_L=Y("eye-off",CL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],TL=Y("factory",EL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AL=Y("eye",ML);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],Ow=Y("file-check-2",PL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],OL=Y("file-down",RL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]],c2=Y("file-plus-2",DL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nf=Y("file-text",IL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Dw=Y("file",LL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],sf=Y("flask-conical",$L);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],d2=Y("funnel",FL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],Iw=Y("heart-pulse",zL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],VL=Y("history",BL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],UL=Y("house",HL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qL=Y("image",WL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],u2=Y("indian-rupee",KL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Lw=Y("info",GL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],nr=Y("key-round",YL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],JL=Y("layout-dashboard",XL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],ZL=Y("layout-template",QL);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],t$=Y("link",e$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],s$=Y("list-checks",n$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ms=Y("loader-circle",r$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],a$=Y("log-out",i$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],l$=Y("lock",o$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Iy=Y("mail",c$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_g=Y("map-pin",d$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M5 12h14",key:"1ays0h"}]],f$=Y("minus",u$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],$w=Y("notebook-pen",h$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],m$=Y("octagon-alert",p$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],f2=Y("package",g$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Ly=Y("paperclip",x$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],xa=Y("pencil",y$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],b$=Y("phone",v$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],hu=Y("pill",w$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],N$=Y("play",j$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wt=Y("plus",S$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]],C$=Y("receipt-text",k$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],$y=Y("receipt",_$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ah=Y("refresh-cw",E$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fy=Y("rotate-ccw",T$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],A$=Y("rotate-cw",M$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],h2=Y("ruler",P$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],O$=Y("save",R$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],p2=Y("scale",D$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Nl=Y("scan",I$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],$$=Y("scissors",L$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],z$=Y("scroll-text",F$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cn=Y("search",B$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H$=Y("settings",V$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wc=Y("shield-check",U$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],zy=Y("shopping-cart",W$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],K$=Y("stamp",q$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],qc=Y("stethoscope",G$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],m2=Y("thermometer",Y$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M12 14v-4",key:"1evpnu"}],["path",{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6",key:"1ts96g"}],["path",{d:"M9 17H4v5",key:"8t5av"}]],J$=Y("timer-reset",X$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ws=Y("trash-2",Q$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oh=Y("triangle-alert",Z$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],tF=Y("truck",eF);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pc=Y("upload",nF);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],lh=Y("user-round",sF);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_d=Y("users",rF);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dn=Y("x",iF);function aF(){var m;const t=Fn(),[n,s]=g.useState({email:((m=t.state)==null?void 0:m.email)||"",password:""}),[r,i]=g.useState(""),[o,l]=g.useState(!1),[c,d]=g.useState(!1),u=lt(x=>x.login),f=jn(),h=g.useMemo(()=>n.email.trim()&&n.password.trim()&&!o,[n,o]),p=async x=>{var y,v;if(x.preventDefault(),!!h){i(""),l(!0);try{await u({email:n.email.trim(),password:n.password}),localStorage.setItem("pending_email",n.email.trim()),f("/auth/verify",{state:{email:n.email.trim()}})}catch(b){i(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Invalid email or password")}finally{l(!1)}}};return a.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-white",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[a.jsx("div",{className:"absolute -left-24 -top-24 h-64 w-64 rounded-full bg-blue-100 blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute -right-24 -bottom-24 h-72 w-72 rounded-full bg-indigo-100 blur-3xl animate-pulse"})]}),a.jsx("div",{className:"relative z-10 grid min-h-screen place-items-center px-4 py-10",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-100 bg-white/80 p-6 shadow-sm backdrop-blur",children:[a.jsx("div",{className:"pointer-events-none absolute -right-12 -top-12 h-32 w-32 rotate-45 bg-gradient-to-br from-blue-50 to-indigo-50"}),a.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-blue-600 text-white ring-8 ring-blue-50",children:a.jsx("span",{className:"text-sm font-bold tracking-tight",children:"NDH"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"NUTRYAH's HIMS & EMR"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Secure sign-in with email + OTP"})]})]}),a.jsx(Wc,{className:"h-6 w-6 text-emerald-600"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4","aria-busy":o,children:[a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Email"}),a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 focus-within:ring-2 focus-within:ring-blue-200",children:[a.jsx(Iy,{className:"h-4 w-4 text-gray-400"}),a.jsx("input",{className:"w-full bg-transparent outline-none placeholder:text-gray-400",placeholder:"you@hospital.org",type:"email",autoComplete:"email",value:n.email,onChange:x=>s({...n,email:x.target.value}),required:!0,disabled:o})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("span",{className:"mb-1 block text-sm text-gray-600",children:"Password"}),a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 focus-within:ring-2 focus-within:ring-blue-200",children:[a.jsx(l$,{className:"h-4 w-4 text-gray-400"}),a.jsx("input",{className:"w-full bg-transparent outline-none placeholder:text-gray-400",placeholder:"",type:c?"text":"password",autoComplete:"current-password",value:n.password,onChange:x=>s({...n,password:x.target.value}),required:!0,disabled:o}),a.jsx("button",{type:"button",onClick:()=>d(x=>!x),className:"rounded-lg p-1.5 text-gray-500 hover:bg-gray-50","aria-label":c?"Hide password":"Show password",tabIndex:-1,disabled:o,children:c?a.jsx(_L,{className:"h-4 w-4"}):a.jsx(AL,{className:"h-4 w-4"})})]})]}),a.jsx("button",{className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2.5 text-white shadow-sm transition active:scale-[0.99] disabled:cursor-not-allowed disabled:opacity-60",disabled:!h,type:"submit",children:o?a.jsxs(a.Fragment,{children:[a.jsx(ms,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{children:"Sending OTP"})]}):a.jsx(a.Fragment,{children:"Send OTP"})}),r&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:r}),a.jsx("p",{className:"text-center text-xs text-gray-500",children:"Tip: Youll receive a 6-digit OTP in your email. Keep this tab open."})]}),o&&a.jsx("div",{className:"absolute inset-0 grid place-items-center rounded-2xl bg-white/70 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-xs rounded-xl border border-gray-100 bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-700",children:[a.jsx(ms,{className:"h-4 w-4 animate-spin text-blue-600"}),"Sending OTP"]}),a.jsx("div",{className:"relative h-2 overflow-hidden rounded-full bg-gray-100",children:a.jsx("div",{className:"absolute inset-y-0 left-0 w-1/3 animate-[progress_1.2s_infinite] rounded-full bg-gradient-to-r from-blue-500 to-indigo-500"})}),a.jsxs("div",{className:"mt-3 flex items-center justify-center gap-1",children:[a.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500 [animation-delay:-0.2s]"}),a.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500 [animation-delay:-0.1s]"}),a.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-blue-500"})]})]})})]}),a.jsxs("div",{className:"mx-auto mt-6 text-center text-xs text-gray-500",children:[" ",new Date().getFullYear()," NUTRYAH  Secure Access"]})]})}),a.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-120%); }
          100% { transform: translateX(300%); }
        }
      `})]})}function oF(){const[t,n]=g.useState({name:"",email:"",password:"",confirm_password:""}),s=lt(c=>c.registerAdmin),r=jn(),[i,o]=g.useState(!1);g.useEffect(()=>{I.get("/admin/status").then(c=>o(c.data.admin_exists))},[]);const l=async c=>{c.preventDefault(),!i&&(await s(t),alert("Admin registered. Please login."),r("/auth/login"))};return i?a.jsx("div",{className:"min-h-screen grid place-items-center",children:a.jsxs("div",{className:"card max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Admin already exists"}),a.jsx("p",{children:"Registration is disabled."})]})}):a.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:a.jsxs("form",{onSubmit:l,className:"card w-full max-w-md space-y-4",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Create Admin"}),a.jsx("input",{className:"input",placeholder:"Name",value:t.name,onChange:c=>n({...t,name:c.target.value}),required:!0}),a.jsx("input",{className:"input",placeholder:"Email",type:"email",value:t.email,onChange:c=>n({...t,email:c.target.value}),required:!0}),a.jsx("input",{className:"input",placeholder:"Password",type:"password",value:t.password,onChange:c=>n({...t,password:c.target.value}),required:!0}),a.jsx("input",{className:"input",placeholder:"Confirm Password",type:"password",value:t.confirm_password,onChange:c=>n({...t,confirm_password:c.target.value}),required:!0}),a.jsx("button",{className:"btn w-full",children:"Register"})]})})}function lF(){var k;const t=Fn(),n=jn(),s=lt(E=>E.verifyOtp),r=lt(E=>E.fetchProfile),[i]=g.useState(((k=t.state)==null?void 0:k.email)||localStorage.getItem("pending_email")||""),[o,l]=g.useState(["","","","","",""]),[c,d]=g.useState(""),[u,f]=g.useState(!1),[h,p]=g.useState(60),[m,x]=g.useState(!1),y=g.useRef([]);g.useEffect(()=>{i||n("/auth/login",{replace:!0})},[i,n]),g.useEffect(()=>{if(h<=0)return;const E=setInterval(()=>p(M=>M-1),1e3);return()=>clearInterval(E)},[h]);const v=g.useMemo(()=>o.join(""),[o]),b=v.length===6&&!o.includes("")&&!u,w=(E,M)=>{var R;const D=(M||"").replace(/\D/g,"").slice(-1);l(T=>{const P=[...T];return P[E]=D,P}),D&&E<5&&((R=y.current[E+1])==null||R.focus())},j=(E,M)=>{var D,R,T;M.key==="Backspace"?o[E]?l(P=>{const L=[...P];return L[E]="",L}):E>0&&((D=y.current[E-1])==null||D.focus(),l(P=>{const L=[...P];return L[E-1]="",L})):M.key==="ArrowLeft"&&E>0?(R=y.current[E-1])==null||R.focus():M.key==="ArrowRight"&&E<5&&((T=y.current[E+1])==null||T.focus())},N=E=>{var R;E.preventDefault();const M=(E.clipboardData.getData("text")||"").replace(/\D/g,"").slice(0,6);if(!M)return;const D=M.split("");l([D[0]||"",D[1]||"",D[2]||"",D[3]||"",D[4]||"",D[5]||""]),(R=y.current[Math.min(M.length,5)])==null||R.focus()},S=async E=>{var M,D;if(E.preventDefault(),!!b){d(""),f(!0);try{await s({email:i,otp:v}),await r(),x(!0),setTimeout(()=>{const R=lt.getState().user;R!=null&&R.is_admin?n("/admin",{replace:!0}):n("/dashboard",{replace:!0})},400)}catch(R){d(((D=(M=R==null?void 0:R.response)==null?void 0:M.data)==null?void 0:D.detail)||"Invalid or expired OTP")}finally{f(!1)}}},_=()=>{n("/auth/login",{state:{email:i},replace:!0})},C=()=>{_()};return a.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-50 to-white",children:[a.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[a.jsx("div",{className:"absolute -left-24 -top-24 h-64 w-64 rounded-full bg-blue-100 blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute -right-24 -bottom-24 h-72 w-72 rounded-full bg-indigo-100 blur-3xl animate-pulse"})]}),a.jsx("div",{className:"relative z-10 grid min-h-screen place-items-center px-4 py-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-gray-100 bg-white/80 p-6 shadow-sm backdrop-blur",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-blue-600 text-white ring-8 ring-blue-50",children:a.jsx("span",{className:"text-sm font-bold",children:"NDH"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Verify OTP"}),a.jsx("p",{className:"text-xs text-gray-500",children:"We sent a 6-digit code to your email"})]})]}),a.jsx(Wc,{className:"h-6 w-6 text-emerald-600"})]}),a.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-xl border border-gray-100 bg-gray-50 px-3 py-2 text-sm text-gray-700",children:[a.jsx(Iy,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"truncate",children:i}),a.jsx("button",{type:"button",onClick:_,className:"ml-auto text-xs text-blue-700 underline-offset-2 hover:underline",children:"Change"})]}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsx("div",{className:"grid grid-cols-6 gap-2 sm:gap-3",onPaste:N,children:o.map((E,M)=>a.jsx("input",{ref:D=>y.current[M]=D,value:E,inputMode:"numeric",pattern:"[0-9]*",maxLength:1,autoFocus:M===0,onChange:D=>w(M,D.target.value),onKeyDown:D=>j(M,D),className:`h-12 rounded-xl border border-gray-200 text-center text-lg tracking-[0.2em] outline-none transition\r
                               focus:border-blue-400 focus:ring-2 focus:ring-blue-200 sm:h-14`,"aria-label":`OTP digit ${M+1}`},M))}),a.jsx("button",{className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2.5 text-white shadow-sm transition active:scale-[0.99] disabled:cursor-not-allowed disabled:opacity-60",disabled:!b,type:"submit",children:u?a.jsxs(a.Fragment,{children:[a.jsx(ms,{className:"h-5 w-5 animate-spin"}),"Verifying"]}):m?a.jsxs(a.Fragment,{children:[a.jsx(ga,{className:"h-5 w-5"}),"Verified"]}):"Verify & Continue"}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsxs("button",{type:"button",onClick:()=>n("/auth/login"),className:"inline-flex items-center gap-1 rounded-lg px-2 py-1 hover:bg-gray-50",children:[a.jsx(r2,{className:"h-3.5 w-3.5"}),"Back to login"]}),a.jsx("div",{className:"flex items-center gap-2",children:h>0?a.jsxs("span",{className:"rounded-lg bg-gray-50 px-2 py-1 tabular-nums",children:["Resend in ",h,"s"]}):a.jsx("button",{type:"button",onClick:C,className:"rounded-lg bg-gray-900 px-2 py-1 text-white hover:bg-gray-800",children:"Resend OTP"})})]}),c&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",role:"alert","aria-live":"polite",children:c})]}),u&&a.jsx("div",{className:"absolute inset-0 grid place-items-center rounded-2xl bg-white/70 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-xs rounded-xl border border-gray-100 bg-white p-4 shadow-md",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-700",children:[a.jsx(ms,{className:"h-4 w-4 animate-spin text-blue-600"}),"Verifying"]}),a.jsx("div",{className:"relative h-2 overflow-hidden rounded-full bg-gray-100",children:a.jsx("div",{className:"absolute inset-y-0 left-0 w-1/3 animate-[progress_1.1s_infinite_linear] rounded-full bg-gradient-to-r from-blue-500 to-indigo-500"})})]})})]}),a.jsx("div",{className:"mx-auto mt-6 text-center text-xs text-gray-500",children:"Didnt receive the mail? Check Spam/Junk folder."})]})}),a.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-120%); }
          100% { transform: translateX(300%); }
        }
      `})]})}function ch(t){const n=lt(d=>d.modules)||{},s=lt(d=>d.user),r=(s==null?void 0:s.is_admin)&&Object.keys(n).length===0,i=n[t]||[],o=g.useMemo(()=>new Set(i.map(d=>d.code.split(".").pop())),[i]),l=r||i.length>0,c=d=>r||o.has(d);return{hasAny:l,canView:c("view"),canCreate:c("create"),canUpdate:c("update"),canDelete:c("delete")}}function g2(){const{hasAny:t,canView:n,canCreate:s,canUpdate:r,canDelete:i}=ch("departments"),[o,l]=g.useState([]),[c,d]=g.useState({name:"",description:""}),[u,f]=g.useState(null),[h,p]=g.useState(""),[m,x]=g.useState(!1),y=g.useCallback(async()=>{var j,N,S;if(n){p("");try{const{data:_}=await I.get("/departments/");l(_)}catch(_){const C=(j=_==null?void 0:_.response)==null?void 0:j.status;p(C===403?"Access denied for Departments.":C===401?"Session expired. Please login again.":((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load")}}},[n]);g.useEffect(()=>{y()},[y]);const v=async j=>{var N,S,_;if(j.preventDefault(),!(!u&&!s)&&!(u&&!r)){x(!0),p("");try{u?await I.put(`/departments/${u}`,c):await I.post("/departments/",c),d({name:"",description:""}),f(null),y()}catch(C){const k=(N=C==null?void 0:C.response)==null?void 0:N.status;p(k===403?"Access denied.":k===401?"Session expired. Please login again.":((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to save")}finally{x(!1)}}},b=async j=>{var N,S,_;if(i&&confirm("Delete?"))try{await I.delete(`/departments/${j}`),y()}catch(C){const k=(N=C==null?void 0:C.response)==null?void 0:N.status;p(k===403?"Access denied.":k===401?"Session expired. Please login again.":((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to delete")}},w=j=>{r&&(f(j.id),d({name:j.name,description:j.description||""}))};return!t||!n?a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Departments"}),a.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"You dont have access to view this module."})]}):a.jsxs("section",{className:"card",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Departments"})}),a.jsxs("form",{onSubmit:v,className:"grid md:grid-cols-3 gap-3 mb-6",children:[a.jsx("input",{className:"input",placeholder:"Name",value:c.name,onChange:j=>d({...c,name:j.target.value}),required:!0,disabled:!(u?r:s)}),a.jsx("input",{className:"input",placeholder:"Description",value:c.description,onChange:j=>d({...c,description:j.target.value}),disabled:!(u?r:s)}),a.jsx("button",{className:"btn",disabled:m||(u?!r:!s),children:u?"Update":"Create"})]}),h&&a.jsx("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:h}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left",children:[a.jsx("th",{className:"p-2",children:"#"}),a.jsx("th",{className:"p-2",children:"Name"}),a.jsx("th",{className:"p-2",children:"Desc"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((j,N)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:N+1}),a.jsx("td",{className:"p-2",children:j.name}),a.jsx("td",{className:"p-2",children:j.description}),a.jsxs("td",{className:"p-2 text-right space-x-2",children:[r&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>w(j),children:"Edit"}),i&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>b(j.id),children:"Delete"})]})]},j.id)),!o.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"p-4 text-sm text-gray-500",children:"No departments yet."})})]})]})})]})}function x2(){const{hasAny:t,canView:n,canCreate:s,canUpdate:r,canDelete:i}=ch("roles"),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,f]=g.useState({name:"",description:"",permission_ids:[]}),[h,p]=g.useState(null),[m,x]=g.useState(!1),[y,v]=g.useState(""),b=g.useCallback(async()=>{var _,C,k;if(n){v("");try{const[E,M]=await Promise.all([I.get("/roles/"),I.get("/permissions/")]);l(E.data),d(M.data)}catch(E){const M=(_=E==null?void 0:E.response)==null?void 0:_.status;v(M===403?"Access denied for Roles.":M===401?"Session expired. Please login again.":((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Failed to load")}}},[n]);g.useEffect(()=>{b()},[b]);const w=_=>{f(C=>({...C,permission_ids:C.permission_ids.includes(_)?C.permission_ids.filter(k=>k!==_):[...C.permission_ids,_]}))},j=async _=>{var C,k;if(_.preventDefault(),!(!h&&!s)&&!(h&&!r)){x(!0),v("");try{h?await I.put(`/roles/${h}`,u):await I.post("/roles/",u),f({name:"",description:"",permission_ids:[]}),p(null),b()}catch(E){v(((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Failed to save")}finally{x(!1)}}},N=_=>{r&&(p(_.id),f({name:_.name,description:_.description||"",permission_ids:_.permission_ids||[]}))},S=async _=>{var C,k;if(i&&confirm("Delete this role?"))try{await I.delete(`/roles/${_}`),b()}catch(E){v(((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Failed to delete")}};return!t||!n?a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Roles"}),a.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"You dont have access to view this module."})]}):a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Roles"}),a.jsxs("form",{onSubmit:j,className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[a.jsx("input",{className:"input",placeholder:"Role name",value:u.name,onChange:_=>f({...u,name:_.target.value}),required:!0,disabled:!(h?r:s)}),a.jsx("input",{className:"input",placeholder:"Description (optional)",value:u.description,onChange:_=>f({...u,description:_.target.value}),disabled:!(h?r:s)}),a.jsx("button",{className:"btn",disabled:m||(h?!r:!s),children:h?"Update":"Create"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[c.map(_=>a.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-xl border ${u.permission_ids.includes(_.id)?"bg-blue-50 border-blue-300":"border-gray-200"}`,children:[a.jsx("input",{type:"checkbox",checked:u.permission_ids.includes(_.id),onChange:()=>w(_.id),disabled:!(h?r:s)}),a.jsxs("span",{children:[a.jsx("span",{className:"block text-sm font-medium",children:_.label}),a.jsx("span",{className:"block text-xs text-gray-500",children:_.code})]})]},_.id)),!c.length&&a.jsx("div",{className:"text-sm text-gray-500",children:"No permissions yet."})]})]}),y&&a.jsx("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:y}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left",children:[a.jsx("th",{className:"p-2",children:"#"}),a.jsx("th",{className:"p-2",children:"Name"}),a.jsx("th",{className:"p-2",children:"Permissions"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((_,C)=>{var k;return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:C+1}),a.jsx("td",{className:"p-2",children:_.name}),a.jsxs("td",{className:"p-2 text-sm text-gray-600",children:[((k=_.permission_ids)==null?void 0:k.length)||0," perms"]}),a.jsxs("td",{className:"p-2 text-right space-x-2",children:[r&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>N(_),children:"Edit"}),i&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>S(_.id),children:"Delete"})]})]},_.id)}),!o.length&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:"4",children:"No roles yet."})})]})]})})]})}function y2(){const{hasAny:t,canView:n,canCreate:s,canUpdate:r,canDelete:i}=ch("permissions"),[o,l]=g.useState([]),[c,d]=g.useState({code:"",label:"",module:""}),[u,f]=g.useState(null),[h,p]=g.useState(!1),[m,x]=g.useState(""),y=g.useCallback(async()=>{var j,N,S;if(n){x("");try{const _=await I.get("/permissions/");l(_.data)}catch(_){const C=(j=_==null?void 0:_.response)==null?void 0:j.status;x(C===403?"Access denied for Permissions.":C===401?"Session expired. Please login again.":((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load")}}},[n]);g.useEffect(()=>{y()},[y]);const v=async j=>{var N,S;if(j.preventDefault(),!(!u&&!s)&&!(u&&!r)){p(!0),x("");try{u?await I.put(`/permissions/${u}`,c):await I.post("/permissions/",c),d({code:"",label:"",module:""}),f(null),y()}catch(_){x(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to save")}finally{p(!1)}}},b=async j=>{var N,S;if(i&&confirm("Delete this permission?"))try{await I.delete(`/permissions/${j}`),y()}catch(_){x(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to delete")}},w=j=>{r&&(f(j.id),d({code:j.code,label:j.label,module:j.module}))};return!t||!n?a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Permissions"}),a.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"You dont have access to view this module."})]}):a.jsxs("section",{className:"card",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Permissions"})}),a.jsxs("form",{onSubmit:v,className:"grid md:grid-cols-4 gap-3 mb-4",children:[a.jsx("input",{className:"input",placeholder:"code (e.g. users.view)",value:c.code,onChange:j=>d({...c,code:j.target.value}),required:!0,disabled:!(u?r:s)}),a.jsx("input",{className:"input",placeholder:"label (Users  View)",value:c.label,onChange:j=>d({...c,label:j.target.value}),required:!0,disabled:!(u?r:s)}),a.jsx("input",{className:"input",placeholder:"module (users)",value:c.module,onChange:j=>d({...c,module:j.target.value}),required:!0,disabled:!(u?r:s)}),a.jsx("button",{className:"btn",disabled:h||(u?!r:!s),children:u?"Update":"Create"})]}),m&&a.jsx("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:m}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left",children:[a.jsx("th",{className:"p-2",children:"#"}),a.jsx("th",{className:"p-2",children:"Code"}),a.jsx("th",{className:"p-2",children:"Label"}),a.jsx("th",{className:"p-2",children:"Module"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((j,N)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:N+1}),a.jsx("td",{className:"p-2 font-mono text-xs",children:j.code}),a.jsx("td",{className:"p-2",children:j.label}),a.jsx("td",{className:"p-2",children:j.module}),a.jsxs("td",{className:"p-2 text-right space-x-2",children:[r&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>w(j),children:"Edit"}),i&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>b(j.id),children:"Delete"})]})]},j.id)),!o.length&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:"5",children:"No permissions yet."})})]})]})})]})}function v2(){const{hasAny:t,canView:n,canCreate:s,canUpdate:r,canDelete:i}=ch("users"),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,f]=g.useState([]),[h,p]=g.useState({name:"",email:"",password:"",department_id:"",role_ids:[]}),[m,x]=g.useState(null),[y,v]=g.useState(!1),[b,w]=g.useState(""),j=g.useCallback(async()=>{var k,E,M;if(n){w("");try{const[D,R,T]=await Promise.all([I.get("/users/"),I.get("/roles/").catch(()=>({data:[]})),I.get("/departments/").catch(()=>({data:[]}))]);l(D.data),d(R.data),f(T.data)}catch(D){const R=(k=D==null?void 0:D.response)==null?void 0:k.status;w(R===403?"Access denied for Users.":R===401?"Session expired. Please login again.":((M=(E=D==null?void 0:D.response)==null?void 0:E.data)==null?void 0:M.detail)||"Failed to load")}}},[n]);g.useEffect(()=>{j()},[j]);const N=k=>{p(E=>({...E,role_ids:E.role_ids.includes(k)?E.role_ids.filter(M=>M!==k):[...E.role_ids,k]}))},S=async k=>{var M,D;if(k.preventDefault(),!m&&!s||m&&!r)return;v(!0),w("");const E={...h,department_id:h.department_id?Number(h.department_id):null};try{m?await I.put(`/users/${m}`,E):await I.post("/users/",E),p({name:"",email:"",password:"",department_id:"",role_ids:[]}),x(null),j()}catch(R){w(((D=(M=R==null?void 0:R.response)==null?void 0:M.data)==null?void 0:D.detail)||"Failed to save")}finally{v(!1)}},_=async k=>{var E,M;if(i&&confirm("Delete this user?"))try{await I.delete(`/users/${k}`),j()}catch(D){w(((M=(E=D==null?void 0:D.response)==null?void 0:E.data)==null?void 0:M.detail)||"Failed to delete")}},C=k=>{r&&(x(k.id),p({name:k.name,email:k.email,password:"",department_id:k.department_id||"",role_ids:k.role_ids||[]}))};return!t||!n?a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Users"}),a.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:"You dont have access to view this module."})]}):a.jsxs("section",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Users"}),a.jsxs("form",{onSubmit:S,className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-3",children:[a.jsx("input",{className:"input",placeholder:"Name",value:h.name,onChange:k=>p({...h,name:k.target.value}),required:!0,disabled:!(m?r:s)}),a.jsx("input",{className:"input",placeholder:"Email",type:"email",value:h.email,onChange:k=>p({...h,email:k.target.value}),required:!0,disabled:!(m?r:s)}),a.jsx("input",{className:"input",placeholder:"Password",type:"password",value:h.password,onChange:k=>p({...h,password:k.target.value}),required:!m,disabled:!(m?r:s)}),a.jsxs("select",{className:"input",value:h.department_id,onChange:k=>p({...h,department_id:k.target.value}),disabled:!(m?r:s),children:[a.jsx("option",{value:"",children:"No Department"}),u.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-3",children:[c.map(k=>a.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-xl border ${h.role_ids.includes(k.id)?"bg-blue-50 border-blue-300":"border-gray-200"}`,children:[a.jsx("input",{type:"checkbox",checked:h.role_ids.includes(k.id),onChange:()=>N(k.id),disabled:!(m?r:s)}),a.jsx("span",{className:"text-sm",children:k.name})]},k.id)),!c.length&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles yet."})]}),a.jsx("button",{className:"btn",disabled:y||(m?!r:!s),children:m?"Update":"Create"})]}),b&&a.jsx("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:b}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left",children:[a.jsx("th",{className:"p-2",children:"#"}),a.jsx("th",{className:"p-2",children:"Name"}),a.jsx("th",{className:"p-2",children:"Email"}),a.jsx("th",{className:"p-2",children:"Dept"}),a.jsx("th",{className:"p-2",children:"Roles"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((k,E)=>{var M;return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:E+1}),a.jsx("td",{className:"p-2",children:k.name}),a.jsx("td",{className:"p-2",children:k.email}),a.jsx("td",{className:"p-2",children:k.department_id||"-"}),a.jsxs("td",{className:"p-2 text-sm text-gray-600",children:[((M=k.role_ids)==null?void 0:M.length)||0," roles"]}),a.jsxs("td",{className:"p-2 text-right space-x-2",children:[r&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>C(k),children:"Edit"}),i&&a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>_(k.id),children:"Delete"})]})]},k.id)}),!o.length&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:"6",children:"No users yet."})})]})]})})]})}function cF(){const[t]=d4(),n=t.get("tab");return a.jsxs("div",{className:"space-y-6",children:[!n&&a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Admin Dashboard"}),a.jsx("p",{children:"Use the sidebar to manage modules."})]}),n==="departments"&&a.jsx(g2,{}),n==="roles"&&a.jsx(x2,{}),n==="permissions"&&a.jsx(y2,{}),n==="users"&&a.jsx(v2,{})]})}function dF(){return a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"User Dashboard"}),a.jsx("p",{children:"Welcome! Your modules are on the left."})]})}const uF=(()=>{try{return JSON.parse(localStorage.getItem("sidebarCollapsed")||"false")}catch{return!1}})(),b2=PC(t=>({sidebarCollapsed:uF,sidebarMobileOpen:!1,toggleCollapse:()=>t(n=>{const s=!n.sidebarCollapsed;return localStorage.setItem("sidebarCollapsed",JSON.stringify(s)),{sidebarCollapsed:s}}),openMobile:()=>t({sidebarMobileOpen:!0}),closeMobile:()=>t({sidebarMobileOpen:!1}),toggleMobile:()=>t(n=>({sidebarMobileOpen:!n.sidebarMobileOpen}))})),fF=[{key:"patients",label:"Patients management",icon:_d,flatLink:{to:"/patients",reqAny:["patients.view","patients.create","patients.update"]}},{key:"emr",label:"Patients EMR",icon:_d,flatLink:{to:"/emr",reqAny:["emr.view"]}},{key:"user-mgmt",label:"User Management",icon:_d,items:[{key:"departments",label:"Departments",to:"/admin/departments",icon:i2,reqAny:["departments.view","departments.create","departments.update","departments.delete"]},{key:"roles",label:"Roles",to:"/admin/roles",icon:Wc,reqAny:["roles.view","roles.create","roles.update","roles.delete"]},{key:"users",label:"Users",to:"/admin/users",icon:_d,reqAny:["users.view","users.create","users.update","users.delete"]}]},{key:"templates",label:"Templates",icon:ZL,items:[{key:"tpl-list",label:"Templates",to:"/templates",icon:nf,reqAny:["templates.view","templates.manage"]},{key:"tpl-generate",label:"Generate Reports",to:"/templates/generate",icon:z$,reqAny:["templates.view","patients.view","emr.view"]},{key:"consents",label:"Patient Consents",to:"/templates/consents",icon:K$,reqAny:["consents.view","patients.view"]}]},{key:"op",label:"OP",icon:qc,items:[{key:"appointments",label:"Appointments",to:"/opd/appointments",icon:$w,reqAny:["appointments.view","appointments.create"]},{key:"triage",label:"Vitals (Triage)",to:"/opd/triage",icon:$l,reqAny:["vitals.create"]},{key:"queue",label:"Queue",to:"/opd/queue",icon:s$,reqAny:["appointments.view","visits.view"]}]},{key:"ip",label:"IP",icon:Cg,items:[{key:"ipd-admissions",label:"Admissions",to:"/ipd/admissions",icon:c2,reqAny:["ipd.view","ipd.manage"]},{key:"ipd-tracking",label:"Tracking",to:"/ipd/tracking",icon:JL,reqAny:["ipd.tracking.view"]},{key:"ipd-my",label:"My Admissions",to:"/ipd/my",icon:$w,reqAny:["ipd.my.view","ipd.doctor"]},{key:"ipd-discharged",label:"Discharged",to:"/ipd/discharged",icon:f2,reqAny:["ipd.discharged.view"]},{key:"ipd-bedboard",label:"Bedboard",to:"/ipd/bedboard",icon:Cg,reqAny:["ipd.bedboard.view"]},{key:"ipd-masters",label:"IPD Masters",to:"/ipd/masters",icon:nr,reqAny:["ipd.masters.manage","ipd.packages.manage"]}]},{key:"pharmacy",label:"Pharmacy",icon:hu,items:[{key:"ph-home",label:"Dashboard",to:"/pharmacy",icon:hu,reqAny:["pharmacy.view"]},{key:"prescriptions create",label:"Prescriptions new",to:"/pharmacy/prescriptions/new",icon:ao,reqAny:["pharmacy.view","prescriptions.create","ipd.doctor"]},{key:"prescriptions",label:"Prescriptions",to:"/pharmacy/prescriptions",icon:ao,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-dispense",label:"Dispense",to:"/pharmacy/dispense",icon:zy,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-returns",label:"Returns",to:"/pharmacy/returns",icon:Fy,reqAny:["pharmacy.view","pharmacy.dispense.create"]},{key:"ph-alerts",label:"Alerts (Low/Expiry)",to:"/pharmacy/alerts",icon:oh,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-stock",label:"Inventory (Lots)",to:"/pharmacy/inventory",icon:J5,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-trans",label:"Transactions",to:"/pharmacy/transactions",icon:VL,reqAny:["pharmacy.view","pharmacy.inventory.view","pharmacy.inventory.manage"]},{key:"ph-po",label:"Purchase Orders",to:"/pharmacy/po",icon:ao,reqAny:["pharmacy.view","pharmacy.procure.manage"]},{key:"ph-grn",label:"Goods Receipt (GRN)",to:"/pharmacy/grn",icon:tF,reqAny:["pharmacy.view","pharmacy.procure.manage"]},{key:"ph-medicines",label:"Medicines",to:"/pharmacy/medicines",icon:hu,reqAny:["pharmacy.view","pharmacy.masters.manage"]},{key:"ph-suppliers",label:"Suppliers",to:"/pharmacy/suppliers",icon:TL,reqAny:["pharmacy.view","pharmacy.masters.manage"]},{key:"ph-locations",label:"Locations",to:"/pharmacy/locations",icon:_g,reqAny:["pharmacy.view","pharmacy.masters.manage"]}]},{key:"lab",label:"Laboratory",icon:sf,items:[{key:"lab-orders",label:"Orders & Reporting",to:"/lab/orders",icon:sf,reqAny:["lab.orders.view","lab.orders.create","orders.lab.view","orders.lab.create"]},{key:"lab-masters",label:"Lab Masters (NABL)",to:"/lab/masters",icon:nr,reqAny:["lab.masters.manage"]}]},{key:"ris",label:"Radiology",icon:Nl,items:[{key:"ris-orders",label:"Orders & Reporting",to:"/ris/orders",icon:Nl,reqAny:["radiology.orders.view","radiology.orders.create","orders.ris.view","orders.ris.create","radiology.report.create","radiology.report.approve","radiology.schedule.manage","radiology.scan.update"]},{key:"ris-masters",label:"RIS Masters",to:"/ris/masters",icon:nr,reqAny:["radiology.masters.manage"]}]},{key:"ot",label:"Operation Theatre",icon:Nl,items:[{key:"ot-orders",label:"OT Orders",to:"/ot/orders",icon:Nl,reqAny:["ot.cases.view","ot.cases.create","ipd.view"]},{key:"ot-masters",label:"OT Masters",to:"/ot/masters",icon:nr,reqAny:["ot.masters.view","ot.masters.manage"]}]},{key:"billing",label:"Billing",icon:$y,items:[{key:"billing-console",label:"Patient Billing",to:"/billing",icon:u2,reqAny:["billing.view","billing.create","billing.finalize"]}]},{key:"settings",label:"Settings",icon:H$,items:[{key:"schedules",label:"Schedules",to:"/opd/schedules",icon:ih,reqAny:["schedules.manage"]},{key:"opd-masters",label:"OPD Masters",to:"/opd/masters",icon:nr,reqAny:["pharmacy.masters.manage","lab.masters.manage","radiology.masters.manage","ipd.masters.manage"]},{key:"perm-logs",label:"Permissions (Access Logs)",to:"/admin/permissions",icon:nr,reqAny:["permissions.view","permissions.create","permissions.update","permissions.delete"]}]}];function hF(){const t=lt(v=>v.user),n=lt(v=>v.modules)||{},s=Fn(),{sidebarCollapsed:r,toggleCollapse:i,sidebarMobileOpen:o,closeMobile:l}=b2();g.useEffect(()=>{if(!o)return;const v=window.scrollY,b={position:document.body.style.position,top:document.body.style.top,width:document.body.style.width,overflow:document.body.style.overflow,ob:document.documentElement.style.overscrollBehavior};return document.body.style.position="fixed",document.body.style.top=`-${v}px`,document.body.style.width="100%",document.body.style.overflow="hidden",document.documentElement.style.overscrollBehavior="none",()=>{document.body.style.position=b.position||"",document.body.style.top=b.top||"",document.body.style.width=b.width||"",document.body.style.overflow=b.overflow||"",document.documentElement.style.overscrollBehavior=b.ob||"",window.scrollTo(0,v)}},[o]);const c=!!(t!=null&&t.is_admin),d=g.useMemo(()=>{const v=Object.values(n).flat().map(w=>typeof w=="string"?w:w==null?void 0:w.code).filter(Boolean),b=((t==null?void 0:t.permissions)||[]).map(w=>typeof w=="string"?w:w==null?void 0:w.code).filter(Boolean);return new Set([...v||[],...b||[]])},[n,t]),u=(v=[])=>c?!0:v.some(b=>d.has(b)),f=g.useMemo(()=>fF.map(v=>{if(v.flatLink){const j=u(v.flatLink.reqAny);return{...v,_visible:j}}const b=(v.items||[]).map(j=>({...j,_visible:u(j.reqAny)})),w=b.some(j=>j._visible);return{...v,items:b,_visible:w}}).filter(v=>v._visible),[d,c]),h=v=>v.flatLink?s.pathname.startsWith(v.flatLink.to):(v.items||[]).some(b=>s.pathname.startsWith(b.to)),[p,m]=g.useState({});g.useEffect(()=>{const v={};f.forEach(b=>{v[b.key]=h(b)}),m(b=>({...b,...v}))},[s.pathname]);const x=v=>m(b=>({...b,[v]:!b[v]})),y=r?"md:w-16":"md:w-64";return a.jsxs(a.Fragment,{children:[a.jsx("div",{onClick:l,className:`fixed inset-0 z-40 bg-black/35 backdrop-blur-sm transition-opacity md:hidden ${o?"opacity-100":"pointer-events-none opacity-0"}`}),a.jsxs("aside",{className:["z-50 bg-white border-r transition-all duration-300 ease-out","fixed left-0 top-0 h-[100dvh] w-[86vw] max-w-sm md:w-auto",o?"translate-x-0":"-translate-x-full","md:static md:translate-x-0 md:sticky md:top-0 md:h-[100dvh]",y,"grid grid-rows-[auto,1fr,auto] min-h-0","overflow-x-hidden overflow-y-hidden"].join(" "),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-3",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-xl bg-blue-600/10 ring-1 ring-blue-600/20",children:a.jsx("span",{className:"text-xs font-bold text-blue-700",children:"NH"})}),!r&&a.jsx("div",{className:"truncate text-sm font-semibold tracking-tight",children:"NABH-Standard"})]}),a.jsx("button",{onClick:l,className:"md:hidden inline-flex h-8 w-8 items-center justify-center rounded-xl hover:bg-gray-50 active:scale-95 transition","aria-label":"Close sidebar",children:a.jsx(dn,{className:"h-5 w-5"})}),a.jsx("button",{onClick:i,className:"hidden md:inline-flex h-8 w-8 items-center justify-center rounded-xl hover:bg-gray-50 active:scale-95 transition","aria-label":r?"Expand sidebar":"Collapse sidebar",title:r?"Expand":"Collapse",children:r?a.jsx(o2,{className:"h-5 w-5"}):a.jsx(a2,{className:"h-5 w-5"})})]}),a.jsxs("nav",{className:"min-h-0 flex-1 overflow-y-auto no-scrollbar y-fade px-2 pb-4 pt-1 space-y-1 overscroll-contain touch-pan-y",children:[f.map(v=>{if(v.flatLink){const N=v.icon||nr;return a.jsxs(cw,{to:v.flatLink.to,onClick:l,className:({isActive:S})=>["group relative flex h-10 items-center gap-3 rounded-xl px-3 text-sm leading-none transition-colors duration-200 ease-out hover:bg-gray-50 active:scale-[0.99]",S?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700",r?"justify-center":""].join(" "),title:r?v.label:void 0,children:[a.jsx(N,{className:"h-5 w-5 shrink-0"}),!r&&a.jsx("span",{className:"transition-all duration-300",children:v.label})]},v.key)}const b=v.icon||nr,w=!!p[v.key]&&!r,j=h(v);return a.jsxs("div",{className:"rounded-xl",children:[a.jsxs("button",{type:"button",onClick:()=>r?null:x(v.key),className:["w-full flex items-center gap-3 rounded-xl px-3 h-10 text-sm transition-colors duration-200 ease-out",j?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700 hover:bg-gray-50",r?"justify-center":"justify-between"].join(" "),title:r?v.label:void 0,children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx(b,{className:"h-5 w-5 shrink-0"}),!r&&a.jsx("span",{className:"font-medium",children:v.label})]}),!r&&a.jsx(Oy,{className:["h-4 w-4 transition-transform",w?"rotate-180":""].join(" ")})]}),w&&a.jsx("div",{className:"mt-1 space-y-1 pl-9",children:v.items.filter(N=>N._visible).map(N=>{const S=N.icon||nr;return a.jsxs(cw,{to:N.to,onClick:l,className:({isActive:_})=>["group relative flex h-9 items-center gap-2 rounded-lg px-2 text-sm leading-none transition-colors duration-200 ease-out hover:bg-gray-50 active:scale-[0.99]",_?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"text-gray-700"].join(" "),children:[a.jsx(S,{className:"h-[18px] w-[18px] shrink-0"}),a.jsx("span",{children:N.label})]},N.key)})})]},v.key)}),f.length===0&&a.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:"No modules granted. Contact administrator."})]}),a.jsx("div",{className:"px-3 pb-3",children:r?a.jsx("div",{className:"grid place-items-center text-[10px] text-gray-400",children:"v1.0"}):a.jsx("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-3 text-[11px] text-gray-500",children:"Tip: Click the chevron to collapse the sidebar."})})]})]})}function pF(){const{user:t,logout:n,fetchProfile:s}=lt(),{toggleMobile:r}=b2(),[i,o]=g.useState(new Date),[l,c]=g.useState(typeof navigator<"u"?navigator.onLine:!0),[d,u]=g.useState(!1),[f,h]=g.useState(!1),[p,m]=g.useState(!1);g.useEffect(()=>{const N=setInterval(()=>o(new Date),1e3);return()=>clearInterval(N)},[]),g.useEffect(()=>{const N=()=>c(navigator.onLine);return window.addEventListener("online",N),window.addEventListener("offline",N),()=>{window.removeEventListener("online",N),window.removeEventListener("offline",N)}},[]);const x=g.useMemo(()=>t?t.is_admin?"Admin":Array.isArray(t.roles)&&t.roles.length?t.roles[0]:"User":"",[t]),y=g.useMemo(()=>{try{return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return i.toTimeString().slice(0,8)}},[i]),v=()=>{h(!0),setTimeout(()=>window.location.reload(),120)},b=async()=>{m(!0);try{await s()}finally{setTimeout(()=>m(!1),500)}},w=a.jsx("svg",{viewBox:"0 0 24 24",className:"h-9 w-9 text-gray-300","aria-hidden":"true",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6.75a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.5 20.25a8.25 8.25 0 1 1 15 0v.75H4.5v-.75Z"})}),j=({ok:N})=>a.jsx("span",{title:N?"Online":"Offline",className:`inline-block h-2.5 w-2.5 rounded-full ${N?"bg-emerald-500":"bg-rose-500"} ring-2 ring-white`});return a.jsx("header",{className:"sticky top-0 z-30 bg-blue-900 text-white",children:a.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between gap-3 px-4 py-2 sm:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"md:hidden inline-flex items-center justify-center rounded-xl p-2 ring-1 ring-white/20 hover:bg-white/10 active:scale-95 transition",onClick:r,"aria-label":"Open menu",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7h16M4 12h16M4 17h16"})})}),a.jsx("h1",{className:"text-lg font-semibold tracking-tight sm:text-xl",children:"NUTRYAH"})]}),a.jsxs("div",{className:"hidden items-center gap-3 sm:flex",children:[a.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm",children:[a.jsx(j,{ok:l}),a.jsx("span",{className:"tabular-nums",children:y})]}),a.jsxs("button",{onClick:b,className:`group inline-flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm transition ${p?"animate-pulse":"hover:bg-white/15"}`,title:"Sync data",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${p?"animate-spin":"group-hover:rotate-90"} transition`,stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8V4m0 0h4m-4 0l2 2M8 16v4m0 0H4m4 0-2-2M6 8a6 6 0 1 1 12 0 6 6 0 0 1-12 0Z"})}),a.jsx("span",{children:"Sync"})]}),a.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 rounded-xl border border-white/15 bg-white/10 px-3 py-1.5 text-sm transition hover:bg-white/15 active:scale-95",title:"Refresh page",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${f?"animate-spin":""} transition`,stroke:"currentColor",strokeWidth:"1.5",fill:"none",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992V4.356M21 12a9 9 0 1 1-3-6.708"})}),a.jsx("span",{children:"Refresh"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(N=>!N),className:"group inline-flex items-center gap-3 rounded-2xl border border-white/15 bg-white/10 px-2.5 py-1.5 transition hover:bg-white/15","aria-haspopup":"menu","aria-expanded":d,title:"Account",children:[a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute -right-0.5 -top-0.5 rounded-full bg-emerald-500 p-1 ring-2 ring-blue-900"}),w]}),a.jsx("div",{className:"hidden min-w-[9rem] text-left sm:block",children:a.jsxs("div",{className:"leading-tight",children:[a.jsx("div",{className:"truncate text-sm font-medium",children:(t==null?void 0:t.name)||""}),a.jsx("div",{className:"truncate text-[11px] text-white/70",children:x})]})}),a.jsx("svg",{viewBox:"0 0 24 24",className:`hidden h-4 w-4 text-white/70 sm:block transition ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9l6 6 6-6"})})]}),a.jsxs("div",{className:`absolute right-0 mt-2 w-64 origin-top-right rounded-2xl border border-gray-200 bg-gray-900 p-3 shadow-lg transition ${d?"scale-100 opacity-100":"pointer-events-none scale-95 opacity-0"}`,children:[a.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[a.jsx("div",{className:"shrink-0 ",children:w}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"truncate text-sm font-semibold text-gray-100",children:(t==null?void 0:t.name)||""}),a.jsx("div",{className:"truncate text-xs text-gray-300",children:x}),a.jsx("div",{className:"truncate text-[11px] text-gray-300",children:t==null?void 0:t.email})]})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("button",{onClick:b,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm hover:bg-gray-50 hover:text-black/90",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${p?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 1 13.5-4.5M19.5 12A7.5 7.5 0 0 1 6 16.5M3 12h3m12 0h3"})}),"Sync data"]}),a.jsxs("button",{onClick:v,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm hover:bg-gray-50 hover:text-black/90",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:`h-5 w-5 ${f?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992V4.356M21 12a9 9 0 1 1-3-6.708"})}),"Refresh page"]}),a.jsx("div",{className:"my-1 h-px bg-gray-100"}),a.jsxs("button",{onClick:n,className:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left text-sm text-rose-600 hover:bg-rose-50",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6A2.25 2.25 0 0 0 5.25 5.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 8l-4 4m0 0 4 4m-4-4h12"})}),"Logout"]})]})]})]})]})})}function mF(){return a.jsx("div",{className:"min-h-dvh bg-gradient-to-b from-gray-50 to-white",children:a.jsxs("div",{className:"flex min-h-dvh",children:[a.jsx(hF,{}),a.jsxs("div",{className:"flex min-h-dvh flex-1 flex-col",children:[a.jsx(pF,{}),a.jsx("main",{className:"flex-1",children:a.jsx("div",{className:"mx-auto w-full max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:a.jsx(kC,{})})})]})]})})}function gF(){const{user:t,loading:n,fetchProfile:s}=lt(),[r,i]=g.useState(!1),o=localStorage.getItem("access_token"),l=Fn();return g.useEffect(()=>{o&&!t&&!n&&(i(!0),s().finally(()=>i(!1)))},[o,t,n,s]),o?r||n||!t&&o?a.jsx("div",{className:"min-h-screen grid place-items-center text-sm",children:"Loading"}):a.jsx(kC,{}):a.jsx(SC,{to:"/auth/login",state:{from:l},replace:!0})}function ri(t){const n=lt(o=>o.modules)||{};if(!t)return!1;const[s,r]=t.split(".");return(n[s]||[]).some(o=>o.code===t)}const w2=6048e5,xF=864e5,Fw=Symbol.for("constructDateFrom");function ii(t,n){return typeof t=="function"?t(n):t&&typeof t=="object"&&Fw in t?t[Fw](n):t instanceof Date?new t.constructor(n):new Date(n)}function js(t,n){return ii(n||t,t)}let yF={};function dh(){return yF}function mc(t,n){var c,d,u,f;const s=dh(),r=(n==null?void 0:n.weekStartsOn)??((d=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((f=(u=s.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=js(t,n==null?void 0:n.in),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function rf(t,n){return mc(t,{...n,weekStartsOn:1})}function j2(t,n){const s=js(t,n==null?void 0:n.in),r=s.getFullYear(),i=ii(s,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=rf(i),l=ii(s,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=rf(l);return s.getTime()>=o.getTime()?r+1:s.getTime()>=c.getTime()?r:r-1}function zw(t){const n=js(t),s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),+t-+s}function vF(t,...n){const s=ii.bind(null,n.find(r=>typeof r=="object"));return n.map(s)}function Bw(t,n){const s=js(t,n==null?void 0:n.in);return s.setHours(0,0,0,0),s}function bF(t,n,s){const[r,i]=vF(s==null?void 0:s.in,t,n),o=Bw(r),l=Bw(i),c=+o-zw(o),d=+l-zw(l);return Math.round((c-d)/xF)}function wF(t,n){const s=j2(t,n),r=ii(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),rf(r)}function jF(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function NF(t){return!(!jF(t)&&typeof t!="number"||isNaN(+js(t)))}function SF(t,n){const s=js(t,n==null?void 0:n.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const kF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CF=(t,n,s)=>{let r;const i=kF[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function Np(t){return(n={})=>{const s=n.width?String(n.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const _F={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MF={date:Np({formats:_F,defaultWidth:"full"}),time:Np({formats:EF,defaultWidth:"full"}),dateTime:Np({formats:TF,defaultWidth:"full"})},AF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PF=(t,n,s,r)=>AF[t];function ul(t){return(n,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=s!=null&&s.width?String(s.width):l;i=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=s!=null&&s.width?String(s.width):t.defaultWidth;i=t.values[c]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(n):n;return i[o]}}const RF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$F={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FF=(t,n)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},zF={ordinalNumber:FF,era:ul({values:RF,defaultWidth:"wide"}),quarter:ul({values:OF,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ul({values:DF,defaultWidth:"wide"}),day:ul({values:IF,defaultWidth:"wide"}),dayPeriod:ul({values:LF,defaultWidth:"wide",formattingValues:$F,defaultFormattingWidth:"wide"})};function fl(t){return(n,s={})=>{const r=s.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=n.match(i);if(!o)return null;const l=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?VF(c,h=>h.test(l)):BF(c,h=>h.test(l));let u;u=t.valueCallback?t.valueCallback(d):d,u=s.valueCallback?s.valueCallback(u):u;const f=n.slice(l.length);return{value:u,rest:f}}}function BF(t,n){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n(t[s]))return s}function VF(t,n){for(let s=0;s<t.length;s++)if(n(t[s]))return s}function HF(t){return(n,s={})=>{const r=n.match(t.matchPattern);if(!r)return null;const i=r[0],o=n.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=s.valueCallback?s.valueCallback(l):l;const c=n.slice(i.length);return{value:l,rest:c}}}const UF=/^(\d+)(th|st|nd|rd)?/i,WF=/\d+/i,qF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},KF={any:[/^b/i,/^(a|c)/i]},GF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YF={any:[/1/i,/2/i,/3/i,/4/i]},XF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},JF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ZF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ez={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nz={ordinalNumber:HF({matchPattern:UF,parsePattern:WF,valueCallback:t=>parseInt(t,10)}),era:fl({matchPatterns:qF,defaultMatchWidth:"wide",parsePatterns:KF,defaultParseWidth:"any"}),quarter:fl({matchPatterns:GF,defaultMatchWidth:"wide",parsePatterns:YF,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fl({matchPatterns:XF,defaultMatchWidth:"wide",parsePatterns:JF,defaultParseWidth:"any"}),day:fl({matchPatterns:QF,defaultMatchWidth:"wide",parsePatterns:ZF,defaultParseWidth:"any"}),dayPeriod:fl({matchPatterns:ez,defaultMatchWidth:"any",parsePatterns:tz,defaultParseWidth:"any"})},sz={code:"en-US",formatDistance:CF,formatLong:MF,formatRelative:PF,localize:zF,match:nz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rz(t,n){const s=js(t,n==null?void 0:n.in);return bF(s,SF(s))+1}function iz(t,n){const s=js(t,n==null?void 0:n.in),r=+rf(s)-+wF(s);return Math.round(r/w2)+1}function N2(t,n){var f,h,p,m;const s=js(t,n==null?void 0:n.in),r=s.getFullYear(),i=dh(),o=(n==null?void 0:n.firstWeekContainsDate)??((h=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,l=ii((n==null?void 0:n.in)||t,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=mc(l,n),d=ii((n==null?void 0:n.in)||t,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const u=mc(d,n);return+s>=+c?r+1:+s>=+u?r:r-1}function az(t,n){var c,d,u,f;const s=dh(),r=(n==null?void 0:n.firstWeekContainsDate)??((d=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(u=s.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=N2(t,n),o=ii((n==null?void 0:n.in)||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),mc(o,n)}function oz(t,n){const s=js(t,n==null?void 0:n.in),r=+mc(s,n)-+az(s,n);return Math.round(r/w2)+1}function Oe(t,n){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(n,"0");return s+r}const Sr={y(t,n){const s=t.getFullYear(),r=s>0?s:1-s;return Oe(n==="yy"?r%100:r,n.length)},M(t,n){const s=t.getMonth();return n==="M"?String(s+1):Oe(s+1,2)},d(t,n){return Oe(t.getDate(),n.length)},a(t,n){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,n){return Oe(t.getHours()%12||12,n.length)},H(t,n){return Oe(t.getHours(),n.length)},m(t,n){return Oe(t.getMinutes(),n.length)},s(t,n){return Oe(t.getSeconds(),n.length)},S(t,n){const s=n.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,s-3));return Oe(i,n.length)}},_a={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vw={G:function(t,n,s){const r=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Sr.y(t,n)},Y:function(t,n,s,r){const i=N2(t,r),o=i>0?i:1-i;if(n==="YY"){const l=o%100;return Oe(l,2)}return n==="Yo"?s.ordinalNumber(o,{unit:"year"}):Oe(o,n.length)},R:function(t,n){const s=j2(t);return Oe(s,n.length)},u:function(t,n){const s=t.getFullYear();return Oe(s,n.length)},Q:function(t,n,s){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Oe(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Oe(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){const r=t.getMonth();switch(n){case"M":case"MM":return Sr.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){const r=t.getMonth();switch(n){case"L":return String(r+1);case"LL":return Oe(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){const i=oz(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Oe(i,n.length)},I:function(t,n,s){const r=iz(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Oe(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Sr.d(t,n)},D:function(t,n,s){const r=rz(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Oe(r,n.length)},E:function(t,n,s){const r=t.getDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Oe(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Oe(o,n.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){const r=t.getDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Oe(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){const i=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){const r=t.getHours();let i;switch(r===12?i=_a.noon:r===0?i=_a.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){const r=t.getHours();let i;switch(r>=17?i=_a.evening:r>=12?i=_a.afternoon:r>=4?i=_a.morning:i=_a.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Sr.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Sr.H(t,n)},K:function(t,n,s){const r=t.getHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Oe(r,n.length)},k:function(t,n,s){let r=t.getHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Oe(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Sr.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Sr.s(t,n)},S:function(t,n){return Sr.S(t,n)},X:function(t,n,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return Uw(r);case"XXXX":case"XX":return Mi(r);case"XXXXX":case"XXX":default:return Mi(r,":")}},x:function(t,n,s){const r=t.getTimezoneOffset();switch(n){case"x":return Uw(r);case"xxxx":case"xx":return Mi(r);case"xxxxx":case"xxx":default:return Mi(r,":")}},O:function(t,n,s){const r=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Hw(r,":");case"OOOO":default:return"GMT"+Mi(r,":")}},z:function(t,n,s){const r=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Hw(r,":");case"zzzz":default:return"GMT"+Mi(r,":")}},t:function(t,n,s){const r=Math.trunc(+t/1e3);return Oe(r,n.length)},T:function(t,n,s){return Oe(+t,n.length)}};function Hw(t,n=""){const s=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?s+String(i):s+String(i)+n+Oe(o,2)}function Uw(t,n){return t%60===0?(t>0?"-":"+")+Oe(Math.abs(t)/60,2):Mi(t,n)}function Mi(t,n=""){const s=t>0?"-":"+",r=Math.abs(t),i=Oe(Math.trunc(r/60),2),o=Oe(r%60,2);return s+i+n+o}const Ww=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},S2=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},lz=(t,n)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Ww(t,n);let o;switch(r){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Ww(r,n)).replace("{{time}}",S2(i,n))},cz={p:S2,P:lz},dz=/^D+$/,uz=/^Y+$/,fz=["D","DD","YY","YYYY"];function hz(t){return dz.test(t)}function pz(t){return uz.test(t)}function mz(t,n,s){const r=gz(t,n,s);if(console.warn(r),fz.includes(t))throw new RangeError(r)}function gz(t,n,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vz=/^'([^]*?)'?$/,bz=/''/g,wz=/[a-zA-Z]/;function No(t,n,s){var f,h,p,m;const r=dh(),i=r.locale??sz,o=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,l=r.weekStartsOn??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,c=js(t,s==null?void 0:s.in);if(!NF(c))throw new RangeError("Invalid time value");let d=n.match(yz).map(x=>{const y=x[0];if(y==="p"||y==="P"){const v=cz[y];return v(x,i.formatLong)}return x}).join("").match(xz).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:jz(x)};if(Vw[y])return{isToken:!0,value:x};if(y.match(wz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const u={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return d.map(x=>{if(!x.isToken)return x.value;const y=x.value;(pz(y)||hz(y))&&mz(y,n,String(t));const v=Vw[y[0]];return v(c,y,i.localize,u)}).join("")}function jz(t){const n=t.match(vz);return n?n[1].replace(bz,"'"):t}function Nz(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState(!1),[l,c]=g.useState(""),d=ri("patients.view"),u=ri("patients.create");lt.getState().modules;const f=g.useCallback(async()=>{var y,v;if(d){o(!0),c("");try{const{data:b}=await I.get("/patients/",{params:{q:t}});r(b)}catch(b){c(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to load patients")}finally{o(!1)}}},[t,d]);g.useEffect(()=>{f()},[f]);const[h,p]=g.useState(!1),[m,x]=g.useState(null);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx(lh,{className:"h-5 w-5"}),"Patients"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{value:t,onChange:y=>n(y.target.value),placeholder:"Search by UHID, phone, email or name",className:"pl-9 pr-10 py-2 rounded-xl border w-72 max-w-full"}),a.jsx(cn,{className:"h-4 w-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),t&&a.jsx("button",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>n(""),children:a.jsx(dn,{className:"h-4 w-4"})})]}),a.jsx("button",{onClick:f,className:"rounded-xl border px-3 py-2 text-sm hover:bg-gray-50",title:"Refresh",children:"Reload"}),u&&a.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 active:scale-95",onClick:()=>p(!0),children:[a.jsx(wt,{className:"h-4 w-4"}),"New Patient"]})]})]}),l&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l}),a.jsxs("div",{className:"grid gap-3 sm:hidden",children:[i&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"Loading"}),!i&&s.map(y=>a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-base font-semibold",children:[y.first_name," ",y.last_name||""]}),a.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["UHID: ",y.uhid]})]}),a.jsx("button",{className:"rounded-xl border px-3 py-1.5 text-xs hover:bg-gray-50",onClick:()=>x(y),children:"View"})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"capitalize",children:y.gender})}),a.jsx("div",{children:y.dob?No(new Date(y.dob),"yyyy-MM-dd"):""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(b$,{className:"h-4 w-4"})," ",a.jsx("span",{children:y.phone||""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Iy,{className:"h-4 w-4"})," ",a.jsx("span",{className:"truncate",children:y.email||""})]})]})]},y.id)),!i&&s.length===0&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"No patients found"})]}),a.jsx("div",{className:"overflow-x-auto rounded-xl border bg-white hidden sm:block",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 text-left",children:"#"}),a.jsx("th",{className:"p-2 text-left",children:"UHID"}),a.jsx("th",{className:"p-2 text-left",children:"Name"}),a.jsx("th",{className:"p-2 text-left",children:"Gender"}),a.jsx("th",{className:"p-2 text-left",children:"DOB"}),a.jsx("th",{className:"p-2 text-left",children:"Phone"}),a.jsx("th",{className:"p-2 text-left",children:"Email"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[i&&a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-6 text-center text-gray-500",children:"Loading"})}),!i&&s.map((y,v)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:v+1}),a.jsx("td",{className:"p-2 font-mono",children:y.uhid}),a.jsxs("td",{className:"p-2",children:[y.first_name," ",y.last_name||""]}),a.jsx("td",{className:"p-2 capitalize",children:y.gender}),a.jsx("td",{className:"p-2",children:y.dob?No(new Date(y.dob),"yyyy-MM-dd"):""}),a.jsx("td",{className:"p-2",children:y.phone||""}),a.jsx("td",{className:"p-2",children:y.email||""}),a.jsx("td",{className:"p-2 text-right",children:a.jsx("button",{className:"rounded-xl border px-3 py-1.5 text-xs hover:bg-gray-50",onClick:()=>x(y),children:"View"})})]},y.id)),!i&&s.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-6 text-center text-gray-500",children:"No patients found"})})]})]})}),h&&a.jsx(Sz,{onClose:()=>p(!1),onCreated:y=>{p(!1),x(y),f()}}),m&&a.jsx(kz,{patient:m,onClose:()=>x(null),onUpdated:y=>{x(y),f()},onDeactivated:()=>{x(null),f()}})]})}function Sz({onClose:t,onCreated:n}){const[s,r]=g.useState({first_name:"",last_name:"",gender:"male",dob:"",phone:"",email:"",aadhar_last4:""}),[i,o]=g.useState(!1),[l,c]=g.useState(""),d=async u=>{var f,h;u.preventDefault(),o(!0),c("");try{const p={...s};p.dob||delete p.dob;const{data:m}=await I.post("/patients/",p);n==null||n(m)}catch(p){c(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to create patient")}finally{o(!1)}l&&l.includes("Phone"),l&&l.includes("Email")};return a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/30 p-4",children:a.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-white p-5 shadow-xl animate-in fade-in zoom-in-95",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"New Patient"}),a.jsx("button",{className:"rounded-xl p-2 hover:bg-gray-50",onClick:t,children:a.jsx(dn,{className:"h-5 w-5"})})]}),l&&a.jsx("div",{className:"mb-3 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l}),a.jsxs("form",{onSubmit:d,className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsx("input",{className:"input",placeholder:"First name",value:s.first_name,onChange:u=>r({...s,first_name:u.target.value}),required:!0}),a.jsx("input",{className:"input",placeholder:"Last name (optional)",value:s.last_name,onChange:u=>r({...s,last_name:u.target.value})}),a.jsxs("select",{className:"input",value:s.gender,onChange:u=>r({...s,gender:u.target.value}),children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx("input",{className:"input",type:"date",value:s.dob,onChange:u=>r({...s,dob:u.target.value})}),a.jsx("input",{className:"input",placeholder:"Phone",value:s.phone,onChange:u=>r({...s,phone:u.target.value})}),a.jsx("input",{className:"input",placeholder:"Email",type:"email",value:s.email,onChange:u=>r({...s,email:u.target.value})}),a.jsx("input",{className:"input",placeholder:"Aadhaar last 4",maxLength:4,value:s.aadhar_last4,onChange:u=>r({...s,aadhar_last4:u.target.value.replace(/\D/g,"").slice(0,4)})}),a.jsxs("div",{className:"md:col-span-2 mt-2 flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",className:"rounded-xl border px-4 py-2",onClick:t,children:"Cancel"}),a.jsx("button",{className:"btn",disabled:i,children:i?"Saving":"Create"})]})]})]})})}function kz({patient:t,onClose:n,onUpdated:s,onDeactivated:r}){const[i,o]=g.useState("overview"),[l,c]=g.useState(t),d=ri("patients.update"),u=ri("patients.deactivate"),f=g.useCallback(async()=>{try{const{data:p}=await I.get(`/patients/${t.id}`);c(p),s==null||s(p)}catch{}},[t.id,s]);g.useEffect(()=>{c(t)},[t]);const h=async()=>{confirm("Deactivate this patient?")&&(await I.patch(`/patients/${t.id}/deactivate`),r==null||r())};return a.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[a.jsx("div",{className:"flex-1 bg-black/30",onClick:n}),a.jsxs("div",{className:"h-full w-full max-w-3xl bg-white shadow-2xl animate-in slide-in-from-right",children:[a.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b bg-white p-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-lg font-semibold",children:[l.first_name," ",l.last_name||""]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["UHID: ",a.jsx("span",{className:"font-mono",children:l.uhid})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsxs("button",{onClick:h,className:"inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm hover:bg-gray-50 text-rose-600",children:[a.jsx(Ws,{className:"h-4 w-4"})," Deactivate"]}),a.jsx("button",{className:"rounded-xl p-2 hover:bg-gray-50",onClick:n,children:a.jsx(dn,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 border-b px-4",children:[a.jsx(hl,{label:"Overview",active:i==="overview",onClick:()=>o("overview")}),a.jsx(hl,{label:"Addresses",active:i==="addresses",onClick:()=>o("addresses")}),a.jsx(hl,{label:"Documents",active:i==="docs",onClick:()=>o("docs")}),a.jsx(hl,{label:"Consents",active:i==="consents",onClick:()=>o("consents")}),a.jsx(hl,{label:"ABHA Link",active:i==="abha",onClick:()=>o("abha")})]}),a.jsxs("div",{className:"p-4",children:[i==="overview"&&a.jsx(Cz,{data:l,canUpdate:d,onSaved:f}),i==="addresses"&&a.jsx(_z,{patient:l,onAdded:f}),i==="docs"&&a.jsx(Ez,{id:l.id}),i==="consents"&&a.jsx(Tz,{id:l.id}),i==="abha"&&a.jsx(Mz,{patient:l,onLinked:f})]})]})]})}function hl({label:t,active:n,onClick:s}){return a.jsx("button",{className:`px-3 py-2 text-sm transition ${n?"border-b-2 border-blue-600 text-blue-700":"text-gray-600 hover:text-gray-800"}`,onClick:s,children:t})}function Cz({data:t,canUpdate:n,onSaved:s}){const[r,i]=g.useState({first_name:t.first_name||"",last_name:t.last_name||"",gender:t.gender||"male",dob:t.dob||"",phone:t.phone||"",email:t.email||""}),[o,l]=g.useState(!1),[c,d]=g.useState(""),u=async f=>{if(f.preventDefault(),!!n){l(!0),d("");try{await I.put(`/patients/${t.id}`,r),d("Saved!"),s==null||s(),setTimeout(()=>d(""),1200)}finally{l(!1)}}};return a.jsxs("form",{onSubmit:u,className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[a.jsx("input",{className:"input",placeholder:"First name",value:r.first_name,onChange:f=>i({...r,first_name:f.target.value}),disabled:!n}),a.jsx("input",{className:"input",placeholder:"Last name",value:r.last_name,onChange:f=>i({...r,last_name:f.target.value}),disabled:!n}),a.jsxs("select",{className:"input",value:r.gender,onChange:f=>i({...r,gender:f.target.value}),disabled:!n,children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx("input",{className:"input",type:"date",value:r.dob||"",onChange:f=>i({...r,dob:f.target.value}),disabled:!n}),a.jsx("input",{className:"input",placeholder:"Phone",value:r.phone,onChange:f=>i({...r,phone:f.target.value}),disabled:!n}),a.jsx("input",{className:"input",placeholder:"Email",type:"email",value:r.email,onChange:f=>i({...r,email:f.target.value}),disabled:!n}),a.jsxs("div",{className:"md:col-span-2 mt-1 flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:["Created: ",t.created_at?No(new Date(t.created_at),"yyyy-MM-dd HH:mm"):""]}),a.jsxs("span",{children:["Updated: ",t.updated_at?No(new Date(t.updated_at),"yyyy-MM-dd HH:mm"):""]})]}),n&&a.jsx("div",{className:"md:col-span-2 mt-2 flex justify-end",children:a.jsx("button",{className:"btn",disabled:o,children:o?"Saving":"Save Changes"})}),c&&a.jsx("div",{className:"md:col-span-2 text-green-600 text-sm",children:c})]})}function _z({patient:t,onAdded:n}){const s=lt(A=>A.modules)||{},r=g.useMemo(()=>{const A=s.patients||[];return O=>A.some(z=>z.code===O)},[s]),i=r("patients.addresses.view"),o=r("patients.addresses.create"),l=r("patients.addresses.update"),c=r("patients.addresses.delete"),[d,u]=g.useState([]),[f,h]=g.useState(!1),[p,m]=g.useState(""),[x,y]=g.useState({type:"current",line1:"",line2:"",city:"",state:"",pincode:"",country:"India"}),[v,b]=g.useState(!1),[w,j]=g.useState(!1),[N,S]=g.useState(null),[_,C]=g.useState(!1),[k,E]=g.useState(""),M=async()=>{var A,O,z;if(!(t!=null&&t.id)||!i){u([]);return}h(!0),m("");try{const{data:H}=await I.get(`/patients/${t.id}/addresses`);u(H||[])}catch(H){const X=(A=H==null?void 0:H.response)==null?void 0:A.status;m(X===403?"You do not have permission to view addresses.":X===401?"Session expired. Please login again.":((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Failed to load addresses")}finally{h(!1)}};g.useEffect(()=>{M()},[t==null?void 0:t.id,i]);const D=async()=>{await M(),onChanged==null||onChanged()},R=async A=>{var O,z;if(A.preventDefault(),!!o){b(!0),m("");try{await I.post(`/patients/${t.id}/addresses`,x),y({type:"current",line1:"",line2:"",city:"",state:"",pincode:"",country:"India"}),await D()}catch(H){m(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"address added")}finally{b(!1)}}},T=A=>{l&&(E(""),S({...A}),j(!0))},P=()=>{j(!1),S(null)},L=async A=>{var O,z;if(A.preventDefault(),!(!l||!(N!=null&&N.id))){C(!0),E("");try{const H={type:N.type||"current",line1:N.line1||"",line2:N.line2||"",city:N.city||"",state:N.state||"",pincode:N.pincode||"",country:N.country||"India"};await I.put(`/patients/addresses/${N.id}`,H),P(),await D()}catch(H){E(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Failed to update address")}finally{C(!1)}}},F=async A=>{var O,z;if(c&&confirm("Delete this address?"))try{await I.delete(`/patients/addresses/${A}`),await D()}catch(H){m(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Failed to delete")}},B=({type:A})=>A==="office"?a.jsx(i2,{className:"h-4 w-4"}):a.jsx(UL,{className:"h-4 w-4"});return a.jsxs("div",{className:"space-y-4",children:[!i&&a.jsx("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800",children:"You do not have permission to view addresses."}),o&&a.jsxs("form",{onSubmit:R,className:"rounded-2xl border border-gray-200 bg-gray-50 p-4 transition hover:shadow-sm",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[a.jsx(_g,{className:"h-4 w-4"})," Add Address"]}),p&&a.jsx("div",{className:"mb-2 rounded-xl border border-red-200 bg-red-50 p-2 text-sm text-red-700",children:p}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[a.jsxs("select",{className:"input",value:x.type,onChange:A=>y({...x,type:A.target.value}),children:[a.jsx("option",{value:"current",children:"Current"}),a.jsx("option",{value:"permanent",children:"Permanent"}),a.jsx("option",{value:"office",children:"Office"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Address line 1",value:x.line1,onChange:A=>y({...x,line1:A.target.value}),required:!0}),a.jsx("input",{className:"input md:col-span-3",placeholder:"Address line 2 (optional)",value:x.line2,onChange:A=>y({...x,line2:A.target.value})}),a.jsx("input",{className:"input",placeholder:"City",value:x.city,onChange:A=>y({...x,city:A.target.value})}),a.jsx("input",{className:"input",placeholder:"State",value:x.state,onChange:A=>y({...x,state:A.target.value})}),a.jsx("input",{className:"input",placeholder:"Pincode",value:x.pincode,onChange:A=>y({...x,pincode:A.target.value.replace(/\D/g,"").slice(0,6)})}),a.jsx("input",{className:"input",placeholder:"Country",value:x.country,onChange:A=>y({...x,country:A.target.value})})]}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{className:"btn",disabled:v,children:v?"Saving":"Add Address"})})]}),i&&a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[f&&a.jsx("div",{className:"rounded-2xl border p-4 text-sm text-gray-500",children:"Loading addresses"}),!f&&d.length===0&&a.jsx("div",{className:"rounded-2xl border bg-white p-4 text-center text-gray-500",children:"No addresses yet"}),!f&&d.map(A=>a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm transition hover:shadow-md",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(B,{type:A.type}),a.jsx("span",{className:"capitalize",children:A.type||"address"})]}),a.jsxs("div",{className:"shrink-0 space-x-2",children:[a.jsx("button",{className:`rounded-lg border px-2 py-1 text-xs hover:bg-gray-50 ${l?"":"cursor-not-allowed opacity-40"}`,onClick:()=>l&&T(A),disabled:!l,title:l?"Edit address":"No permission",children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx("button",{className:`rounded-lg border px-2 py-1 text-xs text-rose-600 hover:bg-rose-50 ${c?"":"cursor-not-allowed opacity-40"}`,onClick:()=>c&&F(A.id),disabled:!c,title:c?"Delete address":"No permission",children:a.jsx(Ws,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[a.jsx("div",{children:A.line1}),A.line2&&a.jsx("div",{children:A.line2}),a.jsxs("div",{className:"flex flex-wrap gap-x-2",children:[A.city&&a.jsxs("span",{children:[A.city,","]}),A.state&&a.jsx("span",{children:A.state}),A.pincode&&a.jsx("span",{children:A.pincode})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx(kL,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:A.country||"India"})]})]})]},A.id))]}),w&&a.jsxs("div",{className:"fixed inset-0 z-50 grid place-items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:P}),a.jsxs("form",{onSubmit:L,className:"relative z-10 w-full max-w-lg rounded-2xl border border-gray-200 bg-white p-4 shadow-xl",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[a.jsx(_g,{className:"h-4 w-4"}),"Edit Address"]}),a.jsx("button",{type:"button",onClick:P,className:"inline-flex h-8 w-8 items-center justify-center rounded-xl hover:bg-gray-50",children:a.jsx(dn,{className:"h-5 w-5"})})]}),k&&a.jsx("div",{className:"mb-2 rounded-xl border border-red-200 bg-red-50 p-2 text-sm text-red-700",children:k}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[a.jsxs("select",{className:"input",value:(N==null?void 0:N.type)||"current",onChange:A=>S({...N,type:A.target.value}),children:[a.jsx("option",{value:"current",children:"Current"}),a.jsx("option",{value:"permanent",children:"Permanent"}),a.jsx("option",{value:"office",children:"Office"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Address line 1",value:(N==null?void 0:N.line1)||"",onChange:A=>S({...N,line1:A.target.value}),required:!0}),a.jsx("input",{className:"input md:col-span-3",placeholder:"Address line 2 (optional)",value:(N==null?void 0:N.line2)||"",onChange:A=>S({...N,line2:A.target.value})}),a.jsx("input",{className:"input",placeholder:"City",value:(N==null?void 0:N.city)||"",onChange:A=>S({...N,city:A.target.value})}),a.jsx("input",{className:"input",placeholder:"State",value:(N==null?void 0:N.state)||"",onChange:A=>S({...N,state:A.target.value})}),a.jsx("input",{className:"input",placeholder:"Pincode",value:(N==null?void 0:N.pincode)||"",onChange:A=>S({...N,pincode:(A.target.value||"").replace(/\D/g,"").slice(0,6)})}),a.jsx("input",{className:"input",placeholder:"Country",value:(N==null?void 0:N.country)||"India",onChange:A=>S({...N,country:A.target.value})})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:P,className:"rounded-xl border px-4 py-2 text-sm hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{className:"btn",disabled:_,children:_?"Saving":"Save Changes"})]})]})]})]})}function Ez({id:t}){const[n,s]=g.useState([]),[r,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState("other"),[u,f]=g.useState(null),h=ri("patients.attachments.manage"),p=ri("patients.view"),m=g.useCallback(async()=>{var y,v;if(p){i(!0),l("");try{const{data:b}=await I.get(`/patients/${t}/documents`);s(b)}catch(b){l(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to load documents")}finally{i(!1)}}},[t,p]);g.useEffect(()=>{m()},[m]);const x=async()=>{if(!u)return;const y=new FormData;y.append("type",c),y.append("file",u),await I.post(`/patients/${t}/documents`,y,{headers:{"Content-Type":"multipart/form-data"}}),f(null),d("other"),m()};return a.jsxs("div",{className:"space-y-4",children:[h&&a.jsxs("div",{className:"rounded-2xl border bg-gray-50 p-3",children:[a.jsx("div",{className:"mb-2 text-sm font-medium",children:"Upload document"}),a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[1fr,1fr,auto]",children:[a.jsxs("select",{className:"input",value:c,onChange:y=>d(y.target.value),children:[a.jsx("option",{value:"id",children:"ID Proof"}),a.jsx("option",{value:"consent",children:"Consent"}),a.jsx("option",{value:"report",children:"Report"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsxs("label",{className:"input flex items-center gap-2",children:[a.jsx(qL,{className:"h-4 w-4 text-gray-400"}),a.jsx("input",{type:"file",className:"hidden",onChange:y=>{var v;return f(((v=y.target.files)==null?void 0:v[0])||null)}}),a.jsx("span",{className:"truncate text-gray-500",children:u?u.name:"Choose file"})]}),a.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",onClick:x,disabled:!u,children:[a.jsx(pc,{className:"h-4 w-4"})," Upload"]})]})]}),o&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:o}),a.jsxs("div",{className:"grid gap-3 sm:hidden",children:[r&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"Loading"}),!r&&n.map((y,v)=>a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm animate-in fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Dw,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"font-medium",children:y.filename})]}),a.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-xs text-gray-600",children:[a.jsxs("div",{className:"capitalize",children:["Type: ",y.type]}),a.jsxs("div",{children:[(y.size/1024).toFixed(1)," KB"]}),a.jsx("div",{className:"col-span-2",children:y.mime||""})]})]},y.id)),!r&&n.length===0&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"No documents"})]}),a.jsx("div",{className:"overflow-x-auto rounded-xl border bg-white hidden sm:block",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 text-left",children:"#"}),a.jsx("th",{className:"p-2 text-left",children:"Type"}),a.jsx("th",{className:"p-2 text-left",children:"Filename"}),a.jsx("th",{className:"p-2 text-left",children:"Size"}),a.jsx("th",{className:"p-2 text-left",children:"MIME"})]})}),a.jsxs("tbody",{children:[r&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"Loading"})}),!r&&n.map((y,v)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:v+1}),a.jsx("td",{className:"p-2 capitalize",children:y.type}),a.jsxs("td",{className:"p-2 flex items-center gap-2",children:[a.jsx(Dw,{className:"h-4 w-4 text-gray-400"})," ",y.filename]}),a.jsxs("td",{className:"p-2",children:[(y.size/1024).toFixed(1)," KB"]}),a.jsx("td",{className:"p-2",children:y.mime||""})]},y.id)),!r&&n.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-6 text-center text-gray-500",children:"No documents"})})]})]})})]})}function Tz({id:t}){const[n,s]=g.useState([]),[r,i]=g.useState(!1),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,f]=g.useState({type:"general",text:""}),[h,p]=g.useState(!1),m=ri("patients.consents.view"),x=ri("patients.consents.create"),y=g.useCallback(async()=>{var b,w;if(m){i(!0),l("");try{const{data:j}=await I.get(`/patients/${t}/consents`);s(j)}catch(j){l(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Failed to load consents")}finally{i(!1)}}},[t,m]);g.useEffect(()=>{y()},[y]);const v=async b=>{var w,j;if(b.preventDefault(),!!x){p(!0),l("");try{await I.post(`/patients/${t}/consents`,u),d(!1),f({type:"general",text:""}),y()}catch(N){l(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to create consent")}finally{p(!1)}}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[a.jsx(ao,{className:"h-4 w-4"})," Consents"]}),x&&a.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 active:scale-95",onClick:()=>d(!0),children:[a.jsx(c2,{className:"h-4 w-4"})," New Consent"]})]}),o&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:o}),a.jsxs("div",{className:"grid gap-3 sm:hidden",children:[r&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"Loading"}),!r&&n.map((b,w)=>a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm animate-in fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("div",{className:"capitalize font-medium",children:b.type}),a.jsx("div",{className:"text-xs text-gray-500",children:b.captured_at?No(new Date(b.captured_at),"yyyy-MM-dd HH:mm"):""})]}),a.jsx("div",{className:"mt-1 text-sm text-gray-700 whitespace-pre-wrap",children:b.text})]},b.id)),!r&&n.length===0&&a.jsx("div",{className:"rounded-xl border bg-white p-4 text-center text-gray-500",children:"No consents"})]}),a.jsx("div",{className:"overflow-x-auto rounded-xl border bg-white hidden sm:block",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 text-left",children:"#"}),a.jsx("th",{className:"p-2 text-left",children:"Type"}),a.jsx("th",{className:"p-2 text-left",children:"Text"}),a.jsx("th",{className:"p-2 text-left",children:"Captured At"})]})}),a.jsxs("tbody",{children:[r&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Loading"})}),!r&&n.map((b,w)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"p-2",children:w+1}),a.jsx("td",{className:"p-2 capitalize",children:b.type}),a.jsx("td",{className:"p-2",children:b.text}),a.jsx("td",{className:"p-2",children:b.captured_at?No(new Date(b.captured_at),"yyyy-MM-dd HH:mm"):""})]},b.id)),!r&&n.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-6 text-center text-gray-500",children:"No consents"})})]})]})}),c&&a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/30 p-4",children:a.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white p-5 shadow-xl animate-in fade-in zoom-in-95",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"New Consent"}),a.jsx("button",{className:"rounded-xl p-2 hover:bg-gray-50",onClick:()=>d(!1),children:a.jsx(dn,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-3",children:[a.jsxs("select",{className:"input",value:u.type,onChange:b=>f({...u,type:b.target.value}),children:[a.jsx("option",{value:"general",children:"General Treatment"}),a.jsx("option",{value:"surgery",children:"Surgery/Procedure"}),a.jsx("option",{value:"anesthesia",children:"Anesthesia"}),a.jsx("option",{value:"data",children:"Data Sharing"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsx("textarea",{className:"input min-h-[120px]",placeholder:"Consent text / remarks",value:u.text,onChange:b=>f({...u,text:b.target.value}),required:!0}),a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{type:"button",className:"rounded-xl border px-4 py-2",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{className:"btn",disabled:h,children:h?"Saving":"Create"})]})]})]})})]})}function Mz({patient:t,onLinked:n}){const[s,r]=g.useState(t.phone||""),[i,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState("start"),[f,h]=g.useState(""),[p,m]=g.useState(!1),x=!!t.abha_number,y=async()=>{var b,w;m(!0),h("");try{const{data:j}=await I.post("/abha/generate",null,{params:{name:`${t.first_name} ${t.last_name||""}`.trim(),dob:t.dob||"",mobile:s}});o(j.txnId),u("sent"),h(`OTP sent. (dev: ${j.debug_otp})`)}catch(j){h(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Failed to send OTP")}finally{m(!1)}},v=async()=>{var b,w;m(!0),h("");try{await I.post("/abha/verify-otp",null,{params:{txnId:i,otp:l,patient_id:t.id}}),u("linked"),h("ABHA linked successfully."),n==null||n()}catch(j){h(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Invalid/expired OTP")}finally{m(!1)}};return x?a.jsx("div",{className:"rounded-xl border bg-green-50 p-4 text-green-800",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wc,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:"ABHA Linked"}),a.jsxs("div",{className:"text-sm",children:["Number: ",t.abha_number]})]})]})}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Link ABHA number for this patient (demo flow)."}),a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[1fr,auto]",children:[a.jsxs("label",{className:"input",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Mobile"}),a.jsx("input",{className:"w-full border-0 bg-transparent p-0 outline-none",value:s,onChange:b=>r(b.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"10-digit mobile"})]}),d==="start"&&a.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",onClick:y,disabled:!s||p,children:[a.jsx(t$,{className:"h-4 w-4"})," Send OTP"]})]}),d==="sent"&&a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[1fr,auto]",children:[a.jsxs("label",{className:"input",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Enter OTP"}),a.jsx("input",{className:"w-full border-0 bg-transparent p-0 outline-none",value:l,onChange:b=>c(b.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,placeholder:"000000",inputMode:"numeric"})]}),a.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700 disabled:opacity-50",onClick:v,disabled:l.length!==6||p,children:[a.jsx(ga,{className:"h-4 w-4"})," Verify & Link"]})]}),f&&a.jsx("div",{className:`rounded-xl border p-3 text-sm ${d==="linked"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-blue-200 bg-blue-50 text-blue-700"}`,children:f}),p&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(l2,{className:"h-4 w-4 animate-spin"})," Processing"]})]})}const By=()=>I.get("/opd/departments"),Vy=t=>I.get("/opd/roles",{params:{department_id:t}}),Hy=(t,n)=>I.get("/opd/users",{params:{department_id:t,role_id:n}}),uh=t=>I.get("/patients",{params:{q:t}}),Az=t=>I.get("/opd/schedules",{params:{doctor_user_id:t}}),Pz=t=>I.post("/opd/schedules",t),qw=async(t,n)=>{try{return await I.get("/opd/slots",{params:{doctor_user_id:t,date_str:n,detailed:1}})}catch{try{return await I.get("/opd/slots",{params:{doctor_user_id:t,date:n}})}catch{return await I.get("/opd/slots/free",{params:{doctor_user_id:t,date:n}})}}},Rz=t=>I.post("/opd/appointments",t),Kw=(t={})=>I.get("/opd/appointments",{params:t}),Oz=(t,n)=>I.patch(`/opd/appointments/${t}/status`,{status:n}),Dz=(t,n)=>I.post(`/opd/vitals/${t}`,n),Iz=({doctor_user_id:t,for_date:n})=>I.get("/opd/queue",{params:{doctor_user_id:t,...n?{for_date:n}:{}}}),Lz=t=>I.post("/opd/visits",t),$z=t=>I.get(`/opd/visits/${t}`),Fz=(t,n)=>I.put(`/opd/visits/${t}`,n),zz=(t,n)=>I.post(`/opd/visits/${t}/prescription`,n),Bz=t=>I.post(`/opd/visits/${t}/prescription/esign`,{}),Vz=(t,n)=>I.post(`/opd/visits/${t}/orders/lab`,n),Hz=(t,n)=>I.post(`/opd/visits/${t}/orders/radiology`,n),k2=t=>I.get("/masters/medicines",{params:{q:t}}),Uz=t=>I.post("/masters/medicines",t),C2=t=>I.get("/masters/lab-tests",{params:{q:t}}),Wz=t=>I.post("/masters/lab-tests",t),_2=t=>I.get("/masters/radiology-tests",{params:{q:t}}),qz=t=>I.post("/masters/radiology-tests",t);function Kz({value:t,onChange:n}){const[s,r]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState([]),[d,u]=g.useState(""),[f,h]=g.useState([]),[p,m]=g.useState(!1),[x,y]=g.useState(!1),[v,b]=g.useState("");g.useEffect(()=>{let j=!0;return By().then(N=>j&&r(N.data||[])).catch(()=>j&&r([])),()=>{j=!1}},[]),g.useEffect(()=>{let j=!0;if(b(""),c([]),u(""),h([]),n==null||n(null),!!i)return y(!0),Vy(i).then(N=>{j&&c(N.data||[])}).catch(N=>{var S,_;j&&b(((_=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to load roles")}).finally(()=>{j&&y(!1)}),()=>{j=!1}},[i]),g.useEffect(()=>{let j=!0;if(b(""),h([]),n==null||n(null),!!i)return m(!0),Hy(i,d||void 0).then(N=>{j&&h(N.data||[])}).catch(N=>{var S,_;j&&b(((_=(S=N==null?void 0:N.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to load users")}).finally(()=>{j&&m(!1)}),()=>{j=!1}},[i,d]);const w=g.useMemo(()=>f.find(j=>j.id===t)||null,[f,t]);return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Department  Role  User"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("select",{className:"input",value:i,onChange:j=>o(j.target.value),children:[a.jsx("option",{value:"",children:"Select department"}),s.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]}),a.jsxs("select",{className:"input",value:d,onChange:j=>u(j.target.value),disabled:!i||x,children:[a.jsx("option",{value:"",children:"All roles"}),l.map(j=>a.jsxs("option",{value:j.id,children:[j.name,typeof j.members=="number"?` (${j.members})`:""]},j.id))]}),a.jsxs("select",{className:"input",value:t||"",onChange:j=>n(Number(j.target.value)),disabled:!i||p||f.length===0,children:[a.jsx("option",{value:"",children:p?"Loading users":"Select user"}),f.map(j=>{var N;return a.jsxs("option",{value:j.id,children:[j.name,(N=j.roles)!=null&&N.length?`  ${j.roles.join(", ")}`:""]},j.id)})]})]}),w&&a.jsxs("div",{className:"rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",a.jsx("span",{className:"font-medium",children:w.name})]}),v&&a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-2 text-sm text-red-700",children:v})]})}function Gz(){const[t,n]=g.useState(null),[s,r]=g.useState("0"),[i,o]=g.useState("09:00"),[l,c]=g.useState("13:00"),[d,u]=g.useState([]),[f,h]=g.useState(""),p=async()=>{if(!t){u([]);return}const{data:x}=await Az(t);u(x||[])};g.useEffect(()=>{p()},[t]);const m=async x=>{x.preventDefault(),h(""),await Pz({doctor_user_id:t,weekday:Number(s),start_time:i,end_time:l}),h("Saved."),p()};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Doctor Schedules"}),a.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsx(Kz,{value:t,onChange:n}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Weekday"}),a.jsx("select",{className:"input",value:s,onChange:x=>r(x.target.value),children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((x,y)=>a.jsx("option",{value:y,children:x},y))})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Start"}),a.jsx("input",{type:"time",className:"input",value:i,onChange:x=>o(x.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"End"}),a.jsx("input",{type:"time",className:"input",value:l,onChange:x=>c(x.target.value)})]})]})]}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{className:"btn",disabled:!t,onClick:m,children:"Add Slot"})}),f&&a.jsx("div",{className:"mt-2 text-sm text-emerald-600",children:f})]}),a.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[a.jsx("h3",{className:"mb-2 font-medium",children:"Existing"}),a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:[d.map(x=>a.jsx("div",{className:"rounded-xl border px-3 py-2 text-sm",children:a.jsxs("div",{className:"font-medium",children:[["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][x.weekday],"  ",x.start_time.slice(0,5),"",x.end_time.slice(0,5)]})},`${x.weekday}-${x.start_time}`)),(!d||d.length===0)&&a.jsx("div",{className:"text-sm text-gray-500",children:"No schedules yet."})]})]})]})}const E2=g.createContext(null);function Yz({children:t,duration:n=3500}){const[s,r]=g.useState([]),i=g.useCallback(c=>{r(d=>d.filter(u=>u.id!==c))},[]),o=g.useCallback((c,d,u={})=>{const f=crypto.randomUUID(),h=u.duration??n;return r(p=>[...p,{id:f,type:c,message:d,duration:h}]),f},[n]),l=g.useMemo(()=>({success:(c,d)=>o("success",c,d),error:(c,d)=>o("error",c,d),warn:(c,d)=>o("warn",c,d),info:(c,d)=>o("info",c,d)}),[o]);return a.jsxs(E2.Provider,{value:l,children:[t,a.jsx("div",{className:"fixed right-4 top-4 z-[9999] flex w-[min(92vw,380px)] flex-col gap-2",children:s.map(c=>a.jsx(Jz,{toast:c,onClose:()=>i(c.id)},c.id))})]})}function Xz(){const t=g.useContext(E2);if(!t)throw new Error("useToast must be used within <ToastProvider>");return t}function Jz({toast:t,onClose:n}){g.useEffect(()=>{const i=setTimeout(n,t.duration);return()=>clearTimeout(i)},[t.duration,n]);const s={success:"border-emerald-200 bg-emerald-50 text-emerald-800",error:"border-rose-200 bg-rose-50 text-rose-800",warn:"border-amber-200 bg-amber-50 text-amber-800",info:"border-blue-200 bg-blue-50 text-blue-800"}[t.type]??"border-gray-200 bg-white text-gray-800",r={success:ga,error:Uc,warn:oh,info:Lw}[t.type]??Lw;return a.jsxs("div",{className:`flex items-start gap-3 rounded-xl border p-3 shadow-sm ${s}`,role:"status","aria-live":"polite",children:[a.jsx(r,{className:"mt-0.5 h-5 w-5"}),a.jsx("div",{className:"flex-1 text-sm",children:t.message}),a.jsx("button",{onClick:n,className:"opacity-70 hover:opacity-100","aria-label":"Close",children:a.jsx(dn,{className:"h-4 w-4"})})]})}function Gw(t){const n=t instanceof Date?t:new Date(t),s=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${s}-${r}-${i}`}function Yw(t,n){const[s,r]=(n||"00:00").split(":").map(o=>parseInt(o||"0",10)),i=new Date(t+"T00:00:00");return i.setHours(s,r,0,0),i}const pl=new Set(["booked","checked_in","in_progress"]);function Qz({status:t}){const n={booked:"bg-blue-50 text-blue-700 ring-blue-100",checked_in:"bg-amber-50 text-amber-700 ring-amber-100",in_progress:"bg-purple-50 text-purple-700 ring-purple-100",completed:"bg-emerald-50 text-emerald-700 ring-emerald-100",no_show:"bg-gray-50 text-gray-600 ring-gray-100",cancelled:"bg-rose-50 text-rose-700 ring-rose-100"},s=n[t]??n.booked;return a.jsx("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs ring-1 ${s}`,children:String(t||"").replace("_"," ")})}function Zz({has:t}){return t?a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-700 ring-1 ring-emerald-100",children:[a.jsx(ga,{className:"h-3.5 w-3.5"})," vitals done"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-rose-50 px-2 py-0.5 text-[11px] font-medium text-rose-700 ring-1 ring-rose-100",children:[a.jsx(Uc,{className:"h-3.5 w-3.5"})," vitals pending"]})}function eB({value:t,onSelect:n}){const[s,r]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState([]),[d,u]=g.useState(""),[f,h]=g.useState([]),[p,m]=g.useState(!1);g.useEffect(()=>{By().then(y=>r(y.data||[]))},[]),g.useEffect(()=>{if(!i){c([]),u(""),h([]),n==null||n({doctorId:null,departmentId:null});return}m(!0),Vy(i).then(y=>c(y.data||[])).finally(()=>m(!1))},[i]),g.useEffect(()=>{if(!i){h([]);return}m(!0),Hy(i,d||void 0).then(y=>h(y.data||[])).finally(()=>m(!1))},[i,d]);const x=y=>{o(y),n==null||n({doctorId:null,departmentId:y?Number(y):null})};return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Doctor selection"}),a.jsxs("div",{className:"grid gap-2 md:grid-cols-3",children:[a.jsxs("select",{className:"input",value:i,onChange:y=>x(y.target.value),children:[a.jsx("option",{value:"",children:"Select department"}),s.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]}),a.jsxs("select",{className:"input",value:d,onChange:y=>u(y.target.value),disabled:!i||p,children:[a.jsx("option",{value:"",children:"All roles"}),l.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]}),a.jsxs("select",{className:"input",value:t||"",onChange:y=>n==null?void 0:n({doctorId:Number(y.target.value),departmentId:i?Number(i):null}),disabled:!i||p,children:[a.jsx("option",{value:"",children:"Select user"}),f.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})}function tB(){const t=Xz(),[n,s]=g.useState(()=>Gw(new Date)),[r,i]=g.useState(null),[o,l]=g.useState(null),[c,d]=g.useState(""),[u,f]=g.useState([]),[h,p]=g.useState(null),[m,x]=g.useState("Consultation"),[y,v]=g.useState([]),[b,w]=g.useState(""),[j,N]=g.useState([]),[S,_]=g.useState(!1),[C,k]=g.useState(!1),[E,M]=g.useState(""),[D,R]=g.useState(null),T=Gw(new Date);g.useEffect(()=>{const O=setTimeout(()=>{if(!c){f([]);return}uh(c).then(z=>f(z.data||[]))},250);return()=>clearTimeout(O)},[c]),g.useEffect(()=>{if(v([]),w(""),!r||!n)return;(async()=>{const{data:z}=await qw(r,n);let H=[];z&&Array.isArray(z.slots)?H=z.slots:Array.isArray(z)&&(H=z);const X=H.map(Q=>typeof Q=="string"?{start:Q,end:"",status:"free"}:{start:Q.start,end:Q.end||"",status:Q.status||"free"});v(X)})()},[r,n]);const P=async()=>{_(!0);try{const{data:O}=await Kw({date_str:n,doctor_id:r||void 0});N(O||[])}finally{_(!1)}};g.useEffect(()=>{P()},[n,r]),g.useEffect(()=>{(async()=>{if(R(null),!(!h||!n))try{const{data:z}=await Kw({date_str:n}),X=(Array.isArray(z)?z:[]).find(Q=>{var oe;return(Q.patient_id??Q.patientId??((oe=Q.patient)==null?void 0:oe.id))===h&&pl.has(Q.status)});X&&(R(X),t.warn(`This patient already has an active appointment at ${X.slot_start}. Cancel or complete it before booking another.`))}catch{}})()},[h,n]);const L=g.useMemo(()=>{const O=new Set;for(const z of j||[])(!r||z.doctor_user_id===r)&&z.status!=="cancelled"&&z.slot_start&&O.add(z.slot_start);return O},[j,r]),F=g.useMemo(()=>{const O=new Date;return(y||[]).map(z=>{let H=z.status||"free";return L.has(z.start)&&(H="booked"),n<T&&(H="past"),n===T&&Yw(n,z.start)<O&&H==="free"&&(H="past"),{...z,status:H}})},[y,L,n,T]),B=O=>{if(O&&O<T){t.warn("Past dates are not allowed"),s(T);return}s(O||T)},A=async O=>{var H,X,Q,ie;if(O.preventDefault(),M(""),!h||!r||!o||!b){M("Please complete all fields"),t.warn("Please fill all the fields");return}if(n<T){t.warn("Cannot book on a past date");return}if(n===T&&Yw(n,b)<new Date){t.warn("Selected time is already past");return}const z=F.find(oe=>oe.start===b);if(!z||z.status!=="free"){t.warn("Selected slot is not available");return}if(D&&pl.has(D.status)){t.error(`Duplicate booking blocked. Patient already has an active appointment at ${D.slot_start}.`);return}k(!0);try{await Rz({patient_id:h,department_id:o,doctor_user_id:r,date:n,slot_start:b,purpose:m||"Consultation"}),M("Appointment booked."),t.success("Appointment booked successfully"),d(""),f([]),p(null),x("Consultation"),w(""),await P();const{data:oe}=await qw(r,n),Z=((oe==null?void 0:oe.slots)??oe??[]).map(ae=>typeof ae=="string"?{start:ae,end:"",status:"free"}:{start:ae.start,end:ae.end||"",status:ae.status||"free"});v(Z),R(null)}catch(oe){const je=((X=(H=oe==null?void 0:oe.response)==null?void 0:H.data)==null?void 0:X.detail)||((ie=(Q=oe==null?void 0:oe.response)==null?void 0:Q.data)==null?void 0:ie.message)||"Booking failed";M(je),t.error(je)}finally{k(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"OPD Appointments"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tL,{className:"h-4 w-4 text-gray-500"}),a.jsx("input",{type:"date",className:"input",value:n,min:T,onChange:O=>B(O.target.value)})]})]}),a.jsxs("form",{onSubmit:A,className:"rounded-2xl border bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"mb-3 text-sm font-semibold flex items-center gap-2",children:[a.jsx(qc,{className:"h-4 w-4"})," Book appointment"]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(eB,{value:r,onSelect:({doctorId:O,departmentId:z})=>{i(O||null),l(z||null)}}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Patient"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cn,{className:"h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input w-full",placeholder:"Search by UHID, name, phone",value:c,onChange:O=>d(O.target.value)})]}),c&&u.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-xl border bg-white shadow-lg",children:u.map(O=>a.jsxs("button",{type:"button",onClick:()=>{p(O.id),d(`${O.uhid}  ${O.first_name} ${O.last_name||""}`.trim())},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:[a.jsxs("div",{className:"font-medium",children:[O.uhid,"  ",O.first_name," ",O.last_name||""]}),a.jsx("div",{className:"text-xs text-gray-500",children:O.phone||O.email||""})]},O.id))})]}),D&&pl.has(D.status)&&a.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg bg-amber-50 px-3 py-1.5 text-xs text-amber-800 ring-1 ring-amber-100",children:[a.jsx($l,{className:"h-3.5 w-3.5"}),"Patient already has an active appointment at ",a.jsx("span",{className:"font-semibold",children:D.slot_start})," on this date."]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Purpose"}),a.jsx("input",{className:"input",value:m,onChange:O=>x(O.target.value),placeholder:"Consultation"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Available slot"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:grid-cols-6",children:[F.map(O=>{const z=O.status!=="free",H=O.start,X=["rounded-xl border px-2.5 py-1.5 text-sm",z?"opacity-40 cursor-not-allowed":"",!z&&(b===O.start?"bg-blue-600 text-white border-blue-600":"hover:bg-gray-50")].join(" "),Q=()=>{if(z){O.status==="booked"?t.warn(`Slot ${O.start} is already booked`):O.status==="past"?t.warn(`Slot ${O.start} has already passed`):t.warn(`Slot ${O.start} is not available`);return}w(O.start)};return a.jsx("button",{type:"button",onClick:Q,disabled:z,className:X,title:O.status==="booked"?"Booked":O.status==="past"?"Past time":"Free",children:a.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[a.jsx($l,{className:"h-4 w-4"}),a.jsx("span",{children:H})]})},O.start)}),(!F||F.length===0)&&a.jsx("div",{className:"col-span-3 sm:col-span-6 text-sm text-gray-500",children:"No slots for the selected day."})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-500",children:E}),a.jsx("button",{className:"btn",disabled:C||!h||!r||!o||!b||D&&pl.has(D.status),title:D&&pl.has(D.status)?"Duplicate booking blocked for this patient on this date":"",children:C?"Booking":"Book Appointment"})]})]}),a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[a.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Todays schedule"}),S?a.jsx("div",{className:"text-sm text-gray-500",children:"Loading"}):j.length===0?a.jsx("div",{className:"text-sm text-gray-500",children:"No appointments."}):a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:j.map(O=>a.jsxs("div",{className:"rounded-2xl border p-4",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($l,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{className:"text-sm font-semibold",children:[O.slot_start,"  ",O.slot_end]})]}),a.jsx(Qz,{status:O.status})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lh,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"font-medium",children:O.patient_name})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["UHID: ",a.jsx("span",{className:"font-medium",children:O.uhid})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Doctor: ",a.jsx("span",{className:"font-medium",children:O.doctor_name})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Department: ",a.jsx("span",{className:"font-medium",children:O.department_name})]})]}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsx(Zz,{has:O.vitals_registered}),a.jsx("span",{className:"text-[11px] text-gray-500",children:O.purpose||"Consultation"})]})]},O.id))})]})]})}function Xw(t){var s;const n=(s=t==null?void 0:t.response)==null?void 0:s.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(r=>r!=null&&r.loc?`${r.loc.join(".")}: ${r.msg}`:r.msg).join(", ")}return"Error"}const Sp=["booked","checked_in","in_progress","completed","no_show","cancelled"];function nB(){const t=lt(T=>T.user),n=jn(),[s,r]=g.useState(null),[i,o]=g.useState(()=>new Date().toISOString().slice(0,10)),[l,c]=g.useState([]),[d,u]=g.useState(!1),[f,h]=g.useState(""),[p,m]=g.useState(""),[x,y]=g.useState(""),[v,b]=g.useState(!1),[w,j]=g.useState(!1),N=g.useRef(null);g.useEffect(()=>{t&&!t.is_admin&&t.id&&s==null&&r(t.id)},[t]);const S=async()=>{if(h(""),!s){c([]);return}u(!0);try{const{data:T}=await Iz({doctor_user_id:s,for_date:i});c(Array.isArray(T)?T:[])}catch(T){h(Xw(T)),c([])}finally{u(!1)}};g.useEffect(()=>{S()},[s,i]),g.useEffect(()=>{if(!w){N.current&&clearInterval(N.current);return}return N.current=setInterval(S,15e3),()=>{N.current&&clearInterval(N.current)}},[w,s,i]);const _=T=>t?!!(t.is_admin||T!=null&&T.doctor_user_id&&T.doctor_user_id===t.id||T!=null&&T.booked_by&&T.booked_by===t.id):!1,C=T=>{try{if(!(T!=null&&T.time)||!i||["completed","cancelled","no_show"].includes(T.status))return null;const P=new Date(`${i}T${T.time}:00`),L=Math.floor((Date.now()-P.getTime())/6e4);return L>0?L:null}catch{return null}},k=g.useMemo(()=>{let T=l;if(p){const P=p.toLowerCase();T=T.filter(L=>{const F=L.patient||{};return String(F.uhid||"").toLowerCase().includes(P)||String(F.name||"").toLowerCase().includes(P)||String(F.phone||"").toLowerCase().includes(P)})}return x&&(T=T.filter(P=>P.status===x)),v&&(t!=null&&t.id)&&(T=T.filter(P=>P.doctor_user_id===t.id||P.booked_by===t.id)),T},[l,p,x,v,t]),E=g.useMemo(()=>{const T=Object.fromEntries(Sp.map(P=>[P,0]));for(const P of k)T[P.status]!=null&&T[P.status]++;return T},[k]),M=async T=>{try{if(!(T!=null&&T.appointment_id))return;const{data:P}=await Lz({appointment_id:T.appointment_id});P!=null&&P.id?n(`/opd/visit/${P.id}`):(h("Could not start visit"),await S())}catch(P){h(Xw(P))}},D=T=>{if(!(T!=null&&T.visit_id)){h("No visit created yet for this appointment");return}n(`/opd/visit/${T.visit_id}`)},R=()=>{const P=[["time","status","uhid","patient","phone","purpose"].join(",")];k.forEach(A=>{const O=A.patient||{},z=[A.time||"",A.status||"",O.uhid||"",(O.name||"").replace(/,/g," "),O.phone||"",A.visit_purpose||""];P.push(z.map(H=>`"${String(H).replace(/"/g,'""')}"`).join(","))});const L=new Blob([P.join(`
`)],{type:"text/csv;charset=utf-8"}),F=URL.createObjectURL(L),B=document.createElement("a");B.href=F,B.download=`queue_${s}_${i}.csv`,B.click(),URL.revokeObjectURL(F)};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"OPD Queue"}),a.jsx("div",{className:"text-sm text-gray-600",children:f})]}),a.jsxs("div",{className:"rounded-2xl border bg-white p-3",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(lh,{className:"h-3.5 w-3.5"})," Doctor (User ID)"]}),a.jsx("input",{className:"input",placeholder:"Enter doctor user id",value:s||"",onChange:T=>r(T.target.value?Number(T.target.value):null)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(rL,{className:"h-3.5 w-3.5"})," Date"]}),a.jsx("input",{type:"date",className:"input",value:i,onChange:T=>o(T.target.value)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(cn,{className:"h-3.5 w-3.5"})," Search"]}),a.jsx("input",{className:"input",placeholder:"UHID / name / phone",value:p,onChange:T=>m(T.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 items-end",children:[a.jsxs("select",{className:"input",value:x,onChange:T=>y(T.target.value),children:[a.jsx("option",{value:"",children:"All statuses"}),Sp.map(T=>a.jsx("option",{value:T,children:T.replace("_"," ")},T))]}),a.jsx("button",{className:"btn",onClick:S,disabled:!s||d,children:d?"Loading":"Refresh"})]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:v,onChange:T=>b(T.target.checked)}),"Show mine only"]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:w,onChange:T=>j(T.target.checked)}),"Auto-refresh"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2",onClick:R,title:"Export current view to CSV",children:[a.jsx(Dy,{className:"h-4 w-4"})," Export"]}),a.jsxs("button",{type:"button",className:"px-3 py-2 rounded-xl border flex items-center gap-2",onClick:S,title:"Force refresh",children:[a.jsx(J$,{className:"h-4 w-4"})," Reload"]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-3 sm:grid-cols-6 gap-2 text-[11px]",children:Sp.map(T=>a.jsxs("div",{className:"rounded-xl border px-2 py-1 text-center",children:[a.jsx("span",{className:"font-medium",children:T.replace("_"," ")}),": ",E[T]||0]},T))})]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[k.map(T=>{var L,F,B;const P=_(T);return C(T),a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm font-semibold",children:[((L=T.patient)==null?void 0:L.uhid)||((F=T.patient)==null?void 0:F.id),"  ",(B=T.patient)==null?void 0:B.name]}),a.jsx("span",{className:"rounded-full bg-blue-50 px-2 py-0.5 text-xs text-blue-700",children:T.time})]}),a.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ao,{className:"h-3.5 w-3.5"})," Purpose: ",T.visit_purpose||"Consultation"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(si,{className:"h-3.5 w-3.5"})," Status: ",a.jsx("span",{className:"font-medium",children:T.status})]})]}),P&&a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsx("button",{className:"btn",onClick:()=>M(T),disabled:!T.appointment_id||T.status==="completed"||T.status==="cancelled",title:T.appointment_id?["completed","cancelled"].includes(T.status)?"Visit is finished":"Start or continue visit":"Missing appointment",children:"Start / Continue"}),a.jsx("button",{className:"btn-outline",onClick:()=>D(T),disabled:!T.visit_id,title:T.visit_id?"Open existing visit":"No visit yet",children:"Open Visit"})]})]},T.appointment_id)}),!d&&k.length===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No appointments."})]})]})}function sB(t){var s;const n=(s=t==null?void 0:t.response)==null?void 0:s.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(r=>r!=null&&r.loc?`${r.loc.join(".")}: ${r.msg}`:r.msg).join(", ")}return"Validation error"}function rB(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState(null),[l,c]=g.useState({height_cm:"",weight_kg:"",temp_c:"",pulse:"",rr:"",spo2:"",bp_systolic:"",bp_diastolic:"",notes:""}),[d,u]=g.useState(!1),[f,h]=g.useState("");g.useEffect(()=>{const m=setTimeout(()=>{if(!t){r([]);return}uh(t).then(x=>r(x.data||[]))},250);return()=>clearTimeout(m)},[t]);const p=async m=>{if(m.preventDefault(),!i){h("Select a patient");return}u(!0),h("");try{const x={height_cm:l.height_cm?Number(l.height_cm):void 0,weight_kg:l.weight_kg?Number(l.weight_kg):void 0,temp_c:l.temp_c?Number(l.temp_c):void 0,pulse:l.pulse?Number(l.pulse):void 0,rr:l.rr?Number(l.rr):void 0,spo2:l.spo2?Number(l.spo2):void 0,bp_systolic:l.bp_systolic?Number(l.bp_systolic):void 0,bp_diastolic:l.bp_diastolic?Number(l.bp_diastolic):void 0,notes:l.notes||void 0};await Dz(i.id,x),h("Vitals saved"),c({height_cm:"",weight_kg:"",temp_c:"",pulse:"",rr:"",spo2:"",bp_systolic:"",bp_diastolic:"",notes:""})}catch(x){h(sB(x))}finally{u(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Vitals (Triage)"}),a.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[a.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Select patient"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cn,{className:"h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input w-full",placeholder:"Search by UHID, name, phone",value:t,onChange:m=>n(m.target.value)})]}),t&&s.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-xl border bg-white shadow-lg",children:s.map(m=>a.jsxs("button",{type:"button",onClick:()=>{o(m),n(`${m.uhid}  ${m.first_name} ${m.last_name||""}`)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50",children:[a.jsxs("div",{className:"font-medium",children:[m.uhid,"  ",m.first_name," ",m.last_name||""]}),a.jsx("div",{className:"text-xs text-gray-500",children:m.phone||m.email||""})]},m.id))})]}),i&&a.jsxs("div",{className:"mt-2 rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",a.jsx("span",{className:"font-medium",children:i.uhid}),"  ",i.first_name," ",i.last_name||""]})]}),a.jsxs("form",{onSubmit:p,className:"rounded-2xl border bg-white p-4",children:[a.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Enter vitals"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(h2,{className:"h-3.5 w-3.5"})," Height (cm)"]}),a.jsx("input",{className:"input",value:l.height_cm,onChange:m=>c({...l,height_cm:m.target.value.replace(/[^\d.]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(p2,{className:"h-3.5 w-3.5"})," Weight (kg)"]}),a.jsx("input",{className:"input",value:l.weight_kg,onChange:m=>c({...l,weight_kg:m.target.value.replace(/[^\d.]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(m2,{className:"h-3.5 w-3.5"})," Temp (C)"]}),a.jsx("input",{className:"input",value:l.temp_c,onChange:m=>c({...l,temp_c:m.target.value.replace(/[^\d.]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(si,{className:"h-3.5 w-3.5"})," Pulse (bpm)"]}),a.jsx("input",{className:"input",value:l.pulse,onChange:m=>c({...l,pulse:m.target.value.replace(/[^\d]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Respiratory Rate (rr)"}),a.jsx("input",{className:"input",value:l.rr,onChange:m=>c({...l,rr:m.target.value.replace(/[^\d]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[a.jsx(wL,{className:"h-3.5 w-3.5"})," SpO (%)"]}),a.jsx("input",{className:"input",value:l.spo2,onChange:m=>c({...l,spo2:m.target.value.replace(/[^\d]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"BP Systolic"}),a.jsx("input",{className:"input",value:l.bp_systolic,onChange:m=>c({...l,bp_systolic:m.target.value.replace(/[^\d]/g,"")})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"BP Diastolic"}),a.jsx("input",{className:"input",value:l.bp_diastolic,onChange:m=>c({...l,bp_diastolic:m.target.value.replace(/[^\d]/g,"")})})]}),a.jsxs("div",{className:"md:col-span-3 space-y-1",children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Notes"}),a.jsx("textarea",{className:"input min-h-[80px]",value:l.notes,onChange:m=>c({...l,notes:m.target.value})})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-600",children:f}),a.jsx("button",{className:"btn",disabled:!i||d,children:d?"Saving":"Save Vitals"})]})]})]})}function gc(t){var s;const n=(s=t==null?void 0:t.response)==null?void 0:s.data;if(!n)return"Failed";if(typeof n=="string")return n;if(n.detail){if(typeof n.detail=="string")return n.detail;if(Array.isArray(n.detail))return n.detail.map(r=>r!=null&&r.loc?`${r.loc.join(".")}: ${r.msg}`:r.msg).join(", ")}return"Error"}function iB({status:t}){const n=(t||"").toLowerCase(),r={booked:"bg-blue-50 text-blue-700 ring-blue-100",checked_in:"bg-amber-50 text-amber-700 ring-amber-100",in_progress:"bg-purple-50 text-purple-700 ring-purple-100",completed:"bg-emerald-50 text-emerald-700 ring-emerald-100",cancelled:"bg-rose-50 text-rose-700 ring-rose-100",no_show:"bg-gray-50 text-gray-600 ring-gray-100"}[n]??"bg-gray-50 text-gray-600 ring-gray-100";return a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs ring-1 ${r}`,children:[a.jsx($l,{className:"h-3.5 w-3.5"}),(t||"").replace("_"," ")]})}function aB(){const{id:t}=ma(),n=jn(),s=lt(w=>w.user),[r,i]=g.useState(null),[o,l]=g.useState("soap"),[c,d]=g.useState(!1),[u,f]=g.useState(""),[h,p]=g.useState(""),m=async()=>{const{data:w}=await $z(t);i(w)};g.useEffect(()=>{m()},[t]);const x=async w=>{w.preventDefault(),d(!0),f("");try{await Fz(t,{chief_complaint:r.chief_complaint||"",symptoms:r.symptoms||"",soap_subjective:r.soap_subjective||"",soap_objective:r.soap_objective||"",soap_assessment:r.soap_assessment||"",plan:r.plan||""}),await m()}catch(j){f(gc(j))}finally{d(!1)}},y=g.useMemo(()=>!r||!s?!1:!!(s.is_admin||s.id===r.doctor_id),[r,s]),v=async w=>{if(r!=null&&r.appointment_id){p("");try{await Oz(r.appointment_id,w),p(`Status set to ${w.replace("_"," ")}`),await m()}catch(j){p(gc(j))}}},b=()=>{window.print()};return r?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"UHID"}),a.jsx("div",{className:"text-sm font-medium",children:r.uhid}),a.jsx("div",{className:"text-lg font-semibold",children:r.patient_name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Dept: ",a.jsx("span",{className:"font-medium",children:r.department_name})]})]}),a.jsxs("div",{className:"space-y-2 text-right",children:[a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(iB,{status:r.appointment_status}),a.jsxs("button",{className:"btn-outline hidden md:inline-flex",onClick:b,children:[a.jsx(OL,{className:"h-4 w-4"})," Print / PDF"]})]}),y&&r.appointment_id&&a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("completed"),children:[a.jsx(Ow,{className:"mr-1 inline h-3.5 w-3.5"}),"Mark Completed"]}),a.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("cancelled"),children:[a.jsx(G5,{className:"mr-1 inline h-3.5 w-3.5"}),"Cancel"]}),a.jsxs("button",{className:"px-2 py-1 rounded-xl border text-xs hover:bg-gray-50",onClick:()=>v("no_show"),children:[a.jsx(Uc,{className:"mr-1 inline h-3.5 w-3.5"}),"No-show"]})]}),h&&a.jsx("div",{className:"text-[11px] text-gray-500",children:h}),a.jsxs("div",{className:"text-xs text-gray-500",children:[r.visit_at,"  Dr: ",a.jsx("span",{className:"font-medium",children:r.doctor_name})]})]})]})}),a.jsxs("div",{className:"rounded-2xl border bg-white",children:[a.jsx("div",{className:"sticky top-0 z-10 flex flex-wrap gap-1 border-b bg-white/80 p-2 backdrop-blur",children:[["soap","SOAP Notes",a.jsx(ao,{className:"h-4 w-4"},"i")],["vitals","Vitals",a.jsx(qc,{className:"h-4 w-4"},"i")],["rx","Prescription",a.jsx(ga,{className:"h-4 w-4"},"i")],["lab","Lab Orders",a.jsx(si,{className:"h-4 w-4"},"i")],["ris","Radiology Orders",a.jsx(si,{className:"h-4 w-4"},"i")],["summary","Summary",a.jsx(Ow,{className:"h-4 w-4"},"i")]].map(([w,j,N])=>a.jsxs("button",{onClick:()=>l(w),className:["px-3 py-2 text-sm rounded-xl inline-flex items-center gap-2",o===w?"bg-blue-50 text-blue-700":"hover:bg-gray-50"].join(" "),children:[N," ",j]},w))}),o==="soap"&&a.jsxs("form",{onSubmit:x,className:"p-4 grid gap-3 md:grid-cols-2",children:[[["chief_complaint","Chief Complaint"],["symptoms","Symptoms"],["soap_subjective","Subjective"],["soap_objective","Objective"],["soap_assessment","Assessment"],["plan","Plan"]].map(([w,j])=>a.jsxs("div",{className:"space-y-1 md:col-span-2",children:[a.jsx("label",{className:"text-sm",children:j}),a.jsx("textarea",{className:"input min-h-[90px]",value:r[w]||"",onChange:N=>i(S=>({...S,[w]:N.target.value}))})]},w)),u&&a.jsx("div",{className:"md:col-span-2 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:u}),a.jsx("div",{className:"md:col-span-2 flex justify-end",children:a.jsx("button",{className:"btn",disabled:c,children:c?"Saving":"Save Notes"})})]}),o==="vitals"&&a.jsx(oB,{vitals:r.current_vitals,patientId:r.patient_id}),o==="rx"&&a.jsx(lB,{visitId:t}),o==="lab"&&a.jsx(Jw,{visitId:t,kind:"lab"}),o==="ris"&&a.jsx(Jw,{visitId:t,kind:"ris"}),o==="summary"&&a.jsx(cB,{v:r})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsxs("div",{children:["Episode: ",a.jsx("span",{className:"font-medium",children:r.episode_id})]}),a.jsx("button",{className:"hover:underline",onClick:()=>n(`/opd/triage?patient_id=${r.patient_id}`),children:"Go to Triage"})]})]}):a.jsx("div",{children:"Loading"})}function oB({vitals:t,patientId:n}){const s=jn(),r=()=>s(`/opd/triage?patient_id=${n}`);if(!t)return a.jsxs("div",{className:"p-4 flex items-center justify-between",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"No vitals recorded yet."}),a.jsx("button",{className:"btn",onClick:r,children:"Record Vitals"})]});const i=[{label:"Height",value:t.height_cm?`${t.height_cm} cm`:"",Icon:h2},{label:"Weight",value:t.weight_kg?`${t.weight_kg} kg`:"",Icon:p2},{label:"BMI",value:t.bmi??"",Icon:si},{label:"BP",value:t.bp_systolic&&t.bp_diastolic?`${t.bp_systolic}/${t.bp_diastolic} mmHg`:"",Icon:Iw},{label:"Pulse",value:t.pulse?`${t.pulse} bpm`:"",Icon:Iw},{label:"RR",value:t.rr?`${t.rr} /min`:"",Icon:si},{label:"Temp",value:t.temp_c?`${t.temp_c} C`:"",Icon:m2},{label:"SpO",value:t.spo2?`${t.spo2} %`:"",Icon:NL}];return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Recorded at:"," ",a.jsx("span",{className:"font-medium",children:new Date(t.created_at).toLocaleString()})]}),a.jsx("button",{className:"btn",onClick:r,children:"Record New Vitals"})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:i.map(({label:o,value:l,Icon:c})=>a.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx(c,{className:"h-4 w-4"})," ",o]}),a.jsx("div",{className:"mt-1 text-lg font-semibold",children:l})]},o))}),t.notes&&a.jsxs("div",{className:"rounded-2xl border bg-amber-50 p-3 text-sm",children:[a.jsx("span",{className:"font-medium",children:"Notes:"})," ",t.notes]})]})}function lB({visitId:t}){const[n,s]=g.useState(""),[r,i]=g.useState([]),[o,l]=g.useState([]),[c,d]=g.useState(""),[u,f]=g.useState("");g.useEffect(()=>{let v=!0;return(async()=>{try{const{data:w}=await k2(n);v&&i(w||[])}catch{v&&i([])}})(),()=>{v=!1}},[n]);const h=v=>{l(b=>[...b,{drug_name:v.name,strength:"",frequency:"",duration_days:"",quantity:0,unit_price:Number(v.price_per_unit??0),_form:v.form,_unit:v.unit}])},p=(v,b,w)=>l(j=>j.map((N,S)=>S===v?{...N,[b]:w}:N)),m=v=>l(b=>b.filter((w,j)=>j!==v)),x=async()=>{d(""),f("");try{const v={notes:"",items:o.map(b=>({drug_name:b.drug_name,strength:b.strength||"",frequency:b.frequency||"",duration_days:Number(b.duration_days||0),quantity:Number(b.quantity||0),unit_price:Number(b.unit_price||0)}))};await zz(t,v),d("Prescription saved.")}catch(v){f(gc(v))}},y=async()=>{d(""),f("");try{await Bz(t,{}),d("e-Signed.")}catch(v){f(gc(v))}};return a.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Search medicine"}),a.jsx("input",{className:"input",value:n,onChange:v=>s(v.target.value),placeholder:"Type to search"}),a.jsxs("div",{className:"max-h-64 overflow-y-auto rounded-xl border",children:[r.map(v=>a.jsxs("button",{type:"button",onClick:()=>h(v),className:"w-full px-3 py-2 text-left hover:bg-gray-50",children:[a.jsx("div",{className:"text-sm font-medium",children:v.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[v.form,"  ",v.unit,"  ",v.price_per_unit]})]},v.id)),r.length===0&&a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches."})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Prescription"}),a.jsxs("div",{className:"grid gap-2",children:[o.map((v,b)=>a.jsxs("div",{className:"rounded-2xl border p-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:v.drug_name}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:[v._form||"","  ",v._unit||""]})]}),a.jsx("button",{className:"text-xs text-rose-600 hover:underline",onClick:()=>m(b),children:"Remove"})]}),a.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-5",children:[a.jsx("input",{className:"input",placeholder:"Strength",value:v.strength,onChange:w=>p(b,"strength",w.target.value)}),a.jsx("input",{className:"input",placeholder:"Frequency",value:v.frequency,onChange:w=>p(b,"frequency",w.target.value)}),a.jsx("input",{className:"input",placeholder:"Days",value:v.duration_days,onChange:w=>p(b,"duration_days",w.target.value.replace(/\D/g,""))}),a.jsx("input",{className:"input",placeholder:"Qty",value:v.quantity,onChange:w=>p(b,"quantity",w.target.value.replace(/\D/g,""))}),a.jsx("input",{className:"input",placeholder:"Unit Price",value:v.unit_price,onChange:w=>p(b,"unit_price",w.target.value.replace(/[^\d.]/g,""))})]})]},b)),o.length===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No items yet."})]}),(c||u)&&a.jsx("div",{className:`rounded-xl p-3 text-sm ${u?"bg-red-50 text-red-700 border border-red-200":"text-emerald-700"}`,children:u||c}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{className:"px-3 py-2 rounded-xl border",onClick:x,children:"Save"}),a.jsx("button",{className:"btn",onClick:y,children:"e-Sign"})]})]})]})}function Jw({visitId:t,kind:n}){const[s,r]=g.useState(""),[i,o]=g.useState([]),[l,c]=g.useState(""),[d,u]=g.useState("");g.useEffect(()=>{let h=!0;return(async()=>{try{const m=n==="lab"?C2:_2,{data:x}=await m(s);h&&o(x||[])}catch{h&&o([])}})(),()=>{h=!1}},[s,n]);const f=async h=>{c(""),u("");try{const p={test_ids:[h.id]};n==="lab"?await Vz(t,p):await Hz(t,p),c("Order placed.")}catch(p){u(gc(p))}};return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm font-medium",children:[n==="lab"?"Lab":"Radiology"," tests"]}),a.jsx("input",{className:"input w-48",value:s,onChange:h=>r(h.target.value),placeholder:"Search"})]}),(l||d)&&a.jsx("div",{className:`mb-2 rounded-xl p-3 text-sm ${d?"bg-red-50 text-red-700 border border-red-200":"text-emerald-700"}`,children:d||l}),a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[i.map(h=>a.jsxs("div",{className:"rounded-2xl border p-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:h.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",h.price]}),a.jsx("div",{className:"mt-2 flex justify-end",children:a.jsx("button",{className:"btn",onClick:()=>f(h),children:"Order"})})]},h.id)),i.length===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No tests."})]})]})}function cB({v:t}){return a.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"UHID:"})," ",t.uhid]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Doctor:"})," ",t.doctor_name]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date/Time:"})," ",t.visit_at]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"})," ",(t.appointment_status||"").replace("_"," ")]}),a.jsx("div",{className:"mt-2 text-gray-700",children:"Use Print/PDF to export a summary with your letterhead."})]})}function dB(){const[t,n]=g.useState("meds");return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"OPD Masters"}),a.jsxs("div",{className:"rounded-2xl border bg-white",children:[a.jsx("div",{className:"flex gap-1 border-b p-2",children:["meds","lab","ris"].map(s=>a.jsx("button",{onClick:()=>n(s),className:`px-3 py-2 text-sm rounded-xl ${t===s?"bg-blue-50 text-blue-700":"hover:bg-gray-50"}`,children:{meds:"Medicines",lab:"Lab Tests",ris:"Radiology Tests"}[s]},s))}),t==="meds"&&a.jsx(uB,{}),t==="lab"&&a.jsx(fB,{}),t==="ris"&&a.jsx(hB,{})]})]})}function uB(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState({name:"",form:"tablet",unit:"per tab",price_per_unit:""}),l=async()=>{const{data:d}=await k2(t);r(d||[])};g.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await Uz({...i,price_per_unit:Number(i.price_per_unit)||0}),o({name:"",form:"tablet",unit:"per tab",price_per_unit:""}),l()};return a.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[a.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Add Medicine"}),a.jsx("input",{className:"input",placeholder:"Name",value:i.name,onChange:d=>o(u=>({...u,name:d.target.value}))}),a.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[a.jsx("input",{className:"input",placeholder:"Form (tablet/syrup)",value:i.form,onChange:d=>o(u=>({...u,form:d.target.value}))}),a.jsx("input",{className:"input",placeholder:"Unit (per tab/per 100ml)",value:i.unit,onChange:d=>o(u=>({...u,unit:d.target.value}))})]}),a.jsx("input",{className:"input",placeholder:"Price",value:i.price_per_unit,onChange:d=>o(u=>({...u,price_per_unit:d.target.value.replace(/[^\d.]/g,"")}))}),a.jsx("button",{className:"btn",children:"Save"})]}),a.jsxs("div",{children:[a.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:s.map(d=>a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:d.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[d.form,"  ",d.unit]}),a.jsxs("div",{className:"text-xs",children:["",d.price_per_unit]})]},d.id))})]})]})}function fB(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState({code:"",name:"",price:""}),l=async()=>{const{data:d}=await C2(t);r(d||[])};g.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await Wz({...i,price:Number(i.price)||0}),o({code:"",name:"",price:""}),l()};return a.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[a.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Add Lab Test"}),a.jsx("input",{className:"input",placeholder:"Code",value:i.code,onChange:d=>o(u=>({...u,code:d.target.value}))}),a.jsx("input",{className:"input",placeholder:"Name",value:i.name,onChange:d=>o(u=>({...u,name:d.target.value}))}),a.jsx("input",{className:"input",placeholder:"Price",value:i.price,onChange:d=>o(u=>({...u,price:d.target.value.replace(/[^\d.]/g,"")}))}),a.jsx("button",{className:"btn",children:"Save"})]}),a.jsxs("div",{children:[a.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:s.map(d=>a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:d.name}),a.jsx("div",{className:"text-xs text-gray-500",children:d.code}),a.jsxs("div",{className:"text-xs",children:["",d.price]})]},d.id))})]})]})}function hB(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState({code:"",name:"",price:""}),l=async()=>{const{data:d}=await _2(t);r(d||[])};g.useEffect(()=>{l()},[t]);const c=async d=>{d.preventDefault(),await qz({...i,price:Number(i.price)||0}),o({code:"",name:"",price:""}),l()};return a.jsxs("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[a.jsxs("form",{onSubmit:c,className:"space-y-2 rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Add Radiology Test"}),a.jsx("input",{className:"input",placeholder:"Code",value:i.code,onChange:d=>o(u=>({...u,code:d.target.value}))}),a.jsx("input",{className:"input",placeholder:"Name",value:i.name,onChange:d=>o(u=>({...u,name:d.target.value}))}),a.jsx("input",{className:"input",placeholder:"Price",value:i.price,onChange:d=>o(u=>({...u,price:d.target.value.replace(/[^\d.]/g,"")}))}),a.jsx("button",{className:"btn",children:"Save"})]}),a.jsxs("div",{children:[a.jsx("input",{className:"input mb-2",placeholder:"Search",value:t,onChange:d=>n(d.target.value)}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:s.map(d=>a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:d.name}),a.jsx("div",{className:"text-xs text-gray-500",children:d.code}),a.jsxs("div",{className:"text-xs",children:["",d.price]})]},d.id))})]})]})}function pe({anyOf:t=[],fallback:n=null,children:s}){const r=lt(d=>d.user),i=lt(d=>d.modules)||{};if(!!(r!=null&&r.is_admin))return s;const l=new Set(Object.values(i).flat().map(d=>typeof d=="string"?d:d==null?void 0:d.code).filter(Boolean));return t.length===0||t.some(d=>l.has(d))?s:n}const Uy=()=>I.get("/ipd/wards"),pB=t=>I.post("/ipd/wards",t),mB=t=>I.delete(`/ipd/wards/${t}`),Wy=(t={})=>I.get("/ipd/rooms",{params:t}),gB=t=>I.post("/ipd/rooms",t),xB=t=>I.delete(`/ipd/rooms/${t}`),Bs=(t={})=>I.get("/ipd/beds",{params:t}),yB=t=>I.post("/ipd/beds",t),vB=t=>I.delete(`/ipd/beds/${t}`),bB=(t,n)=>I.patch(`/ipd/beds/${t}/state`,n),T2=()=>I.get("/ipd/packages"),wB=t=>I.post("/ipd/packages",t),jB=t=>I.delete(`/ipd/packages/${t}`),NB=()=>I.get("/ipd/bed-rates"),SB=t=>I.post("/ipd/bed-rates",t),kB=t=>I.delete(`/ipd/bed-rates/${t}`),fh=(t={})=>I.get("/ipd/admissions",{params:t}),CB=t=>I.post("/ipd/admissions",t),M2=async t=>{var n,s;try{return await I.get(`/ipd/admissions/${t}`)}catch(r){const i=(n=r==null?void 0:r.response)==null?void 0:n.status;if(i===404||i===405)try{return await I.get(`/ipd/admission/${t}`)}catch(o){const l=(s=o==null?void 0:o.response)==null?void 0:s.status;if(l===404||l===405){const{data:c=[]}=await I.get("/ipd/admissions",{params:{limit:500}}),d=(c||[]).find(u=>Number(u==null?void 0:u.id)===Number(t));if(!d){const u=new Error("Not found");throw u.status=404,u}return{data:d}}throw o}throw r}},_B=(t,n)=>I.put(`/ipd/admissions/${t}`,n),EB=t=>I.patch(`/ipd/admissions/${t}/cancel`),TB=(t,n)=>I.post(`/ipd/admissions/${t}/transfer`,n),MB=t=>I.get(`/ipd/admissions/${t}/nursing-notes`),AB=(t,n)=>I.post(`/ipd/admissions/${t}/nursing-notes`,n),PB=t=>I.get(`/ipd/admissions/${t}/vitals`),RB=(t,n)=>I.post(`/ipd/admissions/${t}/vitals`,n),OB=t=>I.get(`/ipd/admissions/${t}/io`),DB=(t,n)=>I.post(`/ipd/admissions/${t}/io`,n),IB=t=>I.get(`/ipd/admissions/${t}/shift-handovers`),LB=(t,n)=>I.post(`/ipd/admissions/${t}/shift-handovers`,n),$B=t=>I.get(`/ipd/admissions/${t}/rounds`),FB=(t,n)=>I.post(`/ipd/admissions/${t}/rounds`,n),zB=t=>I.get(`/ipd/admissions/${t}/progress-notes`),BB=(t,n)=>I.post(`/ipd/admissions/${t}/progress-notes`,n),VB=t=>I.get(`/ipd/admissions/${t}/referrals`),HB=(t,n)=>I.post(`/ipd/admissions/${t}/referrals`,n),UB=t=>I.get(`/ipd/admissions/${t}/discharge-summary`),WB=(t,n)=>I.post(`/ipd/admissions/${t}/discharge-summary`,n),qB=t=>I.get(`/ipd/admissions/${t}/discharge-checklist`),KB=(t,n)=>I.post(`/ipd/admissions/${t}/discharge-checklist`,n),GB=t=>I.get(`/ipd/admissions/${t}/ot-cases`),YB=(t,n)=>I.post(`/ipd/admissions/${t}/ot-cases`,n),XB=t=>I.get(`/ipd/ot-cases/${t}/anaesthesia`),JB=t=>I.post("/ipd/anaesthesia",t),QB=(t,n={})=>I.get("/ipd/bed-charges/preview",{params:{admission_id:t,...n}}),hh=t=>I.get(`/patients/${t}`),ZB=(...t)=>AB(...t),e6=(...t)=>RB(...t);function t6(){return a.jsx(pe,{anyOf:["ipd.masters.manage","ipd.packages.manage"],children:a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"IPD Masters"}),a.jsx(n6,{}),a.jsx(s6,{}),a.jsx(r6,{})]})})}function n6(){const[t,n]=g.useState([]),[s,r]=g.useState([]),[i,o]=g.useState([]),[l,c]=g.useState(""),d=async()=>{var u,f;c("");try{const[h,p,m]=await Promise.all([Uy(),Wy(),Bs()]);n(h.data||[]),r(p.data||[]),o(m.data||[])}catch(h){c(((f=(u=h==null?void 0:h.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load")}};return g.useEffect(()=>{d()},[]),a.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-4",children:[a.jsx("div",{className:"font-medium",children:"Ward  Room  Bed"}),l&&a.jsx("div",{className:"text-rose-700 text-sm",children:l}),a.jsx(Fl,{title:"New Ward",onSubmit:async u=>{await pB(u),await d()},fields:[{name:"code",placeholder:"Code",required:!0},{name:"name",placeholder:"Name",required:!0},{name:"floor",placeholder:"Floor"}]}),a.jsx(Fl,{title:"New Room",onSubmit:async u=>{await gB(u),await d()},fields:[{name:"ward_id",type:"select",options:t.map(u=>({value:u.id,label:`${u.code}  ${u.name}`})),required:!0},{name:"number",placeholder:"Room number",required:!0},{name:"type",placeholder:"Type (General/Private/ICU)",required:!0}]}),a.jsx(Fl,{title:"New Bed",onSubmit:async u=>{await yB(u),await d()},fields:[{name:"room_id",type:"select",options:s.map(u=>({value:u.id,label:`Ward ${u.ward_id}  Room ${u.number} (${u.type})`})),required:!0},{name:"code",placeholder:"Bed code",required:!0}]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Wards"}),a.jsx(zl,{items:t,cols:[["code"],["name"],["floor"]],onDelete:async u=>{await mB(u),await d()}})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Rooms"}),a.jsx(zl,{items:s,cols:[["ward_id","Ward"],["number","Room"],["type","Type"]],onDelete:async u=>{await xB(u),await d()}})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Beds"}),a.jsx(zl,{items:i,cols:[["room_id","RoomId"],["code","Code"],["state","State"]],onDelete:async u=>{await vB(u),await d()}})]})]})]})}function s6(){const[t,n]=g.useState([]),s=async()=>{const{data:r}=await T2();n(r||[])};return g.useEffect(()=>{s()},[]),a.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-3",children:[a.jsx("div",{className:"font-medium",children:"Packages"}),a.jsx(Fl,{title:"New Package",onSubmit:async r=>{await wB(r),await s()},fields:[{name:"name",placeholder:"Name",required:!0},{name:"included",placeholder:"Included"},{name:"excluded",placeholder:"Excluded"},{name:"charges",placeholder:"Charges",type:"number"}]}),a.jsx(zl,{items:t,cols:[["name"],["charges"],["included"],["excluded"]],onDelete:async r=>{await jB(r),await s()}})]})}function r6(){const[t,n]=g.useState([]),s=async()=>{const{data:r}=await NB();n(r||[])};return g.useEffect(()=>{s()},[]),a.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-3",children:[a.jsx("div",{className:"font-medium",children:"Bed Rates"}),a.jsx(Fl,{title:"New Bed Rate",onSubmit:async r=>{await SB(r),await s()},fields:[{name:"room_type",placeholder:"General/Private/ICU",required:!0},{name:"daily_rate",placeholder:"Daily rate",type:"number",required:!0},{name:"effective_from",type:"date",required:!0},{name:"effective_to",type:"date"}]}),a.jsx(zl,{items:t,cols:[["room_type","Room"],["daily_rate","Rate"],["effective_from","From"],["effective_to","To"],["is_active","Active"]],onDelete:async r=>{await kB(r),await s()}})]})}function Fl({title:t,fields:n,onSubmit:s}){const[r,i]=g.useState({}),o=async l=>{l.preventDefault();const c={...r};Object.keys(c).forEach(d=>c[d]===""&&delete c[d]),await s(c),i({})};return a.jsxs("form",{onSubmit:o,className:"rounded-lg border bg-gray-50 p-3 grid gap-3 md:grid-cols-4",children:[a.jsx("div",{className:"md:col-span-4 text-sm font-medium",children:t}),n.map(l=>{var c;return l.type==="select"?a.jsxs("select",{className:"input",value:r[l.name]||"",onChange:d=>i(u=>({...u,[l.name]:d.target.value})),required:l.required,children:[a.jsx("option",{value:"",children:l.placeholder||"Select"}),(c=l.options)==null?void 0:c.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))]},l.name):a.jsx("input",{className:"input",type:l.type||"text",placeholder:l.placeholder||l.name,value:r[l.name]||"",onChange:d=>i(u=>({...u,[l.name]:d.target.value})),required:l.required},l.name)}),a.jsx("div",{className:"md:col-span-4 flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})})]})}function zl({items:t=[],cols:n=[],onDelete:s}){return a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[n.map(([r,i])=>a.jsx("th",{className:"px-3 py-2",children:i||r},r)),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsxs("tbody",{children:[t.map(r=>a.jsxs("tr",{className:"border-t",children:[n.map(([i])=>a.jsx("td",{className:"px-3 py-2",children:String(r[i]??"")},i)),a.jsx("td",{className:"px-3 py-2",children:a.jsx("button",{className:"btn btn-sm bg-rose-600 hover:bg-rose-700",onClick:()=>s(r.id),children:"Delete"})})]},r.id)),!t.length&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:n.length+1,children:"No items"})})]})]})})}const kp=10;function i6({value:t,onChange:n}){const[s,r]=g.useState(""),[i,o]=g.useState([]),[l,c]=g.useState(0);g.useEffect(()=>{let h=!0;return(async()=>{const{data:m}=await uh(s||"");h&&(o(m||[]),c(0))})(),()=>{h=!1}},[s]);const d=Math.max(1,Math.ceil(((i==null?void 0:i.length)||0)/kp)),u=l*kp,f=g.useMemo(()=>(i||[]).slice(u,u+kp),[i,u]);return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Patient"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search by UHID, name, phone, email",value:s,onChange:h=>r(h.target.value)})]}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"UHID"}),a.jsx("th",{className:"px-3 py-2",children:"Name"}),a.jsx("th",{className:"px-3 py-2",children:"Phone"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsxs("tbody",{children:[f.map(h=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-1",children:h.uhid}),a.jsxs("td",{className:"px-3 py-1",children:[h.first_name," ",h.last_name]}),a.jsx("td",{className:"px-3 py-1",children:h.phone||""}),a.jsx("td",{className:"px-3 py-1",children:a.jsx("button",{className:["btn btn-sm",t===h.id?"bg-emerald-600 hover:bg-emerald-700":""].join(" "),onClick:()=>n(h.id),children:t===h.id?"Selected":"Select"})})]},h.id)),!f.length&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",colSpan:4,children:"No results"})})]})]})}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("button",{className:"px-2 py-1 rounded-lg border disabled:opacity-50",onClick:()=>c(h=>Math.max(0,h-1)),disabled:l===0,children:[a.jsx(a2,{className:"inline h-4 w-4"})," Prev"]}),a.jsxs("div",{children:["Page ",l+1," / ",d]}),a.jsxs("button",{className:"px-2 py-1 rounded-lg border disabled:opacity-50",onClick:()=>c(h=>Math.min(d-1,h+1)),disabled:l>=d-1,children:["Next ",a.jsx(o2,{className:"inline h-4 w-4"})]})]})]})}function A2({value:t,onChange:n}){const[s,r]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState([]),[d,u]=g.useState(""),[f,h]=g.useState([]);return g.useEffect(()=>{Uy().then(p=>r(p.data||[]))},[]),g.useEffect(()=>{c([]),u(""),h([]),i&&Wy({ward_id:i}).then(p=>c(p.data||[]))},[i]),g.useEffect(()=>{h([]),d&&Bs({room_id:d}).then(p=>h(p.data||[]))},[d]),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Allocate Bed (Ward  Room  Bed)"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("select",{className:"input",value:i,onChange:p=>o(p.target.value),children:[a.jsx("option",{value:"",children:"Select ward"}),s.map(p=>a.jsxs("option",{value:p.id,children:[p.code,"  ",p.name]},p.id))]}),a.jsxs("select",{className:"input",value:d,onChange:p=>u(p.target.value),disabled:!i,children:[a.jsx("option",{value:"",children:"Select room"}),l.map(p=>a.jsxs("option",{value:p.id,children:[p.number,"  ",p.type]},p.id))]}),a.jsxs("select",{className:"input",value:t||"",onChange:p=>n(Number(p.target.value)),disabled:!d,children:[a.jsx("option",{value:"",children:"Select bed"}),f.map(p=>a.jsxs("option",{value:p.id,children:[p.code," ",p.state!=="vacant"?` ${p.state}`:""]},p.id))]})]}),!!t&&(()=>{const p=f.find(m=>m.id===t);return p?a.jsxs("div",{className:"text-xs text-gray-500",children:["Selected: ",a.jsx("span",{className:"font-medium",children:p.code})," (",p.state,")"]}):null})()]})}function qy({value:t,onChange:n,label:s="Department  Role  User"}){const[r,i]=g.useState([]),[o,l]=g.useState(""),[c,d]=g.useState([]),[u,f]=g.useState(""),[h,p]=g.useState([]),[m,x]=g.useState("");return g.useEffect(()=>{By().then(y=>i(y.data||[]))},[]),g.useEffect(()=>{if(f(""),p([]),x(""),!o){d([]);return}Vy(o).then(y=>d(y.data||[]))},[o]),g.useEffect(()=>{p([]),x(""),!(!o||!u)&&Hy(o,u).then(y=>p(y.data||[]))},[o,u]),g.useEffect(()=>{n==null||n(m?Number(m):null,{department_id:o?Number(o):null})},[m]),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:s}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[a.jsxs("select",{className:"input",value:o,onChange:y=>l(y.target.value),children:[a.jsx("option",{value:"",children:"Select department"}),r.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]}),a.jsxs("select",{className:"input",value:u,onChange:y=>f(y.target.value),disabled:!o,children:[a.jsx("option",{value:"",children:"Select role"}),c.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]}),a.jsxs("select",{className:"input",value:m,onChange:y=>x(y.target.value),disabled:!u,children:[a.jsx("option",{value:"",children:"Select user"}),h.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})}function a6({kind:t="success",title:n,message:s,onClose:r}){const i={success:{bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-700",Icon:ga},warn:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-800",Icon:oh},error:{bg:"bg-rose-50",border:"border-rose-200",text:"text-rose-700",Icon:Uc}},o=i[t]||i.success;return a.jsxs("div",{className:`flex items-start gap-3 rounded-xl border ${o.border} ${o.bg} p-3`,children:[a.jsx(o.Icon,{className:`h-5 w-5 mt-0.5 ${o.text}`}),a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:n}),s?a.jsx("div",{className:"text-[13px] opacity-90",children:s}):null]}),a.jsx("button",{className:"ml-auto inline-flex h-7 w-7 items-center justify-center rounded-lg hover:bg-black/5",onClick:r,"aria-label":"Close",children:a.jsx(dn,{className:"h-4 w-4"})})]})}const Js=t=>typeof t=="number"?Number.isInteger(t)&&t>0:typeof t=="string"&&t.trim()!==""&&/^\d+$/.test(t)?Number(t)>0:!1;function o6(){const[t,n]=g.useState([]),[s,r]=g.useState([]),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,u]=g.useState(null),[f,h]=g.useState(null),[p,m]=g.useState(null),[x,y]=g.useState({admission_type:"planned",expected_discharge_at:"",package_id:"",payor_type:"cash",insurer_name:"",policy_number:"",preliminary_diagnosis:"",history:"",care_plan:""}),[v,b]=g.useState(null),w=g.useRef(null),j=k=>{w.current&&clearTimeout(w.current),b(k),w.current=setTimeout(()=>b(null),4500)},N=k=>k?k.length===16?`${k}:00`:k:void 0,S=g.useMemo(()=>t.find(k=>k.id===Number(p))||null,[t,p]);g.useEffect(()=>{let k=!0;return(async()=>{var E,M;o(!0);try{const[D,R]=await Promise.all([Bs(),T2()]);if(!k)return;n(D.data||[]),r(R.data||[])}catch(D){j({kind:"error",title:"Failed to load lookups",message:((M=(E=D==null?void 0:D.response)==null?void 0:E.data)==null?void 0:M.detail)||"Please refresh and try again."})}finally{k&&o(!1)}})(),()=>{k=!1}},[]);const _=async k=>{try{const{data:E}=await fh({status:"admitted",patient_id:k});return Array.isArray(E)&&E.length>0?E[0]:null}catch{return null}},C=async k=>{var M;if(k.preventDefault(),i)return;if(!Js(l)){j({kind:"warn",title:"Select a patient",message:"Pick a patient before admitting."});return}if(!Js(p)){j({kind:"warn",title:"Select a bed",message:"Choose Ward  Room  Bed."});return}if(!t.find(D=>D.id===Number(p))){j({kind:"warn",title:"Selected bed is unavailable",message:"Refresh beds and select again."});return}o(!0);try{const D=await _(Number(l));if(D!=null&&D.id){const P=`ADM-${String(D.id).padStart(6,"0")}`;j({kind:"warn",title:"Patient already admitted",message:`Active admission ${P} exists. Open Tracking / My Admissions to view.`});return}const R={patient_id:Number(l),bed_id:Number(p),admission_type:x.admission_type||"planned",expected_discharge_at:N(x.expected_discharge_at),department_id:Js(d)?Number(d):void 0,practitioner_user_id:Js(f)?Number(f):void 0,package_id:Js(x.package_id)?Number(x.package_id):void 0,payor_type:x.payor_type||"cash",insurer_name:x.insurer_name||"",policy_number:x.policy_number||"",preliminary_diagnosis:x.preliminary_diagnosis||"",history:x.history||"",care_plan:x.care_plan||""};Object.keys(R).forEach(P=>R[P]===void 0&&delete R[P]);const{data:T}=await CB(R);j({kind:"success",title:"Admission created",message:`Admission ADM-${String(T.id).padStart(6,"0")} has been created successfully.`});try{const P=await Bs();n(P.data||[])}catch{}m(null),y(P=>({...P,expected_discharge_at:"",preliminary_diagnosis:"",history:"",care_plan:"",package_id:"",payor_type:"cash",insurer_name:"",policy_number:""}))}catch(D){const R=(M=D==null?void 0:D.response)==null?void 0:M.data,T=Array.isArray(R==null?void 0:R.detail)?R.detail.map(L=>L==null?void 0:L.msg).filter(Boolean).join(", "):(R==null?void 0:R.detail)||D.message||"Failed to create admission",P=/Bed not found/i.test(T)?"Please select a valid bed.":/Bed not available/i.test(T)?"That bed is not available. Pick another one.":T;j({kind:"error",title:"Admission failed",message:P})}finally{o(!1)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[v&&a.jsx(a6,{kind:v.kind,title:v.title,message:v.message,onClose:()=>b(null)}),a.jsxs("div",{className:"rounded-2xl border bg-white shadow-sm",children:[a.jsx("div",{className:"border-b px-4 py-3 font-semibold",children:"New Admission"}),a.jsx(pe,{anyOf:["ipd.manage"],fallback:a.jsx("div",{className:"p-4 text-xs text-gray-500",children:"Creating admissions requires IPD Manage permission."}),children:a.jsxs("form",{onSubmit:C,className:"p-4 space-y-6 text-sm",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(i6,{value:l??void 0,onChange:c}),Js(l)&&a.jsx("div",{className:"rounded-xl border bg-gray-50 px-3 py-2 text-xs text-gray-600",children:"Tip: Well auto-block if this patient already has an active admission."})]}),a.jsx(qy,{label:"Primary Doctor  Department  Role  User",value:f??void 0,onChange:(k,E)=>{h(k||null),u((E==null?void 0:E.department_id)||null)}}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(A2,{value:p??"",onChange:k=>m(Js(k)?Number(k):null)}),S&&a.jsxs("div",{className:"rounded-xl border bg-white px-3 py-2 text-xs text-gray-700",children:["Selected bed: ",a.jsx("span",{className:"font-medium",children:S.code}),"  State:",a.jsx("span",{className:["rounded-md px-1.5 py-0.5",S.state==="vacant"?"bg-emerald-50 text-emerald-700 border border-emerald-200":S.state==="reserved"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-gray-100 text-gray-700 border"].join(" "),children:S.state}),S.reserved_until&&a.jsxs("span",{className:"ml-2 text-gray-500",children:["until ",new Date(S.reserved_until).toLocaleString()]})]})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Admission type"}),a.jsx("select",{className:"input",value:x.admission_type,onChange:k=>y({...x,admission_type:k.target.value}),children:["planned","emergency","daycare"].map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Expected discharge"}),a.jsx("input",{type:"datetime-local",className:"input",value:x.expected_discharge_at,onChange:k=>y({...x,expected_discharge_at:k.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Package"}),a.jsxs("select",{className:"input",value:x.package_id,onChange:k=>y({...x,package_id:k.target.value}),children:[a.jsx("option",{value:"",children:""}),s.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Payor type"}),a.jsx("select",{className:"input",value:x.payor_type,onChange:k=>y({...x,payor_type:k.target.value}),children:["cash","insurance","tpa"].map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Insurer name",value:x.insurer_name,onChange:k=>y({...x,insurer_name:k.target.value})}),a.jsx("input",{className:"input",placeholder:"Policy number",value:x.policy_number,onChange:k=>y({...x,policy_number:k.target.value})}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Preliminary diagnosis",value:x.preliminary_diagnosis,onChange:k=>y({...x,preliminary_diagnosis:k.target.value})}),a.jsx("input",{className:"input",placeholder:"History",value:x.history,onChange:k=>y({...x,history:k.target.value})}),a.jsx("input",{className:"input",placeholder:"Care plan",value:x.care_plan,onChange:k=>y({...x,care_plan:k.target.value})})]}),a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsx("button",{className:"btn",disabled:i||!Js(l)||!Js(p),children:i?"Admitting":"Admit"})})]})})]})]})}function Ht(t){const n=lt(r=>r.modules)||{};return!!Object.values(n).flat().find(r=>r.code===t)}function l6({admissionId:t,canWrite:n}){const s=n??Ht("ipd.nursing"),[r,i]=g.useState([]),[o,l]=g.useState({entry_time:"",patient_condition:"",clinical_finding:"",significant_events:"",response_progress:""}),[c,d]=g.useState(!1),[u,f]=g.useState(""),h=async()=>{var m,x;d(!0),f("");try{const{data:y}=await MB(t);i(y||[])}catch(y){f(((x=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:x.detail)||"Failed to load")}finally{d(!1)}};g.useEffect(()=>{h()},[t]);const p=async m=>{var x,y;m.preventDefault();try{const v={entry_time:o.entry_time?new Date(o.entry_time).toISOString():void 0,patient_condition:o.patient_condition||"",clinical_finding:o.clinical_finding||"",significant_events:o.significant_events||"",response_progress:o.response_progress||""};await ZB(t,v),l({entry_time:"",patient_condition:"",clinical_finding:"",significant_events:"",response_progress:""}),h()}catch(v){f(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Save failed")}};return a.jsxs("div",{className:"space-y-4",children:[!s&&a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-2 text-xs text-gray-600",children:"View-only. You dont have permission to add nursing notes."}),s&&a.jsxs("form",{onSubmit:p,className:"rounded-xl border bg-white p-3 space-y-2",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Entry time"}),a.jsx("input",{type:"datetime-local",className:"input",value:o.entry_time,onChange:m=>l(x=>({...x,entry_time:m.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Patient condition"}),a.jsx("input",{className:"input",value:o.patient_condition,onChange:m=>l(x=>({...x,patient_condition:m.target.value}))})]}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Clinical finding",value:o.clinical_finding,onChange:m=>l(x=>({...x,clinical_finding:m.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Significant events",value:o.significant_events,onChange:m=>l(x=>({...x,significant_events:m.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Response / Progress",value:o.response_progress,onChange:m=>l(x=>({...x,response_progress:m.target.value}))})]}),a.jsx("button",{className:"btn",children:"Add Note"})]}),a.jsxs("div",{className:"rounded-xl border bg-white",children:[a.jsx("div",{className:"px-3 py-2 text-sm font-medium",children:"Recent notes"}),c?a.jsx("div",{className:"px-3 pb-3 text-sm",children:"Loading"}):a.jsxs("div",{className:"divide-y",children:[(r||[]).map(m=>a.jsxs("div",{className:"px-3 py-2 text-sm",children:[a.jsx("div",{className:"text-xs text-gray-500",children:new Date(m.entry_time).toLocaleString()}),a.jsx("div",{className:"font-medium",children:m.patient_condition||""}),a.jsx("div",{className:"text-gray-700",children:m.clinical_finding}),m.significant_events&&a.jsxs("div",{className:"text-gray-700",children:["Events: ",m.significant_events]}),m.response_progress&&a.jsxs("div",{className:"text-gray-700",children:["Progress: ",m.response_progress]})]},m.id)),(!r||r.length===0)&&a.jsx("div",{className:"px-3 py-3 text-sm text-gray-500",children:"No notes yet."})]})]}),u&&a.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:u})]})}function c6({admissionId:t,canWrite:n}){const s=n??Ht("ipd.nursing"),[r,i]=g.useState([]),[o,l]=g.useState({recorded_at:"",bp_systolic:"",bp_diastolic:"",temp_c:"",rr:"",spo2:"",pulse:""}),[c,d]=g.useState(""),u=async()=>{var h,p;try{const{data:m}=await PB(t);i(m||[])}catch(m){d(((p=(h=m==null?void 0:m.response)==null?void 0:h.data)==null?void 0:p.detail)||"Failed to load")}};g.useEffect(()=>{u()},[t]);const f=async h=>{var p,m;h.preventDefault(),d("");try{const x={recorded_at:o.recorded_at?new Date(o.recorded_at).toISOString():void 0,bp_systolic:o.bp_systolic?Number(o.bp_systolic):void 0,bp_diastolic:o.bp_diastolic?Number(o.bp_diastolic):void 0,temp_c:o.temp_c?Number(o.temp_c):void 0,rr:o.rr?Number(o.rr):void 0,spo2:o.spo2?Number(o.spo2):void 0,pulse:o.pulse?Number(o.pulse):void 0};await e6(t,x),l({recorded_at:"",bp_systolic:"",bp_diastolic:"",temp_c:"",rr:"",spo2:"",pulse:""}),u()}catch(x){d(((m=(p=x==null?void 0:x.response)==null?void 0:p.data)==null?void 0:m.detail)||"Save failed")}};return a.jsxs("div",{className:"space-y-4",children:[!s&&a.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-2 text-xs text-gray-600",children:"View-only. You dont have permission to record vitals."}),s&&a.jsxs("form",{onSubmit:f,className:"rounded-xl border bg-white p-3 space-y-2",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Recorded at"}),a.jsx("input",{type:"datetime-local",className:"input",value:o.recorded_at,onChange:h=>l(p=>({...p,recorded_at:h.target.value}))})]}),a.jsx("input",{className:"input",placeholder:"BP (Systolic)",value:o.bp_systolic,onChange:h=>l(p=>({...p,bp_systolic:h.target.value}))}),a.jsx("input",{className:"input",placeholder:"BP (Diastolic)",value:o.bp_diastolic,onChange:h=>l(p=>({...p,bp_diastolic:h.target.value}))}),a.jsx("input",{className:"input",placeholder:"Temp C",value:o.temp_c,onChange:h=>l(p=>({...p,temp_c:h.target.value}))}),a.jsx("input",{className:"input",placeholder:"RR",value:o.rr,onChange:h=>l(p=>({...p,rr:h.target.value}))}),a.jsx("input",{className:"input",placeholder:"SpO",value:o.spo2,onChange:h=>l(p=>({...p,spo2:h.target.value}))}),a.jsx("input",{className:"input",placeholder:"Pulse",value:o.pulse,onChange:h=>l(p=>({...p,pulse:h.target.value}))})]}),a.jsx("button",{className:"btn",children:"Record"})]}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Time"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"BP"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Temp"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"RR"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"SpO"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Pulse"})]})}),a.jsxs("tbody",{children:[(r||[]).map(h=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(h.recorded_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:[h.bp_systolic,h.bp_diastolic].filter(Boolean).join("/")||""}),a.jsx("td",{className:"px-3 py-2",children:h.temp_c??""}),a.jsx("td",{className:"px-3 py-2",children:h.rr??""}),a.jsx("td",{className:"px-3 py-2",children:h.spo2??""}),a.jsx("td",{className:"px-3 py-2",children:h.pulse??""})]},h.id)),(!r||r.length===0)&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3 text-gray-500",colSpan:6,children:"No vitals yet."})})]})]})}),c&&a.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:c})]})}function d6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState({recorded_at:"",intake_ml:"",urine_ml:"",drains_ml:"",stools_count:"",remarks:""}),c=async()=>{var f,h;i("");try{const{data:p}=await OB(t);s((p||[]).sort((m,x)=>new Date(x.recorded_at)-new Date(m.recorded_at)))}catch(p){i(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to load I/O")}};g.useEffect(()=>{c()},[t]);const d=f=>f?f.length===16?`${f}:00`:f:void 0,u=async f=>{var h,p;f.preventDefault(),i("");try{const m={recorded_at:d(o.recorded_at),intake_ml:o.intake_ml?Number(o.intake_ml):0,urine_ml:o.urine_ml?Number(o.urine_ml):0,drains_ml:o.drains_ml?Number(o.drains_ml):0,stools_count:o.stools_count?Number(o.stools_count):0,remarks:o.remarks||""};await DB(t,m),l({recorded_at:"",intake_ml:"",urine_ml:"",drains_ml:"",stools_count:"",remarks:""}),await c()}catch(m){i(((p=(h=m==null?void 0:m.response)==null?void 0:h.data)==null?void 0:p.detail)||"Failed to add I/O")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{anyOf:["ipd.nursing"],children:a.jsxs("form",{onSubmit:u,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-6 text-sm",children:[a.jsx("div",{className:"md:col-span-6 font-medium",children:"Record Intake / Output"}),a.jsx("input",{type:"datetime-local",className:"input",value:o.recorded_at,onChange:f=>l(h=>({...h,recorded_at:f.target.value}))}),a.jsx("input",{className:"input",placeholder:"Intake (ml)",value:o.intake_ml,onChange:f=>l(h=>({...h,intake_ml:f.target.value}))}),a.jsx("input",{className:"input",placeholder:"Urine (ml)",value:o.urine_ml,onChange:f=>l(h=>({...h,urine_ml:f.target.value}))}),a.jsx("input",{className:"input",placeholder:"Drains (ml)",value:o.drains_ml,onChange:f=>l(h=>({...h,drains_ml:f.target.value}))}),a.jsx("input",{className:"input",placeholder:"Stools count",value:o.stools_count,onChange:f=>l(h=>({...h,stools_count:f.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Remarks",value:o.remarks,onChange:f=>l(h=>({...h,remarks:f.target.value}))}),a.jsx("div",{className:"md:col-span-6 flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})}),r&&a.jsx("div",{className:"md:col-span-6 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:r})]})}),a.jsx("div",{className:"rounded-xl border overflow-x-auto",children:a.jsxs("table",{className:"min-w-[680px] w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Time"}),a.jsx("th",{className:"px-3 py-2",children:"Intake"}),a.jsx("th",{className:"px-3 py-2",children:"Urine"}),a.jsx("th",{className:"px-3 py-2",children:"Drains"}),a.jsx("th",{className:"px-3 py-2",children:"Stools"}),a.jsx("th",{className:"px-3 py-2",children:"Remarks"})]})}),a.jsxs("tbody",{children:[(n||[]).map(f=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(f.recorded_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:f.intake_ml}),a.jsx("td",{className:"px-3 py-2",children:f.urine_ml}),a.jsx("td",{className:"px-3 py-2",children:f.drains_ml}),a.jsx("td",{className:"px-3 py-2",children:f.stools_count}),a.jsx("td",{className:"px-3 py-2",children:f.remarks||""})]},f.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:6,children:"No I/O entries"})})]})]})})]})}function u6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState({vital_signs:"",procedure_undergone:"",todays_diagnostics:"",current_condition:"",recent_changes:"",ongoing_treatment:"",possible_changes:"",other_info:""}),c=async()=>{var u,f;i("");try{const{data:h}=await IB(t);s((h||[]).sort((p,m)=>new Date(m.created_at)-new Date(p.created_at)))}catch(h){i(((f=(u=h==null?void 0:h.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load handovers")}};g.useEffect(()=>{c()},[t]);const d=async u=>{var f,h;u.preventDefault(),i("");try{await LB(t,{...o}),l({vital_signs:"",procedure_undergone:"",todays_diagnostics:"",current_condition:"",recent_changes:"",ongoing_treatment:"",possible_changes:"",other_info:""}),await c()}catch(p){i(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to add handover")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{anyOf:["ipd.nursing"],children:a.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[a.jsx("div",{className:"md:col-span-2 font-medium",children:"Shift Handover"}),a.jsx("input",{className:"input",placeholder:"Vital signs",value:o.vital_signs,onChange:u=>l(f=>({...f,vital_signs:u.target.value}))}),a.jsx("input",{className:"input",placeholder:"Procedure undergone",value:o.procedure_undergone,onChange:u=>l(f=>({...f,procedure_undergone:u.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Today's diagnostics/procedures",value:o.todays_diagnostics,onChange:u=>l(f=>({...f,todays_diagnostics:u.target.value}))}),a.jsx("input",{className:"input",placeholder:"Current condition",value:o.current_condition,onChange:u=>l(f=>({...f,current_condition:u.target.value}))}),a.jsx("input",{className:"input",placeholder:"Recent changes",value:o.recent_changes,onChange:u=>l(f=>({...f,recent_changes:u.target.value}))}),a.jsx("input",{className:"input",placeholder:"Ongoing treatment",value:o.ongoing_treatment,onChange:u=>l(f=>({...f,ongoing_treatment:u.target.value}))}),a.jsx("input",{className:"input",placeholder:"Possible changes/complications",value:o.possible_changes,onChange:u=>l(f=>({...f,possible_changes:u.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Other info",value:o.other_info,onChange:u=>l(f=>({...f,other_info:u.target.value}))}),a.jsx("div",{className:"md:col-span-2 flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})}),r&&a.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:r})]})}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Time"}),a.jsx("th",{className:"px-3 py-2",children:"Vitals"}),a.jsx("th",{className:"px-3 py-2",children:"Procedure"}),a.jsx("th",{className:"px-3 py-2",children:"Diagnostics"}),a.jsx("th",{className:"px-3 py-2",children:"Condition"})]})}),a.jsxs("tbody",{children:[(n||[]).map(u=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:u.vital_signs||""}),a.jsx("td",{className:"px-3 py-2",children:u.procedure_undergone||""}),a.jsx("td",{className:"px-3 py-2",children:u.todays_diagnostics||""}),a.jsx("td",{className:"px-3 py-2",children:u.current_condition||""})]},u.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:5,children:"No handovers"})})]})]})})]})}function f6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState(""),c=async()=>{var u,f;i("");try{const{data:h}=await $B(t);s((h||[]).sort((p,m)=>new Date(m.created_at)-new Date(p.created_at)))}catch(h){i(((f=(u=h==null?void 0:h.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load rounds")}};g.useEffect(()=>{c()},[t]);const d=async u=>{var f,h;u.preventDefault(),i("");try{await FB(t,{notes:o||""}),l(""),await c()}catch(p){i(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to add round")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{anyOf:["ipd.doctor"],children:a.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 text-sm space-y-2",children:[a.jsx("div",{className:"font-medium",children:"Add Round Note"}),a.jsx("textarea",{className:"input",rows:3,placeholder:"Notes",value:o,onChange:u=>l(u.target.value)}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})}),r&&a.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:r})]})}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Time"}),a.jsx("th",{className:"px-3 py-2",children:"Notes"})]})}),a.jsxs("tbody",{children:[(n||[]).map(u=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:u.notes||""})]},u.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:2,children:"No rounds"})})]})]})})]})}function h6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState({observation:"",plan:""}),c=async()=>{var u,f;i("");try{const{data:h}=await zB(t);s((h||[]).sort((p,m)=>new Date(m.created_at)-new Date(p.created_at)))}catch(h){i(((f=(u=h==null?void 0:h.response)==null?void 0:u.data)==null?void 0:f.detail)||"Failed to load progress notes")}};g.useEffect(()=>{c()},[t]);const d=async u=>{var f,h;u.preventDefault(),i("");try{await BB(t,{observation:o.observation||"",plan:o.plan||""}),l({observation:"",plan:""}),await c()}catch(p){i(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to add progress note")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{anyOf:["ipd.doctor"],children:a.jsxs("form",{onSubmit:d,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[a.jsx("div",{className:"md:col-span-2 font-medium",children:"New Progress Note"}),a.jsx("textarea",{className:"input",rows:3,placeholder:"Observation",value:o.observation,onChange:u=>l(f=>({...f,observation:u.target.value}))}),a.jsx("textarea",{className:"input",rows:3,placeholder:"Plan",value:o.plan,onChange:u=>l(f=>({...f,plan:u.target.value}))}),a.jsx("div",{className:"md:col-span-2 flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})}),r&&a.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:r})]})}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Time"}),a.jsx("th",{className:"px-3 py-2",children:"Observation"}),a.jsx("th",{className:"px-3 py-2",children:"Plan"})]})}),a.jsxs("tbody",{children:[(n||[]).map(u=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(u.created_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:u.observation||""}),a.jsx("td",{className:"px-3 py-2",children:u.plan||""})]},u.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:3,children:"No progress notes"})})]})]})})]})}function p6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState(null),[c,d]=g.useState(null),[u,f]=g.useState({type:"internal",to_department:"",external_org:"",reason:""}),h=async()=>{var m,x;i("");try{const{data:y}=await VB(t);s(y||[])}catch(y){i(((x=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:x.detail)||"Failed to load referrals")}};g.useEffect(()=>{h()},[t]);const p=async m=>{var x,y;m.preventDefault();try{const v={type:u.type,to_department:u.to_department||"",to_user_id:o||void 0,external_org:u.external_org||"",reason:u.reason||""};await HB(t,v),f({type:"internal",to_department:"",external_org:"",reason:""}),l(null),d(null),await h()}catch(v){i(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Failed to create referral")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("form",{onSubmit:p,className:"rounded-xl border bg-white p-3 text-sm space-y-3",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Type"}),a.jsxs("select",{className:"input",value:u.type,onChange:m=>f(x=>({...x,type:m.target.value})),children:[a.jsx("option",{value:"internal",children:"Internal"}),a.jsx("option",{value:"external",children:"External"})]})]}),u.type==="internal"?a.jsx("div",{className:"md:col-span-2",children:a.jsx(qy,{label:"Department  Role  User",value:o||void 0,onChange:(m,x)=>{l(m||null),d((x==null?void 0:x.department_id)||null),f(y=>({...y,to_department:x!=null&&x.department_id?String(x.department_id):""}))}})}):a.jsx("input",{className:"input md:col-span-2",placeholder:"External organization",value:u.external_org,onChange:m=>f(x=>({...x,external_org:m.target.value}))})]}),a.jsx("input",{className:"input",placeholder:"Reason",value:u.reason,onChange:m=>f(x=>({...x,reason:m.target.value}))}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{className:"btn",children:"Save"})}),r&&a.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:r})]}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Type"}),a.jsx("th",{className:"px-3 py-2",children:"To"}),a.jsx("th",{className:"px-3 py-2",children:"Status"})]})}),a.jsxs("tbody",{children:[(n||[]).map(m=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:m.type}),a.jsx("td",{className:"px-3 py-2",children:m.type==="internal"?m.to_user_id?`User#${m.to_user_id}`:`Dept ${m.to_department}`:m.external_org||""}),a.jsx("td",{className:"px-3 py-2",children:m.status})]},m.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:3,children:"No referrals"})})]})]})})]})}function m6({admissionId:t}){const[n,s]=g.useState(null),[r,i]=g.useState(null),[o,l]=g.useState(""),[c,d]=g.useState(!1),[u,f]=g.useState({demographics:"",medical_history:"",treatment_summary:"",medications:"",follow_up:"",icd10_codes:"",finalize:!1}),[h,p]=g.useState({financial_clearance:!1,clinical_clearance:!1,delay_reason:"",submit:!1}),m=async()=>{var b,w;l("");try{const[j,N]=await Promise.all([UB(t),qB(t)]),S=(j==null?void 0:j.data)||null;s(S),S&&f({demographics:S.demographics||"",medical_history:S.medical_history||"",treatment_summary:S.treatment_summary||"",medications:S.medications||"",follow_up:S.follow_up||"",icd10_codes:S.icd10_codes||"",finalize:!1});const _=(N==null?void 0:N.data)||null;i(_),_&&p({financial_clearance:!!_.financial_clearance,clinical_clearance:!!_.clinical_clearance,delay_reason:_.delay_reason||"",submit:!1})}catch(j){l(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Failed to load discharge data")}};g.useEffect(()=>{m()},[t]);const x=async b=>{var w,j;b.preventDefault(),d(!0),l("");try{const N={...u};await WB(t,N),await m()}catch(N){l(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to save summary")}finally{d(!1)}},y=async b=>{var w,j;b.preventDefault(),d(!0),l("");try{await KB(t,{...h}),await m()}catch(N){l(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to save checklist")}finally{d(!1)}},v=!!(n!=null&&n.finalized);return a.jsx("div",{className:"space-y-4",children:a.jsxs(pe,{anyOf:["ipd.manage"],children:[a.jsxs("form",{onSubmit:x,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[a.jsx("div",{className:"md:col-span-2 font-medium",children:"Discharge Summary"}),a.jsx("textarea",{className:"input",rows:2,placeholder:"Patient demographics",value:u.demographics,onChange:b=>f(w=>({...w,demographics:b.target.value})),disabled:v}),a.jsx("textarea",{className:"input",rows:2,placeholder:"Medical history",value:u.medical_history,onChange:b=>f(w=>({...w,medical_history:b.target.value})),disabled:v}),a.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Treatment summary",value:u.treatment_summary,onChange:b=>f(w=>({...w,treatment_summary:b.target.value})),disabled:v}),a.jsx("textarea",{className:"input",rows:2,placeholder:"Medications",value:u.medications,onChange:b=>f(w=>({...w,medications:b.target.value})),disabled:v}),a.jsx("textarea",{className:"input",rows:2,placeholder:"Follow-up",value:u.follow_up,onChange:b=>f(w=>({...w,follow_up:b.target.value})),disabled:v}),a.jsx("input",{className:"input md:col-span-2",placeholder:"ICD-10 codes (CSV/JSON)",value:u.icd10_codes,onChange:b=>f(w=>({...w,icd10_codes:b.target.value})),disabled:v}),a.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[a.jsx("div",{className:"text-xs text-gray-500",children:v?`Finalized at ${n!=null&&n.finalized_at?new Date(n.finalized_at).toLocaleString():""}`:"Fill mandatory fields before finalizing"}),a.jsxs("div",{className:"flex items-center gap-3",children:[!v&&a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:u.finalize,onChange:b=>f(w=>({...w,finalize:b.target.checked}))}),a.jsx("span",{children:"Finalize"})]}),a.jsx("button",{className:"btn",disabled:c||v,children:"Save"})]})]}),o&&a.jsx("div",{className:"md:col-span-2 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:o})]}),a.jsxs("form",{onSubmit:y,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[a.jsx("div",{className:"md:col-span-2 font-medium",children:"Discharge Checklist & Clearance"}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:h.financial_clearance,onChange:b=>p(w=>({...w,financial_clearance:b.target.checked}))}),a.jsx("span",{children:"Financial clearance"})]}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:h.clinical_clearance,onChange:b=>p(w=>({...w,clinical_clearance:b.target.checked}))}),a.jsx("span",{children:"Clinical clearance"})]}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Delay reason (if any)",value:h.delay_reason,onChange:b=>p(w=>({...w,delay_reason:b.target.value}))}),a.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:h.submit,onChange:b=>p(w=>({...w,submit:b.target.checked}))}),a.jsx("span",{children:"Submit checklist"})]}),a.jsx("button",{className:"btn",disabled:c,children:"Save"})]}),(r==null?void 0:r.submitted)&&a.jsxs("div",{className:"md:col-span-2 text-xs text-emerald-700",children:["Submitted at ",r!=null&&r.submitted_at?new Date(r.submitted_at).toLocaleString():""]})]})]})})}function g6({admissionId:t}){const[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState({surgery_name:"",scheduled_start:"",scheduled_end:"",status:"planned",surgeon_id:"",anaesthetist_id:"",staff_tags:"",preop_notes:""}),[c,d]=g.useState({ot_case_id:"",pre_assessment:"",anaesthesia_type:"general",intraop_monitoring:"",drugs_administered:"",post_status:""}),u=async()=>{var m,x;i("");try{const{data:y}=await GB(t);s(y||[])}catch(y){i(((x=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:x.detail)||"Failed to load OT cases")}};g.useEffect(()=>{u()},[t]);const f=async m=>{var x,y;m.preventDefault();try{const v={admission_id:t,surgery_name:o.surgery_name,scheduled_start:o.scheduled_start?o.scheduled_start.length===16?`${o.scheduled_start}:00`:o.scheduled_start:void 0,scheduled_end:o.scheduled_end?o.scheduled_end.length===16?`${o.scheduled_end}:00`:o.scheduled_end:void 0,status:o.status||"planned",surgeon_id:o.surgeon_id?Number(o.surgeon_id):void 0,anaesthetist_id:o.anaesthetist_id?Number(o.anaesthetist_id):void 0,staff_tags:o.staff_tags||"",preop_notes:o.preop_notes||""};await YB(t,v),l({surgery_name:"",scheduled_start:"",scheduled_end:"",status:"planned",surgeon_id:"",anaesthetist_id:"",staff_tags:"",preop_notes:""}),await u()}catch(v){i(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Failed to add OT case")}},h=async m=>{try{const{data:x}=await XB(m);d({...x,ot_case_id:m})}catch{d(x=>({...x,ot_case_id:m}))}},p=async m=>{var x,y;m.preventDefault();try{const v={ot_case_id:Number(c.ot_case_id),pre_assessment:c.pre_assessment||"",anaesthesia_type:c.anaesthesia_type||"general",intraop_monitoring:c.intraop_monitoring||"",drugs_administered:c.drugs_administered||"",post_status:c.post_status||""};await JB(v),alert("Anaesthesia record saved")}catch(v){alert(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Save failed")}};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("form",{onSubmit:f,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-4 text-sm",children:[a.jsx("div",{className:"md:col-span-4 font-medium",children:"Schedule Surgery"}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Surgery name",value:o.surgery_name,onChange:m=>l(x=>({...x,surgery_name:m.target.value}))}),a.jsx("input",{type:"datetime-local",className:"input",value:o.scheduled_start,onChange:m=>l(x=>({...x,scheduled_start:m.target.value}))}),a.jsx("input",{type:"datetime-local",className:"input",value:o.scheduled_end,onChange:m=>l(x=>({...x,scheduled_end:m.target.value}))}),a.jsx("select",{className:"input",value:o.status,onChange:m=>l(x=>({...x,status:m.target.value})),children:["planned","unplanned","cancelled","completed"].map(m=>a.jsx("option",{value:m,children:m},m))}),a.jsx("input",{className:"input",placeholder:"Surgeon user id (optional)",value:o.surgeon_id,onChange:m=>l(x=>({...x,surgeon_id:m.target.value}))}),a.jsx("input",{className:"input",placeholder:"Anaesthetist user id (optional)",value:o.anaesthetist_id,onChange:m=>l(x=>({...x,anaesthetist_id:m.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Staff tags (CSV/JSON)",value:o.staff_tags,onChange:m=>l(x=>({...x,staff_tags:m.target.value}))}),a.jsx("input",{className:"input md:col-span-4",placeholder:"Pre-op notes",value:o.preop_notes,onChange:m=>l(x=>({...x,preop_notes:m.target.value}))}),a.jsx("div",{className:"md:col-span-4 flex justify-end",children:a.jsx("button",{className:"btn",children:"Add"})})]}),a.jsx("div",{className:"rounded-xl border overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Case"}),a.jsx("th",{className:"px-3 py-2",children:"Schedule"}),a.jsx("th",{className:"px-3 py-2",children:"Status"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsxs("tbody",{children:[(n||[]).map(m=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:m.surgery_name}),a.jsxs("td",{className:"px-3 py-2",children:[m.scheduled_start?new Date(m.scheduled_start).toLocaleString():"","  ",m.scheduled_end?new Date(m.scheduled_end).toLocaleString():""]}),a.jsx("td",{className:"px-3 py-2",children:m.status}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("button",{className:"btn btn-sm",onClick:()=>h(m.id),children:"Anaesthesia"})})]},m.id)),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-3 text-sm text-gray-500",colSpan:4,children:"No OT cases"})})]})]})}),(c==null?void 0:c.ot_case_id)&&a.jsxs("form",{onSubmit:p,className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-2 text-sm",children:[a.jsx("div",{className:"md:col-span-2 font-medium",children:"Anaesthesia / Procedural Sedation"}),a.jsx("textarea",{className:"input",rows:4,placeholder:"Pre-assessment",value:c.pre_assessment,onChange:m=>d(x=>({...x,pre_assessment:m.target.value}))}),a.jsx("select",{className:"input",value:c.anaesthesia_type,onChange:m=>d(x=>({...x,anaesthesia_type:m.target.value})),children:["local","regional","spinal","general"].map(m=>a.jsx("option",{value:m,children:m},m))}),a.jsx("textarea",{className:"input md:col-span-2",rows:4,placeholder:"Intra-op monitoring (JSON/time-series)",value:c.intraop_monitoring,onChange:m=>d(x=>({...x,intraop_monitoring:m.target.value}))}),a.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Drugs administered (JSON)",value:c.drugs_administered,onChange:m=>d(x=>({...x,drugs_administered:m.target.value}))}),a.jsx("textarea",{className:"input md:col-span-2",rows:3,placeholder:"Post status / recovery notes",value:c.post_status,onChange:m=>d(x=>({...x,post_status:m.target.value}))}),a.jsx("div",{className:"md:col-span-2 flex justify-end gap-2",children:a.jsx("button",{className:"btn",children:"Save Anaesthesia"})})]})]})}function x6({admissionId:t}){const n=Ht("ipd.view")||Ht("ipd.manage"),[s,r]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(null),[d,u]=g.useState(""),[f,h]=g.useState([]),p=g.useMemo(()=>{const x=new Map;for(const y of f||[])x.set(y.id,y.code);return x},[f]);g.useEffect(()=>{let x=!0;return(async()=>{try{const y=await Bs();x&&h((y==null?void 0:y.data)||[])}catch{}try{const{data:y}=await M2(t);if(!x)return;const v=y!=null&&y.admitted_at?new Date(y.admitted_at).toISOString().slice(0,10):"",b=new Date().toISOString().slice(0,10);r(v),o(b)}catch{}})(),()=>{x=!1}},[t]);const m=async()=>{var x,y;u(""),c(null);try{const{data:v}=await QB(t,{...s?{from_date:s}:{},...i?{to_date:i}:{}});c(v)}catch(v){u(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Failed to preview charges")}};return n?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"rounded-xl border bg-white p-3 grid gap-3 md:grid-cols-5 text-sm",children:[a.jsx("div",{className:"md:col-span-5 font-medium",children:"Bed Charge Preview"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"From"}),a.jsx("input",{type:"date",className:"input",value:s,onChange:x=>r(x.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"To"}),a.jsx("input",{type:"date",className:"input",value:i,onChange:x=>o(x.target.value)})]}),a.jsx("div",{className:"md:col-span-3 flex items-end justify-end",children:a.jsx("button",{className:"btn",onClick:m,children:"Preview"})}),d&&a.jsx("div",{className:"md:col-span-5 rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700",children:d})]}),l&&a.jsxs("div",{className:"rounded-xl border overflow-hidden bg-white",children:[a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Date"}),a.jsx("th",{className:"px-3 py-2",children:"Room Type"}),a.jsx("th",{className:"px-3 py-2",children:"Bed"}),a.jsx("th",{className:"px-3 py-2",children:"Rate"})]})}),a.jsxs("tbody",{children:[(l.days||[]).map((x,y)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:new Date(x.date).toLocaleDateString()}),a.jsx("td",{className:"px-3 py-2",children:x.room_type||""}),a.jsx("td",{className:"px-3 py-2",children:x.bed_id&&p.get(x.bed_id)||""}),a.jsx("td",{className:"px-3 py-2",children:Number(x.rate).toFixed(2)})]},y)),a.jsxs("tr",{className:"bg-gray-50 font-medium",children:[a.jsx("td",{className:"px-3 py-2",colSpan:3,children:"Total"}),a.jsx("td",{className:"px-3 py-2",children:Number(l.total_amount||0).toFixed(2)})]})]})]}),!!l.missing_rate_days&&a.jsxs("div",{className:"px-3 py-2 text-xs text-amber-700 bg-amber-50 border-t",children:["Note: ",l.missing_rate_days," day(s) had no bed rate set for the room type."]})]})]}):a.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 p-2 text-sm text-rose-700",children:"Access denied (need ipd.view)."})}const Cp=[{key:"nursing",label:"Nursing Notes",el:l6,writePerm:"ipd.nursing"},{key:"vitals",label:"Vitals",el:c6,writePerm:"ipd.nursing"},{key:"io",label:"Intake/Output",el:d6,writePerm:"ipd.nursing"},{key:"handover",label:"Shift Handover",el:u6,writePerm:"ipd.nursing"},{key:"rounds",label:"Doctor Rounds",el:f6,writePerm:"ipd.doctor"},{key:"progress",label:"Progress Notes",el:h6,writePerm:"ipd.doctor"},{key:"referrals",label:"Referrals",el:p6,writePerm:"ipd.manage"},{key:"ot",label:"OT",el:g6,writePerm:"ipd.manage"},{key:"discharge",label:"Discharge",el:m6,writePerm:"ipd.manage"},{key:"charges",label:"Bed Charges",el:x6,writePerm:"ipd.manage"}];function y6(){var D;const{id:t}=ma(),n=Fn(),s=((D=n==null?void 0:n.state)==null?void 0:D.admission)||null,[r,i]=g.useState(s),[o,l]=g.useState([]),[c,d]=g.useState("nursing"),[u,f]=g.useState(""),[h,p]=g.useState(!1),[m,x]=g.useState(null),y=Ht("ipd.view"),v=Ht("ipd.manage"),b=async()=>{var R,T,P;p(!0),f("");try{const[{data:L},F]=await Promise.all([M2(Number(t)),Bs()]);i(L||s||null),l(F.data||[]);try{const{data:B}=await hh(L.patient_id);x(B)}catch{}}catch(L){((L==null?void 0:L.status)||((R=L==null?void 0:L.response)==null?void 0:R.status))===404&&s?i(s):f(((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Failed to load")}finally{p(!1)}};g.useEffect(()=>{b()},[t]);const w=R=>`ADM-${String(R).padStart(6,"0")}`,[j,N]=g.useState({practitioner_user_id:"",department_id:"",expected_discharge_at:"",package_id:"",payor_type:"",insurer_name:"",policy_number:"",preliminary_diagnosis:"",history:"",care_plan:""});g.useEffect(()=>{r&&N({practitioner_user_id:r.practitioner_user_id||"",department_id:r.department_id||"",expected_discharge_at:r.expected_discharge_at?new Date(r.expected_discharge_at).toISOString().slice(0,16):"",package_id:r.package_id||"",payor_type:r.payor_type||"cash",insurer_name:r.insurer_name||"",policy_number:r.policy_number||"",preliminary_diagnosis:r.preliminary_diagnosis||"",history:r.history||"",care_plan:r.care_plan||""})},[r]);const S=R=>R?R.length===16?`${R}:00`:R:void 0,_=async R=>{var T,P;R.preventDefault();try{const L={practitioner_user_id:j.practitioner_user_id?Number(j.practitioner_user_id):void 0,department_id:j.department_id?Number(j.department_id):void 0,expected_discharge_at:S(j.expected_discharge_at),package_id:j.package_id?Number(j.package_id):void 0,payor_type:j.payor_type||"cash",insurer_name:j.insurer_name||"",policy_number:j.policy_number||"",preliminary_diagnosis:j.preliminary_diagnosis||"",history:j.history||"",care_plan:j.care_plan||""};Object.keys(L).forEach(F=>L[F]===void 0&&delete L[F]),await _B(r.id,L),await b()}catch(L){f(((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Update failed")}},C=async()=>{var R,T;if(window.confirm("Cancel this admission?"))try{await EB(r.id),window.location.assign("/ipd/tracking")}catch(P){f(((T=(R=P==null?void 0:P.response)==null?void 0:R.data)==null?void 0:T.detail)||"Cancel failed")}},k=async R=>{var T,P;try{await TB(r.id,{to_bed_id:Number(R),reason:"Transfer"}),await b()}catch(L){f(((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Transfer failed")}};if(!y&&!v)return a.jsx("div",{className:"p-4 text-sm text-rose-700",children:"Access denied (need ipd.view)."});if(h&&!r)return a.jsx("div",{className:"p-4 text-sm",children:"Loading"});if(!r)return a.jsx("div",{className:"p-4 text-sm",children:"No data"});const E=()=>{var R;return a.jsxs("div",{className:"rounded-xl border bg-white p-3 text-sm grid md:grid-cols-4 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Admission:"})," ",w(r.id)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Patient:"})," ",(m==null?void 0:m.uhid)||`P-${r.patient_id}`]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Bed:"})," ",r.current_bed_id&&((R=o.find(T=>T.id===r.current_bed_id))==null?void 0:R.code)||""]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"})," ",r.status]})]})},M=()=>a.jsxs("div",{className:"rounded-xl border bg-white",children:[a.jsx("div",{className:"border-b px-3 py-2 flex flex-wrap gap-2",children:Cp.map(R=>{const T=Ht(R.writePerm),P=c===R.key;return a.jsxs("button",{onClick:()=>d(R.key),className:["relative px-3 py-1 rounded-lg text-sm transition",P?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"].join(" "),title:T?"":"View-only",children:[R.label,!T&&a.jsx("span",{className:"ml-2 text-[10px] rounded bg-gray-200 px-1.5 py-0.5 text-gray-700 align-middle",children:"view-only"})]},R.key)})}),a.jsx("div",{className:"p-3",children:(()=>{const R=Cp.find(L=>L.key===c)||Cp[0],T=R.el,P=Ht(R.writePerm);return a.jsx(T,{admissionId:r.id,canWrite:P})})()})]});return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-lg font-semibold",children:"Patient Tracking "})}),a.jsx(E,{}),v&&a.jsxs("div",{className:"rounded-xl border bg-white p-3 text-sm grid md:grid-cols-2 gap-4",children:[a.jsxs("form",{onSubmit:_,className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Update Admission"}),a.jsx(qy,{value:j.practitioner_user_id||"",onChange:(R,T)=>{N(P=>({...P,practitioner_user_id:R||"",department_id:(T==null?void 0:T.department_id)||P.department_id}))},label:"Primary Doctor  Department  Role  User"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Expected discharge"}),a.jsx("input",{type:"datetime-local",className:"input",value:j.expected_discharge_at,onChange:R=>N(T=>({...T,expected_discharge_at:R.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Payor type"}),a.jsx("select",{className:"input",value:j.payor_type,onChange:R=>N(T=>({...T,payor_type:R.target.value})),children:["cash","insurance","tpa"].map(R=>a.jsx("option",{value:R,children:R},R))})]}),a.jsx("input",{className:"input",placeholder:"Insurer name",value:j.insurer_name,onChange:R=>N(T=>({...T,insurer_name:R.target.value}))}),a.jsx("input",{className:"input",placeholder:"Policy number",value:j.policy_number,onChange:R=>N(T=>({...T,policy_number:R.target.value}))}),a.jsx("input",{className:"input md:col-span-2",placeholder:"Preliminary diagnosis",value:j.preliminary_diagnosis,onChange:R=>N(T=>({...T,preliminary_diagnosis:R.target.value}))}),a.jsx("input",{className:"input",placeholder:"History",value:j.history,onChange:R=>N(T=>({...T,history:R.target.value}))}),a.jsx("input",{className:"input",placeholder:"Care plan",value:j.care_plan,onChange:R=>N(T=>({...T,care_plan:R.target.value}))})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn",children:"Save"}),a.jsx("button",{type:"button",className:"btn bg-rose-600 hover:bg-rose-700",onClick:C,children:"Cancel Admission"})]}),u&&a.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 p-2 text-rose-700 text-sm",children:u})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Transfer Bed"}),a.jsx(A2,{value:"",onChange:k}),a.jsx("div",{className:"text-xs text-gray-500",children:"Pick a target bed (vacant) to transfer."})]})]}),a.jsx(M,{})]})}function v6(){const[t,n]=g.useState([]),[s,r]=g.useState([]),[i,o]=g.useState({}),[l,c]=g.useState(!1),d=u=>`ADM-${String(u).padStart(6,"0")}`;return g.useEffect(()=>{let u=!0;return(async()=>{c(!0);const[h,p]=await Promise.all([fh({status:"admitted"}),Bs()]);if(!u)return;n(h.data||[]),r(p.data||[]);const m=[...new Set((h.data||[]).map(y=>y.patient_id))].slice(0,50),x={};await Promise.all(m.map(async y=>{try{const{data:v}=await hh(y);x[y]=(v==null?void 0:v.uhid)||`P-${y}`}catch{x[y]=`P-${y}`}})),u&&o(x),c(!1)})(),()=>{u=!1}},[]),l?a.jsx("div",{className:"p-4",children:"Loading"}):a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Tracking Admissions (All)"}),a.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Admission"}),a.jsx("th",{className:"px-3 py-2",children:"Patient"}),a.jsx("th",{className:"px-3 py-2",children:"Bed"}),a.jsx("th",{className:"px-3 py-2",children:"Admitted"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsxs("tbody",{children:[(t||[]).map(u=>{var h;const f=((h=s.find(p=>p.id===u.current_bed_id))==null?void 0:h.code)||"";return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:d(u.id)}),a.jsx("td",{className:"px-3 py-2",children:i[u.patient_id]||`P-${u.patient_id}`}),a.jsx("td",{className:"px-3 py-2",children:f}),a.jsx("td",{className:"px-3 py-2",children:new Date(u.admitted_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(Dn,{to:`/ipd/admission/${u.id}`,state:{admission:u},className:"text-blue-600",children:"Open"})})]},u.id)}),!(t!=null&&t.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No active admissions"})})]})]})})]})}function b6(){const t=lt(f=>f.user),[n,s]=g.useState([]),[r,i]=g.useState([]),[o,l]=g.useState({}),[c,d]=g.useState(!1),u=f=>`ADM-${String(f).padStart(6,"0")}`;return g.useEffect(()=>{if(!(t!=null&&t.id))return;let f=!0;return(async()=>{d(!0);const[p,m]=await Promise.all([fh({status:"admitted",practitioner_user_id:t.id}),Bs()]);if(!f)return;s(p.data||[]),i(m.data||[]);const x=[...new Set((p.data||[]).map(v=>v.patient_id))].slice(0,50),y={};await Promise.all(x.map(async v=>{try{const{data:b}=await hh(v);y[v]=(b==null?void 0:b.uhid)||`P-${v}`}catch{y[v]=`P-${v}`}})),f&&l(y),d(!1)})(),()=>{f=!1}},[t==null?void 0:t.id]),c?a.jsx("div",{className:"p-4",children:"Loading"}):a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"My Admissions"}),a.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Admission"}),a.jsx("th",{className:"px-3 py-2",children:"Patient"}),a.jsx("th",{className:"px-3 py-2",children:"Bed"}),a.jsx("th",{className:"px-3 py-2",children:"Admitted"}),a.jsx("th",{className:"px-3 py-2"})]})}),a.jsxs("tbody",{children:[(n||[]).map(f=>{var p;const h=((p=r.find(m=>m.id===f.current_bed_id))==null?void 0:p.code)||"";return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:u(f.id)}),a.jsx("td",{className:"px-3 py-2",children:o[f.patient_id]||`P-${f.patient_id}`}),a.jsx("td",{className:"px-3 py-2",children:h}),a.jsx("td",{className:"px-3 py-2",children:new Date(f.admitted_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(Dn,{to:`/ipd/admission/${f.id}`,state:{admission:f},className:"text-blue-600",children:"Open"})})]},f.id)}),!(n!=null&&n.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No admissions assigned to you"})})]})]})})]})}function w6(){const[t,n]=g.useState([]),[s,r]=g.useState([]),[i,o]=g.useState({}),[l,c]=g.useState(!1),d=u=>`ADM-${String(u).padStart(6,"0")}`;return g.useEffect(()=>{let u=!0;return(async()=>{c(!0);const[h,p]=await Promise.all([fh({status:"discharged"}),Bs()]);if(!u)return;n(h.data||[]),r(p.data||[]);const m=[...new Set((h.data||[]).map(y=>y.patient_id))].slice(0,50),x={};await Promise.all(m.map(async y=>{try{const{data:v}=await hh(y);x[y]=(v==null?void 0:v.uhid)||`P-${y}`}catch{x[y]=`P-${y}`}})),u&&o(x),c(!1)})(),()=>{u=!1}},[]),l?a.jsx("div",{className:"p-4",children:"Loading"}):a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Discharged Patients"}),a.jsx("div",{className:"rounded-xl border bg-white overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-xs text-gray-500 bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2",children:"Admission"}),a.jsx("th",{className:"px-3 py-2",children:"Patient"}),a.jsx("th",{className:"px-3 py-2",children:"Bed"}),a.jsx("th",{className:"px-3 py-2",children:"Admitted"}),a.jsx("th",{className:"px-3 py-2",children:"Status"})]})}),a.jsxs("tbody",{children:[(t||[]).map(u=>{var h;const f=((h=s.find(p=>p.id===u.current_bed_id))==null?void 0:h.code)||"";return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:d(u.id)}),a.jsx("td",{className:"px-3 py-2",children:i[u.patient_id]||`P-${u.patient_id}`}),a.jsx("td",{className:"px-3 py-2",children:f}),a.jsx("td",{className:"px-3 py-2",children:new Date(u.admitted_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2",children:u.status})]},u.id)}),!(t!=null&&t.length)&&a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-sm text-gray-500",colSpan:5,children:"No discharged records"})})]})]})})]})}function j6(){const[t,n]=g.useState([]),[s,r]=g.useState([]),[i,o]=g.useState([]),[l,c]=g.useState(!1),[d,u]=g.useState(""),[f,h]=g.useState(null),p=async()=>{var w,j;c(!0),u("");try{const[N,S,_]=await Promise.all([Uy(),Wy(),Bs()]);n(N.data||[]),r(S.data||[]),o(_.data||[])}catch(N){u(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to load beds")}finally{c(!1)}};g.useEffect(()=>{p()},[]);const m=g.useMemo(()=>{const w={};return s.forEach(j=>{var N;(w[N=j.ward_id]||(w[N]=[])).push(j)}),w},[s]),x=g.useMemo(()=>{const w={};return i.forEach(j=>{var N;(w[N=j.room_id]||(w[N]=[])).push(j)}),w},[i]),y=({s:w})=>{const j=w==="vacant"?"bg-emerald-50 text-emerald-700 border-emerald-200":w==="occupied"?"bg-rose-50 text-rose-700 border-rose-200":w==="reserved"?"bg-amber-50 text-amber-700 border-amber-200":"bg-gray-50 text-gray-700 border-gray-200";return a.jsx("span",{className:`rounded-full border px-2 py-0.5 text-[11px] ${j}`,children:w})},v=async(w,j,N)=>{h({id:w,code:j,action:N,dt:"",note:""})},b=async()=>{var w,j;try{const N={state:f.action};f.action==="reserved"&&(N.reserved_until=f.dt?f.dt.length===16?`${f.dt}:00`:f.dt:null),f.note&&(N.note=f.note),await bB(f.id,N),h(null),await p()}catch(N){alert(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Failed to set state")}};return a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Bedboard"}),l?a.jsx("div",{children:"Loading"}):d?a.jsx("div",{className:"text-rose-700",children:d}):null,a.jsx("div",{className:"space-y-4",children:t.map(w=>a.jsxs("div",{className:"rounded-xl border bg-white overflow-hidden",children:[a.jsxs("div",{className:"px-3 py-2 text-sm font-semibold",children:[w.code,"  ",w.name]}),(m[w.id]||[]).map(j=>a.jsxs("div",{className:"border-t px-3 py-2",children:[a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["Room ",j.number,"  ",j.type]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(x[j.id]||[]).map(N=>a.jsxs("div",{className:"rounded-lg border px-3 py-2 text-sm",children:[a.jsx("div",{className:"font-medium",children:N.code}),a.jsx("div",{className:"mt-1",children:a.jsx(y,{s:N.state})}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"reserved"),children:"Reserve"}),a.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"preoccupied"),children:"Preoccupy"}),a.jsx("button",{className:"btn btn-sm",onClick:()=>v(N.id,N.code,"vacant"),children:"Vacate"})]})]},N.id))})]},j.id)),!(m[w.id]||[]).length&&a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No rooms"})]},w.id))}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50",children:a.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-4 space-y-3",children:[a.jsxs("div",{className:"text-sm font-semibold",children:["Set ",f.action,"  ",f.code]}),f.action==="reserved"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500",children:"Reserved until"}),a.jsx("input",{type:"datetime-local",className:"input",value:f.dt,onChange:w=>h(j=>({...j,dt:w.target.value}))})]}),a.jsx("input",{className:"input",placeholder:"Note (optional)",value:f.note,onChange:w=>h(j=>({...j,note:w.target.value}))}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{className:"btn",onClick:b,children:"Save"}),a.jsx("button",{className:"btn bg-gray-100 text-gray-700 hover:bg-gray-200",onClick:()=>h(null),children:"Close"})]})]})})]})}const Ky=g.createContext({});function Gy(t){const n=g.useRef(null);return n.current===null&&(n.current=t()),n.current}const Yy=typeof window<"u",P2=Yy?g.useLayoutEffect:g.useEffect,ph=g.createContext(null);function Xy(t,n){t.indexOf(n)===-1&&t.push(n)}function Jy(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}const fr=(t,n,s)=>s>n?n:s<t?t:s;let Qy=()=>{};const hr={},R2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function O2(t){return typeof t=="object"&&t!==null}const D2=t=>/^0[^.\s]+$/u.test(t);function Zy(t){let n;return()=>(n===void 0&&(n=t()),n)}const Jn=t=>t,N6=(t,n)=>s=>n(t(s)),Kc=(...t)=>t.reduce(N6),xc=(t,n,s)=>{const r=n-t;return r===0?1:(s-t)/r};class ev{constructor(){this.subscriptions=[]}add(n){return Xy(this.subscriptions,n),()=>Jy(this.subscriptions,n)}notify(n,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](n,s,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(n,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ls=t=>t*1e3,Yn=t=>t/1e3;function I2(t,n){return n?t*(1e3/n):0}const L2=(t,n,s)=>(((1-3*s+3*n)*t+(3*s-6*n))*t+3*n)*t,S6=1e-7,k6=12;function C6(t,n,s,r,i){let o,l,c=0;do l=n+(s-n)/2,o=L2(l,r,i)-t,o>0?s=l:n=l;while(Math.abs(o)>S6&&++c<k6);return l}function Gc(t,n,s,r){if(t===n&&s===r)return Jn;const i=o=>C6(o,0,1,t,s);return o=>o===0||o===1?o:L2(i(o),n,r)}const $2=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,F2=t=>n=>1-t(1-n),z2=Gc(.33,1.53,.69,.99),tv=F2(z2),B2=$2(tv),V2=t=>(t*=2)<1?.5*tv(t):.5*(2-Math.pow(2,-10*(t-1))),nv=t=>1-Math.sin(Math.acos(t)),H2=F2(nv),U2=$2(nv),_6=Gc(.42,0,1,1),E6=Gc(0,0,.58,1),W2=Gc(.42,0,.58,1),T6=t=>Array.isArray(t)&&typeof t[0]!="number",q2=t=>Array.isArray(t)&&typeof t[0]=="number",M6={linear:Jn,easeIn:_6,easeInOut:W2,easeOut:E6,circIn:nv,circInOut:U2,circOut:H2,backIn:tv,backInOut:B2,backOut:z2,anticipate:V2},A6=t=>typeof t=="string",Qw=t=>{if(q2(t)){Qy(t.length===4);const[n,s,r,i]=t;return Gc(n,s,r,i)}else if(A6(t))return M6[t];return t},Ed=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function P6(t,n){let s=new Set,r=new Set,i=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(f){l.has(f)&&(u.schedule(f),t()),f(c)}const u={schedule:(f,h=!1,p=!1)=>{const x=p&&i?s:r;return h&&l.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),l.delete(f)},process:f=>{if(c=f,i){o=!0;return}i=!0,[s,r]=[r,s],s.forEach(d),s.clear(),i=!1,o&&(o=!1,u.process(f))}};return u}const R6=40;function K2(t,n){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,l=Ed.reduce((j,N)=>(j[N]=P6(o),j),{}),{setup:c,read:d,resolveKeyframes:u,preUpdate:f,update:h,preRender:p,render:m,postRender:x}=l,y=()=>{const j=hr.useManualTiming?i.timestamp:performance.now();s=!1,hr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,R6),1)),i.timestamp=j,i.isProcessing=!0,c.process(i),d.process(i),u.process(i),f.process(i),h.process(i),p.process(i),m.process(i),x.process(i),i.isProcessing=!1,s&&n&&(r=!1,t(y))},v=()=>{s=!0,r=!0,i.isProcessing||t(y)};return{schedule:Ed.reduce((j,N)=>{const S=l[N];return j[N]=(_,C=!1,k=!1)=>(s||v(),S.schedule(_,C,k)),j},{}),cancel:j=>{for(let N=0;N<Ed.length;N++)l[Ed[N]].cancel(j)},state:i,steps:l}}const{schedule:He,cancel:ai,state:At,steps:_p}=K2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0);let pu;function O6(){pu=void 0}const pn={now:()=>(pu===void 0&&pn.set(At.isProcessing||hr.useManualTiming?At.timestamp:performance.now()),pu),set:t=>{pu=t,queueMicrotask(O6)}},G2=t=>n=>typeof n=="string"&&n.startsWith(t),sv=G2("--"),D6=G2("var(--"),rv=t=>D6(t)?I6.test(t.split("/*")[0].trim()):!1,I6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Uo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yc={...Uo,transform:t=>fr(0,1,t)},Td={...Uo,default:1},Bl=t=>Math.round(t*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function L6(t){return t==null}const $6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,av=(t,n)=>s=>!!(typeof s=="string"&&$6.test(s)&&s.startsWith(t)||n&&!L6(s)&&Object.prototype.hasOwnProperty.call(s,n)),Y2=(t,n,s)=>r=>{if(typeof r!="string")return r;const[i,o,l,c]=r.match(iv);return{[t]:parseFloat(i),[n]:parseFloat(o),[s]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},F6=t=>fr(0,255,t),Ep={...Uo,transform:t=>Math.round(F6(t))},Li={test:av("rgb","red"),parse:Y2("red","green","blue"),transform:({red:t,green:n,blue:s,alpha:r=1})=>"rgba("+Ep.transform(t)+", "+Ep.transform(n)+", "+Ep.transform(s)+", "+Bl(yc.transform(r))+")"};function z6(t){let n="",s="",r="",i="";return t.length>5?(n=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(n=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),n+=n,s+=s,r+=r,i+=i),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Eg={test:av("#"),parse:z6,transform:Li.transform},Yc=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),_r=Yc("deg"),$s=Yc("%"),me=Yc("px"),B6=Yc("vh"),V6=Yc("vw"),Zw={...$s,parse:t=>$s.parse(t)/100,transform:t=>$s.transform(t*100)},Ga={test:av("hsl","hue"),parse:Y2("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+$s.transform(Bl(n))+", "+$s.transform(Bl(s))+", "+Bl(yc.transform(r))+")"},dt={test:t=>Li.test(t)||Eg.test(t)||Ga.test(t),parse:t=>Li.test(t)?Li.parse(t):Ga.test(t)?Ga.parse(t):Eg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Li.transform(t):Ga.transform(t),getAnimatableNone:t=>{const n=dt.parse(t);return n.alpha=0,dt.transform(n)}},H6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function U6(t){var n,s;return isNaN(t)&&typeof t=="string"&&(((n=t.match(iv))==null?void 0:n.length)||0)+(((s=t.match(H6))==null?void 0:s.length)||0)>0}const X2="number",J2="color",W6="var",q6="var(",ej="${}",K6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vc(t){const n=t.toString(),s=[],r={color:[],number:[],var:[]},i=[];let o=0;const c=n.replace(K6,d=>(dt.test(d)?(r.color.push(o),i.push(J2),s.push(dt.parse(d))):d.startsWith(q6)?(r.var.push(o),i.push(W6),s.push(d)):(r.number.push(o),i.push(X2),s.push(parseFloat(d))),++o,ej)).split(ej);return{values:s,split:c,indexes:r,types:i}}function Q2(t){return vc(t).values}function Z2(t){const{split:n,types:s}=vc(t),r=n.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=n[l],i[l]!==void 0){const c=s[l];c===X2?o+=Bl(i[l]):c===J2?o+=dt.transform(i[l]):o+=i[l]}return o}}const G6=t=>typeof t=="number"?0:dt.test(t)?dt.getAnimatableNone(t):t;function Y6(t){const n=Q2(t);return Z2(t)(n.map(G6))}const oi={test:U6,parse:Q2,createTransformer:Z2,getAnimatableNone:Y6};function Tp(t,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(n-t)*6*s:s<1/2?n:s<2/3?t+(n-t)*(2/3-s)*6:t}function X6({hue:t,saturation:n,lightness:s,alpha:r}){t/=360,n/=100,s/=100;let i=0,o=0,l=0;if(!n)i=o=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,d=2*s-c;i=Tp(d,c,t+1/3),o=Tp(d,c,t),l=Tp(d,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function af(t,n){return s=>s>0?n:t}const qe=(t,n,s)=>t+(n-t)*s,Mp=(t,n,s)=>{const r=t*t,i=s*(n*n-r)+r;return i<0?0:Math.sqrt(i)},J6=[Eg,Li,Ga],Q6=t=>J6.find(n=>n.test(t));function tj(t){const n=Q6(t);if(!n)return!1;let s=n.parse(t);return n===Ga&&(s=X6(s)),s}const nj=(t,n)=>{const s=tj(t),r=tj(n);if(!s||!r)return af(t,n);const i={...s};return o=>(i.red=Mp(s.red,r.red,o),i.green=Mp(s.green,r.green,o),i.blue=Mp(s.blue,r.blue,o),i.alpha=qe(s.alpha,r.alpha,o),Li.transform(i))},Tg=new Set(["none","hidden"]);function Z6(t,n){return Tg.has(t)?s=>s<=0?t:n:s=>s>=1?n:t}function eV(t,n){return s=>qe(t,n,s)}function ov(t){return typeof t=="number"?eV:typeof t=="string"?rv(t)?af:dt.test(t)?nj:sV:Array.isArray(t)?e_:typeof t=="object"?dt.test(t)?nj:tV:af}function e_(t,n){const s=[...t],r=s.length,i=t.map((o,l)=>ov(o)(o,n[l]));return o=>{for(let l=0;l<r;l++)s[l]=i[l](o);return s}}function tV(t,n){const s={...t,...n},r={};for(const i in s)t[i]!==void 0&&n[i]!==void 0&&(r[i]=ov(t[i])(t[i],n[i]));return i=>{for(const o in r)s[o]=r[o](i);return s}}function nV(t,n){const s=[],r={color:0,var:0,number:0};for(let i=0;i<n.values.length;i++){const o=n.types[i],l=t.indexes[o][r[o]],c=t.values[l]??0;s[i]=c,r[o]++}return s}const sV=(t,n)=>{const s=oi.createTransformer(n),r=vc(t),i=vc(n);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Tg.has(t)&&!i.values.length||Tg.has(n)&&!r.values.length?Z6(t,n):Kc(e_(nV(r,i),i.values),s):af(t,n)};function t_(t,n,s){return typeof t=="number"&&typeof n=="number"&&typeof s=="number"?qe(t,n,s):ov(t)(t,n)}const rV=t=>{const n=({timestamp:s})=>t(s);return{start:(s=!0)=>He.update(n,s),stop:()=>ai(n),now:()=>At.isProcessing?At.timestamp:pn.now()}},n_=(t,n,s=10)=>{let r="";const i=Math.max(Math.round(n/s),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},of=2e4;function lv(t){let n=0;const s=50;let r=t.next(n);for(;!r.done&&n<of;)n+=s,r=t.next(n);return n>=of?1/0:n}function iV(t,n=100,s){const r=s({...t,keyframes:[0,n]}),i=Math.min(lv(r),of);return{type:"keyframes",ease:o=>r.next(i*o).value/n,duration:Yn(i)}}const aV=5;function s_(t,n,s){const r=Math.max(n-aV,0);return I2(s-t(r),n-r)}const Xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ap=.001;function oV({duration:t=Xe.duration,bounce:n=Xe.bounce,velocity:s=Xe.velocity,mass:r=Xe.mass}){let i,o,l=1-n;l=fr(Xe.minDamping,Xe.maxDamping,l),t=fr(Xe.minDuration,Xe.maxDuration,Yn(t)),l<1?(i=u=>{const f=u*l,h=f*t,p=f-s,m=Mg(u,l),x=Math.exp(-h);return Ap-p/m*x},o=u=>{const h=u*l*t,p=h*s+s,m=Math.pow(l,2)*Math.pow(u,2)*t,x=Math.exp(-h),y=Mg(Math.pow(u,2),l);return(-i(u)+Ap>0?-1:1)*((p-m)*x)/y}):(i=u=>{const f=Math.exp(-u*t),h=(u-s)*t+1;return-Ap+f*h},o=u=>{const f=Math.exp(-u*t),h=(s-u)*(t*t);return f*h});const c=5/t,d=cV(i,o,c);if(t=Ls(t),isNaN(d))return{stiffness:Xe.stiffness,damping:Xe.damping,duration:t};{const u=Math.pow(d,2)*r;return{stiffness:u,damping:l*2*Math.sqrt(r*u),duration:t}}}const lV=12;function cV(t,n,s){let r=s;for(let i=1;i<lV;i++)r=r-t(r)/n(r);return r}function Mg(t,n){return t*Math.sqrt(1-n*n)}const dV=["duration","bounce"],uV=["stiffness","damping","mass"];function sj(t,n){return n.some(s=>t[s]!==void 0)}function fV(t){let n={velocity:Xe.velocity,stiffness:Xe.stiffness,damping:Xe.damping,mass:Xe.mass,isResolvedFromDuration:!1,...t};if(!sj(t,uV)&&sj(t,dV))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,o=2*fr(.05,1,1-(t.bounce||0))*Math.sqrt(i);n={...n,mass:Xe.mass,stiffness:i,damping:o}}else{const s=oV(t);n={...n,...s,mass:Xe.mass},n.isResolvedFromDuration=!0}return n}function lf(t=Xe.visualDuration,n=Xe.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:r,restDelta:i}=s;const o=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:u,mass:f,duration:h,velocity:p,isResolvedFromDuration:m}=fV({...s,velocity:-Yn(s.velocity||0)}),x=p||0,y=u/(2*Math.sqrt(d*f)),v=l-o,b=Yn(Math.sqrt(d/f)),w=Math.abs(v)<5;r||(r=w?Xe.restSpeed.granular:Xe.restSpeed.default),i||(i=w?Xe.restDelta.granular:Xe.restDelta.default);let j;if(y<1){const S=Mg(b,y);j=_=>{const C=Math.exp(-y*b*_);return l-C*((x+y*b*v)/S*Math.sin(S*_)+v*Math.cos(S*_))}}else if(y===1)j=S=>l-Math.exp(-b*S)*(v+(x+b*v)*S);else{const S=b*Math.sqrt(y*y-1);j=_=>{const C=Math.exp(-y*b*_),k=Math.min(S*_,300);return l-C*((x+y*b*v)*Math.sinh(k)+S*v*Math.cosh(k))/S}}const N={calculatedDuration:m&&h||null,next:S=>{const _=j(S);if(m)c.done=S>=h;else{let C=S===0?x:0;y<1&&(C=S===0?Ls(x):s_(j,S,_));const k=Math.abs(C)<=r,E=Math.abs(l-_)<=i;c.done=k&&E}return c.value=c.done?l:_,c},toString:()=>{const S=Math.min(lv(N),of),_=n_(C=>N.next(S*C).value,S,30);return S+"ms "+_},toTransition:()=>{}};return N}lf.applyToOptions=t=>{const n=iV(t,100,lf);return t.ease=n.ease,t.duration=Ls(n.duration),t.type="keyframes",t};function Ag({keyframes:t,velocity:n=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:u=.5,restSpeed:f}){const h=t[0],p={done:!1,value:h},m=k=>c!==void 0&&k<c||d!==void 0&&k>d,x=k=>c===void 0?d:d===void 0||Math.abs(c-k)<Math.abs(d-k)?c:d;let y=s*n;const v=h+y,b=l===void 0?v:l(v);b!==v&&(y=b-h);const w=k=>-y*Math.exp(-k/r),j=k=>b+w(k),N=k=>{const E=w(k),M=j(k);p.done=Math.abs(E)<=u,p.value=p.done?b:M};let S,_;const C=k=>{m(p.value)&&(S=k,_=lf({keyframes:[p.value,x(p.value)],velocity:s_(j,k,p.value),damping:i,stiffness:o,restDelta:u,restSpeed:f}))};return C(0),{calculatedDuration:null,next:k=>{let E=!1;return!_&&S===void 0&&(E=!0,N(k),C(k)),S!==void 0&&k>=S?_.next(k-S):(!E&&N(k),p)}}}function hV(t,n,s){const r=[],i=s||hr.mix||t_,o=t.length-1;for(let l=0;l<o;l++){let c=i(t[l],t[l+1]);if(n){const d=Array.isArray(n)?n[l]||Jn:n;c=Kc(d,c)}r.push(c)}return r}function pV(t,n,{clamp:s=!0,ease:r,mixer:i}={}){const o=t.length;if(Qy(o===n.length),o===1)return()=>n[0];if(o===2&&n[0]===n[1])return()=>n[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),n=[...n].reverse());const c=hV(n,r,i),d=c.length,u=f=>{if(l&&f<t[0])return n[0];let h=0;if(d>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const p=xc(t[h],t[h+1],f);return c[h](p)};return s?f=>u(fr(t[0],t[o-1],f)):u}function mV(t,n){const s=t[t.length-1];for(let r=1;r<=n;r++){const i=xc(0,n,r);t.push(qe(s,1,i))}}function gV(t){const n=[0];return mV(n,t.length-1),n}function xV(t,n){return t.map(s=>s*n)}function yV(t,n){return t.map(()=>n||W2).splice(0,t.length-1)}function Vl({duration:t=300,keyframes:n,times:s,ease:r="easeInOut"}){const i=T6(r)?r.map(Qw):Qw(r),o={done:!1,value:n[0]},l=xV(s&&s.length===n.length?s:gV(n),t),c=pV(l,n,{ease:Array.isArray(i)?i:yV(n,i)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const vV=t=>t!==null;function cv(t,{repeat:n,repeatType:s="loop"},r,i=1){const o=t.filter(vV),c=i<0||n&&s!=="loop"&&n%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const bV={decay:Ag,inertia:Ag,tween:Vl,keyframes:Vl,spring:lf};function r_(t){typeof t.type=="string"&&(t.type=bV[t.type])}class dv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const wV=t=>t/100;class uv extends dv{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:s}=this.options;s&&s.updatedAt!==pn.now()&&this.tick(pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;r_(n);const{type:s=Vl,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=n;let{keyframes:c}=n;const d=s||Vl;d!==Vl&&typeof c[0]!="number"&&(this.mixKeyframes=Kc(wV,t_(c[0],c[1])),c=[0,100]);const u=d({...n,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...n,keyframes:[...c].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=lv(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:p,repeatDelay:m,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-i/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,N=r;if(h){const k=Math.min(this.currentTime,i)/c;let E=Math.floor(k),M=k%1;!M&&k>=1&&(M=1),M===1&&E--,E=Math.min(E,h+1),!!(E%2)&&(p==="reverse"?(M=1-M,m&&(M-=m/c)):p==="mirror"&&(N=l)),j=fr(0,1,M)*c}const S=w?{done:!1,value:f[0]}:N.next(j);o&&(S.value=o(S.value));let{done:_}=S;!w&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return C&&x!==Ag&&(S.value=cv(f,this.options,v,this.speed)),y&&y(S.value),C&&this.finish(),S}then(n,s){return this.finished.then(n,s)}get duration(){return Yn(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Yn(n)}get time(){return Yn(this.currentTime)}set time(n){var s;n=Ls(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(pn.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=Yn(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:n=rV,startTime:s}=this.options;this.driver||(this.driver=n(l=>this.tick(l))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var n,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(n=this.options).onComplete)==null||s.call(n)}cancel(){var n,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(n=this.options).onCancel)==null||s.call(n)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),n.observe(this)}}function jV(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const $i=t=>t*180/Math.PI,Pg=t=>{const n=$i(Math.atan2(t[1],t[0]));return Rg(n)},NV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Pg,rotateZ:Pg,skewX:t=>$i(Math.atan(t[1])),skewY:t=>$i(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Rg=t=>(t=t%360,t<0&&(t+=360),t),rj=Pg,ij=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aj=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),SV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ij,scaleY:aj,scale:t=>(ij(t)+aj(t))/2,rotateX:t=>Rg($i(Math.atan2(t[6],t[5]))),rotateY:t=>Rg($i(Math.atan2(-t[2],t[0]))),rotateZ:rj,rotate:rj,skewX:t=>$i(Math.atan(t[4])),skewY:t=>$i(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Og(t){return t.includes("scale")?1:0}function Dg(t,n){if(!t||t==="none")return Og(n);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(s)r=SV,i=s;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=NV,i=c}if(!i)return Og(n);const o=r[n],l=i[1].split(",").map(CV);return typeof o=="function"?o(l):l[o]}const kV=(t,n)=>{const{transform:s="none"}=getComputedStyle(t);return Dg(s,n)};function CV(t){return parseFloat(t.trim())}const Wo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qo=new Set(Wo),oj=t=>t===Uo||t===me,_V=new Set(["x","y","z"]),EV=Wo.filter(t=>!_V.has(t));function TV(t){const n=[];return EV.forEach(s=>{const r=t.getValue(s);r!==void 0&&(n.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),n}const Ui={width:({x:t},{paddingLeft:n="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),height:({y:t},{paddingTop:n="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>Dg(n,"x"),y:(t,{transform:n})=>Dg(n,"y")};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const Wi=new Set;let Ig=!1,Lg=!1,$g=!1;function i_(){if(Lg){const t=Array.from(Wi).filter(r=>r.needsMeasurement),n=new Set(t.map(r=>r.element)),s=new Map;n.forEach(r=>{const i=TV(r);i.length&&(s.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),n.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Lg=!1,Ig=!1,Wi.forEach(t=>t.complete($g)),Wi.clear()}function a_(){Wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Lg=!0)})}function MV(){$g=!0,a_(),i_(),$g=!1}class fv{constructor(n,s,r,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Wi.add(this),Ig||(Ig=!0,He.read(a_),He.resolveKeyframes(i_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:r,motionValue:i}=this;if(n[0]===null){const o=i==null?void 0:i.get(),l=n[n.length-1];if(o!==void 0)n[0]=o;else if(r&&s){const c=r.readValue(s,l);c!=null&&(n[0]=c)}n[0]===void 0&&(n[0]=l),i&&o===void 0&&i.set(n[0])}jV(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),Wi.delete(this)}cancel(){this.state==="scheduled"&&(Wi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const AV=t=>t.startsWith("--");function PV(t,n,s){AV(n)?t.style.setProperty(n,s):t.style[n]=s}const RV=Zy(()=>window.ScrollTimeline!==void 0),OV={};function DV(t,n){const s=Zy(t);return()=>OV[n]??s()}const o_=DV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sl=([t,n,s,r])=>`cubic-bezier(${t}, ${n}, ${s}, ${r})`,lj={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sl([0,.65,.55,1]),circOut:Sl([.55,0,1,.45]),backIn:Sl([.31,.01,.66,-.59]),backOut:Sl([.33,1.53,.69,.99])};function l_(t,n){if(t)return typeof t=="function"?o_()?n_(t,n):"ease-out":q2(t)?Sl(t):Array.isArray(t)?t.map(s=>l_(s,n)||lj.easeOut):lj[t]}function IV(t,n,s,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:d}={},u=void 0){const f={[n]:s};d&&(f.offset=d);const h=l_(c,i);Array.isArray(h)&&(f.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(f,p)}function c_(t){return typeof t=="function"&&"applyToOptions"in t}function LV({type:t,...n}){return c_(t)&&o_()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class $V extends dv{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:r,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=n;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=n,Qy(typeof n.type!="string");const u=LV(n);this.animation=IV(s,r,i,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=cv(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):PV(s,r,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,s;(s=(n=this.animation).finish)==null||s.call(n)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,s;this.isPseudoElement||(s=(n=this.animation).commitStyles)==null||s.call(n)}get duration(){var s,r;const n=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Yn(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Yn(n)}get time(){return Yn(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Ls(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&RV()?(this.animation.timeline=n,Jn):s(this)}}const d_={anticipate:V2,backInOut:B2,circInOut:U2};function FV(t){return t in d_}function zV(t){typeof t.ease=="string"&&FV(t.ease)&&(t.ease=d_[t.ease])}const cj=10;class BV extends $V{constructor(n){zV(n),r_(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:r,onComplete:i,element:o,...l}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const c=new uv({...l,autoplay:!1}),d=Ls(this.finishedTime??this.time);s.setWithVelocity(c.sample(d-cj).value,c.sample(d).value,cj),c.stop()}}const dj=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oi.test(t)||t==="0")&&!t.startsWith("url("));function VV(t){const n=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}function HV(t,n,s,r){const i=t[0];if(i===null)return!1;if(n==="display"||n==="visibility")return!0;const o=t[t.length-1],l=dj(i,n),c=dj(o,n);return!l||!c?!1:VV(t)||(s==="spring"||c_(s))&&r}function Fg(t){t.duration=0,t.type="keyframes"}const UV=new Set(["opacity","clipPath","filter","transform"]),WV=Zy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qV(t){var f;const{motionValue:n,name:s,repeatDelay:r,repeatType:i,damping:o,type:l}=t;if(!(((f=n==null?void 0:n.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:u}=n.owner.getProps();return WV()&&s&&UV.has(s)&&(s!=="transform"||!u)&&!d&&!r&&i!=="mirror"&&o!==0&&l!=="inertia"}const KV=40;class GV extends dv{constructor({autoplay:n=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:u,element:f,...h}){var x;super(),this.stop=()=>{var y,v;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=pn.now();const p={autoplay:n,delay:s,type:r,repeat:i,repeatDelay:o,repeatType:l,name:d,motionValue:u,element:f,...h},m=(f==null?void 0:f.KeyframeResolver)||fv;this.keyframeResolver=new m(c,(y,v,b)=>this.onKeyframesResolved(y,v,p,!b),d,u,f),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(n,s,r,i){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:d,isHandoff:u,onUpdate:f}=r;this.resolvedAt=pn.now(),HV(n,o,l,c)||((hr.instantAnimations||!d)&&(f==null||f(cv(n,r,s))),n[0]=n[n.length-1],Fg(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>KV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:n},m=!u&&qV(p)?new BV({...p,element:p.motionValue.owner.current}):new uv(p);m.finished.then(()=>this.notifyFinished()).catch(Jn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){var n;return this._animation||((n=this.keyframeResolver)==null||n.resume(),MV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var n;this._animation&&this.animation.cancel(),(n=this.keyframeResolver)==null||n.cancel()}}const YV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XV(t){const n=YV.exec(t);if(!n)return[,];const[,s,r,i]=n;return[`--${s??r}`,i]}function u_(t,n,s=1){const[r,i]=XV(t);if(!r)return;const o=window.getComputedStyle(n).getPropertyValue(r);if(o){const l=o.trim();return R2(l)?parseFloat(l):l}return rv(i)?u_(i,n,s+1):i}function hv(t,n){return(t==null?void 0:t[n])??(t==null?void 0:t.default)??t}const f_=new Set(["width","height","top","left","right","bottom",...Wo]),JV={test:t=>t==="auto",parse:t=>t},h_=t=>n=>n.test(t),p_=[Uo,me,$s,_r,V6,B6,JV],uj=t=>p_.find(h_(t));function QV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||D2(t):!0}const ZV=new Set(["brightness","contrast","saturate","opacity"]);function e8(t){const[n,s]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[r]=s.match(iv)||[];if(!r)return t;const i=s.replace(r,"");let o=ZV.has(n)?1:0;return r!==s&&(o*=100),n+"("+o+i+")"}const t8=/\b([a-z-]*)\(.*?\)/gu,zg={...oi,getAnimatableNone:t=>{const n=t.match(t8);return n?n.map(e8).join(" "):t}},fj={...Uo,transform:Math.round},n8={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Td,scaleX:Td,scaleY:Td,scaleZ:Td,skew:_r,skewX:_r,skewY:_r,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:yc,originX:Zw,originY:Zw,originZ:me},pv={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,backgroundPositionX:me,backgroundPositionY:me,...n8,zIndex:fj,fillOpacity:yc,strokeOpacity:yc,numOctaves:fj},s8={...pv,color:dt,backgroundColor:dt,outlineColor:dt,fill:dt,stroke:dt,borderColor:dt,borderTopColor:dt,borderRightColor:dt,borderBottomColor:dt,borderLeftColor:dt,filter:zg,WebkitFilter:zg},m_=t=>s8[t];function g_(t,n){let s=m_(t);return s!==zg&&(s=oi),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const r8=new Set(["auto","none","0"]);function i8(t,n,s){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!r8.has(o)&&vc(o).values.length&&(i=t[r]),r++}if(i&&s)for(const o of n)t[o]=g_(s,i)}class a8 extends fv{constructor(n,s,r,i,o){super(n,s,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<n.length;d++){let u=n[d];if(typeof u=="string"&&(u=u.trim(),rv(u))){const f=u_(u,s.current);f!==void 0&&(n[d]=f),d===n.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!f_.has(r)||n.length!==2)return;const[i,o]=n,l=uj(i),c=uj(o);if(l!==c)if(oj(l)&&oj(c))for(let d=0;d<n.length;d++){const u=n[d];typeof u=="string"&&(n[d]=parseFloat(u))}else Ui[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,r=[];for(let i=0;i<n.length;i++)(n[i]===null||QV(n[i]))&&r.push(i);r.length&&i8(n,r,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:r}=this;if(!n||!n.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ui[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&n.getValue(r,i).jump(i,!1)}measureEndState(){var c;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(s);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Ui[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,u])=>{n.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function o8(t,n,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(s==null?void 0:s[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const x_=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function y_(t){return O2(t)&&"offsetHeight"in t}const hj=30,l8=t=>!isNaN(parseFloat(t));class c8{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=pn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=pn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=l8(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new ev);const r=this.events[n].add(s);return n==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-r}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var n;(n=this.events.change)==null||n.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>hj)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,hj);return I2(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n,s;(n=this.dependents)==null||n.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function So(t,n){return new c8(t,n)}const{schedule:mv}=K2(queueMicrotask,!1),rs={x:!1,y:!1};function v_(){return rs.x||rs.y}function d8(t){return t==="x"||t==="y"?rs[t]?null:(rs[t]=!0,()=>{rs[t]=!1}):rs.x||rs.y?null:(rs.x=rs.y=!0,()=>{rs.x=rs.y=!1})}function b_(t,n){const s=o8(t),r=new AbortController,i={passive:!0,...n,signal:r.signal};return[s,i,()=>r.abort()]}function pj(t){return!(t.pointerType==="touch"||v_())}function u8(t,n,s={}){const[r,i,o]=b_(t,s),l=c=>{if(!pj(c))return;const{target:d}=c,u=n(d,c);if(typeof u!="function"||!d)return;const f=h=>{pj(h)&&(u(h),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),o}const w_=(t,n)=>n?t===n?!0:w_(t,n.parentElement):!1,gv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,f8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function h8(t){return f8.has(t.tagName)||t.tabIndex!==-1}const mu=new WeakSet;function mj(t){return n=>{n.key==="Enter"&&t(n)}}function Pp(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const p8=(t,n)=>{const s=t.currentTarget;if(!s)return;const r=mj(()=>{if(mu.has(s))return;Pp(s,"down");const i=mj(()=>{Pp(s,"up")}),o=()=>Pp(s,"cancel");s.addEventListener("keyup",i,n),s.addEventListener("blur",o,n)});s.addEventListener("keydown",r,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),n)};function gj(t){return gv(t)&&!v_()}function m8(t,n,s={}){const[r,i,o]=b_(t,s),l=c=>{const d=c.currentTarget;if(!gj(c))return;mu.add(d);const u=n(d,c),f=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),mu.has(d)&&mu.delete(d),gj(m)&&typeof u=="function"&&u(m,{success:x})},h=m=>{f(m,d===window||d===document||s.useGlobalTarget||w_(d,m.target))},p=m=>{f(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),y_(c)&&(c.addEventListener("focus",u=>p8(u,i)),!h8(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function j_(t){return O2(t)&&"ownerSVGElement"in t}function g8(t){return j_(t)&&t.tagName==="svg"}const Ut=t=>!!(t&&t.getVelocity),x8=[...p_,dt,oi],y8=t=>x8.find(h_(t)),xv=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function xj(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function v8(...t){return n=>{let s=!1;const r=t.map(i=>{const o=xj(i,n);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():xj(t[i],null)}}}}function b8(...t){return g.useCallback(v8(...t),t)}class w8 extends g.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const r=s.offsetParent,i=y_(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function j8({children:t,isPresent:n,anchorX:s,root:r}){const i=g.useId(),o=g.useRef(null),l=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=g.useContext(xv),d=b8(o,t==null?void 0:t.ref);return g.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:p,right:m}=l.current;if(n||!o.current||!u||!f)return;const x=s==="left"?`left: ${p}`:`right: ${m}`;o.current.dataset.motionPopId=i;const y=document.createElement("style");c&&(y.nonce=c);const v=r??document.head;return v.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{v.contains(y)&&v.removeChild(y)}},[n]),a.jsx(w8,{isPresent:n,childRef:o,sizeRef:l,children:g.cloneElement(t,{ref:d})})}const N8=({children:t,initial:n,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:l,anchorX:c,root:d})=>{const u=Gy(S8),f=g.useId();let h=!0,p=g.useMemo(()=>(h=!1,{id:f,initial:n,isPresent:s,custom:i,onExitComplete:m=>{u.set(m,!0);for(const x of u.values())if(!x)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[s,u,r]);return o&&h&&(p={...p}),g.useMemo(()=>{u.forEach((m,x)=>u.set(x,!1))},[s]),g.useEffect(()=>{!s&&!u.size&&r&&r()},[s]),l==="popLayout"&&(t=a.jsx(j8,{isPresent:s,anchorX:c,root:d,children:t})),a.jsx(ph.Provider,{value:p,children:t})};function S8(){return new Map}function N_(t=!0){const n=g.useContext(ph);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=n,o=g.useId();g.useEffect(()=>{if(t)return i(o)},[t]);const l=g.useCallback(()=>t&&r&&r(o),[o,r,t]);return!s&&r?[!1,l]:[!0]}const Md=t=>t.key||"";function yj(t){const n=[];return g.Children.forEach(t,s=>{g.isValidElement(s)&&n.push(s)}),n}const li=({children:t,custom:n,initial:s=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[u,f]=N_(l),h=g.useMemo(()=>yj(t),[t]),p=l&&!u?[]:h.map(Md),m=g.useRef(!0),x=g.useRef(h),y=Gy(()=>new Map),[v,b]=g.useState(h),[w,j]=g.useState(h);P2(()=>{m.current=!1,x.current=h;for(let _=0;_<w.length;_++){const C=Md(w[_]);p.includes(C)?y.delete(C):y.get(C)!==!0&&y.set(C,!1)}},[w,p.length,p.join("-")]);const N=[];if(h!==v){let _=[...h];for(let C=0;C<w.length;C++){const k=w[C],E=Md(k);p.includes(E)||(_.splice(C,0,k),N.push(k))}return o==="wait"&&N.length&&(_=N),j(yj(_)),b(h),null}const{forceRender:S}=g.useContext(Ky);return a.jsx(a.Fragment,{children:w.map(_=>{const C=Md(_),k=l&&!u?!1:h===w||p.includes(C),E=()=>{if(y.has(C))y.set(C,!0);else return;let M=!0;y.forEach(D=>{D||(M=!1)}),M&&(S==null||S(),j(x.current),l&&(f==null||f()),r&&r())};return a.jsx(N8,{isPresent:k,initial:!m.current||s?void 0:!1,custom:n,presenceAffectsLayout:i,mode:o,root:d,onExitComplete:k?void 0:E,anchorX:c,children:_},C)})})},S_=g.createContext({strict:!1}),vj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ko={};for(const t in vj)ko[t]={isEnabled:n=>vj[t].some(s=>!!n[s])};function k8(t){for(const n in t)ko[n]={...ko[n],...t[n]}}const C8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||C8.has(t)}let k_=t=>!cf(t);function _8(t){typeof t=="function"&&(k_=n=>n.startsWith("on")?!cf(n):t(n))}try{_8(require("@emotion/is-prop-valid").default)}catch{}function E8(t,n,s){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(k_(i)||s===!0&&cf(i)||!n&&!cf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const mh=g.createContext({});function gh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bc(t){return typeof t=="string"||Array.isArray(t)}const yv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vv=["initial",...yv];function xh(t){return gh(t.animate)||vv.some(n=>bc(t[n]))}function C_(t){return!!(xh(t)||t.variants)}function T8(t,n){if(xh(t)){const{initial:s,animate:r}=t;return{initial:s===!1||bc(s)?s:void 0,animate:bc(r)?r:void 0}}return t.inherit!==!1?n:{}}function M8(t){const{initial:n,animate:s}=T8(t,g.useContext(mh));return g.useMemo(()=>({initial:n,animate:s}),[bj(n),bj(s)])}function bj(t){return Array.isArray(t)?t.join(" "):t}const wc={};function A8(t){for(const n in t)wc[n]=t[n],sv(n)&&(wc[n].isCSSVariable=!0)}function __(t,{layout:n,layoutId:s}){return qo.has(t)||t.startsWith("origin")||(n||s!==void 0)&&(!!wc[t]||t==="opacity")}const P8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},R8=Wo.length;function O8(t,n,s){let r="",i=!0;for(let o=0;o<R8;o++){const l=Wo[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||s){const u=x_(c,pv[l]);if(!d){i=!1;const f=P8[l]||l;r+=`${f}(${u}) `}s&&(n[l]=u)}}return r=r.trim(),s?r=s(n,i?"":r):i&&(r="none"),r}function bv(t,n,s){const{style:r,vars:i,transformOrigin:o}=t;let l=!1,c=!1;for(const d in n){const u=n[d];if(qo.has(d)){l=!0;continue}else if(sv(d)){i[d]=u;continue}else{const f=x_(u,pv[d]);d.startsWith("origin")?(c=!0,o[d]=f):r[d]=f}}if(n.transform||(l||s?r.transform=O8(n,t.transform,s):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:u="50%",originZ:f=0}=o;r.transformOrigin=`${d} ${u} ${f}`}}const wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E_(t,n,s){for(const r in n)!Ut(n[r])&&!__(r,s)&&(t[r]=n[r])}function D8({transformTemplate:t},n){return g.useMemo(()=>{const s=wv();return bv(s,n,t),Object.assign({},s.vars,s.style)},[n])}function I8(t,n){const s=t.style||{},r={};return E_(r,s,t),Object.assign(r,D8(t,n)),r}function L8(t,n){const s={},r=I8(t,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const $8={offset:"stroke-dashoffset",array:"stroke-dasharray"},F8={offset:"strokeDashoffset",array:"strokeDasharray"};function z8(t,n,s=1,r=0,i=!0){t.pathLength=1;const o=i?$8:F8;t[o.offset]=me.transform(-r);const l=me.transform(n),c=me.transform(s);t[o.array]=`${l} ${c}`}function T_(t,{attrX:n,attrY:s,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...c},d,u,f){if(bv(t,c,u),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete h.transformBox),n!==void 0&&(h.x=n),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),i!==void 0&&z8(h,i,o,l,!1)}const M_=()=>({...wv(),attrs:{}}),A_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function B8(t,n,s,r){const i=g.useMemo(()=>{const o=M_();return T_(o,n,A_(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[n]);if(t.style){const o={};E_(o,t.style,t),i.style={...o,...i.style}}return i}const V8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jv(t){return typeof t!="string"||t.includes("-")?!1:!!(V8.indexOf(t)>-1||/[A-Z]/u.test(t))}function H8(t,n,s,{latestValues:r},i,o=!1){const c=(jv(t)?B8:L8)(n,r,i,t),d=E8(n,typeof t=="string",o),u=t!==g.Fragment?{...d,...c,ref:s}:{},{children:f}=n,h=g.useMemo(()=>Ut(f)?f.get():f,[f]);return g.createElement(t,{...u,children:h})}function wj(t){const n=[{},{}];return t==null||t.values.forEach((s,r)=>{n[0][r]=s.get(),n[1][r]=s.getVelocity()}),n}function Nv(t,n,s,r){if(typeof n=="function"){const[i,o]=wj(r);n=n(s!==void 0?s:t.custom,i,o)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[i,o]=wj(r);n=n(s!==void 0?s:t.custom,i,o)}return n}function gu(t){return Ut(t)?t.get():t}function U8({scrapeMotionValuesFromProps:t,createRenderState:n},s,r,i){return{latestValues:W8(s,r,i,t),renderState:n()}}function W8(t,n,s,r){const i={},o=r(t,{});for(const p in o)i[p]=gu(o[p]);let{initial:l,animate:c}=t;const d=xh(t),u=C_(t);n&&u&&!d&&t.inherit!==!1&&(l===void 0&&(l=n.initial),c===void 0&&(c=n.animate));let f=s?s.initial===!1:!1;f=f||l===!1;const h=f?c:l;if(h&&typeof h!="boolean"&&!gh(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const x=Nv(t,p[m]);if(x){const{transitionEnd:y,transition:v,...b}=x;for(const w in b){let j=b[w];if(Array.isArray(j)){const N=f?j.length-1:0;j=j[N]}j!==null&&(i[w]=j)}for(const w in y)i[w]=y[w]}}}return i}const P_=t=>(n,s)=>{const r=g.useContext(mh),i=g.useContext(ph),o=()=>U8(t,n,r,i);return s?o():Gy(o)};function Sv(t,n,s){var o;const{style:r}=t,i={};for(const l in r)(Ut(r[l])||n.style&&Ut(n.style[l])||__(l,t)||((o=s==null?void 0:s.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(i[l]=r[l]);return i}const q8=P_({scrapeMotionValuesFromProps:Sv,createRenderState:wv});function R_(t,n,s){const r=Sv(t,n,s);for(const i in t)if(Ut(t[i])||Ut(n[i])){const o=Wo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const K8=P_({scrapeMotionValuesFromProps:R_,createRenderState:M_}),G8=Symbol.for("motionComponentSymbol");function Ya(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Y8(t,n,s){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),n&&(r?n.mount(r):n.unmount()),s&&(typeof s=="function"?s(r):Ya(s)&&(s.current=r))},[n])}const kv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),X8="framerAppearId",O_="data-"+kv(X8),D_=g.createContext({});function J8(t,n,s,r,i){var y,v;const{visualElement:o}=g.useContext(mh),l=g.useContext(S_),c=g.useContext(ph),d=g.useContext(xv).reducedMotion,u=g.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(t,{visualState:n,parent:o,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=u.current,h=g.useContext(D_);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Q8(u.current,s,i,h);const p=g.useRef(!1);g.useInsertionEffect(()=>{f&&p.current&&f.update(s,c)});const m=s[O_],x=g.useRef(!!m&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,m))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,m)));return P2(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),x.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,m)}),x.current=!1),f.enteringChildren=void 0)}),f}function Q8(t,n,s,r){const{layoutId:i,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:u,layoutCrossfade:f}=n;t.projection=new s(t.latestValues,n["data-framer-portal-id"]?void 0:I_(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||c&&Ya(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:d,layoutRoot:u})}function I_(t){if(t)return t.options.allowProjection!==!1?t.projection:I_(t.parent)}function Rp(t,{forwardMotionProps:n=!1}={},s,r){s&&k8(s);const i=jv(t)?K8:q8;function o(c,d){let u;const f={...g.useContext(xv),...c,layoutId:Z8(c)},{isStatic:h}=f,p=M8(c),m=i(c,h);if(!h&&Yy){eH();const x=tH(f);u=x.MeasureLayout,p.visualElement=J8(t,m,f,r,x.ProjectionNode)}return a.jsxs(mh.Provider,{value:p,children:[u&&p.visualElement?a.jsx(u,{visualElement:p.visualElement,...f}):null,H8(t,c,Y8(m,p.visualElement,d),m,h,n)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=g.forwardRef(o);return l[G8]=t,l}function Z8({layoutId:t}){const n=g.useContext(Ky).id;return n&&t!==void 0?n+"-"+t:t}function eH(t,n){g.useContext(S_).strict}function tH(t){const{drag:n,layout:s}=ko;if(!n&&!s)return{};const r={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function nH(t,n){if(typeof Proxy>"u")return Rp;const s=new Map,r=(o,l)=>Rp(o,l,t,n),i=(o,l)=>r(o,l);return new Proxy(i,{get:(o,l)=>l==="create"?r:(s.has(l)||s.set(l,Rp(l,void 0,t,n)),s.get(l))})}function L_({top:t,left:n,right:s,bottom:r}){return{x:{min:n,max:s},y:{min:t,max:r}}}function sH({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function rH(t,n){if(!n)return t;const s=n({x:t.left,y:t.top}),r=n({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Op(t){return t===void 0||t===1}function Bg({scale:t,scaleX:n,scaleY:s}){return!Op(t)||!Op(n)||!Op(s)}function Ai(t){return Bg(t)||$_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $_(t){return jj(t.x)||jj(t.y)}function jj(t){return t&&t!=="0%"}function df(t,n,s){const r=t-s,i=n*r;return s+i}function Nj(t,n,s,r,i){return i!==void 0&&(t=df(t,i,r)),df(t,s,r)+n}function Vg(t,n=0,s=1,r,i){t.min=Nj(t.min,n,s,r,i),t.max=Nj(t.max,n,s,r,i)}function F_(t,{x:n,y:s}){Vg(t.x,n.translate,n.scale,n.originPoint),Vg(t.y,s.translate,s.scale,s.originPoint)}const Sj=.999999999999,kj=1.0000000000001;function iH(t,n,s,r=!1){const i=s.length;if(!i)return;n.x=n.y=1;let o,l;for(let c=0;c<i;c++){o=s[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ja(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(n.x*=l.x.scale,n.y*=l.y.scale,F_(t,l)),r&&Ai(o.latestValues)&&Ja(t,o.latestValues))}n.x<kj&&n.x>Sj&&(n.x=1),n.y<kj&&n.y>Sj&&(n.y=1)}function Xa(t,n){t.min=t.min+n,t.max=t.max+n}function Cj(t,n,s,r,i=.5){const o=qe(t.min,t.max,i);Vg(t,n,s,o,r)}function Ja(t,n){Cj(t.x,n.x,n.scaleX,n.scale,n.originX),Cj(t.y,n.y,n.scaleY,n.scale,n.originY)}function z_(t,n){return L_(rH(t.getBoundingClientRect(),n))}function aH(t,n,s){const r=z_(t,s),{scroll:i}=n;return i&&(Xa(r.x,i.offset.x),Xa(r.y,i.offset.y)),r}const _j=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qa=()=>({x:_j(),y:_j()}),Ej=()=>({min:0,max:0}),st=()=>({x:Ej(),y:Ej()}),Hg={current:null},B_={current:!1};function oH(){if(B_.current=!0,!!Yy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>Hg.current=t.matches;t.addEventListener("change",n),n()}else Hg.current=!1}const lH=new WeakMap;function cH(t,n,s){for(const r in n){const i=n[r],o=s[r];if(Ut(i))t.addValue(r,i);else if(Ut(o))t.addValue(r,So(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,So(l!==void 0?l:i,{owner:t}))}}for(const r in s)n[r]===void 0&&t.removeValue(r);return n}const Tj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dH{scrapeMotionValuesFromProps(n,s,r){return{}}constructor({parent:n,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=pn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,He.render(this.render,!1,!0))};const{latestValues:d,renderState:u}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=u,this.parent=n,this.props=s,this.presenceContext=r,this.depth=n?n.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=xh(s),this.isVariantNode=C_(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const p in h){const m=h[p];d[p]!==void 0&&Ut(m)&&m.set(d[p])}}mount(n){var s;this.current=n,lH.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),B_.current||oH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hg.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var n;this.projection&&this.projection.unmount(),ai(this.notifyUpdate),ai(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(n=this.parent)==null||n.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const r=qo.has(n);r&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",l=>{this.latestValues[n]=l,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{i(),o&&o(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in ko){const s=ko[n];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[n]&&i&&r(this.props)&&(this.features[n]=new i(this)),this.features[n]){const o=this.features[n];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Tj.length;r++){const i=Tj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=n[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=cH(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const r=this.values.get(n);s!==r&&(r&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let r=this.values.get(n);return r===void 0&&s!==void 0&&(r=So(s===null?void 0:s,{owner:this}),this.addValue(n,r)),r}readValue(n,s){let r=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return r!=null&&(typeof r=="string"&&(R2(r)||D2(r))?r=parseFloat(r):!y8(r)&&oi.test(s)&&(r=g_(n,s)),this.setBaseTarget(n,Ut(r)?r.get():r)),Ut(r)?r.get():r}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){var o;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const l=Nv(this.props,s,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[n])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,n);return i!==void 0&&!Ut(i)?i:this.initialValues[n]!==void 0&&r===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new ev),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){mv.render(this.render)}}class V_ extends dH{constructor(){super(...arguments),this.KeyframeResolver=a8}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:r}){delete s[n],delete r[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Ut(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function H_(t,{style:n,vars:s},r,i){const o=t.style;let l;for(l in n)o[l]=n[l];i==null||i.applyProjectionStyles(o,r);for(l in s)o.setProperty(l,s[l])}function uH(t){return window.getComputedStyle(t)}class fH extends V_{constructor(){super(...arguments),this.type="html",this.renderInstance=H_}readValueFromInstance(n,s){var r;if(qo.has(s))return(r=this.projection)!=null&&r.isProjecting?Og(s):kV(n,s);{const i=uH(n),o=(sv(s)?i.getPropertyValue(s):i[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(n,{transformPagePoint:s}){return z_(n,s)}build(n,s,r){bv(n,s,r.transformTemplate)}scrapeMotionValuesFromProps(n,s,r){return Sv(n,s,r)}}const U_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hH(t,n,s,r){H_(t,n,void 0,r);for(const i in n.attrs)t.setAttribute(U_.has(i)?i:kv(i),n.attrs[i])}class pH extends V_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=st}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(qo.has(s)){const r=m_(s);return r&&r.default||0}return s=U_.has(s)?s:kv(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,r){return R_(n,s,r)}build(n,s,r){T_(n,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(n,s,r,i){hH(n,s,r,i)}mount(n){this.isSVGTag=A_(n.tagName),super.mount(n)}}const mH=(t,n)=>jv(t)?new pH(n):new fH(n,{allowProjection:t!==g.Fragment});function oo(t,n,s){const r=t.getProps();return Nv(r,n,s!==void 0?s:r.custom,t)}const Ug=t=>Array.isArray(t);function gH(t,n,s){t.hasValue(n)?t.getValue(n).set(s):t.addValue(n,So(s))}function xH(t){return Ug(t)?t[t.length-1]||0:t}function yH(t,n){const s=oo(t,n);let{transitionEnd:r={},transition:i={},...o}=s||{};o={...o,...r};for(const l in o){const c=xH(o[l]);gH(t,l,c)}}function vH(t){return!!(Ut(t)&&t.add)}function Wg(t,n){const s=t.getValue("willChange");if(vH(s))return s.add(n);if(!s&&hr.WillChange){const r=new hr.WillChange("auto");t.addValue("willChange",r),r.add(n)}}function W_(t){return t.props[O_]}const bH=t=>t!==null;function wH(t,{repeat:n,repeatType:s="loop"},r){const i=t.filter(bH),o=n&&s!=="loop"&&n%2===1?0:i.length-1;return i[o]}const jH={type:"spring",stiffness:500,damping:25,restSpeed:10},NH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SH={type:"keyframes",duration:.8},kH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CH=(t,{keyframes:n})=>n.length>2?SH:qo.has(t)?t.startsWith("scale")?NH(n[1]):jH:kH;function _H({when:t,delay:n,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:u,...f}){return!!Object.keys(f).length}const Cv=(t,n,s,r={},i,o)=>l=>{const c=hv(r,t)||{},d=c.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ls(d);const f={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...c,delay:-u,onUpdate:p=>{n.set(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:n,element:o?void 0:i};_H(c)||Object.assign(f,CH(t,f)),f.duration&&(f.duration=Ls(f.duration)),f.repeatDelay&&(f.repeatDelay=Ls(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Fg(f),f.delay===0&&(h=!0)),(hr.instantAnimations||hr.skipAnimations)&&(h=!0,Fg(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,h&&!o&&n.get()!==void 0){const p=wH(f.keyframes,c);if(p!==void 0){He.update(()=>{f.onUpdate(p),f.onComplete()});return}}return c.isSync?new uv(f):new GV(f)};function EH({protectedKeys:t,needsAnimating:n},s){const r=t.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,r}function q_(t,n,{delay:s=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=n;r&&(o=r);const d=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const h=t.getValue(f,t.latestValues[f]??null),p=c[f];if(p===void 0||u&&EH(u,f))continue;const m={delay:s,...hv(o||{},f)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===x&&!m.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const b=W_(t);if(b){const w=window.MotionHandoffAnimation(b,f,He);w!==null&&(m.startTime=w,y=!0)}}Wg(t,f),h.start(Cv(f,h,p,t.shouldReduceMotion&&f_.has(f)?{type:!1}:m,t,y));const v=h.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{He.update(()=>{l&&yH(t,l)})}),d}function K_(t,n,s,r=0,i=1){const o=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(n),l=t.size,c=(l-1)*r;return typeof s=="function"?s(o,l):i===1?o*r:c-o*r}function qg(t,n,s={}){var d;const r=oo(t,n,s.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(i=s.transitionOverride);const o=r?()=>Promise.all(q_(t,r,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return TH(t,n,u,f,h,p,s)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,f]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>f())}else return Promise.all([o(),l(s.delay)])}function TH(t,n,s=0,r=0,i=0,o=1,l){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",n),c.push(qg(d,n,{...l,delay:s+(typeof r=="function"?0:r)+K_(t.variantChildren,d,r,i,o)}).then(()=>d.notify("AnimationComplete",n)));return Promise.all(c)}function MH(t,n,s={}){t.notify("AnimationStart",n);let r;if(Array.isArray(n)){const i=n.map(o=>qg(t,o,s));r=Promise.all(i)}else if(typeof n=="string")r=qg(t,n,s);else{const i=typeof n=="function"?oo(t,n,s.custom):n;r=Promise.all(q_(t,i,s))}return r.then(()=>{t.notify("AnimationComplete",n)})}function G_(t,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(n[r]!==t[r])return!1;return!0}const AH=vv.length;function Y_(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Y_(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const n={};for(let s=0;s<AH;s++){const r=vv[s],i=t.props[r];(bc(i)||i===!1)&&(n[r]=i)}return n}const PH=[...yv].reverse(),RH=yv.length;function OH(t){return n=>Promise.all(n.map(({animation:s,options:r})=>MH(t,s,r)))}function DH(t){let n=OH(t),s=Mj(),r=!0;const i=d=>(u,f)=>{var p;const h=oo(t,f,d==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:m,transitionEnd:x,...y}=h;u={...u,...y,...x}}return u};function o(d){n=d(t)}function l(d){const{props:u}=t,f=Y_(t.parent)||{},h=[],p=new Set;let m={},x=1/0;for(let v=0;v<RH;v++){const b=PH[v],w=s[b],j=u[b]!==void 0?u[b]:f[b],N=bc(j),S=b===d?w.isActive:null;S===!1&&(x=v);let _=j===f[b]&&j!==u[b]&&N;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...m},!w.isActive&&S===null||!j&&!w.prevProp||gh(j)||typeof j=="boolean")continue;const C=IH(w.prevProp,j);let k=C||b===d&&w.isActive&&!_&&N||v>x&&N,E=!1;const M=Array.isArray(j)?j:[j];let D=M.reduce(i(b),{});S===!1&&(D={});const{prevResolvedValues:R={}}=w,T={...R,...D},P=B=>{k=!0,p.has(B)&&(E=!0,p.delete(B)),w.needsAnimating[B]=!0;const A=t.getValue(B);A&&(A.liveStyle=!1)};for(const B in T){const A=D[B],O=R[B];if(m.hasOwnProperty(B))continue;let z=!1;Ug(A)&&Ug(O)?z=!G_(A,O):z=A!==O,z?A!=null?P(B):p.add(B):A!==void 0&&p.has(B)?P(B):w.protectedKeys[B]=!0}w.prevProp=j,w.prevResolvedValues=D,w.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(k=!1);const L=_&&C;k&&(!L||E)&&h.push(...M.map(B=>{const A={type:b};if(typeof B=="string"&&r&&!L&&t.manuallyAnimateOnMount&&t.parent){const{parent:O}=t,z=oo(O,B);if(O.enteringChildren&&z){const{delayChildren:H}=z.transition||{};A.delay=K_(O.enteringChildren,t,H)}}return{animation:B,options:A}}))}if(p.size){const v={};if(typeof u.initial!="boolean"){const b=oo(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(v.transition=b.transition)}p.forEach(b=>{const w=t.getBaseTarget(b),j=t.getValue(b);j&&(j.liveStyle=!0),v[b]=w??null}),h.push({animation:v})}let y=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?n(h):Promise.resolve()}function c(d,u){var h;if(s[d].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(d,u)}),s[d].isActive=u;const f=l(d);for(const p in s)s[p].protectedKeys={};return f}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>s,reset:()=>{s=Mj()}}}function IH(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!G_(n,t):!1}function Ci(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mj(){return{animate:Ci(!0),whileInView:Ci(),whileHover:Ci(),whileTap:Ci(),whileDrag:Ci(),whileFocus:Ci(),exit:Ci()}}class gi{constructor(n){this.isMounted=!1,this.node=n}update(){}}class LH extends gi{constructor(n){super(n),n.animationState||(n.animationState=DH(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();gh(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let $H=0;class FH extends gi{constructor(){super(...arguments),this.id=$H++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===r)return;const i=this.node.animationState.setActive("exit",!n);s&&!n&&i.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const zH={animation:{Feature:LH},exit:{Feature:FH}};function jc(t,n,s,r={passive:!0}){return t.addEventListener(n,s,r),()=>t.removeEventListener(n,s)}function Xc(t){return{point:{x:t.pageX,y:t.pageY}}}const BH=t=>n=>gv(n)&&t(n,Xc(n));function Hl(t,n,s,r){return jc(t,n,BH(s),r)}const X_=1e-4,VH=1-X_,HH=1+X_,J_=.01,UH=0-J_,WH=0+J_;function sn(t){return t.max-t.min}function qH(t,n,s){return Math.abs(t-n)<=s}function Aj(t,n,s,r=.5){t.origin=r,t.originPoint=qe(n.min,n.max,t.origin),t.scale=sn(s)/sn(n),t.translate=qe(s.min,s.max,t.origin)-t.originPoint,(t.scale>=VH&&t.scale<=HH||isNaN(t.scale))&&(t.scale=1),(t.translate>=UH&&t.translate<=WH||isNaN(t.translate))&&(t.translate=0)}function Ul(t,n,s,r){Aj(t.x,n.x,s.x,r?r.originX:void 0),Aj(t.y,n.y,s.y,r?r.originY:void 0)}function Pj(t,n,s){t.min=s.min+n.min,t.max=t.min+sn(n)}function KH(t,n,s){Pj(t.x,n.x,s.x),Pj(t.y,n.y,s.y)}function Rj(t,n,s){t.min=n.min-s.min,t.max=t.min+sn(n)}function Wl(t,n,s){Rj(t.x,n.x,s.x),Rj(t.y,n.y,s.y)}function Vn(t){return[t("x"),t("y")]}const Q_=({current:t})=>t?t.ownerDocument.defaultView:null,Oj=(t,n)=>Math.abs(t-n);function GH(t,n){const s=Oj(t.x,n.x),r=Oj(t.y,n.y);return Math.sqrt(s**2+r**2)}class Z_{constructor(n,s,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Ip(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=GH(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!x)return;const{point:y}=p,{timestamp:v}=At;this.history.push({...y,timestamp:v});const{onStart:b,onMove:w}=this.handlers;m||(b&&b(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Dp(m,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Ip(p.type==="pointercancel"?this.lastMoveEventInfo:Dp(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(p,b),y&&y(p,b)},!gv(n))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const c=Xc(n),d=Dp(c,this.transformPagePoint),{point:u}=d,{timestamp:f}=At;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=s;h&&h(n,Ip(d,this.history)),this.removeListeners=Kc(Hl(this.contextWindow,"pointermove",this.handlePointerMove),Hl(this.contextWindow,"pointerup",this.handlePointerUp),Hl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),ai(this.updatePoint)}}function Dp(t,n){return n?{point:n(t.point)}:t}function Dj(t,n){return{x:t.x-n.x,y:t.y-n.y}}function Ip({point:t},n){return{point:t,delta:Dj(t,eE(n)),offset:Dj(t,YH(n)),velocity:XH(n,.1)}}function YH(t){return t[0]}function eE(t){return t[t.length-1]}function XH(t,n){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const i=eE(t);for(;s>=0&&(r=t[s],!(i.timestamp-r.timestamp>Ls(n)));)s--;if(!r)return{x:0,y:0};const o=Yn(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function JH(t,{min:n,max:s},r){return n!==void 0&&t<n?t=r?qe(n,t,r.min):Math.max(t,n):s!==void 0&&t>s&&(t=r?qe(s,t,r.max):Math.min(t,s)),t}function Ij(t,n,s){return{min:n!==void 0?t.min+n:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function QH(t,{top:n,left:s,bottom:r,right:i}){return{x:Ij(t.x,s,i),y:Ij(t.y,n,r)}}function Lj(t,n){let s=n.min-t.min,r=n.max-t.max;return n.max-n.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function ZH(t,n){return{x:Lj(t.x,n.x),y:Lj(t.y,n.y)}}function e7(t,n){let s=.5;const r=sn(t),i=sn(n);return i>r?s=xc(n.min,n.max-r,t.min):r>i&&(s=xc(t.min,t.max-i,n.min)),fr(0,1,s)}function t7(t,n){const s={};return n.min!==void 0&&(s.min=n.min-t.min),n.max!==void 0&&(s.max=n.max-t.min),s}const Kg=.35;function n7(t=Kg){return t===!1?t=0:t===!0&&(t=Kg),{x:$j(t,"left","right"),y:$j(t,"top","bottom")}}function $j(t,n,s){return{min:Fj(t,n),max:Fj(t,s)}}function Fj(t,n){return typeof t=="number"?t:t[n]||0}const s7=new WeakMap;class r7{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Xc(h).point)},l=(h,p)=>{const{drag:m,dragPropagation:x,onDragStart:y}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d8(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(b=>{let w=this.getAxisMotionValue(b).get()||0;if($s.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[b];N&&(w=sn(N)*(parseFloat(w)/100))}}this.originPoint[b]=w}),y&&He.postRender(()=>y(h,p)),Wg(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=p;if(x&&this.currentDirection===null){this.currentDirection=i7(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,b),this.updateAxis("y",p.point,b),this.visualElement.render(),v&&v(h,p)},d=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Vn(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Z_(n,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:Q_(this.visualElement)})}stop(n,s){const r=n||this.latestPointerEvent,i=s||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&He.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,r){const{drag:i}=this.getProps();if(!r||!Ad(n,i,this.currentDirection))return;const o=this.getAxisMotionValue(n);let l=this.originPoint[n]+r[n];this.constraints&&this.constraints[n]&&(l=JH(l,this.constraints[n],this.elastic[n])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;n&&Ya(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=QH(r.layoutBox,n):this.constraints=!1,this.elastic=n7(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=t7(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!Ya(n))return!1;const r=n.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=aH(r,i.root,this.visualElement.getTransformPagePoint());let l=ZH(i.layout.layoutBox,o);if(s){const c=s(sH(l));this.hasMutatedConstraints=!!c,c&&(l=L_(c))}return l}startAnimation(n){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},u=Vn(f=>{if(!Ad(f,s,this.currentDirection))return;let h=d&&d[f]||{};l&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,x={type:"inertia",velocity:r?n[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(f,x)});return Promise.all(u).then(c)}startAxisValueAnimation(n,s){const r=this.getAxisMotionValue(n);return Wg(this.visualElement,n),r.start(Cv(n,r,0,s,this.visualElement,!1))}stopAnimation(){Vn(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Vn(n=>{var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.pause()})}getAnimationState(n){var s;return(s=this.getAxisMotionValue(n).animation)==null?void 0:s.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(n,(r.initial?r.initial[n]:void 0)||0)}snapToCursor(n){Vn(s=>{const{drag:r}=this.getProps();if(!Ad(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[s];o.set(n[s]-qe(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ya(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=e7({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vn(l=>{if(!Ad(l,n,null))return;const c=this.getAxisMotionValue(l),{min:d,max:u}=this.constraints[l];c.set(qe(d,u,i[l]))})}addListeners(){if(!this.visualElement.current)return;s7.set(this.visualElement,this);const n=this.visualElement.current,s=Hl(n,"pointerdown",d=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ya(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),He.read(r);const l=jc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vn(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=d[f].translate,h.set(h.get()+d[f].translate))}),this.visualElement.render())});return()=>{l(),s(),o(),c&&c()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=Kg,dragMomentum:c=!0}=n;return{...n,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Ad(t,n,s){return(n===!0||n===t)&&(s===null||s===t)}function i7(t,n=10){let s=null;return Math.abs(t.y)>n?s="y":Math.abs(t.x)>n&&(s="x"),s}class a7 extends gi{constructor(n){super(n),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new r7(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const zj=t=>(n,s)=>{t&&He.postRender(()=>t(n,s))};class o7 extends gi{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(n){this.session=new Z_(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Q_(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:zj(n),onStart:zj(s),onMove:r,onEnd:(o,l)=>{delete this.session,i&&He.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Hl(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bj(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const ml={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const s=Bj(t,n.target.x),r=Bj(t,n.target.y);return`${s}% ${r}%`}},l7={correct:(t,{treeScale:n,projectionDelta:s})=>{const r=t,i=oi.parse(t);if(i.length>5)return r;const o=oi.createTransformer(t),l=typeof i[0]!="number"?1:0,c=s.x.scale*n.x,d=s.y.scale*n.y;i[0+l]/=c,i[1+l]/=d;const u=qe(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=u),typeof i[3+l]=="number"&&(i[3+l]/=u),o(i)}};let Lp=!1;class c7 extends g.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=n;A8(d7),o&&(s.group&&s.group.add(o),r&&r.register&&i&&r.register(o),Lp&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),xu.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:r,drag:i,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,Lp=!0,i||n.layoutDependency!==s||s===void 0||n.isPresent!==o?l.willUpdate():this.safeToRemove(),n.isPresent!==o&&(o?l.promote():l.relegate()||He.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),mv.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=n;Lp=!0,i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function tE(t){const[n,s]=N_(),r=g.useContext(Ky);return a.jsx(c7,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(D_),isPresent:n,safeToRemove:s})}const d7={borderRadius:{...ml,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ml,borderTopRightRadius:ml,borderBottomLeftRadius:ml,borderBottomRightRadius:ml,boxShadow:l7};function u7(t,n,s){const r=Ut(t)?t:So(t);return r.start(Cv("",r,n,s)),r.animation}const f7=(t,n)=>t.depth-n.depth;class h7{constructor(){this.children=[],this.isDirty=!1}add(n){Xy(this.children,n),this.isDirty=!0}remove(n){Jy(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(f7),this.isDirty=!1,this.children.forEach(n)}}function p7(t,n){const s=pn.now(),r=({timestamp:i})=>{const o=i-s;o>=n&&(ai(r),t(o-n))};return He.setup(r,!0),()=>ai(r)}const nE=["TopLeft","TopRight","BottomLeft","BottomRight"],m7=nE.length,Vj=t=>typeof t=="string"?parseFloat(t):t,Hj=t=>typeof t=="number"||me.test(t);function g7(t,n,s,r,i,o){i?(t.opacity=qe(0,s.opacity??1,x7(r)),t.opacityExit=qe(n.opacity??1,0,y7(r))):o&&(t.opacity=qe(n.opacity??1,s.opacity??1,r));for(let l=0;l<m7;l++){const c=`border${nE[l]}Radius`;let d=Uj(n,c),u=Uj(s,c);if(d===void 0&&u===void 0)continue;d||(d=0),u||(u=0),d===0||u===0||Hj(d)===Hj(u)?(t[c]=Math.max(qe(Vj(d),Vj(u),r),0),($s.test(u)||$s.test(d))&&(t[c]+="%")):t[c]=u}(n.rotate||s.rotate)&&(t.rotate=qe(n.rotate||0,s.rotate||0,r))}function Uj(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const x7=sE(0,.5,H2),y7=sE(.5,.95,Jn);function sE(t,n,s){return r=>r<t?0:r>n?1:s(xc(t,n,r))}function Wj(t,n){t.min=n.min,t.max=n.max}function Bn(t,n){Wj(t.x,n.x),Wj(t.y,n.y)}function qj(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function Kj(t,n,s,r,i){return t-=n,t=df(t,1/s,r),i!==void 0&&(t=df(t,1/i,r)),t}function v7(t,n=0,s=1,r=.5,i,o=t,l=t){if($s.test(n)&&(n=parseFloat(n),n=qe(l.min,l.max,n/100)-l.min),typeof n!="number")return;let c=qe(o.min,o.max,r);t===o&&(c-=n),t.min=Kj(t.min,n,s,c,i),t.max=Kj(t.max,n,s,c,i)}function Gj(t,n,[s,r,i],o,l){v7(t,n[s],n[r],n[i],n.scale,o,l)}const b7=["x","scaleX","originX"],w7=["y","scaleY","originY"];function Yj(t,n,s,r){Gj(t.x,n,b7,s?s.x:void 0,r?r.x:void 0),Gj(t.y,n,w7,s?s.y:void 0,r?r.y:void 0)}function Xj(t){return t.translate===0&&t.scale===1}function rE(t){return Xj(t.x)&&Xj(t.y)}function Jj(t,n){return t.min===n.min&&t.max===n.max}function j7(t,n){return Jj(t.x,n.x)&&Jj(t.y,n.y)}function Qj(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function iE(t,n){return Qj(t.x,n.x)&&Qj(t.y,n.y)}function Zj(t){return sn(t.x)/sn(t.y)}function e1(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class N7{constructor(){this.members=[]}add(n){Xy(this.members,n),n.scheduleRender()}remove(n){if(Jy(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(i=>n===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(n,s){const r=this.lead;if(n!==r&&(this.prevLead=r,this.lead=n,n.show(),r)){r.instance&&r.scheduleRender(),n.scheduleRender(),n.resumeFrom=r,s&&(n.resumeFrom.preserveOpacity=!0),r.snapshot&&(n.snapshot=r.snapshot,n.snapshot.latestValues=r.animationValues||r.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:i}=n.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:r}=n;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function S7(t,n,s){let r="";const i=t.x.translate/n.x,o=t.y.translate/n.y,l=(s==null?void 0:s.z)||0;if((i||o||l)&&(r=`translate3d(${i}px, ${o}px, ${l}px) `),(n.x!==1||n.y!==1)&&(r+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:p,skewX:m,skewY:x}=s;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),x&&(r+=`skewY(${x}deg) `)}const c=t.x.scale*n.x,d=t.y.scale*n.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const $p=["","X","Y","Z"],k7=1e3;let C7=0;function Fp(t,n,s,r){const{latestValues:i}=n;i[t]&&(s[t]=i[t],n.setStaticValue(t,0),r&&(r[t]=0))}function aE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const s=W_(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",He,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&aE(r)}function oE({attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=n==null?void 0:n()){this.id=C7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(T7),this.nodes.forEach(R7),this.nodes.forEach(O7),this.nodes.forEach(M7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new h7)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ev),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=j_(l)&&!g8(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let f,h=0;const p=()=>this.root.updateBlockedByResize=!1;He.read(()=>{h=window.innerWidth}),t(l,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,f&&f(),f=p7(p,250),xu.hasAnimatedSinceResize&&(xu.hasAnimatedSinceResize=!1,this.nodes.forEach(s1)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||F7,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!iE(this.targetLayout,m),w=!h&&p;if(this.options.layoutRoot||this.resumeFrom||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...hv(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(f,w)}else h||s1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(D7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(t1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(n1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(P7),this.nodes.forEach(_7),this.nodes.forEach(E7)):this.nodes.forEach(n1),this.clearAllSnapshots();const c=pn.now();At.delta=fr(0,1e3/60,c-At.timestamp),At.timestamp=c,At.isProcessing=!0,_p.update.process(At),_p.preRender.process(At),_p.render.process(At),At.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(A7),this.sharedNodes.forEach(I7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!sn(this.snapshot.measuredBox.x)&&!sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!rE(this.projectionDelta),d=this.getTransformTemplate(),u=d?d(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;l&&this.instance&&(c||Ai(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),z7(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:l}=this.options;if(!l)return st();const c=l.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(B7))){const{scroll:f}=this.root;f&&(Xa(c.x,f.offset.x),Xa(c.y,f.offset.y))}return c}removeElementScroll(l){var d;const c=st();if(Bn(c,l),(d=this.scroll)!=null&&d.wasRoot)return c;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Bn(c,l),Xa(c.x,h.offset.x),Xa(c.y,h.offset.y))}return c}applyTransform(l,c=!1){const d=st();Bn(d,l);for(let u=0;u<this.path.length;u++){const f=this.path[u];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ja(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ai(f.latestValues)&&Ja(d,f.latestValues)}return Ai(this.latestValues)&&Ja(d,this.latestValues),d}removeTransform(l){const c=st();Bn(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];if(!u.instance||!Ai(u.latestValues))continue;Bg(u.latestValues)&&u.updateSnapshot();const f=st(),h=u.measurePageBox();Bn(f,h),Yj(c,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Ai(this.latestValues)&&Yj(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==At.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var p;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=At.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Wl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bn(this.target,this.layout.layoutBox),F_(this.target,this.targetDelta)):Bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Wl(this.relativeTargetOrigin,this.target,m.target),Bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bg(this.parent.latestValues)||$_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===At.timestamp&&(d=!1),d)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Bn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;iH(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=st());const{target:m}=l;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qj(this.prevProjectionDelta.x,this.projectionDelta.x),qj(this.prevProjectionDelta.y,this.projectionDelta.y)),Ul(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!e1(this.projectionDelta.x,this.prevProjectionDelta.x)||!e1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qa(),this.projectionDelta=Qa(),this.projectionDeltaWithTransform=Qa()}setAnimationOrigin(l,c=!1){const d=this.snapshot,u=d?d.latestValues:{},f={...this.latestValues},h=Qa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=st(),m=d?d.source:void 0,x=this.layout?this.layout.source:void 0,y=m!==x,v=this.getStack(),b=!v||v.members.length<=1,w=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some($7));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const S=N/1e3;r1(h.x,l.x,S),r1(h.y,l.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L7(this.relativeTarget,this.relativeTargetOrigin,p,S),j&&j7(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=st()),Bn(j,this.relativeTarget)),y&&(this.animationValues=f,g7(f,u,this.latestValues,S,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,d,u;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(u=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||u.stop(),this.pendingAnimation&&(ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{xu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=So(0)),this.currentAnimation=u7(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),l.onUpdate&&l.onUpdate(f)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:u,latestValues:f}=l;if(!(!c||!d||!u)){if(this!==l&&this.layout&&u&&lE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){d=this.target||st();const h=sn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+h;const p=sn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+p}Bn(c,d),Ja(c,f),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new N7),this.sharedNodes.get(l).add(c);const u=c.options.initialPromotionConfig;c.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const u=this.getStack();u&&u.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const u={};d.z&&Fp("z",l,u,this.animationValues);for(let f=0;f<$p.length;f++)Fp(`rotate${$p[f]}`,l,u,this.animationValues),Fp(`skew${$p[f]}`,l,u,this.animationValues);l.render();for(const f in u)l.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=gu(c==null?void 0:c.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=gu(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Ai(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=S7(this.projectionDeltaWithTransform,this.treeScale,f);d&&(h=d(f,h)),l.transform=h;const{x:p,y:m}=this.projectionDelta;l.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,u.animationValues?l.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in wc){if(f[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:b}=wc[x],w=h==="none"?f[x]:y(f[x],u);if(v){const j=v.length;for(let N=0;N<j;N++)l[v[N]]=w}else b?this.options.visualElement.renderState.vars[x]=w:l[x]=w}this.options.layoutId&&(l.pointerEvents=u===this?gu(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(t1),this.root.sharedNodes.clear()}}}function _7(t){t.updateLayout()}function E7(t){var s;const n=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?Vn(h=>{const p=l?n.measuredBox[h]:n.layoutBox[h],m=sn(p);p.min=r[h].min,p.max=p.min+m}):lE(o,n.layoutBox,r)&&Vn(h=>{const p=l?n.measuredBox[h]:n.layoutBox[h],m=sn(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const c=Qa();Ul(c,r,n.layoutBox);const d=Qa();l?Ul(d,t.applyTransform(i,!0),n.measuredBox):Ul(d,r,n.layoutBox);const u=!rE(c);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const x=st();Wl(x,n.layoutBox,p.layoutBox);const y=st();Wl(y,r,m.layoutBox),iE(x,y)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function T7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function M7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function A7(t){t.clearSnapshot()}function t1(t){t.clearMeasurements()}function n1(t){t.isLayoutDirty=!1}function P7(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function s1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function R7(t){t.resolveTargetDelta()}function O7(t){t.calcProjection()}function D7(t){t.resetSkewAndRotation()}function I7(t){t.removeLeadSnapshot()}function r1(t,n,s){t.translate=qe(n.translate,0,s),t.scale=qe(n.scale,1,s),t.origin=n.origin,t.originPoint=n.originPoint}function i1(t,n,s,r){t.min=qe(n.min,s.min,r),t.max=qe(n.max,s.max,r)}function L7(t,n,s,r){i1(t.x,n.x,s.x,r),i1(t.y,n.y,s.y,r)}function $7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const F7={duration:.45,ease:[.4,0,.1,1]},a1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),o1=a1("applewebkit/")&&!a1("chrome/")?Math.round:Jn;function l1(t){t.min=o1(t.min),t.max=o1(t.max)}function z7(t){l1(t.x),l1(t.y)}function lE(t,n,s){return t==="position"||t==="preserve-aspect"&&!qH(Zj(n),Zj(s),.2)}function B7(t){var n;return t!==t.root&&((n=t.scroll)==null?void 0:n.wasRoot)}const V7=oE({attachResizeListener:(t,n)=>jc(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zp={current:void 0},cE=oE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zp.current){const t=new V7({});t.mount(window),t.setOptions({layoutScroll:!0}),zp.current=t}return zp.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),H7={pan:{Feature:o7},drag:{Feature:a7,ProjectionNode:cE,MeasureLayout:tE}};function c1(t,n,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,o=r[i];o&&He.postRender(()=>o(n,Xc(n)))}class U7 extends gi{mount(){const{current:n}=this.node;n&&(this.unmount=u8(n,(s,r)=>(c1(this.node,r,"Start"),i=>c1(this.node,i,"End"))))}unmount(){}}class W7 extends gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kc(jc(this.node.current,"focus",()=>this.onFocus()),jc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function d1(t,n,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),o=r[i];o&&He.postRender(()=>o(n,Xc(n)))}class q7 extends gi{mount(){const{current:n}=this.node;n&&(this.unmount=m8(n,(s,r)=>(d1(this.node,r,"Start"),(i,{success:o})=>d1(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gg=new WeakMap,Bp=new WeakMap,K7=t=>{const n=Gg.get(t.target);n&&n(t)},G7=t=>{t.forEach(K7)};function Y7({root:t,...n}){const s=t||document;Bp.has(s)||Bp.set(s,{});const r=Bp.get(s),i=JSON.stringify(n);return r[i]||(r[i]=new IntersectionObserver(G7,{root:t,...n})),r[i]}function X7(t,n,s){const r=Y7(n);return Gg.set(t,s),r.observe(t),()=>{Gg.delete(t),r.unobserve(t)}}const J7={some:0,all:1};class Q7 extends gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:o}=n,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:J7[i]},c=d=>{const{isIntersecting:u}=d;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=u?f:h;p&&p(d)};return X7(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(Z7(n,s))&&this.startObserver()}unmount(){}}function Z7({viewport:t={}},{viewport:n={}}={}){return s=>t[s]!==n[s]}const eU={inView:{Feature:Q7},tap:{Feature:q7},focus:{Feature:W7},hover:{Feature:U7}},tU={layout:{ProjectionNode:cE,MeasureLayout:tE}},nU={...zH,...eU,...H7,...tU},Gt=nH(nU,mH);function yh(t,n=250){const[s,r]=g.useState(t);return g.useEffect(()=>{const i=setTimeout(()=>r(t),n);return()=>clearTimeout(i)},[t,n]),s}const ya=(t={})=>I.get("/pharmacy/medicines",{params:t}),sU=t=>I.post("/pharmacy/medicines",t),rU=(t,n)=>I.patch(`/pharmacy/medicines/${t}`,n),iU=t=>I.delete(`/pharmacy/medicines/${t}`),aU=async(t="xlsx")=>{const n=t==="csv"?"/pharmacy/medicines/samples/template.csv":"/pharmacy/medicines/samples/template.xlsx",s=await I.get(n,{responseType:"blob"});return s==null?void 0:s.data},oU=(t,{upsert:n=!0,format:s}={})=>{const r=new FormData;r.append("file",t);const i={upsert:n};return s&&(i.format=s),I.post("/pharmacy/medicines/import",r,{params:i,headers:{"Content-Type":"multipart/form-data"}})},_v=(t={})=>I.get("/pharmacy/suppliers",{params:t}),lU=t=>I.post("/pharmacy/suppliers",t),cU=(t,n)=>I.patch(`/pharmacy/suppliers/${t}`,n),dU=t=>I.delete(`/pharmacy/suppliers/${t}`),Ko=(t={})=>I.get("/pharmacy/locations",{params:t}),uU=t=>I.post("/pharmacy/locations",t),fU=(t,n)=>I.patch(`/pharmacy/locations/${t}`,n),hU=t=>I.delete(`/pharmacy/locations/${t}`),pU=(t={})=>I.get("/pharmacy/inventory/lots",{params:t}),dE=(t={})=>I.get("/pharmacy/inventory/txns",{params:t}),mU=t=>I.post("/pharmacy/inventory/adjust",t),gU=t=>I.post("/pharmacy/inventory/transfer",t),uE=({type:t="low",...n}={})=>t==="expiry"?I.get("/pharmacy/alerts/expiry",{params:n}):I.get("/pharmacy/alerts/low-stock",{params:n}),Ev=(t={})=>I.get("/pharmacy/po",{params:t}),xU=t=>I.post("/pharmacy/po",t),yU=t=>I.post(`/pharmacy/po/${t}/approve`),vU=t=>I.post(`/pharmacy/po/${t}/cancel`),bU=(t={})=>I.get("/pharmacy/grn",{params:t}),wU=t=>I.post("/pharmacy/grn",t),jU=t=>I.post("/pharmacy/dispense",t),NU=t=>I.post("/pharmacy/dispense/return",null,{params:t}),fE=(t={})=>I.get("/pharmacy/prescriptions",{params:t}),SU=(t,n)=>I.post(`/pharmacy/prescriptions/items/${t}/status`,n),u1=(t,n)=>I.post(`/pharmacy/prescriptions/${t}/status`,n),kU=t=>I.post("/pharmacy/prescriptions",t),CU=t=>I.get("/pharmacy/active-context",{params:{patient_id:t}}),_U=async t=>{try{const{data:n}=await I.get("/pharmacy/active-context",{params:{patient_id:t}});return n&&Object.keys(n).length?n:null}catch{return null}};function f1(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function hE(...t){return n=>{let s=!1;const r=t.map(i=>{const o=f1(i,n);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():f1(t[i],null)}}}}function Re(...t){return g.useCallback(hE(...t),t)}function Co(t){const n=TU(t),s=g.forwardRef((r,i)=>{const{children:o,...l}=r,c=g.Children.toArray(o),d=c.find(AU);if(d){const u=d.props.children,f=c.map(h=>h===d?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return a.jsx(n,{...l,ref:i,children:g.isValidElement(u)?g.cloneElement(u,void 0,f):null})}return a.jsx(n,{...l,ref:i,children:o})});return s.displayName=`${t}.Slot`,s}var EU=Co("Slot");function TU(t){const n=g.forwardRef((s,r)=>{const{children:i,...o}=s;if(g.isValidElement(i)){const l=RU(i),c=PU(o,i.props);return i.type!==g.Fragment&&(c.ref=r?hE(r,l):l),g.cloneElement(i,c)}return g.Children.count(i)>1?g.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var MU=Symbol("radix.slottable");function AU(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===MU}function PU(t,n){const s={...n};for(const r in n){const i=t[r],o=n[r];/^on[A-Z]/.test(r)?i&&o?s[r]=(...c)=>{const d=o(...c);return i(...c),d}:i&&(s[r]=i):r==="style"?s[r]={...i,...o}:r==="className"&&(s[r]=[i,o].filter(Boolean).join(" "))}return{...t,...s}}function RU(t){var r,i;let n=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?t.ref:(n=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function pE(t){var n,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(s=pE(t[n]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function mE(){for(var t,n,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(n=pE(t))&&(r&&(r+=" "),r+=n);return r}const h1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,p1=mE,Tv=(t,n)=>s=>{var r;if((n==null?void 0:n.variants)==null)return p1(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:o}=n,l=Object.keys(i).map(u=>{const f=s==null?void 0:s[u],h=o==null?void 0:o[u];if(f===null)return null;const p=h1(f)||h1(h);return i[u][p]}),c=s&&Object.entries(s).reduce((u,f)=>{let[h,p]=f;return p===void 0||(u[h]=p),u},{}),d=n==null||(r=n.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:h,className:p,...m}=f;return Object.entries(m).every(x=>{let[y,v]=x;return Array.isArray(v)?v.includes({...o,...c}[y]):{...o,...c}[y]===v})?[...u,h,p]:u},[]);return p1(t,l,d,s==null?void 0:s.class,s==null?void 0:s.className)},Mv="-",OU=t=>{const n=IU(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const c=l.split(Mv);return c[0]===""&&c.length!==1&&c.shift(),gE(c,n)||DU(l)},getConflictingClassGroupIds:(l,c)=>{const d=s[l]||[];return c&&r[l]?[...d,...r[l]]:d}}},gE=(t,n)=>{var l;if(t.length===0)return n.classGroupId;const s=t[0],r=n.nextPart.get(s),i=r?gE(t.slice(1),r):void 0;if(i)return i;if(n.validators.length===0)return;const o=t.join(Mv);return(l=n.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},m1=/^\[(.+)\]$/,DU=t=>{if(m1.test(t)){const n=m1.exec(t)[1],s=n==null?void 0:n.substring(0,n.indexOf(":"));if(s)return"arbitrary.."+s}},IU=t=>{const{theme:n,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const i in s)Yg(s[i],r,i,n);return r},Yg=(t,n,s,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?n:g1(n,i);o.classGroupId=s;return}if(typeof i=="function"){if(LU(i)){Yg(i(r),n,s,r);return}n.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([o,l])=>{Yg(l,g1(n,o),s,r)})})},g1=(t,n)=>{let s=t;return n.split(Mv).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},LU=t=>t.isThemeGetter,$U=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,s=new Map,r=new Map;const i=(o,l)=>{s.set(o,l),n++,n>t&&(n=0,r=s,s=new Map)};return{get(o){let l=s.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){s.has(o)?s.set(o,l):i(o,l)}}},Xg="!",Jg=":",FU=Jg.length,zU=t=>{const{prefix:n,experimentalParseClassName:s}=t;let r=i=>{const o=[];let l=0,c=0,d=0,u;for(let x=0;x<i.length;x++){let y=i[x];if(l===0&&c===0){if(y===Jg){o.push(i.slice(d,x)),d=x+FU;continue}if(y==="/"){u=x;continue}}y==="["?l++:y==="]"?l--:y==="("?c++:y===")"&&c--}const f=o.length===0?i:i.substring(d),h=BU(f),p=h!==f,m=u&&u>d?u-d:void 0;return{modifiers:o,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:m}};if(n){const i=n+Jg,o=r;r=l=>l.startsWith(i)?o(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(s){const i=r;r=o=>s({className:o,parseClassName:i})}return r},BU=t=>t.endsWith(Xg)?t.substring(0,t.length-1):t.startsWith(Xg)?t.substring(1):t,VU=t=>{const n=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(l=>{l[0]==="["||n[l]?(i.push(...o.sort(),l),o=[]):o.push(l)}),i.push(...o.sort()),i}},HU=t=>({cache:$U(t.cacheSize),parseClassName:zU(t),sortModifiers:VU(t),...OU(t)}),UU=/\s+/,WU=(t,n)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=n,l=[],c=t.trim().split(UU);let d="";for(let u=c.length-1;u>=0;u-=1){const f=c[u],{isExternal:h,modifiers:p,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}=s(f);if(h){d=f+(d.length>0?" "+d:d);continue}let v=!!y,b=r(v?x.substring(0,y):x);if(!b){if(!v){d=f+(d.length>0?" "+d:d);continue}if(b=r(x),!b){d=f+(d.length>0?" "+d:d);continue}v=!1}const w=o(p).join(":"),j=m?w+Xg:w,N=j+b;if(l.includes(N))continue;l.push(N);const S=i(b,v);for(let _=0;_<S.length;++_){const C=S[_];l.push(j+C)}d=f+(d.length>0?" "+d:d)}return d};function qU(){let t=0,n,s,r="";for(;t<arguments.length;)(n=arguments[t++])&&(s=xE(n))&&(r&&(r+=" "),r+=s);return r}const xE=t=>{if(typeof t=="string")return t;let n,s="";for(let r=0;r<t.length;r++)t[r]&&(n=xE(t[r]))&&(s&&(s+=" "),s+=n);return s};function KU(t,...n){let s,r,i,o=l;function l(d){const u=n.reduce((f,h)=>h(f),t());return s=HU(u),r=s.cache.get,i=s.cache.set,o=c,c(d)}function c(d){const u=r(d);if(u)return u;const f=WU(d,s);return i(d,f),f}return function(){return o(qU.apply(null,arguments))}}const mt=t=>{const n=s=>s[t]||[];return n.isThemeGetter=!0,n},yE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,GU=/^\d+\/\d+$/,YU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,QU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ea=t=>GU.test(t),Se=t=>!!t&&!Number.isNaN(Number(t)),kr=t=>!!t&&Number.isInteger(Number(t)),Vp=t=>t.endsWith("%")&&Se(t.slice(0,-1)),Qs=t=>YU.test(t),eW=()=>!0,tW=t=>XU.test(t)&&!JU.test(t),bE=()=>!1,nW=t=>QU.test(t),sW=t=>ZU.test(t),rW=t=>!se(t)&&!re(t),iW=t=>Go(t,NE,bE),se=t=>yE.test(t),_i=t=>Go(t,SE,tW),Hp=t=>Go(t,dW,Se),x1=t=>Go(t,wE,bE),aW=t=>Go(t,jE,sW),Pd=t=>Go(t,kE,nW),re=t=>vE.test(t),gl=t=>Yo(t,SE),oW=t=>Yo(t,uW),y1=t=>Yo(t,wE),lW=t=>Yo(t,NE),cW=t=>Yo(t,jE),Rd=t=>Yo(t,kE,!0),Go=(t,n,s)=>{const r=yE.exec(t);return r?r[1]?n(r[1]):s(r[2]):!1},Yo=(t,n,s=!1)=>{const r=vE.exec(t);return r?r[1]?n(r[1]):s:!1},wE=t=>t==="position"||t==="percentage",jE=t=>t==="image"||t==="url",NE=t=>t==="length"||t==="size"||t==="bg-size",SE=t=>t==="length",dW=t=>t==="number",uW=t=>t==="family-name",kE=t=>t==="shadow",fW=()=>{const t=mt("color"),n=mt("font"),s=mt("text"),r=mt("font-weight"),i=mt("tracking"),o=mt("leading"),l=mt("breakpoint"),c=mt("container"),d=mt("spacing"),u=mt("radius"),f=mt("shadow"),h=mt("inset-shadow"),p=mt("text-shadow"),m=mt("drop-shadow"),x=mt("blur"),y=mt("perspective"),v=mt("aspect"),b=mt("ease"),w=mt("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...N(),re,se],_=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],k=()=>[re,se,d],E=()=>[Ea,"full","auto",...k()],M=()=>[kr,"none","subgrid",re,se],D=()=>["auto",{span:["full",kr,re,se]},kr,re,se],R=()=>[kr,"auto",re,se],T=()=>["auto","min","max","fr",re,se],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...k()],B=()=>[Ea,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],A=()=>[t,re,se],O=()=>[...N(),y1,x1,{position:[re,se]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",lW,iW,{size:[re,se]}],X=()=>[Vp,gl,_i],Q=()=>["","none","full",u,re,se],ie=()=>["",Se,gl,_i],oe=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>[Se,Vp,y1,x1],ae=()=>["","none",x,re,se],Pe=()=>["none",Se,re,se],ke=()=>["none",Se,re,se],Ne=()=>[Se,re,se],xe=()=>[Ea,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qs],breakpoint:[Qs],color:[eW],container:[Qs],"drop-shadow":[Qs],ease:["in","out","in-out"],font:[rW],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qs],shadow:[Qs],spacing:["px",Se],text:[Qs],"text-shadow":[Qs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ea,se,re,v]}],container:["container"],columns:[{columns:[Se,se,re,c]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[kr,"auto",re,se]}],basis:[{basis:[Ea,"full","auto",c,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Se,Ea,"auto","initial","none",se]}],grow:[{grow:["",Se,re,se]}],shrink:[{shrink:["",Se,re,se]}],order:[{order:[kr,"first","last","none",re,se]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[c,"screen",...B()]}],"min-w":[{"min-w":[c,"screen","none",...B()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",s,gl,_i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,re,Hp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Vp,se]}],"font-family":[{font:[oW,se,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,re,se]}],"line-clamp":[{"line-clamp":[Se,"none",re,Hp]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",re,se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",re,se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Se,"from-font","auto",re,_i]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[Se,"auto",re,se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re,se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re,se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:O()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kr,re,se],radial:["",re,se],conic:[kr,re,se]},cW,aW]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Se,re,se]}],"outline-w":[{outline:["",Se,gl,_i]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",f,Rd,Pd]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",h,Rd,Pd]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[Se,_i]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",p,Rd,Pd]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[Se,re,se]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Se]}],"mask-image-linear-from-pos":[{"mask-linear-from":Z()}],"mask-image-linear-to-pos":[{"mask-linear-to":Z()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":Z()}],"mask-image-t-to-pos":[{"mask-t-to":Z()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":Z()}],"mask-image-r-to-pos":[{"mask-r-to":Z()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":Z()}],"mask-image-b-to-pos":[{"mask-b-to":Z()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":Z()}],"mask-image-l-to-pos":[{"mask-l-to":Z()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":Z()}],"mask-image-x-to-pos":[{"mask-x-to":Z()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":Z()}],"mask-image-y-to-pos":[{"mask-y-to":Z()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[re,se]}],"mask-image-radial-from-pos":[{"mask-radial-from":Z()}],"mask-image-radial-to-pos":[{"mask-radial-to":Z()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Se]}],"mask-image-conic-from-pos":[{"mask-conic-from":Z()}],"mask-image-conic-to-pos":[{"mask-conic-to":Z()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:O()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",re,se]}],filter:[{filter:["","none",re,se]}],blur:[{blur:ae()}],brightness:[{brightness:[Se,re,se]}],contrast:[{contrast:[Se,re,se]}],"drop-shadow":[{"drop-shadow":["","none",m,Rd,Pd]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",Se,re,se]}],"hue-rotate":[{"hue-rotate":[Se,re,se]}],invert:[{invert:["",Se,re,se]}],saturate:[{saturate:[Se,re,se]}],sepia:[{sepia:["",Se,re,se]}],"backdrop-filter":[{"backdrop-filter":["","none",re,se]}],"backdrop-blur":[{"backdrop-blur":ae()}],"backdrop-brightness":[{"backdrop-brightness":[Se,re,se]}],"backdrop-contrast":[{"backdrop-contrast":[Se,re,se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Se,re,se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Se,re,se]}],"backdrop-invert":[{"backdrop-invert":["",Se,re,se]}],"backdrop-opacity":[{"backdrop-opacity":[Se,re,se]}],"backdrop-saturate":[{"backdrop-saturate":[Se,re,se]}],"backdrop-sepia":[{"backdrop-sepia":["",Se,re,se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",re,se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Se,"initial",re,se]}],ease:[{ease:["linear","initial",b,re,se]}],delay:[{delay:[Se,re,se]}],animate:[{animate:["none",w,re,se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,re,se]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Pe()}],"rotate-x":[{"rotate-x":Pe()}],"rotate-y":[{"rotate-y":Pe()}],"rotate-z":[{"rotate-z":Pe()}],scale:[{scale:ke()}],"scale-x":[{"scale-x":ke()}],"scale-y":[{"scale-y":ke()}],"scale-z":[{"scale-z":ke()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[re,se,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xe()}],"translate-x":[{"translate-x":xe()}],"translate-y":[{"translate-y":xe()}],"translate-z":[{"translate-z":xe()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re,se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re,se]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[Se,gl,_i,Hp]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},hW=KU(fW);function we(...t){return hW(mE(t))}const pW=Tv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=g.forwardRef(({className:t,variant:n,size:s,asChild:r=!1,...i},o)=>{const l=r?EU:"button";return a.jsx(l,{className:we(pW({variant:n,size:s,className:t})),ref:o,...i})});te.displayName="Button";const Le=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("rounded-xl border bg-card text-card-foreground shadow",t),...n}));Le.displayName="Card";const Wt=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("flex flex-col space-y-1.5 p-6",t),...n}));Wt.displayName="CardHeader";const qt=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("font-semibold leading-none tracking-tight",t),...n}));qt.displayName="CardTitle";const mW=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("text-sm text-muted-foreground",t),...n}));mW.displayName="CardDescription";const Ue=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("p-6 pt-0",t),...n}));Ue.displayName="CardContent";const gW=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{ref:s,className:we("flex items-center p-6 pt-0",t),...n}));gW.displayName="CardFooter";const ue=g.forwardRef(({className:t,type:n,...s},r)=>a.jsx("input",{type:n,className:we("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));ue.displayName="Input";var xW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ve=xW.reduce((t,n)=>{const s=Co(`Primitive.${n}`),r=g.forwardRef((i,o)=>{const{asChild:l,...c}=i,d=l?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${n}`,{...t,[n]:r}},{});function yW(t,n){t&&$o.flushSync(()=>t.dispatchEvent(n))}var vW="Label",CE=g.forwardRef((t,n)=>a.jsx(ve.label,{...t,ref:n,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));CE.displayName=vW;var _E=CE;const bW=Tv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=g.forwardRef(({className:t,...n},s)=>a.jsx(_E,{ref:s,className:we(bW(),t),...n}));J.displayName=_E.displayName;function Qg(t,[n,s]){return Math.min(s,Math.max(n,t))}function ge(t,n,{checkForDefaultPrevented:s=!0}={}){return function(i){if(t==null||t(i),s===!1||!i.defaultPrevented)return n==null?void 0:n(i)}}function wW(t,n){const s=g.createContext(n),r=o=>{const{children:l,...c}=o,d=g.useMemo(()=>c,Object.values(c));return a.jsx(s.Provider,{value:d,children:l})};r.displayName=t+"Provider";function i(o){const l=g.useContext(s);if(l)return l;if(n!==void 0)return n;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function xi(t,n=[]){let s=[];function r(o,l){const c=g.createContext(l),d=s.length;s=[...s,l];const u=h=>{var b;const{scope:p,children:m,...x}=h,y=((b=p==null?void 0:p[t])==null?void 0:b[d])||c,v=g.useMemo(()=>x,Object.values(x));return a.jsx(y.Provider,{value:v,children:m})};u.displayName=o+"Provider";function f(h,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[d])||c,x=g.useContext(m);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,f]}const i=()=>{const o=s.map(l=>g.createContext(l));return function(c){const d=(c==null?void 0:c[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return i.scopeName=t,[r,jW(i,...n)]}function jW(...t){const n=t[0];if(t.length===1)return n;const s=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=r.reduce((c,{useScope:d,scopeName:u})=>{const h=d(o)[`__scope${u}`];return{...c,...h}},{});return g.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return s.scopeName=n.scopeName,s}function EE(t){const n=t+"CollectionProvider",[s,r]=xi(n),[i,o]=s(n,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:v,children:b}=y,w=G.useRef(null),j=G.useRef(new Map).current;return a.jsx(i,{scope:v,itemMap:j,collectionRef:w,children:b})};l.displayName=n;const c=t+"CollectionSlot",d=Co(c),u=G.forwardRef((y,v)=>{const{scope:b,children:w}=y,j=o(c,b),N=Re(v,j.collectionRef);return a.jsx(d,{ref:N,children:w})});u.displayName=c;const f=t+"CollectionItemSlot",h="data-radix-collection-item",p=Co(f),m=G.forwardRef((y,v)=>{const{scope:b,children:w,...j}=y,N=G.useRef(null),S=Re(v,N),_=o(f,b);return G.useEffect(()=>(_.itemMap.set(N,{ref:N,...j}),()=>void _.itemMap.delete(N))),a.jsx(p,{[h]:"",ref:S,children:w})});m.displayName=f;function x(y){const v=o(t+"CollectionConsumer",y);return G.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const j=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((_,C)=>j.indexOf(_.ref.current)-j.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:l,Slot:u,ItemSlot:m},x,r]}var NW=g.createContext(void 0);function vh(t){const n=g.useContext(NW);return t||n||"ltr"}function nn(t){const n=g.useRef(t);return g.useEffect(()=>{n.current=t}),g.useMemo(()=>(...s)=>{var r;return(r=n.current)==null?void 0:r.call(n,...s)},[])}function SW(t,n=globalThis==null?void 0:globalThis.document){const s=nn(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return n.addEventListener("keydown",r,{capture:!0}),()=>n.removeEventListener("keydown",r,{capture:!0})},[s,n])}var kW="DismissableLayer",Zg="dismissableLayer.update",CW="dismissableLayer.pointerDownOutside",_W="dismissableLayer.focusOutside",v1,TE=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Av=g.forwardRef((t,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=t,u=g.useContext(TE),[f,h]=g.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),x=Re(n,C=>h(C)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=f?y.indexOf(f):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,N=w>=b,S=MW(C=>{const k=C.target,E=[...u.branches].some(M=>M.contains(k));!N||E||(i==null||i(C),l==null||l(C),C.defaultPrevented||c==null||c())},p),_=AW(C=>{const k=C.target;[...u.branches].some(M=>M.contains(k))||(o==null||o(C),l==null||l(C),C.defaultPrevented||c==null||c())},p);return SW(C=>{w===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},p),g.useEffect(()=>{if(f)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(v1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),b1(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=v1)}},[f,p,s,u]),g.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),b1())},[f,u]),g.useEffect(()=>{const C=()=>m({});return document.addEventListener(Zg,C),()=>document.removeEventListener(Zg,C)},[]),a.jsx(ve.div,{...d,ref:x,style:{pointerEvents:j?N?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,_.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,S.onPointerDownCapture)})});Av.displayName=kW;var EW="DismissableLayerBranch",TW=g.forwardRef((t,n)=>{const s=g.useContext(TE),r=g.useRef(null),i=Re(n,r);return g.useEffect(()=>{const o=r.current;if(o)return s.branches.add(o),()=>{s.branches.delete(o)}},[s.branches]),a.jsx(ve.div,{...t,ref:i})});TW.displayName=EW;function MW(t,n=globalThis==null?void 0:globalThis.document){const s=nn(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let d=function(){ME(CW,s,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",i.current),i.current=d,n.addEventListener("click",i.current,{once:!0})):d()}else n.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",o),n.removeEventListener("click",i.current)}},[n,s]),{onPointerDownCapture:()=>r.current=!0}}function AW(t,n=globalThis==null?void 0:globalThis.document){const s=nn(t),r=g.useRef(!1);return g.useEffect(()=>{const i=o=>{o.target&&!r.current&&ME(_W,s,{originalEvent:o},{discrete:!1})};return n.addEventListener("focusin",i),()=>n.removeEventListener("focusin",i)},[n,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function b1(){const t=new CustomEvent(Zg);document.dispatchEvent(t)}function ME(t,n,s,{discrete:r}){const i=s.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});n&&i.addEventListener(t,n,{once:!0}),r?yW(i,o):i.dispatchEvent(o)}var Up=0;function AE(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??w1()),document.body.insertAdjacentElement("beforeend",t[1]??w1()),Up++,()=>{Up===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Up--}},[])}function w1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Wp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",j1={bubbles:!1,cancelable:!0},PW="FocusScope",Pv=g.forwardRef((t,n)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=t,[c,d]=g.useState(null),u=nn(i),f=nn(o),h=g.useRef(null),p=Re(n,y=>d(y)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(j){if(m.paused||!c)return;const N=j.target;c.contains(N)?h.current=N:Er(h.current,{select:!0})},v=function(j){if(m.paused||!c)return;const N=j.relatedTarget;N!==null&&(c.contains(N)||Er(h.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const S of j)S.removedNodes.length>0&&Er(c)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const w=new MutationObserver(b);return c&&w.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),w.disconnect()}}},[r,c,m.paused]),g.useEffect(()=>{if(c){S1.add(m);const y=document.activeElement;if(!c.contains(y)){const b=new CustomEvent(Wp,j1);c.addEventListener(Wp,u),c.dispatchEvent(b),b.defaultPrevented||(RW($W(PE(c)),{select:!0}),document.activeElement===y&&Er(c))}return()=>{c.removeEventListener(Wp,u),setTimeout(()=>{const b=new CustomEvent(qp,j1);c.addEventListener(qp,f),c.dispatchEvent(b),b.defaultPrevented||Er(y??document.body,{select:!0}),c.removeEventListener(qp,f),S1.remove(m)},0)}}},[c,u,f,m]);const x=g.useCallback(y=>{if(!s&&!r||m.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(v&&b){const w=y.currentTarget,[j,N]=OW(w);j&&N?!y.shiftKey&&b===N?(y.preventDefault(),s&&Er(j,{select:!0})):y.shiftKey&&b===j&&(y.preventDefault(),s&&Er(N,{select:!0})):b===w&&y.preventDefault()}},[s,r,m.paused]);return a.jsx(ve.div,{tabIndex:-1,...l,ref:p,onKeyDown:x})});Pv.displayName=PW;function RW(t,{select:n=!1}={}){const s=document.activeElement;for(const r of t)if(Er(r,{select:n}),document.activeElement!==s)return}function OW(t){const n=PE(t),s=N1(n,t),r=N1(n.reverse(),t);return[s,r]}function PE(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function N1(t,n){for(const s of t)if(!DW(s,{upTo:n}))return s}function DW(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function IW(t){return t instanceof HTMLInputElement&&"select"in t}function Er(t,{select:n=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&IW(t)&&n&&t.select()}}var S1=LW();function LW(){let t=[];return{add(n){const s=t[0];n!==s&&(s==null||s.pause()),t=k1(t,n),t.unshift(n)},remove(n){var s;t=k1(t,n),(s=t[0])==null||s.resume()}}}function k1(t,n){const s=[...t],r=s.indexOf(n);return r!==-1&&s.splice(r,1),s}function $W(t){return t.filter(n=>n.tagName!=="A")}var Dt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},FW=$x[" useId ".trim().toString()]||(()=>{}),zW=0;function Jr(t){const[n,s]=g.useState(FW());return Dt(()=>{s(r=>r??String(zW++))},[t]),n?`radix-${n}`:""}const BW=["top","right","bottom","left"],ci=Math.min,Cn=Math.max,uf=Math.round,Od=Math.floor,Fs=t=>({x:t,y:t}),VW={left:"right",right:"left",bottom:"top",top:"bottom"},HW={start:"end",end:"start"};function ex(t,n,s){return Cn(t,ci(n,s))}function pr(t,n){return typeof t=="function"?t(n):t}function mr(t){return t.split("-")[0]}function Xo(t){return t.split("-")[1]}function Rv(t){return t==="x"?"y":"x"}function Ov(t){return t==="y"?"height":"width"}const UW=new Set(["top","bottom"]);function Os(t){return UW.has(mr(t))?"y":"x"}function Dv(t){return Rv(Os(t))}function WW(t,n,s){s===void 0&&(s=!1);const r=Xo(t),i=Dv(t),o=Ov(i);let l=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[o]>n.floating[o]&&(l=ff(l)),[l,ff(l)]}function qW(t){const n=ff(t);return[tx(t),n,tx(n)]}function tx(t){return t.replace(/start|end/g,n=>HW[n])}const C1=["left","right"],_1=["right","left"],KW=["top","bottom"],GW=["bottom","top"];function YW(t,n,s){switch(t){case"top":case"bottom":return s?n?_1:C1:n?C1:_1;case"left":case"right":return n?KW:GW;default:return[]}}function XW(t,n,s,r){const i=Xo(t);let o=YW(mr(t),s==="start",r);return i&&(o=o.map(l=>l+"-"+i),n&&(o=o.concat(o.map(tx)))),o}function ff(t){return t.replace(/left|right|bottom|top/g,n=>VW[n])}function JW(t){return{top:0,right:0,bottom:0,left:0,...t}}function RE(t){return typeof t!="number"?JW(t):{top:t,right:t,bottom:t,left:t}}function hf(t){const{x:n,y:s,width:r,height:i}=t;return{width:r,height:i,top:s,left:n,right:n+r,bottom:s+i,x:n,y:s}}function E1(t,n,s){let{reference:r,floating:i}=t;const o=Os(n),l=Dv(n),c=Ov(l),d=mr(n),u=o==="y",f=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[c]/2-i[c]/2;let m;switch(d){case"top":m={x:f,y:r.y-i.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Xo(n)){case"start":m[l]-=p*(s&&u?-1:1);break;case"end":m[l]+=p*(s&&u?-1:1);break}return m}const QW=async(t,n,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=s,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(n));let u=await l.getElementRects({reference:t,floating:n,strategy:i}),{x:f,y:h}=E1(u,r,d),p=r,m={},x=0;for(let y=0;y<c.length;y++){const{name:v,fn:b}=c[y],{x:w,y:j,data:N,reset:S}=await b({x:f,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:l,elements:{reference:t,floating:n}});f=w??f,h=j??h,m={...m,[v]:{...m[v],...N}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await l.getElementRects({reference:t,floating:n,strategy:i}):S.rects),{x:f,y:h}=E1(u,p,d)),y=-1)}return{x:f,y:h,placement:p,strategy:i,middlewareData:m}};async function Nc(t,n){var s;n===void 0&&(n={});const{x:r,y:i,platform:o,rects:l,elements:c,strategy:d}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=pr(n,t),x=RE(m),v=c[p?h==="floating"?"reference":"floating":h],b=hf(await o.getClippingRect({element:(s=await(o.isElement==null?void 0:o.isElement(v)))==null||s?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:u,rootBoundary:f,strategy:d})),w=h==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),N=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},S=hf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:w,offsetParent:j,strategy:d}):w);return{top:(b.top-S.top+x.top)/N.y,bottom:(S.bottom-b.bottom+x.bottom)/N.y,left:(b.left-S.left+x.left)/N.x,right:(S.right-b.right+x.right)/N.x}}const ZW=t=>({name:"arrow",options:t,async fn(n){const{x:s,y:r,placement:i,rects:o,platform:l,elements:c,middlewareData:d}=n,{element:u,padding:f=0}=pr(t,n)||{};if(u==null)return{};const h=RE(f),p={x:s,y:r},m=Dv(i),x=Ov(m),y=await l.getDimensions(u),v=m==="y",b=v?"top":"left",w=v?"bottom":"right",j=v?"clientHeight":"clientWidth",N=o.reference[x]+o.reference[m]-p[m]-o.floating[x],S=p[m]-o.reference[m],_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let C=_?_[j]:0;(!C||!await(l.isElement==null?void 0:l.isElement(_)))&&(C=c.floating[j]||o.floating[x]);const k=N/2-S/2,E=C/2-y[x]/2-1,M=ci(h[b],E),D=ci(h[w],E),R=M,T=C-y[x]-D,P=C/2-y[x]/2+k,L=ex(R,P,T),F=!d.arrow&&Xo(i)!=null&&P!==L&&o.reference[x]/2-(P<R?M:D)-y[x]/2<0,B=F?P<R?P-R:P-T:0;return{[m]:p[m]+B,data:{[m]:L,centerOffset:P-L-B,...F&&{alignmentOffset:B}},reset:F}}}),e9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var s,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:u}=n,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...v}=pr(t,n);if((s=o.arrow)!=null&&s.alignmentOffset)return{};const b=mr(i),w=Os(c),j=mr(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(u.floating)),S=p||(j||!y?[ff(c)]:qW(c)),_=x!=="none";!p&&_&&S.push(...XW(c,y,x,N));const C=[c,...S],k=await Nc(n,v),E=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&E.push(k[b]),h){const P=WW(i,l,N);E.push(k[P[0]],k[P[1]])}if(M=[...M,{placement:i,overflows:E}],!E.every(P=>P<=0)){var D,R;const P=(((D=o.flip)==null?void 0:D.index)||0)+1,L=C[P];if(L&&(!(h==="alignment"?w!==Os(L):!1)||M.every(A=>Os(A.placement)===w?A.overflows[0]>0:!0)))return{data:{index:P,overflows:M},reset:{placement:L}};let F=(R=M.filter(B=>B.overflows[0]<=0).sort((B,A)=>B.overflows[1]-A.overflows[1])[0])==null?void 0:R.placement;if(!F)switch(m){case"bestFit":{var T;const B=(T=M.filter(A=>{if(_){const O=Os(A.placement);return O===w||O==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(O=>O>0).reduce((O,z)=>O+z,0)]).sort((A,O)=>A[1]-O[1])[0])==null?void 0:T[0];B&&(F=B);break}case"initialPlacement":F=c;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function T1(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function M1(t){return BW.some(n=>t[n]>=0)}const t9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:s}=n,{strategy:r="referenceHidden",...i}=pr(t,n);switch(r){case"referenceHidden":{const o=await Nc(n,{...i,elementContext:"reference"}),l=T1(o,s.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:M1(l)}}}case"escaped":{const o=await Nc(n,{...i,altBoundary:!0}),l=T1(o,s.floating);return{data:{escapedOffsets:l,escaped:M1(l)}}}default:return{}}}}},OE=new Set(["left","top"]);async function n9(t,n){const{placement:s,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=mr(s),c=Xo(s),d=Os(s)==="y",u=OE.has(l)?-1:1,f=o&&d?-1:1,h=pr(n,t);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof x=="number"&&(m=c==="end"?x*-1:x),d?{x:m*f,y:p*u}:{x:p*u,y:m*f}}const s9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var s,r;const{x:i,y:o,placement:l,middlewareData:c}=n,d=await n9(n,t);return l===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:o+d.y,data:{...d,placement:l}}}}},r9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:s,y:r,placement:i}=n,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...d}=pr(t,n),u={x:s,y:r},f=await Nc(n,d),h=Os(mr(i)),p=Rv(h);let m=u[p],x=u[h];if(o){const v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=m+f[v],j=m-f[b];m=ex(w,m,j)}if(l){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=x+f[v],j=x-f[b];x=ex(w,x,j)}const y=c.fn({...n,[p]:m,[h]:x});return{...y,data:{x:y.x-s,y:y.y-r,enabled:{[p]:o,[h]:l}}}}}},i9=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:s,y:r,placement:i,rects:o,middlewareData:l}=n,{offset:c=0,mainAxis:d=!0,crossAxis:u=!0}=pr(t,n),f={x:s,y:r},h=Os(i),p=Rv(h);let m=f[p],x=f[h];const y=pr(c,n),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(d){const j=p==="y"?"height":"width",N=o.reference[p]-o.floating[j]+v.mainAxis,S=o.reference[p]+o.reference[j]-v.mainAxis;m<N?m=N:m>S&&(m=S)}if(u){var b,w;const j=p==="y"?"width":"height",N=OE.has(mr(i)),S=o.reference[h]-o.floating[j]+(N&&((b=l.offset)==null?void 0:b[h])||0)+(N?0:v.crossAxis),_=o.reference[h]+o.reference[j]+(N?0:((w=l.offset)==null?void 0:w[h])||0)-(N?v.crossAxis:0);x<S?x=S:x>_&&(x=_)}return{[p]:m,[h]:x}}}},a9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var s,r;const{placement:i,rects:o,platform:l,elements:c}=n,{apply:d=()=>{},...u}=pr(t,n),f=await Nc(n,u),h=mr(i),p=Xo(i),m=Os(i)==="y",{width:x,height:y}=o.floating;let v,b;h==="top"||h==="bottom"?(v=h,b=p===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(b=h,v=p==="end"?"top":"bottom");const w=y-f.top-f.bottom,j=x-f.left-f.right,N=ci(y-f[v],w),S=ci(x-f[b],j),_=!n.middlewareData.shift;let C=N,k=S;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(k=j),(r=n.middlewareData.shift)!=null&&r.enabled.y&&(C=w),_&&!p){const M=Cn(f.left,0),D=Cn(f.right,0),R=Cn(f.top,0),T=Cn(f.bottom,0);m?k=x-2*(M!==0||D!==0?M+D:Cn(f.left,f.right)):C=y-2*(R!==0||T!==0?R+T:Cn(f.top,f.bottom))}await d({...n,availableWidth:k,availableHeight:C});const E=await l.getDimensions(c.floating);return x!==E.width||y!==E.height?{reset:{rects:!0}}:{}}}};function bh(){return typeof window<"u"}function Jo(t){return DE(t)?(t.nodeName||"").toLowerCase():"#document"}function Pn(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function qs(t){var n;return(n=(DE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function DE(t){return bh()?t instanceof Node||t instanceof Pn(t).Node:!1}function gs(t){return bh()?t instanceof Element||t instanceof Pn(t).Element:!1}function Vs(t){return bh()?t instanceof HTMLElement||t instanceof Pn(t).HTMLElement:!1}function A1(t){return!bh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pn(t).ShadowRoot}const o9=new Set(["inline","contents"]);function Jc(t){const{overflow:n,overflowX:s,overflowY:r,display:i}=xs(t);return/auto|scroll|overlay|hidden|clip/.test(n+r+s)&&!o9.has(i)}const l9=new Set(["table","td","th"]);function c9(t){return l9.has(Jo(t))}const d9=[":popover-open",":modal"];function wh(t){return d9.some(n=>{try{return t.matches(n)}catch{return!1}})}const u9=["transform","translate","scale","rotate","perspective"],f9=["transform","translate","scale","rotate","perspective","filter"],h9=["paint","layout","strict","content"];function Iv(t){const n=Lv(),s=gs(t)?xs(t):t;return u9.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!n&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!n&&(s.filter?s.filter!=="none":!1)||f9.some(r=>(s.willChange||"").includes(r))||h9.some(r=>(s.contain||"").includes(r))}function p9(t){let n=di(t);for(;Vs(n)&&!_o(n);){if(Iv(n))return n;if(wh(n))return null;n=di(n)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const m9=new Set(["html","body","#document"]);function _o(t){return m9.has(Jo(t))}function xs(t){return Pn(t).getComputedStyle(t)}function jh(t){return gs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function di(t){if(Jo(t)==="html")return t;const n=t.assignedSlot||t.parentNode||A1(t)&&t.host||qs(t);return A1(n)?n.host:n}function IE(t){const n=di(t);return _o(n)?t.ownerDocument?t.ownerDocument.body:t.body:Vs(n)&&Jc(n)?n:IE(n)}function Sc(t,n,s){var r;n===void 0&&(n=[]),s===void 0&&(s=!0);const i=IE(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=Pn(i);if(o){const c=nx(l);return n.concat(l,l.visualViewport||[],Jc(i)?i:[],c&&s?Sc(c):[])}return n.concat(i,Sc(i,[],s))}function nx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function LE(t){const n=xs(t);let s=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const i=Vs(t),o=i?t.offsetWidth:s,l=i?t.offsetHeight:r,c=uf(s)!==o||uf(r)!==l;return c&&(s=o,r=l),{width:s,height:r,$:c}}function $v(t){return gs(t)?t:t.contextElement}function lo(t){const n=$v(t);if(!Vs(n))return Fs(1);const s=n.getBoundingClientRect(),{width:r,height:i,$:o}=LE(n);let l=(o?uf(s.width):s.width)/r,c=(o?uf(s.height):s.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const g9=Fs(0);function $E(t){const n=Pn(t);return!Lv()||!n.visualViewport?g9:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function x9(t,n,s){return n===void 0&&(n=!1),!s||n&&s!==Pn(t)?!1:n}function sa(t,n,s,r){n===void 0&&(n=!1),s===void 0&&(s=!1);const i=t.getBoundingClientRect(),o=$v(t);let l=Fs(1);n&&(r?gs(r)&&(l=lo(r)):l=lo(t));const c=x9(o,s,r)?$E(o):Fs(0);let d=(i.left+c.x)/l.x,u=(i.top+c.y)/l.y,f=i.width/l.x,h=i.height/l.y;if(o){const p=Pn(o),m=r&&gs(r)?Pn(r):r;let x=p,y=nx(x);for(;y&&r&&m!==x;){const v=lo(y),b=y.getBoundingClientRect(),w=xs(y),j=b.left+(y.clientLeft+parseFloat(w.paddingLeft))*v.x,N=b.top+(y.clientTop+parseFloat(w.paddingTop))*v.y;d*=v.x,u*=v.y,f*=v.x,h*=v.y,d+=j,u+=N,x=Pn(y),y=nx(x)}}return hf({width:f,height:h,x:d,y:u})}function Nh(t,n){const s=jh(t).scrollLeft;return n?n.left+s:sa(qs(t)).left+s}function FE(t,n){const s=t.getBoundingClientRect(),r=s.left+n.scrollLeft-Nh(t,s),i=s.top+n.scrollTop;return{x:r,y:i}}function y9(t){let{elements:n,rect:s,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=qs(r),c=n?wh(n.floating):!1;if(r===l||c&&o)return s;let d={scrollLeft:0,scrollTop:0},u=Fs(1);const f=Fs(0),h=Vs(r);if((h||!h&&!o)&&((Jo(r)!=="body"||Jc(l))&&(d=jh(r)),Vs(r))){const m=sa(r);u=lo(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const p=l&&!h&&!o?FE(l,d):Fs(0);return{width:s.width*u.x,height:s.height*u.y,x:s.x*u.x-d.scrollLeft*u.x+f.x+p.x,y:s.y*u.y-d.scrollTop*u.y+f.y+p.y}}function v9(t){return Array.from(t.getClientRects())}function b9(t){const n=qs(t),s=jh(t),r=t.ownerDocument.body,i=Cn(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),o=Cn(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let l=-s.scrollLeft+Nh(t);const c=-s.scrollTop;return xs(r).direction==="rtl"&&(l+=Cn(n.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:c}}const P1=25;function w9(t,n){const s=Pn(t),r=qs(t),i=s.visualViewport;let o=r.clientWidth,l=r.clientHeight,c=0,d=0;if(i){o=i.width,l=i.height;const f=Lv();(!f||f&&n==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}const u=Nh(r);if(u<=0){const f=r.ownerDocument,h=f.body,p=getComputedStyle(h),m=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,x=Math.abs(r.clientWidth-h.clientWidth-m);x<=P1&&(o-=x)}else u<=P1&&(o+=u);return{width:o,height:l,x:c,y:d}}const j9=new Set(["absolute","fixed"]);function N9(t,n){const s=sa(t,!0,n==="fixed"),r=s.top+t.clientTop,i=s.left+t.clientLeft,o=Vs(t)?lo(t):Fs(1),l=t.clientWidth*o.x,c=t.clientHeight*o.y,d=i*o.x,u=r*o.y;return{width:l,height:c,x:d,y:u}}function R1(t,n,s){let r;if(n==="viewport")r=w9(t,s);else if(n==="document")r=b9(qs(t));else if(gs(n))r=N9(n,s);else{const i=$E(t);r={x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}return hf(r)}function zE(t,n){const s=di(t);return s===n||!gs(s)||_o(s)?!1:xs(s).position==="fixed"||zE(s,n)}function S9(t,n){const s=n.get(t);if(s)return s;let r=Sc(t,[],!1).filter(c=>gs(c)&&Jo(c)!=="body"),i=null;const o=xs(t).position==="fixed";let l=o?di(t):t;for(;gs(l)&&!_o(l);){const c=xs(l),d=Iv(l);!d&&c.position==="fixed"&&(i=null),(o?!d&&!i:!d&&c.position==="static"&&!!i&&j9.has(i.position)||Jc(l)&&!d&&zE(t,l))?r=r.filter(f=>f!==l):i=c,l=di(l)}return n.set(t,r),r}function k9(t){let{element:n,boundary:s,rootBoundary:r,strategy:i}=t;const l=[...s==="clippingAncestors"?wh(n)?[]:S9(n,this._c):[].concat(s),r],c=l[0],d=l.reduce((u,f)=>{const h=R1(n,f,i);return u.top=Cn(h.top,u.top),u.right=ci(h.right,u.right),u.bottom=ci(h.bottom,u.bottom),u.left=Cn(h.left,u.left),u},R1(n,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function C9(t){const{width:n,height:s}=LE(t);return{width:n,height:s}}function _9(t,n,s){const r=Vs(n),i=qs(n),o=s==="fixed",l=sa(t,!0,o,n);let c={scrollLeft:0,scrollTop:0};const d=Fs(0);function u(){d.x=Nh(i)}if(r||!r&&!o)if((Jo(n)!=="body"||Jc(i))&&(c=jh(n)),r){const m=sa(n,!0,o,n);d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}else i&&u();o&&!r&&i&&u();const f=i&&!r&&!o?FE(i,c):Fs(0),h=l.left+c.scrollLeft-d.x-f.x,p=l.top+c.scrollTop-d.y-f.y;return{x:h,y:p,width:l.width,height:l.height}}function Kp(t){return xs(t).position==="static"}function O1(t,n){if(!Vs(t)||xs(t).position==="fixed")return null;if(n)return n(t);let s=t.offsetParent;return qs(t)===s&&(s=s.ownerDocument.body),s}function BE(t,n){const s=Pn(t);if(wh(t))return s;if(!Vs(t)){let i=di(t);for(;i&&!_o(i);){if(gs(i)&&!Kp(i))return i;i=di(i)}return s}let r=O1(t,n);for(;r&&c9(r)&&Kp(r);)r=O1(r,n);return r&&_o(r)&&Kp(r)&&!Iv(r)?s:r||p9(t)||s}const E9=async function(t){const n=this.getOffsetParent||BE,s=this.getDimensions,r=await s(t.floating);return{reference:_9(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function T9(t){return xs(t).direction==="rtl"}const M9={convertOffsetParentRelativeRectToViewportRelativeRect:y9,getDocumentElement:qs,getClippingRect:k9,getOffsetParent:BE,getElementRects:E9,getClientRects:v9,getDimensions:C9,getScale:lo,isElement:gs,isRTL:T9};function VE(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function A9(t,n){let s=null,r;const i=qs(t);function o(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const u=t.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=u;if(c||n(),!p||!m)return;const x=Od(h),y=Od(i.clientWidth-(f+p)),v=Od(i.clientHeight-(h+m)),b=Od(f),j={rootMargin:-x+"px "+-y+"px "+-v+"px "+-b+"px",threshold:Cn(0,ci(1,d))||1};let N=!0;function S(_){const C=_[0].intersectionRatio;if(C!==d){if(!N)return l();C?l(!1,C):r=setTimeout(()=>{l(!1,1e-7)},1e3)}C===1&&!VE(u,t.getBoundingClientRect())&&l(),N=!1}try{s=new IntersectionObserver(S,{...j,root:i.ownerDocument})}catch{s=new IntersectionObserver(S,j)}s.observe(t)}return l(!0),o}function P9(t,n,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,u=$v(t),f=i||o?[...u?Sc(u):[],...Sc(n)]:[];f.forEach(b=>{i&&b.addEventListener("scroll",s,{passive:!0}),o&&b.addEventListener("resize",s)});const h=u&&c?A9(u,s):null;let p=-1,m=null;l&&(m=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&m&&(m.unobserve(n),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(n)})),s()}),u&&!d&&m.observe(u),m.observe(n));let x,y=d?sa(t):null;d&&v();function v(){const b=sa(t);y&&!VE(y,b)&&s(),y=b,x=requestAnimationFrame(v)}return s(),()=>{var b;f.forEach(w=>{i&&w.removeEventListener("scroll",s),o&&w.removeEventListener("resize",s)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,d&&cancelAnimationFrame(x)}}const R9=s9,O9=r9,D9=e9,I9=a9,L9=t9,D1=ZW,$9=i9,F9=(t,n,s)=>{const r=new Map,i={platform:M9,...s},o={...i.platform,_c:r};return QW(t,n,{...i,platform:o})};var z9=typeof document<"u",B9=function(){},yu=z9?g.useLayoutEffect:B9;function pf(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let s,r,i;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==n.length)return!1;for(r=s;r--!==0;)if(!pf(t[r],n[r]))return!1;return!0}if(i=Object.keys(t),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!pf(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}function HE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function I1(t,n){const s=HE(t);return Math.round(n*s)/s}function Gp(t){const n=g.useRef(t);return yu(()=>{n.current=t}),n}function V9(t){t===void 0&&(t={});const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:u}=t,[f,h]=g.useState({x:0,y:0,strategy:s,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=g.useState(r);pf(p,r)||m(r);const[x,y]=g.useState(null),[v,b]=g.useState(null),w=g.useCallback(A=>{A!==_.current&&(_.current=A,y(A))},[]),j=g.useCallback(A=>{A!==C.current&&(C.current=A,b(A))},[]),N=o||x,S=l||v,_=g.useRef(null),C=g.useRef(null),k=g.useRef(f),E=d!=null,M=Gp(d),D=Gp(i),R=Gp(u),T=g.useCallback(()=>{if(!_.current||!C.current)return;const A={placement:n,strategy:s,middleware:p};D.current&&(A.platform=D.current),F9(_.current,C.current,A).then(O=>{const z={...O,isPositioned:R.current!==!1};P.current&&!pf(k.current,z)&&(k.current=z,$o.flushSync(()=>{h(z)}))})},[p,n,s,D,R]);yu(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[u]);const P=g.useRef(!1);yu(()=>(P.current=!0,()=>{P.current=!1}),[]),yu(()=>{if(N&&(_.current=N),S&&(C.current=S),N&&S){if(M.current)return M.current(N,S,T);T()}},[N,S,T,M,E]);const L=g.useMemo(()=>({reference:_,floating:C,setReference:w,setFloating:j}),[w,j]),F=g.useMemo(()=>({reference:N,floating:S}),[N,S]),B=g.useMemo(()=>{const A={position:s,left:0,top:0};if(!F.floating)return A;const O=I1(F.floating,f.x),z=I1(F.floating,f.y);return c?{...A,transform:"translate("+O+"px, "+z+"px)",...HE(F.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:O,top:z}},[s,c,F.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:T,refs:L,elements:F,floatingStyles:B}),[f,T,L,F,B])}const H9=t=>{function n(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:i}=typeof t=="function"?t(s):t;return r&&n(r)?r.current!=null?D1({element:r.current,padding:i}).fn(s):{}:r?D1({element:r,padding:i}).fn(s):{}}}},U9=(t,n)=>({...R9(t),options:[t,n]}),W9=(t,n)=>({...O9(t),options:[t,n]}),q9=(t,n)=>({...$9(t),options:[t,n]}),K9=(t,n)=>({...D9(t),options:[t,n]}),G9=(t,n)=>({...I9(t),options:[t,n]}),Y9=(t,n)=>({...L9(t),options:[t,n]}),X9=(t,n)=>({...H9(t),options:[t,n]});var J9="Arrow",UE=g.forwardRef((t,n)=>{const{children:s,width:r=10,height:i=5,...o}=t;return a.jsx(ve.svg,{...o,ref:n,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});UE.displayName=J9;var Q9=UE;function WE(t){const[n,s]=g.useState(void 0);return Dt(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,u=Array.isArray(d)?d[0]:d;l=u.inlineSize,c=u.blockSize}else l=t.offsetWidth,c=t.offsetHeight;s({width:l,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),n}var Fv="Popper",[qE,KE]=xi(Fv),[Z9,GE]=qE(Fv),YE=t=>{const{__scopePopper:n,children:s}=t,[r,i]=g.useState(null);return a.jsx(Z9,{scope:n,anchor:r,onAnchorChange:i,children:s})};YE.displayName=Fv;var XE="PopperAnchor",JE=g.forwardRef((t,n)=>{const{__scopePopper:s,virtualRef:r,...i}=t,o=GE(XE,s),l=g.useRef(null),c=Re(n,l),d=g.useRef(null);return g.useEffect(()=>{const u=d.current;d.current=(r==null?void 0:r.current)||l.current,u!==d.current&&o.onAnchorChange(d.current)}),r?null:a.jsx(ve.div,{...i,ref:c})});JE.displayName=XE;var zv="PopperContent",[eq,tq]=qE(zv),QE=g.forwardRef((t,n)=>{var Z,ae,Pe,ke,Ne,xe;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...y}=t,v=GE(zv,s),[b,w]=g.useState(null),j=Re(n,jt=>w(jt)),[N,S]=g.useState(null),_=WE(N),C=(_==null?void 0:_.width)??0,k=(_==null?void 0:_.height)??0,E=r+(o!=="center"?"-"+o:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],R=D.length>0,T={padding:M,boundary:D.filter(sq),altBoundary:R},{refs:P,floatingStyles:L,placement:F,isPositioned:B,middlewareData:A}=V9({strategy:"fixed",placement:E,whileElementsMounted:(...jt)=>P9(...jt,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[U9({mainAxis:i+k,alignmentAxis:l}),d&&W9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?q9():void 0,...T}),d&&K9({...T}),G9({...T,apply:({elements:jt,rects:_t,availableWidth:q,availableHeight:Ee})=>{const{width:_e,height:Lt}=_t.reference,nt=jt.floating.style;nt.setProperty("--radix-popper-available-width",`${q}px`),nt.setProperty("--radix-popper-available-height",`${Ee}px`),nt.setProperty("--radix-popper-anchor-width",`${_e}px`),nt.setProperty("--radix-popper-anchor-height",`${Lt}px`)}}),N&&X9({element:N,padding:c}),rq({arrowWidth:C,arrowHeight:k}),p&&Y9({strategy:"referenceHidden",...T})]}),[O,z]=tT(F),H=nn(x);Dt(()=>{B&&(H==null||H())},[B,H]);const X=(Z=A.arrow)==null?void 0:Z.x,Q=(ae=A.arrow)==null?void 0:ae.y,ie=((Pe=A.arrow)==null?void 0:Pe.centerOffset)!==0,[oe,je]=g.useState();return Dt(()=>{b&&je(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:B?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(ke=A.transformOrigin)==null?void 0:ke.x,(Ne=A.transformOrigin)==null?void 0:Ne.y].join(" "),...((xe=A.hide)==null?void 0:xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(eq,{scope:s,placedSide:O,onArrowChange:S,arrowX:X,arrowY:Q,shouldHideArrow:ie,children:a.jsx(ve.div,{"data-side":O,"data-align":z,...y,ref:j,style:{...y.style,animation:B?void 0:"none"}})})})});QE.displayName=zv;var ZE="PopperArrow",nq={top:"bottom",right:"left",bottom:"top",left:"right"},eT=g.forwardRef(function(n,s){const{__scopePopper:r,...i}=n,o=tq(ZE,r),l=nq[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(Q9,{...i,ref:s,style:{...i.style,display:"block"}})})});eT.displayName=ZE;function sq(t){return t!==null}var rq=t=>({name:"transformOrigin",options:t,fn(n){var v,b,w;const{placement:s,rects:r,middlewareData:i}=n,l=((v=i.arrow)==null?void 0:v.centerOffset)!==0,c=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[u,f]=tT(s),h={start:"0%",center:"50%",end:"100%"}[f],p=(((b=i.arrow)==null?void 0:b.x)??0)+c/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+d/2;let x="",y="";return u==="bottom"?(x=l?h:`${p}px`,y=`${-d}px`):u==="top"?(x=l?h:`${p}px`,y=`${r.floating.height+d}px`):u==="right"?(x=`${-d}px`,y=l?h:`${m}px`):u==="left"&&(x=`${r.floating.width+d}px`,y=l?h:`${m}px`),{data:{x,y}}}});function tT(t){const[n,s="center"]=t.split("-");return[n,s]}var iq=YE,aq=JE,oq=QE,lq=eT,cq="Portal",Bv=g.forwardRef((t,n)=>{var c;const{container:s,...r}=t,[i,o]=g.useState(!1);Dt(()=>o(!0),[]);const l=s||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?hC.createPortal(a.jsx(ve.div,{...r,ref:n}),l):null});Bv.displayName=cq;var dq=$x[" useInsertionEffect ".trim().toString()]||Dt;function Eo({prop:t,defaultProp:n,onChange:s=()=>{},caller:r}){const[i,o,l]=uq({defaultProp:n,onChange:s}),c=t!==void 0,d=c?t:i;{const f=g.useRef(t!==void 0);g.useEffect(()=>{const h=f.current;h!==c&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,r])}const u=g.useCallback(f=>{var h;if(c){const p=fq(f)?f(t):f;p!==t&&((h=l.current)==null||h.call(l,p))}else o(f)},[c,t,o,l]);return[d,u]}function uq({defaultProp:t,onChange:n}){const[s,r]=g.useState(t),i=g.useRef(s),o=g.useRef(n);return dq(()=>{o.current=n},[n]),g.useEffect(()=>{var l;i.current!==s&&((l=o.current)==null||l.call(o,s),i.current=s)},[s,i]),[s,r,o]}function fq(t){return typeof t=="function"}function nT(t){const n=g.useRef({value:t,previous:t});return g.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var sT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hq="VisuallyHidden",pq=g.forwardRef((t,n)=>a.jsx(ve.span,{...t,ref:n,style:{...sT,...t.style}}));pq.displayName=hq;var mq=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Ta=new WeakMap,Dd=new WeakMap,Id={},Yp=0,rT=function(t){return t&&(t.host||rT(t.parentNode))},gq=function(t,n){return n.map(function(s){if(t.contains(s))return s;var r=rT(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},xq=function(t,n,s,r){var i=gq(n,Array.isArray(t)?t:[t]);Id[s]||(Id[s]=new WeakMap);var o=Id[s],l=[],c=new Set,d=new Set(i),u=function(h){!h||c.has(h)||(c.add(h),u(h.parentNode))};i.forEach(u);var f=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(p){if(c.has(p))f(p);else try{var m=p.getAttribute(r),x=m!==null&&m!=="false",y=(Ta.get(p)||0)+1,v=(o.get(p)||0)+1;Ta.set(p,y),o.set(p,v),l.push(p),y===1&&x&&Dd.set(p,!0),v===1&&p.setAttribute(s,"true"),x||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return f(n),c.clear(),Yp++,function(){l.forEach(function(h){var p=Ta.get(h)-1,m=o.get(h)-1;Ta.set(h,p),o.set(h,m),p||(Dd.has(h)||h.removeAttribute(r),Dd.delete(h)),m||h.removeAttribute(s)}),Yp--,Yp||(Ta=new WeakMap,Ta=new WeakMap,Dd=new WeakMap,Id={})}},iT=function(t,n,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=mq(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),xq(r,i,s,"aria-hidden")):function(){return null}},Rs=function(){return Rs=Object.assign||function(n){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Rs.apply(this,arguments)};function aT(t,n){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function yq(t,n,s){if(s||arguments.length===2)for(var r=0,i=n.length,o;r<i;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return t.concat(o||Array.prototype.slice.call(n))}var vu="right-scroll-bar-position",bu="width-before-scroll-bar",vq="with-scroll-bars-hidden",bq="--removed-body-scroll-bar-size";function Xp(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function wq(t,n){var s=g.useState(function(){return{value:t,callback:n,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=n,s.facade}var jq=typeof window<"u"?g.useLayoutEffect:g.useEffect,L1=new WeakMap;function Nq(t,n){var s=wq(null,function(r){return t.forEach(function(i){return Xp(i,r)})});return jq(function(){var r=L1.get(s);if(r){var i=new Set(r),o=new Set(t),l=s.current;i.forEach(function(c){o.has(c)||Xp(c,null)}),o.forEach(function(c){i.has(c)||Xp(c,l)})}L1.set(s,t)},[t]),s}function Sq(t){return t}function kq(t,n){n===void 0&&(n=Sq);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(o){var l=n(o,r);return s.push(l),function(){s=s.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(r=!0;s.length;){var l=s;s=[],l.forEach(o)}s={push:function(c){return o(c)},filter:function(){return s}}},assignMedium:function(o){r=!0;var l=[];if(s.length){var c=s;s=[],c.forEach(o),l=s}var d=function(){var f=l;l=[],f.forEach(o)},u=function(){return Promise.resolve().then(d)};u(),s={push:function(f){l.push(f),u()},filter:function(f){return l=l.filter(f),s}}}};return i}function Cq(t){t===void 0&&(t={});var n=kq(null);return n.options=Rs({async:!0,ssr:!1},t),n}var oT=function(t){var n=t.sideCar,s=aT(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Rs({},s))};oT.isSideCarExport=!0;function _q(t,n){return t.useMedium(n),oT}var lT=Cq(),Jp=function(){},Sh=g.forwardRef(function(t,n){var s=g.useRef(null),r=g.useState({onScrollCapture:Jp,onWheelCapture:Jp,onTouchMoveCapture:Jp}),i=r[0],o=r[1],l=t.forwardProps,c=t.children,d=t.className,u=t.removeScrollBar,f=t.enabled,h=t.shards,p=t.sideCar,m=t.noRelative,x=t.noIsolation,y=t.inert,v=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,j=t.gapMode,N=aT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,_=Nq([s,n]),C=Rs(Rs({},N),i);return g.createElement(g.Fragment,null,f&&g.createElement(S,{sideCar:lT,removeScrollBar:u,shards:h,noRelative:m,noIsolation:x,inert:y,setCallbacks:o,allowPinchZoom:!!v,lockRef:s,gapMode:j}),l?g.cloneElement(g.Children.only(c),Rs(Rs({},C),{ref:_})):g.createElement(w,Rs({},C,{className:d,ref:_}),c))});Sh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sh.classNames={fullWidth:bu,zeroRight:vu};var Eq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Tq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=Eq();return n&&t.setAttribute("nonce",n),t}function Mq(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function Aq(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var Pq=function(){var t=0,n=null;return{add:function(s){t==0&&(n=Tq())&&(Mq(n,s),Aq(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Rq=function(){var t=Pq();return function(n,s){g.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&s])}},cT=function(){var t=Rq(),n=function(s){var r=s.styles,i=s.dynamic;return t(r,i),null};return n},Oq={left:0,top:0,right:0,gap:0},Qp=function(t){return parseInt(t||"",10)||0},Dq=function(t){var n=window.getComputedStyle(document.body),s=n[t==="padding"?"paddingLeft":"marginLeft"],r=n[t==="padding"?"paddingTop":"marginTop"],i=n[t==="padding"?"paddingRight":"marginRight"];return[Qp(s),Qp(r),Qp(i)]},Iq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Oq;var n=Dq(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,r-s+n[2]-n[0])}},Lq=cT(),co="data-scroll-locked",$q=function(t,n,s,r){var i=t.left,o=t.top,l=t.right,c=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(vq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(co,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vu,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(bu,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(vu," .").concat(vu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(bu," .").concat(bu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(co,`] {
    `).concat(bq,": ").concat(c,`px;
  }
`)},$1=function(){var t=parseInt(document.body.getAttribute(co)||"0",10);return isFinite(t)?t:0},Fq=function(){g.useEffect(function(){return document.body.setAttribute(co,($1()+1).toString()),function(){var t=$1()-1;t<=0?document.body.removeAttribute(co):document.body.setAttribute(co,t.toString())}},[])},zq=function(t){var n=t.noRelative,s=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Fq();var o=g.useMemo(function(){return Iq(i)},[i]);return g.createElement(Lq,{styles:$q(o,!n,i,s?"":"!important")})},sx=!1;if(typeof window<"u")try{var Ld=Object.defineProperty({},"passive",{get:function(){return sx=!0,!0}});window.addEventListener("test",Ld,Ld),window.removeEventListener("test",Ld,Ld)}catch{sx=!1}var Ma=sx?{passive:!1}:!1,Bq=function(t){return t.tagName==="TEXTAREA"},dT=function(t,n){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!Bq(t)&&s[n]==="visible")},Vq=function(t){return dT(t,"overflowY")},Hq=function(t){return dT(t,"overflowX")},F1=function(t,n){var s=n.ownerDocument,r=n;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=uT(t,r);if(i){var o=fT(t,r),l=o[1],c=o[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},Uq=function(t){var n=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[n,s,r]},Wq=function(t){var n=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[n,s,r]},uT=function(t,n){return t==="v"?Vq(n):Hq(n)},fT=function(t,n){return t==="v"?Uq(n):Wq(n)},qq=function(t,n){return t==="h"&&n==="rtl"?-1:1},Kq=function(t,n,s,r,i){var o=qq(t,window.getComputedStyle(n).direction),l=o*r,c=s.target,d=n.contains(c),u=!1,f=l>0,h=0,p=0;do{if(!c)break;var m=fT(t,c),x=m[0],y=m[1],v=m[2],b=y-v-o*x;(x||b)&&uT(t,c)&&(h+=b,p+=x);var w=c.parentNode;c=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!d&&c!==document.body||d&&(n.contains(c)||n===c));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(u=!0),u},$d=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},z1=function(t){return[t.deltaX,t.deltaY]},B1=function(t){return t&&"current"in t?t.current:t},Gq=function(t,n){return t[0]===n[0]&&t[1]===n[1]},Yq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Xq=0,Aa=[];function Jq(t){var n=g.useRef([]),s=g.useRef([0,0]),r=g.useRef(),i=g.useState(Xq++)[0],o=g.useState(cT)[0],l=g.useRef(t);g.useEffect(function(){l.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=yq([t.lockRef.current],(t.shards||[]).map(B1),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=g.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!l.current.allowPinchZoom;var b=$d(y),w=s.current,j="deltaX"in y?y.deltaX:w[0]-b[0],N="deltaY"in y?y.deltaY:w[1]-b[1],S,_=y.target,C=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in y&&C==="h"&&_.type==="range")return!1;var k=F1(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=F1(C,_)),!k)return!1;if(!r.current&&"changedTouches"in y&&(j||N)&&(r.current=S),!S)return!0;var E=r.current||S;return Kq(E,v,y,E==="h"?j:N)},[]),d=g.useCallback(function(y){var v=y;if(!(!Aa.length||Aa[Aa.length-1]!==o)){var b="deltaY"in v?z1(v):$d(v),w=n.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&Gq(S.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var j=(l.current.shards||[]).map(B1).filter(Boolean).filter(function(S){return S.contains(v.target)}),N=j.length>0?c(v,j[0]):!l.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),u=g.useCallback(function(y,v,b,w){var j={name:y,delta:v,target:b,should:w,shadowParent:Qq(b)};n.current.push(j),setTimeout(function(){n.current=n.current.filter(function(N){return N!==j})},1)},[]),f=g.useCallback(function(y){s.current=$d(y),r.current=void 0},[]),h=g.useCallback(function(y){u(y.type,z1(y),y.target,c(y,t.lockRef.current))},[]),p=g.useCallback(function(y){u(y.type,$d(y),y.target,c(y,t.lockRef.current))},[]);g.useEffect(function(){return Aa.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",d,Ma),document.addEventListener("touchmove",d,Ma),document.addEventListener("touchstart",f,Ma),function(){Aa=Aa.filter(function(y){return y!==o}),document.removeEventListener("wheel",d,Ma),document.removeEventListener("touchmove",d,Ma),document.removeEventListener("touchstart",f,Ma)}},[]);var m=t.removeScrollBar,x=t.inert;return g.createElement(g.Fragment,null,x?g.createElement(o,{styles:Yq(i)}):null,m?g.createElement(zq,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Qq(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const Zq=_q(lT,Jq);var Vv=g.forwardRef(function(t,n){return g.createElement(Sh,Rs({},t,{ref:n,sideCar:Zq}))});Vv.classNames=Sh.classNames;var eK=[" ","Enter","ArrowUp","ArrowDown"],tK=[" ","Enter"],ra="Select",[kh,Ch,nK]=EE(ra),[Qo]=xi(ra,[nK,KE]),_h=KE(),[sK,yi]=Qo(ra),[rK,iK]=Qo(ra),hT=t=>{const{__scopeSelect:n,children:s,open:r,defaultOpen:i,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:u,name:f,autoComplete:h,disabled:p,required:m,form:x}=t,y=_h(n),[v,b]=g.useState(null),[w,j]=g.useState(null),[N,S]=g.useState(!1),_=vh(u),[C,k]=Eo({prop:r,defaultProp:i??!1,onChange:o,caller:ra}),[E,M]=Eo({prop:l,defaultProp:c,onChange:d,caller:ra}),D=g.useRef(null),R=v?x||!!v.closest("form"):!0,[T,P]=g.useState(new Set),L=Array.from(T).map(F=>F.props.value).join(";");return a.jsx(iq,{...y,children:a.jsxs(sK,{required:m,scope:n,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:Jr(),value:E,onValueChange:M,open:C,onOpenChange:k,dir:_,triggerPointerDownPosRef:D,disabled:p,children:[a.jsx(kh.Provider,{scope:n,children:a.jsx(rK,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(F=>{P(B=>new Set(B).add(F))},[]),onNativeOptionRemove:g.useCallback(F=>{P(B=>{const A=new Set(B);return A.delete(F),A})},[]),children:s})}),R?a.jsxs(LT,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:E,onChange:F=>M(F.target.value),disabled:p,form:x,children:[E===void 0?a.jsx("option",{value:""}):null,Array.from(T)]},L):null]})})};hT.displayName=ra;var pT="SelectTrigger",mT=g.forwardRef((t,n)=>{const{__scopeSelect:s,disabled:r=!1,...i}=t,o=_h(s),l=yi(pT,s),c=l.disabled||r,d=Re(n,l.onTriggerChange),u=Ch(s),f=g.useRef("touch"),[h,p,m]=FT(y=>{const v=u().filter(j=>!j.disabled),b=v.find(j=>j.value===l.value),w=zT(v,y,b);w!==void 0&&l.onValueChange(w.value)}),x=y=>{c||(l.onOpenChange(!0),m()),y&&(l.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(aq,{asChild:!0,...o,children:a.jsx(ve.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":$T(l.value)?"":void 0,...i,ref:d,onClick:ge(i.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&x(y)}),onPointerDown:ge(i.onPointerDown,y=>{f.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:ge(i.onKeyDown,y=>{const v=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(v&&y.key===" ")&&eK.includes(y.key)&&(x(),y.preventDefault())})})})});mT.displayName=pT;var gT="SelectValue",xT=g.forwardRef((t,n)=>{const{__scopeSelect:s,className:r,style:i,children:o,placeholder:l="",...c}=t,d=yi(gT,s),{onValueNodeHasChildrenChange:u}=d,f=o!==void 0,h=Re(n,d.onValueNodeChange);return Dt(()=>{u(f)},[u,f]),a.jsx(ve.span,{...c,ref:h,style:{pointerEvents:"none"},children:$T(d.value)?a.jsx(a.Fragment,{children:l}):o})});xT.displayName=gT;var aK="SelectIcon",yT=g.forwardRef((t,n)=>{const{__scopeSelect:s,children:r,...i}=t;return a.jsx(ve.span,{"aria-hidden":!0,...i,ref:n,children:r||""})});yT.displayName=aK;var oK="SelectPortal",vT=t=>a.jsx(Bv,{asChild:!0,...t});vT.displayName=oK;var ia="SelectContent",bT=g.forwardRef((t,n)=>{const s=yi(ia,t.__scopeSelect),[r,i]=g.useState();if(Dt(()=>{i(new DocumentFragment)},[]),!s.open){const o=r;return o?$o.createPortal(a.jsx(wT,{scope:t.__scopeSelect,children:a.jsx(kh.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(jT,{...t,ref:n})});bT.displayName=ia;var is=10,[wT,vi]=Qo(ia),lK="SelectContentImpl",cK=Co("SelectContent.RemoveScroll"),jT=g.forwardRef((t,n)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v,...b}=t,w=yi(ia,s),[j,N]=g.useState(null),[S,_]=g.useState(null),C=Re(n,Z=>N(Z)),[k,E]=g.useState(null),[M,D]=g.useState(null),R=Ch(s),[T,P]=g.useState(!1),L=g.useRef(!1);g.useEffect(()=>{if(j)return iT(j)},[j]),AE();const F=g.useCallback(Z=>{const[ae,...Pe]=R().map(xe=>xe.ref.current),[ke]=Pe.slice(-1),Ne=document.activeElement;for(const xe of Z)if(xe===Ne||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===ae&&S&&(S.scrollTop=0),xe===ke&&S&&(S.scrollTop=S.scrollHeight),xe==null||xe.focus(),document.activeElement!==Ne))return},[R,S]),B=g.useCallback(()=>F([k,j]),[F,k,j]);g.useEffect(()=>{T&&B()},[T,B]);const{onOpenChange:A,triggerPointerDownPosRef:O}=w;g.useEffect(()=>{if(j){let Z={x:0,y:0};const ae=ke=>{var Ne,xe;Z={x:Math.abs(Math.round(ke.pageX)-(((Ne=O.current)==null?void 0:Ne.x)??0)),y:Math.abs(Math.round(ke.pageY)-(((xe=O.current)==null?void 0:xe.y)??0))}},Pe=ke=>{Z.x<=10&&Z.y<=10?ke.preventDefault():j.contains(ke.target)||A(!1),document.removeEventListener("pointermove",ae),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[j,A,O]),g.useEffect(()=>{const Z=()=>A(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[A]);const[z,H]=FT(Z=>{const ae=R().filter(Ne=>!Ne.disabled),Pe=ae.find(Ne=>Ne.ref.current===document.activeElement),ke=zT(ae,Z,Pe);ke&&setTimeout(()=>ke.ref.current.focus())}),X=g.useCallback((Z,ae,Pe)=>{const ke=!L.current&&!Pe;(w.value!==void 0&&w.value===ae||ke)&&(E(Z),ke&&(L.current=!0))},[w.value]),Q=g.useCallback(()=>j==null?void 0:j.focus(),[j]),ie=g.useCallback((Z,ae,Pe)=>{const ke=!L.current&&!Pe;(w.value!==void 0&&w.value===ae||ke)&&D(Z)},[w.value]),oe=r==="popper"?rx:NT,je=oe===rx?{side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v}:{};return a.jsx(wT,{scope:s,content:j,viewport:S,onViewportChange:_,itemRefCallback:X,selectedItem:k,onItemLeave:Q,itemTextRefCallback:ie,focusSelectedItem:B,selectedItemText:M,position:r,isPositioned:T,searchRef:z,children:a.jsx(Vv,{as:cK,allowPinchZoom:!0,children:a.jsx(Pv,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:ge(i,Z=>{var ae;(ae=w.trigger)==null||ae.focus({preventScroll:!0}),Z.preventDefault()}),children:a.jsx(Av,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),...b,...je,onPlaced:()=>P(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ge(b.onKeyDown,Z=>{const ae=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ae&&Z.key.length===1&&H(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ke=R().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ne=Z.target,xe=ke.indexOf(Ne);ke=ke.slice(xe+1)}setTimeout(()=>F(ke)),Z.preventDefault()}})})})})})})});jT.displayName=lK;var dK="SelectItemAlignedPosition",NT=g.forwardRef((t,n)=>{const{__scopeSelect:s,onPlaced:r,...i}=t,o=yi(ia,s),l=vi(ia,s),[c,d]=g.useState(null),[u,f]=g.useState(null),h=Re(n,C=>f(C)),p=Ch(s),m=g.useRef(!1),x=g.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=l,j=g.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&y&&v&&b){const C=o.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),E=o.valueNode.getBoundingClientRect(),M=b.getBoundingClientRect();if(o.dir!=="rtl"){const Ne=M.left-k.left,xe=E.left-Ne,jt=C.left-xe,_t=C.width+jt,q=Math.max(_t,k.width),Ee=window.innerWidth-is,_e=Qg(xe,[is,Math.max(is,Ee-q)]);c.style.minWidth=_t+"px",c.style.left=_e+"px"}else{const Ne=k.right-M.right,xe=window.innerWidth-E.right-Ne,jt=window.innerWidth-C.right-xe,_t=C.width+jt,q=Math.max(_t,k.width),Ee=window.innerWidth-is,_e=Qg(xe,[is,Math.max(is,Ee-q)]);c.style.minWidth=_t+"px",c.style.right=_e+"px"}const D=p(),R=window.innerHeight-is*2,T=y.scrollHeight,P=window.getComputedStyle(u),L=parseInt(P.borderTopWidth,10),F=parseInt(P.paddingTop,10),B=parseInt(P.borderBottomWidth,10),A=parseInt(P.paddingBottom,10),O=L+F+T+A+B,z=Math.min(v.offsetHeight*5,O),H=window.getComputedStyle(y),X=parseInt(H.paddingTop,10),Q=parseInt(H.paddingBottom,10),ie=C.top+C.height/2-is,oe=R-ie,je=v.offsetHeight/2,Z=v.offsetTop+je,ae=L+F+Z,Pe=O-ae;if(ae<=ie){const Ne=D.length>0&&v===D[D.length-1].ref.current;c.style.bottom="0px";const xe=u.clientHeight-y.offsetTop-y.offsetHeight,jt=Math.max(oe,je+(Ne?Q:0)+xe+B),_t=ae+jt;c.style.height=_t+"px"}else{const Ne=D.length>0&&v===D[0].ref.current;c.style.top="0px";const jt=Math.max(ie,L+y.offsetTop+(Ne?X:0)+je)+Pe;c.style.height=jt+"px",y.scrollTop=ae-ie+y.offsetTop}c.style.margin=`${is}px 0`,c.style.minHeight=z+"px",c.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,c,u,y,v,b,o.dir,r]);Dt(()=>j(),[j]);const[N,S]=g.useState();Dt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=g.useCallback(C=>{C&&x.current===!0&&(j(),w==null||w(),x.current=!1)},[j,w]);return a.jsx(fK,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:a.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:a.jsx(ve.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});NT.displayName=dK;var uK="SelectPopperPosition",rx=g.forwardRef((t,n)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=is,...o}=t,l=_h(s);return a.jsx(oq,{...l,...o,ref:n,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rx.displayName=uK;var[fK,Hv]=Qo(ia,{}),ix="SelectViewport",ST=g.forwardRef((t,n)=>{const{__scopeSelect:s,nonce:r,...i}=t,o=vi(ix,s),l=Hv(ix,s),c=Re(n,o.onViewportChange),d=g.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(kh.Slot,{scope:s,children:a.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ge(i.onScroll,u=>{const f=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=l;if(p!=null&&p.current&&h){const m=Math.abs(d.current-f.scrollTop);if(m>0){const x=window.innerHeight-is*2,y=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),b=Math.max(y,v);if(b<x){const w=b+m,j=Math.min(x,w),N=w-j;h.style.height=j+"px",h.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});ST.displayName=ix;var kT="SelectGroup",[hK,pK]=Qo(kT),mK=g.forwardRef((t,n)=>{const{__scopeSelect:s,...r}=t,i=Jr();return a.jsx(hK,{scope:s,id:i,children:a.jsx(ve.div,{role:"group","aria-labelledby":i,...r,ref:n})})});mK.displayName=kT;var CT="SelectLabel",_T=g.forwardRef((t,n)=>{const{__scopeSelect:s,...r}=t,i=pK(CT,s);return a.jsx(ve.div,{id:i.id,...r,ref:n})});_T.displayName=CT;var mf="SelectItem",[gK,ET]=Qo(mf),TT=g.forwardRef((t,n)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:o,...l}=t,c=yi(mf,s),d=vi(mf,s),u=c.value===r,[f,h]=g.useState(o??""),[p,m]=g.useState(!1),x=Re(n,w=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,w,r,i)}),y=Jr(),v=g.useRef("touch"),b=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(gK,{scope:s,value:r,disabled:i,textId:y,isSelected:u,onItemTextChange:g.useCallback(w=>{h(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(kh.ItemSlot,{scope:s,value:r,disabled:i,textValue:f,children:a.jsx(ve.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:x,onFocus:ge(l.onFocus,()=>m(!0)),onBlur:ge(l.onBlur,()=>m(!1)),onClick:ge(l.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:ge(l.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:ge(l.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:ge(l.onPointerMove,w=>{var j;v.current=w.pointerType,i?(j=d.onItemLeave)==null||j.call(d):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(l.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:ge(l.onKeyDown,w=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(tK.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});TT.displayName=mf;var kl="SelectItemText",MT=g.forwardRef((t,n)=>{const{__scopeSelect:s,className:r,style:i,...o}=t,l=yi(kl,s),c=vi(kl,s),d=ET(kl,s),u=iK(kl,s),[f,h]=g.useState(null),p=Re(n,b=>h(b),d.onItemTextChange,b=>{var w;return(w=c.itemTextRefCallback)==null?void 0:w.call(c,b,d.value,d.disabled)}),m=f==null?void 0:f.textContent,x=g.useMemo(()=>a.jsx("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=u;return Dt(()=>(y(x),()=>v(x)),[y,v,x]),a.jsxs(a.Fragment,{children:[a.jsx(ve.span,{id:d.textId,...o,ref:p}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?$o.createPortal(o.children,l.valueNode):null]})});MT.displayName=kl;var AT="SelectItemIndicator",PT=g.forwardRef((t,n)=>{const{__scopeSelect:s,...r}=t;return ET(AT,s).isSelected?a.jsx(ve.span,{"aria-hidden":!0,...r,ref:n}):null});PT.displayName=AT;var ax="SelectScrollUpButton",RT=g.forwardRef((t,n)=>{const s=vi(ax,t.__scopeSelect),r=Hv(ax,t.__scopeSelect),[i,o]=g.useState(!1),l=Re(n,r.onScrollButtonChange);return Dt(()=>{if(s.viewport&&s.isPositioned){let c=function(){const u=d.scrollTop>0;o(u)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?a.jsx(DT,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});RT.displayName=ax;var ox="SelectScrollDownButton",OT=g.forwardRef((t,n)=>{const s=vi(ox,t.__scopeSelect),r=Hv(ox,t.__scopeSelect),[i,o]=g.useState(!1),l=Re(n,r.onScrollButtonChange);return Dt(()=>{if(s.viewport&&s.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;o(f)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?a.jsx(DT,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});OT.displayName=ox;var DT=g.forwardRef((t,n)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=t,o=vi("SelectScrollButton",s),l=g.useRef(null),c=Ch(s),d=g.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),Dt(()=>{var f;const u=c().find(h=>h.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),a.jsx(ve.div,{"aria-hidden":!0,...i,ref:n,style:{flexShrink:0,...i.style},onPointerDown:ge(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:ge(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:ge(i.onPointerLeave,()=>{d()})})}),xK="SelectSeparator",IT=g.forwardRef((t,n)=>{const{__scopeSelect:s,...r}=t;return a.jsx(ve.div,{"aria-hidden":!0,...r,ref:n})});IT.displayName=xK;var lx="SelectArrow",yK=g.forwardRef((t,n)=>{const{__scopeSelect:s,...r}=t,i=_h(s),o=yi(lx,s),l=vi(lx,s);return o.open&&l.position==="popper"?a.jsx(lq,{...i,...r,ref:n}):null});yK.displayName=lx;var vK="SelectBubbleInput",LT=g.forwardRef(({__scopeSelect:t,value:n,...s},r)=>{const i=g.useRef(null),o=Re(r,i),l=nT(n);return g.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==n&&f){const h=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(h)}},[l,n]),a.jsx(ve.select,{...s,style:{...sT,...s.style},ref:o,defaultValue:n})});LT.displayName=vK;function $T(t){return t===""||t===void 0}function FT(t){const n=nn(t),s=g.useRef(""),r=g.useRef(0),i=g.useCallback(l=>{const c=s.current+l;n(c),function d(u){s.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[n]),o=g.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,o]}function zT(t,n,s){const i=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,o=s?t.indexOf(s):-1;let l=bK(t,Math.max(o,0));i.length===1&&(l=l.filter(u=>u!==s));const d=l.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function bK(t,n){return t.map((s,r)=>t[(n+r)%t.length])}var wK=hT,BT=mT,jK=xT,NK=yT,SK=vT,VT=bT,kK=ST,HT=_T,UT=TT,CK=MT,_K=PT,WT=RT,qT=OT,KT=IT;const at=wK,ot=jK,et=g.forwardRef(({className:t,children:n,...s},r)=>a.jsxs(BT,{ref:r,className:we("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[n,a.jsx(NK,{asChild:!0,children:a.jsx(Oy,{className:"h-4 w-4 opacity-50"})})]}));et.displayName=BT.displayName;const GT=g.forwardRef(({className:t,...n},s)=>a.jsx(WT,{ref:s,className:we("flex cursor-default items-center justify-center py-1",t),...n,children:a.jsx(dL,{className:"h-4 w-4"})}));GT.displayName=WT.displayName;const YT=g.forwardRef(({className:t,...n},s)=>a.jsx(qT,{ref:s,className:we("flex cursor-default items-center justify-center py-1",t),...n,children:a.jsx(Oy,{className:"h-4 w-4"})}));YT.displayName=qT.displayName;const tt=g.forwardRef(({className:t,children:n,position:s="popper",...r},i)=>a.jsx(SK,{children:a.jsxs(VT,{ref:i,className:we("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[a.jsx(GT,{}),a.jsx(kK,{className:we("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),a.jsx(YT,{})]})}));tt.displayName=VT.displayName;const EK=g.forwardRef(({className:t,...n},s)=>a.jsx(HT,{ref:s,className:we("px-2 py-1.5 text-sm font-semibold",t),...n}));EK.displayName=HT.displayName;const Te=g.forwardRef(({className:t,children:n,...s},r)=>a.jsxs(UT,{ref:r,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(_K,{children:a.jsx(Ho,{className:"h-4 w-4"})})}),a.jsx(CK,{children:n})]}));Te.displayName=UT.displayName;const TK=g.forwardRef(({className:t,...n},s)=>a.jsx(KT,{ref:s,className:we("-mx-1 my-1 h-px bg-muted",t),...n}));TK.displayName=KT.displayName;function MK(t,n){return g.useReducer((s,r)=>n[s][r]??s,t)}var Ks=t=>{const{present:n,children:s}=t,r=AK(n),i=typeof s=="function"?s({present:r.isPresent}):g.Children.only(s),o=Re(r.ref,PK(i));return typeof s=="function"||r.isPresent?g.cloneElement(i,{ref:o}):null};Ks.displayName="Presence";function AK(t){const[n,s]=g.useState(),r=g.useRef(null),i=g.useRef(t),o=g.useRef("none"),l=t?"mounted":"unmounted",[c,d]=MK(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Fd(r.current);o.current=c==="mounted"?u:"none"},[c]),Dt(()=>{const u=r.current,f=i.current;if(f!==t){const p=o.current,m=Fd(u);t?d("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,d]),Dt(()=>{if(n){let u;const f=n.ownerDocument.defaultView??window,h=m=>{const y=Fd(r.current).includes(CSS.escape(m.animationName));if(m.target===n&&y&&(d("ANIMATION_END"),!i.current)){const v=n.style.animationFillMode;n.style.animationFillMode="forwards",u=f.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=v)})}},p=m=>{m.target===n&&(o.current=Fd(r.current))};return n.addEventListener("animationstart",p),n.addEventListener("animationcancel",h),n.addEventListener("animationend",h),()=>{f.clearTimeout(u),n.removeEventListener("animationstart",p),n.removeEventListener("animationcancel",h),n.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:g.useCallback(u=>{r.current=u?getComputedStyle(u):null,s(u)},[])}}function Fd(t){return(t==null?void 0:t.animationName)||"none"}function PK(t){var r,i;let n=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?t.ref:(n=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Eh="Dialog",[XT]=xi(Eh),[RK,Ns]=XT(Eh),JT=t=>{const{__scopeDialog:n,children:s,open:r,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=g.useRef(null),d=g.useRef(null),[u,f]=Eo({prop:r,defaultProp:i??!1,onChange:o,caller:Eh});return a.jsx(RK,{scope:n,triggerRef:c,contentRef:d,contentId:Jr(),titleId:Jr(),descriptionId:Jr(),open:u,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),modal:l,children:s})};JT.displayName=Eh;var QT="DialogTrigger",OK=g.forwardRef((t,n)=>{const{__scopeDialog:s,...r}=t,i=Ns(QT,s),o=Re(n,i.triggerRef);return a.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":qv(i.open),...r,ref:o,onClick:ge(t.onClick,i.onOpenToggle)})});OK.displayName=QT;var Uv="DialogPortal",[DK,ZT]=XT(Uv,{forceMount:void 0}),eM=t=>{const{__scopeDialog:n,forceMount:s,children:r,container:i}=t,o=Ns(Uv,n);return a.jsx(DK,{scope:n,forceMount:s,children:g.Children.map(r,l=>a.jsx(Ks,{present:s||o.open,children:a.jsx(Bv,{asChild:!0,container:i,children:l})}))})};eM.displayName=Uv;var gf="DialogOverlay",tM=g.forwardRef((t,n)=>{const s=ZT(gf,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,o=Ns(gf,t.__scopeDialog);return o.modal?a.jsx(Ks,{present:r||o.open,children:a.jsx(LK,{...i,ref:n})}):null});tM.displayName=gf;var IK=Co("DialogOverlay.RemoveScroll"),LK=g.forwardRef((t,n)=>{const{__scopeDialog:s,...r}=t,i=Ns(gf,s);return a.jsx(Vv,{as:IK,allowPinchZoom:!0,shards:[i.contentRef],children:a.jsx(ve.div,{"data-state":qv(i.open),...r,ref:n,style:{pointerEvents:"auto",...r.style}})})}),aa="DialogContent",nM=g.forwardRef((t,n)=>{const s=ZT(aa,t.__scopeDialog),{forceMount:r=s.forceMount,...i}=t,o=Ns(aa,t.__scopeDialog);return a.jsx(Ks,{present:r||o.open,children:o.modal?a.jsx($K,{...i,ref:n}):a.jsx(FK,{...i,ref:n})})});nM.displayName=aa;var $K=g.forwardRef((t,n)=>{const s=Ns(aa,t.__scopeDialog),r=g.useRef(null),i=Re(n,s.contentRef,r);return g.useEffect(()=>{const o=r.current;if(o)return iT(o)},[]),a.jsx(sM,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=s.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault())})}),FK=g.forwardRef((t,n)=>{const s=Ns(aa,t.__scopeDialog),r=g.useRef(!1),i=g.useRef(!1);return a.jsx(sM,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,c;(l=t.onCloseAutoFocus)==null||l.call(t,o),o.defaultPrevented||(r.current||(c=s.triggerRef.current)==null||c.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var d,u;(d=t.onInteractOutside)==null||d.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=o.target;((u=s.triggerRef.current)==null?void 0:u.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),sM=g.forwardRef((t,n)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=t,c=Ns(aa,s),d=g.useRef(null),u=Re(n,d);return AE(),a.jsxs(a.Fragment,{children:[a.jsx(Pv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:a.jsx(Av,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":qv(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(zK,{titleId:c.titleId}),a.jsx(VK,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Wv="DialogTitle",rM=g.forwardRef((t,n)=>{const{__scopeDialog:s,...r}=t,i=Ns(Wv,s);return a.jsx(ve.h2,{id:i.titleId,...r,ref:n})});rM.displayName=Wv;var iM="DialogDescription",aM=g.forwardRef((t,n)=>{const{__scopeDialog:s,...r}=t,i=Ns(iM,s);return a.jsx(ve.p,{id:i.descriptionId,...r,ref:n})});aM.displayName=iM;var oM="DialogClose",lM=g.forwardRef((t,n)=>{const{__scopeDialog:s,...r}=t,i=Ns(oM,s);return a.jsx(ve.button,{type:"button",...r,ref:n,onClick:ge(t.onClick,()=>i.onOpenChange(!1))})});lM.displayName=oM;function qv(t){return t?"open":"closed"}var cM="DialogTitleWarning",[Ure,dM]=wW(cM,{contentName:aa,titleName:Wv,docsSlug:"dialog"}),zK=({titleId:t})=>{const n=dM(cM),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},BK="DialogDescriptionWarning",VK=({contentRef:t,descriptionId:n})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dM(BK).contentName}}.`;return g.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");n&&i&&(document.getElementById(n)||console.warn(r))},[r,t,n]),null},HK=JT,UK=eM,uM=tM,fM=nM,hM=rM,pM=aM,WK=lM;const ui=HK,qK=UK,mM=g.forwardRef(({className:t,...n},s)=>a.jsx(uM,{ref:s,className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n}));mM.displayName=uM.displayName;const gr=g.forwardRef(({className:t,children:n,...s},r)=>a.jsxs(qK,{children:[a.jsx(mM,{}),a.jsxs(fM,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[n,a.jsxs(WK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(dn,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gr.displayName=fM.displayName;const xr=({className:t,...n})=>a.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",t),...n});xr.displayName="DialogHeader";const oa=({className:t,...n})=>a.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});oa.displayName="DialogFooter";const yr=g.forwardRef(({className:t,...n},s)=>a.jsx(hM,{ref:s,className:we("text-lg font-semibold leading-none tracking-tight",t),...n}));yr.displayName=hM.displayName;const KK=g.forwardRef(({className:t,...n},s)=>a.jsx(pM,{ref:s,className:we("text-sm text-muted-foreground",t),...n}));KK.displayName=pM.displayName;var Zp="rovingFocusGroup.onEntryFocus",GK={bubbles:!1,cancelable:!0},Qc="RovingFocusGroup",[cx,gM,YK]=EE(Qc),[XK,xM]=xi(Qc,[YK]),[JK,QK]=XK(Qc),yM=g.forwardRef((t,n)=>a.jsx(cx.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(cx.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(ZK,{...t,ref:n})})}));yM.displayName=Qc;var ZK=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=t,p=g.useRef(null),m=Re(n,p),x=vh(o),[y,v]=Eo({prop:l,defaultProp:c??null,onChange:d,caller:Qc}),[b,w]=g.useState(!1),j=nn(u),N=gM(s),S=g.useRef(!1),[_,C]=g.useState(0);return g.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(Zp,j),()=>k.removeEventListener(Zp,j)},[j]),a.jsx(JK,{scope:s,orientation:r,dir:x,loop:i,currentTabStopId:y,onItemFocus:g.useCallback(k=>v(k),[v]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:g.useCallback(()=>C(k=>k-1),[]),children:a.jsx(ve.div,{tabIndex:b||_===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{S.current=!0}),onFocus:ge(t.onFocus,k=>{const E=!S.current;if(k.target===k.currentTarget&&E&&!b){const M=new CustomEvent(Zp,GK);if(k.currentTarget.dispatchEvent(M),!M.defaultPrevented){const D=N().filter(F=>F.focusable),R=D.find(F=>F.active),T=D.find(F=>F.id===y),L=[R,T,...D].filter(Boolean).map(F=>F.ref.current);wM(L,f)}}S.current=!1}),onBlur:ge(t.onBlur,()=>w(!1))})})}),vM="RovingFocusGroupItem",bM=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:o,children:l,...c}=t,d=Jr(),u=o||d,f=QK(vM,s),h=f.currentTabStopId===u,p=gM(s),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:y}=f;return g.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),a.jsx(cx.ItemSlot,{scope:s,id:u,focusable:r,active:i,children:a.jsx(ve.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...c,ref:n,onMouseDown:ge(t.onMouseDown,v=>{r?f.onItemFocus(u):v.preventDefault()}),onFocus:ge(t.onFocus,()=>f.onItemFocus(u)),onKeyDown:ge(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){f.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=nG(v,f.orientation,f.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let j=p().filter(N=>N.focusable).map(N=>N.ref.current);if(b==="last")j.reverse();else if(b==="prev"||b==="next"){b==="prev"&&j.reverse();const N=j.indexOf(v.currentTarget);j=f.loop?sG(j,N+1):j.slice(N+1)}setTimeout(()=>wM(j))}}),children:typeof l=="function"?l({isCurrentTabStop:h,hasTabStop:y!=null}):l})})});bM.displayName=vM;var eG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tG(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function nG(t,n,s){const r=tG(t.key,s);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return eG[r]}function wM(t,n=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:n}),document.activeElement!==s))return}function sG(t,n){return t.map((s,r)=>t[(n+r)%t.length])}var rG=yM,iG=bM,Th="Tabs",[aG]=xi(Th,[xM]),jM=xM(),[oG,Kv]=aG(Th),NM=g.forwardRef((t,n)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,f=vh(c),[h,p]=Eo({prop:r,onChange:i,defaultProp:o??"",caller:Th});return a.jsx(oG,{scope:s,baseId:Jr(),value:h,onValueChange:p,orientation:l,dir:f,activationMode:d,children:a.jsx(ve.div,{dir:f,"data-orientation":l,...u,ref:n})})});NM.displayName=Th;var SM="TabsList",kM=g.forwardRef((t,n)=>{const{__scopeTabs:s,loop:r=!0,...i}=t,o=Kv(SM,s),l=jM(s);return a.jsx(rG,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:r,children:a.jsx(ve.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:n})})});kM.displayName=SM;var CM="TabsTrigger",_M=g.forwardRef((t,n)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...o}=t,l=Kv(CM,s),c=jM(s),d=MM(l.baseId,r),u=AM(l.baseId,r),f=r===l.value;return a.jsx(iG,{asChild:!0,...c,focusable:!i,active:f,children:a.jsx(ve.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:n,onMouseDown:ge(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?l.onValueChange(r):h.preventDefault()}),onKeyDown:ge(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(r)}),onFocus:ge(t.onFocus,()=>{const h=l.activationMode!=="manual";!f&&!i&&h&&l.onValueChange(r)})})})});_M.displayName=CM;var EM="TabsContent",TM=g.forwardRef((t,n)=>{const{__scopeTabs:s,value:r,forceMount:i,children:o,...l}=t,c=Kv(EM,s),d=MM(c.baseId,r),u=AM(c.baseId,r),f=r===c.value,h=g.useRef(f);return g.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Ks,{present:i||f,children:({present:p})=>a.jsx(ve.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:u,tabIndex:0,...l,ref:n,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&o})})});TM.displayName=EM;function MM(t,n){return`${t}-trigger-${n}`}function AM(t,n){return`${t}-content-${n}`}var lG=NM,PM=kM,RM=_M,OM=TM;const cG=lG,DM=g.forwardRef(({className:t,...n},s)=>a.jsx(PM,{ref:s,className:we("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...n}));DM.displayName=PM.displayName;const dx=g.forwardRef(({className:t,...n},s)=>a.jsx(RM,{ref:s,className:we("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...n}));dx.displayName=RM.displayName;const ux=g.forwardRef(({className:t,...n},s)=>a.jsx(OM,{ref:s,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n}));ux.displayName=OM.displayName;const ys=g.forwardRef(({className:t,...n},s)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:s,className:we("w-full caption-bottom text-sm",t),...n})}));ys.displayName="Table";const vs=g.forwardRef(({className:t,...n},s)=>a.jsx("thead",{ref:s,className:we("[&_tr]:border-b",t),...n}));vs.displayName="TableHeader";const bs=g.forwardRef(({className:t,...n},s)=>a.jsx("tbody",{ref:s,className:we("[&_tr:last-child]:border-0",t),...n}));bs.displayName="TableBody";const dG=g.forwardRef(({className:t,...n},s)=>a.jsx("tfoot",{ref:s,className:we("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n}));dG.displayName="TableFooter";const Ae=g.forwardRef(({className:t,...n},s)=>a.jsx("tr",{ref:s,className:we("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n}));Ae.displayName="TableRow";const ce=g.forwardRef(({className:t,...n},s)=>a.jsx("th",{ref:s,className:we("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));ce.displayName="TableHead";const W=g.forwardRef(({className:t,...n},s)=>a.jsx("td",{ref:s,className:we("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));W.displayName="TableCell";const uG=g.forwardRef(({className:t,...n},s)=>a.jsx("caption",{ref:s,className:we("mt-4 text-sm text-muted-foreground",t),...n}));uG.displayName="TableCaption";var fG="Separator",V1="horizontal",hG=["horizontal","vertical"],IM=g.forwardRef((t,n)=>{const{decorative:s,orientation:r=V1,...i}=t,o=pG(r)?r:V1,c=s?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(ve.div,{"data-orientation":o,...c,...i,ref:n})});IM.displayName=fG;function pG(t){return hG.includes(t)}var LM=IM;const Zo=g.forwardRef(({className:t,orientation:n="horizontal",decorative:s=!0,...r},i)=>a.jsx(LM,{ref:i,decorative:s,orientation:n,className:we("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Zo.displayName=LM.displayName;function mG(t,n){return g.useReducer((s,r)=>n[s][r]??s,t)}var Gv="ScrollArea",[$M]=xi(Gv),[gG,es]=$M(Gv),FM=g.forwardRef((t,n)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:o=600,...l}=t,[c,d]=g.useState(null),[u,f]=g.useState(null),[h,p]=g.useState(null),[m,x]=g.useState(null),[y,v]=g.useState(null),[b,w]=g.useState(0),[j,N]=g.useState(0),[S,_]=g.useState(!1),[C,k]=g.useState(!1),E=Re(n,D=>d(D)),M=vh(i);return a.jsx(gG,{scope:s,type:r,dir:M,scrollHideDelay:o,scrollArea:c,viewport:u,onViewportChange:f,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:w,onCornerHeightChange:N,children:a.jsx(ve.div,{dir:M,...l,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});FM.displayName=Gv;var zM="ScrollAreaViewport",BM=g.forwardRef((t,n)=>{const{__scopeScrollArea:s,children:r,nonce:i,...o}=t,l=es(zM,s),c=g.useRef(null),d=Re(n,c,l.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),a.jsx(ve.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BM.displayName=zM;var Gs="ScrollAreaScrollbar",Yv=g.forwardRef((t,n)=>{const{forceMount:s,...r}=t,i=es(Gs,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=i,c=t.orientation==="horizontal";return g.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),i.type==="hover"?a.jsx(xG,{...r,ref:n,forceMount:s}):i.type==="scroll"?a.jsx(yG,{...r,ref:n,forceMount:s}):i.type==="auto"?a.jsx(VM,{...r,ref:n,forceMount:s}):i.type==="always"?a.jsx(Xv,{...r,ref:n}):null});Yv.displayName=Gs;var xG=g.forwardRef((t,n)=>{const{forceMount:s,...r}=t,i=es(Gs,t.__scopeScrollArea),[o,l]=g.useState(!1);return g.useEffect(()=>{const c=i.scrollArea;let d=0;if(c){const u=()=>{window.clearTimeout(d),l(!0)},f=()=>{d=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),a.jsx(Ks,{present:s||o,children:a.jsx(VM,{"data-state":o?"visible":"hidden",...r,ref:n})})}),yG=g.forwardRef((t,n)=>{const{forceMount:s,...r}=t,i=es(Gs,t.__scopeScrollArea),o=t.orientation==="horizontal",l=Ah(()=>d("SCROLL_END"),100),[c,d]=mG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,i.scrollHideDelay,d]),g.useEffect(()=>{const u=i.viewport,f=o?"scrollLeft":"scrollTop";if(u){let h=u[f];const p=()=>{const m=u[f];h!==m&&(d("SCROLL"),l()),h=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[i.viewport,o,d,l]),a.jsx(Ks,{present:s||c!=="hidden",children:a.jsx(Xv,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:n,onPointerEnter:ge(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ge(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),VM=g.forwardRef((t,n)=>{const s=es(Gs,t.__scopeScrollArea),{forceMount:r,...i}=t,[o,l]=g.useState(!1),c=t.orientation==="horizontal",d=Ah(()=>{if(s.viewport){const u=s.viewport.offsetWidth<s.viewport.scrollWidth,f=s.viewport.offsetHeight<s.viewport.scrollHeight;l(c?u:f)}},10);return To(s.viewport,d),To(s.content,d),a.jsx(Ks,{present:r||o,children:a.jsx(Xv,{"data-state":o?"visible":"hidden",...i,ref:n})})}),Xv=g.forwardRef((t,n)=>{const{orientation:s="vertical",...r}=t,i=es(Gs,t.__scopeScrollArea),o=g.useRef(null),l=g.useRef(0),[c,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=KM(c.viewport,c.content),f={...r,sizes:c,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:p=>o.current=p,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:p=>l.current=p};function h(p,m){return SG(p,l.current,c,m)}return s==="horizontal"?a.jsx(vG,{...f,ref:n,onThumbPositionChange:()=>{if(i.viewport&&o.current){const p=i.viewport.scrollLeft,m=H1(p,c,i.dir);o.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=h(p,i.dir))}}):s==="vertical"?a.jsx(bG,{...f,ref:n,onThumbPositionChange:()=>{if(i.viewport&&o.current){const p=i.viewport.scrollTop,m=H1(p,c);o.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=h(p))}}):null}),vG=g.forwardRef((t,n)=>{const{sizes:s,onSizesChange:r,...i}=t,o=es(Gs,t.__scopeScrollArea),[l,c]=g.useState(),d=g.useRef(null),u=Re(n,d,o.onScrollbarXChange);return g.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),a.jsx(UM,{"data-orientation":"horizontal",...i,ref:u,sizes:s,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Mh(s)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const p=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(p),YM(p,h)&&f.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:yf(l.paddingLeft),paddingEnd:yf(l.paddingRight)}})}})}),bG=g.forwardRef((t,n)=>{const{sizes:s,onSizesChange:r,...i}=t,o=es(Gs,t.__scopeScrollArea),[l,c]=g.useState(),d=g.useRef(null),u=Re(n,d,o.onScrollbarYChange);return g.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),a.jsx(UM,{"data-orientation":"vertical",...i,ref:u,sizes:s,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Mh(s)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const p=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(p),YM(p,h)&&f.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:yf(l.paddingTop),paddingEnd:yf(l.paddingBottom)}})}})}),[wG,HM]=$M(Gs),UM=g.forwardRef((t,n)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:h,...p}=t,m=es(Gs,s),[x,y]=g.useState(null),v=Re(n,E=>y(E)),b=g.useRef(null),w=g.useRef(""),j=m.viewport,N=r.content-r.viewport,S=nn(f),_=nn(d),C=Ah(h,10);function k(E){if(b.current){const M=E.clientX-b.current.left,D=E.clientY-b.current.top;u({x:M,y:D})}}return g.useEffect(()=>{const E=M=>{const D=M.target;(x==null?void 0:x.contains(D))&&S(M,N)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[j,x,N,S]),g.useEffect(_,[r,_]),To(x,C),To(m.content,C),a.jsx(wG,{scope:s,scrollbar:x,hasThumb:i,onThumbChange:nn(o),onThumbPointerUp:nn(l),onThumbPositionChange:_,onThumbPointerDown:nn(c),children:a.jsx(ve.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:ge(t.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),b.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(E))}),onPointerMove:ge(t.onPointerMove,k),onPointerUp:ge(t.onPointerUp,E=>{const M=E.target;M.hasPointerCapture(E.pointerId)&&M.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),xf="ScrollAreaThumb",WM=g.forwardRef((t,n)=>{const{forceMount:s,...r}=t,i=HM(xf,t.__scopeScrollArea);return a.jsx(Ks,{present:s||i.hasThumb,children:a.jsx(jG,{ref:n,...r})})}),jG=g.forwardRef((t,n)=>{const{__scopeScrollArea:s,style:r,...i}=t,o=es(xf,s),l=HM(xf,s),{onThumbPositionChange:c}=l,d=Re(n,h=>l.onThumbChange(h)),u=g.useRef(void 0),f=Ah(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const h=o.viewport;if(h){const p=()=>{if(f(),!u.current){const m=kG(h,c);u.current=m,c()}};return c(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[o.viewport,f,c]),a.jsx(ve.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ge(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),x=h.clientX-m.left,y=h.clientY-m.top;l.onThumbPointerDown({x,y})}),onPointerUp:ge(t.onPointerUp,l.onThumbPointerUp)})});WM.displayName=xf;var Jv="ScrollAreaCorner",qM=g.forwardRef((t,n)=>{const s=es(Jv,t.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?a.jsx(NG,{...t,ref:n}):null});qM.displayName=Jv;var NG=g.forwardRef((t,n)=>{const{__scopeScrollArea:s,...r}=t,i=es(Jv,s),[o,l]=g.useState(0),[c,d]=g.useState(0),u=!!(o&&c);return To(i.scrollbarX,()=>{var h;const f=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(f),d(f)}),To(i.scrollbarY,()=>{var h;const f=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(f),l(f)}),u?a.jsx(ve.div,{...r,ref:n,style:{width:o,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function yf(t){return t?parseInt(t,10):0}function KM(t,n){const s=t/n;return isNaN(s)?0:s}function Mh(t){const n=KM(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-s)*n;return Math.max(r,18)}function SG(t,n,s,r="ltr"){const i=Mh(s),o=i/2,l=n||o,c=i-l,d=s.scrollbar.paddingStart+l,u=s.scrollbar.size-s.scrollbar.paddingEnd-c,f=s.content-s.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return GM([d,u],h)(t)}function H1(t,n,s="ltr"){const r=Mh(n),i=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,o=n.scrollbar.size-i,l=n.content-n.viewport,c=o-r,d=s==="ltr"?[0,l]:[l*-1,0],u=Qg(t,d);return GM([0,l],[0,c])(u)}function GM(t,n){return s=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(t[1]-t[0]);return n[0]+r*(s-t[0])}}function YM(t,n){return t>0&&t<n}var kG=(t,n=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const o={left:t.scrollLeft,top:t.scrollTop},l=s.left!==o.left,c=s.top!==o.top;(l||c)&&n(),s=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Ah(t,n){const s=nn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,n)},[s,n])}function To(t,n){const s=nn(n);Dt(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,s])}var XM=FM,CG=BM,_G=qM;const JM=g.forwardRef(({className:t,children:n,...s},r)=>a.jsxs(XM,{ref:r,className:we("relative overflow-hidden",t),...s,children:[a.jsx(CG,{className:"h-full w-full rounded-[inherit]",children:n}),a.jsx(QM,{}),a.jsx(_G,{})]}));JM.displayName=XM.displayName;const QM=g.forwardRef(({className:t,orientation:n="vertical",...s},r)=>a.jsx(Yv,{ref:r,orientation:n,className:we("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:a.jsx(WM,{className:"relative flex-1 rounded-full bg-border"})}));QM.displayName=Yv.displayName;const EG=Tv("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function or({className:t,variant:n,...s}){return a.jsx("div",{className:we(EG({variant:n}),t),...s})}const ZM=["tablet","injection","syrup","capsule","ointment","drops","tonic","other"],eA="__all__",TG=t=>t===eA?"":t;function MG(){const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState(""),[f,h]=g.useState(!0),p=yh(i,250),[m,x]=g.useState(null),[y,v]=g.useState(!1),[b,w]=g.useState(!1),[j,N]=g.useState(null),[S,_]=g.useState("xlsx"),[C,k]=g.useState(!1),E=async()=>{var P,L;r(!0);try{const{data:F}=await ya({q:p||void 0,form:l||void 0,class_name:d||void 0,is_active:f?!0:void 0,limit:200});n(F||[])}catch(F){$.error("Failed to load medicines",{description:((L=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:L.detail)||"Please retry."})}finally{r(!1)}};g.useEffect(()=>{E()},[p,l,d,f]);const M=async P=>{var L,F;try{m!=null&&m.id?await rU(m.id,P):await sU(P),v(!1),x(null),await E(),$.success("Saved",{description:"Medicine saved successfully."})}catch(B){$.error("Save failed",{description:((F=(L=B==null?void 0:B.response)==null?void 0:L.data)==null?void 0:F.detail)||"Try again."})}},D=async P=>{var L,F;if(window.confirm(`Delete ${P.name}?`))try{await iU(P.id),await E(),$.success("Deleted",{description:"Medicine removed."})}catch(B){$.error("Delete failed",{description:((F=(L=B==null?void 0:B.response)==null?void 0:L.data)==null?void 0:F.detail)||"Try again."})}},R=async()=>{var P,L;try{const F=await aU(S),B=URL.createObjectURL(F),A=document.createElement("a");A.href=B,A.download=S==="xlsx"?"medicine_import_sample.xlsx":"medicine_import_sample.csv",A.click(),URL.revokeObjectURL(B)}catch(F){$.error("Could not download sample",{description:((L=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:L.detail)||"Try again."})}},T=async()=>{var P,L;if(!j){$.error("Choose a file",{description:"Select an .xlsx or .csv file to continue."});return}k(!0);try{await oU(j,!0),N(null),w(!1),$.success("Imported",{description:"Medicines imported successfully."}),await E()}catch(F){$.error("Import failed",{description:((L=(P=F==null?void 0:F.response)==null?void 0:P.data)==null?void 0:L.detail)||"Please check the format and retry."})}finally{k(!1)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Medicines"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(pe,{anyOf:["pharmacy.masters.manage"],children:[a.jsxs(te,{onClick:()=>{x(null),v(!0)},children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New"]}),a.jsxs(te,{variant:"outline",onClick:()=>w(!0),children:[a.jsx(pc,{className:"h-4 w-4 mr-2"})," Import"]})]})})]}),a.jsx(Le,{children:a.jsx(Ue,{className:"p-4",children:a.jsxs("div",{className:"grid gap-3 md:grid-cols-5 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx(ue,{className:"pl-9",placeholder:"Code, brand, generic, manufacturer",value:i,onChange:P=>o(P.target.value)})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Form"}),a.jsxs(at,{value:l,onValueChange:P=>c(TG(P)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:eA,children:"All"}),ZM.map(P=>a.jsx(Te,{value:P,children:P},P))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Therapeutic class"}),a.jsx(ue,{placeholder:"e.g. Antibiotic",value:d,onChange:P=>u(P.target.value)})]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{id:"activeOnly",type:"checkbox",className:"h-4 w-4",checked:f,onChange:P=>h(P.target.checked)}),a.jsx(J,{htmlFor:"activeOnly",children:"Active only"})]})]})})}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Catalog"})}),a.jsx(Ue,{className:"p-0",children:a.jsx(JM,{className:"max-h-[65vh]",children:a.jsxs(ys,{children:[a.jsx(vs,{className:"sticky top-0 bg-white",children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Code"}),a.jsx(ce,{children:"Name"}),a.jsx(ce,{children:"Form"}),a.jsx(ce,{children:"Strength"}),a.jsx(ce,{children:"Pack"}),a.jsx(ce,{children:"Default Price"}),a.jsx(ce,{children:"Reorder"}),a.jsx(ce,{className:"w-[120px]"})]})}),a.jsxs(bs,{children:[s&&Array.from({length:8}).map((P,L)=>a.jsxs(Ae,{children:[a.jsx(W,{children:a.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),a.jsxs(W,{children:[a.jsx("div",{className:"h-4 w-48 animate-pulse rounded bg-gray-200 mb-1"}),a.jsx("div",{className:"h-3 w-32 animate-pulse rounded bg-gray-200"})]}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-16 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-12 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{})]},`sk-${L}`)),!s&&t.map(P=>a.jsx(li,{children:a.jsxs(Gt.tr,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.15},className:"border-b",children:[a.jsx(W,{className:"font-mono",children:P.code}),a.jsxs(W,{children:[a.jsxs("div",{className:"font-medium flex items-center gap-2",children:[P.name,!!P.lasa_flag&&a.jsx(or,{variant:"secondary",className:"bg-amber-50 text-amber-800",children:"LASA"}),P.is_active===!1&&a.jsx(or,{variant:"outline",className:"text-gray-600",children:"Inactive"})]}),a.jsx("div",{className:"text-xs text-gray-500",children:P.generic_name||""})]}),a.jsx(W,{className:"capitalize",children:P.form}),a.jsx(W,{children:P.strength||""}),a.jsxs(W,{children:[P.pack_size||1," ",P.unit]}),a.jsx(W,{children:P.default_price??""}),a.jsx(W,{children:P.reorder_level??0}),a.jsx(W,{className:"text-right",children:a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>{x(P),v(!0)},title:"Edit",children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>D(P),title:"Delete",children:a.jsx(Ws,{className:"h-4 w-4 text-rose-600"})})]})})})]})},P.id)),!s&&t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No records"})})]})]})})})]}),a.jsx(ui,{open:y,onOpenChange:v,children:a.jsxs(gr,{className:"sm:max-w-2xl",children:[a.jsx(xr,{children:a.jsx(yr,{children:m?"Edit Medicine":"New Medicine"})}),a.jsx(AG,{initial:m,onCancel:()=>v(!1),onSave:M})]})}),a.jsx(ui,{open:b,onOpenChange:w,children:a.jsxs(gr,{className:"sm:max-w-xl",children:[a.jsx(xr,{children:a.jsx(yr,{children:"Import Medicines"})}),a.jsxs(cG,{defaultValue:"howto",className:"w-full",children:[a.jsxs(DM,{className:"grid grid-cols-2",children:[a.jsx(dx,{value:"howto",children:"How it works"}),a.jsx(dx,{value:"upload",children:"Upload"})]}),a.jsxs(ux,{value:"howto",className:"space-y-3 text-sm",children:[a.jsx("p",{children:"Download a sample file that matches the exact columns supported by your backend."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(at,{value:S,onValueChange:_,children:[a.jsx(et,{className:"w-40",children:a.jsx(ot,{placeholder:"Format"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:"xlsx",children:"Excel (.xlsx)"}),a.jsx(Te,{value:"csv",children:"CSV (.csv)"})]})]}),a.jsxs(te,{variant:"outline",onClick:R,children:[a.jsx(Dy,{className:"h-4 w-4 mr-2"})," Sample"]})]}),a.jsx(Zo,{}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Expected columns (order can vary; header names must match):"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-xs",children:["code","name","generic_name","form","strength","unit","pack_size","manufacturer","class_name","atc_code","lasa_flag","default_tax_percent","default_price","default_mrp","reorder_level","is_active"].map(P=>a.jsx(or,{variant:"secondary",className:"justify-start",children:P},P))})]})]}),a.jsxs(ux,{value:"upload",className:"space-y-3 text-sm",children:[a.jsx(J,{children:"Upload file"}),a.jsx(ue,{type:"file",accept:".xlsx,.csv",onChange:P=>{var L;return N(((L=P.target.files)==null?void 0:L[0])||null)}}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Tips: Keep booleans as ",a.jsx("code",{children:"true/false"}),", and empty numeric fields as blank."]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx(te,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),a.jsxs(te,{onClick:T,disabled:C,children:[a.jsx(pc,{className:"h-4 w-4 mr-2"})," ",C?"Importing":"Import"]})]})]})]})]})})]})}function AG({initial:t,onCancel:n,onSave:s}){const[r,i]=g.useState({code:"",name:"",generic_name:"",form:"tablet",strength:"",unit:"unit",pack_size:1,manufacturer:"",class_name:"",atc_code:"",lasa_flag:!1,default_tax_percent:"",default_price:"",default_mrp:"",reorder_level:0,is_active:!0});g.useEffect(()=>{t&&i({code:t.code||"",name:t.name||"",generic_name:t.generic_name||"",form:t.form||"tablet",strength:t.strength||"",unit:t.unit||"unit",pack_size:t.pack_size??1,manufacturer:t.manufacturer||"",class_name:t.class_name||"",atc_code:t.atc_code||"",lasa_flag:!!t.lasa_flag,default_tax_percent:t.default_tax_percent??"",default_price:t.default_price??"",default_mrp:t.default_mrp??"",reorder_level:t.reorder_level??0,is_active:t.is_active!==!1})},[t]);const o=(c,d)=>i(u=>({...u,[c]:d})),l=c=>{c.preventDefault();const d={...r,default_tax_percent:r.default_tax_percent===""?null:Number(r.default_tax_percent),default_price:r.default_price===""?null:Number(r.default_price),default_mrp:r.default_mrp===""?null:Number(r.default_mrp),pack_size:Number(r.pack_size||1),reorder_level:Number(r.reorder_level||0)};s(d)};return a.jsx(li,{mode:"wait",children:a.jsxs(Gt.form,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},onSubmit:l,className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Code"}),a.jsx(ue,{value:r.code,onChange:c=>o("code",c.target.value),required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Name (Brand)"}),a.jsx(ue,{value:r.name,onChange:c=>o("name",c.target.value),required:!0})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx(J,{children:"Generic name"}),a.jsx(ue,{value:r.generic_name,onChange:c=>o("generic_name",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Form"}),a.jsxs(at,{value:r.form,onValueChange:c=>o("form",c),children:[a.jsx(et,{children:a.jsx(ot,{})}),a.jsx(tt,{children:ZM.map(c=>a.jsx(Te,{value:c,children:c},c))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Strength"}),a.jsx(ue,{value:r.strength,onChange:c=>o("strength",c.target.value),placeholder:"500mg / 5mg/ml"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Unit"}),a.jsx(ue,{value:r.unit,onChange:c=>o("unit",c.target.value),placeholder:"tablet/ml/vial"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Pack size"}),a.jsx(ue,{type:"number",value:r.pack_size,onChange:c=>o("pack_size",c.target.value)})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Manufacturer"}),a.jsx(ue,{value:r.manufacturer,onChange:c=>o("manufacturer",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Therapeutic class"}),a.jsx(ue,{value:r.class_name,onChange:c=>o("class_name",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"ATC code"}),a.jsx(ue,{value:r.atc_code,onChange:c=>o("atc_code",c.target.value)})]}),a.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[a.jsx("input",{id:"lasa",type:"checkbox",className:"h-4 w-4",checked:r.lasa_flag,onChange:c=>o("lasa_flag",c.target.checked)}),a.jsx(J,{htmlFor:"lasa",children:"LASA (Look-Alike / Sound-Alike)"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Default tax %"}),a.jsx(ue,{type:"number",step:"0.01",value:r.default_tax_percent,onChange:c=>o("default_tax_percent",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Default price"}),a.jsx(ue,{type:"number",step:"0.01",value:r.default_price,onChange:c=>o("default_price",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Default MRP"}),a.jsx(ue,{type:"number",step:"0.01",value:r.default_mrp,onChange:c=>o("default_mrp",c.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Reorder level"}),a.jsx(ue,{type:"number",value:r.reorder_level,onChange:c=>o("reorder_level",c.target.value)})]}),a.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[a.jsx("input",{id:"active",type:"checkbox",className:"h-4 w-4",checked:r.is_active,onChange:c=>o("is_active",c.target.checked)}),a.jsx(J,{htmlFor:"active",children:"Active"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),a.jsx(te,{type:"submit",children:"Save"})]})]},t!=null&&t.id?"edit":"new")})}function PG(){const[t,n]=g.useState([]),[s,r]=g.useState(""),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,u]=g.useState(!1),[f,h]=g.useState({name:"",contact_person:"",phone:"",email:"",gstin:"",address:"",payment_terms:"",is_active:!0}),p=async()=>{var N,S;try{const{data:_}=await _v({q:s||void 0});n(_||[])}catch(_){$.error("Load failed",{description:((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Please retry."})}};g.useEffect(()=>{p()},[s]);const m=(N,S)=>h(_=>({..._,[N]:S})),x=()=>{c(null),h({name:"",contact_person:"",phone:"",email:"",gstin:"",address:"",payment_terms:"",is_active:!0})},y=()=>{x(),o(!0)},v=N=>{c(N),h({...N}),o(!0)},b=()=>{var N;return(N=f.name)!=null&&N.trim()?f.email&&!/^\S+@\S+\.\S+$/.test(f.email)?"Invalid email":f.phone&&!/^[\d+\-\s()]{6,}$/.test(f.phone)?"Invalid phone":null:"Name is required"},w=async()=>{var S,_;const N=b();if(N){$.error("Validation error",{description:N});return}u(!0);try{l?await cU(l.id,f):await lU(f),o(!1),c(null),await p(),$.success("Saved",{description:"Supplier saved successfully."})}catch(C){$.error("Save failed",{description:((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}finally{u(!1)}},j=async N=>{var S,_;if(window.confirm(`Delete ${N.name}?`))try{await dU(N.id),await p(),$.success("Deleted",{description:"Supplier removed."})}catch(C){$.error("Delete failed",{description:((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Suppliers"}),a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsxs(te,{onClick:y,children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New"]})})]}),a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Suppliers"})}),a.jsxs(Ue,{children:[a.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:a.jsxs("div",{children:[a.jsx(J,{children:"Search"}),a.jsx(ue,{value:s,onChange:N=>r(N.target.value),placeholder:"Name, phone, email, GSTIN"})]})}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"overflow-auto",children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Name"}),a.jsx(ce,{children:"Contact"}),a.jsx(ce,{children:"Phone"}),a.jsx(ce,{children:"GSTIN"}),a.jsx(ce,{children:"Status"}),a.jsx(ce,{})]})}),a.jsxs(bs,{children:[(t||[]).map((N,S)=>a.jsxs(Gt.tr,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.01*S},className:"border-b",children:[a.jsx(W,{className:"font-medium",children:N.name}),a.jsxs(W,{children:[N.contact_person||"","  ",N.email||""]}),a.jsx(W,{children:N.phone||""}),a.jsx(W,{children:N.gstin||""}),a.jsx(W,{children:a.jsx("span",{className:["rounded-md px-2 py-0.5 text-xs border",N.is_active?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"].join(" "),children:N.is_active?"Active":"Inactive"})}),a.jsx(W,{className:"text-right",children:a.jsxs(pe,{anyOf:["pharmacy.masters.manage"],children:[a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>v(N),children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>j(N),children:a.jsx(Ws,{className:"h-4 w-4 text-rose-600"})})]})})]},N.id)),t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:6,className:"text-center py-6 text-sm text-gray-500",children:"No suppliers"})})]})]})})})]})]})}),a.jsx(ui,{open:i,onOpenChange:o,children:a.jsxs(gr,{className:"sm:max-w-2xl",children:[a.jsx(xr,{children:a.jsx(yr,{children:l?"Edit Supplier":"New Supplier"})}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2 text-sm",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Name"}),a.jsx(ue,{value:f.name,onChange:N=>m("name",N.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Contact person"}),a.jsx(ue,{value:f.contact_person,onChange:N=>m("contact_person",N.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Phone"}),a.jsx(ue,{value:f.phone,onChange:N=>m("phone",N.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Email"}),a.jsx(ue,{value:f.email,onChange:N=>m("email",N.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"GSTIN"}),a.jsx(ue,{value:f.gstin,onChange:N=>m("gstin",N.target.value)})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Address"}),a.jsx(ue,{value:f.address,onChange:N=>m("address",N.target.value)})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Payment terms"}),a.jsx(ue,{value:f.payment_terms,onChange:N=>m("payment_terms",N.target.value)})]}),a.jsx(Zo,{className:"md:col-span-2"}),a.jsxs("div",{className:"flex gap-2 items-center md:col-span-2",children:[a.jsx("input",{id:"sup-active",type:"checkbox",className:"h-4 w-4",checked:!!f.is_active,onChange:N=>m("is_active",N.target.checked)}),a.jsx(J,{htmlFor:"sup-active",children:"Active"})]})]}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsx(te,{onClick:w,disabled:d,children:d?"Saving":"Save"})]})]})})]})}function RG(){const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,o]=g.useState(""),l=yh(i,250),[c,d]=g.useState(!1),[u,f]=g.useState(null),[h,p]=g.useState({code:"",name:"",is_active:!0}),[m,x]=g.useState(!1),y=(S,_)=>p(C=>({...C,[S]:_})),v=async()=>{var S,_;r(!0);try{const{data:C}=await Ko({q:l||void 0});n(C||[])}catch(C){$.error("Load failed",{description:((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Please retry."})}finally{r(!1)}};g.useEffect(()=>{v()},[l]);const b=()=>{f(null),p({code:"",name:"",is_active:!0}),d(!0)},w=S=>{f(S),p({code:S.code||"",name:S.name||"",is_active:!!S.is_active}),d(!0)},j=async()=>{var S,_,C,k;if(!((S=h.code)!=null&&S.trim())||!((_=h.name)!=null&&_.trim())){$.error("Missing fields",{description:"Code and Name are required."});return}x(!0);try{u?await fU(u.id,h):await uU(h),d(!1),f(null),await v(),$.success("Saved",{description:"Location saved successfully."})}catch(E){$.error("Save failed",{description:((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Please retry."})}finally{x(!1)}},N=async S=>{var _,C;if(window.confirm(`Delete location "${S.name}"? This cannot be undone.`))try{await hU(S.id),await v(),$.success("Deleted",{description:"Location removed."})}catch(k){$.error("Delete failed",{description:((C=(_=k==null?void 0:k.response)==null?void 0:_.data)==null?void 0:C.detail)||"Please retry."})}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Locations"}),a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsxs(te,{onClick:b,children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New"]})})]}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Locations"})}),a.jsxs(Ue,{children:[a.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:a.jsxs("div",{children:[a.jsx(J,{children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx(ue,{className:"pl-9",value:i,onChange:S=>o(S.target.value),placeholder:"Code, name"})]})]})}),a.jsx("div",{className:"mt-4 overflow-auto rounded-lg border",children:a.jsxs(ys,{children:[a.jsx(vs,{className:"sticky top-0 bg-white",children:a.jsxs(Ae,{children:[a.jsx(ce,{className:"w-[160px]",children:"Code"}),a.jsx(ce,{children:"Name"}),a.jsx(ce,{className:"w-[140px]",children:"Status"}),a.jsx(ce,{className:"w-[120px]"})]})}),a.jsxs(bs,{children:[s&&Array.from({length:6}).map((S,_)=>a.jsxs(Ae,{children:[a.jsx(W,{children:a.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-64 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-5 w-20 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{})]},`sk-${_}`)),!s&&t.map(S=>a.jsxs(Ae,{className:"hover:bg-gray-50 transition-colors",children:[a.jsx(W,{className:"font-mono",children:S.code}),a.jsx(W,{className:"font-medium",children:S.name}),a.jsx(W,{children:S.is_active?a.jsx(or,{variant:"secondary",className:"bg-emerald-50 text-emerald-800 hover:bg-emerald-50",children:"Active"}):a.jsx(or,{variant:"outline",className:"text-gray-600",children:"Inactive"})}),a.jsx(W,{className:"text-right",children:a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>w(S),title:"Edit",children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx(te,{size:"icon",variant:"ghost",onClick:()=>N(S),title:"Delete",children:a.jsx(Ws,{className:"h-4 w-4 text-rose-600"})})]})})})]},S.id)),!s&&t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:4,className:"text-center py-6 text-sm text-gray-500",children:"No locations"})})]})]})})]})]}),a.jsx(ui,{open:c,onOpenChange:d,children:a.jsxs(gr,{className:"sm:max-w-md",children:[a.jsx(xr,{children:a.jsx(yr,{children:u?"Edit Location":"New Location"})}),a.jsx(li,{mode:"wait",children:a.jsxs(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"grid gap-3 md:grid-cols-2 text-sm",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Code"}),a.jsx(ue,{value:h.code,onChange:S=>y("code",S.target.value),placeholder:"e.g. MAIN, ICU, SAT1"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Name"}),a.jsx(ue,{value:h.name,onChange:S=>y("name",S.target.value),placeholder:"Main Pharmacy"})]}),a.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 pt-1",children:[a.jsx("input",{id:"loc-active",type:"checkbox",className:"h-4 w-4",checked:!!h.is_active,onChange:S=>y("is_active",S.target.checked)}),a.jsx(J,{htmlFor:"loc-active",children:"Active"})]})]},u?"edit":"new")}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),a.jsx(te,{onClick:j,disabled:m,children:m?"Saving":"Save"})]})]})})]})}function OG(){var jt,_t;const[t,n]=g.useState([]),[s,r]=g.useState(!1),i="__all__",o=q=>q===i?"":q,[l,c]=g.useState(""),d=yh(l,250),[u,f]=g.useState(""),[h,p]=g.useState(""),[m,x]=g.useState(!1),[y,v]=g.useState(""),[b,w]=g.useState([]),[j,N]=g.useState([]),[S,_]=g.useState(!1),[C,k]=g.useState(!1),[E,M]=g.useState(!1),[D,R]=g.useState(!1),[T,P]=g.useState(null),[L,F]=g.useState(0),[B,A]=g.useState("stock_take"),[O,z]=g.useState(""),[H,X]=g.useState(0),Q=q=>q&&new Date(q)<new Date,ie=q=>{if(!q)return!1;const Ee=new Date(q),_e=new Date;return _e.setDate(_e.getDate()+30),Ee>=new Date&&Ee<=_e},oe=q=>{const Ee=Number((q==null?void 0:q.reorder_level)??NaN);return Number.isFinite(Ee)&&Number(q.on_hand)<=Ee},je=async()=>{var q,Ee;r(!0);try{const{data:_e}=await pU({q:d||void 0,location_id:u||void 0,medicine_id:h||void 0,expiry_before:y||void 0,only_low:m?!0:void 0,limit:500});n(_e||[])}catch(_e){$.error("Failed to load inventory",{description:((Ee=(q=_e==null?void 0:_e.response)==null?void 0:q.data)==null?void 0:Ee.detail)||"Please retry."})}finally{r(!1)}};g.useEffect(()=>{je()},[d,u,h,y,m]),g.useEffect(()=>{(async()=>{var q,Ee;try{const[_e,Lt]=await Promise.all([Ko().then(nt=>nt.data||[]),ya({limit:1e3,is_active:!0}).then(nt=>nt.data||[])]);w(_e),N(Lt)}catch(_e){$.error("Failed to load filters",{description:((Ee=(q=_e==null?void 0:_e.response)==null?void 0:q.data)==null?void 0:Ee.detail)||"Please refresh."})}})()},[]);const Z=q=>{P(q),F(0),A("stock_take"),_(!0)},ae=q=>{P(q),z(""),X(0),k(!0)},Pe=()=>{const q=Number(L||0);if(!Number.isFinite(q))return"Enter a valid number.";if(q===0)return"Change cannot be 0.";const Ee=Number((T==null?void 0:T.on_hand)||0)+q;return Ee<0?`Cannot reduce below 0 (would be ${Ee}).`:null},ke=()=>{const q=Number(H||0);return O?q>0?q>Number((T==null?void 0:T.on_hand)||0)?`Only ${T==null?void 0:T.on_hand} available.`:null:"Quantity must be > 0.":"Select a destination."},Ne=async()=>{var Ee,_e;const q=Pe();if(q){$.error("Cannot adjust",{description:q});return}M(!0);try{await mU({lot_id:T.id,qty_change:Number(L||0),reason:B}),_(!1),$.success("Adjusted",{description:`Lot ${T.batch}: on-hand updated.`}),await je()}catch(Lt){$.error("Adjust failed",{description:((_e=(Ee=Lt==null?void 0:Lt.response)==null?void 0:Ee.data)==null?void 0:_e.detail)||"Please retry."})}finally{M(!1)}},xe=async()=>{var Ee,_e;const q=ke();if(q){$.error("Cannot transfer",{description:q});return}R(!0);try{await gU({lot_id:T.id,from_location_id:T.location_id,to_location_id:Number(O),qty:Number(H||0)}),k(!1),$.success("Transferred",{description:`Moved ${H} unit(s) of ${T.batch}.`}),await je()}catch(Lt){$.error("Transfer failed",{description:((_e=(Ee=Lt==null?void 0:Lt.response)==null?void 0:Ee.data)==null?void 0:_e.detail)||"Please retry."})}finally{R(!1)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Inventory (Lots)"})}),a.jsx(Le,{children:a.jsx(Ue,{className:"p-4",children:a.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx(ue,{className:"pl-9",placeholder:"Medicine code/name/batch",value:l,onChange:q=>c(q.target.value)})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Location"}),a.jsxs(at,{value:u||i,onValueChange:q=>f(o(q)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:i,children:"All"}),b.map(q=>a.jsxs(Te,{value:String(q.id),children:[q.code,"  ",q.name]},q.id))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:h,onValueChange:q=>p(o(q)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:i,children:"All"}),j.map(q=>a.jsxs(Te,{value:String(q.id),children:[q.code,"  ",q.name]},q.id))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Expiry before"}),a.jsx(ue,{type:"date",value:y,onChange:q=>v(q.target.value)})]}),a.jsxs("div",{className:"flex gap-2 items-center pt-6 md:pt-0",children:[a.jsx("input",{id:"onlyLow",type:"checkbox",className:"h-4 w-4",checked:m,onChange:q=>x(q.target.checked)}),a.jsx(J,{htmlFor:"onlyLow",children:"Low stock only"})]})]})})}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Lots"})}),a.jsx(Ue,{className:"p-0",children:a.jsx("div",{className:"overflow-auto",children:a.jsxs(ys,{children:[a.jsx(vs,{className:"sticky top-0 bg-white",children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Medicine"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"Batch"}),a.jsx(ce,{children:"Expiry"}),a.jsx(ce,{className:"text-right",children:"On Hand"}),a.jsx(ce,{className:"text-right",children:"Price"}),a.jsx(ce,{className:"text-right",children:"Status"}),a.jsx(ce,{})]})}),a.jsxs(bs,{children:[s&&Array.from({length:6}).map((q,Ee)=>a.jsxs(Ae,{children:[a.jsx(W,{children:a.jsx("div",{className:"h-4 w-40 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{className:"text-right",children:a.jsx("div",{className:"ml-auto h-4 w-10 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{className:"text-right",children:a.jsx("div",{className:"ml-auto h-4 w-12 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{className:"text-right",children:a.jsx("div",{className:"ml-auto h-4 w-24 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{})]},`sk-${Ee}`)),!s&&t.map(q=>{var nt,nd,sd;const Ee=Q(q.expiry),_e=ie(q.expiry),Lt=oe(q);return a.jsxs(Ae,{className:[Ee?"bg-rose-50":_e?"bg-amber-50":"","hover:bg-gray-50 transition-colors"].join(" "),children:[a.jsxs(W,{children:[a.jsx("div",{className:"font-medium",children:((nt=q.medicine)==null?void 0:nt.name)||q.medicine_name||`#${q.medicine_id}`}),a.jsx("div",{className:"text-xs text-gray-500",children:((nd=q.medicine)==null?void 0:nd.code)||q.code})]}),a.jsx(W,{children:((sd=q.location)==null?void 0:sd.code)||q.location_id}),a.jsx(W,{children:q.batch}),a.jsx(W,{children:q.expiry}),a.jsx(W,{className:"text-right",children:q.on_hand}),a.jsx(W,{className:"text-right",children:q.sell_price??""}),a.jsx(W,{className:"text-right",children:a.jsxs("div",{className:"inline-flex flex-wrap justify-end gap-1",children:[Ee&&a.jsx(or,{variant:"destructive",children:"Expired"}),!Ee&&_e&&a.jsx(or,{variant:"secondary",children:"Expiring soon"}),Lt&&a.jsx(or,{className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:"Low"})]})}),a.jsx(W,{className:"text-right",children:a.jsx(pe,{anyOf:["pharmacy.inventory.manage"],children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(te,{size:"sm",variant:"outline",onClick:()=>Z(q),children:"Adjust"}),a.jsx(te,{size:"sm",onClick:()=>ae(q),children:"Transfer"})]})})})]},q.id)}),!s&&t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No lots found."})})]})]})})})]}),a.jsx(ui,{open:S,onOpenChange:_,children:a.jsxs(gr,{children:[a.jsx(xr,{children:a.jsx(yr,{children:"Adjust stock"})}),a.jsx(li,{mode:"wait",children:T&&a.jsxs(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:["Lot ",a.jsx("span",{className:"font-medium",children:T.batch}),"  On hand: ",a.jsx("span",{className:"font-medium",children:T.on_hand}),"  Location: ",a.jsx("span",{className:"font-medium",children:((jt=T.location)==null?void 0:jt.code)||T.location_id})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Quantity change"}),a.jsx(ue,{type:"number",value:L,onChange:q=>F(q.target.value),placeholder:"e.g. -3, +5"}),a.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Use negative to decrease. Cannot reduce below 0."})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Reason"}),a.jsx(ue,{value:B,onChange:q=>A(q.target.value)})]})]})]},T.id)}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),a.jsx(te,{onClick:Ne,disabled:E,children:E?"Updating":"Update"})]})]})}),a.jsx(ui,{open:C,onOpenChange:k,children:a.jsxs(gr,{children:[a.jsx(xr,{children:a.jsx(yr,{children:"Transfer stock"})}),a.jsx(li,{mode:"wait",children:T&&a.jsxs(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:["From ",a.jsx("span",{className:"font-medium",children:((_t=T.location)==null?void 0:_t.code)||T.location_id}),"  Batch ",a.jsx("span",{className:"font-medium",children:T.batch}),"  On hand ",a.jsx("span",{className:"font-medium",children:T.on_hand})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx(J,{children:"To Location"}),a.jsxs(at,{value:O,onValueChange:z,children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select location"})}),a.jsx(tt,{children:b.filter(q=>String(q.id)!==String(T==null?void 0:T.location_id)).map(q=>a.jsxs(Te,{value:String(q.id),children:[q.code,"  ",q.name]},q.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Quantity"}),a.jsx(ue,{type:"number",value:H,onChange:q=>X(q.target.value),placeholder:"e.g. 5"})]})]})]},`x-${T.id}`)}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),a.jsx(te,{onClick:xe,disabled:D,children:D?"Transferring":"Transfer"})]})]})})]})}const DG=t=>{const n="inline-flex items-center rounded-md px-2 py-0.5 text-xs border";switch(t){case"grn":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"po_return":return`${n} bg-rose-50 text-rose-700 border-rose-200`;case"dispense":return`${n} bg-rose-50 text-rose-700 border-rose-200`;case"sale_return":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"adjust_in":return`${n} bg-emerald-50 text-emerald-700 border-emerald-200`;case"adjust_out":return`${n} bg-amber-50 text-amber-800 border-amber-200`;case"transfer_in":return`${n} bg-blue-50 text-blue-700 border-blue-200`;case"transfer_out":return`${n} bg-amber-50 text-amber-800 border-amber-200`;default:return`${n} bg-gray-50 text-gray-700 border-gray-200`}};function IG(){const[t,n]=g.useState([]),[s,r]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState(""),[f,h]=g.useState([]),[p,m]=g.useState([]),[x,y]=g.useState(!1),v=yh(s,250),b="__all__",w=C=>C===""||C==null?b:String(C),j=C=>C===b?"":C,N=["grn","po_return","dispense","sale_return","adjust_in","adjust_out","transfer_in","transfer_out"];g.useEffect(()=>{(async()=>{var C,k;try{const[E,M]=await Promise.all([Ko().then(D=>D.data||[]),ya({limit:500}).then(D=>D.data||[])]);h(E),m(M)}catch(E){$.error("Failed to load filters",{description:((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Retry."})}})()},[]);const S=async()=>{var C,k;y(!0);try{const{data:E}=await dE({q:v||void 0,type:i||void 0,location_id:l||void 0,medicine_id:d||void 0,limit:500});n(E||[])}catch(E){$.error("Failed to load transactions",{description:((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Retry."})}finally{y(!1)}};g.useEffect(()=>{S()},[v,i,l,d]);const _=()=>{r(""),o(""),c(""),u("")};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Transactions"}),a.jsxs(te,{variant:"outline",size:"sm",onClick:S,disabled:x,children:[a.jsx(A$,{className:`h-4 w-4 mr-2 ${x?"animate-spin":""}`}),"Reload"]})]}),a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:a.jsx(Le,{children:a.jsx(Ue,{className:"p-4",children:a.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx(ue,{className:"pl-9",placeholder:"Ref, note, batch",value:s,onChange:C=>r(C.target.value)})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Type"}),a.jsxs(at,{value:w(i),onValueChange:C=>o(j(C)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:b,children:"All"}),N.map(C=>a.jsx(Te,{value:C,children:C},C))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Location"}),a.jsxs(at,{value:w(l),onValueChange:C=>c(j(C)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:b,children:"All"}),f.map(C=>a.jsxs(Te,{value:String(C.id),children:[C.code,"  ",C.name]},C.id))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:w(d),onValueChange:C=>u(j(C)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:b,children:"All"}),p.map(C=>a.jsxs(Te,{value:String(C.id),children:[C.code,"  ",C.name]},C.id))]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(te,{type:"button",variant:"outline",onClick:_,children:"Reset"}),a.jsx(te,{type:"button",onClick:S,disabled:x,children:x?"Loading":"Apply"})]})]})})})}),a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18,delay:.04},children:a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Recent activity"})}),a.jsx(Ue,{className:"p-0",children:a.jsx("div",{className:"overflow-auto",children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Time"}),a.jsx(ce,{children:"Type"}),a.jsx(ce,{children:"Medicine"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"Lot"}),a.jsx(ce,{className:"text-right",children:" Qty"}),a.jsx(ce,{children:"Ref"}),a.jsx(ce,{children:"Note"})]})}),a.jsxs(bs,{children:[t.map((C,k)=>a.jsxs(Gt.tr,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.01*k},className:"border-b",children:[a.jsx(W,{children:new Date(C.ts).toLocaleString()}),a.jsx(W,{children:a.jsx("span",{className:DG(C.type),children:C.type})}),a.jsx(W,{children:C.medicine_name||C.medicine_id}),a.jsx(W,{children:C.location_code||C.location_id}),a.jsxs(W,{children:["#",C.lot_id]}),a.jsx(W,{className:`text-right font-medium ${C.qty_change<0?"text-rose-600":"text-emerald-700"}`,children:C.qty_change>0?`+${C.qty_change}`:C.qty_change}),a.jsxs(W,{children:[C.ref_type||""," ",C.ref_id||""]}),a.jsx(W,{className:"max-w-[26ch] truncate",title:C.note||"",children:C.note||""})]},C.id)),t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:8,className:"text-center py-6 text-sm text-gray-500",children:"No transactions"})})]})]})})})]})})]})}function Kn({className:t,...n}){return a.jsx("div",{className:we("animate-pulse rounded-md bg-primary/10",t),...n})}const LG=t=>{switch(t){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"approved":return"bg-blue-50 text-blue-700 border-blue-200";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"cancelled":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};function $G(){const[t,n]=g.useState([]),[s,r]=g.useState(""),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,u]=g.useState(!1),[f,h]=g.useState([]),[p,m]=g.useState([]),[x,y]=g.useState([]),[v,b]=g.useState({supplier_id:"",location_id:"",items:[]}),w=async()=>{var R,T;o(!0);try{const{data:P}=await Ev({q:s||void 0});n(P||[])}catch(P){$.error("Load failed",{description:((T=(R=P==null?void 0:P.response)==null?void 0:R.data)==null?void 0:T.detail)||"Retry"})}finally{o(!1)}};g.useEffect(()=>{w()},[s]),g.useEffect(()=>{(async()=>{var R,T;try{const[P,L,F]=await Promise.all([_v().then(B=>B.data||[]),Ko().then(B=>B.data||[]),ya({limit:500}).then(B=>B.data||[])]);h(P),m(L),y(F)}catch(P){$.error("Failed to load lookups",{description:((T=(R=P==null?void 0:P.response)==null?void 0:R.data)==null?void 0:T.detail)||"Retry"})}})()},[]);const j=()=>b(R=>({...R,items:[...R.items,{medicine_id:"",qty:1}]})),N=(R,T)=>b(P=>({...P,items:P.items.map((L,F)=>F===R?{...L,...T}:L)})),S=R=>b(T=>({...T,items:T.items.filter((P,L)=>L!==R)})),_=g.useMemo(()=>!v.supplier_id||!v.location_id?!1:v.items.filter(T=>Number(T.medicine_id)&&Number(T.qty)>0).length>0,[v]),C=v.items.length,k=v.items.reduce((R,T)=>R+Number(T.qty||0),0),E=async()=>{var R,T;try{const P={supplier_id:Number(v.supplier_id),location_id:Number(v.location_id),items:v.items.filter(L=>Number(L.medicine_id)&&Number(L.qty)>0).map(L=>({medicine_id:Number(L.medicine_id),qty:Number(L.qty||1)}))};await xU(P),u(!1),b({supplier_id:"",location_id:"",items:[]}),await w(),$.success("PO created",{description:"Purchase order saved"})}catch(P){$.error("Save failed",{description:((T=(R=P==null?void 0:P.response)==null?void 0:R.data)==null?void 0:T.detail)||"Retry"})}},M=async R=>{var T,P;try{c(R),await yU(R),await w(),$.success("Approved")}catch(L){$.error("Approve failed",{description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Retry"})}finally{c(null)}},D=async R=>{var T,P;if(window.confirm("Cancel this purchase order?"))try{c(R),await vU(R),await w(),$.success("Cancelled")}catch(L){$.error("Cancel failed",{description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Retry"})}finally{c(null)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Purchase Orders"}),a.jsx(pe,{anyOf:["pharmacy.procure.manage"],children:a.jsxs(te,{onClick:()=>u(!0),children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New PO"]})})]}),a.jsx(Le,{children:a.jsx(Ue,{className:"p-4",children:a.jsx("div",{className:"grid gap-3 md:grid-cols-3 items-end",children:a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(J,{children:"Search"}),a.jsx(ue,{value:s,onChange:R=>r(R.target.value),placeholder:"Supplier, location, code"})]})})})}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"PO List"})}),a.jsx(Ue,{className:"p-0",children:a.jsx("div",{className:"overflow-auto",children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"#"}),a.jsx(ce,{children:"Supplier"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"Status"}),a.jsx(ce,{className:"text-right",children:"Actions"})]})}),a.jsx(bs,{children:a.jsxs(li,{initial:!1,children:[i&&t.length===0&&Array.from({length:4}).map((R,T)=>a.jsxs(Ae,{children:[a.jsx(W,{children:a.jsx(Kn,{className:"h-4 w-24"})}),a.jsx(W,{children:a.jsx(Kn,{className:"h-4 w-40"})}),a.jsx(W,{children:a.jsx(Kn,{className:"h-4 w-32"})}),a.jsx(W,{children:a.jsx(Kn,{className:"h-6 w-24 rounded-md"})}),a.jsx(W,{className:"text-right",children:a.jsx(Kn,{className:"h-8 w-28 rounded-md ml-auto"})})]},`sk-${T}`)),(t||[]).map(R=>a.jsxs(Gt.tr,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},className:"border-b",children:[a.jsxs(W,{children:["PO-",String(R.id).padStart(6,"0")]}),a.jsx(W,{children:R.supplier_name||R.supplier_id}),a.jsx(W,{children:R.location_code||R.location_id}),a.jsx(W,{children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs ${LG(R.status)}`,children:R.status})}),a.jsx(W,{className:"text-right",children:a.jsx(pe,{anyOf:["pharmacy.procure.manage"],children:a.jsxs("div",{className:"inline-flex gap-2",children:[R.status==="draft"&&a.jsxs(te,{size:"sm",onClick:()=>M(R.id),disabled:l===R.id,children:[l===R.id?a.jsx(ms,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Approve"]}),R.status!=="cancelled"&&R.status!=="closed"&&a.jsxs(te,{size:"sm",variant:"outline",onClick:()=>D(R.id),disabled:l===R.id,children:[l===R.id?a.jsx(ms,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Cancel"]})]})})})]},R.id)),!i&&t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No purchase orders"})})]})})]})})})]}),a.jsx(ui,{open:d,onOpenChange:u,children:a.jsxs(gr,{className:"sm:max-w-2xl",children:[a.jsx(xr,{children:a.jsx(yr,{children:"New Purchase Order"})}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-2 text-sm",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Supplier"}),a.jsxs(at,{value:String(v.supplier_id),onValueChange:R=>b(T=>({...T,supplier_id:Number(R)})),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:f.map(R=>a.jsx(Te,{value:String(R.id),children:R.name},R.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Location"}),a.jsxs(at,{value:String(v.location_id),onValueChange:R=>b(T=>({...T,location_id:Number(R)})),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:p.map(R=>a.jsxs(Te,{value:String(R.id),children:[R.code,"  ",R.name]},R.id))})]})]})]}),a.jsx(Zo,{className:"my-3"}),a.jsxs("div",{className:"mt-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(J,{children:"Items"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-600",children:["Lines: ",a.jsx("span",{className:"font-medium",children:C}),"  Qty: ",a.jsx("span",{className:"font-medium",children:k})]}),a.jsxs(te,{size:"sm",variant:"outline",onClick:j,children:[a.jsx(wt,{className:"h-4 w-4 mr-1"})," Add"]})]})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[v.items.map((R,T)=>a.jsxs("div",{className:"grid gap-2 md:grid-cols-6 items-end",children:[a.jsxs("div",{className:"md:col-span-4",children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:String(R.medicine_id),onValueChange:P=>N(T,{medicine_id:Number(P)}),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select medicine"})}),a.jsx(tt,{children:x.map(P=>a.jsxs(Te,{value:String(P.id),children:[P.code,"  ",P.name]},P.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Qty"}),a.jsx(ue,{type:"number",value:R.qty,onChange:P=>N(T,{qty:Number(P.target.value||1)})})]}),a.jsx("div",{className:"flex",children:a.jsx(te,{size:"sm",variant:"outline",onClick:()=>S(T),children:"Remove"})})]},T)),v.items.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No items yet."})]})]}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),a.jsx(te,{onClick:E,disabled:!_,children:"Save"})]})]})})]})}function FG(){const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[d,u]=g.useState([]),[f,h]=g.useState([]),[p,m]=g.useState([]),[x,y]=g.useState([]),[v,b]=g.useState({supplier_id:"",location_id:"",po_id:"",items:[]}),w=()=>b(T=>({...T,items:[...T.items,{medicine_id:"",batch:"",expiry:"",qty:1,unit_cost:"",tax_percent:"",sell_price:"",mrp:""}]})),j=(T,P)=>b(L=>({...L,items:L.items.map((F,B)=>B===T?{...F,...P}:F)})),N=T=>b(P=>({...P,items:P.items.filter((L,F)=>F!==T)})),S=()=>{b({supplier_id:"",location_id:"",po_id:"",items:[]})},_=async()=>{var T,P;r(!0);try{const{data:L}=await bU();n(L||[])}catch(L){$.error("Failed to load GRNs",{description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Please retry."})}finally{r(!1)}};g.useEffect(()=>{_()},[]),g.useEffect(()=>{(async()=>{var T,P;try{const[L,F,B,A]=await Promise.all([_v().then(O=>O.data||[]),Ko().then(O=>O.data||[]),ya({limit:1e3,is_active:!0}).then(O=>O.data||[]),Ev({status:"approved"}).then(O=>O.data||[])]);u(L),h(F),m(B),y(A)}catch(L){$.error("Failed to load lookups",{description:((P=(T=L==null?void 0:L.response)==null?void 0:T.data)==null?void 0:P.detail)||"Please refresh and try again."})}})()},[]);const C=g.useMemo(()=>{let T=0,P=0,L=0;for(const F of v.items){const B=Number(F.qty||0),A=Number(F.unit_cost||0),O=Number(F.tax_percent||0);T+=B;const z=B*A;P+=z,L+=z*(O/100)}return{qty:T,subtotal:P,tax:L,grand:P+L}},[v.items]),k=()=>{if(!v.supplier_id)return"Please select a supplier.";if(!v.location_id)return"Please select a location.";if(!Array.isArray(v.items)||v.items.length===0)return"Add at least one item.";for(let T=0;T<v.items.length;T++){const P=v.items[T];if(!P.medicine_id)return`Row ${T+1}: select a medicine.`;if(!P.batch)return`Row ${T+1}: enter batch.`;if(!P.expiry)return`Row ${T+1}: enter expiry date.`;if(!(Number(P.qty)>0))return`Row ${T+1}: quantity must be > 0.`;if(!(Number(P.unit_cost)>=0))return`Row ${T+1}: unit cost invalid.`}return null},E=async()=>{var L,F,B;const T=k();if(T){$.error("Cannot save GRN",{description:T});return}const P={supplier_id:Number(v.supplier_id),location_id:Number(v.location_id),po_id:v.po_id?Number(v.po_id):void 0,items:v.items.map(A=>({medicine_id:Number(A.medicine_id),batch:A.batch,expiry:A.expiry,qty:Number(A.qty||1),unit_cost:Number(A.unit_cost||0),tax_percent:A.tax_percent===""?null:Number(A.tax_percent),sell_price:A.sell_price===""?null:Number(A.sell_price),mrp:A.mrp===""?null:Number(A.mrp)}))};c(!0);try{const A=await wU(P),O=(L=A==null?void 0:A.data)==null?void 0:L.id;o(!1),S(),await _(),$.success("GRN created",{description:O?`GRN-${String(O).padStart(6,"0")}  ${P.items.length} line(s)  ${C.qty} units`:"Stock received."})}catch(A){$.error("Save failed",{description:((B=(F=A==null?void 0:A.response)==null?void 0:F.data)==null?void 0:B.detail)||"Please retry."})}finally{c(!1)}},M="__none__",D=T=>T===""||T==null?M:String(T),R=T=>T===M?"":Number(T);return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Goods Receipt (GRN)"}),a.jsx(pe,{anyOf:["pharmacy.procure.manage"],children:a.jsxs(te,{onClick:()=>o(!0),children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New GRN"]})})]}),a.jsxs(Le,{children:[a.jsxs(Wt,{className:"flex flex-row items-center justify-between",children:[a.jsxs(qt,{className:"flex items-center gap-2",children:[a.jsx(C$,{className:"h-5 w-5"}),"Recent GRNs"]}),s&&a.jsxs("span",{className:"inline-flex items-center text-xs text-gray-500",children:[a.jsx(ms,{className:"mr-1 h-3.5 w-3.5 animate-spin"})," Loading"]})]}),a.jsx(Ue,{className:"overflow-x-auto",children:a.jsxs(ys,{children:[a.jsx(vs,{className:"sticky top-0 bg-white",children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"#"}),a.jsx(ce,{children:"Supplier"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"PO"}),a.jsx(ce,{children:"Received"})]})}),a.jsxs(bs,{children:[(t||[]).map(T=>a.jsxs(Ae,{className:"hover:bg-gray-50",children:[a.jsxs(W,{children:["GRN-",String(T.id).padStart(6,"0")]}),a.jsx(W,{children:T.supplier_name||T.supplier_id}),a.jsx(W,{children:T.location_code||T.location_id}),a.jsx(W,{children:T.po_id?`PO-${String(T.po_id).padStart(6,"0")}`:""}),a.jsx(W,{children:new Date(T.received_at).toLocaleString()})]},T.id)),!s&&t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No GRNs yet."})}),s&&Array.from({length:4}).map((T,P)=>a.jsxs(Ae,{children:[a.jsx(W,{className:"py-4",children:a.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-36 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-28 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-20 animate-pulse rounded bg-gray-200"})}),a.jsx(W,{children:a.jsx("div",{className:"h-4 w-40 animate-pulse rounded bg-gray-200"})})]},P))]})]})})]}),a.jsx(ui,{open:i,onOpenChange:T=>{o(T),T||S()},children:a.jsxs(gr,{className:"sm:max-w-4xl",children:[a.jsx(xr,{children:a.jsx(yr,{children:"New GRN"})}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3 text-sm",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Supplier"}),a.jsxs(at,{value:v.supplier_id?String(v.supplier_id):void 0,onValueChange:T=>b(P=>({...P,supplier_id:Number(T)})),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:d.map(T=>a.jsx(Te,{value:String(T.id),children:T.name},T.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Location"}),a.jsxs(at,{value:v.location_id?String(v.location_id):void 0,onValueChange:T=>b(P=>({...P,location_id:Number(T)})),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:f.map(T=>a.jsxs(Te,{value:String(T.id),children:[T.code,"  ",T.name]},T.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"PO (optional)"}),a.jsxs(at,{value:D(v.po_id),onValueChange:T=>b(P=>({...P,po_id:R(T)})),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:""})}),a.jsxs(tt,{children:[a.jsx(Te,{value:M,children:""})," ",x.map(T=>a.jsx(Te,{value:String(T.id),children:`PO-${String(T.id).padStart(6,"0")} (${T.supplier_name||T.supplier_id})`},T.id))]})]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(J,{className:"text-[13px] uppercase tracking-wide text-gray-600",children:"Items"}),a.jsxs(te,{size:"sm",variant:"outline",onClick:w,children:[a.jsx(wt,{className:"h-4 w-4 mr-1"})," Add"]})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsx(li,{initial:!1,children:v.items.map((T,P)=>a.jsxs(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},transition:{duration:.2},className:"grid gap-2 md:grid-cols-8 items-end rounded-xl border p-2",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:String(T.medicine_id),onValueChange:L=>j(P,{medicine_id:Number(L)}),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select medicine"})}),a.jsx(tt,{children:p.map(L=>a.jsxs(Te,{value:String(L.id),children:[L.code,"  ",L.name]},L.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Batch"}),a.jsx(ue,{value:T.batch,onChange:L=>j(P,{batch:L.target.value})})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Expiry"}),a.jsx(ue,{type:"date",value:T.expiry,onChange:L=>j(P,{expiry:L.target.value})})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Qty"}),a.jsx(ue,{type:"number",min:1,value:T.qty,onChange:L=>j(P,{qty:Number(L.target.value||1)})})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Unit cost"}),a.jsx(ue,{type:"number",step:"0.01",value:T.unit_cost,onChange:L=>j(P,{unit_cost:L.target.value})})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Tax %"}),a.jsx(ue,{type:"number",step:"0.01",value:T.tax_percent,onChange:L=>j(P,{tax_percent:L.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Sell / MRP"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(ue,{placeholder:"Sell",type:"number",step:"0.01",value:T.sell_price,onChange:L=>j(P,{sell_price:L.target.value})}),a.jsx(ue,{placeholder:"MRP",type:"number",step:"0.01",value:T.mrp,onChange:L=>j(P,{mrp:L.target.value})})]})]}),a.jsx("div",{className:"md:col-span-8 flex justify-end",children:a.jsx(te,{type:"button",size:"icon",variant:"ghost",onClick:()=>N(P),className:"text-rose-600 hover:text-rose-700",title:"Remove row",children:a.jsx(Ws,{className:"h-4 w-4"})})})]},P))}),v.items.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No items yet."})]})]}),a.jsxs("div",{className:"mt-4 rounded-xl border bg-gray-50 p-3 text-sm",children:[a.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Lines:"})," ",v.items.length]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Total Qty:"})," ",C.qty]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Subtotal:"})," ",C.subtotal.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tax:"})," ",C.tax.toFixed(2)]})]}),a.jsxs("div",{className:"mt-1 font-medium",children:["Grand Total: ",C.grand.toFixed(2)]})]}),a.jsxs(oa,{children:[a.jsx(te,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsx(te,{onClick:E,disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx(ms,{className:"mr-2 h-4 w-4 animate-spin"})," Saving"]}):"Save"})]})]})})]})}function zG(){const[t,n]=g.useState([]),[s,r]=g.useState([]);return g.useEffect(()=>{let i=!0;return(async()=>{var o,l;try{const{data:c}=await uE();if(!i)return;n((c==null?void 0:c.low)||[]),r((c==null?void 0:c.expiry)||[])}catch(c){const d=((l=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:l.detail)||"Please retry";$.error("Failed to load alerts",{description:d})}})(),()=>{i=!1}},[]),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Alerts"}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Low Stock"})}),a.jsx(Ue,{children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Medicine"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"On hand"}),a.jsx(ce,{children:"Reorder"})]})}),a.jsxs(bs,{children:[t.map(i=>a.jsxs(Ae,{children:[a.jsx(W,{children:i.medicine_name||i.medicine_id}),a.jsx(W,{children:i.location_code||i.location_id}),a.jsx(W,{children:i.on_hand}),a.jsx(W,{children:i.reorder_level})]},`${i.medicine_id}-${i.location_id}`)),t.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:4,className:"text-center py-6 text-sm text-gray-500",children:"All good "})})]})]})})]}),a.jsxs(Le,{children:[a.jsx(Wt,{children:a.jsx(qt,{children:"Expiry (next 30 days / expired)"})}),a.jsx(Ue,{children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Medicine"}),a.jsx(ce,{children:"Batch"}),a.jsx(ce,{children:"Location"}),a.jsx(ce,{children:"Expiry"}),a.jsx(ce,{children:"On hand"})]})}),a.jsxs(bs,{children:[s.map(i=>a.jsxs(Ae,{children:[a.jsx(W,{children:i.medicine_name||i.medicine_id}),a.jsx(W,{children:i.batch}),a.jsx(W,{children:i.location_code||i.location_id}),a.jsx(W,{children:i.expiry}),a.jsx(W,{children:i.on_hand})]},i.id)),s.length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"Nothing expiring soon "})})]})]})})]})]})}function va({value:t,onChange:n}){const[s,r]=g.useState(""),[i,o]=g.useState([]);g.useEffect(()=>{let c=!0;return(async()=>{const{data:u}=await uh(s||"");c&&o(u||[])})(),()=>{c=!1}},[s]);const l=g.useMemo(()=>i.find(c=>c.id===t),[i,t]);return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Patient"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search by UHID, name, phone, email",value:s,onChange:c=>r(c.target.value)})]}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:i.slice(0,8).map(c=>a.jsxs("button",{onClick:()=>n(c.id),className:["rounded-xl border p-3 text-left transition",t===c.id?"border-blue-500 bg-blue-50":"hover:bg-gray-50"].join(" "),children:[a.jsxs("div",{className:"font-medium",children:[c.uhid,"  ",c.first_name," ",c.last_name]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[c.phone,"  ",c.email||""]})]},c.id))}),l&&a.jsxs("div",{className:"rounded-xl border bg-emerald-50 px-3 py-2 text-sm",children:["Selected: ",a.jsx("span",{className:"font-medium",children:l.uhid})]})]})}function BG(){const[t,n]=g.useState(null),[s,r]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState(""),[d,u]=g.useState([]),[f,h]=g.useState([]),[p,m]=g.useState(!1),[x,y]=g.useState([]);g.useEffect(()=>{let S=!0;return(async()=>{var _,C;try{const[k,E]=await Promise.all([Ko().then(M=>M.data||[]),ya({limit:500,is_active:!0}).then(M=>M.data||[])]);if(!S)return;o(k),u(E)}catch(k){const E=((C=(_=k==null?void 0:k.response)==null?void 0:_.data)==null?void 0:C.detail)||"Please refresh and try again.";$.error("Failed to load locations/medicines",{description:E})}})(),()=>{S=!1}},[]),g.useEffect(()=>{let S=!0;return t?((async()=>{try{const _=await _U(t);if(!S)return;r(_||null)}catch{r(null)}})(),()=>{S=!1}):r(null)},[t]),g.useEffect(()=>{let S=!0;if(!t){y([]);return}return(async()=>{try{const{data:_}=await fE({patient_id:t,status:"in_progress",limit:200}),C=(_||[]).flatMap(k=>(k.items||[]).map(E=>{var M,D;return{rx_id:k.id,id:E.id,medicine_id:E.medicine_id,name:((M=E.medicine)==null?void 0:M.name)||E.medicine_name,code:((D=E.medicine)==null?void 0:D.code)||E.medicine_code,remaining:Math.max(0,(E.quantity||0)-(E.dispensed_qty||0))}})).filter(k=>k.remaining>0);S&&y(C)}catch{S&&y([])}})(),()=>{S=!1}},[t]);const v=()=>h(S=>[...S,{medicine_id:"",qty:1,lot_id:null}]),b=(S,_)=>h(C=>C.map((k,E)=>E===S?{...k,..._}:k)),w=S=>h(_=>_.filter((C,k)=>k!==S)),j=S=>{h(_=>[..._,{medicine_id:S.medicine_id,qty:S.remaining,lot_id:null,prescription_item_id:S.id}])},N=async()=>{var C,k;if(!t){$.error("Select patient");return}if(!l){$.error("Select location");return}const S=f.map(E=>({...E,medicine_id:Number(E.medicine_id),qty:Number(E.qty||1)})).filter(E=>E.medicine_id&&E.qty>0);if(S.length===0){$.error("Add at least one medicine");return}const _={context:s||{},patient_id:Number(t),location_id:Number(l),items:S.map(E=>({medicine_id:E.medicine_id,qty:E.qty,lot_id:E.lot_id?Number(E.lot_id):void 0,prescription_item_id:E.prescription_item_id||void 0})),payment:{mode:"on-account"}};m(!0);try{const{data:E}=await jU(_);$.success("Dispensed",{description:`Sale #${String(E.id).padStart(6,"0")} created successfully.`}),h([])}catch(E){const M=((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Failed to dispense";$.error("Error",{description:M})}finally{m(!1)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Dispense"})}),a.jsx(pe,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:a.jsx(Le,{children:a.jsxs(Ue,{className:"p-4 space-y-4",children:[a.jsx(va,{value:t,onChange:n}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Context (auto)"}),a.jsx(ue,{disabled:!0,value:s?s.type==="ipd"?`IPD  Admission ${s.admission_id}`:`OPD  Visit ${s.visit_id}`:"None (will rely on prescription or manual context)"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Location"}),a.jsxs(at,{value:l,onValueChange:c,children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:i.map(S=>a.jsxs(Te,{value:String(S.id),children:[S.code,"  ",S.name]},S.id))})]})]})]}),x.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{className:"text-sm",children:"Pending prescription items"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:x.map(S=>a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>j(S),title:`Add ${S.code}  ${S.name} (${S.remaining})`,children:["+ ",S.code,"  ",S.name,"  Rem: ",S.remaining]},S.id))})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx(J,{className:"text-base",children:"Items"}),a.jsxs(te,{size:"sm",variant:"outline",onClick:v,children:[a.jsx(wt,{className:"h-4 w-4 mr-1"})," Add"]})]}),a.jsxs("div",{className:"space-y-2",children:[f.map((S,_)=>a.jsxs("div",{className:"grid gap-2 md:grid-cols-6 items-end",children:[a.jsxs("div",{className:"md:col-span-4",children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:String(S.medicine_id||""),onValueChange:C=>b(_,{medicine_id:Number(C)}),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select"})}),a.jsx(tt,{children:d.map(C=>a.jsxs(Te,{value:String(C.id),children:[C.code,"  ",C.name]},C.id))})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Qty"}),a.jsx(ue,{type:"number",min:1,value:S.qty,onChange:C=>b(_,{qty:Number(C.target.value||1)})})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>w(_),children:a.jsx(f$,{className:"h-4 w-4"})})})]},_)),f.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No items added."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(te,{onClick:N,disabled:p,children:p?"Dispensing":"Dispense"})})]})})})]})}function VG(){const[t,n]=g.useState(""),[s,r]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(!1),[d,u]=g.useState(null),f=x=>x.replace(/[^\d]/g,""),h=!!t&&!!s&&Number(i)>0,p=async()=>{var x,y;if(!t){$.error("Sale ID required");return}if(!s){$.error("Sale Item ID required");return}if(!i||Number(i)<=0){$.error("Quantity must be > 0");return}c(!0),u(null);try{const{data:v}=await NU({sale_id:Number(t),sale_item_id:Number(s),qty:Number(i)});n(""),r(""),o(""),u(v||null),$.success("Return accepted",{description:(v==null?void 0:v.lot_on_hand)!=null?`Updated lot on-hand: ${v.lot_on_hand}`:"Stock updated successfully."})}catch(v){const b=((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Could not process the return. Please try again.";$.error("Return failed",{description:b})}finally{c(!1)}},m=x=>{x.key==="Enter"&&h&&!l&&p()};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Returns"})}),a.jsx(pe,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.18},children:a.jsxs(Le,{className:"overflow-hidden",children:[a.jsx(Wt,{className:"pb-2",children:a.jsx(qt,{className:"text-sm",children:"Return to Stock"})}),a.jsxs(Ue,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-4 items-end",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Sale ID"}),a.jsx(ue,{inputMode:"numeric",value:t,onChange:x=>n(f(x.target.value)),onKeyDown:m,placeholder:"e.g. 1024"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Sale Item ID"}),a.jsx(ue,{inputMode:"numeric",value:s,onChange:x=>r(f(x.target.value)),onKeyDown:m,placeholder:"e.g. 3011"})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Quantity"}),a.jsx(ue,{type:"number",value:i,onChange:x=>o(x.target.value),onKeyDown:m,placeholder:"e.g. 2"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs(te,{className:"w-full md:w-auto",onClick:p,disabled:!h||l,children:[l?a.jsx(ms,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(Fy,{className:"h-4 w-4 mr-2"}),"Return"]})})]}),a.jsx(Zo,{}),a.jsxs("div",{className:"text-xs text-gray-500 grid gap-1 md:grid-cols-2",children:[a.jsx("div",{children:"Tip: Return uses the **exact sale items lot** and credits stock back to that lot."}),a.jsx("div",{children:"If the sale had multiple lots, return line-by-line using each Sale Item ID."})]}),d&&a.jsxs(Gt.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:["Return accepted. ",d.lot_on_hand!=null?a.jsxs(a.Fragment,{children:["Lot on-hand is now ",a.jsx("span",{className:"font-medium",children:d.lot_on_hand}),"."]}):"Stock updated."]})]})]})})})]})}const HG=["new","in_progress","dispensed","cancelled"],U1=t=>{switch(t){case"new":return{class:"bg-blue-50 text-blue-700 border-blue-200",label:"New"};case"in_progress":return{class:"bg-amber-50 text-amber-700 border-amber-200",label:"In Progress"};case"dispensed":return{class:"bg-emerald-50 text-emerald-700 border-emerald-200",label:"Dispensed"};case"cancelled":return{class:"bg-rose-50 text-rose-700 border-rose-200",label:"Cancelled"};default:return{class:"bg-gray-50 text-gray-700 border-gray-200",label:t||""}}};function UG(){const[t,n]=g.useState([]),[s,r]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(""),[d,u]=g.useState(null),[f,h]=g.useState(!1),[p,m]=g.useState(!0),[x,y]=g.useState(null),v=g.useRef(null),b=g.useCallback(async()=>{var E,M;h(!0);try{const{data:D}=await fE({q:(s==null?void 0:s.trim())||void 0,status:i||void 0,context_type:l||void 0,patient_id:d||void 0,limit:200});n(D||[]),y(new Date)}catch(D){$.error("Failed to load prescriptions",{description:((M=(E=D==null?void 0:D.response)==null?void 0:E.data)==null?void 0:M.detail)||"Retry"})}finally{h(!1)}},[s,i,l,d]);g.useEffect(()=>{b()},[b]),g.useEffect(()=>{if(p)return v.current=setInterval(b,1e4),()=>clearInterval(v.current)},[p,b]);const w=async(E,M)=>{var D,R;try{await SU(E,{status:M}),$.success("Item updated",{description:`Status  ${M}`}),await b()}catch(T){$.error("Update failed",{description:((R=(D=T==null?void 0:T.response)==null?void 0:D.data)==null?void 0:R.detail)||"Retry"})}},j=async(E,M)=>{var D,R;try{await u1(E,{status:M}),$.success("Prescription updated",{description:`Status  ${M}`}),await b()}catch(T){$.error("Update failed",{description:((R=(D=T==null?void 0:T.response)==null?void 0:D.data)==null?void 0:R.detail)||"Retry"})}},N=()=>{r(""),o(""),c(""),u(null)},S=(E,M)=>a.jsx(te,{size:"sm",variant:i===E?"default":"outline",onClick:()=>o(E),children:M},E),_="__all__",C=E=>E===""||E==null?_:String(E),k=E=>E===_?"":E;return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Prescriptions"}),x&&a.jsxs("span",{className:"hidden sm:inline text-xs text-gray-500",children:["Updated ",x.toLocaleTimeString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 border rounded-lg px-2 py-1",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:p,onChange:E=>m(E.target.checked)}),"Auto-refresh"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:b,disabled:f,children:[a.jsx(ah,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsx(Le,{children:a.jsxs(Ue,{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Search"}),a.jsx(ue,{placeholder:"UHID, patient, medicine",value:s,onChange:E=>r(E.target.value)})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Status"}),a.jsxs(at,{value:C(i),onValueChange:E=>o(k(E)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:_,children:"All"}),HG.map(E=>a.jsx(Te,{value:E,children:E},E))]})]})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Context"}),a.jsxs(at,{value:C(l),onValueChange:E=>c(k(E)),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"All"})}),a.jsxs(tt,{children:[a.jsx(Te,{value:_,children:"All"}),a.jsx(Te,{value:"opd",children:"OPD"}),a.jsx(Te,{value:"ipd",children:"IPD"})]})]})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(va,{value:d,onChange:u})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(or,{variant:"secondary",className:"inline-flex items-center gap-1",children:[a.jsx(d2,{className:"h-3.5 w-3.5"})," Quick status"]}),S("","All"),S("new","New"),S("in_progress","In-Progress"),S("dispensed","Dispensed"),S("cancelled","Cancelled")]}),a.jsx(te,{variant:"ghost",size:"sm",onClick:N,children:"Clear filters"})]})]})}),a.jsx("div",{className:"space-y-3",children:a.jsxs(li,{initial:!1,children:[f&&t.length===0&&Array.from({length:3}).map((E,M)=>a.jsxs(Le,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Kn,{className:"h-4 w-44"}),a.jsx(Kn,{className:"h-8 w-40 rounded-md"})]}),a.jsx(Kn,{className:"h-24 w-full"})]},`sk-${M}`)),!f&&(t||[]).map(E=>{var L,F;const M=(E.items||[]).length,D=(E.items||[]).filter(B=>B.status==="dispensed").length,R=(E.items||[]).filter(B=>B.status==="in_progress").length,T=M?Math.round(D/M*100):0,P=U1(E.status);return a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:8},children:a.jsxs(Le,{className:"overflow-hidden",children:[a.jsxs(Wt,{className:"pb-2",children:[a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(qt,{className:"text-sm",children:["#",String(E.id).padStart(6,"0"),"  ",(L=E.context_type)==null?void 0:L.toUpperCase(),"  Patient: ",((F=E.patient)==null?void 0:F.uhid)||`P-${E.patient_id}`]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-1 text-xs ${P.class}`,children:P.label}),a.jsxs(pe,{anyOf:["pharmacy.dispense.manage"],children:[a.jsx(te,{size:"sm",variant:"outline",onClick:()=>j(E.id,"in_progress"),children:"Start"}),a.jsx(te,{size:"sm",onClick:async()=>{var B,A;try{await u1(E.id,{status:"dispensed"}),$.success("Prescription updated",{description:"Status  dispensed"}),await b()}catch(O){$.error("Update failed",{description:((A=(B=O==null?void 0:O.response)==null?void 0:B.data)==null?void 0:A.detail)||"Retry"})}},children:"Mark Dispensed"})]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[a.jsxs("span",{children:[D,"/",M," dispensed"]}),R>0&&a.jsxs("span",{children:[R," in-progress"]})]}),a.jsx("div",{className:"h-2 w-full rounded-full bg-gray-100 overflow-hidden",children:a.jsx("div",{className:"h-2 bg-emerald-500 transition-all",style:{width:`${T}%`}})})]})]}),a.jsx(Ue,{className:"p-0",children:a.jsxs(ys,{children:[a.jsx(vs,{children:a.jsxs(Ae,{children:[a.jsx(ce,{children:"Medicine"}),a.jsx(ce,{children:"Dose"}),a.jsx(ce,{children:"Qty"}),a.jsx(ce,{children:"Status"}),a.jsx(ce,{className:"text-right",children:"Actions"})]})}),a.jsxs(bs,{children:[(E.items||[]).map(B=>{var O,z;const A=U1(B.status||E.status);return a.jsxs(Ae,{children:[a.jsxs(W,{children:[a.jsx("div",{className:"font-medium",children:B.medicine_name||((O=B.medicine)==null?void 0:O.name)||`#${B.medicine_id}`}),a.jsx("div",{className:"text-xs text-gray-500",children:B.medicine_code||((z=B.medicine)==null?void 0:z.code)})]}),a.jsx(W,{children:B.dose||""}),a.jsx(W,{children:B.qty||B.quantity||1}),a.jsx(W,{children:a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs ${A.class}`,children:A.label})}),a.jsx(W,{className:"text-right",children:a.jsx(pe,{anyOf:["pharmacy.dispense.manage"],children:a.jsxs("div",{className:"inline-flex flex-wrap gap-2",children:[a.jsx(te,{size:"sm",variant:"outline",onClick:()=>w(B.id,"in_progress"),children:"In-Progress"}),a.jsxs(te,{size:"sm",onClick:()=>w(B.id,"dispensed"),children:[a.jsx(ga,{className:"h-4 w-4 mr-1"}),"Dispensed"]}),a.jsxs(te,{size:"sm",variant:"outline",onClick:()=>w(B.id,"cancelled"),children:[a.jsx(Uc,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})})})]},B.id)}),(E.items||[]).length===0&&a.jsx(Ae,{children:a.jsx(W,{colSpan:5,className:"text-center py-6 text-sm text-gray-500",children:"No items"})})]})]})})]})},E.id)}),(t||[]).length===0&&!f&&a.jsx(Le,{children:a.jsx(Ue,{className:"py-10 text-center text-sm text-gray-500",children:d?"No prescriptions found for this patient.":"No prescriptions match your filters."})})]})})]})}function WG(){const t=jn(),[n,s]=g.useState({low:0,exp:0,todayTxns:0,openPO:0}),[r,i]=g.useState(!1),[o,l]=g.useState(!0),[c,d]=g.useState(null),u=g.useCallback(async()=>{var h,p;i(!0);try{const m=new Date().toISOString().slice(0,10),[{data:x},{data:y},{data:v}]=await Promise.all([uE(),dE({date:m}),Ev({status:"approved"})]),b=((x==null?void 0:x.low)||[]).length,w=((x==null?void 0:x.expiry)||[]).length,j=(y||[]).length,N=(v||[]).filter(S=>S.status!=="closed"&&S.status!=="cancelled").length;s({low:b,exp:w,todayTxns:j,openPO:N}),d(new Date)}catch(m){$.error("Failed to load pharmacy dashboard",{description:((p=(h=m==null?void 0:m.response)==null?void 0:h.data)==null?void 0:p.detail)||"Please try again."})}finally{i(!1)}},[]);g.useEffect(()=>{u()},[u]),g.useEffect(()=>{if(!o)return;const h=setInterval(u,3e4);return()=>clearInterval(h)},[o,u]);const f=[{title:"Low stock",value:n.low,icon:oh,color:"text-amber-600",bg:"bg-amber-50",to:"/pharmacy/alerts"},{title:"Expiring soon",value:n.exp,icon:ih,color:"text-rose-600",bg:"bg-rose-50",to:"/pharmacy/alerts"},{title:"Today transactions",value:n.todayTxns,icon:si,color:"text-blue-600",bg:"bg-blue-50",to:"/pharmacy/transactions"},{title:"Open POs",value:n.openPO,icon:f2,color:"text-emerald-700",bg:"bg-emerald-50",to:"/pharmacy/po"}];return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy"}),a.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs text-gray-500",children:[c&&a.jsxs("span",{children:["Last updated: ",c.toLocaleTimeString()]}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsxs("span",{className:"relative inline-flex h-2 w-2",children:[a.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75 animate-ping"}),a.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-emerald-500"})]}),"Live"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 border rounded-lg px-2 py-1",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:o,onChange:h=>l(h.target.checked)}),"Auto-refresh"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:u,disabled:r,children:[a.jsx(ah,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]}),a.jsx(pe,{anyOf:["pharmacy.dispense.manage","pharmacy.dispense.create"],children:a.jsxs(te,{onClick:()=>t("/pharmacy/dispense"),children:[a.jsx(zy,{className:"h-4 w-4 mr-2"})," Dispense"]})}),a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsxs(te,{variant:"outline",onClick:()=>t("/pharmacy/medicines"),children:[a.jsx(hu,{className:"h-4 w-4 mr-2"})," Medicines"]})})]})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:r?Array.from({length:4}).map((h,p)=>a.jsxs(Le,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx(Kn,{className:"h-4 w-24"}),a.jsx(Kn,{className:"h-6 w-10 rounded-md"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kn,{className:"h-8 w-8 rounded-md"}),a.jsx(Kn,{className:"h-6 w-12"})]})]},`sk-${p}`)):f.map((h,p)=>{const m=h.icon;return a.jsx(Gt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.05*p},children:a.jsx(Dn,{to:h.to,children:a.jsxs(Le,{className:"hover:shadow-md transition",children:[a.jsxs(Wt,{className:"pb-2 flex items-center justify-between",children:[a.jsx(qt,{className:"text-sm",children:h.title}),a.jsx("span",{className:`rounded-md px-2 py-1 text-xs ${h.bg} ${h.color}`,children:"Live"})]}),a.jsx(Ue,{children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(m,{className:`h-8 w-8 ${h.color}`}),a.jsx("div",{className:"text-2xl font-semibold",children:h.value})]})})]})})},h.title)})}),a.jsx(Zo,{}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(Le,{className:"hover:shadow-sm",children:[a.jsx(Wt,{className:"pb-1",children:a.jsx(qt,{className:"text-sm",children:"Procurement"})}),a.jsxs(Ue,{className:"flex flex-wrap gap-2",children:[a.jsx(pe,{anyOf:["pharmacy.procure.manage"],children:a.jsx(te,{onClick:()=>t("/pharmacy/po"),children:"Purchase Orders"})}),a.jsx(pe,{anyOf:["pharmacy.procure.manage"],children:a.jsx(te,{variant:"outline",onClick:()=>t("/pharmacy/grn"),children:"GRN"})})]})]}),a.jsxs(Le,{className:"hover:shadow-sm",children:[a.jsx(Wt,{className:"pb-1",children:a.jsx(qt,{className:"text-sm",children:"Inventory"})}),a.jsxs(Ue,{className:"flex flex-wrap gap-2",children:[a.jsx(te,{onClick:()=>t("/pharmacy/inventory"),children:"Lots"}),a.jsx(te,{variant:"outline",onClick:()=>t("/pharmacy/transactions"),children:"Transactions"})]})]}),a.jsxs(Le,{className:"hover:shadow-sm",children:[a.jsx(Wt,{className:"pb-1",children:a.jsx(qt,{className:"text-sm",children:"Masters"})}),a.jsxs(Ue,{className:"flex flex-wrap gap-2",children:[a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsx(te,{onClick:()=>t("/pharmacy/medicines"),children:"Medicines"})}),a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsx(te,{variant:"outline",onClick:()=>t("/pharmacy/suppliers"),children:"Suppliers"})}),a.jsx(pe,{anyOf:["pharmacy.masters.manage"],children:a.jsx(te,{variant:"outline",onClick:()=>t("/pharmacy/locations"),children:"Locations"})})]})]})]})]})}var Ph="Checkbox",[qG]=xi(Ph),[KG,Qv]=qG(Ph);function GG(t){const{__scopeCheckbox:n,checked:s,children:r,defaultChecked:i,disabled:o,form:l,name:c,onCheckedChange:d,required:u,value:f="on",internal_do_not_use_render:h}=t,[p,m]=Eo({prop:s,defaultProp:i??!1,onChange:d,caller:Ph}),[x,y]=g.useState(null),[v,b]=g.useState(null),w=g.useRef(!1),j=x?!!l||!!x.closest("form"):!0,N={checked:p,disabled:o,setChecked:m,control:x,setControl:y,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:Qr(i)?!1:i,isFormControl:j,bubbleInput:v,setBubbleInput:b};return a.jsx(KG,{scope:n,...N,children:YG(h)?h(N):r})}var tA="CheckboxTrigger",nA=g.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:s,...r},i)=>{const{control:o,value:l,disabled:c,checked:d,required:u,setControl:f,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:x}=Qv(tA,t),y=Re(i,f),v=g.useRef(d);return g.useEffect(()=>{const b=o==null?void 0:o.form;if(b){const w=()=>h(v.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[o,h]),a.jsx(ve.button,{type:"button",role:"checkbox","aria-checked":Qr(d)?"mixed":d,"aria-required":u,"data-state":oA(d),"data-disabled":c?"":void 0,disabled:c,value:l,...r,ref:y,onKeyDown:ge(n,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:ge(s,b=>{h(w=>Qr(w)?!0:!w),x&&m&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})})});nA.displayName=tA;var Zv=g.forwardRef((t,n)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:o,required:l,disabled:c,value:d,onCheckedChange:u,form:f,...h}=t;return a.jsx(GG,{__scopeCheckbox:s,checked:i,defaultChecked:o,disabled:c,required:l,onCheckedChange:u,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(nA,{...h,ref:n,__scopeCheckbox:s}),p&&a.jsx(aA,{__scopeCheckbox:s})]})})});Zv.displayName=Ph;var sA="CheckboxIndicator",rA=g.forwardRef((t,n)=>{const{__scopeCheckbox:s,forceMount:r,...i}=t,o=Qv(sA,s);return a.jsx(Ks,{present:r||Qr(o.checked)||o.checked===!0,children:a.jsx(ve.span,{"data-state":oA(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:n,style:{pointerEvents:"none",...t.style}})})});rA.displayName=sA;var iA="CheckboxBubbleInput",aA=g.forwardRef(({__scopeCheckbox:t,...n},s)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:c,disabled:d,name:u,value:f,form:h,bubbleInput:p,setBubbleInput:m}=Qv(iA,t),x=Re(s,m),y=nT(o),v=WE(r);g.useEffect(()=>{const w=p;if(!w)return;const j=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(j,"checked").set,_=!i.current;if(y!==o&&S){const C=new Event("click",{bubbles:_});w.indeterminate=Qr(o),S.call(w,Qr(o)?!1:o),w.dispatchEvent(C)}},[p,y,o,i]);const b=g.useRef(Qr(o)?!1:o);return a.jsx(ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:c,disabled:d,name:u,value:f,form:h,...n,tabIndex:-1,ref:x,style:{...n.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});aA.displayName=iA;function YG(t){return typeof t=="function"}function Qr(t){return t==="indeterminate"}function oA(t){return Qr(t)?"indeterminate":t?"checked":"unchecked"}const Cl=g.forwardRef(({className:t,...n},s)=>a.jsx(Zv,{ref:s,className:we("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:a.jsx(rA,{className:we("grid place-content-center text-current"),children:a.jsx(Ho,{className:"h-4 w-4"})})}));Cl.displayName=Zv.displayName;const em=()=>({medicine_id:"",dose:"",am:!0,af:!1,pm:!0,night:!1,duration_days:3,route:"po",instructions:""});function XG(){const[t,n]=g.useState(null),[s,r]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState([em()]),[d,u]=g.useState(""),[f,h]=g.useState(!1);g.useEffect(()=>{let w=!0;return(async()=>{var j,N;try{const S=await ya({limit:500,is_active:!0}).then(_=>_.data||[]);if(!w)return;o(S)}catch(S){$.error("Failed to load medicines",{description:((N=(j=S==null?void 0:S.response)==null?void 0:j.data)==null?void 0:N.detail)||"Retry"})}})(),()=>{w=!1}},[]),g.useEffect(()=>{let w=!0;return t?((async()=>{try{const{data:j}=await CU(t).catch(()=>({data:null}));if(!w)return;r(j||null)}catch{r(null)}})(),()=>{w=!1}):r(null)},[t]);const p=(w,j)=>c(N=>N.map((S,_)=>_===w?{...S,...j}:S)),m=()=>c(w=>[...w,em()]),x=w=>c(j=>j.filter((N,S)=>S!==w)),y=w=>{const j=(w.am?1:0)+(w.af?1:0)+(w.pm?1:0)+(w.night?1:0),N=Math.max(1,Number(w.duration_days||0));return j*N},v=()=>{if(!t)return $.error("Select patient"),!1;if(l.length===0)return $.error("Add at least one medicine"),!1;for(let w=0;w<l.length;w++){const j=l[w];if(!j.medicine_id)return $.error(`Select medicine for row ${w+1}`),!1;if((j.am?1:0)+(j.af?1:0)+(j.pm?1:0)+(j.night?1:0)===0)return $.error(`Choose at least one time-of-day for row ${w+1}`),!1;const S=Number(j.duration_days);if(!S||S<1)return $.error(`Days must be  1 for row ${w+1}`),!1;const _=y(j);if(!_||_<=0)return $.error(`Quantity computes to 0 for row ${w+1}`),!1}return!0},b=async()=>{var j,N;if(!v())return;const w={patient_id:Number(t),notes:d,items:l.map(S=>({medicine_id:Number(S.medicine_id),dose:S.dose||"",am:!!S.am,af:!!S.af,pm:!!S.pm,night:!!S.night,duration_days:Number(S.duration_days)||1,quantity:y(S),route:S.route||"po",instructions:S.instructions||""}))};h(!0);try{await kU(w),$.success("Prescription created"),c([em()]),u("")}catch(S){$.error("Failed to create prescription",{description:((N=(j=S==null?void 0:S.response)==null?void 0:j.data)==null?void 0:N.detail)||"Retry"})}finally{h(!1)}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx(wr,{richColors:!0,closeButton:!0,position:"top-right"}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-lg font-semibold",children:"Pharmacy  Create Prescription"})}),a.jsx(pe,{anyOf:["ipd.doctor","prescriptions.create"],children:a.jsx(Le,{children:a.jsxs(Ue,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Patient"}),a.jsx(va,{value:t,onChange:n})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Context (auto)"}),a.jsx(ue,{disabled:!0,value:s?s.type==="ipd"?`IPD  Admission ${s.admission_id}`:`OPD  Visit ${s.visit_id}`:"Will auto-detect (OPD/IPD)"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx(J,{className:"text-base",children:"Medicines"}),a.jsxs(te,{size:"sm",variant:"outline",onClick:m,children:[a.jsx(wt,{className:"h-4 w-4 mr-1"})," Add more medicines"]})]}),a.jsxs("div",{className:"space-y-3",children:[l.map((w,j)=>{const N=y(w);return a.jsxs("div",{className:"grid gap-3 md:grid-cols-12 items-end rounded-xl border p-3",children:[a.jsxs("div",{className:"md:col-span-4",children:[a.jsx(J,{children:"Medicine"}),a.jsxs(at,{value:String(w.medicine_id||""),onValueChange:S=>p(j,{medicine_id:Number(S)}),children:[a.jsx(et,{children:a.jsx(ot,{placeholder:"Select medicine"})}),a.jsx(tt,{children:i.map(S=>a.jsxs(Te,{value:String(S.id),children:[S.code,"  ",S.name]},S.id))})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Dosage (e.g., 500 mg)"}),a.jsx(ue,{value:w.dose,onChange:S=>p(j,{dose:S.target.value})})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx(J,{children:"Time of day"}),a.jsxs("div",{className:"flex flex-wrap gap-3 text-sm py-1",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx(Cl,{checked:w.am,onCheckedChange:S=>p(j,{am:!!S})})," AM"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx(Cl,{checked:w.af,onCheckedChange:S=>p(j,{af:!!S})})," AF"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx(Cl,{checked:w.pm,onCheckedChange:S=>p(j,{pm:!!S})})," PM"]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx(Cl,{checked:w.night,onCheckedChange:S=>p(j,{night:!!S})})," Night"]})]})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(J,{children:"Days"}),a.jsx(ue,{type:"number",min:1,value:w.duration_days,onChange:S=>p(j,{duration_days:Number(S.target.value||1)})})]}),a.jsxs("div",{className:"md:col-span-1",children:[a.jsx(J,{children:"Quantity (auto)"}),a.jsx(ue,{value:N,readOnly:!0})]}),a.jsx("div",{className:"md:col-span-1 flex justify-end",children:a.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>x(j),className:"text-rose-600 hover:text-rose-700",title:"Remove row",children:a.jsx(Ws,{className:"h-4 w-4"})})}),a.jsxs("div",{className:"md:col-span-12",children:[a.jsx(J,{children:"Instructions (optional)"}),a.jsx(ue,{placeholder:"e.g., After food; drink water; avoid spicy food",value:w.instructions,onChange:S=>p(j,{instructions:S.target.value})})]})]},j)}),l.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No medicines added."})]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(J,{children:"Notes"}),a.jsx(ue,{placeholder:"Optional note for prescription",value:d,onChange:w=>u(w.target.value)})]}),a.jsx("div",{className:"flex items-end justify-end",children:a.jsx(te,{onClick:b,disabled:f,children:f?"Saving":"Save Prescription"})})]})]})})})]})}const lA=({q:t="",active:n,page:s=1,page_size:r=50}={})=>I.get("/masters/lab-tests",{params:{q:t,active:n,page:s,page_size:r}}),JG=t=>I.post("/masters/lab-tests",t),QG=(t,n)=>I.put(`/masters/lab-tests/${t}`,n),ZG=t=>I.delete(`/masters/lab-tests/${t}`),eY=({patient_id:t,context_type:n=null,context_id:s=null,priority:r="routine",test_ids:i=[]})=>{const o=(i||[]).map(l=>({test_id:l}));return I.post("/lab/orders",{patient_id:t,context_type:n,context_id:s,priority:r,items:o})},tY=(t={})=>I.get("/lab/orders",{params:t}),nY=t=>I.get(`/lab/orders/${t}`),sY=(t,n)=>I.post(`/lab/orders/${t}/collect`,{barcode:n}),rY=(t,n)=>I.post(`/lab/orders/${t}/results`,n),iY=t=>I.post(`/lab/items/${t}/validate`),aY=t=>I.post(`/lab/orders/${t}/finalize`),oY=(t,n,s="")=>I.post("/lab/attachments",{item_id:t,file_url:n,note:s});function lY({value:t=[],onChange:n}){const[s,r]=g.useState(""),[i,o]=g.useState(!1),[l,c]=g.useState([]);g.useEffect(()=>{let h=!0;return o(!0),lA({q:s,active:!0,page_size:50}).then(p=>{h&&c(p.data||[])}).finally(()=>h&&o(!1)),()=>{h=!1}},[s]);const d=g.useMemo(()=>new Set(t||[]),[t]),u=g.useMemo(()=>l.filter(h=>d.has(h.id)),[l,d]),f=h=>{const p=new Set(d);p.has(h)?p.delete(h):p.add(h),n==null||n([...p])};return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Select Tests"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search by code/name",value:s,onChange:h=>r(h.target.value)})]}),a.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:(l||[]).slice(0,10).map(h=>{const p=d.has(h.id);return a.jsxs("button",{type:"button",onClick:()=>f(h.id),className:["rounded-xl border p-3 text-left transition",p?"border-blue-500 bg-blue-50":"hover:bg-gray-50"].join(" "),children:[a.jsxs("div",{className:"font-medium",children:[h.code,"  ",h.name]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",Number(h.price||0).toFixed(2)]})]},h.id)})}),u.length>0&&a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsx("div",{className:"text-xs font-medium mb-2",children:"Selected"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(h=>a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-50 px-3 py-1 text-xs",children:[h.code,a.jsx("button",{onClick:()=>f(h.id),className:"ml-1 rounded-full p-0.5 hover:bg-blue-100",children:a.jsx(dn,{className:"h-3 w-3"})})]},h.id))})]}),i&&a.jsx("div",{className:"text-xs text-gray-500",children:"Loading"})]})}function e0({order:t,to:n,className:s="",prefix:r="LAB"}){const i=new Date((t==null?void 0:t.created_at)||(t==null?void 0:t.createdAt)||Date.now()),o=i.toISOString().slice(2,7).replace("-",""),l=Number((t==null?void 0:t.id)||0).toString(36).toUpperCase().padStart(3,"0"),c=`${r}-${o}-${l}`,d=(t==null?void 0:t.accession_no)||c,u=a.jsx("span",{className:["inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium","bg-blue-50 border-blue-200 text-blue-700",s].join(" "),title:`Created ${i.toLocaleString()}`,children:d});return n?a.jsx(Dn,{to:n,children:u}):u}function Rh({patient:t,patientId:n,className:s=""}){const[r,i]=g.useState(t||null);g.useEffect(()=>{let u=!1;return!t&&n&&(async()=>{try{const{data:f}=await I.get(`/patients/${n}`);u||i(f)}catch{}})(),()=>{u=!0}},[t,n]);const o=(r==null?void 0:r.uhid)||"",l=(r==null?void 0:r.name)||(r!=null&&r.first_name?`${r.first_name} ${r.last_name||""}`.trim():""),c=r!=null&&r.id?`/patients?focus=${r.id}`:void 0,d=a.jsxs("span",{className:["inline-flex items-center gap-2 rounded-md border px-2 py-0.5 text-xs","bg-gray-50 border-gray-200 text-gray-700","max-w-[18rem]",s].join(" "),title:l!==""?l:void 0,children:[a.jsx("span",{className:"font-medium",children:o}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"truncate",children:l})]});return c?a.jsx(Dn,{to:c,children:d}):d}function t0({status:t}){const n=String(t||"ordered").toLowerCase(),r={ordered:"bg-amber-50 text-amber-700 border-amber-200",collected:"bg-blue-50 text-blue-700 border-blue-200",validated:"bg-purple-50 text-purple-700 border-purple-200",reported:"bg-emerald-50 text-emerald-700 border-emerald-200",cancelled:"bg-rose-50 text-rose-700 border-rose-200"}[n]||"bg-gray-50 text-gray-700 border-gray-200";return a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium ${r}`,children:n.charAt(0).toUpperCase()+n.slice(1)})}const cY=t=>t?new Date(t).toLocaleString():"";function dY(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[d,u]=g.useState(null),[f,h]=g.useState([]),[p,m]=g.useState("routine"),x=async()=>{o(!0);try{const{data:w}=await tY({q:t,page_size:100});r(w||[])}catch{$.error("Failed to load orders")}finally{o(!1)}};g.useEffect(()=>{x()},[t]);const y=jn(),v=async()=>{var w,j;if(!d||f.length===0){$.error("Select patient and at least one test");return}try{const{data:N}=await eY({patient_id:d,priority:p,test_ids:f});$.success("Order created"),c(!1),u(null),h([]),m("routine"),y(`/lab/orders/${(N==null?void 0:N.id)||(N==null?void 0:N.order_id)}`)}catch(N){$.error(((j=(w=N==null?void 0:N.response)==null?void 0:w.data)==null?void 0:j.detail)||"Create failed")}},b=g.useMemo(()=>s.length,[s]);return a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sf,{className:"h-5 w-5"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Lab Orders"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Create, track, and report LIS orders"})]})]}),a.jsx(pe,{anyOf:["lab.orders.create","orders.lab.create"],children:a.jsxs("button",{className:"btn-primary",onClick:()=>c(!0),children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New Order"]})})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search patient UHID/name or order id",value:t,onChange:w=>n(w.target.value)})]})}),a.jsx("div",{className:"rounded-xl border bg-white",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Order #"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Priority"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Created"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[i&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3 text-sm text-gray-500",colSpan:6,children:"Loading"})}),!i&&s.map(w=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx(e0,{order:w,to:`/lab/orders/${w.id}`})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(Rh,{patient:w.patient,patientId:w.patient_id})}),a.jsx("td",{className:"px-3 py-2 capitalize",children:w.priority||"routine"}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(t0,{status:w.status})}),a.jsx("td",{className:"px-3 py-2",children:cY(w.created_at||w.createdAt)}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsx(Dn,{to:`/lab/orders/${w.id}`,className:"btn-ghost",children:"View"})})]},w.id)),!i&&s.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:6,children:"No orders"})})]}),a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:6,children:["Total: ",b]})})})]})}),l&&a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>c(!1)}),a.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-xl bg-white shadow-xl p-4 overflow-y-auto",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"New Lab Order"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(va,{value:d,onChange:u}),a.jsx(lY,{value:f,onChange:h}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Priority"}),a.jsxs("select",{className:"input",value:p,onChange:w=>m(w.target.value),children:[a.jsx("option",{value:"routine",children:"Routine"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"stat",children:"STAT"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{className:"btn-ghost",onClick:()=>c(!1),children:"Cancel"}),a.jsx("button",{className:"btn-primary",onClick:v,children:"Create"})]})]})]})]})]})}const uY=async t=>{const n=new FormData;n.append("file",t);const{data:s}=await I.post("/files/upload",n,{headers:{"Content-Type":"multipart/form-data"}});return(s==null?void 0:s.url)||(s==null?void 0:s.file_url)||(s==null?void 0:s.path)||""},W1=t=>t?new Date(t).toLocaleString():"";function fY(){const{id:t}=ma(),[n,s]=g.useState(!1),[r,i]=g.useState(null),[o,l]=g.useState(""),[c,d]=g.useState({}),u=async()=>{s(!0);try{const{data:v}=await nY(t);i(v),d(()=>{const b={};return((v==null?void 0:v.items)||[]).forEach(w=>{b[w.id]={result_value:w.result_value??"",is_critical:!!w.is_critical}}),b})}catch{$.error("Failed to load order")}finally{s(!1)}};g.useEffect(()=>{u()},[t]);const f=g.useMemo(()=>{const v=(r==null?void 0:r.items)||[];return v.length>0&&v.every(b=>(b.status||"").toLowerCase()==="validated")},[r]),h=async()=>{var v,b;if(!o.trim()){$.error("Barcode required");return}try{await sY(t,o.trim()),$.success("Sample collected"),l(""),u()}catch(w){$.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Collect failed")}},p=async()=>{var b,w;const v=Object.entries(c).map(([j,N])=>({item_id:Number(j),result_value:N.result_value,is_critical:!!N.is_critical}));try{await rY(t,v),$.success("Results saved"),u()}catch(j){$.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Save failed")}},m=async v=>{var b,w;try{await iY(v),$.success("Item validated"),u()}catch(j){$.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Validate failed")}},x=async()=>{var v,b;try{await aY(t),$.success("Report finalized"),u()}catch(w){$.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Finalize failed")}},y=async(v,b)=>{try{const w=await uY(b);await oY(v,w,b.name),$.success("Attachment added"),u()}catch{$.error("Attachment failed")}};return n&&!r?a.jsx("div",{className:"p-6",children:"Loading"}):r?a.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-semibold",children:["Lab Order #",r.id]}),a.jsxs("div",{className:"text-xs text-gray-500 flex flex-wrap items-center gap-2",children:[a.jsx(Rh,{patient:r==null?void 0:r.patient,patientId:r==null?void 0:r.patient_id,className:"border-blue-100 bg-blue-50"}),a.jsxs("span",{children:[" Created: ",W1(r.created_at||r.createdAt)]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Priority: ",a.jsx("span",{className:"capitalize",children:r.priority||"routine"}),"  Status: ",r.status]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{anyOf:["lab.results.enter","lab.orders.create"],children:a.jsx("button",{className:"btn",onClick:p,children:"Save Results"})}),a.jsx(pe,{anyOf:["lab.results.validate","lab.results.report","lab.results.approve"],children:a.jsxs("button",{className:"btn",disabled:!f,onClick:x,children:[a.jsx(Ho,{className:"h-4 w-4 mr-2"})," Finalize"]})})]})]}),a.jsx(pe,{anyOf:["lab.samples.collect"],children:a.jsxs("section",{className:"rounded-xl border bg-white p-4",children:[a.jsx("h2",{className:"font-semibold mb-3",children:"Sample Collection"}),a.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Barcode"}),a.jsx("input",{className:"input",placeholder:"Scan/enter barcode",value:o,onChange:v=>l(v.target.value)})]}),a.jsx("button",{className:"btn",onClick:h,children:"Collect"}),a.jsxs("div",{className:"text-xs text-gray-500 ml-auto",children:["Collected at: ",W1(r.collected_at||r.collectedAt)]})]})]})}),a.jsxs("section",{className:"rounded-xl border bg-white",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"font-semibold",children:"Results"})}),a.jsxs("div",{className:"divide-y",children:[(r.items||[]).map(v=>{const b=c[v.id]||{result_value:"",is_critical:!1},w=(v.status||"").toLowerCase()==="validated";return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[v.test_code||v.code,"  ",v.test_name||v.name]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Range: ",v.reference_range||"","  Unit: ",v.unit||""]})]}),a.jsxs("div",{className:"text-xs",children:["Status: ",a.jsx("span",{className:w?"text-emerald-600":"text-gray-600",children:w?"Validated":v.status||"Pending"})]})]}),a.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-[2fr_1fr_auto]",children:[a.jsx("input",{className:"input",placeholder:"Result value",value:b.result_value,onChange:j=>d(N=>({...N,[v.id]:{...N[v.id],result_value:j.target.value}}))}),a.jsxs("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:!!b.is_critical,onChange:j=>d(N=>({...N,[v.id]:{...N[v.id],is_critical:j.target.checked}}))}),a.jsx("span",{className:"text-sm",children:"Critical"})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{className:"btn-ghost",onClick:()=>m(v.id),disabled:w,children:"Validate"})})]}),a.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[a.jsxs("label",{className:"btn-ghost inline-flex items-center gap-2 cursor-pointer",children:[a.jsx(pc,{className:"h-4 w-4"}),a.jsx("span",{children:"Attach"}),a.jsx("input",{type:"file",hidden:!0,onChange:j=>{var N;return((N=j.target.files)==null?void 0:N[0])&&y(v.id,j.target.files[0])}})]}),a.jsx("div",{className:"text-xs text-gray-500",children:(v.attachments||[]).length?`${v.attachments.length} attachment(s)`:"No attachments"})]})]},v.id)}),(r.items||[]).length===0&&a.jsx("div",{className:"p-6 text-sm text-gray-500",children:"No items"})]})]})]}):a.jsx("div",{className:"p-6",children:"Order not found"})}function hY(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState(!1),[l,c]=g.useState(null),[d,u]=g.useState(!1),f=async()=>{o(!0);try{const{data:v}=await lA({q:t,page_size:200});r(v||[])}catch{$.error("Failed to load tests")}finally{o(!1)}};g.useEffect(()=>{f()},[t]);const h=()=>{c({code:"",name:"",price:0,is_active:!0}),u(!0)},p=v=>{c({...v}),u(!0)},m=async()=>{var v,b;try{l!=null&&l.id?(await QG(l.id,l),$.success("Updated")):(await JG(l),$.success("Created")),u(!1),f()}catch(w){$.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Save failed")}},x=async v=>{if(confirm("Delete this test?"))try{await ZG(v),$.success("Deleted"),f()}catch{$.error("Delete failed")}},y=g.useMemo(()=>s.length,[s]);return a.jsxs("div",{className:"p-4 md:p-6",children:[a.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Lab Masters"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Manage NABL-friendly test catalogue"})]}),a.jsx(pe,{anyOf:["lab.masters.manage","masters.lab.manage"],children:a.jsxs("button",{className:"btn-primary",onClick:h,children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New Test"]})})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search code/name",value:t,onChange:v=>n(v.target.value)})]})}),a.jsx("div",{className:"rounded-xl border bg-white",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Price"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Active"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[i&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!i&&s.map(v=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:v.code}),a.jsx("td",{className:"px-3 py-2",children:v.name}),a.jsxs("td",{className:"px-3 py-2 text-right",children:["",Number(v.price||0).toFixed(2)]}),a.jsx("td",{className:"px-3 py-2",children:v.is_active?"Yes":"No"}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsxs(pe,{anyOf:["lab.masters.manage","masters.lab.manage"],children:[a.jsx("button",{className:"btn-ghost mr-2",onClick:()=>p(v),children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx("button",{className:"btn-ghost text-red-600",onClick:()=>x(v.id),children:a.jsx(Ws,{className:"h-4 w-4"})})]})})]},v.id)),!i&&s.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No tests"})})]}),a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:5,children:["Total: ",y]})})})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>u(!1)}),a.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-xl p-4 overflow-y-auto",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:l!=null&&l.id?"Edit Test":"New Test"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Code"}),a.jsx("input",{className:"input",value:(l==null?void 0:l.code)||"",onChange:v=>c(b=>({...b,code:v.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Name"}),a.jsx("input",{className:"input",value:(l==null?void 0:l.name)||"",onChange:v=>c(b=>({...b,name:v.target.value}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Price"}),a.jsx("input",{type:"number",step:"0.01",className:"input",value:(l==null?void 0:l.price)??0,onChange:v=>c(b=>({...b,price:parseFloat(v.target.value||0)}))})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"active",type:"checkbox",checked:!!(l!=null&&l.is_active),onChange:v=>c(b=>({...b,is_active:v.target.checked}))}),a.jsx("label",{htmlFor:"active",className:"text-sm",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[a.jsx("button",{className:"btn-ghost",onClick:()=>u(!1),children:"Cancel"}),a.jsx("button",{className:"btn-primary",onClick:m,children:"Save"})]})]})]})]})]})}const cA=({q:t="",active:n,page:s=1,page_size:r=50}={})=>I.get("/ris/masters/tests",{params:{q:t,active:n,page:s,page_size:r}}),pY=t=>I.post("/ris/masters/tests",t),mY=(t,n)=>I.put(`/ris/masters/tests/${t}`,n),gY=t=>I.delete(`/ris/masters/tests/${t}`),xY=({patient_id:t,test_id:n,context_type:s=null,context_id:r=null,ordering_user_id:i=null,priority:o="routine"})=>I.post("/ris/orders",{patient_id:t,test_id:n,context_type:s,context_id:r,ordering_user_id:i,priority:o}),yY=(t={})=>I.get("/ris/orders",{params:t}),vY=t=>I.get(`/ris/orders/${t}`),bY=(t,{scheduled_at:n})=>I.post(`/ris/orders/${t}/schedule`,{scheduled_at:n}),wY=t=>I.post(`/ris/orders/${t}/scan`),jY=(t,{report_text:n})=>I.post(`/ris/orders/${t}/report`,{report_text:n}),NY=(t,{report_text:n})=>I.put(`/ris/orders/${t}/report`,{report_text:n}),SY=t=>I.post(`/ris/orders/${t}/approve`),kY=(t,n,s="")=>I.post(`/ris/attachments/${t}`,{file_url:n,note:s}),CY=(t,n)=>{const s=new FormData;return s.append("file",n),I.post(`/ris/orders/${t}/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})};function dA({modality:t}){const n=String(t||"").toUpperCase(),r={XR:"bg-sky-50 text-sky-700 border-sky-200",CT:"bg-purple-50 text-purple-700 border-purple-200",MRI:"bg-indigo-50 text-indigo-700 border-indigo-200",USG:"bg-emerald-50 text-emerald-700 border-emerald-200",MAMMO:"bg-rose-50 text-rose-700 border-rose-200"}[n]||"bg-gray-50 text-gray-700 border-gray-200";return a.jsx("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium ${r}`,children:n||""})}function _Y({onClose:t,onCreated:n}){const[s,r]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState(""),[d,u]=g.useState(!1),[f,h]=g.useState("routine"),[p,m]=g.useState("");g.useEffect(()=>{let y=!1;return(async()=>{const{data:b}=await cA({q:l});y||o(Array.isArray(b)?b:(b==null?void 0:b.items)||[])})(),()=>{y=!0}},[l]);const x=async()=>{var y,v;if(!s)return $.error("Select a patient");if(!p)return $.error("Select a test");u(!0);try{const{data:b}=await xY({patient_id:s,test_id:Number(p),priority:f});$.success(`Order #${b==null?void 0:b.id} created`),n==null||n(b),t==null||t()}catch(b){$.error(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Failed to create order")}finally{u(!1)}};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Create Radiology Order"}),a.jsx(va,{value:s,onChange:r}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Test"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"input",placeholder:"Search tests",value:l,onChange:y=>c(y.target.value)}),a.jsxs("select",{className:"input",value:p,onChange:y=>m(y.target.value),children:[a.jsx("option",{value:"",children:"Select"}),i.map(y=>a.jsxs("option",{value:y.id,children:[y.code,"  ",y.name," ",y.modality?`(${y.modality})`:""]},y.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Priority"}),a.jsxs("select",{className:"input",value:f,onChange:y=>h(y.target.value),children:[a.jsx("option",{value:"routine",children:"Routine"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"stat",children:"STAT"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[a.jsx("button",{className:"btn-ghost",onClick:t,children:"Cancel"}),a.jsx("button",{className:"btn",onClick:x,disabled:d,children:d?"Creating":"Create Order"})]})]})}function EY({open:t,onClose:n,children:s}){return t?a.jsxs("div",{className:"fixed inset-0 z-[100] grid place-items-center bg-black/40 p-4",children:[a.jsx("div",{className:"w-full max-w-3xl rounded-2xl bg-white p-4 shadow-2xl",children:s}),a.jsx("button",{className:"absolute inset-0 -z-10",onClick:n,"aria-label":"Close"})]}):null}function TY(){const[t,n]=g.useState([]),[s,r]=g.useState(!0),[i,o]=g.useState(""),[l,c]=g.useState(!1);return g.useEffect(()=>{let d=!1;return(async()=>{var f,h;r(!0);try{const{data:p}=await yY({q:i});d||n(Array.isArray(p)?p:[])}catch(p){$.error(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to load orders")}finally{d||r(!1)}})(),()=>{d=!0}},[i]),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Radiology Orders"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Book, track, scan and report."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"input w-60",placeholder:"Search test, UHID or name",value:i,onChange:d=>o(d.target.value)}),a.jsx(pe,{anyOf:["orders.ris.create","radiology.orders.create"],children:a.jsxs("button",{className:"btn",onClick:()=>c(!0),children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New Order"]})})]})]}),a.jsx("div",{className:"rounded-xl border bg-white",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Order"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Modality"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Priority"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Created"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[s&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3",colSpan:7,children:"Loading"})}),!s&&t.map(d=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx(e0,{order:d,to:`/ris/orders/${d.id}`,prefix:"RAD"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(Rh,{patientId:d.patient_id})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(dA,{modality:d.modality})}),a.jsx("td",{className:"px-3 py-2 capitalize",children:d.priority||"routine"}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(t0,{status:d.status})}),a.jsx("td",{className:"px-3 py-2",children:new Date(d.created_at).toLocaleString()}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsx(Dn,{to:`/ris/orders/${d.id}`,className:"btn-ghost",children:"View"})})]},d.id)),!s&&t.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:7,children:"No orders"})})]})]})}),a.jsx(EY,{open:l,onClose:()=>c(!1),children:a.jsx(_Y,{onClose:()=>c(!1),onCreated:()=>c(!1)})})]})}function MY({t,onEdit:n,onDelete:s}){return a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:t.code}),a.jsx("td",{className:"px-3 py-2",children:t.name}),a.jsx("td",{className:"px-3 py-2",children:t.modality||""}),a.jsx("td",{className:"px-3 py-2",children:Number(t.price||0).toFixed(2)}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsxs(pe,{anyOf:["radiology.masters.manage","masters.ris.manage"],children:[a.jsx("button",{className:"btn-ghost mr-2",onClick:()=>n(t),children:"Edit"}),a.jsx("button",{className:"btn-ghost text-rose-600",onClick:()=>s(t),children:"Delete"})]})})]})}function AY(){const[t,n]=g.useState([]),[s,r]=g.useState(!0),[i,o]=g.useState(""),[l,c]=g.useState({code:"",name:"",modality:"",price:0}),[d,u]=g.useState(null),f=async()=>{var x,y;r(!0);try{const{data:v}=await cA({q:i,page_size:100});n(Array.isArray(v)?v:(v==null?void 0:v.items)||[])}catch(v){$.error(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Failed to load")}finally{r(!1)}};g.useEffect(()=>{f()},[i]);const h=async()=>{var x,y;try{d?(await mY(d,l),$.success("Updated")):(await pY(l),$.success("Created")),c({code:"",name:"",modality:"",price:0}),u(null),f()}catch(v){$.error(((y=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:y.detail)||"Save failed")}},p=x=>{u(x.id),c({code:x.code,name:x.name,modality:x.modality||"",price:x.price||0})},m=async x=>{var y,v;if(window.confirm(`Delete ${x.code}?`))try{await gY(x.id),$.success("Deleted"),f()}catch(b){$.error(((v=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:v.detail)||"Delete failed")}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"RIS Masters"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Manage radiology tests & modalities."})]}),a.jsx("input",{className:"input w-60",placeholder:"Search code/name",value:i,onChange:x=>o(x.target.value)})]}),a.jsx(pe,{anyOf:["radiology.masters.manage","masters.ris.manage"],children:a.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:d?"Edit Test":"New Test"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-4",children:[a.jsx("input",{className:"input",placeholder:"Code",value:l.code,onChange:x=>c(y=>({...y,code:x.target.value}))}),a.jsx("input",{className:"input",placeholder:"Name",value:l.name,onChange:x=>c(y=>({...y,name:x.target.value}))}),a.jsx("input",{className:"input",placeholder:"Modality (XR/CT/MRI/USG)",value:l.modality,onChange:x=>c(y=>({...y,modality:x.target.value}))}),a.jsx("input",{className:"input",placeholder:"Price",type:"number",step:"0.01",value:l.price,onChange:x=>c(y=>({...y,price:x.target.value}))})]}),a.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[a.jsx("button",{className:"btn",onClick:h,children:d?"Update":"Create"}),d&&a.jsx("button",{className:"btn-ghost",onClick:()=>{u(null),c({code:"",name:"",modality:"",price:0})},children:"Cancel"})]})]})}),a.jsx("div",{className:"rounded-xl border bg-white",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Modality"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Price"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[s&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!s&&t.map(x=>a.jsx(MY,{t:x,onEdit:p,onDelete:m},x.id)),!s&&t.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No tests"})})]})]})})]})}const Cr=t=>t?new Date(t).toLocaleString():"";function PY(){const{id:t}=ma(),[n,s]=g.useState(null),[r,i]=g.useState(!0),[o,l]=g.useState(""),[c,d]=g.useState(""),[u,f]=g.useState(!1),[h,p]=g.useState([]),m=async()=>{var N,S;i(!0);try{const{data:_}=await vY(t);s(_),d((_==null?void 0:_.report_text)||"")}catch(_){$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to load order")}finally{i(!1)}};g.useEffect(()=>{m()},[t]);const x=async()=>{var N,S;if(!o)return $.error("Pick a date & time");try{await bY(n.id,{scheduled_at:o}),$.success("Scheduled"),m()}catch(_){$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to schedule")}},y=async()=>{var N,S;try{await wY(n.id),$.success("Marked scanned"),m()}catch(_){$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to mark scanned")}},v=async()=>{var N,S;f(!0);try{n.status==="reported"||n.status==="approved"?await NY(n.id,{report_text:c}):await jY(n.id,{report_text:c}),$.success("Report saved"),m()}catch(_){$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Failed to save report")}finally{f(!1)}},b=async()=>{var N,S;try{await SY(n.id),$.success("Report approved"),m()}catch(_){$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"Approval failed")}},w=async N=>{var _,C,k;const S=(_=N.target.files)==null?void 0:_[0];if(S)try{const{data:E}=await CY(n.id,S);p(M=>[{file_url:E==null?void 0:E.file_url,note:S.name},...M]),$.success("Attachment uploaded")}catch(E){$.error(((k=(C=E==null?void 0:E.response)==null?void 0:C.data)==null?void 0:k.detail)||"Upload failed")}finally{N.target.value=""}},j=async()=>{var S,_;const N=prompt("Paste file URL");if(N)try{const{data:C}=await kY(n.id,N,"Link");p(k=>[{file_url:(C==null?void 0:C.file_url)||N,note:"Link"},...k]),$.success("Attachment linked")}catch(C){$.error(((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Link failed")}};return r?a.jsx("div",{children:"Loading"}):n?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-semibold",children:["Radiology Order ",a.jsx(e0,{order:n,prefix:"RAD"})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Patient: ",a.jsx(Rh,{patientId:n.patient_id}),"  Created: ",Cr(n.created_at)]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Modality: ",a.jsx(dA,{modality:n.modality}),"  Status: ",a.jsx(t0,{status:n.status})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{anyOf:["radiology.report.create"],children:a.jsx("button",{className:"btn",onClick:v,disabled:u,children:u?"Saving":"Save Report"})}),a.jsx(pe,{anyOf:["radiology.report.approve"],children:a.jsxs("button",{className:"btn",onClick:b,children:[a.jsx(Ho,{className:"h-4 w-4 mr-2"})," Approve"]})})]})]}),a.jsxs("section",{className:"rounded-2xl border bg-white p-4 space-y-4",children:[a.jsx("h2",{className:"text-sm font-semibold",children:"Workflow"}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[a.jsx(l2,{className:"h-4 w-4"})," Schedule"]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsx("input",{type:"datetime-local",className:"input w-full",value:o,onChange:N=>l(N.target.value)}),a.jsx(pe,{anyOf:["radiology.schedule.manage"],children:a.jsx("button",{className:"btn w-full",onClick:x,children:"Book Slot"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Current: ",Cr(n.scheduled_at)]})]})]}),a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsx("div",{className:"flex items-center gap-2 font-medium",children:"Scan"}),a.jsxs("div",{className:"mt-2 grid gap-2",children:[a.jsx(pe,{anyOf:["radiology.scan.update"],children:a.jsx("button",{className:"btn w-full",onClick:y,children:"Mark Scanned"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Scanned: ",Cr(n.scanned_at)]})]})]}),a.jsxs("div",{className:"rounded-xl border p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[a.jsx(pc,{className:"h-4 w-4"})," Attachments"]}),a.jsxs("div",{className:"mt-2 grid gap-2",children:[a.jsx("input",{type:"file",onChange:w}),a.jsx("button",{className:"btn-ghost text-left",onClick:j,children:"Add link"}),a.jsxs("div",{className:"mt-2 space-y-1",children:[h.map((N,S)=>a.jsx("a",{href:N.file_url,className:"text-xs text-blue-700 underline",target:"_blank",rel:"noreferrer",children:N.note||N.file_url},S)),h.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No attachments (local list)"})]})]})]})]})]}),a.jsxs("section",{className:"rounded-2xl border bg-white p-4 space-y-3",children:[a.jsx("h2",{className:"text-sm font-semibold",children:"Report"}),a.jsx("textarea",{className:"input min-h-[200px]",placeholder:"Enter radiology report text",value:c,onChange:N=>d(N.target.value)}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-gray-600",children:[a.jsxs("div",{children:["Ordered: ",Cr(n.created_at)]}),a.jsxs("div",{children:["Scheduled: ",Cr(n.scheduled_at)]}),a.jsxs("div",{children:["Scanned: ",Cr(n.scanned_at)]}),a.jsxs("div",{children:["Reported: ",Cr(n.reported_at)]}),a.jsxs("div",{children:["Approved: ",Cr(n.approved_at)]})]})]})]}):a.jsx("div",{className:"text-sm text-gray-500",children:"Order not found"})}const uA=(t={})=>I.get("/ot/masters/surgeries",{params:t}),RY=t=>I.post("/ot/masters/surgeries",t),OY=(t,n)=>I.put(`/ot/masters/surgeries/${t}`,n),DY=t=>I.delete(`/ot/masters/surgeries/${t}`),IY=(t={})=>I.get("/ot/orders",{params:t}),LY=t=>I.get(`/ot/orders/${t}`),$Y=t=>I.post("/ot/orders",t),FY=(t,n)=>I.post(`/ot/orders/${t}/schedule`,n),zY=(t,n)=>I.post(`/ot/orders/${t}/status`,{status:n}),BY=(t,n,s="")=>{const r=new FormData;return r.append("file",n),s&&r.append("note",s),I.post(`/ot/orders/${t}/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},VY=(t,n)=>I.post(`/ot/orders/${t}/attachments`,n);function HY({open:t,onClose:n}){const s=jn(),r=lt(k=>k.user),[i,o]=g.useState(null),[l,c]=g.useState(""),[d,u]=g.useState([]),[f,h]=g.useState(""),[p,m]=g.useState(""),[x,y]=g.useState(""),[v,b]=g.useState(""),[w,j]=g.useState(""),[N,S]=g.useState(!1);g.useEffect(()=>{if(!t)return;let k=!0;return(async()=>{try{const{data:M}=await uA({q:l,page_size:50,active:!0});if(!k)return;u((M==null?void 0:M.items)||[])}catch{}})(),()=>{k=!1}},[t,l]);const _=g.useMemo(()=>i&&(f||p.trim().length>0),[i,f,p]),C=async()=>{var k,E;if(_){S(!0);try{const M={patient_id:i,context_type:"ipd",context_id:null,surgery_master_id:f?Number(f):null,surgery_name:f?null:p.trim(),estimated_cost:x?Number(x):null,surgeon_id:null,anaesthetist_id:null,scheduled_start:v||null,scheduled_end:w||null,ordering_user_id:r==null?void 0:r.id},{data:D}=await $Y(M);$.success("OT order created"),n==null||n(),s(`/ot/orders/${D.id}`)}catch(M){const D=((E=(k=M==null?void 0:M.response)==null?void 0:k.data)==null?void 0:E.detail)||"Failed to create OT order";$.error(D)}finally{S(!1)}}};return t?a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-end md:place-items-center bg-black/30 backdrop-blur-sm p-3",children:a.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-white shadow-xl",children:[a.jsxs("header",{className:"flex items-center justify-between border-b p-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"New OT Order"}),a.jsx("button",{className:"btn-ghost",onClick:()=>n==null?void 0:n(),children:"Close"})]}),a.jsxs("div",{className:"p-4 space-y-5",children:[a.jsx(va,{value:i,onChange:o}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Choose Surgery (Master)"}),a.jsx("input",{className:"input",placeholder:"Search master list",value:l,onChange:k=>c(k.target.value)}),a.jsxs("select",{className:"input",value:f,onChange:k=>h(k.target.value),children:[a.jsx("option",{value:"",children:" Select from master "}),d.map(k=>a.jsxs("option",{value:k.id,children:[k.code,"  ",k.name," (",Number(k.default_cost||0).toFixed(2),")"]},k.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"OR enter Custom Surgery"}),a.jsx("input",{className:"input",placeholder:"e.g., Laparoscopic Cholecystectomy",value:p,onChange:k=>m(k.target.value),disabled:!!f}),a.jsx("label",{className:"text-sm font-medium",children:"Estimated Cost (optional)"}),a.jsx("input",{className:"input",type:"number",min:"0",value:x,onChange:k=>y(k.target.value)})]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium inline-flex items-center gap-2",children:[a.jsx(ih,{className:"h-4 w-4"})," Scheduled Start (optional)"]}),a.jsx("input",{className:"input",type:"datetime-local",value:v,onChange:k=>b(k.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Scheduled End (optional)"}),a.jsx("input",{className:"input",type:"datetime-local",value:w,onChange:k=>j(k.target.value)})]})]})]}),a.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t p-4",children:[a.jsx("button",{className:"btn-ghost",onClick:()=>n==null?void 0:n(),children:"Cancel"}),a.jsxs("button",{className:"btn",disabled:!_||N,onClick:C,children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," Create Order"]})]})]})}):null}function fA({id:t}){const[n,s]=g.useState(null);return g.useEffect(()=>{let r=!0;return(async()=>{if(t)try{const{data:o}=await I.get(`/patients/${t}`);if(!r)return;const l=[o.first_name,o.last_name].filter(Boolean).join(" ");s(`${o.uhid||"UHID"}  ${l||"Name"}`)}catch{s(`#${t}`)}})(),()=>{r=!1}},[t]),a.jsx("span",{children:n||""})}const UY=["planned","scheduled","in_progress","completed","cancelled"],WY=t=>{if(!t)return"";try{return new Date(t).toLocaleString()}catch{return t}};function qY(){const[t,n]=g.useState([]),[s,r]=g.useState("planned"),[i,o]=g.useState(""),[l,c]=g.useState(!1),[d,u]=g.useState(!1),f=Ht("ot.cases.create")||Ht("ipd.manage"),h=async()=>{var m,x;c(!0);try{const y={status:s,limit:200};i&&(y.q=i);const{data:v}=await IY(y);n(Array.isArray(v)?v:[])}catch(y){$.error(((x=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:x.detail)||"Failed to load OT orders")}finally{c(!1)}};g.useEffect(()=>{h()},[s]);const p=g.useMemo(()=>t.length,[t]);return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"OT Orders"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Plan, schedule and track surgical cases"})]}),a.jsx("div",{className:"flex items-center gap-2",children:f&&a.jsxs("button",{className:"btn",onClick:()=>u(!0),children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," New OT Order"]})})]}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-[1fr_auto]",children:[a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"input pl-9",placeholder:"Search text (test name/code not indexed here, use status filters)",value:i,onChange:m=>o(m.target.value),onKeyDown:m=>m.key==="Enter"&&h()})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"input",value:s,onChange:m=>r(m.target.value),children:UY.map(m=>a.jsx("option",{value:m,children:m},m))}),a.jsx("button",{className:"btn-ghost",onClick:h,children:"Refresh"})]})]}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Case #"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Surgery"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Scheduled"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[l&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3",colSpan:6,children:"Loading"})}),!l&&t.map(m=>a.jsxs("tr",{className:"border-t",children:[a.jsxs("td",{className:"px-3 py-2",children:["#",m.id]}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(fA,{id:m.patient_id})}),a.jsx("td",{className:"px-3 py-2",children:m.surgery_name||""}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:"inline-block rounded-full bg-gray-100 px-2 py-0.5 text-xs capitalize",children:m.status})}),a.jsx("td",{className:"px-3 py-2",children:WY(m.scheduled_start)}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsx(Dn,{to:`/ot/orders/${m.id}`,className:"btn-ghost",children:"View"})})]},m.id)),!l&&t.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:6,children:"No OT orders"})})]}),a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",colSpan:6,children:["Total: ",p]})})})]})}),a.jsx(HY,{open:d,onClose:()=>u(!1)})]})}const Pa=t=>{if(!t)return"";try{return new Date(t).toLocaleString()}catch{return t}},KY=t=>{const n=(t||"").toLowerCase();return n==="planned"?["scheduled","in_progress","cancelled"]:n==="scheduled"?["in_progress","cancelled"]:n==="in_progress"?["completed","cancelled"]:[]};function GY(){const{id:t}=ma(),[n,s]=g.useState(null),[r,i]=g.useState(!0),[o,l]=g.useState(!1),c=Ht("ot.cases.update"),d=Ht("ot.cases.update")||Ht("ot.masters.manage"),u=async()=>{var k,E;i(!0);try{const{data:M}=await LY(t);s(M)}catch(M){$.error(((E=(k=M==null?void 0:M.response)==null?void 0:k.data)==null?void 0:E.detail)||"Failed to load order")}finally{i(!1)}};g.useEffect(()=>{u()},[t]),g.useEffect(()=>{try{const E=(I.defaults.baseURL||"").replace(/^http/,"ws"),M=new WebSocket(`${E}/ot/ws`);return M.onmessage=D=>{var R;try{const T=JSON.parse(D.data);if(!((R=T==null?void 0:T.type)!=null&&R.startsWith("ot."))||String(T==null?void 0:T.order_id)!==String(t))return;u()}catch{}},()=>M.close()}catch{}},[t]);const[f,h]=g.useState(""),[p,m]=g.useState(""),x=async()=>{var k,E;if(!f)return $.error("Start time required");l(!0);try{await FY(t,{scheduled_start:f,scheduled_end:p||null}),$.success("Scheduled"),h(""),m(""),await u()}catch(M){$.error(((E=(k=M==null?void 0:M.response)==null?void 0:k.data)==null?void 0:E.detail)||"Failed to schedule")}finally{l(!1)}},y=async k=>{var E,M;l(!0);try{await zY(t,k),$.success(`Status: ${k}`),await u()}catch(D){$.error(((M=(E=D==null?void 0:D.response)==null?void 0:E.data)==null?void 0:M.detail)||"Failed to update status")}finally{l(!1)}},[v,b]=g.useState(""),w=g.useRef(null),j=async k=>{var M,D,R;const E=(M=k.target.files)==null?void 0:M[0];if(E){l(!0);try{await BY(t,E,v),$.success("File uploaded"),b(""),w.current.value="",await u()}catch(T){$.error(((R=(D=T==null?void 0:T.response)==null?void 0:D.data)==null?void 0:R.detail)||"Upload failed")}finally{l(!1)}}},[N,S]=g.useState(""),_=async()=>{var k,E;if(N.trim()){l(!0);try{await VY(t,{file_url:N.trim(),note:v}),$.success("Link added"),S(""),b(""),await u()}catch(M){$.error(((E=(k=M==null?void 0:M.response)==null?void 0:k.data)==null?void 0:E.detail)||"Failed to add link")}finally{l(!1)}}};if(r)return a.jsx("div",{className:"p-4",children:"Loading"});if(!n)return a.jsx("div",{className:"p-4",children:"Not found"});const C=KY(n.status);return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-semibold",children:["OT Case #",n.id]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Patient: ",a.jsx(fA,{id:n.patient_id}),"  Created: ",Pa(n.created_at)]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Surgery: ",a.jsx("span",{className:"font-medium",children:n.surgery_name||""}),"  Status: ",a.jsx("span",{className:"capitalize",children:n.status})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("button",{className:"btn-ghost",onClick:()=>u(),children:[a.jsx(ah,{className:"h-4 w-4 mr-2"})," Refresh"]}),c&&C.includes("scheduled")&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"datetime-local",className:"input",value:f,onChange:k=>h(k.target.value)}),a.jsx("input",{type:"datetime-local",className:"input",value:p,onChange:k=>m(k.target.value)}),a.jsxs("button",{className:"btn",disabled:o,onClick:x,children:[a.jsx(ih,{className:"h-4 w-4 mr-2"})," Schedule"]})]}),c&&C.includes("in_progress")&&a.jsxs("button",{className:"btn",disabled:o,onClick:()=>y("in_progress"),children:[a.jsx(N$,{className:"h-4 w-4 mr-2"})," Start"]}),c&&C.includes("completed")&&a.jsxs("button",{className:"btn",disabled:o,onClick:()=>y("completed"),children:[a.jsx(Ho,{className:"h-4 w-4 mr-2"})," Complete"]}),c&&C.includes("cancelled")&&a.jsxs("button",{className:"btn-ghost",disabled:o,onClick:()=>y("cancelled"),children:[a.jsx(dn,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]}),a.jsxs("section",{className:"rounded-xl border bg-white p-4",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Timing"}),a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-3",children:[a.jsx(xl,{label:"Scheduled Start",value:Pa(n.scheduled_start)}),a.jsx(xl,{label:"Scheduled End",value:Pa(n.scheduled_end)}),a.jsx(xl,{label:"Actual Start",value:Pa(n.actual_start)}),a.jsx(xl,{label:"Actual End",value:Pa(n.actual_end)}),a.jsx(xl,{label:"Updated",value:Pa(n.updated_at)})]})]}),a.jsxs("section",{className:"rounded-xl border bg-white p-4 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"font-medium",children:"Attachments"})}),d&&a.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto]",children:[a.jsxs("div",{className:"grid gap-2 sm:grid-cols-[2fr_1fr]",children:[a.jsx("input",{type:"file",ref:w,className:"input",onChange:j,"aria-label":"Upload file"}),a.jsx("input",{className:"input",placeholder:"Note (optional)",value:v,onChange:k=>b(k.target.value)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"input",placeholder:"or paste link (https://...)",value:N,onChange:k=>S(k.target.value)}),a.jsxs("button",{className:"btn-ghost",disabled:o,onClick:_,children:[a.jsx(Ly,{className:"h-4 w-4 mr-2"})," Add Link"]})]})]}),a.jsx("div",{className:"rounded-lg border",children:a.jsx("div",{className:"p-3 text-sm text-gray-500",children:"Uploaded files and links are stored against this case. Use the upload field to add new items."})})]})]})}function xl({label:t,value:n}){return a.jsxs("div",{className:"rounded-lg border bg-gray-50 px-3 py-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:t}),a.jsx("div",{className:"text-sm",children:n||""})]})}function YY(){Ht("ot.masters.manage")||Ht("ot.masters.view");const t=Ht("ot.masters.manage"),[n,s]=g.useState([]),[r,i]=g.useState(""),[o,l]=g.useState(!0),c=async()=>{var v,b;l(!0);try{const{data:w}=await uA({q:r,page:1,page_size:100});s(w.items||[])}catch(w){$.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Failed to load surgeries")}finally{l(!1)}};g.useEffect(()=>{c()},[]);const[d,u]=g.useState({id:null,code:"",name:"",default_cost:"",active:!0}),[f,h]=g.useState(!1),p=()=>{u({id:null,code:"",name:"",default_cost:"",active:!0}),h(!0)},m=v=>{u({...v}),h(!0)},x=async()=>{var v,b;if(!d.code.trim()||!d.name.trim())return $.error("Code and Name are required");try{d.id?(await OY(d.id,{code:d.code.trim(),name:d.name.trim(),default_cost:Number(d.default_cost||0),active:!!d.active}),$.success("Updated")):(await RY({code:d.code.trim(),name:d.name.trim(),default_cost:Number(d.default_cost||0),active:!!d.active}),$.success("Created")),h(!1),await c()}catch(w){$.error(((b=(v=w==null?void 0:w.response)==null?void 0:v.data)==null?void 0:b.detail)||"Save failed")}},y=async v=>{var b,w;if(confirm("Delete this surgery master?"))try{await DY(v),$.success("Deleted"),await c()}catch(j){$.error(((w=(b=j==null?void 0:j.response)==null?void 0:b.data)==null?void 0:w.detail)||"Delete failed")}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("header",{className:"flex items-center justify-between gap-3",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"OT Masters"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"input",placeholder:"Search name/code",value:r,onChange:v=>i(v.target.value)}),a.jsxs("button",{className:"btn-ghost",onClick:c,children:[a.jsx(ah,{className:"h-4 w-4 mr-2"}),"Refresh"]}),t&&a.jsxs("button",{className:"btn",onClick:p,children:[a.jsx(wt,{className:"h-4 w-4 mr-2"}),"New Surgery"]})]})]}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Default Cost"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Active"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-3",colSpan:5,children:"Loading"})}),!o&&n.map(v=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:v.code}),a.jsx("td",{className:"px-3 py-2",children:v.name}),a.jsxs("td",{className:"px-3 py-2",children:[" ",Number(v.default_cost||0).toFixed(2)]}),a.jsx("td",{className:"px-3 py-2",children:v.active?"Yes":"No"}),a.jsx("td",{className:"px-3 py-2 text-right",children:t&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-ghost mr-2",onClick:()=>m(v),children:a.jsx(xa,{className:"h-4 w-4"})}),a.jsx("button",{className:"btn-ghost text-red-600",onClick:()=>y(v.id),children:a.jsx(Ws,{className:"h-4 w-4"})})]})})]},v.id)),!o&&n.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No items"})})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",onClick:()=>h(!1),children:a.jsxs("div",{className:"w-full max-w-lg rounded-xl border bg-white p-4",onClick:v=>v.stopPropagation(),children:[a.jsx("h3",{className:"font-medium mb-3",children:d.id?"Edit Surgery":"New Surgery"}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx("input",{className:"input",placeholder:"Code",value:d.code,onChange:v=>u(b=>({...b,code:v.target.value}))}),a.jsx("input",{className:"input",placeholder:"Name",value:d.name,onChange:v=>u(b=>({...b,name:v.target.value}))}),a.jsx("input",{className:"input",placeholder:"Default Cost",type:"number",value:d.default_cost,onChange:v=>u(b=>({...b,default_cost:v.target.value}))}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:!!d.active,onChange:v=>u(b=>({...b,active:v.target.checked}))}),"Active"]})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx("button",{className:"btn-ghost",onClick:()=>h(!1),children:"Cancel"}),a.jsx("button",{className:"btn",onClick:x,children:"Save"})]})]})})]})}const XY=t=>I.post("/billing/invoices",t),JY=t=>I.get(`/billing/invoices/${t}`),QY=(t={})=>I.get("/billing/invoices",{params:t}),ZY=t=>I.post(`/billing/invoices/${t}/cancel`),eX=t=>I.post(`/billing/invoices/${t}/finalize`),tX=(t,n)=>I.post(`/billing/invoices/${t}/items/manual`,n),nX=(t,n,s)=>I.patch(`/billing/invoices/${t}/items/${n}`,s),sX=(t,n,s={reason:"Voided"})=>I.post(`/billing/invoices/${t}/items/${n}/void`,s),rX=t=>I.get("/billing/unbilled-services",{params:{patient_id:t}}),iX=(t,n=[],s)=>I.post(`/billing/invoices/${t}/items/bulk-from-unbilled`,{uids:n},{params:{patient_id:s}}),aX=(t,n)=>I.post(`/billing/invoices/${t}/payments`,n),sr=t=>Number.isFinite(+t)?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(+t):"0.00",oX=t=>t?`PID-${String(t).padStart(5,"0")}`:"";function lX(){const[t,n]=g.useState([]),[s,r]=g.useState(!0),[i,o]=g.useState(!1),[l,c]=g.useState(null),d=async()=>{var f,h;r(!0);try{const{data:p}=await QY();n(p||[])}catch(p){$.error(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Failed to load invoices")}finally{r(!1)}};g.useEffect(()=>{d()},[]);const u=async()=>{var f,h;if(!l){$.warning("Select a patient first");return}o(!0);try{const{data:p}=await XY({patient_id:l,context_type:null,context_id:null});$.success("Invoice created"),window.location.assign(`/billing/invoices/${p.id}`)}catch(p){$.error(((h=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:h.detail)||"Create failed")}finally{o(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx($y,{className:"h-5 w-5"})," Billing"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-72",children:a.jsx(va,{value:l,onChange:c})}),a.jsx(pe,{anyOf:["billing.create"],children:a.jsxs("button",{onClick:u,disabled:i,className:"btn inline-flex items-center",children:[i?a.jsx(ms,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(wt,{className:"h-4 w-4 mr-2"})," New Invoice"]})})]})]}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Invoice #"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Patient"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Net"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Paid"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Balance"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Context"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[s&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6",colSpan:8,children:"Loading"})}),!s&&t.map(f=>a.jsxs("tr",{className:"border-t",children:[a.jsxs("td",{className:"px-3 py-2 font-medium",children:["#",f.id]}),a.jsx("td",{className:"px-3 py-2",children:oX(f.patient_id)}),a.jsx("td",{className:"px-3 py-2 capitalize",children:f.status}),a.jsx("td",{className:"px-3 py-2",children:sr(f.net_total)}),a.jsx("td",{className:"px-3 py-2",children:sr(f.amount_paid)}),a.jsx("td",{className:"px-3 py-2",children:sr(f.balance_due)}),a.jsx("td",{className:"px-3 py-2",children:f.context_type?`${f.context_type}#${f.context_id}`:""}),a.jsx("td",{className:"px-3 py-2 text-right",children:a.jsxs(Dn,{to:`/billing/invoices/${f.id}`,className:"btn-ghost inline-flex items-center",children:[a.jsx(u2,{className:"h-4 w-4 mr-1"})," Open"]})})]},f.id)),!s&&t.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-8 text-center text-gray-500",colSpan:8,children:"No invoices"})})]})]})})]})}function cX({open:t,onClose:n,rows:s=[],pick:r={},setPick:i,onApply:o,disabled:l}){return t?a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:n}),a.jsxs("aside",{role:"dialog","aria-modal":"true",className:"absolute right-0 top-0 h-full w-[min(92vw,480px)] bg-white shadow-xl transition-transform duration-300 translate-x-0",onClick:c=>c.stopPropagation(),children:[a.jsxs("header",{className:"flex items-center justify-between px-4 py-3 border-b",children:[a.jsx("h3",{className:"font-semibold",children:"Add from Unbilled"}),a.jsx("button",{type:"button",className:"btn-ghost",onClick:n,children:a.jsx(dn,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-3 overflow-y-auto h-[calc(100%-110px)]",children:a.jsxs("div",{className:"space-y-2",children:[s.map(c=>a.jsxs("label",{className:"flex items-start gap-3 rounded-xl border p-3",children:[a.jsx("input",{type:"checkbox",className:"mt-1",checked:!!r[c.uid],onChange:d=>i(u=>({...u,[c.uid]:d.target.checked}))}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"text-sm font-medium",children:c.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:[c.category,"  ",sr(c.unit_price),"  ",c.href]})]})]},c.uid)),s.length===0&&a.jsx("div",{className:"text-sm text-gray-500 p-3",children:"No unbilled items found."})]})}),a.jsx("footer",{className:"p-3 border-t",children:a.jsx("button",{className:"btn w-full",onClick:o,disabled:l,children:"Add selected"})})]})]}):null}function dX({open:t,onClose:n,onSubmit:s,disabled:r}){const[i,o]=g.useState({description:"",quantity:1,unit_price:0,tax_rate:0,service_type:"manual",service_ref_id:0});if(g.useEffect(()=>{t&&o(d=>({...d,description:"",quantity:1,unit_price:0,tax_rate:0}))},[t]),!t)return null;const l=(d,u)=>o(f=>({...f,[d]:u})),c=d=>{var u;(u=d==null?void 0:d.preventDefault)==null||u.call(d),i.description&&s({description:i.description,quantity:Number(i.quantity||1),unit_price:Number(i.unit_price||0),tax_rate:Number(i.tax_rate||0),service_type:i.service_type||"manual",service_ref_id:Number(i.service_ref_id||0)})};return a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:n}),a.jsxs("div",{role:"dialog","aria-modal":"true",className:"absolute left-1/2 top-1/2 w-[min(92vw,520px)] -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white shadow-xl",children:[a.jsxs("header",{className:"flex items-center justify-between px-4 py-3 border-b",children:[a.jsx("h3",{className:"font-semibold",children:"Add manual item"}),a.jsx("button",{type:"button",className:"btn-ghost",onClick:n,children:a.jsx(dn,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:c,className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description"}),a.jsx("input",{className:"input w-full",value:i.description,onChange:d=>l("description",d.target.value),placeholder:"e.g., Dressing charges"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Quantity"}),a.jsx("input",{className:"input w-full",type:"number",min:"1",value:i.quantity,onChange:d=>l("quantity",d.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Unit Price"}),a.jsx("input",{className:"input w-full",type:"number",step:"0.01",value:i.unit_price,onChange:d=>l("unit_price",d.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Tax %"}),a.jsx("input",{className:"input w-full",type:"number",step:"0.01",value:i.tax_rate,onChange:d=>l("tax_rate",d.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Type (optional)"}),a.jsx("input",{className:"input w-full",value:i.service_type,onChange:d=>l("service_type",d.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Reference ID (optional)"}),a.jsx("input",{className:"input w-full",type:"number",value:i.service_ref_id,onChange:d=>l("service_ref_id",d.target.value)})]}),a.jsx("div",{className:"pt-2",children:a.jsx("button",{type:"submit",className:"btn w-full",disabled:r,children:"Add Item"})})]})]})]})}const uX=["cash","card","upi","bank_transfer"];function fX({open:t,onClose:n,onSubmit:s,disabled:r,maxAmount:i=0}){const[o,l]=g.useState({amount:0,mode:"cash",reference_no:""});if(g.useEffect(()=>{t&&l(u=>({...u,amount:i||0}))},[t,i]),!t)return null;const c=(u,f)=>l(h=>({...h,[u]:f})),d=u=>{var f;(f=u==null?void 0:u.preventDefault)==null||f.call(u),!(!o.amount||Number(o.amount)<=0)&&s({amount:Number(o.amount),mode:o.mode,reference_no:o.reference_no||null})};return a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:n}),a.jsxs("div",{role:"dialog","aria-modal":"true",className:"absolute left-1/2 top-1/2 w-[min(92vw,480px)] -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white shadow-xl",children:[a.jsxs("header",{className:"flex items-center justify-between px-4 py-3 border-b",children:[a.jsx("h3",{className:"font-semibold",children:"Record payment"}),a.jsx("button",{type:"button",className:"btn-ghost",onClick:n,children:a.jsx(dn,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:d,className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Amount"}),a.jsx("input",{className:"input w-full",type:"number",step:"0.01",value:o.amount,onChange:u=>c("amount",u.target.value)}),i>0&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Max suggested: ",i]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Mode"}),a.jsx("select",{className:"input w-full",value:o.mode,onChange:u=>c("mode",u.target.value),children:uX.map(u=>a.jsx("option",{value:u,children:u.toUpperCase()},u))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Reference (optional)"}),a.jsx("input",{className:"input w-full",value:o.reference_no,onChange:u=>c("reference_no",u.target.value),placeholder:"Txn ID / cheque no. etc."})]}),a.jsx("div",{className:"pt-2",children:a.jsx("button",{type:"submit",className:"btn w-full",disabled:r,children:"Save Payment"})})]})]})]})}function hX(){const{id:t}=ma(),n=jn(),s=Number(t),[r,i]=g.useState(null),[o,l]=g.useState(!0),[c,d]=g.useState(null),[u,f]=g.useState(null),[h,p]=g.useState(!1),[m,x]=g.useState([]),[y,v]=g.useState({}),[b,w]=g.useState(!1),[j,N]=g.useState(!1),S=(r==null?void 0:r.status)==="draft",_=(r==null?void 0:r.status)==="finalized",C=(r==null?void 0:r.status)==="cancelled",k=h||b||j;g.useEffect(()=>{const O=document.body.style.overflow;return k?document.body.style.overflow="hidden":document.body.style.overflow=O||"",()=>{document.body.style.overflow=O||""}},[k]);const E=async()=>{var O,z;l(!0);try{const{data:H}=await JY(s);i(H)}catch(H){$.error(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Load failed")}finally{l(!1)}};g.useEffect(()=>{E()},[s]);const M=async()=>{var O,z;try{const{data:H}=await rX(r.patient_id);x(H||[]),v({}),p(!0)}catch(H){$.error(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Failed to fetch unbilled")}},D=async()=>{var z,H;const O=Object.entries(y).filter(([,X])=>X).map(([X])=>X);if(O.length===0){$.message("Select at least one item");return}try{await iX(s,O,r.patient_id),$.success(`Added ${O.length} item(s)`),p(!1),E()}catch(X){$.error(((H=(z=X==null?void 0:X.response)==null?void 0:z.data)==null?void 0:H.detail)||"Bulk add failed")}},R=async O=>{var z,H;try{await tX(s,O),$.success("Item added"),w(!1),E()}catch(X){$.error(((H=(z=X==null?void 0:X.response)==null?void 0:z.data)==null?void 0:H.detail)||"Add failed")}},T=async O=>{var z,H;d(O.id);try{await nX(s,O.id,{quantity:Number(O.quantity||1),unit_price:Number(O.unit_price||0),tax_rate:Number(O.tax_rate||0)}),$.success("Item updated"),f(null),E()}catch(X){$.error(((H=(z=X==null?void 0:X.response)==null?void 0:z.data)==null?void 0:H.detail)||"Update failed")}finally{d(null)}},P=async O=>{var z,H;if(confirm("Void this item?"))try{await sX(s,O.id,{reason:"Voided"}),$.success("Item voided"),E()}catch(X){$.error(((H=(z=X==null?void 0:X.response)==null?void 0:z.data)==null?void 0:H.detail)||"Void failed")}},L=async()=>{var O,z;try{await eX(s),$.success("Invoice finalized"),E()}catch(H){$.error(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Finalize failed")}},F=async()=>{var O,z;if(confirm("Cancel this invoice?"))try{await ZY(s),$.success("Invoice cancelled"),n("/billing")}catch(H){$.error(((z=(O=H==null?void 0:H.response)==null?void 0:O.data)==null?void 0:z.detail)||"Cancel failed")}},B=async O=>{var z,H;try{await aX(s,O),$.success("Payment recorded"),N(!1),E()}catch(X){$.error(((H=(z=X==null?void 0:X.response)==null?void 0:z.data)==null?void 0:H.detail)||"Payment failed")}},A=g.useMemo(()=>({gross:(r==null?void 0:r.gross_total)||0,tax:(r==null?void 0:r.tax_total)||0,net:(r==null?void 0:r.net_total)||0,paid:(r==null?void 0:r.amount_paid)||0,due:(r==null?void 0:r.balance_due)||0}),[r]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Dn,{to:"/billing",className:"btn-ghost inline-flex items-center",children:[a.jsx(r2,{className:"h-4 w-4 mr-1"})," Back"]}),a.jsxs("h1",{className:"text-xl font-semibold",children:["Invoice #",t]}),o?null:a.jsx("span",{className:["text-xs px-2 py-1 rounded-full",S?"bg-yellow-50 text-yellow-700 ring-1 ring-yellow-200":_?"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200":C?"bg-rose-50 text-rose-700 ring-1 ring-rose-200":"bg-gray-50"].join(" "),children:r==null?void 0:r.status})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{anyOf:["billing.items.add"],children:a.jsxs("button",{onClick:()=>w(!0),disabled:!S,className:"btn",children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," Add manual"]})}),a.jsx(pe,{anyOf:["billing.items.add"],children:a.jsxs("button",{onClick:M,disabled:!S,className:"btn",children:[a.jsx(wt,{className:"h-4 w-4 mr-2"})," Add from Unbilled"]})}),a.jsx(pe,{anyOf:["billing.finalize"],children:a.jsxs("button",{onClick:L,disabled:!S||((r==null?void 0:r.items)||[]).every(O=>O.is_voided),className:"btn",children:[a.jsx(Ho,{className:"h-4 w-4 mr-2"})," Finalize"]})}),a.jsx(pe,{anyOf:["billing.payments.add"],children:a.jsxs("button",{onClick:()=>N(!0),disabled:!_||(r==null?void 0:r.balance_due)<=0,className:"btn",children:[a.jsx(xL,{className:"h-4 w-4 mr-2"})," Payment"]})}),a.jsx(pe,{anyOf:["billing.cancel"],children:a.jsxs("button",{onClick:F,disabled:C,className:"btn-danger inline-flex items-center",children:[a.jsx(m$,{className:"h-4 w-4 mr-2"})," Cancel"]})})]})]}),a.jsx("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[["Gross",A.gross],["Tax",A.tax],["Net",A.net],["Paid",A.paid],["Balance",A.due]].map(([O,z])=>a.jsxs("div",{className:"rounded-xl border bg-white p-3",children:[a.jsx("div",{className:"text-xs text-gray-500",children:O}),a.jsx("div",{className:"text-lg font-semibold",children:sr(z)})]},O))}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Type"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Unit"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Tax %"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Tax"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Line Total"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[o&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6",colSpan:8,children:"Loading"})}),!o&&((r==null?void 0:r.items)||[]).map(O=>{const z=S&&!O.is_voided,H=u===O.id;return a.jsxs("tr",{className:["border-t",O.is_voided?"opacity-60":""].join(" "),children:[a.jsx("td",{className:"px-3 py-2",children:O.description}),a.jsx("td",{className:"px-3 py-2 capitalize",children:O.service_type||"manual"}),a.jsx("td",{className:"px-3 py-2 text-right",children:H?a.jsx("input",{defaultValue:O.quantity,className:"input w-20 text-right",onChange:X=>O.quantity=X.target.value}):O.quantity}),a.jsx("td",{className:"px-3 py-2 text-right",children:H?a.jsx("input",{defaultValue:O.unit_price,className:"input w-24 text-right",onChange:X=>O.unit_price=X.target.value}):sr(O.unit_price)}),a.jsx("td",{className:"px-3 py-2 text-right",children:H?a.jsx("input",{defaultValue:O.tax_rate,className:"input w-20 text-right",onChange:X=>O.tax_rate=X.target.value}):O.tax_rate??0}),a.jsx("td",{className:"px-3 py-2 text-right",children:sr(O.tax_amount)}),a.jsx("td",{className:"px-3 py-2 text-right",children:sr(O.line_total)}),a.jsxs("td",{className:"px-3 py-2 text-right",children:[z&&!H&&a.jsxs(a.Fragment,{children:[a.jsx(pe,{anyOf:["billing.items.update"],children:a.jsx("button",{className:"btn-ghost",onClick:()=>f(O.id),children:a.jsx(xa,{className:"h-4 w-4"})})}),a.jsx(pe,{anyOf:["billing.items.void"],children:a.jsx("button",{className:"btn-ghost text-rose-600",onClick:()=>P(O),children:a.jsx(Ws,{className:"h-4 w-4"})})})]}),z&&H&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-ghost",onClick:()=>T(O),disabled:c===O.id,children:c===O.id?a.jsx(ms,{className:"h-4 w-4 animate-spin"}):a.jsx(O$,{className:"h-4 w-4"})}),a.jsx("button",{className:"btn-ghost",onClick:()=>f(null),children:a.jsx(dn,{className:"h-4 w-4"})})]}),!z&&O.is_voided&&a.jsx("span",{className:"text-xs text-rose-600",children:"Voided"})]})]},O.id)}),!o&&((r==null?void 0:r.items)||[]).length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-8 text-center text-gray-500",colSpan:8,children:"No items yet"})})]})]})}),a.jsx("div",{className:"rounded-xl border bg-white overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Payment #"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Mode"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Reference"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Amount"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Paid At"})]})}),a.jsxs("tbody",{children:[((r==null?void 0:r.payments)||[]).map(O=>a.jsxs("tr",{className:"border-t",children:[a.jsxs("td",{className:"px-3 py-2",children:["#",O.id]}),a.jsx("td",{className:"px-3 py-2 uppercase",children:O.mode}),a.jsx("td",{className:"px-3 py-2",children:O.reference_no||""}),a.jsx("td",{className:"px-3 py-2 text-right",children:sr(O.amount)}),a.jsx("td",{className:"px-3 py-2",children:O.paid_at?new Date(O.paid_at).toLocaleString():""})]},O.id)),((r==null?void 0:r.payments)||[]).length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:5,children:"No payments"})})]})]})}),a.jsx(cX,{open:h,onClose:()=>p(!1),rows:m,pick:y,setPick:v,onApply:D,disabled:!S}),a.jsx(dX,{open:b,onClose:()=>w(!1),onSubmit:R,disabled:!S}),a.jsx(fX,{open:j,onClose:()=>N(!1),onSubmit:B,disabled:!_||(r==null?void 0:r.balance_due)<=0,maxAmount:(r==null?void 0:r.balance_due)||0})]})}function hA(t){return I.get("/emr/patients/lookup",{params:{q:t}})}function pX({patient_id:t,uhid:n,date_from:s,date_to:r,types:i}){return I.get("/emr/timeline",{params:{patient_id:t,uhid:n,date_from:s||void 0,date_to:r||void 0,types:i&&i.length?i.join(","):void 0}})}function mX(t){return I.post("/emr/export/pdf-json",t,{responseType:"blob"})}function gX(t,n,s){return I.get(`/emr/fhir/${t}`,{params:{date_from:n,date_to:s}})}function xX({onPick:t,placeholder:n="UHID, name, phone, email"}){const[s,r]=g.useState(""),[i,o]=g.useState([]),[l,c]=g.useState(!1);g.useEffect(()=>{let u=!0;const h=setTimeout(async()=>{if(!s||!s.trim()){o([]);return}try{c(!0);const{data:p}=await hA(s.trim());if(!u)return;o((p==null?void 0:p.results)||[])}finally{c(!1)}},250);return()=>{u=!1,clearTimeout(h)}},[s]);const d=g.useMemo(()=>i.slice(0,8),[i]);return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Find Patient"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx("input",{className:"w-full rounded-xl border border-gray-200 bg-white px-9 py-2 text-sm outline-none ring-blue-200 focus:ring-2",placeholder:n,value:s,onChange:u=>r(u.target.value)})]}),l&&a.jsx("div",{className:"text-xs text-gray-500",children:"Searching"}),!l&&d.length>0&&a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:d.map(u=>{var f;return a.jsxs("button",{onClick:()=>t(u),className:"rounded-xl border p-3 text-left transition hover:bg-gray-50",children:[a.jsxs("div",{className:"font-medium",children:[u.uhid,"  ",u.name]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[(f=u.gender)==null?void 0:f.toUpperCase()," ",u.dob?` ${u.dob}`:""," ",u.phone?` ${u.phone}`:""]})]},u.uhid)})}),!l&&s&&d.length===0&&a.jsx("div",{className:"text-xs text-gray-500",children:"No matches."})]})}const yl=[{code:"opd_visit",label:"OPD Visit",icon:qc},{code:"opd_vitals",label:"Vitals",icon:si},{code:"rx",label:"Prescription",icon:nf},{code:"lab",label:"Lab",icon:sf},{code:"radiology",label:"Radiology",icon:Nl},{code:"pharmacy",label:"Pharmacy",icon:zy},{code:"ipd_admission",label:"IPD Admit",icon:Cg},{code:"ipd_transfer",label:"IPD Transfer",icon:W5},{code:"ipd_discharge",label:"IPD Discharge",icon:a$},{code:"ot",label:"OT",icon:$$},{code:"billing",label:"Billing",icon:$y},{code:"attachment",label:"Attachment",icon:Ly},{code:"consent",label:"Consent",icon:Wc}];function Za(t){return t<10?"0"+t:""+t}function yX(t){const n=new Date(t);return isNaN(n)?String(t||""):`${n.getFullYear()}-${Za(n.getMonth()+1)}-${Za(n.getDate())} ${Za(n.getHours())}:${Za(n.getMinutes())}`}function vX(t){const n=new Date(t);return isNaN(n)?"":`${n.getFullYear()}-${Za(n.getMonth()+1)}-${Za(n.getDate())}`}function bX(t){const n=new Map;return t.forEach(s=>{const r=vX(s.ts);n.has(r)||n.set(r,[]),n.get(r).push(s)}),Array.from(n.entries()).sort((s,r)=>s[0]<r[0]?1:-1)}function q1(t,n){const s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=n,r.click(),URL.revokeObjectURL(s)}const wX="inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs transition",jX={new:"border-blue-200 bg-blue-50 text-blue-700",in_progress:"border-amber-200 bg-amber-50 text-amber-800",dispensed:"border-emerald-200 bg-emerald-50 text-emerald-800",completed:"border-emerald-200 bg-emerald-50 text-emerald-800",cancelled:"border-rose-200 bg-rose-50 text-rose-800"};function NX(){const[t,n]=g.useState(null),[s,r]=g.useState({date_from:"",date_to:"",types:yl.map(j=>j.code),consent_required:!1}),[i,o]=g.useState(!1),[l,c]=g.useState([]),[d,u]=g.useState(0),f=g.useMemo(()=>new Set(s.types||[]),[s.types]),h=j=>{r(N=>{const S=new Set(N.types);return S.has(j)?S.delete(j):S.add(j),{...N,types:Array.from(S)}})},p=()=>r(j=>({...j,types:yl.map(N=>N.code)})),m=()=>r(j=>({...j,types:[]}));g.useEffect(()=>{let j=!0;return(async()=>{var S,_;if(t!=null&&t.uhid)try{o(!0);const{data:C}=await pX({uhid:t.uhid,date_from:s.date_from||void 0,date_to:s.date_to||void 0,types:s.types&&s.types.length===yl.length?void 0:s.types});if(!j)return;c(C||[])}catch(C){console.error(C),$.error(((_=(S=C==null?void 0:C.response)==null?void 0:S.data)==null?void 0:_.detail)||"Failed to load EMR timeline"),c([])}finally{o(!1)}})(),()=>{j=!1}},[t==null?void 0:t.uhid,s.date_from,s.date_to,JSON.stringify(s.types),d]);const x=g.useMemo(()=>bX(l),[l]),y=async()=>{var j,N,S;if(!t){$.info("Select a patient first.");return}try{const C={...t!=null&&t.id?{patient_id:t.id}:{uhid:t==null?void 0:t.uhid},date_from:s.date_from||null,date_to:s.date_to||null,sections:{opd:f.has("opd_visit")||f.has("opd_vitals")||f.has("rx"),ipd:f.has("ipd_admission")||f.has("ipd_transfer")||f.has("ipd_discharge"),vitals:f.has("opd_vitals"),prescriptions:f.has("rx"),lab:f.has("lab"),radiology:f.has("radiology"),pharmacy:f.has("pharmacy"),ot:f.has("ot"),billing:f.has("billing"),attachments:f.has("attachment"),consents:f.has("consent")},consent_required:!!s.consent_required},k=await mX(C);q1(k.data,`EMR_${t.uhid||"patient"}.pdf`),$.success("PDF exported")}catch(_){((j=_==null?void 0:_.response)==null?void 0:j.status)===412?$.error("Consent required. Enable consent capture or uncheck the Require consent box."):$.error(((S=(N=_==null?void 0:_.response)==null?void 0:N.data)==null?void 0:S.detail)||"PDF export failed")}},v=async()=>{if(!(t!=null&&t.id)){$.info("Patient id required; please pick from the search list.");return}try{const{data:j}=await gX(t.id,s.date_from||void 0,s.date_to||void 0),N=new Blob([JSON.stringify(j,null,2)],{type:"application/json"});q1(N,`FHIR_${t.uhid||"patient"}.json`),$.success("FHIR bundle downloaded")}catch{$.error("FHIR export failed")}};function b({k:j,v:N}){return N==null||N===""?null:a.jsxs("div",{className:"text-xs text-gray-700",children:[a.jsxs("span",{className:"font-medium",children:[j,":"]})," ",String(N)]})}function w(j){const N=j.data||{};switch(j.type){case"opd_visit":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Chief Complaint",v:N.chief_complaint}),a.jsx(b,{k:"Symptoms",v:N.symptoms}),a.jsx(b,{k:"Subjective",v:N.subjective}),a.jsx(b,{k:"Objective",v:N.objective}),a.jsx(b,{k:"Assessment",v:N.assessment}),a.jsx(b,{k:"Plan",v:N.plan}),a.jsx(b,{k:"Episode",v:N.episode_id}),N.appointment&&a.jsxs("div",{className:"text-xs text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Appointment:"})," ",N.appointment.date,"  ",N.appointment.slot_start,"",N.appointment.slot_end,"  ",N.appointment.purpose]})]});case"opd_vitals":return a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-gray-800 md:grid-cols-3",children:[a.jsx(b,{k:"Recorded at",v:N.recorded_at}),a.jsx(b,{k:"Height (cm)",v:N.height_cm}),a.jsx(b,{k:"Weight (kg)",v:N.weight_kg}),a.jsx(b,{k:"BMI",v:N.bmi}),a.jsx(b,{k:"BP",v:N.bp_systolic!=null&&N.bp_diastolic!=null?`${N.bp_systolic}/${N.bp_diastolic} mmHg`:""}),a.jsx(b,{k:"Pulse",v:N.pulse}),a.jsx(b,{k:"RR",v:N.rr}),a.jsx(b,{k:"Temp (C)",v:N.temp_c}),a.jsx(b,{k:"SpO (%)",v:N.spo2}),a.jsx("div",{className:"col-span-2 md:col-span-3",children:a.jsx(b,{k:"Notes",v:N.notes})})]});case"rx":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Notes",v:N.notes}),a.jsx(b,{k:"Signed at",v:N.signed_at}),a.jsx(b,{k:"Signed by",v:N.signed_by}),Array.isArray(N.items)&&N.items.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Items"}),a.jsx("div",{className:"mt-1 divide-y rounded-lg border",children:N.items.map((S,_)=>a.jsxs("div",{className:"grid gap-2 p-2 md:grid-cols-5",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("span",{className:"font-medium",children:S.drug_name})," ",S.strength?` ${S.strength}`:""]}),a.jsxs("div",{children:["Freq: ",S.frequency||""]}),a.jsxs("div",{children:["Dur: ",S.duration_days,"d"]}),a.jsxs("div",{children:["Qty: ",S.quantity]})]},_))})]})]});case"lab":{const S=N.item||{};return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Order ID",v:N.order_id}),a.jsx(b,{k:"Priority",v:N.priority}),a.jsx(b,{k:"Collected at",v:N.collected_at}),a.jsx(b,{k:"Reported at",v:N.reported_at}),a.jsx(b,{k:"Test",v:`${S.test_name} (${S.test_code})`}),a.jsx(b,{k:"Unit",v:S.unit}),a.jsx(b,{k:"Normal range",v:S.normal_range}),a.jsx(b,{k:"Specimen",v:S.specimen_type}),a.jsx(b,{k:"Status",v:S.status}),a.jsx(b,{k:"Result",v:S.result_value}),a.jsx(b,{k:"Critical",v:S.is_critical?"Yes":S.is_critical===!1?"No":""}),a.jsx(b,{k:"Result at",v:S.result_at})]})}case"radiology":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Test",v:`${N.test_name} (${N.test_code})`}),a.jsx(b,{k:"Modality",v:N.modality}),a.jsx(b,{k:"Status",v:N.status}),a.jsx(b,{k:"Scheduled at",v:N.scheduled_at}),a.jsx(b,{k:"Scanned at",v:N.scanned_at}),a.jsx(b,{k:"Reported at",v:N.reported_at}),a.jsx(b,{k:"Approved at",v:N.approved_at}),a.jsx(b,{k:"Report",v:N.report_text})]});case"pharmacy":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Sale ID",v:N.sale_id}),a.jsx(b,{k:"Context",v:N.context_type}),a.jsx(b,{k:"Payment",v:N.payment_mode}),a.jsx(b,{k:"Total",v:N.total_amount}),Array.isArray(N.items)&&N.items.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Items"}),a.jsx("div",{className:"mt-1 divide-y rounded-lg border",children:N.items.map((S,_)=>a.jsxs("div",{className:"grid gap-2 p-2 md:grid-cols-4",children:[a.jsx("div",{className:"md:col-span-2",children:S.medicine_name||`#${S.medicine_id}`}),a.jsxs("div",{children:["Qty: ",S.qty]}),a.jsxs("div",{children:["",S.amount]})]},_))})]})]});case"ipd_admission":return a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-gray-800 md:grid-cols-3",children:[a.jsx(b,{k:"Admission Code",v:N.admission_code}),a.jsx(b,{k:"Type",v:N.admission_type}),a.jsx(b,{k:"Admitted at",v:N.admitted_at}),a.jsx(b,{k:"Expected Discharge",v:N.expected_discharge_at}),a.jsx(b,{k:"Bed",v:N.current_bed_code}),a.jsx("div",{className:"col-span-2 md:col-span-3",children:a.jsx(b,{k:"Preliminary Diagnosis",v:N.preliminary_diagnosis})}),a.jsx("div",{className:"col-span-2 md:col-span-3",children:a.jsx(b,{k:"History",v:N.history})}),a.jsx("div",{className:"col-span-2 md:col-span-3",children:a.jsx(b,{k:"Care Plan",v:N.care_plan})})]});case"ipd_transfer":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Admission",v:N.admission_id}),a.jsx(b,{k:"From Bed",v:N.from_bed_id}),a.jsx(b,{k:"To Bed",v:N.to_bed_id}),a.jsx(b,{k:"Reason",v:N.reason}),a.jsx(b,{k:"Transferred at",v:N.transferred_at})]});case"ipd_discharge":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Finalized",v:N.finalized?"Yes":"No"}),a.jsx(b,{k:"Finalized at",v:N.finalized_at}),a.jsx(b,{k:"Demographics",v:N.demographics}),a.jsx(b,{k:"Medical History",v:N.medical_history}),a.jsx(b,{k:"Treatment Summary",v:N.treatment_summary}),a.jsx(b,{k:"Medications",v:N.medications}),a.jsx(b,{k:"Follow Up",v:N.follow_up}),a.jsx(b,{k:"ICD-10 Codes",v:N.icd10_codes})]});case"ot":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Surgery",v:N.surgery_name}),a.jsx(b,{k:"Code",v:N.surgery_code}),a.jsx(b,{k:"Estimated Cost",v:N.estimated_cost}),a.jsx(b,{k:"Scheduled",v:`${N.scheduled_start||""}  ${N.scheduled_end||""}`}),a.jsx(b,{k:"Actual",v:`${N.actual_start||""}  ${N.actual_end||""}`}),a.jsx(b,{k:"Status",v:N.status}),a.jsx(b,{k:"Pre-op Notes",v:N.preop_notes}),a.jsx(b,{k:"Post-op Notes",v:N.postop_notes})]});case"billing":return a.jsxs("div",{className:"mt-2 space-y-2 text-sm text-gray-800",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-4",children:[a.jsx(b,{k:"Invoice ID",v:N.invoice_id}),a.jsx(b,{k:"Status",v:N.status}),a.jsx(b,{k:"Net Total",v:N.net_total}),a.jsx(b,{k:"Balance",v:N.balance_due})]}),Array.isArray(N.items)&&N.items.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Items"}),a.jsx("div",{className:"mt-1 divide-y rounded-lg border",children:N.items.map((S,_)=>a.jsxs("div",{className:"grid gap-2 p-2 md:grid-cols-6",children:[a.jsx("div",{className:"md:col-span-2",children:S.description}),a.jsx("div",{children:S.service_type}),a.jsxs("div",{children:["Qty: ",S.quantity]}),a.jsxs("div",{children:["Unit: ",S.unit_price]}),a.jsxs("div",{children:["Total: ",S.line_total]})]},_))})]}),Array.isArray(N.payments)&&N.payments.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Payments"}),a.jsx("div",{className:"mt-1 divide-y rounded-lg border",children:N.payments.map((S,_)=>a.jsxs("div",{className:"grid gap-2 p-2 md:grid-cols-4",children:[a.jsxs("div",{children:["Mode: ",S.mode]}),a.jsxs("div",{children:["Ref: ",S.reference_no||""]}),a.jsxs("div",{children:["",S.amount]}),a.jsx("div",{children:S.paid_at})]},_))})]})]});case"attachment":return null;case"consent":return a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-800",children:[a.jsx(b,{k:"Type",v:N.type}),a.jsx(b,{k:"Captured at",v:N.captured_at}),a.jsx(b,{k:"Text",v:N.text})]});default:return null}}return a.jsxs("div",{className:"mx-auto max-w-7xl p-4",children:[a.jsxs("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"EMR Viewer"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>u(j=>j+1),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm hover:bg-gray-50",children:[a.jsx(Fy,{className:"h-4 w-4"}),"Refresh"]}),a.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3 py-2 text-sm text-white hover:bg-blue-700",children:[a.jsx(Dy,{className:"h-4 w-4"}),"Export PDF"]}),a.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm hover:bg-gray-50",children:[a.jsx(nf,{className:"h-4 w-4"}),"Export FHIR (JSON)"]})]})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[a.jsxs("div",{className:"rounded-2xl border bg-white p-4 lg:col-span-2",children:[a.jsx(xX,{onPick:j=>{n(j),$.success(`Selected ${j.uhid}  ${j.name}`)}}),t&&a.jsx("div",{className:"mt-3 rounded-xl border bg-emerald-50 px-3 py-2 text-sm text-emerald-900",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lh,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:t.uhid}),a.jsx(Cd,{className:"h-4 w-4"}),a.jsx("span",{children:t.name}),t.gender?a.jsxs(a.Fragment,{children:[a.jsx(Cd,{className:"h-4 w-4"}),a.jsx("span",{className:"uppercase",children:t.gender})]}):null,t.dob?a.jsxs(a.Fragment,{children:[a.jsx(Cd,{className:"h-4 w-4"}),a.jsxs("span",{children:["DOB ",t.dob]})]}):null,t.phone?a.jsxs(a.Fragment,{children:[a.jsx(Cd,{className:"h-4 w-4"}),a.jsx("span",{children:t.phone})]}):null]})})]}),a.jsxs("div",{className:"rounded-2xl border bg-white p-4",children:[a.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium",children:[a.jsx(Rw,{className:"h-4 w-4"})," Date Range"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("input",{type:"date",className:"rounded-xl border px-3 py-2 text-sm",value:s.date_from,onChange:j=>r(N=>({...N,date_from:j.target.value}))}),a.jsx("input",{type:"date",className:"rounded-xl border px-3 py-2 text-sm",value:s.date_to,onChange:j=>r(N=>({...N,date_to:j.target.value}))})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(d2,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Types"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:p,className:"text-xs text-blue-700 hover:underline",children:"All"}),a.jsx("button",{onClick:m,className:"text-xs text-gray-600 hover:underline",children:"Clear"})]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:yl.map(j=>{const N=j.icon,S=f.has(j.code);return a.jsxs("button",{onClick:()=>h(j.code),className:["inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs transition",S?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"].join(" "),children:[a.jsx(N,{className:"h-3.5 w-3.5"}),j.label]},j.code)})}),a.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[a.jsx("input",{id:"consentReq",type:"checkbox",checked:!!s.consent_required,onChange:j=>r(N=>({...N,consent_required:j.target.checked})),className:"h-4 w-4 rounded border-gray-300"}),a.jsx("label",{htmlFor:"consentReq",className:"select-none text-gray-700",children:"Require active consent for export"})]})]})]}),a.jsxs("div",{className:"mt-6 rounded-2xl border bg-white p-4",children:[a.jsxs("div",{className:"mb-3 flex items-center gap-2 text-sm font-medium",children:[a.jsx(qc,{className:"h-4 w-4"}),"Timeline"]}),i&&a.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((j,N)=>a.jsx("div",{className:"h-16 animate-pulse rounded-xl bg-gray-100"},N))}),!i&&(!l||l.length===0)&&a.jsx("div",{className:"rounded-xl border border-dashed p-6 text-center text-sm text-gray-500",children:"Pick a patient and filters to load EMR timeline."}),!i&&l&&l.length>0&&a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-200 via-gray-200 to-transparent"}),a.jsx("div",{className:"space-y-6",children:x.map(([j,N])=>a.jsxs("div",{className:"relative pl-10",children:[a.jsxs("div",{className:"mb-2 inline-flex items-center gap-2 rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700",children:[a.jsx(Rw,{className:"h-3.5 w-3.5"})," ",j]}),a.jsx("div",{className:"space-y-3",children:N.map((S,_)=>{var M,D;const C=[S.doctor_name?`Dr. ${S.doctor_name}`:null,S.department_name||null,S.location_name||null].filter(Boolean).join("    "),k=((M=yl.find(R=>R.code===S.type))==null?void 0:M.icon)||nf,E=S.status&&(jX[S.status]||"border-gray-200 bg-gray-50 text-gray-600");return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[9px] top-4 h-2.5 w-2.5 rounded-full border border-blue-200 bg-white"}),a.jsx("div",{className:"rounded-xl border p-3 hover:bg-gray-50",children:a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[a.jsx("div",{className:"mt-1 grid h-8 w-8 place-items-center rounded-lg bg-blue-600/10 text-blue-700",children:a.jsx(k,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("div",{className:"truncate text-sm font-semibold",children:S.title||"Event"}),a.jsx("div",{className:"text-xs text-gray-500",children:yX(S.ts)}),S.status&&a.jsx("span",{className:`${wX} ${E}`,children:S.status})]}),C&&a.jsx("div",{className:"text-xs text-gray-600",children:C}),w(S),((D=S.attachments)==null?void 0:D.length)>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:S.attachments.map((R,T)=>a.jsxs("a",{href:R.url,target:"_blank",rel:"noopener",className:"inline-flex items-center gap-1 rounded-lg border px-2 py-1 text-xs text-blue-700 hover:bg-blue-50",children:[a.jsx(Ly,{className:"h-3.5 w-3.5"}),R.label||"attachment"]},T))})]})]})})})]},`${S.type}-${String(S.ts)}-${_}`)})})]},j))})]})]})]})}const n0=(t={})=>I.get("/templates/templates",{params:t}),SX=t=>I.get(`/templates/templates/${t}`),kX=t=>I.post("/templates/templates",t),CX=(t,n)=>I.patch(`/templates/templates/${t}`,n),_X=t=>I.delete(`/templates/templates/${t}`),pA=(t,n,s=null)=>I.post(`/templates/templates/${t}/render-html`,s?{data:s}:{},{params:{patient_id:n}}),EX=async(t,n)=>(await I.get(`/templates/templates/${t}/pdf`,{params:{patient_id:n,inline:!1},responseType:"blob"})).data,TX=async(t,n)=>(await I.post(`/templates/templates/${t}/pdf`,n,{responseType:"blob"})).data,MX=(t,n)=>I.post(`/templates/patients/${t}/consents`,n),AX=t=>I.get(`/templates/patients/${t}/consents`),PX=async t=>{const n=new FormData;return n.append("file",t),(await I.post("/files/upload",n,{headers:{"Content-Type":"multipart/form-data"}})).data};function RX(){const[t,n]=g.useState([]),[s,r]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(!1),d=async()=>{c(!0);try{const h=await n0({q:s,category:i||void 0});n(h.data||[])}finally{c(!1)}};g.useEffect(()=>{d()},[]);const u=async h=>{h.preventDefault(),d()},f=async h=>{if(confirm("Delete this template?"))try{await _X(h),$.success("Deleted"),d()}catch{}};return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between gap-2",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Templates"}),a.jsx(Dn,{to:"/templates/new",className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm",children:"New Template"})]}),a.jsxs("form",{onSubmit:u,className:"mb-3 flex flex-wrap gap-2",children:[a.jsx("input",{value:s,onChange:h=>r(h.target.value),placeholder:"Search name/code...",className:"border rounded px-3 py-2 text-sm"}),a.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"border rounded px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"report",children:"Report"}),a.jsx("option",{value:"consent",children:"Consent"})]}),a.jsx("button",{className:"px-3 py-2 border rounded text-sm",children:"Filter"})]}),a.jsx("div",{className:"overflow-x-auto bg-white border rounded-lg",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Code"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Category"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Version"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),a.jsxs("tbody",{children:[t.map(h=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:h.id}),a.jsx("td",{className:"px-3 py-2",children:h.name}),a.jsx("td",{className:"px-3 py-2",children:h.code}),a.jsx("td",{className:"px-3 py-2 capitalize",children:h.category}),a.jsx("td",{className:"px-3 py-2",children:h.version}),a.jsxs("td",{className:"px-3 py-2 text-right",children:[a.jsx(Dn,{to:`/templates/${h.id}/edit`,className:"px-2 py-1 text-blue-700 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>f(h.id),className:"px-2 py-1 text-red-600 hover:underline",children:"Delete"})]})]},h.id)),t.length===0&&!l&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:"No templates"})})]})]})})]})}const K1=["system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif","Arial, Helvetica, sans-serif","'Times New Roman', Times, serif","'Georgia', serif","'Courier New', Courier, monospace","'Inter', system-ui, -apple-system, sans-serif"],G1=["#000000","#444444","#666666","#999999","#CCCCCC","#EEEEEE","#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB"];function tm({value:t,onChange:n}){const s=g.useRef(null),r=g.useRef(null),[i,o]=g.useState(K1[0]);g.useEffect(()=>{s.current&&s.current.innerHTML!==(t||"")&&(s.current.innerHTML=t||"")},[t]);const l=()=>{var C;return((C=s.current)==null?void 0:C.innerHTML)||""},c=()=>n&&n(l()),d=C=>{document.execCommand("styleWithCSS",!1,!0);const k=window.getSelection();if(!k||k.rangeCount===0)return;const E=k.getRangeAt(0),M=document.createElement("span");Object.entries(C).forEach(([D,R])=>M.style[D]=R),E.surroundContents(M),c()},u=(C,k=null)=>{document.execCommand("styleWithCSS",!1,!0),document.execCommand(C,!1,k),c()},f=(C,k="",E=null)=>{const M=window.getSelection();if(!M||M.rangeCount===0)return;const D=M.getRangeAt(0),R=document.createElement(C);k&&(R.className=k),E&&Object.entries(E).forEach(([T,P])=>R.style[T]=P),D.surroundContents(R),c()},h=()=>{var C;return(C=r.current)==null?void 0:C.click()},p=async C=>{var E,M;const k=(E=C.target.files)==null?void 0:E[0];if(k)try{const D=await PX(k),R="".replace(/\/$/,""),T=D.file_url_abs?D.file_url_abs:(M=D.file_url)!=null&&M.startsWith("http")?D.file_url:`${R}${D.file_url}`;m(`<img src="${T}" alt="${D.original_name||""}" style="max-width:100%;">`)}catch{$.error("Upload failed")}finally{C.target.value=""}},m=C=>{var k;(k=s.current)==null||k.focus(),document.execCommand("insertHTML",!1,C),c()},x=()=>{var R;const C=window.getSelection();if(!C||C.rangeCount===0)return null;const k=C.getRangeAt(0),E=k.commonAncestorContainer.nodeType===1?k.commonAncestorContainer:k.commonAncestorContainer.parentNode;if(!E)return null;const M=E.querySelectorAll?E.querySelectorAll("img"):[],D=(R=C.anchorNode)==null?void 0:R.parentNode;if(D&&D.tagName==="IMG")return D;if(D!=null&&D.closest){const T=D.closest("img");if(T)return T}return M.length?M[0]:null},y=C=>{const k=x();if(!k)return $.info("Select an image first");k.style.width=C,C==="100%"&&(k.style.maxWidth="100%"),c()},v=C=>{const k=x();if(!k)return $.info("Select an image first");k.classList.remove("float-left","float-right","img-center"),k.style.removeProperty("float"),k.style.removeProperty("display"),k.style.removeProperty("margin-left"),k.style.removeProperty("margin-right"),C==="left"&&k.classList.add("float-left"),C==="right"&&k.classList.add("float-right"),C==="center"&&k.classList.add("img-center"),c()},b=C=>{var M,D;const k=window.getSelection();if(!k||k.rangeCount===0)return null;let E=((M=k.anchorNode)==null?void 0:M.nodeType)===1?k.anchorNode:(D=k.anchorNode)==null?void 0:D.parentNode;for(;E;){if(E.tagName&&C.includes(E.tagName))return E;E=E.parentNode}return null},w=C=>{var E;const k=b(["TABLE"])||((E=b(["TD","TH"]))==null?void 0:E.closest("TABLE"));if(!k)return $.info("Place caret inside a table");k.classList.remove("tbl-border-all","tbl-border-h","tbl-border-v","tbl-border-none"),k.removeAttribute("border"),k.style.borderCollapse="collapse",k.querySelectorAll("th,td").forEach(M=>{M.style.border="",M.style.borderTop="",M.style.borderBottom="",M.style.borderLeft="",M.style.borderRight=""}),C==="all"&&k.classList.add("tbl-border-all"),C==="h"&&k.classList.add("tbl-border-h"),C==="v"&&k.classList.add("tbl-border-v"),C==="none"&&k.classList.add("tbl-border-none"),c()},j=()=>{const C=b(["TD","TH"]);if(!C)return $.info("Place caret inside a row");C.closest("tr").classList.toggle("tr-shade"),c()},N=C=>{f("div",C===2?"cols-2":"cols-3")},S=C=>{C.preventDefault();const k=C.clipboardData.getData("text/plain");document.execCommand("insertText",!1,k),c()},_=C=>{C.preventDefault();const k=C.dataTransfer.getData("text/x-token")||C.dataTransfer.getData("text/plain");if(k){m(k);return}const E=C.dataTransfer.getData("text");E&&document.execCommand("insertText",!1,E),c()};return a.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border-b bg-gray-50",children:[a.jsx("select",{className:"text-sm border rounded px-2 py-1",value:i,onChange:C=>{o(C.target.value),d({fontFamily:C.target.value})},title:"Font family",children:K1.map(C=>a.jsx("option",{value:C,children:C.split(",")[0].replace(/['"]/g,"")},C))}),a.jsx("select",{className:"text-sm border rounded px-2 py-1",onChange:C=>d({fontSize:C.target.value}),children:["10px","12px","14px","16px","18px","20px","24px"].map(C=>a.jsx("option",{value:C,children:C},C))}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("bold"),children:a.jsx("b",{children:"B"})}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("italic"),children:a.jsx("i",{children:"I"})}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("underline"),children:a.jsx("u",{children:"U"})}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyLeft"),children:"Left"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyCenter"),children:"Center"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("justifyRight"),children:"Right"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>f("span","text-justify"),children:"Justify"}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Text"}),G1.map(C=>a.jsx("button",{className:"w-4 h-4 rounded border",style:{background:C},onClick:()=>u("foreColor",C)},"fg"+C))]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500 ml-2 mr-1",children:"Highlight"}),G1.map(C=>a.jsx("button",{className:"w-4 h-4 rounded border",style:{background:C},onClick:()=>u("hiliteColor",C)},"bg"+C))]}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("insertUnorderedList"),children:" List"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>u("insertOrderedList"),children:"1. List"}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:h,children:"Image"}),a.jsx("input",{ref:r,type:"file",accept:"image/*",className:"hidden",onChange:p}),a.jsxs("select",{className:"text-sm border rounded px-2 py-1",onChange:C=>y(C.target.value),defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Img Width"}),a.jsx("option",{value:"25%",children:"25%"}),a.jsx("option",{value:"33%",children:"33%"}),a.jsx("option",{value:"50%",children:"50%"}),a.jsx("option",{value:"75%",children:"75%"}),a.jsx("option",{value:"100%",children:"100%"})]}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("left"),children:"Img Left"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("center"),children:"Img Center"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>v("right"),children:"Img Right"}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>N(2),children:"2 Columns"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>N(3),children:"3 Columns"}),a.jsx("span",{className:"mx-1 w-px h-5 bg-gray-200"}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:()=>m("<table><tr><th>Header</th><th>Header</th></tr><tr><td>Cell</td><td>Cell</td></tr></table>"),children:"Insert Table"}),a.jsxs("select",{className:"text-sm border rounded px-2 py-1",onChange:C=>w(C.target.value),defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Borders"}),a.jsx("option",{value:"all",children:"All borders"}),a.jsx("option",{value:"h",children:"Horizontal only"}),a.jsx("option",{value:"v",children:"Vertical only"}),a.jsx("option",{value:"none",children:"No borders"})]}),a.jsx("button",{className:"px-2 py-1 text-sm rounded hover:bg-white",onClick:j,children:"Shade Row"})]}),a.jsx("div",{ref:s,className:"min-h-[320px] p-3 prose max-w-none focus:outline-none",contentEditable:!0,onInput:c,onPaste:S,suppressContentEditableWarning:!0,spellCheck:!1}),a.jsx("div",{ref:s,className:"min-h-[320px] p-3 prose max-w-none focus:outline-none",contentEditable:!0,onInput:c,onPaste:S,onDragOver:C=>C.preventDefault(),onDrop:_,suppressContentEditableWarning:!0,spellCheck:!1}),a.jsx("div",{className:"px-3 py-1 text-[10px] text-gray-500 border-t bg-gray-50",children:"Tip: select an image to resize/align; use columns for magazine-style layouts."})]})}function Mt(t){this.content=t}Mt.prototype={constructor:Mt,find:function(t){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===t)return n;return-1},get:function(t){var n=this.find(t);return n==-1?void 0:this.content[n+1]},update:function(t,n,s){var r=s&&s!=t?this.remove(s):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(s||t,n):(o[i+1]=n,s&&(o[i]=s)),new Mt(o)},remove:function(t){var n=this.find(t);if(n==-1)return this;var s=this.content.slice();return s.splice(n,2),new Mt(s)},addToStart:function(t,n){return new Mt([t,n].concat(this.remove(t).content))},addToEnd:function(t,n){var s=this.remove(t).content.slice();return s.push(t,n),new Mt(s)},addBefore:function(t,n,s){var r=this.remove(n),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,n,s),new Mt(i)},forEach:function(t){for(var n=0;n<this.content.length;n+=2)t(this.content[n],this.content[n+1])},prepend:function(t){return t=Mt.from(t),t.size?new Mt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Mt.from(t),t.size?new Mt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var n=this;t=Mt.from(t);for(var s=0;s<t.content.length;s+=2)n=n.remove(t.content[s]);return n},toObject:function(){var t={};return this.forEach(function(n,s){t[n]=s}),t},get size(){return this.content.length>>1}};Mt.from=function(t){if(t instanceof Mt)return t;var n=[];if(t)for(var s in t)n.push(s,t[s]);return new Mt(n)};function mA(t,n,s){for(let r=0;;r++){if(r==t.childCount||r==n.childCount)return t.childCount==n.childCount?null:s;let i=t.child(r),o=n.child(r);if(i==o){s+=i.nodeSize;continue}if(!i.sameMarkup(o))return s;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)s++;return s}if(i.content.size||o.content.size){let l=mA(i.content,o.content,s+1);if(l!=null)return l}s+=i.nodeSize}}function gA(t,n,s,r){for(let i=t.childCount,o=n.childCount;;){if(i==0||o==0)return i==o?null:{a:s,b:r};let l=t.child(--i),c=n.child(--o),d=l.nodeSize;if(l==c){s-=d,r-=d;continue}if(!l.sameMarkup(c))return{a:s,b:r};if(l.isText&&l.text!=c.text){let u=0,f=Math.min(l.text.length,c.text.length);for(;u<f&&l.text[l.text.length-u-1]==c.text[c.text.length-u-1];)u++,s--,r--;return{a:s,b:r}}if(l.content.size||c.content.size){let u=gA(l.content,c.content,s-1,r-1);if(u)return u}s-=d,r-=d}}class U{constructor(n,s){if(this.content=n,this.size=s||0,s==null)for(let r=0;r<n.length;r++)this.size+=n[r].nodeSize}nodesBetween(n,s,r,i=0,o){for(let l=0,c=0;c<s;l++){let d=this.content[l],u=c+d.nodeSize;if(u>n&&r(d,i+c,o||null,l)!==!1&&d.content.size){let f=c+1;d.nodesBetween(Math.max(0,n-f),Math.min(d.content.size,s-f),r,i+f)}c=u}}descendants(n){this.nodesBetween(0,this.size,n)}textBetween(n,s,r,i){let o="",l=!0;return this.nodesBetween(n,s,(c,d)=>{let u=c.isText?c.text.slice(Math.max(n,d)-d,s-d):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&u||c.isTextblock)&&r&&(l?l=!1:o+=r),o+=u},0),o}append(n){if(!n.size)return this;if(!this.size)return n;let s=this.lastChild,r=n.firstChild,i=this.content.slice(),o=0;for(s.isText&&s.sameMarkup(r)&&(i[i.length-1]=s.withText(s.text+r.text),o=1);o<n.content.length;o++)i.push(n.content[o]);return new U(i,this.size+n.size)}cut(n,s=this.size){if(n==0&&s==this.size)return this;let r=[],i=0;if(s>n)for(let o=0,l=0;l<s;o++){let c=this.content[o],d=l+c.nodeSize;d>n&&((l<n||d>s)&&(c.isText?c=c.cut(Math.max(0,n-l),Math.min(c.text.length,s-l)):c=c.cut(Math.max(0,n-l-1),Math.min(c.content.size,s-l-1))),r.push(c),i+=c.nodeSize),l=d}return new U(r,i)}cutByIndex(n,s){return n==s?U.empty:n==0&&s==this.content.length?this:new U(this.content.slice(n,s))}replaceChild(n,s){let r=this.content[n];if(r==s)return this;let i=this.content.slice(),o=this.size+s.nodeSize-r.nodeSize;return i[n]=s,new U(i,o)}addToStart(n){return new U([n].concat(this.content),this.size+n.nodeSize)}addToEnd(n){return new U(this.content.concat(n),this.size+n.nodeSize)}eq(n){if(this.content.length!=n.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(n.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(n){let s=this.content[n];if(!s)throw new RangeError("Index "+n+" out of range for "+this);return s}maybeChild(n){return this.content[n]||null}forEach(n){for(let s=0,r=0;s<this.content.length;s++){let i=this.content[s];n(i,r,s),r+=i.nodeSize}}findDiffStart(n,s=0){return mA(this,n,s)}findDiffEnd(n,s=this.size,r=n.size){return gA(this,n,s,r)}findIndex(n){if(n==0)return zd(0,n);if(n==this.size)return zd(this.content.length,n);if(n>this.size||n<0)throw new RangeError(`Position ${n} outside of fragment (${this})`);for(let s=0,r=0;;s++){let i=this.child(s),o=r+i.nodeSize;if(o>=n)return o==n?zd(s+1,o):zd(s,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(n,s){if(!s)return U.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new U(s.map(n.nodeFromJSON))}static fromArray(n){if(!n.length)return U.empty;let s,r=0;for(let i=0;i<n.length;i++){let o=n[i];r+=o.nodeSize,i&&o.isText&&n[i-1].sameMarkup(o)?(s||(s=n.slice(0,i)),s[s.length-1]=o.withText(s[s.length-1].text+o.text)):s&&s.push(o)}return new U(s||n,r)}static from(n){if(!n)return U.empty;if(n instanceof U)return n;if(Array.isArray(n))return this.fromArray(n);if(n.attrs)return new U([n],n.nodeSize);throw new RangeError("Can not convert "+n+" to a Fragment"+(n.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}U.empty=new U([],0);const nm={index:0,offset:0};function zd(t,n){return nm.index=t,nm.offset=n,nm}function vf(t,n){if(t===n)return!0;if(!(t&&typeof t=="object")||!(n&&typeof n=="object"))return!1;let s=Array.isArray(t);if(Array.isArray(n)!=s)return!1;if(s){if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!vf(t[r],n[r]))return!1}else{for(let r in t)if(!(r in n)||!vf(t[r],n[r]))return!1;for(let r in n)if(!(r in t))return!1}return!0}let Ve=class fx{constructor(n,s){this.type=n,this.attrs=s}addToSet(n){let s,r=!1;for(let i=0;i<n.length;i++){let o=n[i];if(this.eq(o))return n;if(this.type.excludes(o.type))s||(s=n.slice(0,i));else{if(o.type.excludes(this.type))return n;!r&&o.type.rank>this.type.rank&&(s||(s=n.slice(0,i)),s.push(this),r=!0),s&&s.push(o)}}return s||(s=n.slice()),r||s.push(this),s}removeFromSet(n){for(let s=0;s<n.length;s++)if(this.eq(n[s]))return n.slice(0,s).concat(n.slice(s+1));return n}isInSet(n){for(let s=0;s<n.length;s++)if(this.eq(n[s]))return!0;return!1}eq(n){return this==n||this.type==n.type&&vf(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let s in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let r=n.marks[s.type];if(!r)throw new RangeError(`There is no mark type ${s.type} in this schema`);let i=r.create(s.attrs);return r.checkAttrs(i.attrs),i}static sameSet(n,s){if(n==s)return!0;if(n.length!=s.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].eq(s[r]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return fx.none;if(n instanceof fx)return[n];let s=n.slice();return s.sort((r,i)=>r.type.rank-i.type.rank),s}};Ve.none=[];class bf extends Error{}class ee{constructor(n,s,r){this.content=n,this.openStart=s,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(n,s){let r=yA(this.content,n+this.openStart,s);return r&&new ee(r,this.openStart,this.openEnd)}removeBetween(n,s){return new ee(xA(this.content,n+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(n){return this.content.eq(n.content)&&this.openStart==n.openStart&&this.openEnd==n.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let n={content:this.content.toJSON()};return this.openStart>0&&(n.openStart=this.openStart),this.openEnd>0&&(n.openEnd=this.openEnd),n}static fromJSON(n,s){if(!s)return ee.empty;let r=s.openStart||0,i=s.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ee(U.fromJSON(n,s.content),r,i)}static maxOpen(n,s=!0){let r=0,i=0;for(let o=n.firstChild;o&&!o.isLeaf&&(s||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=n.lastChild;o&&!o.isLeaf&&(s||!o.type.spec.isolating);o=o.lastChild)i++;return new ee(n,r,i)}}ee.empty=new ee(U.empty,0,0);function xA(t,n,s){let{index:r,offset:i}=t.findIndex(n),o=t.maybeChild(r),{index:l,offset:c}=t.findIndex(s);if(i==n||o.isText){if(c!=s&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(s))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(xA(o.content,n-i-1,s-i-1)))}function yA(t,n,s,r){let{index:i,offset:o}=t.findIndex(n),l=t.maybeChild(i);if(o==n||l.isText)return r&&!r.canReplace(i,i,s)?null:t.cut(0,n).append(s).append(t.cut(n));let c=yA(l.content,n-o-1,s,l);return c&&t.replaceChild(i,l.copy(c))}function OX(t,n,s){if(s.openStart>t.depth)throw new bf("Inserted content deeper than insertion position");if(t.depth-s.openStart!=n.depth-s.openEnd)throw new bf("Inconsistent open depths");return vA(t,n,s,0)}function vA(t,n,s,r){let i=t.index(r),o=t.node(r);if(i==n.index(r)&&r<t.depth-s.openStart){let l=vA(t,n,s,r+1);return o.copy(o.content.replaceChild(i,l))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&t.depth==r&&n.depth==r){let l=t.parent,c=l.content;return Ki(l,c.cut(0,t.parentOffset).append(s.content).append(c.cut(n.parentOffset)))}else{let{start:l,end:c}=DX(s,t);return Ki(o,wA(t,l,c,n,r))}else return Ki(o,wf(t,n,r))}function bA(t,n){if(!n.type.compatibleContent(t.type))throw new bf("Cannot join "+n.type.name+" onto "+t.type.name)}function hx(t,n,s){let r=t.node(s);return bA(r,n.node(s)),r}function qi(t,n){let s=n.length-1;s>=0&&t.isText&&t.sameMarkup(n[s])?n[s]=t.withText(n[s].text+t.text):n.push(t)}function ql(t,n,s,r){let i=(n||t).node(s),o=0,l=n?n.index(s):i.childCount;t&&(o=t.index(s),t.depth>s?o++:t.textOffset&&(qi(t.nodeAfter,r),o++));for(let c=o;c<l;c++)qi(i.child(c),r);n&&n.depth==s&&n.textOffset&&qi(n.nodeBefore,r)}function Ki(t,n){return t.type.checkContent(n),t.copy(n)}function wA(t,n,s,r,i){let o=t.depth>i&&hx(t,n,i+1),l=r.depth>i&&hx(s,r,i+1),c=[];return ql(null,t,i,c),o&&l&&n.index(i)==s.index(i)?(bA(o,l),qi(Ki(o,wA(t,n,s,r,i+1)),c)):(o&&qi(Ki(o,wf(t,n,i+1)),c),ql(n,s,i,c),l&&qi(Ki(l,wf(s,r,i+1)),c)),ql(r,null,i,c),new U(c)}function wf(t,n,s){let r=[];if(ql(null,t,s,r),t.depth>s){let i=hx(t,n,s+1);qi(Ki(i,wf(t,n,s+1)),r)}return ql(n,null,s,r),new U(r)}function DX(t,n){let s=n.depth-t.openStart,i=n.node(s).copy(t.content);for(let o=s-1;o>=0;o--)i=n.node(o).copy(U.from(i));return{start:i.resolveNoCache(t.openStart+s),end:i.resolveNoCache(i.content.size-t.openEnd-s)}}class kc{constructor(n,s,r){this.pos=n,this.path=s,this.parentOffset=r,this.depth=s.length/3-1}resolveDepth(n){return n==null?this.depth:n<0?this.depth+n:n}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(n){return this.path[this.resolveDepth(n)*3]}index(n){return this.path[this.resolveDepth(n)*3+1]}indexAfter(n){return n=this.resolveDepth(n),this.index(n)+(n==this.depth&&!this.textOffset?0:1)}start(n){return n=this.resolveDepth(n),n==0?0:this.path[n*3-1]+1}end(n){return n=this.resolveDepth(n),this.start(n)+this.node(n).content.size}before(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position before the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]}after(n){if(n=this.resolveDepth(n),!n)throw new RangeError("There is no position after the top-level node");return n==this.depth+1?this.pos:this.path[n*3-1]+this.path[n*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let n=this.parent,s=this.index(this.depth);if(s==n.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=n.child(s);return r?n.child(s).cut(r):i}get nodeBefore(){let n=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(n).cut(0,s):n==0?null:this.parent.child(n-1)}posAtIndex(n,s){s=this.resolveDepth(s);let r=this.path[s*3],i=s==0?0:this.path[s*3-1]+1;for(let o=0;o<n;o++)i+=r.child(o).nodeSize;return i}marks(){let n=this.parent,s=this.index();if(n.content.size==0)return Ve.none;if(this.textOffset)return n.child(s).marks;let r=n.maybeChild(s-1),i=n.maybeChild(s);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(n){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let r=s.marks,i=n.parent.maybeChild(n.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(n){for(let s=this.depth;s>0;s--)if(this.start(s)<=n&&this.end(s)>=n)return s;return 0}blockRange(n=this,s){if(n.pos<this.pos)return n.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==n.pos?1:0);r>=0;r--)if(n.pos<=this.end(r)&&(!s||s(this.node(r))))return new jf(this,n,r);return null}sameParent(n){return this.pos-this.parentOffset==n.pos-n.parentOffset}max(n){return n.pos>this.pos?n:this}min(n){return n.pos<this.pos?n:this}toString(){let n="";for(let s=1;s<=this.depth;s++)n+=(n?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return n+":"+this.parentOffset}static resolve(n,s){if(!(s>=0&&s<=n.content.size))throw new RangeError("Position "+s+" out of range");let r=[],i=0,o=s;for(let l=n;;){let{index:c,offset:d}=l.content.findIndex(o),u=o-d;if(r.push(l,c,i+d),!u||(l=l.child(c),l.isText))break;o=u-1,i+=d+1}return new kc(s,r,o)}static resolveCached(n,s){let r=Y1.get(n);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==s)return l}else Y1.set(n,r=new IX);let i=r.elts[r.i]=kc.resolve(n,s);return r.i=(r.i+1)%LX,i}}class IX{constructor(){this.elts=[],this.i=0}}const LX=12,Y1=new WeakMap;class jf{constructor(n,s,r){this.$from=n,this.$to=s,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $X=Object.create(null);let Zr=class px{constructor(n,s,r,i=Ve.none){this.type=n,this.attrs=s,this.marks=i,this.content=r||U.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(n){return this.content.child(n)}maybeChild(n){return this.content.maybeChild(n)}forEach(n){this.content.forEach(n)}nodesBetween(n,s,r,i=0){this.content.nodesBetween(n,s,r,i,this)}descendants(n){this.nodesBetween(0,this.content.size,n)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(n,s,r,i){return this.content.textBetween(n,s,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(n){return this==n||this.sameMarkup(n)&&this.content.eq(n.content)}sameMarkup(n){return this.hasMarkup(n.type,n.attrs,n.marks)}hasMarkup(n,s,r){return this.type==n&&vf(this.attrs,s||n.defaultAttrs||$X)&&Ve.sameSet(this.marks,r||Ve.none)}copy(n=null){return n==this.content?this:new px(this.type,this.attrs,n,this.marks)}mark(n){return n==this.marks?this:new px(this.type,this.attrs,this.content,n)}cut(n,s=this.content.size){return n==0&&s==this.content.size?this:this.copy(this.content.cut(n,s))}slice(n,s=this.content.size,r=!1){if(n==s)return ee.empty;let i=this.resolve(n),o=this.resolve(s),l=r?0:i.sharedDepth(s),c=i.start(l),u=i.node(l).content.cut(i.pos-c,o.pos-c);return new ee(u,i.depth-l,o.depth-l)}replace(n,s,r){return OX(this.resolve(n),this.resolve(s),r)}nodeAt(n){for(let s=this;;){let{index:r,offset:i}=s.content.findIndex(n);if(s=s.maybeChild(r),!s)return null;if(i==n||s.isText)return s;n-=i+1}}childAfter(n){let{index:s,offset:r}=this.content.findIndex(n);return{node:this.content.maybeChild(s),index:s,offset:r}}childBefore(n){if(n==0)return{node:null,index:0,offset:0};let{index:s,offset:r}=this.content.findIndex(n);if(r<n)return{node:this.content.child(s),index:s,offset:r};let i=this.content.child(s-1);return{node:i,index:s-1,offset:r-i.nodeSize}}resolve(n){return kc.resolveCached(this,n)}resolveNoCache(n){return kc.resolve(this,n)}rangeHasMark(n,s,r){let i=!1;return s>n&&this.nodesBetween(n,s,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let n=this.type.name;return this.content.size&&(n+="("+this.content.toStringInner()+")"),jA(this.marks,n)}contentMatchAt(n){let s=this.type.contentMatch.matchFragment(this.content,0,n);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(n,s,r=U.empty,i=0,o=r.childCount){let l=this.contentMatchAt(n).matchFragment(r,i,o),c=l&&l.matchFragment(this.content,s);if(!c||!c.validEnd)return!1;for(let d=i;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(n,s,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(n).matchType(r),l=o&&o.matchFragment(this.content,s);return l?l.validEnd:!1}canAppend(n){return n.content.size?this.canReplace(this.childCount,this.childCount,n.content):this.type.compatibleContent(n.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let n=Ve.none;for(let s=0;s<this.marks.length;s++){let r=this.marks[s];r.type.checkAttrs(r.attrs),n=r.addToSet(n)}if(!Ve.sameSet(n,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let n={type:this.type.name};for(let s in this.attrs){n.attrs=this.attrs;break}return this.content.size&&(n.content=this.content.toJSON()),this.marks.length&&(n.marks=this.marks.map(s=>s.toJSON())),n}static fromJSON(n,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let r;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=s.marks.map(n.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return n.text(s.text,r)}let i=U.fromJSON(n,s.content),o=n.nodeType(s.type).create(s.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Zr.prototype.text=void 0;class Nf extends Zr{constructor(n,s,r,i){if(super(n,s,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):jA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(n,s){return this.text.slice(n,s)}get nodeSize(){return this.text.length}mark(n){return n==this.marks?this:new Nf(this.type,this.attrs,this.text,n)}withText(n){return n==this.text?this:new Nf(this.type,this.attrs,n,this.marks)}cut(n=0,s=this.text.length){return n==0&&s==this.text.length?this:this.withText(this.text.slice(n,s))}eq(n){return this.sameMarkup(n)&&this.text==n.text}toJSON(){let n=super.toJSON();return n.text=this.text,n}}function jA(t,n){for(let s=t.length-1;s>=0;s--)n=t[s].type.name+"("+n+")";return n}class la{constructor(n){this.validEnd=n,this.next=[],this.wrapCache=[]}static parse(n,s){let r=new FX(n,s);if(r.next==null)return la.empty;let i=NA(r);r.next&&r.err("Unexpected trailing text");let o=qX(WX(i));return KX(o,r),o}matchType(n){for(let s=0;s<this.next.length;s++)if(this.next[s].type==n)return this.next[s].next;return null}matchFragment(n,s=0,r=n.childCount){let i=this;for(let o=s;i&&o<r;o++)i=i.matchType(n.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let n=0;n<this.next.length;n++){let{type:s}=this.next[n];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(n){for(let s=0;s<this.next.length;s++)for(let r=0;r<n.next.length;r++)if(this.next[s].type==n.next[r].type)return!0;return!1}fillBefore(n,s=!1,r=0){let i=[this];function o(l,c){let d=l.matchFragment(n,r);if(d&&(!s||d.validEnd))return U.from(c.map(u=>u.createAndFill()));for(let u=0;u<l.next.length;u++){let{type:f,next:h}=l.next[u];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let p=o(h,c.concat(f));if(p)return p}}return null}return o(this,[])}findWrapping(n){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==n)return this.wrapCache[r+1];let s=this.computeWrapping(n);return this.wrapCache.push(n,s),s}computeWrapping(n){let s=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(n)){let l=[];for(let c=i;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:d}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in s)&&(!i.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),s[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let n=[];function s(r){n.push(r);for(let i=0;i<r.next.length;i++)n.indexOf(r.next[i].next)==-1&&s(r.next[i].next)}return s(this),n.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+n.indexOf(r.next[l].next);return o}).join(`
`)}}la.empty=new la(!0);class FX{constructor(n,s){this.string=n,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=n.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(n){return this.next==n&&(this.pos++||!0)}err(n){throw new SyntaxError(n+" (in content expression '"+this.string+"')")}}function NA(t){let n=[];do n.push(zX(t));while(t.eat("|"));return n.length==1?n[0]:{type:"choice",exprs:n}}function zX(t){let n=[];do n.push(BX(t));while(t.next&&t.next!=")"&&t.next!="|");return n.length==1?n[0]:{type:"seq",exprs:n}}function BX(t){let n=UX(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=VX(t,n);else break;return n}function X1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let n=Number(t.next);return t.pos++,n}function VX(t,n){let s=X1(t),r=s;return t.eat(",")&&(t.next!="}"?r=X1(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:s,max:r,expr:n}}function HX(t,n){let s=t.nodeTypes,r=s[n];if(r)return[r];let i=[];for(let o in s){let l=s[o];l.isInGroup(n)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+n+"' found"),i}function UX(t){if(t.eat("(")){let n=NA(t);return t.eat(")")||t.err("Missing closing paren"),n}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let n=HX(t,t.next).map(s=>(t.inline==null?t.inline=s.isInline:t.inline!=s.isInline&&t.err("Mixing inline and block content"),{type:"name",value:s}));return t.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function WX(t){let n=[[]];return i(o(t,0),s()),n;function s(){return n.push([])-1}function r(l,c,d){let u={term:d,to:c};return n[l].push(u),u}function i(l,c){l.forEach(d=>d.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((d,u)=>d.concat(o(u,c)),[]);if(l.type=="seq")for(let d=0;;d++){let u=o(l.exprs[d],c);if(d==l.exprs.length-1)return u;i(u,c=s())}else if(l.type=="star"){let d=s();return r(c,d),i(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=s();return i(o(l.expr,c),d),i(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(c)].concat(o(l.expr,c));if(l.type=="range"){let d=c;for(let u=0;u<l.min;u++){let f=s();i(o(l.expr,d),f),d=f}if(l.max==-1)i(o(l.expr,d),d);else for(let u=l.min;u<l.max;u++){let f=s();r(d,f),i(o(l.expr,d),f),d=f}return[r(d)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function SA(t,n){return n-t}function J1(t,n){let s=[];return r(n),s.sort(SA);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);s.push(i);for(let l=0;l<o.length;l++){let{term:c,to:d}=o[l];!c&&s.indexOf(d)==-1&&r(d)}}}function qX(t){let n=Object.create(null);return s(J1(t,0));function s(r){let i=[];r.forEach(l=>{t[l].forEach(({term:c,to:d})=>{if(!c)return;let u;for(let f=0;f<i.length;f++)i[f][0]==c&&(u=i[f][1]);J1(t,d).forEach(f=>{u||i.push([c,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let o=n[r.join(",")]=new la(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let c=i[l][1].sort(SA);o.next.push({type:i[l][0],next:n[c.join(",")]||s(c)})}return o}}function KX(t,n){for(let s=0,r=[t];s<r.length;s++){let i=r[s],o=!i.validEnd,l=[];for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&n.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function kA(t){let n=Object.create(null);for(let s in t){let r=t[s];if(!r.hasDefault)return null;n[s]=r.default}return n}function CA(t,n){let s=Object.create(null);for(let r in t){let i=n&&n[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}s[r]=i}return s}function _A(t,n,s,r){for(let i in n)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${s} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(n[i])}}function EA(t,n){let s=Object.create(null);if(n)for(let r in n)s[r]=new YX(t,r,n[r]);return s}let Q1=class TA{constructor(n,s,r){this.name=n,this.schema=s,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EA(n,r.attrs),this.defaultAttrs=kA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||n=="text"),this.isText=n=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==la.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(n){return this.groups.indexOf(n)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(n){return this==n||this.contentMatch.compatible(n.contentMatch)}computeAttrs(n){return!n&&this.defaultAttrs?this.defaultAttrs:CA(this.attrs,n)}create(n=null,s,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zr(this,this.computeAttrs(n),U.from(s),Ve.setFrom(r))}createChecked(n=null,s,r){return s=U.from(s),this.checkContent(s),new Zr(this,this.computeAttrs(n),s,Ve.setFrom(r))}createAndFill(n=null,s,r){if(n=this.computeAttrs(n),s=U.from(s),s.size){let l=this.contentMatch.fillBefore(s);if(!l)return null;s=l.append(s)}let i=this.contentMatch.matchFragment(s),o=i&&i.fillBefore(U.empty,!0);return o?new Zr(this,n,s.append(o),Ve.setFrom(r)):null}validContent(n){let s=this.contentMatch.matchFragment(n);if(!s||!s.validEnd)return!1;for(let r=0;r<n.childCount;r++)if(!this.allowsMarks(n.child(r).marks))return!1;return!0}checkContent(n){if(!this.validContent(n))throw new RangeError(`Invalid content for node ${this.name}: ${n.toString().slice(0,50)}`)}checkAttrs(n){_A(this.attrs,n,"node",this.name)}allowsMarkType(n){return this.markSet==null||this.markSet.indexOf(n)>-1}allowsMarks(n){if(this.markSet==null)return!0;for(let s=0;s<n.length;s++)if(!this.allowsMarkType(n[s].type))return!1;return!0}allowedMarks(n){if(this.markSet==null)return n;let s;for(let r=0;r<n.length;r++)this.allowsMarkType(n[r].type)?s&&s.push(n[r]):s||(s=n.slice(0,r));return s?s.length?s:Ve.none:n}static compile(n,s){let r=Object.create(null);n.forEach((o,l)=>r[o]=new TA(o,s,l));let i=s.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function GX(t,n,s){let r=s.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${n} on type ${t}, got ${o}`)}}class YX{constructor(n,s,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?GX(n,s,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Oh{constructor(n,s,r,i){this.name=n,this.rank=s,this.schema=r,this.spec=i,this.attrs=EA(n,i.attrs),this.excluded=null;let o=kA(this.attrs);this.instance=o?new Ve(this,o):null}create(n=null){return!n&&this.instance?this.instance:new Ve(this,CA(this.attrs,n))}static compile(n,s){let r=Object.create(null),i=0;return n.forEach((o,l)=>r[o]=new Oh(o,i++,s,l)),r}removeFromSet(n){for(var s=0;s<n.length;s++)n[s].type==this&&(n=n.slice(0,s).concat(n.slice(s+1)),s--);return n}isInSet(n){for(let s=0;s<n.length;s++)if(n[s].type==this)return n[s]}checkAttrs(n){_A(this.attrs,n,"mark",this.name)}excludes(n){return this.excluded.indexOf(n)>-1}}class MA{constructor(n){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let i in n)s[i]=n[i];s.nodes=Mt.from(n.nodes),s.marks=Mt.from(n.marks||{}),this.nodes=Q1.compile(this.spec.nodes,this),this.marks=Oh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=la.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?Z1(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:Z1(this,l.split(" "))}this.nodeFromJSON=i=>Zr.fromJSON(this,i),this.markFromJSON=i=>Ve.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(n,s=null,r,i){if(typeof n=="string")n=this.nodeType(n);else if(n instanceof Q1){if(n.schema!=this)throw new RangeError("Node type from different schema used ("+n.name+")")}else throw new RangeError("Invalid node type: "+n);return n.createChecked(s,r,i)}text(n,s){let r=this.nodes.text;return new Nf(r,r.defaultAttrs,n,Ve.setFrom(s))}mark(n,s){return typeof n=="string"&&(n=this.marks[n]),n.create(s)}nodeType(n){let s=this.nodes[n];if(!s)throw new RangeError("Unknown node type: "+n);return s}}function Z1(t,n){let s=[];for(let r=0;r<n.length;r++){let i=n[r],o=t.marks[i],l=o;if(o)s.push(o);else for(let c in t.marks){let d=t.marks[c];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&s.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+n[r]+"'")}return s}function XX(t){return t.tag!=null}function JX(t){return t.style!=null}class zs{constructor(n,s){this.schema=n,this.rules=s,this.tags=[],this.styles=[];let r=this.matchedStyles=[];s.forEach(i=>{if(XX(i))this.tags.push(i);else if(JX(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=n.nodes[i.node];return o.contentMatch.matchType(o)})}parse(n,s={}){let r=new tN(this,s,!1);return r.addAll(n,Ve.none,s.from,s.to),r.finish()}parseSlice(n,s={}){let r=new tN(this,s,!0);return r.addAll(n,Ve.none,s.from,s.to),ee.maxOpen(r.finish())}matchTag(n,s,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(eJ(n,o.tag)&&(o.namespace===void 0||n.namespaceURI==o.namespace)&&(!o.context||s.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(n,s,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(n)!=0||l.context&&!r.matchesContext(l.context)||c.length>n.length&&(c.charCodeAt(n.length)!=61||c.slice(n.length+1)!=s))){if(l.getAttrs){let d=l.getAttrs(s);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(n){let s=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<s.length;l++){let c=s[l];if((c.priority==null?50:c.priority)<o)break}s.splice(l,0,i)}for(let i in n.marks){let o=n.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=nN(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in n.nodes){let o=n.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=nN(l)),l.node||l.ignore||l.mark||(l.node=i)})}return s}static fromSchema(n){return n.cached.domParser||(n.cached.domParser=new zs(n,zs.schemaRules(n)))}}const AA={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},QX={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PA={ol:!0,ul:!0},Cc=1,mx=2,Kl=4;function eN(t,n,s){return n!=null?(n?Cc:0)|(n==="full"?mx:0):t&&t.whitespace=="pre"?Cc|mx:s&~Kl}class Bd{constructor(n,s,r,i,o,l){this.type=n,this.attrs=s,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Ve.none,this.match=o||(l&Kl?null:n.contentMatch)}findWrapping(n){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(U.from(n));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(n.type))?(this.match=r,i):null}}return this.match.findWrapping(n.type)}finish(n){if(!(this.options&Cc)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let s=U.from(this.content);return!n&&this.match&&(s=s.append(this.match.fillBefore(U.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(n){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:n.parentNode&&!AA.hasOwnProperty(n.parentNode.nodeName.toLowerCase())}}class tN{constructor(n,s,r){this.parser=n,this.options=s,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=s.topNode,o,l=eN(null,s.preserveWhitespace,0)|(r?Kl:0);i?o=new Bd(i.type,i.attrs,Ve.none,!0,s.topMatch||i.type.contentMatch,l):r?o=new Bd(null,null,Ve.none,!0,null,l):o=new Bd(n.schema.topNodeType,null,Ve.none,!0,null,l),this.nodes=[o],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,s){n.nodeType==3?this.addTextNode(n,s):n.nodeType==1&&this.addElement(n,s)}addTextNode(n,s){let r=n.nodeValue,i=this.top,o=i.options&mx?"full":this.localPreserveWS||(i.options&Cc)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(n)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let d=0;d<c.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),s,!0),c[d]&&this.insertNode(l.text(c[d]),s,!/\S/.test(c[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],d=n.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),s,!/\S/.test(r)),this.findInText(n)}else this.findInside(n)}addElement(n,s,r){let i=this.localPreserveWS,o=this.top;(n.tagName=="PRE"||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let l=n.nodeName.toLowerCase(),c;PA.hasOwnProperty(l)&&this.parser.normalizeLists&&ZX(n);let d=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(c=this.parser.matchTag(n,this,r));e:if(d?d.ignore:QX.hasOwnProperty(l))this.findInside(n),this.ignoreFallback(n,s);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(n=d.skip);let u,f=this.needsBlock;if(AA.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,s);break e}let h=d&&d.skip?s:this.readStyles(n,s);h&&this.addAll(n,h),u&&this.sync(o),this.needsBlock=f}else{let u=this.readStyles(n,s);u&&this.addElementByRule(n,d,u,d.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(n,s){n.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode(`
`),s)}ignoreFallback(n,s){n.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s,!0)}readStyles(n,s){let r=n.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(o,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?s=s.filter(u=>!d.clearMark(u)):s=s.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return s}addElementByRule(n,s,r,i){let o,l;if(s.node)if(l=this.parser.schema.nodes[s.node],l.isLeaf)this.insertNode(l.create(s.attrs),r,n.nodeName=="BR")||this.leafFallback(n,r);else{let d=this.enter(l,s.attrs||null,r,s.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[s.mark];r=r.concat(d.create(s.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(n);else if(i)this.addElement(n,r,i);else if(s.getContent)this.findInside(n),s.getContent(n,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=n;typeof s.contentElement=="string"?d=n.querySelector(s.contentElement):typeof s.contentElement=="function"?d=s.contentElement(n):s.contentElement&&(d=s.contentElement),this.findAround(n,d,!0),this.addAll(d,r),this.findAround(n,d,!1)}o&&this.sync(c)&&this.open--}addAll(n,s,r,i){let o=r||0;for(let l=r?n.childNodes[r]:n.firstChild,c=i==null?null:n.childNodes[i];l!=c;l=l.nextSibling,++o)this.findAtPoint(n,o),this.addDOM(l,s);this.findAtPoint(n,o)}findPlace(n,s,r){let i,o;for(let l=this.open,c=0;l>=0;l--){let d=this.nodes[l],u=d.findWrapping(n);if(u&&(!i||i.length>u.length+c)&&(i=u,o=d,!u.length))break;if(d.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)s=this.enterInner(i[l],null,s,!1);return s}insertNode(n,s,r){if(n.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(s=this.enterInner(o,null,s))}let i=this.findPlace(n,s,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(n.type));let l=Ve.none;for(let c of i.concat(n.marks))(o.type?o.type.allowsMarkType(c.type):sN(c.type,n.type))&&(l=c.addToSet(l));return o.content.push(n.mark(l)),!0}return!1}enter(n,s,r,i){let o=this.findPlace(n.create(s),r,!1);return o&&(o=this.enterInner(n,s,r,!0,i)),o}enterInner(n,s,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(n);let c=eN(n,o,l.options);l.options&Kl&&l.content.length==0&&(c|=Kl);let d=Ve.none;return r=r.filter(u=>(l.type?l.type.allowsMarkType(u.type):sN(u.type,n))?(d=u.addToSet(d),!1):!0),this.nodes.push(new Bd(n,s,d,i,null,c)),this.open++,r}closeExtra(n=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let s=this.open;s>=0;s--){if(this.nodes[s]==n)return this.open=s,!0;this.localPreserveWS&&(this.nodes[s].options|=Cc)}return!1}get currentPos(){this.closeExtra();let n=0;for(let s=this.open;s>=0;s--){let r=this.nodes[s].content;for(let i=r.length-1;i>=0;i--)n+=r[i].nodeSize;s&&n++}return n}findAtPoint(n,s){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==n&&this.find[r].offset==s&&(this.find[r].pos=this.currentPos)}findInside(n){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&n.nodeType==1&&n.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(n,s,r){if(n!=s&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&n.nodeType==1&&n.contains(this.find[i].node)&&s.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(n){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==n&&(this.find[s].pos=this.currentPos-(n.nodeValue.length-this.find[s].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let s=n.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(c,d)=>{for(;c>=0;c--){let u=s[c];if(u==""){if(c==s.length-1||c==0)continue;for(;d>=o;d--)if(l(c-1,d))return!0;return!1}else{let f=d>0||d==0&&i?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;d--}}return!0};return l(s.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let s=n.depth;s>=0;s--){let r=n.node(s).contentMatchAt(n.indexAfter(s)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let s in this.parser.schema.nodes){let r=this.parser.schema.nodes[s];if(r.isTextblock&&r.defaultAttrs)return r}}}function ZX(t){for(let n=t.firstChild,s=null;n;n=n.nextSibling){let r=n.nodeType==1?n.nodeName.toLowerCase():null;r&&PA.hasOwnProperty(r)&&s?(s.appendChild(n),n=s):r=="li"?s=n:r&&(s=null)}}function eJ(t,n){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,n)}function nN(t){let n={};for(let s in t)n[s]=t[s];return n}function sN(t,n){let s=n.schema.nodes;for(let r in s){let i=s[r];if(!i.allowsMarkType(t))continue;let o=[],l=c=>{o.push(c);for(let d=0;d<c.edgeCount;d++){let{type:u,next:f}=c.edge(d);if(u==n||o.indexOf(f)<0&&l(f))return!0}};if(l(i.contentMatch))return!0}}class Dh{constructor(n,s){this.nodes=n,this.marks=s}serializeFragment(n,s={},r){r||(r=sm(s).createDocumentFragment());let i=r,o=[];return n.forEach(l=>{if(o.length||l.marks.length){let c=0,d=0;for(;c<o.length&&d<l.marks.length;){let u=l.marks[d];if(!this.marks[u.type.name]){d++;continue}if(!u.eq(o[c][0])||u.type.spec.spanning===!1)break;c++,d++}for(;c<o.length;)i=o.pop()[1];for(;d<l.marks.length;){let u=l.marks[d++],f=this.serializeMark(u,l.isInline,s);f&&(o.push([u,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(l,s))}),r}serializeNodeInner(n,s){let{dom:r,contentDOM:i}=wu(sm(s),this.nodes[n.type.name](n),null,n.attrs);if(i){if(n.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(n.content,s,i)}return r}serializeNode(n,s={}){let r=this.serializeNodeInner(n,s);for(let i=n.marks.length-1;i>=0;i--){let o=this.serializeMark(n.marks[i],n.isInline,s);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(n,s,r={}){let i=this.marks[n.type.name];return i&&wu(sm(r),i(n,s),null,n.attrs)}static renderSpec(n,s,r=null,i){return wu(n,s,r,i)}static fromSchema(n){return n.cached.domSerializer||(n.cached.domSerializer=new Dh(this.nodesFromSchema(n),this.marksFromSchema(n)))}static nodesFromSchema(n){let s=rN(n.nodes);return s.text||(s.text=r=>r.text),s}static marksFromSchema(n){return rN(n.marks)}}function rN(t){let n={};for(let s in t){let r=t[s].spec.toDOM;r&&(n[s]=r)}return n}function sm(t){return t.document||window.document}const iN=new WeakMap;function tJ(t){let n=iN.get(t);return n===void 0&&iN.set(t,n=nJ(t)),n}function nJ(t){let n=null;function s(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")n||(n=[]),n.push(r);else for(let i=0;i<r.length;i++)s(r[i]);else for(let i in r)s(r[i])}return s(t),n}function wu(t,n,s,r){if(typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=tJ(r))&&o.indexOf(n)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(s=i.slice(0,l),i=i.slice(l+1));let c,d=s?t.createElementNS(s,i):t.createElement(i),u=n[1],f=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){f=2;for(let h in u)if(u[h]!=null){let p=h.indexOf(" ");p>0?d.setAttributeNS(h.slice(0,p),h.slice(p+1),u[h]):h=="style"&&d.style?d.style.cssText=u[h]:d.setAttribute(h,u[h])}}for(let h=f;h<n.length;h++){let p=n[h];if(p===0){if(h<n.length-1||h>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:m,contentDOM:x}=wu(t,p,s,r);if(d.appendChild(m),x){if(c)throw new RangeError("Multiple content holes");c=x}}}return{dom:d,contentDOM:c}}const RA=65535,OA=Math.pow(2,16);function sJ(t,n){return t+n*OA}function aN(t){return t&RA}function rJ(t){return(t-(t&RA))/OA}const DA=1,IA=2,ju=4,LA=8;class gx{constructor(n,s,r){this.pos=n,this.delInfo=s,this.recover=r}get deleted(){return(this.delInfo&LA)>0}get deletedBefore(){return(this.delInfo&(DA|ju))>0}get deletedAfter(){return(this.delInfo&(IA|ju))>0}get deletedAcross(){return(this.delInfo&ju)>0}}class _n{constructor(n,s=!1){if(this.ranges=n,this.inverted=s,!n.length&&_n.empty)return _n.empty}recover(n){let s=0,r=aN(n);if(!this.inverted)for(let i=0;i<r;i++)s+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+s+rJ(n)}mapResult(n,s=1){return this._map(n,s,!1)}map(n,s=1){return this._map(n,s,!0)}_map(n,s,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?i:0);if(d>n)break;let u=this.ranges[c+o],f=this.ranges[c+l],h=d+u;if(n<=h){let p=u?n==d?-1:n==h?1:s:s,m=d+i+(p<0?0:f);if(r)return m;let x=n==(s<0?d:h)?null:sJ(c/3,n-d),y=n==d?IA:n==h?DA:ju;return(s<0?n!=d:n!=h)&&(y|=LA),new gx(m,y,x)}i+=f-u}return r?n+i:new gx(n+i,0,null)}touches(n,s){let r=0,i=aN(s),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>n)break;let u=this.ranges[c+o],f=d+u;if(n<=f&&c==i*3)return!0;r+=this.ranges[c+l]-u}return!1}forEach(n){let s=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],c=l-(this.inverted?o:0),d=l+(this.inverted?0:o),u=this.ranges[i+s],f=this.ranges[i+r];n(c,c+u,d,d+f),o+=f-u}}invert(){return new _n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return n==0?_n.empty:new _n(n<0?[0,-n,0]:[0,0,n])}}_n.empty=new _n([]);class _c{constructor(n,s,r=0,i=n?n.length:0){this.mirror=s,this.from=r,this.to=i,this._maps=n||[],this.ownData=!(n||s)}get maps(){return this._maps}slice(n=0,s=this.maps.length){return new _c(this._maps,this.mirror,n,s)}appendMap(n,s){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(n),s!=null&&this.setMirror(this._maps.length-1,s)}appendMapping(n){for(let s=0,r=this._maps.length;s<n._maps.length;s++){let i=n.getMirror(s);this.appendMap(n._maps[s],i!=null&&i<s?r+i:void 0)}}getMirror(n){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==n)return this.mirror[s+(s%2?-1:1)]}}setMirror(n,s){this.mirror||(this.mirror=[]),this.mirror.push(n,s)}appendMappingInverted(n){for(let s=n.maps.length-1,r=this._maps.length+n._maps.length;s>=0;s--){let i=n.getMirror(s);this.appendMap(n._maps[s].invert(),i!=null&&i>s?r-i-1:void 0)}}invert(){let n=new _c;return n.appendMappingInverted(this),n}map(n,s=1){if(this.mirror)return this._map(n,s,!0);for(let r=this.from;r<this.to;r++)n=this._maps[r].map(n,s);return n}mapResult(n,s=1){return this._map(n,s,!1)}_map(n,s,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],c=l.mapResult(n,s);if(c.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,n=this._maps[d].recover(c.recover);continue}}i|=c.delInfo,n=c.pos}return r?n:new gx(n,i,null)}}const rm=Object.create(null);class Zt{getMap(){return _n.empty}merge(n){return null}static fromJSON(n,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=rm[s.stepType];if(!r)throw new RangeError(`No step type ${s.stepType} defined`);return r.fromJSON(n,s)}static jsonID(n,s){if(n in rm)throw new RangeError("Duplicate use of step JSON ID "+n);return rm[n]=s,s.prototype.jsonID=n,s}}class ft{constructor(n,s){this.doc=n,this.failed=s}static ok(n){return new ft(n,null)}static fail(n){return new ft(null,n)}static fromReplace(n,s,r,i){try{return ft.ok(n.replace(s,r,i))}catch(o){if(o instanceof bf)return ft.fail(o.message);throw o}}}function s0(t,n,s){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(s0(o.content,n,o))),o.isInline&&(o=n(o,s,i)),r.push(o)}return U.fromArray(r)}class Fr extends Zt{constructor(n,s,r){super(),this.from=n,this.to=s,this.mark=r}apply(n){let s=n.slice(this.from,this.to),r=n.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ee(s0(s.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),s.openStart,s.openEnd);return ft.fromReplace(n,this.from,this.to,o)}invert(){return new us(this.from,this.to,this.mark)}map(n){let s=n.mapResult(this.from,1),r=n.mapResult(this.to,-1);return s.deleted&&r.deleted||s.pos>=r.pos?null:new Fr(s.pos,r.pos,this.mark)}merge(n){return n instanceof Fr&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new Fr(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fr(s.from,s.to,n.markFromJSON(s.mark))}}Zt.jsonID("addMark",Fr);class us extends Zt{constructor(n,s,r){super(),this.from=n,this.to=s,this.mark=r}apply(n){let s=n.slice(this.from,this.to),r=new ee(s0(s.content,i=>i.mark(this.mark.removeFromSet(i.marks)),n),s.openStart,s.openEnd);return ft.fromReplace(n,this.from,this.to,r)}invert(){return new Fr(this.from,this.to,this.mark)}map(n){let s=n.mapResult(this.from,1),r=n.mapResult(this.to,-1);return s.deleted&&r.deleted||s.pos>=r.pos?null:new us(s.pos,r.pos,this.mark)}merge(n){return n instanceof us&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new us(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new us(s.from,s.to,n.markFromJSON(s.mark))}}Zt.jsonID("removeMark",us);class zr extends Zt{constructor(n,s){super(),this.pos=n,this.mark=s}apply(n){let s=n.nodeAt(this.pos);if(!s)return ft.fail("No node at mark step's position");let r=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return ft.fromReplace(n,this.pos,this.pos+1,new ee(U.from(r),0,s.isLeaf?0:1))}invert(n){let s=n.nodeAt(this.pos);if(s){let r=this.mark.addToSet(s.marks);if(r.length==s.marks.length){for(let i=0;i<s.marks.length;i++)if(!s.marks[i].isInSet(r))return new zr(this.pos,s.marks[i]);return new zr(this.pos,this.mark)}}return new ca(this.pos,this.mark)}map(n){let s=n.mapResult(this.pos,1);return s.deletedAfter?null:new zr(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zr(s.pos,n.markFromJSON(s.mark))}}Zt.jsonID("addNodeMark",zr);class ca extends Zt{constructor(n,s){super(),this.pos=n,this.mark=s}apply(n){let s=n.nodeAt(this.pos);if(!s)return ft.fail("No node at mark step's position");let r=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return ft.fromReplace(n,this.pos,this.pos+1,new ee(U.from(r),0,s.isLeaf?0:1))}invert(n){let s=n.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new zr(this.pos,this.mark)}map(n){let s=n.mapResult(this.pos,1);return s.deletedAfter?null:new ca(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ca(s.pos,n.markFromJSON(s.mark))}}Zt.jsonID("removeNodeMark",ca);class xt extends Zt{constructor(n,s,r,i=!1){super(),this.from=n,this.to=s,this.slice=r,this.structure=i}apply(n){return this.structure&&xx(n,this.from,this.to)?ft.fail("Structure replace would overwrite content"):ft.fromReplace(n,this.from,this.to,this.slice)}getMap(){return new _n([this.from,this.to-this.from,this.slice.size])}invert(n){return new xt(this.from,this.from+this.slice.size,n.slice(this.from,this.to))}map(n){let s=n.mapResult(this.from,1),r=n.mapResult(this.to,-1);return s.deletedAcross&&r.deletedAcross?null:new xt(s.pos,Math.max(s.pos,r.pos),this.slice,this.structure)}merge(n){if(!(n instanceof xt)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){let s=this.slice.size+n.slice.size==0?ee.empty:new ee(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new xt(this.from,this.to+(n.to-n.from),s,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){let s=this.slice.size+n.slice.size==0?ee.empty:new ee(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new xt(n.from,this.to,s,this.structure)}else return null}toJSON(){let n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xt(s.from,s.to,ee.fromJSON(n,s.slice),!!s.structure)}}Zt.jsonID("replace",xt);class bt extends Zt{constructor(n,s,r,i,o,l,c=!1){super(),this.from=n,this.to=s,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=c}apply(n){if(this.structure&&(xx(n,this.from,this.gapFrom)||xx(n,this.gapTo,this.to)))return ft.fail("Structure gap-replace would overwrite content");let s=n.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return ft.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,s.content);return r?ft.fromReplace(n,this.from,this.to,r):ft.fail("Content does not fit in gap")}getMap(){return new _n([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(n){let s=this.gapTo-this.gapFrom;return new bt(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(n){let s=n.mapResult(this.from,1),r=n.mapResult(this.to,-1),i=this.from==this.gapFrom?s.pos:n.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:n.map(this.gapTo,1);return s.deletedAcross&&r.deletedAcross||i<s.pos||o>r.pos?null:new bt(s.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new bt(s.from,s.to,s.gapFrom,s.gapTo,ee.fromJSON(n,s.slice),s.insert,!!s.structure)}}Zt.jsonID("replaceAround",bt);function xx(t,n,s){let r=t.resolve(n),i=s-n,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function iJ(t,n,s,r){let i=[],o=[],l,c;t.doc.nodesBetween(n,s,(d,u,f)=>{if(!d.isInline)return;let h=d.marks;if(!r.isInSet(h)&&f.type.allowsMarkType(r.type)){let p=Math.max(u,n),m=Math.min(u+d.nodeSize,s),x=r.addToSet(h);for(let y=0;y<h.length;y++)h[y].isInSet(x)||(l&&l.to==p&&l.mark.eq(h[y])?l.to=m:i.push(l=new us(p,m,h[y])));c&&c.to==p?c.to=m:o.push(c=new Fr(p,m,r))}}),i.forEach(d=>t.step(d)),o.forEach(d=>t.step(d))}function aJ(t,n,s,r){let i=[],o=0;t.doc.nodesBetween(n,s,(l,c)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof Oh){let u=l.marks,f;for(;f=r.isInSet(u);)(d||(d=[])).push(f),u=f.removeFromSet(u)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let u=Math.min(c+l.nodeSize,s);for(let f=0;f<d.length;f++){let h=d[f],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==o-1&&h.eq(i[m].style)&&(p=x)}p?(p.to=u,p.step=o):i.push({style:h,from:Math.max(c,n),to:u,step:o})}}}),i.forEach(l=>t.step(new us(l.from,l.to,l.style)))}function r0(t,n,s,r=s.contentMatch,i=!0){let o=t.doc.nodeAt(n),l=[],c=n+1;for(let d=0;d<o.childCount;d++){let u=o.child(d),f=c+u.nodeSize,h=r.matchType(u.type);if(!h)l.push(new xt(c,f,ee.empty));else{r=h;for(let p=0;p<u.marks.length;p++)s.allowsMarkType(u.marks[p].type)||t.step(new us(c,f,u.marks[p]));if(i&&u.isText&&s.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(u.text);)x||(x=new ee(U.from(s.schema.text(" ",s.allowedMarks(u.marks))),0,0)),l.push(new xt(c+p.index,c+p.index+p[0].length,x))}}c=f}if(!r.validEnd){let d=r.fillBefore(U.empty,!0);t.replace(c,c,new ee(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function oJ(t,n,s){return(n==0||t.canReplace(n,t.childCount))&&(s==t.childCount||t.canReplace(0,s))}function ba(t){let s=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),l=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,l,s))return r;if(r==0||i.type.spec.isolating||!oJ(i,o,l))break}return null}function lJ(t,n,s){let{$from:r,$to:i,depth:o}=n,l=r.before(o+1),c=i.after(o+1),d=l,u=c,f=U.empty,h=0;for(let x=o,y=!1;x>s;x--)y||r.index(x)>0?(y=!0,f=U.from(r.node(x).copy(f)),h++):d--;let p=U.empty,m=0;for(let x=o,y=!1;x>s;x--)y||i.after(x+1)<i.end(x)?(y=!0,p=U.from(i.node(x).copy(p)),m++):u++;t.step(new bt(d,u,l,c,new ee(f.append(p),h,m),f.size-h,!0))}function i0(t,n,s=null,r=t){let i=cJ(t,n),o=i&&dJ(r,n);return o?i.map(oN).concat({type:n,attrs:s}).concat(o.map(oN)):null}function oN(t){return{type:t,attrs:null}}function cJ(t,n){let{parent:s,startIndex:r,endIndex:i}=t,o=s.contentMatchAt(r).findWrapping(n);if(!o)return null;let l=o.length?o[0]:n;return s.canReplaceWith(r,i,l)?o:null}function dJ(t,n){let{parent:s,startIndex:r,endIndex:i}=t,o=s.child(r),l=n.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:n).contentMatch;for(let u=r;d&&u<i;u++)d=d.matchType(s.child(u).type);return!d||!d.validEnd?null:l}function uJ(t,n,s){let r=U.empty;for(let l=s.length-1;l>=0;l--){if(r.size){let c=s[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=U.from(s[l].type.create(s[l].attrs,r))}let i=n.start,o=n.end;t.step(new bt(i,o,i,o,new ee(r,0,0),s.length,!0))}function fJ(t,n,s,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(n,s,(l,c)=>{let d=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,d)&&hJ(t.doc,t.mapping.slice(o).map(c),r)){let u=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!x?u=!1:!m&&x&&(u=!0)}u===!1&&FA(t,l,c,o),r0(t,t.mapping.slice(o).map(c,1),r,void 0,u===null);let f=t.mapping.slice(o),h=f.map(c,1),p=f.map(c+l.nodeSize,1);return t.step(new bt(h,p,h+1,p-1,new ee(U.from(r.create(d,null,l.marks)),0,0),1,!0)),u===!0&&$A(t,l,c,o),!1}})}function $A(t,n,s,r){n.forEach((i,o)=>{if(i.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(i.text);){let d=t.mapping.slice(r).map(s+1+o+l.index);t.replaceWith(d,d+1,n.type.schema.linebreakReplacement.create())}}})}function FA(t,n,s,r){n.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(s+1+o);t.replaceWith(l,l+1,n.type.schema.text(`
`))}})}function hJ(t,n,s){let r=t.resolve(n),i=r.index();return r.parent.canReplaceWith(i,i+1,s)}function pJ(t,n,s,r,i){let o=t.doc.nodeAt(n);if(!o)throw new RangeError("No node at given position");s||(s=o.type);let l=s.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(n,n+o.nodeSize,l);if(!s.validContent(o.content))throw new RangeError("Invalid content for node type "+s.name);t.step(new bt(n,n+o.nodeSize,n+1,n+o.nodeSize-1,new ee(U.from(l),0,0),1,!0))}function Rn(t,n,s=1,r){let i=t.resolve(n),o=i.depth-s,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,f=s-2;u>o;u--,f--){let h=i.node(u),p=i.index(u);if(h.type.spec.isolating)return!1;let m=h.content.cutByIndex(p,h.childCount),x=r&&r[f+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let y=r&&r[f]||h;if(!h.canReplace(p+1,h.childCount)||!y.type.validContent(m))return!1}let c=i.indexAfter(o),d=r&&r[0];return i.node(o).canReplaceWith(c,c,d?d.type:i.node(o+1).type)}function mJ(t,n,s=1,r){let i=t.doc.resolve(n),o=U.empty,l=U.empty;for(let c=i.depth,d=i.depth-s,u=s-1;c>d;c--,u--){o=U.from(i.node(c).copy(o));let f=r&&r[u];l=U.from(f?f.type.create(f.attrs,l):i.node(c).copy(l))}t.step(new xt(n,n,new ee(o.append(l),s,s),!0))}function Ys(t,n){let s=t.resolve(n),r=s.index();return zA(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(r,r+1)}function gJ(t,n){n.content.size||t.type.compatibleContent(n.type);let s=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<n.childCount;i++){let o=n.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(s=s.matchType(l),!s||!t.type.allowsMarks(o.marks))return!1}return s.validEnd}function zA(t,n){return!!(t&&n&&!t.isLeaf&&gJ(t,n))}function el(t,n,s=-1){let r=t.resolve(n);for(let i=r.depth;;i--){let o,l,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):s>0?(o=r.node(i+1),c++,l=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),l=r.node(i+1)),o&&!o.isTextblock&&zA(o,l)&&r.node(i).canReplace(c,c+1))return n;if(i==0)break;n=s<0?r.before(i):r.after(i)}}function xJ(t,n,s){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(n-s),l=o.node().type;if(i&&l.inlineContent){let f=l.whitespace=="pre",h=!!l.contentMatch.matchType(i);f&&!h?r=!1:!f&&h&&(r=!0)}let c=t.steps.length;if(r===!1){let f=t.doc.resolve(n+s);FA(t,f.node(),f.before(),c)}l.inlineContent&&r0(t,n+s-1,l,o.node().contentMatchAt(o.index()),r==null);let d=t.mapping.slice(c),u=d.map(n-s);if(t.step(new xt(u,d.map(n+s,-1),ee.empty,!0)),r===!0){let f=t.doc.resolve(u);$A(t,f.node(),f.before(),t.steps.length)}return t}function yJ(t,n,s){let r=t.resolve(n);if(r.parent.canReplaceWith(r.index(),r.index(),s))return n;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,s))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,s))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function BA(t,n,s){let r=t.resolve(n);if(!s.content.size)return n;let i=s.content;for(let o=0;o<s.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(s.openStart==0&&s.size?2:1);o++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(c>0?1:0),u=r.node(l),f=!1;if(o==1)f=u.canReplace(d,d,i);else{let h=u.contentMatchAt(d).findWrapping(i.firstChild.type);f=h&&u.canReplaceWith(d,d,h[0])}if(f)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function Ih(t,n,s=n,r=ee.empty){if(n==s&&!r.size)return null;let i=t.resolve(n),o=t.resolve(s);return VA(i,o,r)?new xt(n,s,r):new vJ(i,o,r).fit()}function VA(t,n,s){return!s.openStart&&!s.openEnd&&t.start()==n.start()&&t.parent.canReplace(t.index(),n.index(),s.content)}class vJ{constructor(n,s,r){this.$from=n,this.$to=s,this.unplaced=r,this.frontier=[],this.placed=U.empty;for(let i=0;i<=n.depth;i++){let o=n.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(n.indexAfter(i))})}for(let i=n.depth;i>0;i--)this.placed=U.from(n.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let n=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(n<0?this.$to:r.doc.resolve(n));if(!i)return null;let o=this.placed,l=r.depth,c=i.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let d=new ee(o,l,c);return n>-1?new bt(r.pos,n,this.$to.pos,this.$to.end(),d,s):d.size||r.pos!=this.$to.pos?new xt(r.pos,i.pos,d):null}findFittable(){let n=this.unplaced.openStart;for(let s=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<n;r++){let o=s.firstChild;if(s.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){n=r;break}s=o.content}for(let s=1;s<=2;s++)for(let r=s==1?n:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=im(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:u}=this.frontier[c],f,h=null;if(s==1&&(l?u.matchType(l.type)||(h=u.fillBefore(U.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:h};if(s==2&&l&&(f=u.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:f};if(o&&u.matchType(o.type))break}}}openMore(){let{content:n,openStart:s,openEnd:r}=this.unplaced,i=im(n,s);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ee(n,s+1,Math.max(r,i.size+s>=n.size-r?s+1:0)),!0)}dropNode(){let{content:n,openStart:s,openEnd:r}=this.unplaced,i=im(n,s);if(i.childCount<=1&&s>0){let o=n.size-s<=s+i.size;this.unplaced=new ee(_l(n,s-1,1),s-1,o?s-1:r)}else this.unplaced=new ee(_l(n,s,1),s,r)}placeNodes({sliceDepth:n,frontierDepth:s,parent:r,inject:i,wrap:o}){for(;this.depth>s;)this.closeFrontierNode();if(o)for(let y=0;y<o.length;y++)this.openFrontierNode(o[y]);let l=this.unplaced,c=r?r.content:l.content,d=l.openStart-n,u=0,f=[],{match:h,type:p}=this.frontier[s];if(i){for(let y=0;y<i.childCount;y++)f.push(i.child(y));h=h.matchFragment(i)}let m=c.size+n-(l.content.size-l.openEnd);for(;u<c.childCount;){let y=c.child(u),v=h.matchType(y.type);if(!v)break;u++,(u>1||d==0||y.content.size)&&(h=v,f.push(HA(y.mark(p.allowedMarks(y.marks)),u==1?d:0,u==c.childCount?m:-1)))}let x=u==c.childCount;x||(m=-1),this.placed=El(this.placed,s,U.from(f)),this.frontier[s].match=h,x&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,v=c;y<m;y++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=x?n==0?ee.empty:new ee(_l(l.content,n-1,1),n-1,m<0?l.openEnd:n-1):new ee(_l(l.content,n,u),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let n=this.frontier[this.depth],s;if(!n.type.isTextblock||!am(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(n){e:for(let s=Math.min(this.depth,n.depth);s>=0;s--){let{match:r,type:i}=this.frontier[s],o=s<n.depth&&n.end(s+1)==n.pos+(n.depth-(s+1)),l=am(n,s,i,r,o);if(l){for(let c=s-1;c>=0;c--){let{match:d,type:u}=this.frontier[c],f=am(n,c,u,d,!0);if(!f||f.childCount)continue e}return{depth:s,fit:l,move:o?n.doc.resolve(n.after(s+1)):n}}}}close(n){let s=this.findCloseLevel(n);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=El(this.placed,s.depth,s.fit)),n=s.move;for(let r=s.depth+1;r<=n.depth;r++){let i=n.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,n.index(r));this.openFrontierNode(i.type,i.attrs,o)}return n}openFrontierNode(n,s=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(n),this.placed=El(this.placed,this.depth,U.from(n.create(s,r))),this.frontier.push({type:n,match:n.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(U.empty,!0);s.childCount&&(this.placed=El(this.placed,this.frontier.length,s))}}function _l(t,n,s){return n==0?t.cutByIndex(s,t.childCount):t.replaceChild(0,t.firstChild.copy(_l(t.firstChild.content,n-1,s)))}function El(t,n,s){return n==0?t.append(s):t.replaceChild(t.childCount-1,t.lastChild.copy(El(t.lastChild.content,n-1,s)))}function im(t,n){for(let s=0;s<n;s++)t=t.firstChild.content;return t}function HA(t,n,s){if(n<=0)return t;let r=t.content;return n>1&&(r=r.replaceChild(0,HA(r.firstChild,n-1,r.childCount==1?s-1:0))),n>0&&(r=t.type.contentMatch.fillBefore(r).append(r),s<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(U.empty,!0)))),t.copy(r)}function am(t,n,s,r,i){let o=t.node(n),l=i?t.indexAfter(n):t.index(n);if(l==o.childCount&&!s.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,l);return c&&!bJ(s,o.content,l)?c:null}function bJ(t,n,s){for(let r=s;r<n.childCount;r++)if(!t.allowsMarks(n.child(r).marks))return!0;return!1}function wJ(t){return t.spec.defining||t.spec.definingForContent}function jJ(t,n,s,r){if(!r.size)return t.deleteRange(n,s);let i=t.doc.resolve(n),o=t.doc.resolve(s);if(VA(i,o,r))return t.step(new xt(n,s,r));let l=WA(i,t.doc.resolve(s));l[l.length-1]==0&&l.pop();let c=-(i.depth+1);l.unshift(c);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;l.indexOf(p)>-1?c=p:i.before(p)==m&&l.splice(1,0,-p)}let d=l.indexOf(c),u=[],f=r.openStart;for(let p=r.content,m=0;;m++){let x=p.firstChild;if(u.push(x),m==r.openStart)break;p=x.content}for(let p=f-1;p>=0;p--){let m=u[p],x=wJ(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(c)-1)))f=p;else if(x||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+f+1)%(r.openStart+1),x=u[m];if(x)for(let y=0;y<l.length;y++){let v=l[(y+d)%l.length],b=!0;v<0&&(b=!1,v=-v);let w=i.node(v-1),j=i.index(v-1);if(w.canReplaceWith(j,j,x.type,x.marks))return t.replace(i.before(v),b?o.after(v):s,new ee(UA(r.content,0,r.openStart,m),m,r.openEnd))}}let h=t.steps.length;for(let p=l.length-1;p>=0&&(t.replace(n,s,r),!(t.steps.length>h));p--){let m=l[p];m<0||(n=i.before(m),s=o.after(m))}}function UA(t,n,s,r,i){if(n<s){let o=t.firstChild;t=t.replaceChild(0,o.copy(UA(o.content,n+1,s,r,o)))}if(n>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(U.empty,!0))}return t}function NJ(t,n,s,r){if(!r.isInline&&n==s&&t.doc.resolve(n).parent.content.size){let i=yJ(t.doc,n,r.type);i!=null&&(n=s=i)}t.replaceRange(n,s,new ee(U.from(r),0,0))}function SJ(t,n,s){let r=t.doc.resolve(n),i=t.doc.resolve(s),o=WA(r,i);for(let l=0;l<o.length;l++){let c=o[l],d=l==o.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),i.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return t.delete(r.before(c),i.after(c))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(n-r.start(l)==r.depth-l&&s>r.end(l)&&i.end(l)-s!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),s);t.delete(n,s)}function WA(t,n){let s=[],r=Math.min(t.depth,n.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||n.end(i)>n.pos+(n.depth-i)||t.node(i).type.spec.isolating||n.node(i).type.spec.isolating)break;(o==n.start(i)||i==t.depth&&i==n.depth&&t.parent.inlineContent&&n.parent.inlineContent&&i&&n.start(i-1)==o-1)&&s.push(i)}return s}class uo extends Zt{constructor(n,s,r){super(),this.pos=n,this.attr=s,this.value=r}apply(n){let s=n.nodeAt(this.pos);if(!s)return ft.fail("No node at attribute step's position");let r=Object.create(null);for(let o in s.attrs)r[o]=s.attrs[o];r[this.attr]=this.value;let i=s.type.create(r,null,s.marks);return ft.fromReplace(n,this.pos,this.pos+1,new ee(U.from(i),0,s.isLeaf?0:1))}getMap(){return _n.empty}invert(n){return new uo(this.pos,this.attr,n.nodeAt(this.pos).attrs[this.attr])}map(n){let s=n.mapResult(this.pos,1);return s.deletedAfter?null:new uo(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(n,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uo(s.pos,s.attr,s.value)}}Zt.jsonID("attr",uo);class Ec extends Zt{constructor(n,s){super(),this.attr=n,this.value=s}apply(n){let s=Object.create(null);for(let i in n.attrs)s[i]=n.attrs[i];s[this.attr]=this.value;let r=n.type.create(s,n.content,n.marks);return ft.ok(r)}getMap(){return _n.empty}invert(n){return new Ec(this.attr,n.attrs[this.attr])}map(n){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(n,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ec(s.attr,s.value)}}Zt.jsonID("docAttr",Ec);let Mo=class extends Error{};Mo=function t(n){let s=Error.call(this,n);return s.__proto__=t.prototype,s};Mo.prototype=Object.create(Error.prototype);Mo.prototype.constructor=Mo;Mo.prototype.name="TransformError";class qA{constructor(n){this.doc=n,this.steps=[],this.docs=[],this.mapping=new _c}get before(){return this.docs.length?this.docs[0]:this.doc}step(n){let s=this.maybeStep(n);if(s.failed)throw new Mo(s.failed);return this}maybeStep(n){let s=n.apply(this.doc);return s.failed||this.addStep(n,s.doc),s}get docChanged(){return this.steps.length>0}addStep(n,s){this.docs.push(this.doc),this.steps.push(n),this.mapping.appendMap(n.getMap()),this.doc=s}replace(n,s=n,r=ee.empty){let i=Ih(this.doc,n,s,r);return i&&this.step(i),this}replaceWith(n,s,r){return this.replace(n,s,new ee(U.from(r),0,0))}delete(n,s){return this.replace(n,s,ee.empty)}insert(n,s){return this.replaceWith(n,n,s)}replaceRange(n,s,r){return jJ(this,n,s,r),this}replaceRangeWith(n,s,r){return NJ(this,n,s,r),this}deleteRange(n,s){return SJ(this,n,s),this}lift(n,s){return lJ(this,n,s),this}join(n,s=1){return xJ(this,n,s),this}wrap(n,s){return uJ(this,n,s),this}setBlockType(n,s=n,r,i=null){return fJ(this,n,s,r,i),this}setNodeMarkup(n,s,r=null,i){return pJ(this,n,s,r,i),this}setNodeAttribute(n,s,r){return this.step(new uo(n,s,r)),this}setDocAttribute(n,s){return this.step(new Ec(n,s)),this}addNodeMark(n,s){return this.step(new zr(n,s)),this}removeNodeMark(n,s){let r=this.doc.nodeAt(n);if(!r)throw new RangeError("No node at position "+n);if(s instanceof Ve)s.isInSet(r.marks)&&this.step(new ca(n,s));else{let i=r.marks,o,l=[];for(;o=s.isInSet(i);)l.push(new ca(n,o)),i=o.removeFromSet(i);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(n,s=1,r){return mJ(this,n,s,r),this}addMark(n,s,r){return iJ(this,n,s,r),this}removeMark(n,s,r){return aJ(this,n,s,r),this}clearIncompatible(n,s,r){return r0(this,n,s,r),this}}const om=Object.create(null);class he{constructor(n,s,r){this.$anchor=n,this.$head=s,this.ranges=r||[new KA(n.min(s),n.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let n=this.ranges;for(let s=0;s<n.length;s++)if(n[s].$from.pos!=n[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(n,s=ee.empty){let r=s.content.lastChild,i=null;for(let c=0;c<s.openEnd;c++)i=r,r=r.lastChild;let o=n.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:d,$to:u}=l[c],f=n.mapping.slice(o);n.replaceRange(f.map(d.pos),f.map(u.pos),c?ee.empty:s),c==0&&dN(n,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(n,s){let r=n.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:c}=i[o],d=n.mapping.slice(r),u=d.map(l.pos),f=d.map(c.pos);o?n.deleteRange(u,f):(n.replaceRangeWith(u,f,s),dN(n,r,s.isInline?-1:1))}}static findFrom(n,s,r=!1){let i=n.parent.inlineContent?new le(n):Oa(n.node(0),n.parent,n.pos,n.index(),s,r);if(i)return i;for(let o=n.depth-1;o>=0;o--){let l=s<0?Oa(n.node(0),n.node(o),n.before(o+1),n.index(o),s,r):Oa(n.node(0),n.node(o),n.after(o+1),n.index(o)+1,s,r);if(l)return l}return null}static near(n,s=1){return this.findFrom(n,s)||this.findFrom(n,-s)||new bn(n.node(0))}static atStart(n){return Oa(n,n,0,0,1)||new bn(n)}static atEnd(n){return Oa(n,n,n.content.size,n.childCount,-1)||new bn(n)}static fromJSON(n,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=om[s.type];if(!r)throw new RangeError(`No selection type ${s.type} defined`);return r.fromJSON(n,s)}static jsonID(n,s){if(n in om)throw new RangeError("Duplicate use of selection JSON ID "+n);return om[n]=s,s.prototype.jsonID=n,s}getBookmark(){return le.between(this.$anchor,this.$head).getBookmark()}}he.prototype.visible=!0;class KA{constructor(n,s){this.$from=n,this.$to=s}}let lN=!1;function cN(t){!lN&&!t.parent.inlineContent&&(lN=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class le extends he{constructor(n,s=n){cN(n),cN(s),super(n,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(n,s){let r=n.resolve(s.map(this.head));if(!r.parent.inlineContent)return he.near(r);let i=n.resolve(s.map(this.anchor));return new le(i.parent.inlineContent?i:r,r)}replace(n,s=ee.empty){if(super.replace(n,s),s==ee.empty){let r=this.$from.marksAcross(this.$to);r&&n.ensureMarks(r)}}eq(n){return n instanceof le&&n.anchor==this.anchor&&n.head==this.head}getBookmark(){return new Lh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(n,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new le(n.resolve(s.anchor),n.resolve(s.head))}static create(n,s,r=s){let i=n.resolve(s);return new this(i,r==s?i:n.resolve(r))}static between(n,s,r){let i=n.pos-s.pos;if((!r||i)&&(r=i>=0?1:-1),!s.parent.inlineContent){let o=he.findFrom(s,r,!0)||he.findFrom(s,-r,!0);if(o)s=o.$head;else return he.near(s,r)}return n.parent.inlineContent||(i==0?n=s:(n=(he.findFrom(n,-r,!0)||he.findFrom(n,r,!0)).$anchor,n.pos<s.pos!=i<0&&(n=s))),new le(n,s)}}he.jsonID("text",le);class Lh{constructor(n,s){this.anchor=n,this.head=s}map(n){return new Lh(n.map(this.anchor),n.map(this.head))}resolve(n){return le.between(n.resolve(this.anchor),n.resolve(this.head))}}class fe extends he{constructor(n){let s=n.nodeAfter,r=n.node(0).resolve(n.pos+s.nodeSize);super(n,r),this.node=s}map(n,s){let{deleted:r,pos:i}=s.mapResult(this.anchor),o=n.resolve(i);return r?he.near(o):new fe(o)}content(){return new ee(U.from(this.node),0,0)}eq(n){return n instanceof fe&&n.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new a0(this.anchor)}static fromJSON(n,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new fe(n.resolve(s.anchor))}static create(n,s){return new fe(n.resolve(s))}static isSelectable(n){return!n.isText&&n.type.spec.selectable!==!1}}fe.prototype.visible=!1;he.jsonID("node",fe);class a0{constructor(n){this.anchor=n}map(n){let{deleted:s,pos:r}=n.mapResult(this.anchor);return s?new Lh(r,r):new a0(r)}resolve(n){let s=n.resolve(this.anchor),r=s.nodeAfter;return r&&fe.isSelectable(r)?new fe(s):he.near(s)}}class bn extends he{constructor(n){super(n.resolve(0),n.resolve(n.content.size))}replace(n,s=ee.empty){if(s==ee.empty){n.delete(0,n.doc.content.size);let r=he.atStart(n.doc);r.eq(n.selection)||n.setSelection(r)}else super.replace(n,s)}toJSON(){return{type:"all"}}static fromJSON(n){return new bn(n)}map(n){return new bn(n)}eq(n){return n instanceof bn}getBookmark(){return kJ}}he.jsonID("all",bn);const kJ={map(){return this},resolve(t){return new bn(t)}};function Oa(t,n,s,r,i,o=!1){if(n.inlineContent)return le.create(t,s);for(let l=r-(i>0?0:1);i>0?l<n.childCount:l>=0;l+=i){let c=n.child(l);if(c.isAtom){if(!o&&fe.isSelectable(c))return fe.create(t,s-(i<0?c.nodeSize:0))}else{let d=Oa(t,c,s+i,i<0?c.childCount:0,i,o);if(d)return d}s+=c.nodeSize*i}return null}function dN(t,n,s){let r=t.steps.length-1;if(r<n)return;let i=t.steps[r];if(!(i instanceof xt||i instanceof bt))return;let o=t.mapping.maps[r],l;o.forEach((c,d,u,f)=>{l==null&&(l=f)}),t.setSelection(he.near(t.doc.resolve(l),s))}function uN(t,n){return!n||!t?t:t.bind(n)}class Vd{constructor(n,s,r){this.name=n,this.init=uN(s.init,r),this.apply=uN(s.apply,r)}}new Vd("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Vd("selection",{init(t,n){return t.selection||he.atStart(n.doc)},apply(t){return t.selection}}),new Vd("storedMarks",{init(t){return t.storedMarks||null},apply(t,n,s,r){return r.selection.$cursor?t.storedMarks:null}}),new Vd("scrollToSelection",{init(){return 0},apply(t,n){return t.scrolledIntoView?n+1:n}});function GA(t,n,s){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(n):r=="handleDOMEvents"&&(i=GA(i,n,{})),s[r]=i}return s}class ht{constructor(n){this.spec=n,this.props={},n.props&&GA(n.props,this,this.props),this.key=n.key?n.key.key:YA("plugin")}getState(n){return n[this.key]}}const lm=Object.create(null);function YA(t){return t in lm?t+"$"+ ++lm[t]:(lm[t]=0,t+"$")}class pt{constructor(n="key"){this.key=YA(n)}get(n){return n.config.pluginsByKey[this.key]}getState(n){return n[this.key]}}const $h=(t,n)=>t.selection.empty?!1:(n&&n(t.tr.deleteSelection().scrollIntoView()),!0);function XA(t,n){let{$cursor:s}=t.selection;return!s||(n?!n.endOfTextblock("backward",t):s.parentOffset>0)?null:s}const o0=(t,n,s)=>{let r=XA(t,s);if(!r)return!1;let i=c0(r);if(!i){let l=r.blockRange(),c=l&&ba(l);return c==null?!1:(n&&n(t.tr.lift(l,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(aP(t,i,n,-1))return!0;if(r.parent.content.size==0&&(Ao(o,"end")||fe.isSelectable(o)))for(let l=r.depth;;l--){let c=Ih(t.doc,r.before(l),r.after(l),ee.empty);if(c&&c.slice.size<c.to-c.from){if(n){let d=t.tr.step(c);d.setSelection(Ao(o,"end")?he.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):fe.create(d.doc,i.pos-o.nodeSize)),n(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(n&&n(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},JA=(t,n,s)=>{let r=XA(t,s);if(!r)return!1;let i=c0(r);return i?ZA(t,i,n):!1},QA=(t,n,s)=>{let r=eP(t,s);if(!r)return!1;let i=f0(r);return i?ZA(t,i,n):!1};function ZA(t,n,s){let r=n.nodeBefore,i=r,o=n.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let l=n.nodeAfter,c=l,d=n.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let f=c.firstChild;if(!f)return!1;c=f}let u=Ih(t.doc,o,d,ee.empty);if(!u||u.from!=o||u instanceof xt&&u.slice.size>=d-o)return!1;if(s){let f=t.tr.step(u);f.setSelection(le.create(f.doc,o)),s(f.scrollIntoView())}return!0}function Ao(t,n,s=!1){for(let r=t;r;r=n=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(s&&r.childCount!=1)return!1}return!1}const l0=(t,n,s)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(s?!s.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=c0(r)}let l=o&&o.nodeBefore;return!l||!fe.isSelectable(l)?!1:(n&&n(t.tr.setSelection(fe.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function c0(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){if(t.index(n)>0)return t.doc.resolve(t.before(n+1));if(t.node(n).type.spec.isolating)break}return null}function eP(t,n){let{$cursor:s}=t.selection;return!s||(n?!n.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)?null:s}const d0=(t,n,s)=>{let r=eP(t,s);if(!r)return!1;let i=f0(r);if(!i)return!1;let o=i.nodeAfter;if(aP(t,i,n,1))return!0;if(r.parent.content.size==0&&(Ao(o,"start")||fe.isSelectable(o))){let l=Ih(t.doc,r.before(),r.after(),ee.empty);if(l&&l.slice.size<l.to-l.from){if(n){let c=t.tr.step(l);c.setSelection(Ao(o,"start")?he.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):fe.create(c.doc,c.mapping.map(i.pos))),n(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(n&&n(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},u0=(t,n,s)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(s?!s.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=f0(r)}let l=o&&o.nodeAfter;return!l||!fe.isSelectable(l)?!1:(n&&n(t.tr.setSelection(fe.create(t.doc,o.pos)).scrollIntoView()),!0)};function f0(t){if(!t.parent.type.spec.isolating)for(let n=t.depth-1;n>=0;n--){let s=t.node(n);if(t.index(n)+1<s.childCount)return t.doc.resolve(t.after(n+1));if(s.type.spec.isolating)break}return null}const tP=(t,n)=>{let s=t.selection,r=s instanceof fe,i;if(r){if(s.node.isTextblock||!Ys(t.doc,s.from))return!1;i=s.from}else if(i=el(t.doc,s.from,-1),i==null)return!1;if(n){let o=t.tr.join(i);r&&o.setSelection(fe.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),n(o.scrollIntoView())}return!0},nP=(t,n)=>{let s=t.selection,r;if(s instanceof fe){if(s.node.isTextblock||!Ys(t.doc,s.to))return!1;r=s.to}else if(r=el(t.doc,s.to,1),r==null)return!1;return n&&n(t.tr.join(r).scrollIntoView()),!0},sP=(t,n)=>{let{$from:s,$to:r}=t.selection,i=s.blockRange(r),o=i&&ba(i);return o==null?!1:(n&&n(t.tr.lift(i,o).scrollIntoView()),!0)},h0=(t,n)=>{let{$head:s,$anchor:r}=t.selection;return!s.parent.type.spec.code||!s.sameParent(r)?!1:(n&&n(t.tr.insertText(`
`).scrollIntoView()),!0)};function p0(t){for(let n=0;n<t.edgeCount;n++){let{type:s}=t.edge(n);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const rP=(t,n)=>{let{$head:s,$anchor:r}=t.selection;if(!s.parent.type.spec.code||!s.sameParent(r))return!1;let i=s.node(-1),o=s.indexAfter(-1),l=p0(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(n){let c=s.after(),d=t.tr.replaceWith(c,c,l.createAndFill());d.setSelection(he.near(d.doc.resolve(c),1)),n(d.scrollIntoView())}return!0},m0=(t,n)=>{let s=t.selection,{$from:r,$to:i}=s;if(s instanceof bn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=p0(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(n){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(l,o.createAndFill());c.setSelection(le.create(c.doc,l+1)),n(c.scrollIntoView())}return!0},g0=(t,n)=>{let{$cursor:s}=t.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let o=s.before();if(Rn(t.doc,o))return n&&n(t.tr.split(o).scrollIntoView()),!0}let r=s.blockRange(),i=r&&ba(r);return i==null?!1:(n&&n(t.tr.lift(r,i).scrollIntoView()),!0)};function CJ(t){return(n,s)=>{let{$from:r,$to:i}=n.selection;if(n.selection instanceof fe&&n.selection.node.isBlock)return!r.parentOffset||!Rn(n.doc,r.pos)?!1:(s&&s(n.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,c,d=!1,u=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){d=r.end(m)==r.pos+(r.depth-m),u=r.start(m)==r.pos-(r.depth-m),c=p0(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),o.unshift(d&&c?{type:c}:null),l=m;break}else{if(m==1)return!1;o.unshift(null)}let f=n.tr;(n.selection instanceof le||n.selection instanceof bn)&&f.deleteSelection();let h=f.mapping.map(r.pos),p=Rn(f.doc,h,o.length,o);if(p||(o[0]=c?{type:c}:null,p=Rn(f.doc,h,o.length,o)),!p)return!1;if(f.split(h,o.length,o),!d&&u&&r.node(l).type!=c){let m=f.mapping.map(r.before(l)),x=f.doc.resolve(m);c&&r.node(l-1).canReplaceWith(x.index(),x.index()+1,c)&&f.setNodeMarkup(f.mapping.map(r.before(l)),c)}return s&&s(f.scrollIntoView()),!0}}const _J=CJ(),iP=(t,n)=>{let{$from:s,to:r}=t.selection,i,o=s.sharedDepth(r);return o==0?!1:(i=s.before(o),n&&n(t.tr.setSelection(fe.create(t.doc,i))),!0)};function EJ(t,n,s){let r=n.nodeBefore,i=n.nodeAfter,o=n.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&n.parent.canReplace(o-1,o)?(s&&s(t.tr.delete(n.pos-r.nodeSize,n.pos).scrollIntoView()),!0):!n.parent.canReplace(o,o+1)||!(i.isTextblock||Ys(t.doc,n.pos))?!1:(s&&s(t.tr.join(n.pos).scrollIntoView()),!0)}function aP(t,n,s,r){let i=n.nodeBefore,o=n.nodeAfter,l,c,d=i.type.spec.isolating||o.type.spec.isolating;if(!d&&EJ(t,n,s))return!0;let u=!d&&n.parent.canReplace(n.index(),n.index()+1);if(u&&(l=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(l[0]||o.type).validEnd){if(s){let m=n.pos+o.nodeSize,x=U.empty;for(let b=l.length-1;b>=0;b--)x=U.from(l[b].create(null,x));x=U.from(i.copy(x));let y=t.tr.step(new bt(n.pos-1,m,n.pos,m,new ee(x,1,0),l.length,!0)),v=y.doc.resolve(m+2*l.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Ys(y.doc,v.pos)&&y.join(v.pos),s(y.scrollIntoView())}return!0}let f=o.type.spec.isolating||r>0&&d?null:he.findFrom(n,1),h=f&&f.$from.blockRange(f.$to),p=h&&ba(h);if(p!=null&&p>=n.depth)return s&&s(t.tr.lift(h,p).scrollIntoView()),!0;if(u&&Ao(o,"start",!0)&&Ao(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let y=o,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(s){let b=U.empty;for(let j=x.length-1;j>=0;j--)b=U.from(x[j].copy(b));let w=t.tr.step(new bt(n.pos-x.length,n.pos+o.nodeSize,n.pos+v,n.pos+o.nodeSize-v,new ee(b,x.length,0),0,!0));s(w.scrollIntoView())}return!0}}return!1}function oP(t){return function(n,s){let r=n.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(s&&s(n.tr.setSelection(le.create(n.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const lP=oP(-1),cP=oP(1);function dP(t,n=null){return function(s,r){let{$from:i,$to:o}=s.selection,l=i.blockRange(o),c=l&&i0(l,t,n);return c?(r&&r(s.tr.wrap(l,c).scrollIntoView()),!0):!1}}function Sf(t,n=null){return function(s,r){let i=!1;for(let o=0;o<s.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:c}}=s.selection.ranges[o];s.doc.nodesBetween(l,c,(d,u)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(t,n)))if(d.type==t)i=!0;else{let f=s.doc.resolve(u),h=f.index();i=f.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let o=s.tr;for(let l=0;l<s.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:d}}=s.selection.ranges[l];o.setBlockType(c,d,t,n)}r(o.scrollIntoView())}return!0}}function x0(...t){return function(n,s,r){for(let i=0;i<t.length;i++)if(t[i](n,s,r))return!0;return!1}}x0($h,o0,l0);x0($h,d0,u0);x0(h0,m0,g0,_J);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function uP(t,n=null){return function(s,r){let{$from:i,$to:o}=s.selection,l=i.blockRange(o);if(!l)return!1;let c=r?s.tr:null;return TJ(c,l,t,n)?(r&&r(c.scrollIntoView()),!0):!1}}function TJ(t,n,s,r=null){let i=!1,o=n,l=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(s)&&n.startIndex==0){if(n.$from.index(n.depth-1)==0)return!1;let d=l.resolve(n.start-2);o=new jf(d,d,n.depth),n.endIndex<n.parent.childCount&&(n=new jf(n.$from,l.resolve(n.$to.end(n.depth)),n.depth)),i=!0}let c=i0(o,s,r,n);return c?(t&&MJ(t,n,c,i,s),!0):!1}function MJ(t,n,s,r,i){let o=U.empty;for(let f=s.length-1;f>=0;f--)o=U.from(s[f].type.create(s[f].attrs,o));t.step(new bt(n.start-(r?2:0),n.end,n.start,n.end,new ee(o,0,0),s.length,!0));let l=0;for(let f=0;f<s.length;f++)s[f].type==i&&(l=f+1);let c=s.length-l,d=n.start+s.length-(r?2:0),u=n.parent;for(let f=n.startIndex,h=n.endIndex,p=!0;f<h;f++,p=!1)!p&&Rn(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=u.child(f).nodeSize;return t}function fP(t){return function(n,s){let{$from:r,$to:i}=n.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?s?r.node(o.depth-1).type==t?AJ(n,s,t,o):PJ(n,s,o):!0:!1}}function AJ(t,n,s,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new bt(o-1,l,o,l,new ee(U.from(s.create(null,r.parent.copy())),1,0),1,!0)),r=new jf(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=ba(r);if(c==null)return!1;i.lift(r,c);let d=i.doc.resolve(i.mapping.map(o,-1)-1);return Ys(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),n(i.scrollIntoView()),!0}function PJ(t,n,s){let r=t.tr,i=s.parent;for(let m=s.end,x=s.endIndex-1,y=s.startIndex;x>y;x--)m-=i.child(x).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(s.start),l=o.nodeAfter;if(r.mapping.map(s.end)!=s.start+o.nodeAfter.nodeSize)return!1;let c=s.startIndex==0,d=s.endIndex==i.childCount,u=o.node(-1),f=o.index(-1);if(!u.canReplace(f+(c?0:1),f+1,l.content.append(d?U.empty:U.from(i))))return!1;let h=o.pos,p=h+l.nodeSize;return r.step(new bt(h-(c?1:0),p+(d?1:0),h+1,p-1,new ee((c?U.empty:U.from(i.copy(U.empty))).append(d?U.empty:U.from(i.copy(U.empty))),c?0:1,d?0:1),c?0:1)),n(r.scrollIntoView()),!0}function hP(t){return function(n,s){let{$from:r,$to:i}=n.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,d=c.child(l-1);if(d.type!=t)return!1;if(s){let u=d.lastChild&&d.lastChild.type==c.type,f=U.from(u?t.create():null),h=new ee(U.from(t.create(null,U.from(c.type.create(null,f)))),u?3:1,0),p=o.start,m=o.end;s(n.tr.step(new bt(p-(u?3:1),m,p,m,h,1,!0)).scrollIntoView())}return!0}}const wa=function(t){for(var n=0;;n++)if(t=t.previousSibling,!t)return n},pP=function(t,n,s,r){return s&&(fN(t,n,s,r,-1)||fN(t,n,s,r,1))},RJ=/^(img|br|input|textarea|hr)$/i;function fN(t,n,s,r,i){for(var o;;){if(t==s&&n==r)return!0;if(n==(i<0?0:kf(t))){let l=t.parentNode;if(!l||l.nodeType!=1||y0(t)||RJ.test(t.nodeName)||t.contentEditable=="false")return!1;n=wa(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[n+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)n+=i;else return!1;else t=l,n=i<0?kf(t):0}else return!1}}function kf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function OJ(t,n,s){for(let r=n==0,i=n==kf(t);r||i;){if(t==s)return!0;let o=wa(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==kf(t)}}function y0(t){let n;for(let s=t;s&&!(n=s.pmViewDesc);s=s.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==t||n.contentDOM==t)}const mP=function(t){return t.focusNode&&pP(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function gP(t,n){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=t,s.key=s.code=n,s}const Hs=typeof navigator<"u"?navigator:null,hN=typeof document<"u"?document:null,bi=Hs&&Hs.userAgent||"",yx=/Edge\/(\d+)/.exec(bi),xP=/MSIE \d/.exec(bi),vx=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bi),Zc=!!(xP||vx||yx),yP=xP?document.documentMode:vx?+vx[1]:yx?+yx[1]:0,Fh=!Zc&&/gecko\/(\d+)/i.test(bi);Fh&&+(/Firefox\/(\d+)/.exec(bi)||[0,0])[1];const bx=!Zc&&/Chrome\/(\d+)/.exec(bi),wi=!!bx,vP=bx?+bx[1]:0,ja=!Zc&&!!Hs&&/Apple Computer/.test(Hs.vendor),v0=ja&&(/Mobile\/\w+/.test(bi)||!!Hs&&Hs.maxTouchPoints>2),Un=v0||(Hs?/Mac/.test(Hs.platform):!1),DJ=Hs?/Win/.test(Hs.platform):!1,ed=/Android \d/.test(bi),b0=!!hN&&"webkitFontSmoothing"in hN.documentElement.style,IJ=b0?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function LJ(t,n=null){let s=t.domSelectionRange(),r=t.state.doc;if(!s.focusNode)return null;let i=t.docView.nearestDesc(s.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(l<0)return null;let c=r.resolve(l),d,u;if(mP(s)){for(d=l;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&fe.isSelectable(h)&&i.parent&&!(h.isInline&&OJ(s.focusNode,s.focusOffset,i.dom))){let p=i.posBefore;u=new fe(l==p?c:r.resolve(p))}}else{if(s instanceof t.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let h=l,p=l;for(let m=0;m<s.rangeCount;m++){let x=s.getRangeAt(m);h=Math.min(h,t.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(h<0)return null;[d,l]=p==t.state.selection.anchor?[p,h]:[h,p],c=r.resolve(l)}else d=t.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(d<0)return null}let f=r.resolve(d);if(!u){let h=n=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;u=wP(t,f,c,h)}return u}function bP(t){return t.editable?t.hasFocus():BJ(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function w0(t,n=!1){let s=t.state.selection;if(zJ(t,s),!!bP(t)){if(!n&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&wi){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&pP(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)FJ(t);else{let{anchor:r,head:i}=s,o,l;pN&&!(s instanceof le)&&(s.$from.parent.inlineContent||(o=mN(t,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(l=mN(t,s.to))),t.docView.setSelection(r,i,t,n),pN&&(o&&gN(o),l&&gN(l)),s.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$J(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const pN=ja||wi&&vP<63;function mN(t,n){let{node:s,offset:r}=t.docView.domFromPos(n,0),i=r<s.childNodes.length?s.childNodes[r]:null,o=r?s.childNodes[r-1]:null;if(ja&&i&&i.contentEditable=="false")return cm(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return cm(i);if(o)return cm(o)}}function cm(t){return t.contentEditable="true",ja&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function gN(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function $J(t){let n=t.dom.ownerDocument;n.removeEventListener("selectionchange",t.input.hideSelectionGuard);let s=t.domSelectionRange(),r=s.anchorNode,i=s.anchorOffset;n.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(s.anchorNode!=r||s.anchorOffset!=i)&&(n.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!bP(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function FJ(t){let n=t.domSelection();if(!n)return;let s=t.cursorWrapper.dom,r=s.nodeName=="IMG";r?n.collapse(s.parentNode,wa(s)+1):n.collapse(s,0),!r&&!t.state.selection.visible&&Zc&&yP<=11&&(s.disabled=!0,s.disabled=!1)}function zJ(t,n){if(n instanceof fe){let s=t.docView.descAt(n.from);s!=t.lastSelectedViewDesc&&(xN(t),s&&s.selectNode(),t.lastSelectedViewDesc=s)}else xN(t)}function xN(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function wP(t,n,s,r){return t.someProp("createSelectionBetween",i=>i(t,n,s))||le.between(n,s,r)}function BJ(t){let n=t.domSelectionRange();if(!n.anchorNode)return!1;try{return t.dom.contains(n.anchorNode.nodeType==3?n.anchorNode.parentNode:n.anchorNode)&&(t.editable||t.dom.contains(n.focusNode.nodeType==3?n.focusNode.parentNode:n.focusNode))}catch{return!1}}function wx(t,n){let{$anchor:s,$head:r}=t.selection,i=n>0?s.max(r):s.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(n>0?i.after():i.before()):null:i;return o&&he.findFrom(o,n)}function Ar(t,n){return t.dispatch(t.state.tr.setSelection(n).scrollIntoView()),!0}function yN(t,n,s){let r=t.state.selection;if(r instanceof le)if(s.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:n<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(n<0?-1:1));return Ar(t,new le(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(n>0?"forward":"backward")){let i=wx(t.state,n);return i&&i instanceof fe?Ar(t,i):!1}else if(!(Un&&s.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:n<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let c=n<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?fe.isSelectable(o)?Ar(t,new fe(n<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):b0?Ar(t,new le(t.state.doc.resolve(n<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof fe&&r.node.isInline)return Ar(t,new le(n>0?r.$to:r.$from));{let i=wx(t.state,n);return i?Ar(t,i):!1}}}function Cf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gl(t,n){let s=t.pmViewDesc;return s&&s.size==0&&(n<0||t.nextSibling||t.nodeName!="BR")}function Ra(t,n){return n<0?VJ(t):HJ(t)}function VJ(t){let n=t.domSelectionRange(),s=n.focusNode,r=n.focusOffset;if(!s)return;let i,o,l=!1;for(Fh&&s.nodeType==1&&r<Cf(s)&&Gl(s.childNodes[r],-1)&&(l=!0);;)if(r>0){if(s.nodeType!=1)break;{let c=s.childNodes[r-1];if(Gl(c,-1))i=s,o=--r;else if(c.nodeType==3)s=c,r=s.nodeValue.length;else break}}else{if(jP(s))break;{let c=s.previousSibling;for(;c&&Gl(c,-1);)i=s.parentNode,o=wa(c),c=c.previousSibling;if(c)s=c,r=Cf(s);else{if(s=s.parentNode,s==t.dom)break;r=0}}}l?jx(t,s,r):i&&jx(t,i,o)}function HJ(t){let n=t.domSelectionRange(),s=n.focusNode,r=n.focusOffset;if(!s)return;let i=Cf(s),o,l;for(;;)if(r<i){if(s.nodeType!=1)break;let c=s.childNodes[r];if(Gl(c,1))o=s,l=++r;else break}else{if(jP(s))break;{let c=s.nextSibling;for(;c&&Gl(c,1);)o=c.parentNode,l=wa(c)+1,c=c.nextSibling;if(c)s=c,r=0,i=Cf(s);else{if(s=s.parentNode,s==t.dom)break;r=i=0}}}o&&jx(t,o,l)}function jP(t){let n=t.pmViewDesc;return n&&n.node&&n.node.isBlock}function UJ(t,n){for(;t&&n==t.childNodes.length&&!y0(t);)n=wa(t)+1,t=t.parentNode;for(;t&&n<t.childNodes.length;){let s=t.childNodes[n];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,n=0}}function WJ(t,n){for(;t&&!n&&!y0(t);)n=wa(t),t=t.parentNode;for(;t&&n;){let s=t.childNodes[n-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,n=t.childNodes.length}}function jx(t,n,s){if(n.nodeType!=3){let o,l;(l=UJ(n,s))?(n=l,s=0):(o=WJ(n,s))&&(n=o,s=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(mP(r)){let o=document.createRange();o.setEnd(n,s),o.setStart(n,s),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(n,s);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&w0(t)},50)}function vN(t,n){let s=t.state.doc.resolve(n);if(!(wi||DJ)&&s.parent.inlineContent){let i=t.coordsAtPos(n);if(n>s.start()){let o=t.coordsAtPos(n-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(n<s.end()){let o=t.coordsAtPos(n+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function bN(t,n,s){let r=t.state.selection;if(r instanceof le&&!r.empty||s.indexOf("s")>-1||Un&&s.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(n<0?"up":"down")){let l=wx(t.state,n);if(l&&l instanceof fe)return Ar(t,l)}if(!i.parent.inlineContent){let l=n<0?i:o,c=r instanceof bn?he.near(l,n):he.findFrom(l,n);return c?Ar(t,c):!1}return!1}function wN(t,n){if(!(t.state.selection instanceof le))return!0;let{$head:s,$anchor:r,empty:i}=t.state.selection;if(!s.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(n>0?"forward":"backward"))return!0;let o=!s.textOffset&&(n<0?s.nodeBefore:s.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return n<0?l.delete(s.pos-o.nodeSize,s.pos):l.delete(s.pos,s.pos+o.nodeSize),t.dispatch(l),!0}return!1}function jN(t,n,s){t.domObserver.stop(),n.contentEditable=s,t.domObserver.start()}function qJ(t){if(!ja||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:s}=t.domSelectionRange();if(n&&n.nodeType==1&&s==0&&n.firstChild&&n.firstChild.contentEditable=="false"){let r=n.firstChild;jN(t,r,"true"),setTimeout(()=>jN(t,r,"false"),20)}return!1}function KJ(t){let n="";return t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n}function GJ(t,n){let s=n.keyCode,r=KJ(n);if(s==8||Un&&s==72&&r=="c")return wN(t,-1)||Ra(t,-1);if(s==46&&!n.shiftKey||Un&&s==68&&r=="c")return wN(t,1)||Ra(t,1);if(s==13||s==27)return!0;if(s==37||Un&&s==66&&r=="c"){let i=s==37?vN(t,t.state.selection.from)=="ltr"?-1:1:-1;return yN(t,i,r)||Ra(t,i)}else if(s==39||Un&&s==70&&r=="c"){let i=s==39?vN(t,t.state.selection.from)=="ltr"?1:-1:1;return yN(t,i,r)||Ra(t,i)}else{if(s==38||Un&&s==80&&r=="c")return bN(t,-1,r)||Ra(t,-1);if(s==40||Un&&s==78&&r=="c")return qJ(t)||bN(t,1,r)||Ra(t,1);if(r==(Un?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function NP(t,n){t.someProp("transformCopied",m=>{n=m(n,t)});let s=[],{content:r,openStart:i,openEnd:o}=n;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let m=r.firstChild;s.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let l=t.someProp("clipboardSerializer")||Dh.fromSchema(t.state.schema),c=TP(),d=c.createElement("div");d.appendChild(l.serializeFragment(r,{document:c}));let u=d.firstChild,f,h=0;for(;u&&u.nodeType==1&&(f=EP[u.nodeName.toLowerCase()]);){for(let m=f.length-1;m>=0;m--){let x=c.createElement(f[m]);for(;d.firstChild;)x.appendChild(d.firstChild);d.appendChild(x),h++}u=d.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${h?` -${h}`:""} ${JSON.stringify(s)}`);let p=t.someProp("clipboardTextSerializer",m=>m(n,t))||n.content.textBetween(0,n.content.size,`

`);return{dom:d,text:p,slice:n}}function SP(t,n,s,r,i){let o=i.parent.type.spec.code,l,c;if(!s&&!n)return null;let d=!!n&&(r||o||!s);if(d){if(t.someProp("transformPastedText",p=>{n=p(n,o||r,t)}),o)return c=new ee(U.from(t.state.schema.text(n.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{c=p(c,t,!0)}),c;let h=t.someProp("clipboardTextParser",p=>p(n,i,r,t));if(h)c=h;else{let p=i.marks(),{schema:m}=t.state,x=Dh.fromSchema(m);l=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(y=>{let v=l.appendChild(document.createElement("p"));y&&v.appendChild(x.serializeNode(m.text(y,p)))})}}else t.someProp("transformPastedHTML",h=>{s=h(s,t)}),l=QJ(s),b0&&ZJ(l);let u=l&&l.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let h=+f[3];h>0;h--){let p=l.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;l=p}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||zs.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||f),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!YJ.test(p.parentNode.nodeName)?{ignore:!0}:null}})),f)c=eQ(NN(c,+f[1],+f[2]),f[4]);else if(c=ee.maxOpen(XJ(c.content,i),!0),c.openStart||c.openEnd){let h=0,p=0;for(let m=c.content.firstChild;h<c.openStart&&!m.type.spec.isolating;h++,m=m.firstChild);for(let m=c.content.lastChild;p<c.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);c=NN(c,h,p)}return t.someProp("transformPasted",h=>{c=h(c,t,d)}),c}const YJ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function XJ(t,n){if(t.childCount<2)return t;for(let s=n.depth;s>=0;s--){let i=n.node(s).contentMatchAt(n.index(s)),o,l=[];if(t.forEach(c=>{if(!l)return;let d=i.findWrapping(c.type),u;if(!d)return l=null;if(u=l.length&&o.length&&CP(d,o,c,l[l.length-1],0))l[l.length-1]=u;else{l.length&&(l[l.length-1]=_P(l[l.length-1],o.length));let f=kP(c,d);l.push(f),i=i.matchType(f.type),o=d}}),l)return U.from(l)}return t}function kP(t,n,s=0){for(let r=n.length-1;r>=s;r--)t=n[r].create(null,U.from(t));return t}function CP(t,n,s,r,i){if(i<t.length&&i<n.length&&t[i]==n[i]){let o=CP(t,n,s,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?s.type:t[i+1]))return r.copy(r.content.append(U.from(kP(s,t,i+1))))}}function _P(t,n){if(n==0)return t;let s=t.content.replaceChild(t.childCount-1,_P(t.lastChild,n-1)),r=t.contentMatchAt(t.childCount).fillBefore(U.empty,!0);return t.copy(s.append(r))}function Nx(t,n,s,r,i,o){let l=n<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(o=0),i<r-1&&(c=Nx(c,n,s,r,i+1,o)),i>=s&&(c=n<0?l.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(U.empty,!0))),t.replaceChild(n<0?0:t.childCount-1,l.copy(c))}function NN(t,n,s){return n<t.openStart&&(t=new ee(Nx(t.content,-1,n,t.openStart,0,t.openEnd),n,t.openEnd)),s<t.openEnd&&(t=new ee(Nx(t.content,1,s,t.openEnd,0,0),t.openStart,s)),t}const EP={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let SN=null;function TP(){return SN||(SN=document.implementation.createHTMLDocument("title"))}let dm=null;function JJ(t){let n=window.trustedTypes;return n?(dm||(dm=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),dm.createHTML(t)):t}function QJ(t){let n=/^(\s*<meta [^>]*>)*/.exec(t);n&&(t=t.slice(n[0].length));let s=TP().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&EP[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),s.innerHTML=JJ(t),i)for(let o=0;o<i.length;o++)s=s.querySelector(i[o])||s;return s}function ZJ(t){let n=t.querySelectorAll(wi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<n.length;s++){let r=n[s];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function eQ(t,n){if(!t.size)return t;let s=t.content.firstChild.type.schema,r;try{r=JSON.parse(n)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let c=r.length-2;c>=0;c-=2){let d=s.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;i=U.from(d.create(r[c+1],i)),o++,l++}return new ee(i,o,l)}const Ss={},In={};function Br(t,n){t.input.lastSelectionOrigin=n,t.input.lastSelectionTime=Date.now()}In.keydown=(t,n)=>{let s=n;if(t.input.shiftKey=s.keyCode==16||s.shiftKey,!AP(t,s)&&(t.input.lastKeyCode=s.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ed&&wi&&s.keyCode==13)))if(s.keyCode!=229&&t.domObserver.forceFlush(),v0&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,gP(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,s))||GJ(t,s)?s.preventDefault():Br(t,"key")};In.keyup=(t,n)=>{n.keyCode==16&&(t.input.shiftKey=!1)};In.keypress=(t,n)=>{let s=n;if(AP(t,s)||!s.charCode||s.ctrlKey&&!s.altKey||Un&&s.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,s))){s.preventDefault();return}let r=t.state.selection;if(!(r instanceof le)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(s.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),s.preventDefault()}};function zh(t){return{left:t.clientX,top:t.clientY}}function tQ(t,n){let s=n.x-t.clientX,r=n.y-t.clientY;return s*s+r*r<100}function j0(t,n,s,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(n,c=>l>o.depth?c(t,s,o.nodeAfter,o.before(l),i,!0):c(t,s,o.node(l),o.before(l),i,!1)))return!0;return!1}function fo(t,n,s){if(t.focused||t.focus(),t.state.selection.eq(n))return;let r=t.state.tr.setSelection(n);r.setMeta("pointer",!0),t.dispatch(r)}function nQ(t,n){if(n==-1)return!1;let s=t.state.doc.resolve(n),r=s.nodeAfter;return r&&r.isAtom&&fe.isSelectable(r)?(fo(t,new fe(s)),!0):!1}function sQ(t,n){if(n==-1)return!1;let s=t.state.selection,r,i;s instanceof fe&&(r=s.node);let o=t.state.doc.resolve(n);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(fe.isSelectable(c)){r&&s.$from.depth>0&&l>=s.$from.depth&&o.before(s.$from.depth+1)==s.$from.pos?i=o.before(s.$from.depth):i=o.before(l);break}}return i!=null?(fo(t,fe.create(t.state.doc,i)),!0):!1}function rQ(t,n,s,r,i){return j0(t,"handleClickOn",n,s,r)||t.someProp("handleClick",o=>o(t,n,r))||(i?sQ(t,s):nQ(t,s))}function iQ(t,n,s,r){return j0(t,"handleDoubleClickOn",n,s,r)||t.someProp("handleDoubleClick",i=>i(t,n,r))}function aQ(t,n,s,r){return j0(t,"handleTripleClickOn",n,s,r)||t.someProp("handleTripleClick",i=>i(t,n,r))||oQ(t,s,r)}function oQ(t,n,s){if(s.button!=0)return!1;let r=t.state.doc;if(n==-1)return r.inlineContent?(fo(t,le.create(r,0,r.content.size)),!0):!1;let i=r.resolve(n);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(l.inlineContent)fo(t,le.create(r,c+1,c+1+l.content.size));else if(fe.isSelectable(l))fo(t,fe.create(r,c));else continue;return!0}}function N0(t){return _f(t)}const MP=Un?"metaKey":"ctrlKey";Ss.mousedown=(t,n)=>{let s=n;t.input.shiftKey=s.shiftKey;let r=N0(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&tQ(s,t.input.lastClick)&&!s[MP]&&t.input.lastClick.button==s.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:s.clientX,y:s.clientY,type:o,button:s.button};let l=t.posAtCoords(zh(s));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new lQ(t,l,s,!!r)):(o=="doubleClick"?iQ:aQ)(t,l.pos,l.inside,s)?s.preventDefault():Br(t,"pointer"))};class lQ{constructor(n,s,r,i){this.view=n,this.pos=s,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=n.state.doc,this.selectNode=!!r[MP],this.allowDefault=r.shiftKey;let o,l;if(s.inside>-1)o=n.state.doc.nodeAt(s.inside),l=s.inside;else{let f=n.state.doc.resolve(s.pos);o=f.parent,l=f.depth?f.before():0}const c=i?null:r.target,d=c?n.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:u}=n.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof fe&&u.from<=l&&u.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fh&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),n.root.addEventListener("mouseup",this.up=this.up.bind(this)),n.root.addEventListener("mousemove",this.move=this.move.bind(this)),Br(n,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>w0(this.view)),this.view.input.mouseDown=null}up(n){if(this.done(),!this.view.dom.contains(n.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(zh(n))),this.updateAllowDefault(n),this.allowDefault||!s?Br(this.view,"pointer"):rQ(this.view,s.pos,s.inside,n,this.selectNode)?n.preventDefault():n.button==0&&(this.flushed||ja&&this.mightDrag&&!this.mightDrag.node.isAtom||wi&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(fo(this.view,he.near(this.view.state.doc.resolve(s.pos))),n.preventDefault()):Br(this.view,"pointer")}move(n){this.updateAllowDefault(n),Br(this.view,"pointer"),n.buttons==0&&this.done()}updateAllowDefault(n){!this.allowDefault&&(Math.abs(this.event.x-n.clientX)>4||Math.abs(this.event.y-n.clientY)>4)&&(this.allowDefault=!0)}}Ss.touchstart=t=>{t.input.lastTouch=Date.now(),N0(t),Br(t,"pointer")};Ss.touchmove=t=>{t.input.lastTouch=Date.now(),Br(t,"pointer")};Ss.contextmenu=t=>N0(t);function AP(t,n){return t.composing?!0:ja&&Math.abs(n.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const cQ=ed?5e3:-1;In.compositionstart=In.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:n}=t,s=n.selection.$to;if(n.selection instanceof le&&(n.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||s.marks(),_f(t,!0),t.markCursor=null;else if(_f(t,!n.selection.empty),Fh&&n.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}PP(t,cQ)};In.compositionend=(t,n)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=n.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,PP(t,20))};function PP(t,n){clearTimeout(t.input.composingTimeout),n>-1&&(t.input.composingTimeout=setTimeout(()=>_f(t),n))}function dQ(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=uQ());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function uQ(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function _f(t,n=!1){if(!(ed&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),dQ(t),n||t.docView&&t.docView.dirty){let s=LJ(t),r=t.state.selection;return s&&!s.eq(r)?t.dispatch(t.state.tr.setSelection(s)):(t.markCursor||n)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function fQ(t,n){if(!t.dom.parentNode)return;let s=t.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(n),s.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(n),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),t.focus()},50)}const Tc=Zc&&yP<15||v0&&IJ<604;Ss.copy=In.cut=(t,n)=>{let s=n,r=t.state.selection,i=s.type=="cut";if(r.empty)return;let o=Tc?null:s.clipboardData,l=r.content(),{dom:c,text:d}=NP(t,l);o?(s.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",d)):fQ(t,c),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hQ(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function pQ(t,n){if(!t.dom.parentNode)return;let s=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),s?Sx(t,r.value,null,i,n):Sx(t,r.textContent,r.innerHTML,i,n)},50)}function Sx(t,n,s,r,i){let o=SP(t,n,s,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,i,o||ee.empty)))return!0;if(!o)return!1;let l=hQ(o),c=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function RP(t){let n=t.getData("text/plain")||t.getData("Text");if(n)return n;let s=t.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}In.paste=(t,n)=>{let s=n;if(t.composing&&!ed)return;let r=Tc?null:s.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Sx(t,RP(r),r.getData("text/html"),i,s)?s.preventDefault():pQ(t,s)};class mQ{constructor(n,s,r){this.slice=n,this.move=s,this.node=r}}const gQ=Un?"altKey":"ctrlKey";function OP(t,n){let s=t.someProp("dragCopies",r=>!r(n));return s??!n[gQ]}Ss.dragstart=(t,n)=>{let s=n,r=t.input.mouseDown;if(r&&r.done(),!s.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(zh(s)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof fe?i.to-1:i.to))){if(r&&r.mightDrag)l=fe.create(t.state.doc,r.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let h=t.docView.nearestDesc(s.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(l=fe.create(t.state.doc,h.posBefore))}}let c=(l||t.state.selection).content(),{dom:d,text:u,slice:f}=NP(t,c);(!s.dataTransfer.files.length||!wi||vP>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(Tc?"Text":"text/html",d.innerHTML),s.dataTransfer.effectAllowed="copyMove",Tc||s.dataTransfer.setData("text/plain",u),t.dragging=new mQ(f,OP(t,s),l)};Ss.dragend=t=>{let n=t.dragging;window.setTimeout(()=>{t.dragging==n&&(t.dragging=null)},50)};In.dragover=In.dragenter=(t,n)=>n.preventDefault();In.drop=(t,n)=>{let s=n,r=t.dragging;if(t.dragging=null,!s.dataTransfer)return;let i=t.posAtCoords(zh(s));if(!i)return;let o=t.state.doc.resolve(i.pos),l=r&&r.slice;l?t.someProp("transformPasted",x=>{l=x(l,t,!1)}):l=SP(t,RP(s.dataTransfer),Tc?null:s.dataTransfer.getData("text/html"),!1,o);let c=!!(r&&OP(t,s));if(t.someProp("handleDrop",x=>x(t,s,l||ee.empty,c))){s.preventDefault();return}if(!l)return;s.preventDefault();let d=l?BA(t.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let u=t.state.tr;if(c){let{node:x}=r;x?x.replace(u):u.deleteSelection()}let f=u.mapping.map(d),h=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,p=u.doc;if(h?u.replaceRangeWith(f,f,l.content.firstChild):u.replaceRange(f,f,l),u.doc.eq(p))return;let m=u.doc.resolve(f);if(h&&fe.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild))u.setSelection(new fe(m));else{let x=u.mapping.map(d);u.mapping.maps[u.mapping.maps.length-1].forEach((y,v,b,w)=>x=w),u.setSelection(wP(t,m,u.doc.resolve(x)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ss.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&w0(t)},20))};Ss.blur=(t,n)=>{let s=n;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),s.relatedTarget&&t.dom.contains(s.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ss.beforeinput=(t,n)=>{if(wi&&ed&&n.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,gP(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in In)Ss[t]=In[t];function Mc(t,n){if(t==n)return!0;for(let s in t)if(t[s]!==n[s])return!1;for(let s in n)if(!(s in t))return!1;return!0}class Ef{constructor(n,s){this.toDOM=n,this.spec=s||Gi,this.side=this.spec.side||0}map(n,s,r,i){let{pos:o,deleted:l}=n.mapResult(s.from+i,this.side<0?-1:1);return l?null:new Mn(o-r,o-r,this)}valid(){return!0}eq(n){return this==n||n instanceof Ef&&(this.spec.key&&this.spec.key==n.spec.key||this.toDOM==n.toDOM&&Mc(this.spec,n.spec))}destroy(n){this.spec.destroy&&this.spec.destroy(n)}}class ei{constructor(n,s){this.attrs=n,this.spec=s||Gi}map(n,s,r,i){let o=n.map(s.from+i,this.spec.inclusiveStart?-1:1)-r,l=n.map(s.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new Mn(o,l,this)}valid(n,s){return s.from<s.to}eq(n){return this==n||n instanceof ei&&Mc(this.attrs,n.attrs)&&Mc(this.spec,n.spec)}static is(n){return n.type instanceof ei}destroy(){}}class S0{constructor(n,s){this.attrs=n,this.spec=s||Gi}map(n,s,r,i){let o=n.mapResult(s.from+i,1);if(o.deleted)return null;let l=n.mapResult(s.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Mn(o.pos-r,l.pos-r,this)}valid(n,s){let{index:r,offset:i}=n.content.findIndex(s.from),o;return i==s.from&&!(o=n.child(r)).isText&&i+o.nodeSize==s.to}eq(n){return this==n||n instanceof S0&&Mc(this.attrs,n.attrs)&&Mc(this.spec,n.spec)}destroy(){}}class Mn{constructor(n,s,r){this.from=n,this.to=s,this.type=r}copy(n,s){return new Mn(n,s,this.type)}eq(n,s=0){return this.type.eq(n.type)&&this.from+s==n.from&&this.to+s==n.to}map(n,s,r){return this.type.map(n,this,s,r)}static widget(n,s,r){return new Mn(n,n,new Ef(s,r))}static inline(n,s,r,i){return new Mn(n,s,new ei(r,i))}static node(n,s,r,i){return new Mn(n,s,new S0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ei}get widget(){return this.type instanceof Ef}}const Da=[],Gi={};class rt{constructor(n,s){this.local=n.length?n:Da,this.children=s.length?s:Da}static create(n,s){return s.length?Tf(s,n,0,Gi):en}find(n,s,r){let i=[];return this.findInner(n??0,s??1e9,i,0,r),i}findInner(n,s,r,i,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=s&&c.to>=n&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<s&&this.children[l+1]>n){let c=this.children[l]+1;this.children[l+2].findInner(n-c,s-c,r,i+c,o)}}map(n,s,r){return this==en||n.maps.length==0?this:this.mapInner(n,s,0,0,r||Gi)}mapInner(n,s,r,i,o){let l;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(n,r,i);d&&d.type.valid(s,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?xQ(this.children,l||[],n,s,r,i,o):l?new rt(l.sort(Yi),Da):en}add(n,s){return s.length?this==en?rt.create(n,s):this.addInner(n,s,0):this}addInner(n,s,r){let i,o=0;n.forEach((c,d)=>{let u=d+r,f;if(f=IP(s,c,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<d;)o+=3;i[o]==d?i[o+2]=i[o+2].addInner(c,f,u+1):i.splice(o,0,d,d+c.nodeSize,Tf(f,c,u+1,Gi)),o+=3}});let l=DP(o?LP(s):s,-r);for(let c=0;c<l.length;c++)l[c].type.valid(n,l[c])||l.splice(c--,1);return new rt(l.length?this.local.concat(l).sort(Yi):this.local,i||this.children)}remove(n){return n.length==0||this==en?this:this.removeInner(n,0)}removeInner(n,s){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,c=r[o]+s,d=r[o+1]+s;for(let f=0,h;f<n.length;f++)(h=n[f])&&h.from>c&&h.to<d&&(n[f]=null,(l||(l=[])).push(h));if(!l)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(l,c+1);u!=en?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<n.length;o++)if(l=n[o])for(let c=0;c<i.length;c++)i[c].eq(l,s)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new rt(i,r):en}forChild(n,s){if(this==en)return this;if(s.isLeaf)return rt.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=n){this.children[c]==n&&(r=this.children[c+2]);break}let o=n+1,l=o+s.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<l&&d.to>o&&d.type instanceof ei){let u=Math.max(o,d.from)-o,f=Math.min(l,d.to)-o;u<f&&(i||(i=[])).push(d.copy(u,f))}}if(i){let c=new rt(i.sort(Yi),Da);return r?new Pi([c,r]):c}return r||en}eq(n){if(this==n)return!0;if(!(n instanceof rt)||this.local.length!=n.local.length||this.children.length!=n.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(n.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=n.children[s]||this.children[s+1]!=n.children[s+1]||!this.children[s+2].eq(n.children[s+2]))return!1;return!0}locals(n){return k0(this.localsInner(n))}localsInner(n){if(this==en)return Da;if(n.inlineContent||!this.local.some(ei.is))return this.local;let s=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ei||s.push(this.local[r]);return s}forEachSet(n){n(this)}}rt.empty=new rt([],[]);rt.removeOverlap=k0;const en=rt.empty;class Pi{constructor(n){this.members=n}map(n,s){const r=this.members.map(i=>i.map(n,s,Gi));return Pi.from(r)}forChild(n,s){if(s.isLeaf)return rt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(n,s);o!=en&&(o instanceof Pi?r=r.concat(o.members):r.push(o))}return Pi.from(r)}eq(n){if(!(n instanceof Pi)||n.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(n.members[s]))return!1;return!0}locals(n){let s,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(n);if(o.length)if(!s)s=o;else{r&&(s=s.slice(),r=!1);for(let l=0;l<o.length;l++)s.push(o[l])}}return s?k0(r?s:s.sort(Yi)):Da}static from(n){switch(n.length){case 0:return en;case 1:return n[0];default:return new Pi(n.every(s=>s instanceof rt)?n:n.reduce((s,r)=>s.concat(r instanceof rt?r:r.members),[]))}}forEachSet(n){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(n)}}function xQ(t,n,s,r,i,o,l){let c=t.slice();for(let u=0,f=o;u<s.maps.length;u++){let h=0;s.maps[u].forEach((p,m,x,y)=>{let v=y-x-(m-p);for(let b=0;b<c.length;b+=3){let w=c[b+1];if(w<0||p>w+f-h)continue;let j=c[b]+f-h;m>=j?c[b+1]=p<=j?-2:-1:p>=f&&v&&(c[b]+=v,c[b+1]+=v)}h+=v}),f=s.maps[u].map(f,-1)}let d=!1;for(let u=0;u<c.length;u+=3)if(c[u+1]<0){if(c[u+1]==-2){d=!0,c[u+1]=-1;continue}let f=s.map(t[u]+o),h=f-i;if(h<0||h>=r.content.size){d=!0;continue}let p=s.map(t[u+1]+o,-1),m=p-i,{index:x,offset:y}=r.content.findIndex(h),v=r.maybeChild(x);if(v&&y==h&&y+v.nodeSize==m){let b=c[u+2].mapInner(s,v,f+1,t[u]+o+1,l);b!=en?(c[u]=h,c[u+1]=m,c[u+2]=b):(c[u+1]=-2,d=!0)}else d=!0}if(d){let u=yQ(c,t,n,s,i,o,l),f=Tf(u,r,0,l);n=f.local;for(let h=0;h<c.length;h+=3)c[h+1]<0&&(c.splice(h,3),h-=3);for(let h=0,p=0;h<f.children.length;h+=3){let m=f.children[h];for(;p<c.length&&c[p]<m;)p+=3;c.splice(p,0,f.children[h],f.children[h+1],f.children[h+2])}}return new rt(n.sort(Yi),c)}function DP(t,n){if(!n||!t.length)return t;let s=[];for(let r=0;r<t.length;r++){let i=t[r];s.push(new Mn(i.from+n,i.to+n,i.type))}return s}function yQ(t,n,s,r,i,o,l){function c(d,u){for(let f=0;f<d.local.length;f++){let h=d.local[f].map(r,i,u);h?s.push(h):l.onRemove&&l.onRemove(d.local[f].spec)}for(let f=0;f<d.children.length;f+=3)c(d.children[f+2],d.children[f]+u+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],n[d]+o+1);return s}function IP(t,n,s){if(n.isLeaf)return null;let r=s+n.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>s&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function LP(t){let n=[];for(let s=0;s<t.length;s++)t[s]!=null&&n.push(t[s]);return n}function Tf(t,n,s,r){let i=[],o=!1;n.forEach((c,d)=>{let u=IP(t,c,d+s);if(u){o=!0;let f=Tf(u,c,s+d+1,r);f!=en&&i.push(d,d+c.nodeSize,f)}});let l=DP(o?LP(t):t,-s).sort(Yi);for(let c=0;c<l.length;c++)l[c].type.valid(n,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||i.length?new rt(l,i):en}function Yi(t,n){return t.from-n.from||t.to-n.to}function k0(t){let n=t;for(let s=0;s<n.length-1;s++){let r=n[s];if(r.from!=r.to)for(let i=s+1;i<n.length;i++){let o=n[i];if(o.from==r.from){o.to!=r.to&&(n==t&&(n=t.slice()),n[i]=o.copy(o.from,r.to),kN(n,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(n==t&&(n=t.slice()),n[s]=r.copy(r.from,o.from),kN(n,i,r.copy(o.from,r.to)));break}}}return n}function kN(t,n,s){for(;n<t.length&&Yi(s,t[n])>0;)n++;t.splice(n,0,s)}var fi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),bQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pt=0;Pt<10;Pt++)fi[48+Pt]=fi[96+Pt]=String(Pt);for(var Pt=1;Pt<=24;Pt++)fi[Pt+111]="F"+Pt;for(var Pt=65;Pt<=90;Pt++)fi[Pt]=String.fromCharCode(Pt+32),Mf[Pt]=String.fromCharCode(Pt);for(var um in fi)Mf.hasOwnProperty(um)||(Mf[um]=fi[um]);function wQ(t){var n=vQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||bQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!n&&t.key||(t.shiftKey?Mf:fi)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const jQ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),NQ=typeof navigator<"u"&&/Win/.test(navigator.platform);function SQ(t){let n=t.split(/-(?!$)/),s=n[n.length-1];s=="Space"&&(s=" ");let r,i,o,l;for(let c=0;c<n.length-1;c++){let d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))jQ?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(s="Alt-"+s),i&&(s="Ctrl-"+s),l&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function kQ(t){let n=Object.create(null);for(let s in t)n[SQ(s)]=t[s];return n}function fm(t,n,s=!0){return n.altKey&&(t="Alt-"+t),n.ctrlKey&&(t="Ctrl-"+t),n.metaKey&&(t="Meta-"+t),s&&n.shiftKey&&(t="Shift-"+t),t}function $P(t){let n=kQ(t);return function(s,r){let i=wQ(r),o,l=n[fm(i,r)];if(l&&l(s.state,s.dispatch,s))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=n[fm(i,r,!1)];if(c&&c(s.state,s.dispatch,s))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(NQ&&r.ctrlKey&&r.altKey)&&(o=fi[r.keyCode])&&o!=i){let c=n[fm(o,r)];if(c&&c(s.state,s.dispatch,s))return!0}}return!1}}var CQ=Object.defineProperty,C0=(t,n)=>{for(var s in n)CQ(t,s,{get:n[s],enumerable:!0})};function FP(t){const{state:n,transaction:s}=t;let{selection:r}=s,{doc:i}=s,{storedMarks:o}=s;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=s.selection,i=s.doc,o=s.storedMarks,s}}}var _Q=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:s,state:r}=this,{view:i}=s,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>{const h=d(...f)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,s=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,c=[],d=!!n,u=n||o.tr,f=()=>(!d&&s&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(u),c.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...y)=>{const v=this.buildProps(u,s),b=m(...y)(v);return c.push(b),h}])),run:f};return h}createCan(n){const{rawCommands:s,state:r}=this,i=!1,o=n||r.tr,l=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(s).map(([d,u])=>[d,(...f)=>u(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(n,s=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,c={tr:n,editor:i,view:l,state:FP({state:o,transaction:n}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(n,s),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(r).map(([d,u])=>[d,(...f)=>u(...f)(c)]))}};return c}},zP={};C0(zP,{blur:()=>EQ,clearContent:()=>TQ,clearNodes:()=>MQ,command:()=>AQ,createParagraphNear:()=>PQ,cut:()=>RQ,deleteCurrentNode:()=>OQ,deleteNode:()=>DQ,deleteRange:()=>IQ,deleteSelection:()=>LQ,enter:()=>$Q,exitCode:()=>FQ,extendMarkRange:()=>BQ,first:()=>VQ,focus:()=>WQ,forEach:()=>qQ,insertContent:()=>KQ,insertContentAt:()=>XQ,joinBackward:()=>ZQ,joinDown:()=>QQ,joinForward:()=>eZ,joinItemBackward:()=>tZ,joinItemForward:()=>nZ,joinTextblockBackward:()=>sZ,joinTextblockForward:()=>rZ,joinUp:()=>JQ,keyboardShortcut:()=>aZ,lift:()=>oZ,liftEmptyBlock:()=>lZ,liftListItem:()=>cZ,newlineInCode:()=>dZ,resetAttributes:()=>uZ,scrollIntoView:()=>fZ,selectAll:()=>hZ,selectNodeBackward:()=>pZ,selectNodeForward:()=>mZ,selectParentNode:()=>gZ,selectTextblockEnd:()=>xZ,selectTextblockStart:()=>yZ,setContent:()=>bZ,setMark:()=>RZ,setMeta:()=>OZ,setNode:()=>DZ,setNodeSelection:()=>IZ,setTextSelection:()=>LZ,sinkListItem:()=>$Z,splitBlock:()=>FZ,splitListItem:()=>zZ,toggleList:()=>BZ,toggleMark:()=>VZ,toggleNode:()=>HZ,toggleWrap:()=>UZ,undoInputRule:()=>WZ,unsetAllMarks:()=>qZ,unsetMark:()=>KZ,updateAttributes:()=>GZ,wrapIn:()=>YZ,wrapInList:()=>XZ});var EQ=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var s;t.isDestroyed||(n.dom.blur(),(s=window==null?void 0:window.getSelection())==null||s.removeAllRanges())}),!0),TQ=(t=!0)=>({commands:n})=>n.setContent("",{emitUpdate:t}),MQ=()=>({state:t,tr:n,dispatch:s})=>{const{selection:r}=n,{ranges:i}=r;return s&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:u,mapping:f}=n,h=u.resolve(f.map(d)),p=u.resolve(f.map(d+c.nodeSize)),m=h.blockRange(p);if(!m)return;const x=ba(m);if(c.type.isTextblock){const{defaultType:y}=h.parent.contentMatchAt(h.index());n.setNodeMarkup(m.start,y)}(x||x===0)&&n.lift(m,x)})}),!0},AQ=t=>n=>t(n),PQ=()=>({state:t,dispatch:n})=>m0(t,n),RQ=(t,n)=>({editor:s,tr:r})=>{const{state:i}=s,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(n);return r.insert(l,o.content),r.setSelection(new le(r.doc.resolve(Math.max(l-1,0)))),!0},OQ=()=>({tr:t,dispatch:n})=>{const{selection:s}=t,r=s.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(n){const c=i.before(o),d=i.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1};function Xt(t,n){if(typeof t=="string"){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}var DQ=t=>({tr:n,state:s,dispatch:r})=>{const i=Xt(t,s.schema),o=n.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const d=o.before(l),u=o.after(l);n.delete(d,u).scrollIntoView()}return!0}return!1},IQ=t=>({tr:n,dispatch:s})=>{const{from:r,to:i}=t;return s&&n.delete(r,i),!0},LQ=()=>({state:t,dispatch:n})=>$h(t,n),$Q=()=>({commands:t})=>t.keyboardShortcut("Enter"),FQ=()=>({state:t,dispatch:n})=>rP(t,n);function zQ(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Af(t,n,s={strict:!0}){const r=Object.keys(n);return r.length?r.every(i=>s.strict?n[i]===t[i]:zQ(n[i])?n[i].test(t[i]):n[i]===t[i]):!0}function BP(t,n,s={}){return t.find(r=>r.type===n&&Af(Object.fromEntries(Object.keys(s).map(i=>[i,r.attrs[i]])),s))}function CN(t,n,s={}){return!!BP(t,n,s)}function _0(t,n,s){var r;if(!t||!n)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===n))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===n)||(s=s||((r=i.node.marks[0])==null?void 0:r.attrs),!BP([...i.node.marks],n,s)))return;let l=i.index,c=t.start()+i.offset,d=l+1,u=c+i.node.nodeSize;for(;l>0&&CN([...t.parent.child(l-1).marks],n,s);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&CN([...t.parent.child(d).marks],n,s);)u+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:u}}function ji(t,n){if(typeof t=="string"){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}var BQ=(t,n={})=>({tr:s,state:r,dispatch:i})=>{const o=ji(t,r.schema),{doc:l,selection:c}=s,{$from:d,from:u,to:f}=c;if(i){const h=_0(d,o,n);if(h&&h.from<=u&&h.to>=f){const p=le.create(l,h.from,h.to);s.setSelection(p)}}return!0},VQ=t=>n=>{const s=typeof t=="function"?t(n):t;for(let r=0;r<s.length;r+=1)if(s[r](n))return!0;return!1};function VP(t){return t instanceof le}function Fi(t=0,n=0,s=0){return Math.min(Math.max(t,n),s)}function HQ(t,n=null){if(!n)return null;const s=he.atStart(t),r=he.atEnd(t);if(n==="start"||n===!0)return s;if(n==="end")return r;const i=s.from,o=r.to;return n==="all"?le.create(t,Fi(0,i,o),Fi(t.content.size,i,o)):le.create(t,Fi(n,i,o),Fi(n,i,o))}function UQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function E0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var WQ=(t=null,n={})=>({editor:s,view:r,tr:i,dispatch:o})=>{n={scrollIntoView:!0,...n};const l=()=>{(E0()||UQ())&&r.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(r.focus(),n!=null&&n.scrollIntoView&&s.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!VP(s.state.selection))return l(),!0;const c=HQ(i.doc,t)||s.state.selection,d=s.state.selection.eq(c);return o&&(d||i.setSelection(c),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},qQ=(t,n)=>s=>t.every((r,i)=>n(r,{...s,index:i})),KQ=(t,n)=>({tr:s,commands:r})=>r.insertContentAt({from:s.selection.from,to:s.selection.to},t,n),HP=t=>{const n=t.childNodes;for(let s=n.length-1;s>=0;s-=1){const r=n[s];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&HP(r)}return t};function Hd(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const n=`<body>${t}</body>`,s=new window.DOMParser().parseFromString(n,"text/html").body;return HP(s)}function Ac(t,n,s){if(t instanceof Zr||t instanceof U)return t;s={slice:!0,parseOptions:{},...s};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return U.fromArray(t.map(c=>n.nodeFromJSON(c)));const l=n.nodeFromJSON(t);return s.errorOnInvalidContent&&l.check(),l}catch(o){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Ac("",n,s)}if(i){if(s.errorOnInvalidContent){let l=!1,c="";const d=new MA({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(l=!0,c=typeof u=="string"?u:u.outerHTML,null)}]}})});if(s.slice?zs.fromSchema(d).parseSlice(Hd(t),s.parseOptions):zs.fromSchema(d).parse(Hd(t),s.parseOptions),s.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=zs.fromSchema(n);return s.slice?o.parseSlice(Hd(t),s.parseOptions).content:o.parse(Hd(t),s.parseOptions)}return Ac("",n,s)}function GQ(t,n,s){const r=t.steps.length-1;if(r<n)return;const i=t.steps[r];if(!(i instanceof xt||i instanceof bt))return;const o=t.mapping.maps[r];let l=0;o.forEach((c,d,u,f)=>{l===0&&(l=f)}),t.setSelection(he.near(t.doc.resolve(l),s))}var YQ=t=>!("type"in t),XQ=(t,n,s)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){s={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let c;const d=v=>{o.emit("contentError",{editor:o,error:v,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...s.parseOptions};if(!s.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Ac(n,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){d(v)}try{c=Ac(n,o.schema,{parseOptions:u,errorOnInvalidContent:(l=s.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(v){return d(v),!1}let{from:f,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,m=!0;if((YQ(c)?c:[c]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,m=m?v.isBlock:!1}),f===h&&m){const{parent:v}=r.doc.resolve(f);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(f-=1,h+=1)}let y;if(p){if(Array.isArray(n))y=n.map(v=>v.text||"").join("");else if(n instanceof U){let v="";n.forEach(b=>{b.text&&(v+=b.text)}),y=v}else typeof n=="object"&&n&&n.text?y=n.text:y=n;r.insertText(y,f,h)}else{y=c;const v=r.doc.resolve(f),b=v.node(),w=v.parentOffset===0,j=b.isText||b.isTextblock,N=b.content.size>0;w&&j&&N&&(f=Math.max(0,f-1)),r.replaceWith(f,h,y)}s.updateSelection&&GQ(r,r.steps.length-1,-1),s.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:y}),s.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:y})}return!0},JQ=()=>({state:t,dispatch:n})=>tP(t,n),QQ=()=>({state:t,dispatch:n})=>nP(t,n),ZQ=()=>({state:t,dispatch:n})=>o0(t,n),eZ=()=>({state:t,dispatch:n})=>d0(t,n),tZ=()=>({state:t,dispatch:n,tr:s})=>{try{const r=el(t.doc,t.selection.$from.pos,-1);return r==null?!1:(s.join(r,2),n&&n(s),!0)}catch{return!1}},nZ=()=>({state:t,dispatch:n,tr:s})=>{try{const r=el(t.doc,t.selection.$from.pos,1);return r==null?!1:(s.join(r,2),n&&n(s),!0)}catch{return!1}},sZ=()=>({state:t,dispatch:n})=>JA(t,n),rZ=()=>({state:t,dispatch:n})=>QA(t,n);function UP(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iZ(t){const n=t.split(/-(?!$)/);let s=n[n.length-1];s==="Space"&&(s=" ");let r,i,o,l;for(let c=0;c<n.length-1;c+=1){const d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))E0()||UP()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(s=`Alt-${s}`),i&&(s=`Ctrl-${s}`),l&&(s=`Meta-${s}`),o&&(s=`Shift-${s}`),s}var aZ=t=>({editor:n,view:s,tr:r,dispatch:i})=>{const o=iZ(t).split(/-(?!$)/),l=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=n.captureTransaction(()=>{s.someProp("handleKeyDown",u=>u(s,c))});return d==null||d.steps.forEach(u=>{const f=u.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function T0(t,n,s={}){const{from:r,to:i,empty:o}=t.selection,l=n?Xt(n,t.schema):null,c=[];t.doc.nodesBetween(r,i,(h,p)=>{if(h.isText)return;const m=Math.max(r,p),x=Math.min(i,p+h.nodeSize);c.push({node:h,from:m,to:x})});const d=i-r,u=c.filter(h=>l?l.name===h.node.type.name:!0).filter(h=>Af(h.node.attrs,s,{strict:!1}));return o?!!u.length:u.reduce((h,p)=>h+p.to-p.from,0)>=d}var oZ=(t,n={})=>({state:s,dispatch:r})=>{const i=Xt(t,s.schema);return T0(s,i,n)?sP(s,r):!1},lZ=()=>({state:t,dispatch:n})=>g0(t,n),cZ=t=>({state:n,dispatch:s})=>{const r=Xt(t,n.schema);return fP(r)(n,s)},dZ=()=>({state:t,dispatch:n})=>h0(t,n);function WP(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function _N(t,n){const s=typeof n=="string"?[n]:n;return Object.keys(t).reduce((r,i)=>(s.includes(i)||(r[i]=t[i]),r),{})}var uZ=(t,n)=>({tr:s,state:r,dispatch:i})=>{let o=null,l=null;const c=WP(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(o=Xt(t,r.schema)),c==="mark"&&(l=ji(t,r.schema)),i&&s.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{o&&o===u.type&&s.setNodeMarkup(f,void 0,_N(u.attrs,n)),l&&u.marks.length&&u.marks.forEach(h=>{l===h.type&&s.addMark(f,f+u.nodeSize,l.create(_N(h.attrs,n)))})})}),!0):!1},fZ=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),hZ=()=>({tr:t,dispatch:n})=>{if(n){const s=new bn(t.doc);t.setSelection(s)}return!0},pZ=()=>({state:t,dispatch:n})=>l0(t,n),mZ=()=>({state:t,dispatch:n})=>u0(t,n),gZ=()=>({state:t,dispatch:n})=>iP(t,n),xZ=()=>({state:t,dispatch:n})=>cP(t,n),yZ=()=>({state:t,dispatch:n})=>lP(t,n);function vZ(t,n,s={},r={}){return Ac(t,n,{slice:!1,parseOptions:s,errorOnInvalidContent:r.errorOnInvalidContent})}var bZ=(t,{errorOnInvalidContent:n,emitUpdate:s=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:c})=>{const{doc:d}=o;if(r.preserveWhitespace!=="full"){const u=vZ(t,i.schema,r,{errorOnInvalidContent:n??i.options.enableContentCheck});return l&&o.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!s),!0}return l&&o.setMeta("preventUpdate",!s),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:n??i.options.enableContentCheck})};function wZ(t,n){const s=ji(n,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===s.name);return c?{...c.attrs}:{}}function jZ(t,n){const s=new qA(t);return n.forEach(r=>{r.steps.forEach(i=>{s.step(i)})}),s}function NZ(t){for(let n=0;n<t.edgeCount;n+=1){const{type:s}=t.edge(n);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function qP(t,n){for(let s=t.depth;s>0;s-=1){const r=t.node(s);if(n(r))return{pos:s>0?t.before(s):0,start:t.start(s),depth:s,node:r}}}function M0(t){return n=>qP(n.$from,t)}function Po(t,n,s){return t.config[n]===void 0&&t.parent?Po(t.parent,n,s):typeof t.config[n]=="function"?t.config[n].bind({...s,parent:t.parent?Po(t.parent,n,s):null}):t.config[n]}function SZ(t){return typeof t=="function"}function da(t,n=void 0,...s){return SZ(t)?n?t.bind(n)(...s):t(...s):t}function kZ(t){const n=t.filter(i=>i.type==="extension"),s=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:n,nodeExtensions:s,markExtensions:r}}function Ni(...t){return t.filter(n=>!!n).reduce((n,s)=>{const r={...n};return Object.entries(s).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],d=r[i]?r[i].split(" "):[],u=c.filter(f=>!d.includes(f));r[i]=[...d,...u].join(" ")}else if(i==="style"){const c=o?o.split(";").map(f=>f.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;d.forEach(f=>{const[h,p]=f.split(":").map(m=>m.trim());u.set(h,p)}),c.forEach(f=>{const[h,p]=f.split(":").map(m=>m.trim());u.set(h,p)}),r[i]=Array.from(u.entries()).map(([f,h])=>`${f}: ${h}`).join("; ")}else r[i]=o}),r},{})}function CZ(t,n,s){const{from:r,to:i}=n,{blockSeparator:o=`

`,textSerializers:l={}}=s||{};let c="";return t.nodesBetween(r,i,(d,u,f,h)=>{var p;d.isBlock&&u>r&&(c+=o);const m=l==null?void 0:l[d.type.name];if(m)return f&&(c+=m({node:d,pos:u,parent:f,index:h,range:n})),!1;d.isText&&(c+=(p=d==null?void 0:d.text)==null?void 0:p.slice(Math.max(r,u)-u,i-u))}),c}function _Z(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,s])=>[n,s.spec.toText]))}function EZ(t,n=JSON.stringify){const s={};return t.filter(r=>{const i=n(r);return Object.prototype.hasOwnProperty.call(s,i)?!1:s[i]=!0})}function TZ(t){const n=EZ(t);return n.length===1?n:n.filter((s,r)=>!n.filter((o,l)=>l!==r).some(o=>s.oldRange.from>=o.oldRange.from&&s.oldRange.to<=o.oldRange.to&&s.newRange.from>=o.newRange.from&&s.newRange.to<=o.newRange.to))}function MZ(t){const{mapping:n,steps:s}=t,r=[];return n.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((c,d)=>{l.push({from:c,to:d})});else{const{from:c,to:d}=s[o];if(c===void 0||d===void 0)return;l.push({from:c,to:d})}l.forEach(({from:c,to:d})=>{const u=n.slice(o).map(c,-1),f=n.slice(o).map(d),h=n.invert().map(u,-1),p=n.invert().map(f);r.push({oldRange:{from:h,to:p},newRange:{from:u,to:f}})})}),TZ(r)}function KP(t,n,s){const r=[];return t===n?s.resolve(t).marks().forEach(i=>{const o=s.resolve(t),l=_0(o,i.type);l&&r.push({mark:i,...l})}):s.nodesBetween(t,n,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}function Nu(t,n,s){return Object.fromEntries(Object.entries(s).filter(([r])=>{const i=t.find(o=>o.type===n&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function AZ(t,n,s={}){const{empty:r,ranges:i}=t.selection,o=n?ji(n,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>o?o.name===h.type.name:!0).find(h=>Af(h.attrs,s,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:h,$to:p})=>{const m=h.pos,x=p.pos;t.doc.nodesBetween(m,x,(y,v)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,v),w=Math.min(x,v+y.nodeSize),j=w-b;l+=j,c.push(...y.marks.map(N=>({mark:N,from:b,to:w})))})}),l===0)return!1;const d=c.filter(h=>o?o.name===h.mark.type.name:!0).filter(h=>Af(h.mark.attrs,s,{strict:!1})).reduce((h,p)=>h+p.to-p.from,0),u=c.filter(h=>o?h.mark.type!==o&&h.mark.type.excludes(o):!0).reduce((h,p)=>h+p.to-p.from,0);return(d>0?d+u:d)>=l}function EN(t,n){const{nodeExtensions:s}=kZ(n),r=s.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=da(Po(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function GP(t,{checkChildren:n=!0,ignoreWhitespace:s=!1}={}){var r;if(s){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(n){let i=!0;return t.content.forEach(o=>{i!==!1&&(GP(o,{ignoreWhitespace:s,checkChildren:n})||(i=!1))}),i}return!1}function PZ(t,n,s){var r;const{selection:i}=n;let o=null;if(VP(i)&&(o=i.$cursor),o){const c=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(s)&&(!!s.isInSet(c)||!c.some(u=>u.type.excludes(s)))}const{ranges:l}=i;return l.some(({$from:c,$to:d})=>{let u=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(s):!1;return t.doc.nodesBetween(c.pos,d.pos,(f,h,p)=>{if(u)return!1;if(f.isInline){const m=!p||p.type.allowsMarkType(s),x=!!s.isInSet(f.marks)||!f.marks.some(y=>y.type.excludes(s));u=m&&x}return!u}),u})}var RZ=(t,n={})=>({tr:s,state:r,dispatch:i})=>{const{selection:o}=s,{empty:l,ranges:c}=o,d=ji(t,r.schema);if(i)if(l){const u=wZ(r,d);s.addStoredMark(d.create({...u,...n}))}else c.forEach(u=>{const f=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(f,h,(p,m)=>{const x=Math.max(m,f),y=Math.min(m+p.nodeSize,h);p.marks.find(b=>b.type===d)?p.marks.forEach(b=>{d===b.type&&s.addMark(x,y,d.create({...b.attrs,...n}))}):s.addMark(x,y,d.create(n))})});return PZ(r,s,d)},OZ=(t,n)=>({tr:s})=>(s.setMeta(t,n),!0),DZ=(t,n={})=>({state:s,dispatch:r,chain:i})=>{const o=Xt(t,s.schema);let l;return s.selection.$anchor.sameParent(s.selection.$head)&&(l=s.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>Sf(o,{...l,...n})(s)?!0:c.clearNodes()).command(({state:c})=>Sf(o,{...l,...n})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},IZ=t=>({tr:n,dispatch:s})=>{if(s){const{doc:r}=n,i=Fi(t,0,r.content.size),o=fe.create(r,i);n.setSelection(o)}return!0},LZ=t=>({tr:n,dispatch:s})=>{if(s){const{doc:r}=n,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=le.atStart(r).from,c=le.atEnd(r).to,d=Fi(i,l,c),u=Fi(o,l,c),f=le.create(r,d,u);n.setSelection(f)}return!0},$Z=t=>({state:n,dispatch:s})=>{const r=Xt(t,n.schema);return hP(r)(n,s)};function TN(t,n){const s=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(s){const r=s.filter(i=>n==null?void 0:n.includes(i.type.name));t.tr.ensureMarks(r)}}var FZ=({keepMarks:t=!0}={})=>({tr:n,state:s,dispatch:r,editor:i})=>{const{selection:o,doc:l}=n,{$from:c,$to:d}=o,u=i.extensionManager.attributes,f=Nu(u,c.node().type.name,c.node().attrs);if(o instanceof fe&&o.node.isBlock)return!c.parentOffset||!Rn(l,c.pos)?!1:(r&&(t&&TN(s,i.extensionManager.splittableMarks),n.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const h=d.parentOffset===d.parent.content.size,p=c.depth===0?void 0:NZ(c.node(-1).contentMatchAt(c.indexAfter(-1)));let m=h&&p?[{type:p,attrs:f}]:void 0,x=Rn(n.doc,n.mapping.map(c.pos),1,m);if(!m&&!x&&Rn(n.doc,n.mapping.map(c.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:f}]:void 0),r){if(x&&(o instanceof le&&n.deleteSelection(),n.split(n.mapping.map(c.pos),1,m),p&&!h&&!c.parentOffset&&c.parent.type!==p)){const y=n.mapping.map(c.before()),v=n.doc.resolve(y);c.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&n.setNodeMarkup(n.mapping.map(c.before()),p)}t&&TN(s,i.extensionManager.splittableMarks),n.scrollIntoView()}return x},zZ=(t,n={})=>({tr:s,state:r,dispatch:i,editor:o})=>{var l;const c=Xt(t,r.schema),{$from:d,$to:u}=r.selection,f=r.selection.node;if(f&&f.isBlock||d.depth<2||!d.sameParent(u))return!1;const h=d.node(-1);if(h.type!==c)return!1;const p=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let b=U.empty;const w=d.index(-1)?1:d.index(-2)?2:3;for(let k=d.depth-w;k>=d.depth-3;k-=1)b=U.from(d.node(k).copy(b));const j=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,N={...Nu(p,d.node().type.name,d.node().attrs),...n},S=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(N))||void 0;b=b.append(U.from(c.createAndFill(null,S)||void 0));const _=d.before(d.depth-(w-1));s.replace(_,d.after(-j),new ee(b,4-w,0));let C=-1;s.doc.nodesBetween(_,s.doc.content.size,(k,E)=>{if(C>-1)return!1;k.isTextblock&&k.content.size===0&&(C=E+1)}),C>-1&&s.setSelection(le.near(s.doc.resolve(C))),s.scrollIntoView()}return!0}const m=u.pos===d.end()?h.contentMatchAt(0).defaultType:null,x={...Nu(p,h.type.name,h.attrs),...n},y={...Nu(p,d.node().type.name,d.node().attrs),...n};s.delete(d.pos,u.pos);const v=m?[{type:c,attrs:x},{type:m,attrs:y}]:[{type:c,attrs:x}];if(!Rn(s.doc,d.pos,2))return!1;if(i){const{selection:b,storedMarks:w}=r,{splittableMarks:j}=o.extensionManager,N=w||b.$to.parentOffset&&b.$from.marks();if(s.split(d.pos,2,v).scrollIntoView(),!N||!i)return!0;const S=N.filter(_=>j.includes(_.type.name));s.ensureMarks(S)}return!0},hm=(t,n)=>{const s=M0(l=>l.type===n)(t.selection);if(!s)return!0;const r=t.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return s.node.type===(i==null?void 0:i.type)&&Ys(t.doc,s.pos)&&t.join(s.pos),!0},pm=(t,n)=>{const s=M0(l=>l.type===n)(t.selection);if(!s)return!0;const r=t.doc.resolve(s.start).after(s.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return s.node.type===(i==null?void 0:i.type)&&Ys(t.doc,r)&&t.join(r),!0},BZ=(t,n,s,r={})=>({editor:i,tr:o,state:l,dispatch:c,chain:d,commands:u,can:f})=>{const{extensions:h,splittableMarks:p}=i.extensionManager,m=Xt(t,l.schema),x=Xt(n,l.schema),{selection:y,storedMarks:v}=l,{$from:b,$to:w}=y,j=b.blockRange(w),N=v||y.$to.parentOffset&&y.$from.marks();if(!j)return!1;const S=M0(_=>EN(_.type.name,h))(y);if(j.depth>=1&&S&&j.depth-S.depth<=1){if(S.node.type===m)return u.liftListItem(x);if(EN(S.node.type.name,h)&&m.validContent(S.node.content)&&c)return d().command(()=>(o.setNodeMarkup(S.pos,m),!0)).command(()=>hm(o,m)).command(()=>pm(o,m)).run()}return!s||!N||!c?d().command(()=>f().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>hm(o,m)).command(()=>pm(o,m)).run():d().command(()=>{const _=f().wrapInList(m,r),C=N.filter(k=>p.includes(k.type.name));return o.ensureMarks(C),_?!0:u.clearNodes()}).wrapInList(m,r).command(()=>hm(o,m)).command(()=>pm(o,m)).run()},VZ=(t,n={},s={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=s,l=ji(t,r.schema);return AZ(r,l,n)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,n)},HZ=(t,n,s={})=>({state:r,commands:i})=>{const o=Xt(t,r.schema),l=Xt(n,r.schema),c=T0(r,o,s);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?i.setNode(l,d):i.setNode(o,{...d,...s})},UZ=(t,n={})=>({state:s,commands:r})=>{const i=Xt(t,s.schema);return T0(s,i,n)?r.lift(i):r.wrapIn(i,n)},WZ=()=>({state:t,dispatch:n})=>{const s=t.plugins;for(let r=0;r<s.length;r+=1){const i=s[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(n){const l=t.tr,c=o.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},qZ=()=>({tr:t,dispatch:n})=>{const{selection:s}=t,{empty:r,ranges:i}=s;return r||n&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},KZ=(t,n={})=>({tr:s,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=n,{selection:c}=s,d=ji(t,r.schema),{$from:u,empty:f,ranges:h}=c;if(!i)return!0;if(f&&l){let{from:p,to:m}=c;const x=(o=u.marks().find(v=>v.type===d))==null?void 0:o.attrs,y=_0(u,d,x);y&&(p=y.from,m=y.to),s.removeMark(p,m,d)}else h.forEach(p=>{s.removeMark(p.$from.pos,p.$to.pos,d)});return s.removeStoredMark(d),!0},GZ=(t,n={})=>({tr:s,state:r,dispatch:i})=>{let o=null,l=null;const c=WP(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(o=Xt(t,r.schema)),c==="mark"&&(l=ji(t,r.schema)),i&&s.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let h,p,m,x;s.selection.empty?r.doc.nodesBetween(u,f,(y,v)=>{o&&o===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),h=v,p=y)}):r.doc.nodesBetween(u,f,(y,v)=>{v<u&&o&&o===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),h=v,p=y),v>=u&&v<=f&&(o&&o===y.type&&s.setNodeMarkup(v,void 0,{...y.attrs,...n}),l&&y.marks.length&&y.marks.forEach(b=>{if(l===b.type){const w=Math.max(v,u),j=Math.min(v+y.nodeSize,f);s.addMark(w,j,l.create({...b.attrs,...n}))}}))}),p&&(h!==void 0&&s.setNodeMarkup(h,void 0,{...p.attrs,...n}),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&s.addMark(m,x,l.create({...y.attrs,...n}))}))}),!0):!1},YZ=(t,n={})=>({state:s,dispatch:r})=>{const i=Xt(t,s.schema);return dP(i,n)(s,r)},XZ=(t,n={})=>({state:s,dispatch:r})=>{const i=Xt(t,s.schema);return uP(i,n)(s,r)},YP=class{constructor(n){var s;this.find=n.find,this.handler=n.handler,this.undoable=(s=n.undoable)!=null?s:!0}};function JZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ud(t){return JZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function XP(t,n){const s={...t};return Ud(t)&&Ud(n)&&Object.keys(n).forEach(r=>{Ud(n[r])&&Ud(t[r])?s[r]=XP(t[r],n[r]):s[r]=n[r]}),s}var A0=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...da(Po(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...da(Po(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const n=this.extend({...this.config,addOptions:()=>XP(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new this.constructor({...this.config,...t});return n.parent=this,this.child=n,n.name="name"in t?t.name:n.parent.name,n}},P0=class JP extends A0{constructor(){super(...arguments),this.type="mark"}static create(n={}){const s=typeof n=="function"?n():n;return new JP(s)}static handleExit({editor:n,mark:s}){const{tr:r}=n.state,i=n.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(u=>(u==null?void 0:u.type.name)===s.name))return!1;const d=l.find(u=>(u==null?void 0:u.type.name)===s.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),n.view.dispatch(r),!0}return!1}configure(n){return super.configure(n)}extend(n){const s=typeof n=="function"?n():n;return super.extend(s)}},QZ=class{constructor(n){this.find=n.find,this.handler=n.handler}},ZZ={};C0(ZZ,{ClipboardTextSerializer:()=>eee,Commands:()=>tee,Delete:()=>nee,Drop:()=>see,Editable:()=>ree,FocusEvents:()=>iee,Keymap:()=>aee,Paste:()=>oee,Tabindex:()=>lee,focusEventsPluginKey:()=>ZP});var It=class QP extends A0{constructor(){super(...arguments),this.type="extension"}static create(n={}){const s=typeof n=="function"?n():n;return new QP(s)}configure(n){return super.configure(n)}extend(n){const s=typeof n=="function"?n():n;return super.extend(s)}},eee=It.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ht({key:new pt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:s}=t,{doc:r,selection:i}=n,{ranges:o}=i,l=Math.min(...o.map(f=>f.$from.pos)),c=Math.max(...o.map(f=>f.$to.pos)),d=_Z(s);return CZ(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),tee=It.create({name:"commands",addCommands(){return{...zP}}}),nee=It.create({name:"delete",onUpdate({transaction:t,appendedTransactions:n}){var s,r,i;const o=()=>{var l,c,d,u;if((u=(d=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?u:t.getMeta("y-sync$"))return;const f=jZ(t.before,[t,...n]);MZ(f).forEach(m=>{f.mapping.mapResult(m.oldRange.from).deletedAfter&&f.mapping.mapResult(m.oldRange.to).deletedBefore&&f.before.nodesBetween(m.oldRange.from,m.oldRange.to,(x,y)=>{const v=y+x.nodeSize-2,b=m.oldRange.from<=y&&v<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:y,to:v,newFrom:f.mapping.map(y),newTo:f.mapping.map(v),deletedRange:m.oldRange,newRange:m.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:f})})});const p=f.mapping;f.steps.forEach((m,x)=>{var y,v;if(m instanceof us){const b=p.slice(x).map(m.from,-1),w=p.slice(x).map(m.to),j=p.invert().map(b,-1),N=p.invert().map(w),S=(y=f.doc.nodeAt(b-1))==null?void 0:y.marks.some(C=>C.eq(m.mark)),_=(v=f.doc.nodeAt(w))==null?void 0:v.marks.some(C=>C.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:j,to:N},newRange:{from:b,to:w},partial:!!(_||S),editor:this.editor,transaction:t,combinedTransform:f})}})};(i=(r=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),see=It.create({name:"drop",addProseMirrorPlugins(){return[new ht({key:new pt("tiptapDrop"),props:{handleDrop:(t,n,s,r)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:s,moved:r})}}})]}}),ree=It.create({name:"editable",addProseMirrorPlugins(){return[new ht({key:new pt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ZP=new pt("focusEvents"),iee=It.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ht({key:ZP,props:{handleDOMEvents:{focus:(n,s)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return n.dispatch(r),!1},blur:(n,s)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return n.dispatch(r),!1}}}})]}}),aee=It.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:u}=c,{empty:f,$anchor:h}=d,{pos:p,parent:m}=h,x=h.parent.isTextblock&&p>0?c.doc.resolve(p-1):h,y=x.parent.type.spec.isolating,v=h.pos-h.parentOffset,b=y&&x.parent.childCount===1?v===h.pos:he.atStart(u).from===p;return!f||!m.type.isTextblock||m.textContent.length||!b||b&&h.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return E0()||UP()?o:i},addProseMirrorPlugins(){return[new ht({key:new pt("clearDocument"),appendTransaction:(t,n,s)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!n.doc.eq(s.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:c}=n.selection,d=he.atStart(n.doc).from,u=he.atEnd(n.doc).to;if(o||!(l===d&&c===u)||!GP(s.doc))return;const p=s.tr,m=FP({state:s,transaction:p}),{commands:x}=new _Q({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),oee=It.create({name:"paste",addProseMirrorPlugins(){return[new ht({key:new pt("tiptapPaste"),props:{handlePaste:(t,n,s)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:s})}}})]}}),lee=It.create({name:"tabindex",addProseMirrorPlugins(){return[new ht({key:new pt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function cee(t){return new YP({find:t.find,handler:({state:n,range:s,match:r})=>{const i=da(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=n,l=r[r.length-1],c=r[0];if(l){const d=c.search(/\S/),u=s.from+c.indexOf(l),f=u+l.length;if(KP(s.from,s.to,n.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;f<s.to&&o.delete(f,s.to),u>s.from&&o.delete(s.from+d,u);const p=s.from+d+l.length;o.addMark(s.from+d,p,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function dee(t){return new YP({find:t.find,handler:({state:n,range:s,match:r})=>{const i=da(t.getAttributes,void 0,r)||{},{tr:o}=n,l=s.from;let c=s.to;const d=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let f=l+u;f>c?f=c:c=f+r[1].length;const h=r[0][r[0].length-1];o.insertText(h,l+r[0].length-1),o.replaceWith(f,c,d)}else if(r[0]){const u=t.type.isInline?l:l-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()},undoable:t.undoable})}var uee=t=>"touches"in t,fee=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.touches[0];if(!c)return;const d=c.clientX-this.startX,u=c.clientY-this.startY;this.handleResize(d,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(l,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var n,s,r,i,o;this.node=t.node,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(n=t.options)!=null&&n.min&&(this.minSize={...this.minSize,...t.options.min}),(s=t.options)!=null&&s.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(i=t.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(o=t.options)!=null&&o.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(t,n,s){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,n,s):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",t.style.justifyContent="flex-start",t.style.alignItems="flex-start",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const n=document.createElement("div");return n.dataset.resizeHandle=t,n.style.position="absolute",this.classNames.handle&&(n.className=this.classNames.handle),n}positionHandle(t,n){const s=n.includes("top"),r=n.includes("bottom"),i=n.includes("left"),o=n.includes("right");s&&(t.style.top="0"),r&&(t.style.bottom="0"),i&&(t.style.left="0"),o&&(t.style.right="0"),(n==="top"||n==="bottom")&&(t.style.left="0",t.style.right="0"),(n==="left"||n==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{const n=this.createHandle(t);this.positionHandle(n,t),n.addEventListener("mousedown",s=>this.handleResizeStart(s,t)),n.addEventListener("touchstart",s=>this.handleResizeStart(s,t)),this.wrapper.appendChild(n)})}applyInitialSize(){const t=this.node.attrs.width,n=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,n?(this.element.style.height=`${n}px`,this.initialHeight=n):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,n){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=n,uee(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,n){if(!this.activeHandle)return;const s=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:i}=this.calculateNewDimensions(this.activeHandle,t,n),o=this.applyConstraints(r,i,s);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(t,n,s){let r=this.startWidth,i=this.startHeight;const o=t.includes("right"),l=t.includes("left"),c=t.includes("bottom"),d=t.includes("top");return o?r=this.startWidth+n:l&&(r=this.startWidth-n),c?i=this.startHeight+s:d&&(i=this.startHeight-s),(t==="right"||t==="left")&&(r=this.startWidth+(o?n:-n)),(t==="top"||t==="bottom")&&(i=this.startHeight+(c?s:-s)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,i,t):{width:r,height:i}}applyConstraints(t,n,s){var r,i,o,l;if(!s){let u=Math.max(this.minSize.width,t),f=Math.max(this.minSize.height,n);return(r=this.maxSize)!=null&&r.width&&(u=Math.min(this.maxSize.width,u)),(i=this.maxSize)!=null&&i.height&&(f=Math.min(this.maxSize.height,f)),{width:u,height:f}}let c=t,d=n;return c<this.minSize.width&&(c=this.minSize.width,d=c/this.aspectRatio),d<this.minSize.height&&(d=this.minSize.height,c=d*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&c>this.maxSize.width&&(c=this.maxSize.width,d=c/this.aspectRatio),(l=this.maxSize)!=null&&l.height&&d>this.maxSize.height&&(d=this.maxSize.height,c=d*this.aspectRatio),{width:c,height:d}}applyAspectRatio(t,n,s){const r=s==="left"||s==="right",i=s==="top"||s==="bottom";return r?{width:t,height:t/this.aspectRatio}:i?{width:n*this.aspectRatio,height:n}:{width:t,height:t/this.aspectRatio}}},hee={};C0(hee,{createAtomBlockMarkdownSpec:()=>pee,createBlockMarkdownSpec:()=>mee,createInlineMarkdownSpec:()=>yee,parseAttributes:()=>R0,parseIndentedBlocks:()=>vee,renderNestedMarkdownContent:()=>bee,serializeAttributes:()=>O0});function R0(t){if(!(t!=null&&t.trim()))return{};const n={},s=[],r=t.replace(/["']([^"']*)["']/g,u=>(s.push(u),`__QUOTED_${s.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(f=>f.trim().slice(1));n.class=u.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(n.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,u,f])=>{var h;const p=parseInt(((h=f.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),m=s[p];m&&(n[u]=m.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(f=>{f.match(/^[a-zA-Z][\w-]*$/)&&(n[f]=!0)}),n}function O0(t){if(!t||Object.keys(t).length===0)return"";const n=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>n.push(`.${r}`)),t.id&&n.push(`#${t.id}`),Object.entries(t).forEach(([s,r])=>{s==="class"||s==="id"||(r===!0?n.push(s):r!==!1&&r!=null&&n.push(`${s}="${String(r)}"`))}),n.join(" ")}function pee(t){const{nodeName:n,name:s,parseAttributes:r=R0,serializeAttributes:i=O0,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:c}=t,d=s||n,u=f=>{if(!c)return f;const h={};return c.forEach(p=>{p in f&&(h[p]=f[p])}),h};return{parseMarkdown:(f,h)=>{const p={...o,...f.attributes};return h.createNode(n,p,[])},markdownTokenizer:{name:n,level:"block",start(f){var h;const p=new RegExp(`^:::${d}(?:\\s|$)`,"m"),m=(h=f.match(p))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(f,h,p){const m=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),x=f.match(m);if(!x)return;const y=x[1]||"",v=r(y);if(!l.find(w=>!(w in v)))return{type:n,raw:x[0],attributes:v}}},renderMarkdown:f=>{const h=u(f.attrs||{}),p=i(h),m=p?` {${p}}`:"";return`:::${d}${m} :::`}}}function mee(t){const{nodeName:n,name:s,getContent:r,parseAttributes:i=R0,serializeAttributes:o=O0,defaultAttributes:l={},content:c="block",allowedAttributes:d}=t,u=s||n,f=h=>{if(!d)return h;const p={};return d.forEach(m=>{m in h&&(p[m]=h[m])}),p};return{parseMarkdown:(h,p)=>{let m;if(r){const y=r(h);m=typeof y=="string"?[{type:"text",text:y}]:y}else c==="block"?m=p.parseChildren(h.tokens||[]):m=p.parseInline(h.tokens||[]);const x={...l,...h.attributes};return p.createNode(n,x,m)},markdownTokenizer:{name:n,level:"block",start(h){var p;const m=new RegExp(`^:::${u}`,"m"),x=(p=h.match(m))==null?void 0:p.index;return x!==void 0?x:-1},tokenize(h,p,m){var x;const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=h.match(y);if(!v)return;const[b,w=""]=v,j=i(w);let N=1;const S=b.length;let _="";const C=/^:::([\w-]*)(\s.*)?/gm,k=h.slice(S);for(C.lastIndex=0;;){const E=C.exec(k);if(E===null)break;const M=E.index,D=E[1];if(!((x=E[2])!=null&&x.endsWith(":::"))){if(D)N+=1;else if(N-=1,N===0){const R=k.slice(0,M);_=R.trim();const T=h.slice(0,S+M+E[0].length);let P=[];if(_)if(c==="block")for(P=m.blockTokens(R),P.forEach(L=>{L.text&&(!L.tokens||L.tokens.length===0)&&(L.tokens=m.inlineTokens(L.text))});P.length>0;){const L=P[P.length-1];if(L.type==="paragraph"&&(!L.text||L.text.trim()===""))P.pop();else break}else P=m.inlineTokens(_);return{type:n,raw:T,attributes:j,content:_,tokens:P}}}}}},renderMarkdown:(h,p)=>{const m=f(h.attrs||{}),x=o(m),y=x?` {${x}}`:"",v=p.renderChildren(h.content||[],`

`);return`:::${u}${y}

${v}

:::`}}}function gee(t){if(!t.trim())return{};const n={},s=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=s.exec(t);for(;r!==null;){const[,i,o,l]=r;n[i]=o||l,r=s.exec(t)}return n}function xee(t){return Object.entries(t).filter(([,n])=>n!=null).map(([n,s])=>`${n}="${s}"`).join(" ")}function yee(t){const{nodeName:n,name:s,getContent:r,parseAttributes:i=gee,serializeAttributes:o=xee,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:d}=t,u=s||n,f=p=>{if(!d)return p;const m={};return d.forEach(x=>{x in p&&(m[x]=p[x])}),m},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,m)=>{const x={...l,...p.attributes};if(c)return m.createNode(n,x);const y=r?r(p):p.content||"";return y?m.createNode(n,x,[m.createTextNode(y)]):m.createNode(n,x,[])},markdownTokenizer:{name:n,level:"inline",start(p){const m=c?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),x=p.match(m),y=x==null?void 0:x.index;return y!==void 0?y:-1},tokenize(p,m,x){const y=c?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),v=p.match(y);if(!v)return;let b="",w="";if(c){const[,N]=v;w=N}else{const[,N,S]=v;w=N,b=S||""}const j=i(w.trim());return{type:n,raw:v[0],content:b.trim(),attributes:j}}},renderMarkdown:p=>{let m="";r?m=r(p):p.content&&p.content.length>0&&(m=p.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const x=f(p.attrs||{}),y=o(x),v=y?` ${y}`:"";return c?`[${u}${v}]`:`[${u}${v}]${m}[/${u}]`}}}function vee(t,n,s){var r,i,o,l;const c=t.split(`
`),d=[];let u="",f=0;const h=n.baseIndentSize||2;for(;f<c.length;){const p=c[f],m=p.match(n.itemPattern);if(!m){if(d.length>0)break;if(p.trim()===""){f+=1;continue}else return}const x=n.extractItemData(m),{indentLevel:y,mainContent:v}=x;u=`${u}${p}
`;const b=[v];for(f+=1;f<c.length;){const S=c[f];if(S.trim()===""){const C=c.slice(f+1).findIndex(M=>M.trim()!=="");if(C===-1)break;if((((i=(r=c[f+1+C].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>y){b.push(S),u=`${u}${S}
`,f+=1;continue}else break}if((((l=(o=S.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>y)b.push(S),u=`${u}${S}
`,f+=1;else break}let w;const j=b.slice(1);if(j.length>0){const S=j.map(_=>_.slice(y+h)).join(`
`);S.trim()&&(n.customNestedParser?w=n.customNestedParser(S):w=s.blockTokens(S))}const N=n.createToken(x,w);d.push(N)}if(d.length!==0)return{items:d,raw:u.trim()}}function bee(t,n,s,r){if(!t||!Array.isArray(t.content))return"";const i=typeof s=="function"?s(r):s,[o,...l]=t.content,c=n.renderChildren([o]),d=[`${i}${c}`];return l&&l.length>0&&l.forEach(u=>{const f=n.renderChildren([u]);if(f){const h=f.split(`
`).map(p=>p?n.indent(p):"").join(`
`);d.push(h)}}),d.join(`
`)}var td=class eR extends A0{constructor(){super(...arguments),this.type="node"}static create(n={}){const s=typeof n=="function"?n():n;return new eR(s)}configure(n){return super.configure(n)}extend(n){const s=typeof n=="function"?n():n;return super.extend(s)}};function wee(t){return new QZ({find:t.find,handler:({state:n,range:s,match:r,pasteEvent:i})=>{const o=da(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=n,c=r[r.length-1],d=r[0];let u=s.to;if(c){const f=d.search(/\S/),h=s.from+d.indexOf(c),p=h+c.length;if(KP(s.from,s.to,n.doc).filter(x=>x.mark.type.excluded.find(v=>v===t.type&&v!==x.mark.type)).filter(x=>x.to>h).length)return null;p<s.to&&l.delete(p,s.to),h>s.from&&l.delete(s.from+f,h),u=s.from+f+c.length,l.addMark(s.from+f,u,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}function tR(t){const{state:n,transaction:s}=t;let{selection:r}=s,{doc:i}=s,{storedMarks:o}=s;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=s.selection,i=s.doc,o=s.storedMarks,s}}}class jee{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:s,state:r}=this,{view:i}=s,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>{const h=d(...f)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,s=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,c=[],d=!!n,u=n||o.tr,f=()=>(!d&&s&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(u),c.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...y)=>{const v=this.buildProps(u,s),b=m(...y)(v);return c.push(b),h}])),run:f};return h}createCan(n){const{rawCommands:s,state:r}=this,i=!1,o=n||r.tr,l=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(s).map(([d,u])=>[d,(...f)=>u(...f)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(n,s=!0){const{rawCommands:r,editor:i,state:o}=this,{view:l}=i,c={tr:n,editor:i,view:l,state:tR({state:o,transaction:n}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(n,s),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(r).map(([d,u])=>[d,(...f)=>u(...f)(c)]))}};return c}}function Kt(t,n,s){return t.config[n]===void 0&&t.parent?Kt(t.parent,n,s):typeof t.config[n]=="function"?t.config[n].bind({...s,parent:t.parent?Kt(t.parent,n,s):null}):t.config[n]}function Nee(t){const n=t.filter(i=>i.type==="extension"),s=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:n,nodeExtensions:s,markExtensions:r}}function Jt(t,n){if(typeof t=="string"){if(!n.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return n.nodes[t]}return t}function wn(...t){return t.filter(n=>!!n).reduce((n,s)=>{const r={...n};return Object.entries(s).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],d=r[i]?r[i].split(" "):[],u=c.filter(f=>!d.includes(f));r[i]=[...d,...u].join(" ")}else if(i==="style"){const c=o?o.split(";").map(f=>f.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;d.forEach(f=>{const[h,p]=f.split(":").map(m=>m.trim());u.set(h,p)}),c.forEach(f=>{const[h,p]=f.split(":").map(m=>m.trim());u.set(h,p)}),r[i]=Array.from(u.entries()).map(([f,h])=>`${f}: ${h}`).join("; ")}else r[i]=o}),r},{})}function See(t){return typeof t=="function"}function vt(t,n=void 0,...s){return See(t)?n?t.bind(n)(...s):t(...s):t}function kee(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Bh{constructor(n){this.find=n.find,this.handler=n.handler}}function Cee(t){return Object.prototype.toString.call(t).slice(8,-1)}function Wd(t){return Cee(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Vh(t,n){const s={...t};return Wd(t)&&Wd(n)&&Object.keys(n).forEach(r=>{Wd(n[r])&&Wd(t[r])?s[r]=Vh(t[r],n[r]):s[r]=n[r]}),s}class ua{constructor(n={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=vt(Kt(this,"addOptions",{name:this.name}))),this.storage=vt(Kt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new ua(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Vh(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new ua(n);return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=vt(Kt(s,"addOptions",{name:s.name})),s.storage=vt(Kt(s,"addStorage",{name:s.name,options:s.options})),s}static handleExit({editor:n,mark:s}){const{tr:r}=n.state,i=n.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(u=>(u==null?void 0:u.type.name)===s.name))return!1;const d=l.find(u=>(u==null?void 0:u.type.name)===s.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),n.view.dispatch(r),!0}return!1}}class _ee{constructor(n){this.find=n.find,this.handler=n.handler}}class an{constructor(n={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=vt(Kt(this,"addOptions",{name:this.name}))),this.storage=vt(Kt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new an(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Vh(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new an({...this.config,...n});return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=vt(Kt(s,"addOptions",{name:s.name})),s.storage=vt(Kt(s,"addStorage",{name:s.name,options:s.options})),s}}function Eee(t,n,s){const{from:r,to:i}=n,{blockSeparator:o=`

`,textSerializers:l={}}=s||{};let c="";return t.nodesBetween(r,i,(d,u,f,h)=>{var p;d.isBlock&&u>r&&(c+=o);const m=l==null?void 0:l[d.type.name];if(m)return f&&(c+=m({node:d,pos:u,parent:f,index:h,range:n})),!1;d.isText&&(c+=(p=d==null?void 0:d.text)===null||p===void 0?void 0:p.slice(Math.max(r,u)-u,i-u))}),c}function Tee(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,n])=>n.spec.toText).map(([n,s])=>[n,s.spec.toText]))}an.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ht({key:new pt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:n,schema:s}=t,{doc:r,selection:i}=n,{ranges:o}=i,l=Math.min(...o.map(f=>f.$from.pos)),c=Math.max(...o.map(f=>f.$to.pos)),d=Tee(s);return Eee(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}});const Mee=()=>({editor:t,view:n})=>(requestAnimationFrame(()=>{var s;t.isDestroyed||(n.dom.blur(),(s=window==null?void 0:window.getSelection())===null||s===void 0||s.removeAllRanges())}),!0),Aee=(t=!1)=>({commands:n})=>n.setContent("",t),Pee=()=>({state:t,tr:n,dispatch:s})=>{const{selection:r}=n,{ranges:i}=r;return s&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:u,mapping:f}=n,h=u.resolve(f.map(d)),p=u.resolve(f.map(d+c.nodeSize)),m=h.blockRange(p);if(!m)return;const x=ba(m);if(c.type.isTextblock){const{defaultType:y}=h.parent.contentMatchAt(h.index());n.setNodeMarkup(m.start,y)}(x||x===0)&&n.lift(m,x)})}),!0},Ree=t=>n=>t(n),Oee=()=>({state:t,dispatch:n})=>m0(t,n),Dee=(t,n)=>({editor:s,tr:r})=>{const{state:i}=s,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(n);return r.insert(l,o.content),r.setSelection(new le(r.doc.resolve(Math.max(l-1,0)))),!0},Iee=()=>({tr:t,dispatch:n})=>{const{selection:s}=t,r=s.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(n){const c=i.before(o),d=i.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1},Lee=t=>({tr:n,state:s,dispatch:r})=>{const i=Jt(t,s.schema),o=n.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const d=o.before(l),u=o.after(l);n.delete(d,u).scrollIntoView()}return!0}return!1},$ee=t=>({tr:n,dispatch:s})=>{const{from:r,to:i}=t;return s&&n.delete(r,i),!0},Fee=()=>({state:t,dispatch:n})=>$h(t,n),zee=()=>({commands:t})=>t.keyboardShortcut("Enter"),Bee=()=>({state:t,dispatch:n})=>rP(t,n);function Pf(t,n,s={strict:!0}){const r=Object.keys(n);return r.length?r.every(i=>s.strict?n[i]===t[i]:kee(n[i])?n[i].test(t[i]):n[i]===t[i]):!0}function nR(t,n,s={}){return t.find(r=>r.type===n&&Pf(Object.fromEntries(Object.keys(s).map(i=>[i,r.attrs[i]])),s))}function MN(t,n,s={}){return!!nR(t,n,s)}function D0(t,n,s){var r;if(!t||!n)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===n))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===n)||(s=s||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!nR([...i.node.marks],n,s)))return;let l=i.index,c=t.start()+i.offset,d=l+1,u=c+i.node.nodeSize;for(;l>0&&MN([...t.parent.child(l-1).marks],n,s);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&MN([...t.parent.child(d).marks],n,s);)u+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:u}}function Si(t,n){if(typeof t=="string"){if(!n.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return n.marks[t]}return t}const Vee=(t,n={})=>({tr:s,state:r,dispatch:i})=>{const o=Si(t,r.schema),{doc:l,selection:c}=s,{$from:d,from:u,to:f}=c;if(i){const h=D0(d,o,n);if(h&&h.from<=u&&h.to>=f){const p=le.create(l,h.from,h.to);s.setSelection(p)}}return!0},Hee=t=>n=>{const s=typeof t=="function"?t(n):t;for(let r=0;r<s.length;r+=1)if(s[r](n))return!0;return!1};function sR(t){return t instanceof le}function zi(t=0,n=0,s=0){return Math.min(Math.max(t,n),s)}function Uee(t,n=null){if(!n)return null;const s=he.atStart(t),r=he.atEnd(t);if(n==="start"||n===!0)return s;if(n==="end")return r;const i=s.from,o=r.to;return n==="all"?le.create(t,zi(0,i,o),zi(t.content.size,i,o)):le.create(t,zi(n,i,o),zi(n,i,o))}function Wee(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function I0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const qee=(t=null,n={})=>({editor:s,view:r,tr:i,dispatch:o})=>{n={scrollIntoView:!0,...n};const l=()=>{(I0()||Wee())&&r.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(r.focus(),n!=null&&n.scrollIntoView&&s.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!sR(s.state.selection))return l(),!0;const c=Uee(i.doc,t)||s.state.selection,d=s.state.selection.eq(c);return o&&(d||i.setSelection(c),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},Kee=(t,n)=>s=>t.every((r,i)=>n(r,{...s,index:i})),Gee=(t,n)=>({tr:s,commands:r})=>r.insertContentAt({from:s.selection.from,to:s.selection.to},t,n),rR=t=>{const n=t.childNodes;for(let s=n.length-1;s>=0;s-=1){const r=n[s];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&rR(r)}return t};function qd(t){const n=`<body>${t}</body>`,s=new window.DOMParser().parseFromString(n,"text/html").body;return rR(s)}function Pc(t,n,s){if(t instanceof Zr||t instanceof U)return t;s={slice:!0,parseOptions:{},...s};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return U.fromArray(t.map(c=>n.nodeFromJSON(c)));const l=n.nodeFromJSON(t);return s.errorOnInvalidContent&&l.check(),l}catch(o){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Pc("",n,s)}if(i){if(s.errorOnInvalidContent){let l=!1,c="";const d=new MA({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(l=!0,c=typeof u=="string"?u:u.outerHTML,null)}]}})});if(s.slice?zs.fromSchema(d).parseSlice(qd(t),s.parseOptions):zs.fromSchema(d).parse(qd(t),s.parseOptions),s.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=zs.fromSchema(n);return s.slice?o.parseSlice(qd(t),s.parseOptions).content:o.parse(qd(t),s.parseOptions)}return Pc("",n,s)}function Yee(t,n,s){const r=t.steps.length-1;if(r<n)return;const i=t.steps[r];if(!(i instanceof xt||i instanceof bt))return;const o=t.mapping.maps[r];let l=0;o.forEach((c,d,u,f)=>{l===0&&(l=f)}),t.setSelection(he.near(t.doc.resolve(l),s))}const Xee=t=>!("type"in t),Jee=(t,n,s)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){s={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let c;const d=v=>{o.emit("contentError",{editor:o,error:v,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...s.parseOptions};if(!s.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Pc(n,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){d(v)}try{c=Pc(n,o.schema,{parseOptions:u,errorOnInvalidContent:(l=s.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(v){return d(v),!1}let{from:f,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,m=!0;if((Xee(c)?c:[c]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,m=m?v.isBlock:!1}),f===h&&m){const{parent:v}=r.doc.resolve(f);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(f-=1,h+=1)}let y;if(p){if(Array.isArray(n))y=n.map(v=>v.text||"").join("");else if(n instanceof U){let v="";n.forEach(b=>{b.text&&(v+=b.text)}),y=v}else typeof n=="object"&&n&&n.text?y=n.text:y=n;r.insertText(y,f,h)}else y=c,r.replaceWith(f,h,y);s.updateSelection&&Yee(r,r.steps.length-1,-1),s.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:y}),s.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:y})}return!0},Qee=()=>({state:t,dispatch:n})=>tP(t,n),Zee=()=>({state:t,dispatch:n})=>nP(t,n),ete=()=>({state:t,dispatch:n})=>o0(t,n),tte=()=>({state:t,dispatch:n})=>d0(t,n),nte=()=>({state:t,dispatch:n,tr:s})=>{try{const r=el(t.doc,t.selection.$from.pos,-1);return r==null?!1:(s.join(r,2),n&&n(s),!0)}catch{return!1}},ste=()=>({state:t,dispatch:n,tr:s})=>{try{const r=el(t.doc,t.selection.$from.pos,1);return r==null?!1:(s.join(r,2),n&&n(s),!0)}catch{return!1}},rte=()=>({state:t,dispatch:n})=>JA(t,n),ite=()=>({state:t,dispatch:n})=>QA(t,n);function iR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function ate(t){const n=t.split(/-(?!$)/);let s=n[n.length-1];s==="Space"&&(s=" ");let r,i,o,l;for(let c=0;c<n.length-1;c+=1){const d=n[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))I0()||iR()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(s=`Alt-${s}`),i&&(s=`Ctrl-${s}`),l&&(s=`Meta-${s}`),o&&(s=`Shift-${s}`),s}const ote=t=>({editor:n,view:s,tr:r,dispatch:i})=>{const o=ate(t).split(/-(?!$)/),l=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=n.captureTransaction(()=>{s.someProp("handleKeyDown",u=>u(s,c))});return d==null||d.steps.forEach(u=>{const f=u.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function L0(t,n,s={}){const{from:r,to:i,empty:o}=t.selection,l=n?Jt(n,t.schema):null,c=[];t.doc.nodesBetween(r,i,(h,p)=>{if(h.isText)return;const m=Math.max(r,p),x=Math.min(i,p+h.nodeSize);c.push({node:h,from:m,to:x})});const d=i-r,u=c.filter(h=>l?l.name===h.node.type.name:!0).filter(h=>Pf(h.node.attrs,s,{strict:!1}));return o?!!u.length:u.reduce((h,p)=>h+p.to-p.from,0)>=d}const lte=(t,n={})=>({state:s,dispatch:r})=>{const i=Jt(t,s.schema);return L0(s,i,n)?sP(s,r):!1},cte=()=>({state:t,dispatch:n})=>g0(t,n),dte=t=>({state:n,dispatch:s})=>{const r=Jt(t,n.schema);return fP(r)(n,s)},ute=()=>({state:t,dispatch:n})=>h0(t,n);function aR(t,n){return n.nodes[t]?"node":n.marks[t]?"mark":null}function AN(t,n){const s=typeof n=="string"?[n]:n;return Object.keys(t).reduce((r,i)=>(s.includes(i)||(r[i]=t[i]),r),{})}const fte=(t,n)=>({tr:s,state:r,dispatch:i})=>{let o=null,l=null;const c=aR(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(o=Jt(t,r.schema)),c==="mark"&&(l=Si(t,r.schema)),i&&s.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{o&&o===u.type&&s.setNodeMarkup(f,void 0,AN(u.attrs,n)),l&&u.marks.length&&u.marks.forEach(h=>{l===h.type&&s.addMark(f,f+u.nodeSize,l.create(AN(h.attrs,n)))})})}),!0):!1},hte=()=>({tr:t,dispatch:n})=>(n&&t.scrollIntoView(),!0),pte=()=>({tr:t,dispatch:n})=>{if(n){const s=new bn(t.doc);t.setSelection(s)}return!0},mte=()=>({state:t,dispatch:n})=>l0(t,n),gte=()=>({state:t,dispatch:n})=>u0(t,n),xte=()=>({state:t,dispatch:n})=>iP(t,n),yte=()=>({state:t,dispatch:n})=>cP(t,n),vte=()=>({state:t,dispatch:n})=>lP(t,n);function bte(t,n,s={},r={}){return Pc(t,n,{slice:!1,parseOptions:s,errorOnInvalidContent:r.errorOnInvalidContent})}const wte=(t,n=!1,s={},r={})=>({editor:i,tr:o,dispatch:l,commands:c})=>{var d,u;const{doc:f}=o;if(s.preserveWhitespace!=="full"){const h=bte(t,i.schema,s,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck});return l&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:f.content.size},t,{parseOptions:s,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function jte(t,n){const s=Si(n,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===s.name);return c?{...c.attrs}:{}}function Nte(t){for(let n=0;n<t.edgeCount;n+=1){const{type:s}=t.edge(n);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function Ste(t,n){for(let s=t.depth;s>0;s-=1){const r=t.node(s);if(n(r))return{pos:s>0?t.before(s):0,start:t.start(s),depth:s,node:r}}}function $0(t){return n=>Ste(n.$from,t)}function oR(t,n,s){const r=[];return t===n?s.resolve(t).marks().forEach(i=>{const o=s.resolve(t),l=D0(o,i.type);l&&r.push({mark:i,...l})}):s.nodesBetween(t,n,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}function Su(t,n,s){return Object.fromEntries(Object.entries(s).filter(([r])=>{const i=t.find(o=>o.type===n&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function kte(t,n,s={}){const{empty:r,ranges:i}=t.selection,o=n?Si(n,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>o?o.name===h.type.name:!0).find(h=>Pf(h.attrs,s,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:h,$to:p})=>{const m=h.pos,x=p.pos;t.doc.nodesBetween(m,x,(y,v)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,v),w=Math.min(x,v+y.nodeSize),j=w-b;l+=j,c.push(...y.marks.map(N=>({mark:N,from:b,to:w})))})}),l===0)return!1;const d=c.filter(h=>o?o.name===h.mark.type.name:!0).filter(h=>Pf(h.mark.attrs,s,{strict:!1})).reduce((h,p)=>h+p.to-p.from,0),u=c.filter(h=>o?h.mark.type!==o&&h.mark.type.excludes(o):!0).reduce((h,p)=>h+p.to-p.from,0);return(d>0?d+u:d)>=l}function PN(t,n){const{nodeExtensions:s}=Nee(n),r=s.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=vt(Kt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function lR(t,{checkChildren:n=!0,ignoreWhitespace:s=!1}={}){var r;if(s){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(n){let i=!0;return t.content.forEach(o=>{i!==!1&&(lR(o,{ignoreWhitespace:s,checkChildren:n})||(i=!1))}),i}return!1}function Cte(t){return t instanceof fe}function _te(t,n,s){var r;const{selection:i}=n;let o=null;if(sR(i)&&(o=i.$cursor),o){const c=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!s.isInSet(c)||!c.some(d=>d.type.excludes(s))}const{ranges:l}=i;return l.some(({$from:c,$to:d})=>{let u=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(s):!1;return t.doc.nodesBetween(c.pos,d.pos,(f,h,p)=>{if(u)return!1;if(f.isInline){const m=!p||p.type.allowsMarkType(s),x=!!s.isInSet(f.marks)||!f.marks.some(y=>y.type.excludes(s));u=m&&x}return!u}),u})}const Ete=(t,n={})=>({tr:s,state:r,dispatch:i})=>{const{selection:o}=s,{empty:l,ranges:c}=o,d=Si(t,r.schema);if(i)if(l){const u=jte(r,d);s.addStoredMark(d.create({...u,...n}))}else c.forEach(u=>{const f=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(f,h,(p,m)=>{const x=Math.max(m,f),y=Math.min(m+p.nodeSize,h);p.marks.find(b=>b.type===d)?p.marks.forEach(b=>{d===b.type&&s.addMark(x,y,d.create({...b.attrs,...n}))}):s.addMark(x,y,d.create(n))})});return _te(r,s,d)},Tte=(t,n)=>({tr:s})=>(s.setMeta(t,n),!0),Mte=(t,n={})=>({state:s,dispatch:r,chain:i})=>{const o=Jt(t,s.schema);let l;return s.selection.$anchor.sameParent(s.selection.$head)&&(l=s.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>Sf(o,{...l,...n})(s)?!0:c.clearNodes()).command(({state:c})=>Sf(o,{...l,...n})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ate=t=>({tr:n,dispatch:s})=>{if(s){const{doc:r}=n,i=zi(t,0,r.content.size),o=fe.create(r,i);n.setSelection(o)}return!0},Pte=t=>({tr:n,dispatch:s})=>{if(s){const{doc:r}=n,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=le.atStart(r).from,c=le.atEnd(r).to,d=zi(i,l,c),u=zi(o,l,c),f=le.create(r,d,u);n.setSelection(f)}return!0},Rte=t=>({state:n,dispatch:s})=>{const r=Jt(t,n.schema);return hP(r)(n,s)};function RN(t,n){const s=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(s){const r=s.filter(i=>n==null?void 0:n.includes(i.type.name));t.tr.ensureMarks(r)}}const Ote=({keepMarks:t=!0}={})=>({tr:n,state:s,dispatch:r,editor:i})=>{const{selection:o,doc:l}=n,{$from:c,$to:d}=o,u=i.extensionManager.attributes,f=Su(u,c.node().type.name,c.node().attrs);if(o instanceof fe&&o.node.isBlock)return!c.parentOffset||!Rn(l,c.pos)?!1:(r&&(t&&RN(s,i.extensionManager.splittableMarks),n.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const h=d.parentOffset===d.parent.content.size,p=c.depth===0?void 0:Nte(c.node(-1).contentMatchAt(c.indexAfter(-1)));let m=h&&p?[{type:p,attrs:f}]:void 0,x=Rn(n.doc,n.mapping.map(c.pos),1,m);if(!m&&!x&&Rn(n.doc,n.mapping.map(c.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:f}]:void 0),r){if(x&&(o instanceof le&&n.deleteSelection(),n.split(n.mapping.map(c.pos),1,m),p&&!h&&!c.parentOffset&&c.parent.type!==p)){const y=n.mapping.map(c.before()),v=n.doc.resolve(y);c.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&n.setNodeMarkup(n.mapping.map(c.before()),p)}t&&RN(s,i.extensionManager.splittableMarks),n.scrollIntoView()}return x},Dte=(t,n={})=>({tr:s,state:r,dispatch:i,editor:o})=>{var l;const c=Jt(t,r.schema),{$from:d,$to:u}=r.selection,f=r.selection.node;if(f&&f.isBlock||d.depth<2||!d.sameParent(u))return!1;const h=d.node(-1);if(h.type!==c)return!1;const p=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let b=U.empty;const w=d.index(-1)?1:d.index(-2)?2:3;for(let k=d.depth-w;k>=d.depth-3;k-=1)b=U.from(d.node(k).copy(b));const j=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,N={...Su(p,d.node().type.name,d.node().attrs),...n},S=((l=c.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(N))||void 0;b=b.append(U.from(c.createAndFill(null,S)||void 0));const _=d.before(d.depth-(w-1));s.replace(_,d.after(-j),new ee(b,4-w,0));let C=-1;s.doc.nodesBetween(_,s.doc.content.size,(k,E)=>{if(C>-1)return!1;k.isTextblock&&k.content.size===0&&(C=E+1)}),C>-1&&s.setSelection(le.near(s.doc.resolve(C))),s.scrollIntoView()}return!0}const m=u.pos===d.end()?h.contentMatchAt(0).defaultType:null,x={...Su(p,h.type.name,h.attrs),...n},y={...Su(p,d.node().type.name,d.node().attrs),...n};s.delete(d.pos,u.pos);const v=m?[{type:c,attrs:x},{type:m,attrs:y}]:[{type:c,attrs:x}];if(!Rn(s.doc,d.pos,2))return!1;if(i){const{selection:b,storedMarks:w}=r,{splittableMarks:j}=o.extensionManager,N=w||b.$to.parentOffset&&b.$from.marks();if(s.split(d.pos,2,v).scrollIntoView(),!N||!i)return!0;const S=N.filter(_=>j.includes(_.type.name));s.ensureMarks(S)}return!0},mm=(t,n)=>{const s=$0(l=>l.type===n)(t.selection);if(!s)return!0;const r=t.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return s.node.type===(i==null?void 0:i.type)&&Ys(t.doc,s.pos)&&t.join(s.pos),!0},gm=(t,n)=>{const s=$0(l=>l.type===n)(t.selection);if(!s)return!0;const r=t.doc.resolve(s.start).after(s.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return s.node.type===(i==null?void 0:i.type)&&Ys(t.doc,r)&&t.join(r),!0},Ite=(t,n,s,r={})=>({editor:i,tr:o,state:l,dispatch:c,chain:d,commands:u,can:f})=>{const{extensions:h,splittableMarks:p}=i.extensionManager,m=Jt(t,l.schema),x=Jt(n,l.schema),{selection:y,storedMarks:v}=l,{$from:b,$to:w}=y,j=b.blockRange(w),N=v||y.$to.parentOffset&&y.$from.marks();if(!j)return!1;const S=$0(_=>PN(_.type.name,h))(y);if(j.depth>=1&&S&&j.depth-S.depth<=1){if(S.node.type===m)return u.liftListItem(x);if(PN(S.node.type.name,h)&&m.validContent(S.node.content)&&c)return d().command(()=>(o.setNodeMarkup(S.pos,m),!0)).command(()=>mm(o,m)).command(()=>gm(o,m)).run()}return!s||!N||!c?d().command(()=>f().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>mm(o,m)).command(()=>gm(o,m)).run():d().command(()=>{const _=f().wrapInList(m,r),C=N.filter(k=>p.includes(k.type.name));return o.ensureMarks(C),_?!0:u.clearNodes()}).wrapInList(m,r).command(()=>mm(o,m)).command(()=>gm(o,m)).run()},Lte=(t,n={},s={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=s,l=Si(t,r.schema);return kte(r,l,n)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,n)},$te=(t,n,s={})=>({state:r,commands:i})=>{const o=Jt(t,r.schema),l=Jt(n,r.schema),c=L0(r,o,s);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?i.setNode(l,d):i.setNode(o,{...d,...s})},Fte=(t,n={})=>({state:s,commands:r})=>{const i=Jt(t,s.schema);return L0(s,i,n)?r.lift(i):r.wrapIn(i,n)},zte=()=>({state:t,dispatch:n})=>{const s=t.plugins;for(let r=0;r<s.length;r+=1){const i=s[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(n){const l=t.tr,c=o.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},Bte=()=>({tr:t,dispatch:n})=>{const{selection:s}=t,{empty:r,ranges:i}=s;return r||n&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Vte=(t,n={})=>({tr:s,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=n,{selection:c}=s,d=Si(t,r.schema),{$from:u,empty:f,ranges:h}=c;if(!i)return!0;if(f&&l){let{from:p,to:m}=c;const x=(o=u.marks().find(v=>v.type===d))===null||o===void 0?void 0:o.attrs,y=D0(u,d,x);y&&(p=y.from,m=y.to),s.removeMark(p,m,d)}else h.forEach(p=>{s.removeMark(p.$from.pos,p.$to.pos,d)});return s.removeStoredMark(d),!0},Hte=(t,n={})=>({tr:s,state:r,dispatch:i})=>{let o=null,l=null;const c=aR(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(o=Jt(t,r.schema)),c==="mark"&&(l=Si(t,r.schema)),i&&s.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let h,p,m,x;s.selection.empty?r.doc.nodesBetween(u,f,(y,v)=>{o&&o===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),h=v,p=y)}):r.doc.nodesBetween(u,f,(y,v)=>{v<u&&o&&o===y.type&&(m=Math.max(v,u),x=Math.min(v+y.nodeSize,f),h=v,p=y),v>=u&&v<=f&&(o&&o===y.type&&s.setNodeMarkup(v,void 0,{...y.attrs,...n}),l&&y.marks.length&&y.marks.forEach(b=>{if(l===b.type){const w=Math.max(v,u),j=Math.min(v+y.nodeSize,f);s.addMark(w,j,l.create({...b.attrs,...n}))}}))}),p&&(h!==void 0&&s.setNodeMarkup(h,void 0,{...p.attrs,...n}),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&s.addMark(m,x,l.create({...y.attrs,...n}))}))}),!0):!1},Ute=(t,n={})=>({state:s,dispatch:r})=>{const i=Jt(t,s.schema);return dP(i,n)(s,r)},Wte=(t,n={})=>({state:s,dispatch:r})=>{const i=Jt(t,s.schema);return uP(i,n)(s,r)};var qte=Object.freeze({__proto__:null,blur:Mee,clearContent:Aee,clearNodes:Pee,command:Ree,createParagraphNear:Oee,cut:Dee,deleteCurrentNode:Iee,deleteNode:Lee,deleteRange:$ee,deleteSelection:Fee,enter:zee,exitCode:Bee,extendMarkRange:Vee,first:Hee,focus:qee,forEach:Kee,insertContent:Gee,insertContentAt:Jee,joinBackward:ete,joinDown:Zee,joinForward:tte,joinItemBackward:nte,joinItemForward:ste,joinTextblockBackward:rte,joinTextblockForward:ite,joinUp:Qee,keyboardShortcut:ote,lift:lte,liftEmptyBlock:cte,liftListItem:dte,newlineInCode:ute,resetAttributes:fte,scrollIntoView:hte,selectAll:pte,selectNodeBackward:mte,selectNodeForward:gte,selectParentNode:xte,selectTextblockEnd:yte,selectTextblockStart:vte,setContent:wte,setMark:Ete,setMeta:Tte,setNode:Mte,setNodeSelection:Ate,setTextSelection:Pte,sinkListItem:Rte,splitBlock:Ote,splitListItem:Dte,toggleList:Ite,toggleMark:Lte,toggleNode:$te,toggleWrap:Fte,undoInputRule:zte,unsetAllMarks:Bte,unsetMark:Vte,updateAttributes:Hte,wrapIn:Ute,wrapInList:Wte});an.create({name:"commands",addCommands(){return{...qte}}});an.create({name:"drop",addProseMirrorPlugins(){return[new ht({key:new pt("tiptapDrop"),props:{handleDrop:(t,n,s,r)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:s,moved:r})}}})]}});an.create({name:"editable",addProseMirrorPlugins(){return[new ht({key:new pt("editable"),props:{editable:()=>this.editor.options.editable}})]}});const Kte=new pt("focusEvents");an.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ht({key:Kte,props:{handleDOMEvents:{focus:(n,s)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return n.dispatch(r),!1},blur:(n,s)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return n.dispatch(r),!1}}}})]}});an.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:u}=c,{empty:f,$anchor:h}=d,{pos:p,parent:m}=h,x=h.parent.isTextblock&&p>0?c.doc.resolve(p-1):h,y=x.parent.type.spec.isolating,v=h.pos-h.parentOffset,b=y&&x.parent.childCount===1?v===h.pos:he.atStart(u).from===p;return!f||!m.type.isTextblock||m.textContent.length||!b||b&&h.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return I0()||iR()?o:i},addProseMirrorPlugins(){return[new ht({key:new pt("clearDocument"),appendTransaction:(t,n,s)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!n.doc.eq(s.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:c}=n.selection,d=he.atStart(n.doc).from,u=he.atEnd(n.doc).to;if(o||!(l===d&&c===u)||!lR(s.doc))return;const p=s.tr,m=tR({state:s,transaction:p}),{commands:x}=new jee({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}});an.create({name:"paste",addProseMirrorPlugins(){return[new ht({key:new pt("tiptapPaste"),props:{handlePaste:(t,n,s)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:s})}}})]}});an.create({name:"tabindex",addProseMirrorPlugins(){return[new ht({key:new pt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Ro(t){return new Bh({find:t.find,handler:({state:n,range:s,match:r})=>{const i=vt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=n,l=r[r.length-1],c=r[0];if(l){const d=c.search(/\S/),u=s.from+c.indexOf(l),f=u+l.length;if(oR(s.from,s.to,n.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;f<s.to&&o.delete(f,s.to),u>s.from&&o.delete(s.from+d,u);const p=s.from+d+l.length;o.addMark(s.from+d,p,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function Gte(t){return new Bh({find:t.find,handler:({state:n,range:s,match:r})=>{const i=vt(t.getAttributes,void 0,r)||{},{tr:o}=n,l=s.from;let c=s.to;const d=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let f=l+u;f>c?f=c:c=f+r[1].length;const h=r[0][r[0].length-1];o.insertText(h,l+r[0].length-1),o.replaceWith(f,c,d)}else if(r[0]){const u=t.type.isInline?l:l-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()}})}function kx(t){return new Bh({find:t.find,handler:({state:n,range:s,match:r})=>{const i=n.doc.resolve(s.from),o=vt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;n.tr.delete(s.from,s.to).setBlockType(s.from,s.from,t.type,o)}})}function Rc(t){return new Bh({find:t.find,handler:({state:n,range:s,match:r,chain:i})=>{const o=vt(t.getAttributes,void 0,r)||{},l=n.tr.delete(s.from,s.to),d=l.doc.resolve(s.from).blockRange(),u=d&&i0(d,t.type,o);if(!u)return null;if(l.wrap(d,u),t.keepMarks&&t.editor){const{selection:h,storedMarks:p}=n,{splittableMarks:m}=t.editor.extensionManager,x=p||h.$to.parentOffset&&h.$from.marks();if(x){const y=x.filter(v=>m.includes(v.type.name));l.ensureMarks(y)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,o).run()}const f=l.doc.resolve(s.from-1).nodeBefore;f&&f.type===t.type&&Ys(l.doc,s.from-1)&&(!t.joinPredicate||t.joinPredicate(r,f))&&l.join(s.from-1)}})}let ks=class Cx{constructor(n={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...n},this.name=this.config.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=vt(Kt(this,"addOptions",{name:this.name}))),this.storage=vt(Kt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new Cx(n)}configure(n={}){const s=this.extend({...this.config,addOptions:()=>Vh(this.options,n)});return s.name=this.name,s.parent=this.parent,s}extend(n={}){const s=new Cx(n);return s.parent=this,this.child=s,s.name=n.name?n.name:s.parent.name,n.defaultOptions&&Object.keys(n.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=vt(Kt(s,"addOptions",{name:s.name})),s.storage=vt(Kt(s,"addStorage",{name:s.name,options:s.options})),s}};function Oo(t){return new _ee({find:t.find,handler:({state:n,range:s,match:r,pasteEvent:i})=>{const o=vt(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=n,c=r[r.length-1],d=r[0];let u=s.to;if(c){const f=d.search(/\S/),h=s.from+d.indexOf(c),p=h+c.length;if(oR(s.from,s.to,n.doc).filter(x=>x.mark.type.excluded.find(v=>v===t.type&&v!==x.mark.type)).filter(x=>x.to>h).length)return null;p<s.to&&l.delete(p,s.to),h>s.from&&l.delete(s.from+f,h),u=s.from+f+c.length,l.addMark(s.from+f,u,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}function Yte(t,n){const{selection:s}=t,{$from:r}=s;if(s instanceof fe){const o=r.index();return r.parent.canReplaceWith(o,o+1,n)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(n))return!0;i-=1}return!1}const Xte=/^\s*>\s$/,Jte=ks.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Rc({find:Xte,type:this.type})]}}),Qte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Zte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ene=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tne=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nne=ua.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ro({find:Qte,type:this.type}),Ro({find:ene,type:this.type})]},addPasteRules(){return[Oo({find:Zte,type:this.type}),Oo({find:tne,type:this.type})]}}),sne="listItem",ON="textStyle",DN=/^\s*([-+*])\s$/,rne=ks.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(sne,this.editor.getAttributes(ON)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Rc({find:DN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Rc({find:DN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ON),editor:this.editor})),[t]}}),ine=/(^|[^`])`([^`]+)`(?!`)/,ane=/(^|[^`])`([^`]+)`(?!`)/g,one=ua.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ro({find:ine,type:this.type})]},addPasteRules(){return[Oo({find:ane,type:this.type})]}}),lne=/^```([a-z]+)?[\s\n]$/,cne=/^~~~([a-z]+)?[\s\n]$/,dne=ks.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var n;const{languageClassPrefix:s}=this.options,o=[...((n=t.firstElementChild)===null||n===void 0?void 0:n.classList)||[]].filter(l=>l.startsWith(s)).map(l=>l.replace(s,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:n}){return["pre",wn(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:n})=>n.setNode(this.name,t),toggleCodeBlock:t=>({commands:n})=>n.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:n}=this.editor.state.selection,s=n.pos===1;return!t||n.parent.type.name!==this.name?!1:s||!n.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:n}=t,{selection:s}=n,{$from:r,empty:i}=s;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:n}=t,{selection:s,doc:r}=n,{$from:i,empty:o}=s;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:u})=>(u.setSelection(he.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[kx({find:lne,type:this.type,getAttributes:t=>({language:t[1]})}),kx({find:cne,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ht({key:new pt("codeBlockVSCodeHandler"),props:{handlePaste:(t,n)=>{if(!n.clipboardData||this.editor.isActive(this.type.name))return!1;const s=n.clipboardData.getData("text/plain"),r=n.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!s||!o)return!1;const{tr:l,schema:c}=t.state,d=c.text(s.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(le.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),une=ks.create({name:"doc",topNode:!0,content:"block+"});function fne(t={}){return new ht({view(n){return new hne(n,t)}})}class hne{constructor(n,s){var r;this.editorView=n,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return n.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:n,handler:s})=>this.editorView.dom.removeEventListener(n,s))}update(n,s){this.cursorPos!=null&&s.doc!=n.state.doc&&(this.cursorPos>n.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(n){n!=this.cursorPos&&(this.cursorPos=n,n==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let n=this.editorView.state.doc.resolve(this.cursorPos),s=!n.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,c=o.height/i.offsetHeight;if(s){let h=n.nodeBefore,p=n.nodeAfter;if(h||p){let m=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(m){let x=m.getBoundingClientRect(),y=h?x.bottom:x.top;h&&p&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*c;r={left:x.left,right:x.right,top:y-v,bottom:y+v}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*l;r={left:h.left-p,right:h.left+p,top:h.top,bottom:h.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let u,f;if(!d||d==document.body&&getComputedStyle(d).position=="static")u=-pageXOffset,f=-pageYOffset;else{let h=d.getBoundingClientRect(),p=h.width/d.offsetWidth,m=h.height/d.offsetHeight;u=h.left-d.scrollLeft*p,f=h.top-d.scrollTop*m}this.element.style.left=(r.left-u)/l+"px",this.element.style.top=(r.top-f)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),n)}dragover(n){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:n.clientX,top:n.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,s,n):i;if(s&&!o){let l=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=BA(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(n){this.editorView.dom.contains(n.relatedTarget)||this.setCursor(null)}}const pne=an.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[fne(this.options)]}});class Qe extends he{constructor(n){super(n,n)}map(n,s){let r=n.resolve(s.map(this.head));return Qe.valid(r)?new Qe(r):he.near(r)}content(){return ee.empty}eq(n){return n instanceof Qe&&n.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(n,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(n.resolve(s.pos))}getBookmark(){return new F0(this.anchor)}static valid(n){let s=n.parent;if(s.isTextblock||!mne(n)||!gne(n))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let i=s.contentMatchAt(n.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(n,s,r=!1){e:for(;;){if(!r&&Qe.valid(n))return n;let i=n.pos,o=null;for(let l=n.depth;;l--){let c=n.node(l);if(s>0?n.indexAfter(l)<c.childCount:n.index(l)>0){o=c.child(s>0?n.indexAfter(l):n.index(l)-1);break}else if(l==0)return null;i+=s;let d=n.doc.resolve(i);if(Qe.valid(d))return d}for(;;){let l=s>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!fe.isSelectable(o)){n=n.doc.resolve(i+o.nodeSize*s),r=!1;continue e}break}o=l,i+=s;let c=n.doc.resolve(i);if(Qe.valid(c))return c}return null}}}Qe.prototype.visible=!1;Qe.findFrom=Qe.findGapCursorFrom;he.jsonID("gapcursor",Qe);class F0{constructor(n){this.pos=n}map(n){return new F0(n.map(this.pos))}resolve(n){let s=n.resolve(this.pos);return Qe.valid(s)?new Qe(s):he.near(s)}}function cR(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function mne(t){for(let n=t.depth;n>=0;n--){let s=t.index(n),r=t.node(n);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(s-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||cR(i.type))return!0;if(i.inlineContent)return!1}}return!0}function gne(t){for(let n=t.depth;n>=0;n--){let s=t.indexAfter(n),r=t.node(n);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(s);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||cR(i.type))return!0;if(i.inlineContent)return!1}}return!0}function xne(){return new ht({props:{decorations:wne,createSelectionBetween(t,n,s){return n.pos==s.pos&&Qe.valid(s)?new Qe(s):null},handleClick:vne,handleKeyDown:yne,handleDOMEvents:{beforeinput:bne}}})}const yne=$P({ArrowLeft:Kd("horiz",-1),ArrowRight:Kd("horiz",1),ArrowUp:Kd("vert",-1),ArrowDown:Kd("vert",1)});function Kd(t,n){const s=t=="vert"?n>0?"down":"up":n>0?"right":"left";return function(r,i,o){let l=r.selection,c=n>0?l.$to:l.$from,d=l.empty;if(l instanceof le){if(!o.endOfTextblock(s)||c.depth==0)return!1;d=!1,c=r.doc.resolve(n>0?c.after():c.before())}let u=Qe.findGapCursorFrom(c,n,d);return u?(i&&i(r.tr.setSelection(new Qe(u))),!0):!1}}function vne(t,n,s){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(n);if(!Qe.valid(r))return!1;let i=t.posAtCoords({left:s.clientX,top:s.clientY});return i&&i.inside>-1&&fe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Qe(r))),!0)}function bne(t,n){if(n.inputType!="insertCompositionText"||!(t.state.selection instanceof Qe))return!1;let{$from:s}=t.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=U.empty;for(let l=r.length-1;l>=0;l--)i=U.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(s.pos,s.pos,new ee(i,0,0));return o.setSelection(le.near(o.doc.resolve(s.pos+1))),t.dispatch(o),!1}function wne(t){if(!(t.selection instanceof Qe))return null;let n=document.createElement("div");return n.className="ProseMirror-gapcursor",rt.create(t.doc,[Mn.widget(t.selection.head,n,{key:"gapcursor"})])}const jne=an.create({name:"gapCursor",addProseMirrorPlugins(){return[xne()]},extendNodeSchema(t){var n;const s={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(n=vt(Kt(t,"allowGapCursor",s)))!==null&&n!==void 0?n:null}}}),Nne=ks.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",wn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:n,state:s,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=s;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,d=o||i.$to.parentOffset&&i.$from.marks();return n().insertContent({type:this.name}).command(({tr:u,dispatch:f})=>{if(f&&d&&l){const h=d.filter(p=>c.includes(p.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Sne=ks.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:n}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,wn(this.options.HTMLAttributes,n),0]},addCommands(){return{setHeading:t=>({commands:n})=>this.options.levels.includes(t.level)?n.setNode(this.name,t):!1,toggleHeading:t=>({commands:n})=>this.options.levels.includes(t.level)?n.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,n)=>({...t,[`Mod-Alt-${n}`]:()=>this.editor.commands.toggleHeading({level:n})}),{})},addInputRules(){return this.options.levels.map(t=>kx({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Rf=200,Ct=function(){};Ct.prototype.append=function(n){return n.length?(n=Ct.from(n),!this.length&&n||n.length<Rf&&this.leafAppend(n)||this.length<Rf&&n.leafPrepend(this)||this.appendInner(n)):this};Ct.prototype.prepend=function(n){return n.length?Ct.from(n).append(this):this};Ct.prototype.appendInner=function(n){return new kne(this,n)};Ct.prototype.slice=function(n,s){return n===void 0&&(n=0),s===void 0&&(s=this.length),n>=s?Ct.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,s))};Ct.prototype.get=function(n){if(!(n<0||n>=this.length))return this.getInner(n)};Ct.prototype.forEach=function(n,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length),s<=r?this.forEachInner(n,s,r,0):this.forEachInvertedInner(n,s,r,0)};Ct.prototype.map=function(n,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(n(o,l))},s,r),i};Ct.from=function(n){return n instanceof Ct?n:n&&n.length?new dR(n):Ct.empty};var dR=function(t){function n(r){t.call(this),this.values=r}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var s={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new n(this.values.slice(i,o))},n.prototype.getInner=function(i){return this.values[i]},n.prototype.forEachInner=function(i,o,l,c){for(var d=o;d<l;d++)if(i(this.values[d],c+d)===!1)return!1},n.prototype.forEachInvertedInner=function(i,o,l,c){for(var d=o-1;d>=l;d--)if(i(this.values[d],c+d)===!1)return!1},n.prototype.leafAppend=function(i){if(this.length+i.length<=Rf)return new n(this.values.concat(i.flatten()))},n.prototype.leafPrepend=function(i){if(this.length+i.length<=Rf)return new n(i.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(n.prototype,s),n}(Ct);Ct.empty=new dR([]);var kne=function(t){function n(s,r){t.call(this),this.left=s,this.right=r,this.length=s.length+r.length,this.depth=Math.max(s.depth,r.depth)+1}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},n.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},n.prototype.forEachInner=function(r,i,o,l){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},n.prototype.forEachInvertedInner=function(r,i,o,l){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(i,c),o,l)===!1)return!1},n.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},n.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new n(this.left,i)},n.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new n(i,this.right)},n.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new n(this.left,new n(this.right,r)):new n(this,r)},n}(Ct);const Cne=500;class ds{constructor(n,s){this.items=n,this.eventCount=s}popEvent(n,s){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;s&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=n.tr,c,d,u=[],f=[];return this.items.forEach((h,p)=>{if(!h.step){i||(i=this.remapping(r,p+1),o=i.maps.length),o--,f.push(h);return}if(i){f.push(new As(h.map));let m=h.step.map(i.slice(o)),x;m&&l.maybeStep(m).doc&&(x=l.mapping.maps[l.mapping.maps.length-1],u.push(new As(x,void 0,void 0,u.length+f.length))),o--,x&&i.appendMap(x,o)}else l.maybeStep(h.step);if(h.selection)return c=i?h.selection.map(i.slice(o)):h.selection,d=new ds(this.items.slice(0,r).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:c}}addTransform(n,s,r,i){let o=[],l=this.eventCount,c=this.items,d=!i&&c.length?c.get(c.length-1):null;for(let f=0;f<n.steps.length;f++){let h=n.steps[f].invert(n.docs[f]),p=new As(n.mapping.maps[f],h,s),m;(m=d&&d.merge(p))&&(p=m,f?o.pop():c=c.slice(0,c.length-1)),o.push(p),s&&(l++,s=void 0),i||(d=p)}let u=l-r.depth;return u>Ene&&(c=_ne(c,u),l-=u),new ds(c.append(o),l)}remapping(n,s){let r=new _c;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=n?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},n,s),r}addMaps(n){return this.eventCount==0?this:new ds(this.items.append(n.map(s=>new As(s))),this.eventCount)}rebased(n,s){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-s),o=n.mapping,l=n.steps.length,c=this.eventCount;this.items.forEach(p=>{p.selection&&c--},i);let d=s;this.items.forEach(p=>{let m=o.getMirror(--d);if(m==null)return;l=Math.min(l,m);let x=o.maps[m];if(p.step){let y=n.steps[m].invert(n.docs[m]),v=p.selection&&p.selection.map(o.slice(d+1,m));v&&c++,r.push(new As(x,y,v))}else r.push(new As(x))},i);let u=[];for(let p=s;p<l;p++)u.push(new As(o.maps[p]));let f=this.items.slice(0,i).append(u).append(r),h=new ds(f,c);return h.emptyItemCount()>Cne&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let n=0;return this.items.forEach(s=>{s.step||n++}),n}compress(n=this.items.length){let s=this.remapping(0,n),r=s.maps.length,i=[],o=0;return this.items.forEach((l,c)=>{if(c>=n)i.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(s.slice(r)),u=d&&d.getMap();if(r--,u&&s.appendMap(u,r),d){let f=l.selection&&l.selection.map(s.slice(r));f&&o++;let h=new As(u.invert(),d,f),p,m=i.length-1;(p=i.length&&i[m].merge(h))?i[m]=p:i.push(h)}}else l.map&&r--},this.items.length,0),new ds(Ct.from(i.reverse()),o)}}ds.empty=new ds(Ct.empty,0);function _ne(t,n){let s;return t.forEach((r,i)=>{if(r.selection&&n--==0)return s=i,!1}),t.slice(s)}class As{constructor(n,s,r,i){this.map=n,this.step=s,this.selection=r,this.mirrorOffset=i}merge(n){if(this.step&&n.step&&!n.selection){let s=n.step.merge(this.step);if(s)return new As(s.getMap().invert(),s,this.selection)}}}class Pr{constructor(n,s,r,i,o){this.done=n,this.undone=s,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const Ene=20;function Tne(t,n,s,r){let i=s.getMeta(Xi),o;if(i)return i.historyState;s.getMeta(Pne)&&(t=new Pr(t.done,t.undone,null,0,-1));let l=s.getMeta("appendedTransaction");if(s.steps.length==0)return t;if(l&&l.getMeta(Xi))return l.getMeta(Xi).redo?new Pr(t.done.addTransform(s,void 0,r,ku(n)),t.undone,IN(s.mapping.maps),t.prevTime,t.prevComposition):new Pr(t.done,t.undone.addTransform(s,void 0,r,ku(n)),null,t.prevTime,t.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=s.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(s.time||0)-r.newGroupDelay||!Mne(s,t.prevRanges)),u=l?xm(t.prevRanges,s.mapping):IN(s.mapping.maps);return new Pr(t.done.addTransform(s,d?n.selection.getBookmark():void 0,r,ku(n)),ds.empty,u,s.time,c??t.prevComposition)}else return(o=s.getMeta("rebased"))?new Pr(t.done.rebased(s,o),t.undone.rebased(s,o),xm(t.prevRanges,s.mapping),t.prevTime,t.prevComposition):new Pr(t.done.addMaps(s.mapping.maps),t.undone.addMaps(s.mapping.maps),xm(t.prevRanges,s.mapping),t.prevTime,t.prevComposition)}function Mne(t,n){if(!n)return!1;if(!t.docChanged)return!0;let s=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<n.length;o+=2)r<=n[o+1]&&i>=n[o]&&(s=!0)}),s}function IN(t){let n=[];for(let s=t.length-1;s>=0&&n.length==0;s--)t[s].forEach((r,i,o,l)=>n.push(o,l));return n}function xm(t,n){if(!t)return null;let s=[];for(let r=0;r<t.length;r+=2){let i=n.map(t[r],1),o=n.map(t[r+1],-1);i<=o&&s.push(i,o)}return s}function Ane(t,n,s){let r=ku(n),i=Xi.get(n).spec.config,o=(s?t.undone:t.done).popEvent(n,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(s?t.done:t.undone).addTransform(o.transform,n.selection.getBookmark(),i,r),d=new Pr(s?c:o.remaining,s?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(Xi,{redo:s,historyState:d})}let ym=!1,LN=null;function ku(t){let n=t.plugins;if(LN!=n){ym=!1,LN=n;for(let s=0;s<n.length;s++)if(n[s].spec.historyPreserveItems){ym=!0;break}}return ym}const Xi=new pt("history"),Pne=new pt("closeHistory");function Rne(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ht({key:Xi,state:{init(){return new Pr(ds.empty,ds.empty,null,0,-1)},apply(n,s,r){return Tne(s,r,n,t)}},config:t,props:{handleDOMEvents:{beforeinput(n,s){let r=s.inputType,i=r=="historyUndo"?fR:r=="historyRedo"?hR:null;return i?(s.preventDefault(),i(n.state,n.dispatch)):!1}}}})}function uR(t,n){return(s,r)=>{let i=Xi.getState(s);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=Ane(i,s,t);o&&r(n?o.scrollIntoView():o)}return!0}}const fR=uR(!1,!0),hR=uR(!0,!0),One=an.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:n})=>fR(t,n),redo:()=>({state:t,dispatch:n})=>hR(t,n)}},addProseMirrorPlugins(){return[Rne(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Dne=ks.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",wn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:n})=>{if(!Yte(n,n.schema.nodes[this.name]))return!1;const{selection:s}=n,{$from:r,$to:i}=s,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Cte(s)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:c})=>{var d;if(c){const{$to:u}=l.selection,f=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?l.setSelection(le.create(l.doc,u.pos+1)):u.nodeAfter.isBlock?l.setSelection(fe.create(l.doc,u.pos)):l.setSelection(le.create(l.doc,u.pos));else{const h=(d=u.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();h&&(l.insert(f,h),l.setSelection(le.create(l.doc,f+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Gte({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Ine=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Lne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,$ne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Fne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,zne=ua.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ro({find:Ine,type:this.type}),Ro({find:$ne,type:this.type})]},addPasteRules(){return[Oo({find:Lne,type:this.type}),Oo({find:Fne,type:this.type})]}}),Bne=ks.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",wn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Vne="listItem",$N="textStyle",FN=/^(\d+)\.\s$/,Hne=ks.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:n,...s}=t;return n===1?["ol",wn(this.options.HTMLAttributes,s),0]:["ol",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:n})=>this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Vne,this.editor.getAttributes($N)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Rc({find:FN,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,s)=>s.childCount+s.attrs.start===+n[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Rc({find:FN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:n=>({start:+n[1],...this.editor.getAttributes($N)}),joinPredicate:(n,s)=>s.childCount+s.attrs.start===+n[1],editor:this.editor})),[t]}}),Une=ks.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Wne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,qne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Kne=ua.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ro({find:Wne,type:this.type})]},addPasteRules(){return[Oo({find:qne,type:this.type})]}}),Gne=ks.create({name:"text",group:"inline"});an.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(nne.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Jte.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(rne.configure(this.options.bulletList)),this.options.code!==!1&&t.push(one.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(dne.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(une.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(pne.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(jne.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(Nne.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(Sne.configure(this.options.heading)),this.options.history!==!1&&t.push(One.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(Dne.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(zne.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Bne.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(Hne.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(Une.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(Kne.configure(this.options.strike)),this.options.text!==!1&&t.push(Gne.configure(this.options.text)),t}});var Yne=20,pR=(t,n=0)=>{const s=[];return!t.children.length||n>Yne||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?s.push(r):r.children.length&&s.push(...pR(r,n+1))}),s},Xne=t=>{if(!t.children.length)return;const n=pR(t);n&&n.forEach(s=>{var r,i;const o=s.getAttribute("style"),l=(i=(r=s.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");s.setAttribute("style",`${l};${o}`)})},Jne=P0.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Xne(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ni(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:n})=>n.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:n}=t;return t.doc.nodesBetween(n.from,n.to,(s,r)=>{if(s.isTextblock)return!0;s.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||t.removeMark(r,r+s.nodeSize,this.type)}),!0}}}}),Qne=It.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var n;const s=t.getAttribute("style");if(s){const r=s.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(l==="background-color")return c.replace(/['"]+/g,"")}}}return(n=t.style.backgroundColor)==null?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:n})=>n().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Zne=It.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var n;const s=t.getAttribute("style");if(s){const r=s.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(l==="color")return c.replace(/['"]+/g,"")}}}return(n=t.style.color)==null?void 0:n.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:n})=>n().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),ese=It.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:n})=>n().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),tse=It.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:n})=>n().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),nse=It.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:n})=>n().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});It.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(Qne.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(Zne.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(ese.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(tse.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(nse.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(Jne.configure(this.options.textStyle)),t}});P0.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ni(this.options.HTMLAttributes,t),0]},parseMarkdown(t,n){return n.applyMark(this.name||"underline",n.parseInline(t.tokens||[]))},renderMarkdown(t,n){return`++${n.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,n,s){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:s.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var sse=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,rse=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g;P0.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ni(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,n)=>`==${n.renderChildren(t)}==`,parseMarkdown:(t,n)=>n.applyMark("highlight",n.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,n,s){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const o=i[2].trim(),l=s.inlineTokens(o);return{type:"highlight",raw:i[0],text:o,tokens:l}}}},addCommands(){return{setHighlight:t=>({commands:n})=>n.setMark(this.name,t),toggleHighlight:t=>({commands:n})=>n.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[cee({find:sse,type:this.type})]},addPasteRules(){return[wee({find:rse,type:this.type})]}});It.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const n=t.style.textAlign;return this.options.alignments.includes(n)?n:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:n})=>this.options.alignments.includes(t)?this.options.types.map(s=>n.updateAttributes(s,{textAlign:t})).every(s=>s):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(n=>t.resetAttributes(n,"textAlign")).every(n=>n),toggleTextAlign:t=>({editor:n,commands:s})=>this.options.alignments.includes(t)?n.isActive({textAlign:t})?s.unsetTextAlign():s.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});var ise=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/;td.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ni(this.options.HTMLAttributes,t)]},parseMarkdown:(t,n)=>n.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var n,s,r,i,o,l;const c=(s=(n=t.attrs)==null?void 0:n.src)!=null?s:"",d=(i=(r=t.attrs)==null?void 0:r.alt)!=null?i:"",u=(l=(o=t.attrs)==null?void 0:o.title)!=null?l:"";return u?`![${d}](${c} "${u}")`:`![${d}](${c})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:t,minWidth:n,minHeight:s,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:i,getPos:o,HTMLAttributes:l})=>{const c=document.createElement("img");Object.entries(l).forEach(([f,h])=>{if(h!=null)switch(f){case"width":case"height":break;default:c.setAttribute(f,h);break}}),c.src=l.src;const d=new fee({element:c,node:i,getPos:o,onResize:(f,h)=>{c.style.width=`${f}px`,c.style.height=`${h}px`},onCommit:(f,h)=>{const p=o();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:f,height:h}).run()},onUpdate:(f,h,p)=>f.type===i.type,options:{directions:t,min:{width:n,height:s},preserveAspectRatio:r===!0}}),u=d.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",c.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},d}},addCommands(){return{setImage:t=>({commands:n})=>n.insertContent({type:this.name,attrs:t})}},addInputRules(){return[dee({find:ise,type:this.type,getAttributes:t=>{const[,,n,s,r]=t;return{src:s,alt:n,title:r}}})]}});var _x,Ex;if(typeof WeakMap<"u"){let t=new WeakMap;_x=n=>t.get(n),Ex=(n,s)=>(t.set(n,s),s)}else{const t=[];let s=0;_x=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},Ex=(r,i)=>(s==10&&(s=0),t[s++]=r,t[s++]=i)}var Ze=class{constructor(t,n,s,r){this.width=t,this.height=n,this.map=s,this.problems=r}findCell(t){for(let n=0;n<this.map.length;n++){const s=this.map[n];if(s!=t)continue;const r=n%this.width,i=n/this.width|0;let o=r+1,l=i+1;for(let c=1;o<this.width&&this.map[n+c]==s;c++)o++;for(let c=1;l<this.height&&this.map[n+this.width*c]==s;c++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,n,s){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return n=="horiz"?(s<0?r==0:i==this.width)?null:this.map[o*this.width+(s<0?r-1:i)]:(s<0?o==0:l==this.height)?null:this.map[r+this.width*(s<0?o-1:l)]}rectBetween(t,n){const{left:s,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:c,top:d,bottom:u}=this.findCell(n);return{left:Math.min(s,l),top:Math.min(i,d),right:Math.max(r,c),bottom:Math.max(o,u)}}cellsInRect(t){const n=[],s={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];s[l]||(s[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&n.push(l))}return n}positionAt(t,n,s){for(let r=0,i=0;;r++){const o=i+s.child(r).nodeSize;if(r==t){let l=n+t*this.width;const c=(t+1)*this.width;for(;l<c&&this.map[l]<i;)l++;return l==c?o-1:this.map[l]}i=o}}static get(t){return _x(t)||Ex(t,ase(t))}};function ase(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const n=ose(t),s=t.childCount,r=[];let i=0,o=null;const l=[];for(let u=0,f=n*s;u<f;u++)r[u]=0;for(let u=0,f=0;u<s;u++){const h=t.child(u);f++;for(let x=0;;x++){for(;i<r.length&&r[i]!=0;)i++;if(x==h.childCount)break;const y=h.child(x),{colspan:v,rowspan:b,colwidth:w}=y.attrs;for(let j=0;j<b;j++){if(j+u>=s){(o||(o=[])).push({type:"overlong_rowspan",pos:f,n:b-j});break}const N=i+j*n;for(let S=0;S<v;S++){r[N+S]==0?r[N+S]=f:(o||(o=[])).push({type:"collision",row:u,pos:f,n:v-S});const _=w&&w[S];if(_){const C=(N+S)%n*2,k=l[C];k==null||k!=_&&l[C+1]==1?(l[C]=_,l[C+1]=1):k==_&&l[C+1]++}}}i+=v,f+=y.nodeSize}const p=(u+1)*n;let m=0;for(;i<p;)r[i++]==0&&m++;m&&(o||(o=[])).push({type:"missing",row:u,n:m}),f++}(n===0||s===0)&&(o||(o=[])).push({type:"zero_sized"});const c=new Ze(n,s,r,o);let d=!1;for(let u=0;!d&&u<l.length;u+=2)l[u]!=null&&l[u+1]<s&&(d=!0);return d&&lse(c,l,t),c}function ose(t){let n=-1,s=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(s)for(let l=0;l<r;l++){const c=t.child(l);for(let d=0;d<c.childCount;d++){const u=c.child(d);l+u.attrs.rowspan>r&&(o+=u.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const c=i.child(l);o+=c.attrs.colspan,c.attrs.rowspan>1&&(s=!0)}n==-1?n=o:n!=o&&(n=Math.max(n,o))}return n}function lse(t,n,s){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=s.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let c=null;const d=l.attrs;for(let u=0;u<d.colspan;u++){const f=(i+u)%t.width,h=n[f*2];h!=null&&(!d.colwidth||d.colwidth[u]!=h)&&((c||(c=cse(d)))[u]=h)}c&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:c})}}function cse(t){if(t.colwidth)return t.colwidth.slice();const n=[];for(let s=0;s<t.colspan;s++)n.push(0);return n}function Qt(t){let n=t.cached.tableNodeTypes;if(!n){n=t.cached.tableNodeTypes={};for(const s in t.nodes){const r=t.nodes[s],i=r.spec.tableRole;i&&(n[i]=r)}}return n}var Dr=new pt("selectingCells");function tl(t){for(let n=t.depth-1;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return t.node(0).resolve(t.before(n+1));return null}function dse(t){for(let n=t.depth;n>0;n--){const s=t.node(n).type.spec.tableRole;if(s==="cell"||s==="header_cell")return t.node(n)}return null}function Cs(t){const n=t.selection.$head;for(let s=n.depth;s>0;s--)if(n.node(s).type.spec.tableRole=="row")return!0;return!1}function Hh(t){const n=t.selection;if("$anchorCell"in n&&n.$anchorCell)return n.$anchorCell.pos>n.$headCell.pos?n.$anchorCell:n.$headCell;if("node"in n&&n.node&&n.node.type.spec.tableRole=="cell")return n.$anchor;const s=tl(n.$head)||use(n.$head);if(s)return s;throw new RangeError(`No cell found around position ${n.head}`)}function use(t){for(let n=t.nodeAfter,s=t.pos;n;n=n.firstChild,s++){const r=n.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(s)}for(let n=t.nodeBefore,s=t.pos;n;n=n.lastChild,s--){const r=n.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(s-n.nodeSize)}}function Tx(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function fse(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function z0(t,n){return t.depth==n.depth&&t.pos>=n.start(-1)&&t.pos<=n.end(-1)}function mR(t,n,s){const r=t.node(-1),i=Ze.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,n,s);return l==null?null:t.node(0).resolve(o+l)}function fa(t,n,s=1){const r={...t,colspan:t.colspan-s};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(n,s),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function gR(t,n,s=1){const r={...t,colspan:t.colspan+s};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<s;i++)r.colwidth.splice(n,0,0)}return r}function hse(t,n,s){const r=Qt(n.type.schema).header_cell;for(let i=0;i<t.height;i++)if(n.nodeAt(t.map[s+i*t.width]).type!=r)return!1;return!0}var $e=class Zs extends he{constructor(n,s=n){const r=n.node(-1),i=Ze.get(r),o=n.start(-1),l=i.rectBetween(n.pos-o,s.pos-o),c=n.node(0),d=i.cellsInRect(l).filter(f=>f!=s.pos-o);d.unshift(s.pos-o);const u=d.map(f=>{const h=r.nodeAt(f);if(!h)throw RangeError(`No cell with offset ${f} found`);const p=o+f+1;return new KA(c.resolve(p),c.resolve(p+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=n,this.$headCell=s}map(n,s){const r=n.resolve(s.map(this.$anchorCell.pos)),i=n.resolve(s.map(this.$headCell.pos));if(Tx(r)&&Tx(i)&&z0(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Zs.rowSelection(r,i):o&&this.isColSelection()?Zs.colSelection(r,i):new Zs(r,i)}return le.between(r,i)}content(){const n=this.$anchorCell.node(-1),s=Ze.get(n),r=this.$anchorCell.start(-1),i=s.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=i.top;d<i.bottom;d++){const u=[];for(let f=d*s.width+i.left,h=i.left;h<i.right;h++,f++){const p=s.map[f];if(o[p])continue;o[p]=!0;const m=s.findCell(p);let x=n.nodeAt(p);if(!x)throw RangeError(`No cell with offset ${p} found`);const y=i.left-m.left,v=m.right-i.right;if(y>0||v>0){let b=x.attrs;if(y>0&&(b=fa(b,0,y)),v>0&&(b=fa(b,b.colspan-v,v)),m.left<i.left){if(x=x.type.createAndFill(b),!x)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else x=x.type.create(b,x.content)}if(m.top<i.top||m.bottom>i.bottom){const b={...x.attrs,rowspan:Math.min(m.bottom,i.bottom)-Math.max(m.top,i.top)};m.top<i.top?x=x.type.createAndFill(b):x=x.type.create(b,x.content)}u.push(x)}l.push(n.child(d).copy(U.from(u)))}const c=this.isColSelection()&&this.isRowSelection()?n:l;return new ee(U.from(c),1,1)}replace(n,s=ee.empty){const r=n.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:c,$to:d}=i[l],u=n.mapping.slice(r);n.replace(u.map(c.pos),u.map(d.pos),l?ee.empty:s)}const o=he.findFrom(n.doc.resolve(n.mapping.slice(r).map(this.to)),-1);o&&n.setSelection(o)}replaceWith(n,s){this.replace(n,new ee(U.from(s),0,0))}forEachCell(n){const s=this.$anchorCell.node(-1),r=Ze.get(s),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)n(s.nodeAt(o[l]),i+o[l])}isColSelection(){const n=this.$anchorCell.index(-1),s=this.$headCell.index(-1);if(Math.min(n,s)>0)return!1;const r=n+this.$anchorCell.nodeAfter.attrs.rowspan,i=s+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(n,s=n){const r=n.node(-1),i=Ze.get(r),o=n.start(-1),l=i.findCell(n.pos-o),c=i.findCell(s.pos-o),d=n.node(0);return l.top<=c.top?(l.top>0&&(n=d.resolve(o+i.map[l.left])),c.bottom<i.height&&(s=d.resolve(o+i.map[i.width*(i.height-1)+c.right-1]))):(c.top>0&&(s=d.resolve(o+i.map[c.left])),l.bottom<i.height&&(n=d.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Zs(n,s)}isRowSelection(){const n=this.$anchorCell.node(-1),s=Ze.get(n),r=this.$anchorCell.start(-1),i=s.colCount(this.$anchorCell.pos-r),o=s.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,c=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,c)==s.width}eq(n){return n instanceof Zs&&n.$anchorCell.pos==this.$anchorCell.pos&&n.$headCell.pos==this.$headCell.pos}static rowSelection(n,s=n){const r=n.node(-1),i=Ze.get(r),o=n.start(-1),l=i.findCell(n.pos-o),c=i.findCell(s.pos-o),d=n.node(0);return l.left<=c.left?(l.left>0&&(n=d.resolve(o+i.map[l.top*i.width])),c.right<i.width&&(s=d.resolve(o+i.map[i.width*(c.top+1)-1]))):(c.left>0&&(s=d.resolve(o+i.map[c.top*i.width])),l.right<i.width&&(n=d.resolve(o+i.map[i.width*(l.top+1)-1]))),new Zs(n,s)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(n,s){return new Zs(n.resolve(s.anchor),n.resolve(s.head))}static create(n,s,r=s){return new Zs(n.resolve(s),n.resolve(r))}getBookmark(){return new pse(this.$anchorCell.pos,this.$headCell.pos)}};$e.prototype.visible=!1;he.jsonID("cell",$e);var pse=class xR{constructor(n,s){this.anchor=n,this.head=s}map(n){return new xR(n.map(this.anchor),n.map(this.head))}resolve(n){const s=n.resolve(this.anchor),r=n.resolve(this.head);return s.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&s.index()<s.parent.childCount&&r.index()<r.parent.childCount&&z0(s,r)?new $e(s,r):he.near(r,1)}};function mse(t){if(!(t.selection instanceof $e))return null;const n=[];return t.selection.forEachCell((s,r)=>{n.push(Mn.node(r,r+s.nodeSize,{class:"selectedCell"}))}),rt.create(t.doc,n)}function gse({$from:t,$to:n}){if(t.pos==n.pos||t.pos<n.pos-6)return!1;let s=t.pos,r=n.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,s++);for(let o=n.depth;o>=0&&!(n.before(o+1)>n.start(o));o--,r--);return s==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function xse({$from:t,$to:n}){let s,r;for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){s=o;break}}for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return s!==r&&n.parentOffset===0}function yse(t,n,s){const r=(n||t).selection,i=(n||t).doc;let o,l;if(r instanceof fe&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=$e.create(i,r.from);else if(l=="row"){const c=i.resolve(r.from+1);o=$e.rowSelection(c,c)}else if(!s){const c=Ze.get(r.node),d=r.from+1,u=d+c.map[c.width*c.height-1];o=$e.create(i,d+1,u)}}else r instanceof le&&gse(r)?o=le.create(i,r.from):r instanceof le&&xse(r)&&(o=le.create(i,r.$from.start(),r.$from.end()));return o&&(n||(n=t.tr)).setSelection(o),n}var vse=new pt("fix-tables");function yR(t,n,s,r){const i=t.childCount,o=n.childCount;e:for(let l=0,c=0;l<o;l++){const d=n.child(l);for(let u=c,f=Math.min(i,l+3);u<f;u++)if(t.child(u)==d){c=u+1,s+=d.nodeSize;continue e}r(d,s),c<i&&t.child(c).sameMarkup(d)?yR(t.child(c),d,s+1,r):d.nodesBetween(0,d.content.size,r,s+1),s+=d.nodeSize}}function vR(t,n){let s;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(s=bse(t,i,o,s))};return n?n.doc!=t.doc&&yR(n.doc,t.doc,0,r):t.doc.descendants(r),s}function bse(t,n,s,r){const i=Ze.get(n);if(!i.problems)return r;r||(r=t.tr);const o=[];for(let d=0;d<i.height;d++)o.push(0);for(let d=0;d<i.problems.length;d++){const u=i.problems[d];if(u.type=="collision"){const f=n.nodeAt(u.pos);if(!f)continue;const h=f.attrs;for(let p=0;p<h.rowspan;p++)o[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(s+1+u.pos),null,fa(h,h.colspan-u.n,u.n))}else if(u.type=="missing")o[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const f=n.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(s+1+u.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const f=n.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(s+1+u.pos),null,{...f.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const f=r.mapping.map(s);r.delete(f,f+n.nodeSize)}}let l,c;for(let d=0;d<o.length;d++)o[d]&&(l==null&&(l=d),c=d);for(let d=0,u=s+1;d<i.height;d++){const f=n.child(d),h=u+f.nodeSize,p=o[d];if(p>0){let m="cell";f.firstChild&&(m=f.firstChild.type.spec.tableRole);const x=[];for(let v=0;v<p;v++){const b=Qt(t.schema)[m].createAndFill();b&&x.push(b)}const y=(d==0||l==d-1)&&c==d?u+1:h-1;r.insert(r.mapping.map(y),x)}u=h}return r.setMeta(vse,{fixTables:!0})}function Xs(t){const n=t.selection,s=Hh(t),r=s.node(-1),i=s.start(-1),o=Ze.get(r);return{...n instanceof $e?o.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):o.findCell(s.pos-i),tableStart:i,map:o,table:r}}function bR(t,{map:n,tableStart:s,table:r},i){let o=i>0?-1:0;hse(n,r,i+o)&&(o=i==0||i==n.width?null:0);for(let l=0;l<n.height;l++){const c=l*n.width+i;if(i>0&&i<n.width&&n.map[c-1]==n.map[c]){const d=n.map[c],u=r.nodeAt(d);t.setNodeMarkup(t.mapping.map(s+d),null,gR(u.attrs,i-n.colCount(d))),l+=u.attrs.rowspan-1}else{const d=o==null?Qt(r.type.schema).cell:r.nodeAt(n.map[c+o]).type,u=n.positionAt(l,i,r);t.insert(t.mapping.map(s+u),d.createAndFill())}}return t}function wse(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t);n(bR(t.tr,s,s.left))}return!0}function jse(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t);n(bR(t.tr,s,s.right))}return!0}function Nse(t,{map:n,table:s,tableStart:r},i){const o=t.mapping.maps.length;for(let l=0;l<n.height;){const c=l*n.width+i,d=n.map[c],u=s.nodeAt(d),f=u.attrs;if(i>0&&n.map[c-1]==d||i<n.width-1&&n.map[c+1]==d)t.setNodeMarkup(t.mapping.slice(o).map(r+d),null,fa(f,i-n.colCount(d)));else{const h=t.mapping.slice(o).map(r+d);t.delete(h,h+u.nodeSize)}l+=f.rowspan}}function Sse(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t),r=t.tr;if(s.left==0&&s.right==s.map.width)return!1;for(let i=s.right-1;Nse(r,s,i),i!=s.left;i--){const o=s.tableStart?r.doc.nodeAt(s.tableStart-1):r.doc;if(!o)throw RangeError("No table found");s.table=o,s.map=Ze.get(o)}n(r)}return!0}function kse(t,n,s){var r;const i=Qt(n.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=n.nodeAt(t.map[o+s*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function wR(t,{map:n,tableStart:s,table:r},i){var o;let l=s;for(let u=0;u<i;u++)l+=r.child(u).nodeSize;const c=[];let d=i>0?-1:0;kse(n,r,i+d)&&(d=i==0||i==n.height?null:0);for(let u=0,f=n.width*i;u<n.width;u++,f++)if(i>0&&i<n.height&&n.map[f]==n.map[f-n.width]){const h=n.map[f],p=r.nodeAt(h).attrs;t.setNodeMarkup(s+h,null,{...p,rowspan:p.rowspan+1}),u+=p.colspan-1}else{const h=d==null?Qt(r.type.schema).cell:(o=r.nodeAt(n.map[f+d*n.width]))==null?void 0:o.type,p=h==null?void 0:h.createAndFill();p&&c.push(p)}return t.insert(l,Qt(r.type.schema).row.create(null,c)),t}function Cse(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t);n(wR(t.tr,s,s.top))}return!0}function _se(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t);n(wR(t.tr,s,s.bottom))}return!0}function Ese(t,{map:n,table:s,tableStart:r},i){let o=0;for(let u=0;u<i;u++)o+=s.child(u).nodeSize;const l=o+s.child(i).nodeSize,c=t.mapping.maps.length;t.delete(o+r,l+r);const d=new Set;for(let u=0,f=i*n.width;u<n.width;u++,f++){const h=n.map[f];if(!d.has(h)){if(d.add(h),i>0&&h==n.map[f-n.width]){const p=s.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(c).map(h+r),null,{...p,rowspan:p.rowspan-1}),u+=p.colspan-1}else if(i<n.height&&h==n.map[f+n.width]){const p=s.nodeAt(h),m=p.attrs,x=p.type.create({...m,rowspan:p.attrs.rowspan-1},p.content),y=n.positionAt(i+1,u,s);t.insert(t.mapping.slice(c).map(r+y),x),u+=m.colspan-1}}}}function Tse(t,n){if(!Cs(t))return!1;if(n){const s=Xs(t),r=t.tr;if(s.top==0&&s.bottom==s.map.height)return!1;for(let i=s.bottom-1;Ese(r,s,i),i!=s.top;i--){const o=s.tableStart?r.doc.nodeAt(s.tableStart-1):r.doc;if(!o)throw RangeError("No table found");s.table=o,s.map=Ze.get(s.table)}n(r)}return!0}function zN(t){const n=t.content;return n.childCount==1&&n.child(0).isTextblock&&n.child(0).childCount==0}function Mse({width:t,height:n,map:s},r){let i=r.top*t+r.left,o=i,l=(r.bottom-1)*t+r.left,c=i+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&s[o]==s[o-1]||r.right<t&&s[c]==s[c+1])return!0;o+=t,c+=t}for(let d=r.left;d<r.right;d++){if(r.top>0&&s[i]==s[i-t]||r.bottom<n&&s[l]==s[l+t])return!0;i++,l++}return!1}function BN(t,n){const s=t.selection;if(!(s instanceof $e)||s.$anchorCell.pos==s.$headCell.pos)return!1;const r=Xs(t),{map:i}=r;if(Mse(i,r))return!1;if(n){const o=t.tr,l={};let c=U.empty,d,u;for(let f=r.top;f<r.bottom;f++)for(let h=r.left;h<r.right;h++){const p=i.map[f*i.width+h],m=r.table.nodeAt(p);if(!(l[p]||!m))if(l[p]=!0,d==null)d=p,u=m;else{zN(m)||(c=c.append(m.content));const x=o.mapping.map(p+r.tableStart);o.delete(x,x+m.nodeSize)}}if(d==null||u==null)return!0;if(o.setNodeMarkup(d+r.tableStart,null,{...gR(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),c.size){const f=d+1+u.content.size,h=zN(u)?d+1:f;o.replaceWith(h+r.tableStart,f+r.tableStart,c)}o.setSelection(new $e(o.doc.resolve(d+r.tableStart))),n(o)}return!0}function VN(t,n){const s=Qt(t.schema);return Ase(({node:r})=>s[r.type.spec.tableRole])(t,n)}function Ase(t){return(n,s)=>{var r;const i=n.selection;let o,l;if(i instanceof $e){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;o=i.$anchorCell.nodeAfter,l=i.$anchorCell.pos}else{if(o=dse(i.$from),!o)return!1;l=(r=tl(i.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(s){let c=o.attrs;const d=[],u=c.colwidth;c.rowspan>1&&(c={...c,rowspan:1}),c.colspan>1&&(c={...c,colspan:1});const f=Xs(n),h=n.tr;for(let m=0;m<f.right-f.left;m++)d.push(u?{...c,colwidth:u&&u[m]?[u[m]]:null}:c);let p;for(let m=f.top;m<f.bottom;m++){let x=f.map.positionAt(m,f.left,f.table);m==f.top&&(x+=o.nodeSize);for(let y=f.left,v=0;y<f.right;y++,v++)y==f.left&&m==f.top||h.insert(p=h.mapping.map(x+f.tableStart,1),t({node:o,row:m,col:y}).createAndFill(d[v]))}h.setNodeMarkup(l,t({node:o,row:f.top,col:f.left}),d[0]),i instanceof $e&&h.setSelection(new $e(h.doc.resolve(i.$anchorCell.pos),p?h.doc.resolve(p):void 0)),s(h)}return!0}}function Pse(t,n){return function(s,r){if(!Cs(s))return!1;const i=Hh(s);if(i.nodeAfter.attrs[t]===n)return!1;if(r){const o=s.tr;s.selection instanceof $e?s.selection.forEachCell((l,c)=>{l.attrs[t]!==n&&o.setNodeMarkup(c,null,{...l.attrs,[t]:n})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:n}),r(o)}return!0}}function Rse(t){return function(n,s){if(!Cs(n))return!1;if(s){const r=Qt(n.schema),i=Xs(n),o=n.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),c=l.map(d=>i.table.nodeAt(d));for(let d=0;d<l.length;d++)c[d].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[d],r.cell,c[d].attrs);if(o.steps.length==0)for(let d=0;d<l.length;d++)o.setNodeMarkup(i.tableStart+l[d],r.header_cell,c[d].attrs);s(o)}return!0}}function HN(t,n,s){const r=n.map.cellsInRect({left:0,top:0,right:t=="row"?n.map.width:1,bottom:t=="column"?n.map.height:1});for(let i=0;i<r.length;i++){const o=n.table.nodeAt(r[i]);if(o&&o.type!==s.header_cell)return!1}return!0}function Oc(t,n){return n=n||{useDeprecatedLogic:!1},n.useDeprecatedLogic?Rse(t):function(s,r){if(!Cs(s))return!1;if(r){const i=Qt(s.schema),o=Xs(s),l=s.tr,c=HN("row",o,i),d=HN("column",o,i),f=(t==="column"?c:t==="row"?d:!1)?1:0,h=t=="column"?{left:0,top:f,right:1,bottom:o.map.height}:t=="row"?{left:f,top:0,right:o.map.width,bottom:1}:o,p=t=="column"?d?i.cell:i.header_cell:t=="row"?c?i.cell:i.header_cell:i.cell;o.map.cellsInRect(h).forEach(m=>{const x=m+o.tableStart,y=l.doc.nodeAt(x);y&&l.setNodeMarkup(x,p,y.attrs)}),r(l)}return!0}}Oc("row",{useDeprecatedLogic:!0});Oc("column",{useDeprecatedLogic:!0});var Ose=Oc("cell",{useDeprecatedLogic:!0});function Dse(t,n){if(n<0){const s=t.nodeBefore;if(s)return t.pos-s.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const o=t.node(-1).child(r),l=o.lastChild;if(l)return i-1-l.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const s=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<s.childCount;r++){const o=s.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function UN(t){return function(n,s){if(!Cs(n))return!1;const r=Dse(Hh(n),t);if(r==null)return!1;if(s){const i=n.doc.resolve(r);s(n.tr.setSelection(le.between(i,fse(i))).scrollIntoView())}return!0}}function Ise(t,n){const s=t.selection.$anchor;for(let r=s.depth;r>0;r--)if(s.node(r).type.spec.tableRole=="table")return n&&n(t.tr.delete(s.before(r),s.after(r)).scrollIntoView()),!0;return!1}function Gd(t,n){const s=t.selection;if(!(s instanceof $e))return!1;if(n){const r=t.tr,i=Qt(t.schema).cell.createAndFill().content;s.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new ee(i,0,0))}),r.docChanged&&n(r)}return!0}function Lse(t){if(!t.size)return null;let{content:n,openStart:s,openEnd:r}=t;for(;n.childCount==1&&(s>0&&r>0||n.child(0).type.spec.tableRole=="table");)s--,r--,n=n.child(0).content;const i=n.child(0),o=i.type.spec.tableRole,l=i.type.schema,c=[];if(o=="row")for(let d=0;d<n.childCount;d++){let u=n.child(d).content;const f=d?0:Math.max(0,s-1),h=d<n.childCount-1?0:Math.max(0,r-1);(f||h)&&(u=Mx(Qt(l).row,new ee(u,f,h)).content),c.push(u)}else if(o=="cell"||o=="header_cell")c.push(s||r?Mx(Qt(l).row,new ee(n,s,r)).content:n);else return null;return $se(l,c)}function $se(t,n){const s=[];for(let i=0;i<n.length;i++){const o=n[i];for(let l=o.childCount-1;l>=0;l--){const{rowspan:c,colspan:d}=o.child(l).attrs;for(let u=i;u<i+c;u++)s[u]=(s[u]||0)+d}}let r=0;for(let i=0;i<s.length;i++)r=Math.max(r,s[i]);for(let i=0;i<s.length;i++)if(i>=n.length&&n.push(U.empty),s[i]<r){const o=Qt(t).cell.createAndFill(),l=[];for(let c=s[i];c<r;c++)l.push(o);n[i]=n[i].append(U.from(l))}return{height:n.length,width:r,rows:n}}function Mx(t,n){const s=t.createAndFill();return new qA(s).replace(0,s.content.size,n).doc}function Fse({width:t,height:n,rows:s},r,i){if(t!=r){const o=[],l=[];for(let c=0;c<s.length;c++){const d=s[c],u=[];for(let f=o[c]||0,h=0;f<r;h++){let p=d.child(h%d.childCount);f+p.attrs.colspan>r&&(p=p.type.createChecked(fa(p.attrs,p.attrs.colspan,f+p.attrs.colspan-r),p.content)),u.push(p),f+=p.attrs.colspan;for(let m=1;m<p.attrs.rowspan;m++)o[c+m]=(o[c+m]||0)+p.attrs.colspan}l.push(U.from(u))}s=l,t=r}if(n!=i){const o=[];for(let l=0,c=0;l<i;l++,c++){const d=[],u=s[c%n];for(let f=0;f<u.childCount;f++){let h=u.child(f);l+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),d.push(h)}o.push(U.from(d))}s=o,n=i}return{width:t,height:n,rows:s}}function zse(t,n,s,r,i,o,l){const c=t.doc.type.schema,d=Qt(c);let u,f;if(i>n.width)for(let h=0,p=0;h<n.height;h++){const m=s.child(h);p+=m.nodeSize;const x=[];let y;m.lastChild==null||m.lastChild.type==d.cell?y=u||(u=d.cell.createAndFill()):y=f||(f=d.header_cell.createAndFill());for(let v=n.width;v<i;v++)x.push(y);t.insert(t.mapping.slice(l).map(p-1+r),x)}if(o>n.height){const h=[];for(let x=0,y=(n.height-1)*n.width;x<Math.max(n.width,i);x++){const v=x>=n.width?!1:s.nodeAt(n.map[y+x]).type==d.header_cell;h.push(v?f||(f=d.header_cell.createAndFill()):u||(u=d.cell.createAndFill()))}const p=d.row.create(null,U.from(h)),m=[];for(let x=n.height;x<o;x++)m.push(p);t.insert(t.mapping.slice(l).map(r+s.nodeSize-2),m)}return!!(u||f)}function WN(t,n,s,r,i,o,l,c){if(l==0||l==n.height)return!1;let d=!1;for(let u=i;u<o;u++){const f=l*n.width+u,h=n.map[f];if(n.map[f-n.width]==h){d=!0;const p=s.nodeAt(h),{top:m,left:x}=n.findCell(h);t.setNodeMarkup(t.mapping.slice(c).map(h+r),null,{...p.attrs,rowspan:l-m}),t.insert(t.mapping.slice(c).map(n.positionAt(l,x,s)),p.type.createAndFill({...p.attrs,rowspan:m+p.attrs.rowspan-l})),u+=p.attrs.colspan-1}}return d}function qN(t,n,s,r,i,o,l,c){if(l==0||l==n.width)return!1;let d=!1;for(let u=i;u<o;u++){const f=u*n.width+l,h=n.map[f];if(n.map[f-1]==h){d=!0;const p=s.nodeAt(h),m=n.colCount(h),x=t.mapping.slice(c).map(h+r);t.setNodeMarkup(x,null,fa(p.attrs,l-m,p.attrs.colspan-(l-m))),t.insert(x+p.nodeSize,p.type.createAndFill(fa(p.attrs,0,l-m))),u+=p.attrs.rowspan-1}}return d}function KN(t,n,s,r,i){let o=s?t.doc.nodeAt(s-1):t.doc;if(!o)throw new Error("No table found");let l=Ze.get(o);const{top:c,left:d}=r,u=d+i.width,f=c+i.height,h=t.tr;let p=0;function m(){if(o=s?h.doc.nodeAt(s-1):h.doc,!o)throw new Error("No table found");l=Ze.get(o),p=h.mapping.maps.length}zse(h,l,o,s,u,f,p)&&m(),WN(h,l,o,s,d,u,c,p)&&m(),WN(h,l,o,s,d,u,f,p)&&m(),qN(h,l,o,s,c,f,d,p)&&m(),qN(h,l,o,s,c,f,u,p)&&m();for(let x=c;x<f;x++){const y=l.positionAt(x,d,o),v=l.positionAt(x,u,o);h.replace(h.mapping.slice(p).map(y+s),h.mapping.slice(p).map(v+s),new ee(i.rows[x-c],0,0))}m(),h.setSelection(new $e(h.doc.resolve(s+l.positionAt(c,d,o)),h.doc.resolve(s+l.positionAt(f-1,u-1,o)))),n(h)}var Bse=$P({ArrowLeft:Yd("horiz",-1),ArrowRight:Yd("horiz",1),ArrowUp:Yd("vert",-1),ArrowDown:Yd("vert",1),"Shift-ArrowLeft":Xd("horiz",-1),"Shift-ArrowRight":Xd("horiz",1),"Shift-ArrowUp":Xd("vert",-1),"Shift-ArrowDown":Xd("vert",1),Backspace:Gd,"Mod-Backspace":Gd,Delete:Gd,"Mod-Delete":Gd});function Cu(t,n,s){return s.eq(t.selection)?!1:(n&&n(t.tr.setSelection(s).scrollIntoView()),!0)}function Yd(t,n){return(s,r,i)=>{if(!i)return!1;const o=s.selection;if(o instanceof $e)return Cu(s,r,he.near(o.$headCell,n));if(t!="horiz"&&!o.empty)return!1;const l=jR(i,t,n);if(l==null)return!1;if(t=="horiz")return Cu(s,r,he.near(s.doc.resolve(o.head+n),n));{const c=s.doc.resolve(l),d=mR(c,t,n);let u;return d?u=he.near(d,1):n<0?u=he.near(s.doc.resolve(c.before(-1)),-1):u=he.near(s.doc.resolve(c.after(-1)),1),Cu(s,r,u)}}}function Xd(t,n){return(s,r,i)=>{if(!i)return!1;const o=s.selection;let l;if(o instanceof $e)l=o;else{const d=jR(i,t,n);if(d==null)return!1;l=new $e(s.doc.resolve(d))}const c=mR(l.$headCell,t,n);return c?Cu(s,r,new $e(l.$anchorCell,c)):!1}}function Vse(t,n){const s=t.state.doc,r=tl(s.resolve(n));return r?(t.dispatch(t.state.tr.setSelection(new $e(r))),!0):!1}function Hse(t,n,s){if(!Cs(t.state))return!1;let r=Lse(s);const i=t.state.selection;if(i instanceof $e){r||(r={width:1,height:1,rows:[U.from(Mx(Qt(t.state.schema).cell,s))]});const o=i.$anchorCell.node(-1),l=i.$anchorCell.start(-1),c=Ze.get(o).rectBetween(i.$anchorCell.pos-l,i.$headCell.pos-l);return r=Fse(r,c.right-c.left,c.bottom-c.top),KN(t.state,t.dispatch,l,c,r),!0}else if(r){const o=Hh(t.state),l=o.start(-1);return KN(t.state,t.dispatch,l,Ze.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function Use(t,n){var s;if(n.ctrlKey||n.metaKey)return;const r=GN(t,n.target);let i;if(n.shiftKey&&t.state.selection instanceof $e)o(t.state.selection.$anchorCell,n),n.preventDefault();else if(n.shiftKey&&r&&(i=tl(t.state.selection.$anchor))!=null&&((s=vm(t,n))==null?void 0:s.pos)!=i.pos)o(i,n),n.preventDefault();else if(!r)return;function o(d,u){let f=vm(t,u);const h=Dr.getState(t.state)==null;if(!f||!z0(d,f))if(h)f=d;else return;const p=new $e(d,f);if(h||!t.state.selection.eq(p)){const m=t.state.tr.setSelection(p);h&&m.setMeta(Dr,d.pos),t.dispatch(m)}}function l(){t.root.removeEventListener("mouseup",l),t.root.removeEventListener("dragstart",l),t.root.removeEventListener("mousemove",c),Dr.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Dr,-1))}function c(d){const u=d,f=Dr.getState(t.state);let h;if(f!=null)h=t.state.doc.resolve(f);else if(GN(t,u.target)!=r&&(h=vm(t,n),!h))return l();h&&o(h,u)}t.root.addEventListener("mouseup",l),t.root.addEventListener("dragstart",l),t.root.addEventListener("mousemove",c)}function jR(t,n,s){if(!(t.state.selection instanceof le))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((s<0?r.index(i):r.indexAfter(i))!=(s<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const c=r.before(i),d=n=="vert"?s>0?"down":"up":s>0?"right":"left";return t.endOfTextblock(d)?c:null}}return null}function GN(t,n){for(;n&&n!=t.dom;n=n.parentNode)if(n.nodeName=="TD"||n.nodeName=="TH")return n;return null}function vm(t,n){const s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s?tl(t.state.doc.resolve(s.pos)):null}var Wse=class{constructor(n,s){this.node=n,this.defaultCellMinWidth=s,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${s}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ax(n,this.colgroup,this.table,s),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,Ax(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function Ax(t,n,s,r,i,o){var l;let c=0,d=!0,u=n.firstChild;const f=t.firstChild;if(f){for(let h=0,p=0;h<f.childCount;h++){const{colspan:m,colwidth:x}=f.child(h).attrs;for(let y=0;y<m;y++,p++){const v=i==p?o:x&&x[y],b=v?v+"px":"";if(c+=v||r,v||(d=!1),u)u.style.width!=b&&(u.style.width=b),u=u.nextSibling;else{const w=document.createElement("col");w.style.width=b,n.appendChild(w)}}}for(;u;){const h=u.nextSibling;(l=u.parentNode)==null||l.removeChild(u),u=h}d?(s.style.width=c+"px",s.style.minWidth=""):(s.style.width="",s.style.minWidth=c+"px")}}var En=new pt("tableColumnResizing");function qse({handleWidth:t=5,cellMinWidth:n=25,defaultCellMinWidth:s=100,View:r=Wse,lastColumnResizable:i=!0}={}){const o=new ht({key:En,state:{init(l,c){var d,u;const f=(u=(d=o.spec)==null?void 0:d.props)==null?void 0:u.nodeViews,h=Qt(c.schema).table.name;return r&&f&&(f[h]=(p,m)=>new r(p,s,m)),new Kse(-1,!1)},apply(l,c){return c.apply(l)}},props:{attributes:l=>{const c=En.getState(l);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,c)=>{Gse(l,c,t,i)},mouseleave:l=>{Yse(l)},mousedown:(l,c)=>{Xse(l,c,n,s)}},decorations:l=>{const c=En.getState(l);if(c&&c.activeHandle>-1)return tre(l,c.activeHandle)},nodeViews:{}}});return o}var Kse=class _u{constructor(n,s){this.activeHandle=n,this.dragging=s}apply(n){const s=this,r=n.getMeta(En);if(r&&r.setHandle!=null)return new _u(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new _u(s.activeHandle,r.setDragging);if(s.activeHandle>-1&&n.docChanged){let i=n.mapping.map(s.activeHandle,-1);return Tx(n.doc.resolve(i))||(i=-1),new _u(i,s.dragging)}return s}};function Gse(t,n,s,r){if(!t.editable)return;const i=En.getState(t.state);if(i&&!i.dragging){const o=Qse(n.target);let l=-1;if(o){const{left:c,right:d}=o.getBoundingClientRect();n.clientX-c<=s?l=YN(t,n,"left",s):d-n.clientX<=s&&(l=YN(t,n,"right",s))}if(l!=i.activeHandle){if(!r&&l!==-1){const c=t.state.doc.resolve(l),d=c.node(-1),u=Ze.get(d),f=c.start(-1);if(u.colCount(c.pos-f)+c.nodeAfter.attrs.colspan-1==u.width-1)return}NR(t,l)}}}function Yse(t){if(!t.editable)return;const n=En.getState(t.state);n&&n.activeHandle>-1&&!n.dragging&&NR(t,-1)}function Xse(t,n,s,r){var i;if(!t.editable)return!1;const o=(i=t.dom.ownerDocument.defaultView)!=null?i:window,l=En.getState(t.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const c=t.state.doc.nodeAt(l.activeHandle),d=Jse(t,l.activeHandle,c.attrs);t.dispatch(t.state.tr.setMeta(En,{setDragging:{startX:n.clientX,startWidth:d}}));function u(h){o.removeEventListener("mouseup",u),o.removeEventListener("mousemove",f);const p=En.getState(t.state);p!=null&&p.dragging&&(Zse(t,p.activeHandle,XN(p.dragging,h,s)),t.dispatch(t.state.tr.setMeta(En,{setDragging:null})))}function f(h){if(!h.which)return u(h);const p=En.getState(t.state);if(p&&p.dragging){const m=XN(p.dragging,h,s);JN(t,p.activeHandle,m,r)}}return JN(t,l.activeHandle,d,r),o.addEventListener("mouseup",u),o.addEventListener("mousemove",f),n.preventDefault(),!0}function Jse(t,n,{colspan:s,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=t.domAtPos(n);let c=o.node.childNodes[o.offset].offsetWidth,d=s;if(r)for(let u=0;u<s;u++)r[u]&&(c-=r[u],d--);return c/d}function Qse(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function YN(t,n,s,r){const i=s=="right"?-r:r,o=t.posAtCoords({left:n.clientX+i,top:n.clientY});if(!o)return-1;const{pos:l}=o,c=tl(t.state.doc.resolve(l));if(!c)return-1;if(s=="right")return c.pos;const d=Ze.get(c.node(-1)),u=c.start(-1),f=d.map.indexOf(c.pos-u);return f%d.width==0?-1:u+d.map[f-1]}function XN(t,n,s){const r=n.clientX-t.startX;return Math.max(s,t.startWidth+r)}function NR(t,n){t.dispatch(t.state.tr.setMeta(En,{setHandle:n}))}function Zse(t,n,s){const r=t.state.doc.resolve(n),i=r.node(-1),o=Ze.get(i),l=r.start(-1),c=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,d=t.state.tr;for(let u=0;u<o.height;u++){const f=u*o.width+c;if(u&&o.map[f]==o.map[f-o.width])continue;const h=o.map[f],p=i.nodeAt(h).attrs,m=p.colspan==1?0:c-o.colCount(h);if(p.colwidth&&p.colwidth[m]==s)continue;const x=p.colwidth?p.colwidth.slice():ere(p.colspan);x[m]=s,d.setNodeMarkup(l+h,null,{...p,colwidth:x})}d.docChanged&&t.dispatch(d)}function JN(t,n,s,r){const i=t.state.doc.resolve(n),o=i.node(-1),l=i.start(-1),c=Ze.get(o).colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;let d=t.domAtPos(i.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&Ax(o,d.firstChild,d,r,c,s)}function ere(t){return Array(t).fill(0)}function tre(t,n){var s;const r=[],i=t.doc.resolve(n),o=i.node(-1);if(!o)return rt.empty;const l=Ze.get(o),c=i.start(-1),d=l.colCount(i.pos-c)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<l.height;u++){const f=d+u*l.width;if((d==l.width-1||l.map[f]!=l.map[f+1])&&(u==0||l.map[f]!=l.map[f-l.width])){const h=l.map[f],p=c+h+o.nodeAt(h).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(s=En.getState(t))!=null&&s.dragging&&r.push(Mn.node(c+h,c+h+o.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(Mn.widget(p,m))}}return rt.create(t.doc,r)}function nre({allowTableNodeSelection:t=!1}={}){return new ht({key:Dr,state:{init(){return null},apply(n,s){const r=n.getMeta(Dr);if(r!=null)return r==-1?null:r;if(s==null||!n.docChanged)return s;const{deleted:i,pos:o}=n.mapping.mapResult(s);return i?null:o}},props:{decorations:mse,handleDOMEvents:{mousedown:Use},createSelectionBetween(n){return Dr.getState(n.state)!=null?n.state.selection:null},handleTripleClick:Vse,handleKeyDown:Bse,handlePaste:Hse},appendTransaction(n,s,r){return yse(r,vR(r,s),t)}})}var SR=td.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var n,s;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(o=>parseInt(o,10)):null;if(!i){const o=(n=t.closest("table"))==null?void 0:n.querySelectorAll("colgroup > col"),l=Array.from(((s=t.parentElement)==null?void 0:s.children)||[]).indexOf(t);if(l&&l>-1&&o&&o[l]){const c=o[l].getAttribute("width");return c?[parseInt(c,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ni(this.options.HTMLAttributes,t),0]}}),sre=td.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const n=t.getAttribute("colwidth");return n?n.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ni(this.options.HTMLAttributes,t),0]}}),rre=td.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ni(this.options.HTMLAttributes,t),0]}});function Px(t,n){return n?["width",`${Math.max(n,t)}px`]:["min-width",`${t}px`]}function QN(t,n,s,r,i,o){var l;let c=0,d=!0,u=n.firstChild;const f=t.firstChild;if(f!==null)for(let p=0,m=0;p<f.childCount;p+=1){const{colspan:x,colwidth:y}=f.child(p).attrs;for(let v=0;v<x;v+=1,m+=1){const b=i===m?o:y&&y[v],w=b?`${b}px`:"";if(c+=b||r,b||(d=!1),u){if(u.style.width!==w){const[j,N]=Px(r,b);u.style.setProperty(j,N)}u=u.nextSibling}else{const j=document.createElement("col"),[N,S]=Px(r,b);j.style.setProperty(N,S),n.appendChild(j)}}}for(;u;){const p=u.nextSibling;(l=u.parentNode)==null||l.removeChild(u),u=p}const h=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);d&&!h?(s.style.width=`${c}px`,s.style.minWidth=""):(s.style.width="",s.style.minWidth=`${c}px`)}var ire=class{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),QN(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,QN(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const n=t.target,s=this.dom.contains(n),r=this.contentDOM.contains(n);return!!(s&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function are(t,n,s,r){let i=0,o=!0;const l=[],c=t.firstChild;if(!c)return{};for(let h=0,p=0;h<c.childCount;h+=1){const{colspan:m,colwidth:x}=c.child(h).attrs;for(let y=0;y<m;y+=1,p+=1){const v=s===p?r:x&&x[y];i+=v||n,v||(o=!1);const[b,w]=Px(n,v);l.push(["col",{style:`${b}: ${w}`}])}}const d=o?`${i}px`:"",u=o?"":`${i}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:u}}function ZN(t,n){return t.createAndFill()}function ore(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const n={};return Object.keys(t.nodes).forEach(s=>{const r=t.nodes[s];r.spec.tableRole&&(n[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=n,n}function lre(t,n,s,r,i){const o=ore(t),l=[],c=[];for(let u=0;u<s;u+=1){const f=ZN(o.cell);if(f&&c.push(f),r){const h=ZN(o.header_cell);h&&l.push(h)}}const d=[];for(let u=0;u<n;u+=1)d.push(o.row.createChecked(null,r&&u===0?l:c));return o.table.createChecked(null,d)}function cre(t){return t instanceof $e}var Jd=({editor:t})=>{const{selection:n}=t.state;if(!cre(n))return!1;let s=0;const r=qP(n.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(s+=1)}),s===n.ranges.length?(t.commands.deleteTable(),!0):!1},dre="";function ure(t){return(t||"").replace(/\s+/g," ").trim()}function fre(t,n,s={}){var r;const i=(r=s.cellLineSeparator)!=null?r:dre;if(!t||!t.content||t.content.length===0)return"";const o=[];t.content.forEach(x=>{const y=[];x.content&&x.content.forEach(v=>{let b="";v.content&&Array.isArray(v.content)&&v.content.length>1?b=v.content.map(S=>n.renderChildren(S)).join(i):b=v.content?n.renderChildren(v.content):"";const w=ure(b),j=v.type==="tableHeader";y.push({text:w,isHeader:j})}),o.push(y)});const l=o.reduce((x,y)=>Math.max(x,y.length),0);if(l===0)return"";const c=new Array(l).fill(0);o.forEach(x=>{var y;for(let v=0;v<l;v+=1){const w=(((y=x[v])==null?void 0:y.text)||"").length;w>c[v]&&(c[v]=w),c[v]<3&&(c[v]=3)}});const d=(x,y)=>x+" ".repeat(Math.max(0,y-x.length)),u=o[0],f=u.some(x=>x.isHeader);let h=`
`;const p=new Array(l).fill(0).map((x,y)=>f&&u[y]&&u[y].text||"");return h+=`| ${p.map((x,y)=>d(x,c[y])).join(" | ")} |
`,h+=`| ${c.map(x=>"-".repeat(Math.max(3,x))).join(" | ")} |
`,(f?o.slice(1):o).forEach(x=>{h+=`| ${new Array(l).fill(0).map((y,v)=>d(x[v]&&x[v].text||"",c[v])).join(" | ")} |
`}),h}var hre=fre,kR=td.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:ire,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:n}){const{colgroup:s,tableWidth:r,tableMinWidth:i}=are(t,this.options.cellMinWidth),o=n.style;function l(){return o||(r?`width: ${r}`:`min-width: ${i}`)}const c=["table",Ni(this.options.HTMLAttributes,n,{style:l()}),s,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},c]:c},parseMarkdown:(t,n)=>{const s=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(n.createNode("tableHeader",{},[{type:"paragraph",content:n.parseInline(i.tokens)}]))}),s.push(n.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(o=>{i.push(n.createNode("tableCell",{},[{type:"paragraph",content:n.parseInline(o.tokens)}]))}),s.push(n.createNode("tableRow",{},i))}),n.createNode("table",void 0,s)},renderMarkdown:(t,n)=>hre(t,n),addCommands(){return{insertTable:({rows:t=3,cols:n=3,withHeaderRow:s=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const l=lre(o.schema,t,n,s);if(i){const c=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(le.near(r.doc.resolve(c)))}return!0},addColumnBefore:()=>({state:t,dispatch:n})=>wse(t,n),addColumnAfter:()=>({state:t,dispatch:n})=>jse(t,n),deleteColumn:()=>({state:t,dispatch:n})=>Sse(t,n),addRowBefore:()=>({state:t,dispatch:n})=>Cse(t,n),addRowAfter:()=>({state:t,dispatch:n})=>_se(t,n),deleteRow:()=>({state:t,dispatch:n})=>Tse(t,n),deleteTable:()=>({state:t,dispatch:n})=>Ise(t,n),mergeCells:()=>({state:t,dispatch:n})=>BN(t,n),splitCell:()=>({state:t,dispatch:n})=>VN(t,n),toggleHeaderColumn:()=>({state:t,dispatch:n})=>Oc("column")(t,n),toggleHeaderRow:()=>({state:t,dispatch:n})=>Oc("row")(t,n),toggleHeaderCell:()=>({state:t,dispatch:n})=>Ose(t,n),mergeOrSplit:()=>({state:t,dispatch:n})=>BN(t,n)?!0:VN(t,n),setCellAttribute:(t,n)=>({state:s,dispatch:r})=>Pse(t,n)(s,r),goToNextCell:()=>({state:t,dispatch:n})=>UN(1)(t,n),goToPreviousCell:()=>({state:t,dispatch:n})=>UN(-1)(t,n),fixTables:()=>({state:t,dispatch:n})=>(n&&vR(t),!0),setCellSelection:t=>({tr:n,dispatch:s})=>{if(s){const r=$e.create(n.doc,t.anchorCell,t.headCell);n.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Jd,"Mod-Backspace":Jd,Delete:Jd,"Mod-Delete":Jd}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[qse({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],nre({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const n={name:t.name,options:t.options,storage:t.storage};return{tableRole:da(Po(t,"tableRole",n))}}});It.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(kR.configure(this.options.table)),this.options.tableCell!==!1&&t.push(SR.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(sre.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(rre.configure(this.options.tableRow)),t}});kR.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),borderPreset:{default:null,parseHTML:n=>{const s=n.getAttribute("class")||"";return/\btbl-border-all\b/.test(s)?"all":/\btbl-border-h\b/.test(s)?"h":/\btbl-border-v\b/.test(s)?"v":/\btbl-border-none\b/.test(s)?"none":null},renderHTML:n=>({class:n.borderPreset?`tbl-border-${n.borderPreset}`:null,style:"border-collapse:collapse;"})}}}}).configure({resizable:!0});SR.extend({addAttributes(){var t;return{...(t=this.parent)==null?void 0:t.call(this),backgroundColor:{default:null,parseHTML:n=>n.style.backgroundColor||n.getAttribute("data-bg")||null,renderHTML:n=>{const s={};return n.backgroundColor&&(s.style=`background-color:${n.backgroundColor}`),{...s,"data-bg":n.backgroundColor||null}}}}}});const bm={Patient:[{label:"UHID",token:"{{ patient.uhid }}"},{label:"Name",token:"{{ patient.name }}"},{label:"Gender",token:"{{ patient.gender }}"},{label:"DOB",token:'{{ patient.dob | datefmt("%d-%b-%Y") }}'},{label:"Phone",token:"{{ patient.phone }}"},{label:"Email",token:"{{ patient.email }}"},{label:"Address",token:"{{ patient.address }}"}],"Clinical  Last Visit":[{label:"Visit Date",token:'{{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}'},{label:"Doctor",token:"{{ clinical.last_visit.doctor }}"},{label:"Department",token:"{{ clinical.last_visit.department }}"},{label:"Chief Complaints",token:"{{ clinical.last_visit.chief_complaints }}"},{label:"Diagnosis",token:"{{ clinical.last_visit.diagnosis }}"}],"Clinical  Lab Results (loop)":[{label:"Lab Results Table",token:`<table border="1" cellspacing="0" cellpadding="6">
  <tr><th>Test</th><th>Code</th><th>Status</th><th>Result</th><th>Units</th></tr>
  {% for r in clinical.lab_results %}
    <tr>
      <td>{{ r.test }}</td><td>{{ r.code }}</td>
      <td>{{ r.status }}</td><td>{{ r.result }}</td><td>{{ r.units }}</td>
    </tr>
  {% endfor %}
</table>`}],Billing:[{label:"Invoices Count",token:"{{ billing.summary.invoices_count }}"},{label:"Total",token:"{{ billing.summary.total_net }}"},{label:"Paid",token:"{{ billing.summary.total_paid }}"},{label:"Balance",token:"{{ billing.summary.balance }}"}]};function pre({onInsert:t}){const[n,s]=g.useState(()=>new Set(Object.keys(bm))),[r,i]=g.useState(""),o=g.useMemo(()=>{const d=r.trim().toLowerCase();return Object.entries(bm).filter(([f])=>n.has(f)).map(([f,h])=>{const p=d?h.filter(m=>m.label.toLowerCase().includes(d)||m.token.toLowerCase().includes(d)):h;return{group:f,items:p}}).filter(f=>f.items.length>0)},[n,r]),l=d=>{const u=new Set(n);u.has(d)?u.delete(d):u.add(d),s(u)},c=(d,u)=>{d.dataTransfer.setData("text/x-token",u),d.dataTransfer.setData("text/plain",u)};return a.jsxs("div",{className:"border rounded-lg p-3 bg-white space-y-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:"Field Catalog"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(bm).map(d=>a.jsxs("label",{className:"inline-flex items-center gap-1 text-xs border rounded px-2 py-1 bg-gray-50",children:[a.jsx("input",{type:"checkbox",checked:n.has(d),onChange:()=>l(d)}),d]},d))}),a.jsx("input",{value:r,onChange:d=>i(d.target.value),placeholder:"Search fields",className:"w-full border rounded px-2 py-1 text-sm"}),a.jsx("div",{className:"space-y-4",children:o.map(({group:d,items:u})=>a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-semibold text-gray-600 mb-1",children:d}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((f,h)=>a.jsx("div",{draggable:!0,onDragStart:p=>c(p,f.token),onDoubleClick:()=>t&&t(f.token),className:"cursor-grab active:cursor-grabbing text-[11px] px-2 py-1 rounded-md bg-gray-50 hover:bg-gray-100 border",title:"Drag into editor or double-click to insert",children:f.label},h))})]},d))}),a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Custom token"}),a.jsxs("form",{onSubmit:d=>{d.preventDefault();const u=d.target.elements.token.value.trim();u&&(t&&t(u),d.target.reset())},children:[a.jsx("input",{name:"token",placeholder:"e.g. {{ my.custom }}",className:"border rounded px-2 py-1 text-sm w-full"}),a.jsx("button",{className:"mt-2 w-full px-2 py-1 border rounded text-sm",children:"Insert"})]})]})]})}const Eu=`@page {
  size: A4;
  margin: 18mm 16mm 18mm 16mm;
}
header.tpl-header { position: running(doc-header); }
footer.tpl-footer { position: running(doc-footer); }
@page {
  @top-center { content: element(doc-header); }
  @bottom-center { content: element(doc-footer); }
}
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-size: 12px; }
h1,h2,h3 { margin: 0 0 8px 0; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 6px; }`,Hn={HeaderMinimal:`
<header class="tpl-header" style="font-size:12px;border-bottom:1px solid #ccc;padding-bottom:6px;display:flex;justify-content:space-between;align-items:center;">
  <div>
    <div style="font-weight:700">Hospital Name</div>
    <div style="font-size:11px;">Address line 1, City</div>
  </div>
  <img src="/media/uploads/sample/hospital_logo.png" alt="Logo" style="height:28px"/>
</header>`.trim(),FooterMinimal:`
<footer class="tpl-footer" style="font-size:11px;border-top:1px solid #ccc;padding-top:6px;display:flex;justify-content:space-between;">
  <div>UHID: {{ patient.uhid }} | {{ patient.name }}</div>
  <div>Page: counter(page) / counter(pages)</div>
</footer>`.trim(),SignatureBlock:`
<div style="margin-top:60px;display:flex;gap:40px;">
  <div>Patient/Guardian Signature: __________________</div>
  <div>Doctor: __________________</div>
  <div>Witness: __________________</div>
</div>`.trim(),CoverPage:`
<section style="display:flex;flex-direction:column;min-height:240mm;justify-content:center;align-items:center;text-align:center;gap:8px;">
  <img src="/media/uploads/sample/hospital_logo.png" alt="Logo" style="height:64px;opacity:0.8"/>
  <h1 style="font-size:28px;">Patient Clinical Summary</h1>
  <div style="font-size:14px">UHID: {{ patient.uhid }} &nbsp; | &nbsp; {{ patient.name }}</div>
  <div style="margin-top:40px;font-size:12px;color:#666">Generated on {{ now }}</div>
</section>`.trim()},mre=[{key:"clinical_summary_v2",title:"Clinical Summary  Header/Footer + Tables",category:"report",html:`
<h1>Clinical Summary</h1>
<p><b>UHID:</b> {{ patient.uhid }}<br/>
<b>Name:</b> {{ patient.name }}<br/>
<b>Gender:</b> {{ patient.gender }}<br/>
<b>DOB:</b> {{ patient.dob | datefmt("%d-%b-%Y") }}</p>

{% if clinical.last_visit.date %}
<h3>Last Visit</h3>
<p><b>Date:</b> {{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}<br/>
<b>Doctor:</b> {{ clinical.last_visit.doctor }}<br/>
<b>Department:</b> {{ clinical.last_visit.department }}<br/>
<b>Chief Complaints:</b> {{ clinical.last_visit.chief_complaints }}<br/>
<b>Diagnosis:</b> {{ clinical.last_visit.diagnosis }}</p>
{% endif %}

{% if clinical.lab_results %}
<h3>Recent Lab Results</h3>
<table border="1" cellspacing="0" cellpadding="6">
  <tr><th>Test</th><th>Code</th><th>Status</th><th>Result</th><th>Units</th></tr>
  {% for r in clinical.lab_results %}
    <tr>
      <td>{{ r.test }}</td><td>{{ r.code }}</td><td>{{ r.status }}</td><td>{{ r.result }}</td><td>{{ r.units }}</td>
    </tr>
  {% endfor %}
</table>
{% endif %}

{% if billing.summary %}
<h3>Billing Summary</h3>
<p>
<b>Invoices:</b> {{ billing.summary.invoices_count }} |
<b>Total:</b> {{ billing.summary.total_net }} |
<b>Paid:</b> {{ billing.summary.total_paid }} |
<b>Balance:</b> {{ billing.summary.balance }}
</p>
{% endif %}
`.trim(),css:Eu,header:Hn.HeaderMinimal,footer:Hn.FooterMinimal},{key:"general_consent_v2",title:"General Consent  with Signature",category:"consent",html:`
<h2 style="text-align:center;">General Consent for Treatment</h2>
<p><b>UHID:</b> {{ patient.uhid }}<br/>
<b>Patient Name:</b> {{ patient.name }}<br/>
<b>Date:</b> {{ now }}</p>

<p>
I, {{ patient.name }}, hereby give consent for the proposed {{ data.procedure_name }}
under the care of {{ data.doctor_name }}.
</p>

<p><b>Risks explained:</b> {{ data.risks_text }}</p>

${Hn.SignatureBlock}
`.trim(),css:Eu,header:Hn.HeaderMinimal,footer:Hn.FooterMinimal},{key:"cover_plus_clinical",title:"Cover Page + Clinical",category:"report",html:`${Hn.CoverPage}
<div style="page-break-before:always;"></div>
<h1>Clinical Details</h1>
<p><b>UHID:</b> {{ patient.uhid }} &nbsp; <b>Name:</b> {{ patient.name }}</p>
{% if clinical.last_visit.date %}
<p><b>Last Visit:</b> {{ clinical.last_visit.date | datefmt("%d-%b-%Y") }}  {{ clinical.last_visit.doctor }}</p>
{% endif %}
`.trim(),css:Eu,header:Hn.HeaderMinimal,footer:Hn.FooterMinimal}];function gre({onUseLayout:t,onInsertBlock:n}){const s=g.useMemo(()=>[{key:"HeaderMinimal",title:"Header  Minimal",html:Hn.HeaderMinimal},{key:"FooterMinimal",title:"Footer  Minimal",html:Hn.FooterMinimal},{key:"SignatureBlock",title:"Signature Block",html:Hn.SignatureBlock},{key:"CoverPage",title:"Cover Page",html:Hn.CoverPage}],[]);return a.jsxs("div",{className:"border rounded-lg p-3 bg-white space-y-3",children:[a.jsx("div",{className:"text-sm font-semibold",children:"Template Gallery"}),a.jsx("div",{className:"space-y-2",children:mre.map(r=>a.jsxs("div",{className:"border rounded p-2",children:[a.jsx("div",{className:"text-sm font-medium",children:r.title}),a.jsxs("div",{className:"text-[11px] text-gray-500 mb-2",children:["Category: ",r.category]}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{className:"px-2 py-1 rounded text-sm border",onClick:()=>t&&t(r),children:"Use Layout"})})]},r.key))}),a.jsxs("div",{className:"pt-2 border-t",children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:"Blocks"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(r=>a.jsxs("button",{className:"border rounded p-2 text-left hover:bg-gray-50",onClick:()=>n&&n(r.html),title:"Insert into current editor",children:[a.jsx("div",{className:"text-xs font-medium",children:r.title}),a.jsx("div",{className:"text-[10px] text-gray-500",children:"Click to insert"})]},r.key))})]})]})}const xre=[{key:"A4",label:"A4 (210297 mm)"},{key:"A5",label:"A5 (148210 mm)"},{key:"Letter",label:"Letter (8.511 in)"},{key:"Legal",label:"Legal (8.514 in)"}];function yre({css:t="",onApply:n,onClose:s}){const[r,i]=g.useState("A4"),[o,l]=g.useState("portrait"),[c,d]=g.useState(18),[u,f]=g.useState(16),[h,p]=g.useState(18),[m,x]=g.useState(16),[y,v]=g.useState(!0);g.useEffect(()=>{const w=t.match(/@page\s*{([\s\S]*?)}/);if(!w)return;const j=w[1],N=C=>(j.match(C)||[,""])[1],S=N(/size:\s*([^;]+);/i);if(S){const C=S.trim().split(/\s+/);i(C[0]),C[1]&&l(C[1])}const _=(C,k)=>{const E=N(C);return E?parseInt(E,10):k};d(_(/margin-top:\s*([0-9]+)mm/i,c)),f(_(/margin-right:\s*([0-9]+)mm/i,u)),p(_(/margin-bottom:\s*([0-9]+)mm/i,h)),x(_(/margin-left:\s*([0-9]+)mm/i,m))},[]);const b=()=>`@page {
  size: ${r} ${o};
  margin-top: ${c}mm;
  margin-right: ${u}mm;
  margin-bottom: ${h}mm;
  margin-left: ${m}mm;
  ${y?'@bottom-right { content: "Page " counter(page) " of " counter(pages); font-size:10px; }':""}
}`;return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-xl",children:[a.jsx("div",{className:"px-4 py-3 border-b font-semibold",children:"Page Setup"}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("label",{className:"text-sm",children:["Size",a.jsx("select",{className:"w-full border rounded px-2 py-1",value:r,onChange:w=>i(w.target.value),children:xre.map(w=>a.jsx("option",{value:w.key,children:w.label},w.key))})]}),a.jsxs("label",{className:"text-sm",children:["Orientation",a.jsxs("select",{className:"w-full border rounded px-2 py-1",value:o,onChange:w=>l(w.target.value),children:[a.jsx("option",{value:"portrait",children:"Portrait"}),a.jsx("option",{value:"landscape",children:"Landscape"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsxs("label",{className:"text-sm",children:["Top (mm)",a.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:c,onChange:w=>d(+w.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Right (mm)",a.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:u,onChange:w=>f(+w.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Bottom (mm)",a.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:h,onChange:w=>p(+w.target.value)})]}),a.jsxs("label",{className:"text-sm",children:["Left (mm)",a.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:m,onChange:w=>x(+w.target.value)})]})]}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:w=>v(w.target.checked)}),"Show page numbers (WeasyPrint)"]}),a.jsx("pre",{className:"text-xs bg-gray-50 border rounded p-2 overflow-auto",children:b()})]}),a.jsxs("div",{className:"px-4 py-3 border-t flex justify-end gap-2",children:[a.jsx("button",{className:"px-3 py-2 border rounded",onClick:s,children:"Cancel"}),a.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>n&&n(b()),children:"Apply"})]})]})})}const wm=Eu;function eS({mode:t="create"}){var k;const{id:n}=ma(),s=jn(),i=((k=Fn().state)==null?void 0:k.preset)||null,[o,l]=g.useState({name:"",code:"",category:"report",subcategory:"",description:"",css:wm,is_active:!0}),[c,d]=g.useState(""),[u,f]=g.useState("<h1>New Template</h1><p>Use the Field Catalog or Gallery.</p>"),[h,p]=g.useState(""),[m,x]=g.useState("body"),y=t==="edit";g.useEffect(()=>{!y||!n||(async()=>{const M=(await SX(n)).data;l({name:M.name,code:M.code,category:M.category,subcategory:M.subcategory||"",description:M.description||"",css:M.css||wm,is_active:!!M.is_active});const D=M.html||"",R=D.match(/<header[^>]*class="[^"]*tpl-header[^"]*"[^>]*>[\s\S]*?<\/header>/i),T=D.match(/<footer[^>]*class="[^"]*tpl-footer[^"]*"[^>]*>[\s\S]*?<\/footer>/i);d(R?R[0]:""),p(T?T[0]:"");let P=D;R&&(P=P.replace(R[0],"")),T&&(P=P.replace(T[0],"")),f(P.trim()||"")})()},[y,n]),g.useEffect(()=>{!i||y||(l(E=>({...E,category:i.category||"report",name:E.name||i.title||"Untitled",code:E.code||(i.key?`${i.key}-${Date.now()}`:""),css:i.css||wm})),d(i.header||""),p(i.footer||""),f(i.html||""))},[i,y]);const v=g.useMemo(()=>[c,u,h].filter(Boolean).join(`
`),[c,u,h]),b=async()=>{if(!o.name.trim()||!o.code.trim()){$.error("Name and unique code are required");return}const E={...o,html:v,placeholders:{header:!!c,footer:!!h}};try{y?(await CX(n,E),$.success("Template updated")):(await kX(E),$.success("Template created")),s("/templates")}catch{}},w=E=>{l(M=>({...M,category:E.category||M.category,css:E.css||M.css,name:M.name||E.title,code:M.code||(E.key?`${E.key}-${Date.now()}`:"")})),d(E.header||""),p(E.footer||""),f(E.html||""),$.success("Layout applied")},j=E=>{m==="header"?d(M=>`${M}
${E}`):m==="footer"?p(M=>`${M}
${E}`):f(M=>`${M}
${E}`)},N=E=>{j(E)},[S,_]=g.useState(!1),C=E=>{l(M=>{const D=/@page\s*{[\s\S]*?}/.test(M.css||"");return{...M,css:D?M.css.replace(/@page\s*{[\s\S]*?}/,E):E+`
`+(M.css||"")}}),_(!1)};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>_(!0),className:"px-3 py-2 rounded border",children:"Page Setup"}),a.jsx("button",{onClick:b,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"}),S&&a.jsx(yre,{css:o.css,onApply:C,onClose:()=>_(!1)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-semibold",children:y?"Edit Template":"Create Template"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:b,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsx("input",{value:o.name,onChange:E=>l({...o,name:E.target.value}),className:"border rounded px-3 py-2",placeholder:"Template Name"}),a.jsx("input",{value:o.code,onChange:E=>l({...o,code:E.target.value}),className:"border rounded px-3 py-2",placeholder:"Unique Code (e.g., clinical_summary_v2)",disabled:y}),a.jsxs("select",{value:o.category,onChange:E=>l({...o,category:E.target.value}),className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"report",children:"Report"}),a.jsx("option",{value:"consent",children:"Consent"})]}),a.jsx("input",{value:o.subcategory,onChange:E=>l({...o,subcategory:E.target.value}),className:"border rounded px-3 py-2",placeholder:"Subcategory (optional)"}),a.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:o.is_active,onChange:E=>l({...o,is_active:E.target.checked})}),"Active"]})]}),a.jsx("textarea",{value:o.description,onChange:E=>l({...o,description:E.target.value}),placeholder:"Description (optional)",className:"border rounded px-3 py-2 w-full min-h-[80px]"}),a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-3",children:[a.jsx("div",{className:"flex gap-2",children:["header","body","footer"].map(E=>a.jsx("button",{onClick:()=>x(E),className:["px-3 py-1 rounded border text-sm",m===E?"bg-blue-600 text-white border-blue-600":"bg-white"].join(" "),children:E.toUpperCase()},E))}),m==="header"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Header (running top)"}),a.jsx(tm,{value:c,onChange:d})]}),m==="body"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Body"}),a.jsx(tm,{value:u,onChange:f})]}),m==="footer"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Footer (running bottom)"}),a.jsx(tm,{value:h,onChange:p})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"CSS (print styles)"}),a.jsx("textarea",{value:o.css,onChange:E=>l({...o,css:E.target.value}),className:"border rounded px-3 py-2 w-full min-h-[160px] font-mono text-xs"})]})]}),a.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-3",children:[a.jsx(pre,{onInsert:N}),a.jsx(gre,{onUseLayout:w,onInsertBlock:j}),a.jsxs("div",{className:"text-[11px] text-gray-500",children:[a.jsx("b",{children:"Note:"})," Save the template to use server-side merged preview & PDF."]})]})]})]})}function vre(t,n){const s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=n||"download",document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(s)}function bre({value:t,onSelect:n}){const[s,r]=g.useState(""),[i,o]=g.useState([]);return g.useEffect(()=>{const c=setTimeout(async()=>{if((s||"").trim().length<2){o([]);return}const{data:d}=await hA(s.trim());o(d.results||d.items||d||[])},300);return()=>clearTimeout(c)},[s]),a.jsxs("div",{children:[a.jsx("input",{value:s,onChange:l=>r(l.target.value),placeholder:"Search patient (UHID/Name/Phone)",className:"w-full border rounded px-3 py-2"}),a.jsxs("div",{className:"max-h-44 overflow-auto divide-y mt-2 rounded border bg-white",children:[i.map(l=>a.jsxs("div",{className:"p-2 cursor-pointer hover:bg-gray-50",onClick:()=>n&&n(l.id),children:[a.jsxs("div",{className:"text-sm font-medium",children:[l.uhid||`NH-${String(l.id).padStart(6,"0")}`,"  ",l.name||`${l.first_name} ${l.last_name||""}`]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[l.gender,"  ",l.phone]})]},l.id)),i.length===0&&a.jsx("div",{className:"p-2 text-xs text-gray-500",children:"Type at least 2 characters"})]})]})}function wre(){const[t,n]=g.useState("saved"),[s,r]=g.useState(null),[i,o]=g.useState([]),[l,c]=g.useState(""),[d,u]=g.useState(""),[f,h]=g.useState(1),[p,m]=g.useState("");g.useEffect(()=>{(async()=>{const v=await n0({category:"report",active:!0});o(v.data||[])})()},[]);const x=async()=>{if(!s||!l)return $.info("Select template and patient");try{const v=await pA(Number(l),Number(s));u(v.data.html||"")}catch{}},y=async()=>{if(!s||!l)return $.info("Select template and patient");try{const v=p?await TX(Number(l),{patient_id:Number(s),inline:!1,engine:p}):await EX(Number(l),Number(s));vre(v,`patient-${s}.pdf`)}catch{}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Generate Patient Reports"}),a.jsx("div",{className:"flex gap-2",children:["saved","predefined","customized"].map(v=>a.jsx("button",{onClick:()=>n(v),className:["px-3 py-1 rounded border text-sm",t===v?"bg-blue-600 text-white border-blue-600":"bg-white"].join(" "),children:v==="saved"?"Saved Formats":v==="predefined"?"Predefined":"Customized"},v))}),t==="saved"&&a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"md:col-span-1 border rounded-lg p-3 bg-white space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:"1) Select Template"}),a.jsxs("select",{value:l,onChange:v=>c(v.target.value),className:"border rounded px-3 py-2 w-full",children:[a.jsx("option",{value:"",children:"-- choose report template --"}),i.map(v=>a.jsxs("option",{value:v.id,children:[v.name," (",v.code,")"]},v.id))]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:"2) Choose Patient"}),a.jsx(bre,{value:s,onSelect:r})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Engine"}),a.jsxs("select",{value:p,onChange:v=>m(v.target.value),className:"border rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Auto"}),a.jsx("option",{value:"weasyprint",children:"WeasyPrint"}),a.jsx("option",{value:"xhtml2pdf",children:"xhtml2pdf (fallback)"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:x,className:"px-3 py-2 border rounded",children:"Preview"}),a.jsx("button",{onClick:y,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Download PDF"})]})]})]}),a.jsxs("div",{className:"md:col-span-2 border rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Preview"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:()=>h(v=>Math.max(.5,+(v-.1).toFixed(2))),children:""}),a.jsxs("div",{className:"text-xs w-12 text-center",children:[Math.round(f*100),"%"]}),a.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:()=>h(v=>Math.min(2,+(v+.1).toFixed(2))),children:"+"})]})]}),a.jsx("div",{className:"w-full",style:{transform:`scale(${f})`,transformOrigin:"0 0"},children:a.jsx("iframe",{title:"report-preview",className:"w-full min-h-[900px]",srcDoc:d||""})})]})]}),t==="predefined"&&a.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[a.jsx("div",{className:"md:col-span-1",children:a.jsx(TemplateGallery,{onUseLayout:v=>window.location.assign("/templates/new"),onInsertBlock:()=>{}})}),a.jsx("div",{className:"md:col-span-2 border rounded-lg p-4 bg-white text-sm text-gray-600",children:'Pick a layout from the left to open the editor pre-filled. Save it, then return to "Saved Formats".'})]}),t==="customized"&&a.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[a.jsx("div",{className:"text-sm mb-2",children:"Create your own template with header/footer, drag-drop fields and blocks."}),a.jsx("a",{href:"/templates/new",className:"px-3 py-2 rounded bg-blue-600 text-white inline-block",children:"Open Template Builder"})]})]})}function jre(){const[t,n]=g.useState(""),[s,r]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState({procedure_name:"",doctor_name:"",risks_text:"",witness_name:""}),[d,u]=g.useState(""),[f,h]=g.useState([]),p=async y=>{if(!y){h([]);return}try{const v=await AX(Number(y));h(v.data||[])}catch{}};g.useEffect(()=>{(async()=>{const y=await n0({category:"consent",active:!0});r(y.data||[])})()},[]);const m=async()=>{if(!t||!i){$.info("Select consent template and enter Patient ID");return}const y={data:{...l}},v=await pA(Number(i),Number(t),y);u(v.data.html||"")},x=async()=>{if(!t||!i){$.info("Select consent template and enter Patient ID");return}try{await MX(Number(t),{template_id:Number(i),data:{...l},finalize:!0,signed_by:l.doctor_name||void 0,witness_name:l.witness_name||void 0}),$.success("Consent saved"),p(t)}catch{}};return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Patient Consents"}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"md:col-span-1 border rounded-lg p-3 bg-white",children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:"Consent Template"}),a.jsxs("select",{value:i,onChange:y=>o(y.target.value),className:"border rounded px-3 py-2 w-full",children:[a.jsx("option",{value:"",children:"-- choose consent template --"}),s.map(y=>a.jsxs("option",{value:y.id,children:[y.name," (",y.code,")"]},y.id))]}),a.jsx("div",{className:"mt-3 text-sm font-semibold",children:"Patient"}),a.jsx("input",{value:t,onChange:y=>n(y.target.value),className:"border rounded px-3 py-2 w-full",placeholder:"Patient ID",onBlur:()=>p(e.target.value)}),a.jsx("div",{className:"mt-3 text-sm font-semibold",children:"Extra Fields"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{value:l.procedure_name,onChange:y=>c({...l,procedure_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Procedure name"}),a.jsx("input",{value:l.doctor_name,onChange:y=>c({...l,doctor_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Doctor name"}),a.jsx("textarea",{value:l.risks_text,onChange:y=>c({...l,risks_text:y.target.value}),className:"border rounded px-3 py-2 w-full min-h-[80px]",placeholder:"Risks explained..."}),a.jsx("input",{value:l.witness_name,onChange:y=>c({...l,witness_name:y.target.value}),className:"border rounded px-3 py-2 w-full",placeholder:"Witness name"})]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{onClick:m,className:"px-3 py-2 border rounded",children:"Preview"}),a.jsx("button",{onClick:x,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save PDF"})]})]}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:a.jsx("iframe",{title:"consent-preview",className:"w-full min-h-[400px]",srcDoc:d||""})}),a.jsxs("div",{className:"border rounded-lg bg-white",children:[a.jsxs("div",{className:"px-3 py-2 border-b text-sm font-semibold",children:["Existing Consents (Patient #",t||"-",")"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Template"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"PDF"})]})}),a.jsxs("tbody",{children:[f.map(y=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-3 py-2",children:y.id}),a.jsx("td",{className:"px-3 py-2",children:y.template_id}),a.jsx("td",{className:"px-3 py-2",children:y.status}),a.jsx("td",{className:"px-3 py-2",children:y.pdf_path?a.jsx("a",{href:y.pdf_path,target:"_blank",rel:"noreferrer",className:"text-blue-700 underline",children:"Open"}):a.jsx("span",{className:"text-gray-400",children:"-"})})]},y.id)),f.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-3 py-6 text-center text-gray-500",children:"No consents"})})]})]})})]})]})]})]})}function Nre(){return a.jsxs(a.Fragment,{children:[a.jsxs(XD,{children:[a.jsx(de,{path:"/auth/login",element:a.jsx(aF,{})}),a.jsx(de,{path:"/auth/register-admin",element:a.jsx(oF,{})}),a.jsx(de,{path:"/auth/verify",element:a.jsx(lF,{})}),a.jsx(de,{element:a.jsx(gF,{}),children:a.jsxs(de,{element:a.jsx(mF,{}),children:[a.jsx(de,{path:"/admin",element:a.jsx(cF,{})}),a.jsx(de,{path:"/dashboard",element:a.jsx(dF,{})}),a.jsx(de,{path:"/admin/roles",element:a.jsx(x2,{})}),a.jsx(de,{path:"/admin/permissions",element:a.jsx(y2,{})}),a.jsx(de,{path:"/admin/users",element:a.jsx(v2,{})}),a.jsx(de,{path:"/admin/departments",element:a.jsx(g2,{})}),a.jsx(de,{path:"/patients",element:a.jsx(Nz,{})}),a.jsx(de,{path:"/opd/schedules",element:a.jsx(Gz,{})}),a.jsx(de,{path:"/opd/appointments",element:a.jsx(tB,{})}),a.jsx(de,{path:"/opd/queue",element:a.jsx(nB,{})}),a.jsx(de,{path:"/opd/triage",element:a.jsx(rB,{})}),a.jsx(de,{path:"/opd/visit/:id",element:a.jsx(aB,{})}),a.jsx(de,{path:"/opd/masters",element:a.jsx(dB,{})}),a.jsx(de,{path:"/ipd/admissions",element:a.jsx(o6,{})}),a.jsx(de,{path:"/ipd/admission/:id",element:a.jsx(y6,{})}),a.jsx(de,{path:"/ipd/tracking",element:a.jsx(v6,{})}),a.jsx(de,{path:"/ipd/my",element:a.jsx(b6,{})}),a.jsx(de,{path:"/ipd/discharged",element:a.jsx(w6,{})}),a.jsx(de,{path:"/ipd/bedboard",element:a.jsx(j6,{})}),a.jsx(de,{path:"/ipd/masters",element:a.jsx(t6,{})}),a.jsx(de,{path:"/pharmacy/medicines",element:a.jsx(MG,{})}),a.jsx(de,{path:"/pharmacy/suppliers",element:a.jsx(PG,{})}),a.jsx(de,{path:"/pharmacy/locations",element:a.jsx(RG,{})}),a.jsx(de,{path:"/pharmacy/inventory",element:a.jsx(OG,{})}),a.jsx(de,{path:"/pharmacy/transactions",element:a.jsx(IG,{})}),a.jsx(de,{path:"/pharmacy/po",element:a.jsx($G,{})}),a.jsx(de,{path:"/pharmacy/grn",element:a.jsx(FG,{})}),a.jsx(de,{path:"/pharmacy/alerts",element:a.jsx(zG,{})}),a.jsx(de,{path:"/pharmacy/dispense",element:a.jsx(BG,{})}),a.jsx(de,{path:"/pharmacy/returns",element:a.jsx(VG,{})}),a.jsx(de,{path:"/pharmacy/prescriptions",element:a.jsx(UG,{})}),a.jsx(de,{path:"/pharmacy/prescriptions/new",element:a.jsx(XG,{})}),a.jsx(de,{path:"/pharmacy",element:a.jsx(WG,{})}),a.jsx(de,{path:"/lab/orders",element:a.jsx(dY,{})}),a.jsx(de,{path:"/lab/orders/:id",element:a.jsx(fY,{})}),a.jsx(de,{path:"/lab/masters",element:a.jsx(hY,{})}),a.jsx(de,{path:"/ris/orders",element:a.jsx(TY,{})}),a.jsx(de,{path:"/ris/orders/:id",element:a.jsx(PY,{})}),a.jsx(de,{path:"/ris/masters",element:a.jsx(AY,{})}),a.jsx(de,{path:"/ot/orders",element:a.jsx(qY,{})}),a.jsx(de,{path:"/ot/orders/:id",element:a.jsx(GY,{})}),a.jsx(de,{path:"/ot/masters",element:a.jsx(YY,{})}),a.jsx(de,{path:"/billing",element:a.jsx(lX,{})}),a.jsx(de,{path:"/billing/invoices/:id",element:a.jsx(hX,{})}),a.jsx(de,{path:"/emr",element:a.jsx(NX,{})}),a.jsx(de,{path:"/templates",element:a.jsx(RX,{})}),a.jsx(de,{path:"/templates/new",element:a.jsx(eS,{mode:"create"})}),a.jsx(de,{path:"/templates/:id/edit",element:a.jsx(eS,{mode:"edit"})}),a.jsx(de,{path:"/templates/generate",element:a.jsx(wre,{})}),a.jsx(de,{path:"/templates/consents",element:a.jsx(jre,{})})]})}),a.jsx(de,{path:"*",element:a.jsx(SC,{to:"/auth/login",replace:!0})})]}),a.jsx(wr,{position:"top-right",richColors:!0,closeButton:!0})]})}jm.createRoot(document.getElementById("root")).render(a.jsx(G.StrictMode,{children:a.jsx(Yz,{children:a.jsx(i4,{children:a.jsx(Nre,{})})})}));
